---
app-id: org.gnome.NautilusDevel
runtime: org.gnome.Platform
runtime-version: master
sdk: org.gnome.Sdk
command: nautilus
tags:
- devel
- development
- nightly
finish-args:
- "--share=ipc"
- "--socket=x11"
- "--socket=wayland"
- "--talk-name=org.gnome.OnlineAccounts"
- "--talk-name=org.freedesktop.Tracker3.Miner.Files"
- "--talk-name=org.freedesktop.Tracker3.Miner.Extract"
- "--filesystem=host"
- "--talk-name=org.gtk.vfs"
- "--talk-name=org.gtk.vfs.*"
- "--share=network"
- "--filesystem=xdg-run/dconf"
- "--filesystem=~/.config/dconf:ro"
- "--talk-name=ca.desrt.dconf"
- "--env=DCONF_USER_CONFIG_DIR=.config/dconf"
- "--env=TRACKER_SPARQL_BACKEND=bus"
modules:
- name: exiv2
  config-opts:
  - "-DCMAKE_INSTALL_PREFIX=/app"
  - "-DCMAKE_INSTALL_LIBDIR=/app/lib"
  buildsystem: cmake-ninja
  sources:
  - type: archive
    url: https://github.com/Exiv2/exiv2/archive/v0.26.tar.gz
    sha256: 51cffa8d19d67e1da6c1d0f570a75b8f6c814113367318c2c0407691888c5f01
- name: gexiv2
  buildsystem: meson
  builddir: true
  config-opts:
  - "--libdir=/app/lib"
  - "-Dintrospection=false"
  sources:
  - type: git
    url: https://gitlab.gnome.org/GNOME/gexiv2.git
- name: tracker-miners
  buildsystem: meson
  cleanup:
  - "/etc"
  - "/lib"
  - "/libexec"
  - "/share/dbus-1/services/org.freedesktop.Tracker3.Miner.Extract.service"
  - "/share/dbus-1/services/org.freedesktop.Tracker3.Writeback.service"
  - "/share/tracker/miners/org.freedesktop.Tracker3.Miner.Extract.service"
  - "/share/tracker-miners"
  - "/share/glib-2.0/schemas/org.freedesktop.Tracker3.Extract.gschema.xml"
  - "/share/glib-2.0/schemas/org.freedesktop.Tracker3.Writeback.gschema.xml"
  config-opts:
  - "-Dextract=false"
  - "-Dgeneric_media_extractor=none"
  - "-Dminer_apps=false"
  - "-Dminer_fs=true"
  - "-Dminer_rss=false"
  - "-Dsystemd_user_services=no"
  - "-Dwriteback=false"
  sources:
  - type: git
    url: https://gitlab.gnome.org/GNOME/tracker-miners.git
    branch: master
- name: gnome-desktop
  buildsystem: meson
  config-opts:
  - "-Ddebug_tools=false"
  - "-Ddesktop_docs=false"
  - "-Dudev=disabled"
  sources:
  - type: git
    url: https://gitlab.gnome.org/GNOME/gnome-desktop.git
- name: gnome-autoar
  sources:
  - type: git
    url: https://gitlab.gnome.org/GNOME/gnome-autoar.git
- buildsystem: meson
  builddir: true
  name: nautilus
  config-opts:
  - "--libdir=/app/lib"
  - "-Dprofile=Devel"
  sources:
  - type: git
    url: https://gitlab.gnome.org/GNOME/nautilus.git

