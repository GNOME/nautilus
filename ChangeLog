2000-11-28  J Shane Culpepper  <pepper@eazel.com>

	reviewed by: <delete if not using a buddy>

	* components/services/trilobite/libtrilobite/Makefile.am:

	The real fix has now been found for tinderbox breakage.

2000-11-28  Rebecca Schulman  <rebecka@eazel.com>
	Fixes for bugs 2376, 4553, and 3799
	This should make the complex search bar usable
	and visible.

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* configure.in:
	* libnautilus-extensions/Makefile.am:
	* cut-n-paste-code/widgets/Makefile.am:
	* cut-n-paste-code/widgets/gimphwrapbox/.cvsignore:
	* cut-n-paste-code/widgets/gimphwrapbox/Makefile.am:
	* cut-n-paste-code/widgets/gimphwrapbox/gtkhwrapbox.c:
	(gtk_hwrap_box_get_type), (gtk_hwrap_box_class_init),
	(gtk_hwrap_box_init), (gtk_hwrap_box_new), (get_child_requisition),
	(_gtk_hwrap_box_size_request), (get_layout_size),
	(gtk_hwrap_box_size_request), (reverse_list_row_children),
	(layout_row), (layout_rows), (gtk_hwrap_box_size_allocate):
	* cut-n-paste-code/widgets/gimphwrapbox/gtkhwrapbox.h:
	* cut-n-paste-code/widgets/gimphwrapbox/gtkwrapbox.c:
	(gtk_wrap_box_get_type), (gtk_wrap_box_class_init),
	(gtk_wrap_box_init), (gtk_wrap_box_set_arg),
	(gtk_wrap_box_get_arg), (gtk_wrap_box_set_child_arg),
	(gtk_wrap_box_get_child_arg), (gtk_wrap_box_child_type),
	(gtk_wrap_box_set_homogeneous), (gtk_wrap_box_set_hspacing),
	(gtk_wrap_box_set_vspacing), (gtk_wrap_box_set_justify),
	(gtk_wrap_box_set_line_justify), (gtk_wrap_box_set_aspect_ratio),
	(gtk_wrap_box_pack), (gtk_wrap_box_reorder_child),
	(gtk_wrap_box_query_child_packing),
	(gtk_wrap_box_query_child_forced_break),
	(gtk_wrap_box_set_child_packing),
	(gtk_wrap_box_set_child_forced_break),
	(gtk_wrap_box_query_line_lengths), (gtk_wrap_box_map),
	(gtk_wrap_box_unmap), (gtk_wrap_box_draw), (gtk_wrap_box_expose),
	(gtk_wrap_box_add), (gtk_wrap_box_remove), (gtk_wrap_box_forall):
	* cut-n-paste-code/widgets/gimphwrapbox/gtkwrapbox.h:
	Copied and pasted the wrapping hbox from the Gimp.
	I made a few modifications, including some resizing requests,
	when the chosen size is not the right one for the actual 
	space available.  Sizing wrapping boxes is a tricky problem
	with gtk, because they have nonstandard sizing requests
	(they can request x or y or z) and my solution is probably
	not optimal, since some of the sizing adjustments are visible
	on screen.  However, a better fix is a lot more time consuming,
	and should probably wait for past 1.0.
	

	* src/nautilus-complex-search-bar.c:
	(search_bar_criterion_type_changed_callback),
	(queue_search_bar_resize_callback),
	(nautilus_complex_search_bar_initialize_class),
	(nautilus_complex_search_bar_initialize), (real_activate),
	(nautilus_complex_search_bar_queue_resize),
	(attach_criterion_to_search_bar),
	(unattach_criterion_from_search_bar),
	(load_find_them_pixmap_widget), (more_options_callback),
	(fewer_options_callback), (update_options_buttons_state):
	* src/nautilus-complex-search-bar.h:
	Changed the criteria layout to be in a vbox instead of a table,
	so that we can insert wrapping hboxes.  Added a new function
	that will effectively resize the complex search bar, and we call
	it at appropriate points. Switched the packing order of the
	buttons, since the wrap box has only one packing function, and it is
	a pack_start, rather than a pack_end function
	
	* src/nautilus-search-bar-criterion-private.h:
	* src/nautilus-search-bar-criterion.c: (queue_bar_resize_callback),
	(nautilus_search_bar_criterion_new_from_values),
	(nautilus_search_bar_criterion_show),
	(nautilus_search_bar_criterion_hide),
	(nautilus_search_bar_criterion_update_valid_criteria_choices),
	(hide_date_widget), (show_date_widget), (make_emblem_value_menu):
	Put the criteria into wrapping boxes as part of their creation, and 
	trigger a resize of the complex search bar when the wrapping box 
	complains about its allocated size.
	

2000-11-28  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(fill_canvas_from_gradient_buffer),
	(fill_drawable_from_gradient_buffer),
	(update_drawable_with_pixbuf), (draw_pixbuf_tiled):
	
	Update bug number in FIXME. Fixing some tabbing.

2000-11-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:

	One more try...

2000-11-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:

	Another stab at fixing tinderbox.

2000-11-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:

	Fixing tinderbox build breakage from my last checkin.

2000-11-28  Andy Hertzfeld  <andy@eazel.com>

	fixed bugs 4864, 4865, 4866 abd 4868, involving adding and removing
	items from the property browser, by rewording error messages and
	tweaking some logic.

	* src/nautilus-property-browser.c: (add_color_to_browser),
	(is_reserved_keyword), (emblem_dialog_clicked), (add_new_emblem),
	(make_properties_from_directories),
	(make_properties_from_xml_node):

2000-11-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:

	Fix for bug #3110. Make sure the private headers do not
	get installed.

2000-11-28  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_initialize):
	Set cursor_obscured flag to false and update event mask
	to allow pointer moved events.
	
	(nautilus_entry_motion_notify):
	Display the cursor if it was previouslly hidden.

	(obscure_cursor):
	New function that hides the cursor when the user begins typing.

	(nautilus_entry_key_press):
	Call obscure_cursor function.
	
	* libnautilus-extensions/nautilus-entry.h:
	Added cursor_obscured flag to entry class.
	
	* libnautilus-extensions/nautilus-gdk-extensions.c:	
	* libnautilus-extensions/nautilus-gdk-extensions.h:
	(nautilus_gdk_window_set_invisible_cursor):
	New function to hide the cursor of the widget passed in.
	
2000-11-27  Maciej Stachowiak  <mjs@eazel.com>

	* components/text/Makefile.am: Added definition of NULL to shut up
	tinderbox.

2000-11-27  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Fixed bugs 3608 (Tree view disclosure triangle behavior on empty
	folders is confusing) and 4368 (Tree View gets confused by
	renaming file in closed folder).
	
	* libnautilus-extensions/nautilus-ctree.h: Reindented.

	* libnautilus-extensions/nautilus-ctree.c:
	(nautilus_ctree_realize, nautilus_ctree_unrealize,
	nautilus_ctree_button_press, nautilus_ctree_draw_expander,
	draw_row, nautilus_ctree_unlink, change_focus_row_expansion,
	nautilus_ctree_last, nautilus_ctree_find_node_ptr,
	nautilus_ctree_find_all_by_row_data): Made NautilusCTree handle
	all expansion and expander-related stuff based on whether the
	node's is_leaf field is set, not based on whether it actually has
	children. This way, by setting is_leaf to FALSE, you can make a
	node with no children expandable.

	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_insert_model_node, forget_view_node,
	nautilus_tree_view_update_model_node,
	nautilus_tree_view_model_done_loading_callback,
	nautilus_tree_view_initialize, nautilus_tree_view_destroy),
	expand_node_for_file, insert_hack_node, remove_hack_node,
	freeze_if_have_hack_node): When inserting or updating nodes, set
	is_leaf to FALSE if the node represents a directory, otherwise
	TRUE. Remove all code relating to hack node handling. Combined
	with the change above, this makes normal directories expand
	normally, and prevents directories from collapsing when files
	inside them are renamed.	

2000-11-27  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize):
	fixed bug 4420, non-portable use of string macro, by using the N_
	macro as Darin suggested.
	
	Also, fixed up some glitches in the ChangeLog from previous
	check-ins.
	
2000-11-27  Mathieu Lacage  <mathieu@eazel.com>

	Might fix tinderbox.
	* components/text/Makefile.am:

2000-11-27  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_contains_text):
	Fixed bugzilla 4756 - binary files previewed on icons.
	Turned out to be easy - the nautilus_file_contains_text was 
	over-optimistic. Changed it to only mark for preview actual text files 
	(files with the "text" MIME supertype).
	

2000-11-27  Andy Hertzfeld  <andy@eazel.com>

	added a new text view component with zooming, settable fonts and
	text-oriented services. The services are currently hardwired but there
	will be a framework soon.  You may have to delete your
	/gnome/share/oaf/text-plain.oafinfo to see it in action.
	
	* configure.in:	
	* components/Makefile.am:
	* components/text/.cvsignore:
	* components/text/Makefile.am:
	build stuff for the new text view
	
	* components/text/main.c: (text_view_object_destroyed),
	(text_view_make_object), (main):
	factory object for the text view
	
	* components/text/nautilus-text-view-ui.xml:
	xml file defining the menus for the text view

	* components/text/nautilus-text-view.oafinfo:
	oaf definitions for the text view
	
	* components/text/nautilus-text-view.h:
	interface file for the text view
	
	* components/text/nautilus-text-view.c:
	(nautilus_text_view_initialize_class),
	(nautilus_text_view_initialize), (detach_file),
	(nautilus_text_view_destroy),
	(nautilus_text_view_get_nautilus_view),
	(nautilus_text_view_update), (nautilus_text_view_load_uri),
	(text_view_load_location_callback),
	(nautilus_text_view_update_font), (get_selected_text),
	(text_view_search_callback), (text_view_lookup_callback),
	(nautilus_text_view_set_font), (handle_ui_event),
	(merge_bonobo_menu_items), (nautilus_text_view_zoom_to_level),
	(nautilus_text_view_bump_zoom_level), (zoomable_zoom_in_callback),
	(zoomable_zoom_out_callback), (zoom_index_from_float),
	(zoomable_set_zoom_level_callback),
	(zoomable_zoom_to_fit_callback):
	implementation for the text view
		
	* libnautilus-extensions/nautilus-icon-container.c:
	(lay_down_icons_horizontal):
	fixed bug 3485, icon layout not using all of the available space, by tweaking the
	code to not require the extra space between the columns
	
2000-11-27  Darin Adler  <darin@eazel.com>

	* nautilus.spec.in: Removed a file that's no longer present.
	This is another crack at fixing the Tinderbox.

	* components/services/install/lib/.cvsignore: Ignore the
	new .la file too.

2000-11-27  Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in: added check for esd via m4 macro.

2000-11-27  Gene Z. Ragan  <gzr@eazel.com>

	buddy: Pavel Cisler <pavel@eazel.com>

	We now use the "noauto" flag in the fstab entry for the device
	to determine if the volume is removable. This is still imperfect,
	but much better than the enumerated case that was being used before.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_volume_is_removable),
	(nautilus_volume_monitor_get_removable_volumes),
	(mnttab_add_mount_volume), (mntent_add_mount_volume):

	* libnautilus-extensions/nautilus-volume-monitor.h:
	Added is_removable field to NautilusVolume struct.
	
2000-11-27  Darin Adler  <darin@eazel.com>

	* components/services/install/lib/Makefile.am:
	Makefile listed ".o" files instead of sources, making srcdir ==
	builddir builds not compile anything! Fixed so the files are
	compiled even when srcdir == builddir; this makes us all see the
	errors we were previously seeing only on the Tinderbox.
	
	* components/services/install/lib/eazel-softcat-private.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_class_initialize):
	* components/services/install/lib/eazel-softcat.h:
	Tweaked and disabled enough code so it builds now. This fixes the
	Tinderbox build.

2000-11-27  Andy Hertzfeld  <andy@eazel.com>

	* icons/Makefile.am:
	* icons/eazel/i-directory-*:
	* icons/emblem-changed.gif:
	* icons/emblem-encrypted.gif:
	* icons/emblem-remote.gif:
	
	removed some ancient, unused emblem images, and added updated
	folder icons in eazel theme from Susan.
		
2000-11-27  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c:
	(hide_rename_widget):
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(create_selection_shadow):
	Remove two different FIXMEs about using gtk_object_destroy instead
	of gtk_object_unref. It turns out that for widgets, destroy is the
	right way to let go.

2000-11-27  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	fixed bug where the "Reset Background" command in the icon view
	was not being disabled when the background was the default.
	
2000-11-27  Rebecca Schulman <rebecka@eazel.com>
	(committed under eli@eazel.com)

	* components/services/install/lib/eazel-softcat.h:
	Added a couple of missing semicolons, which hopefully will
	make tinderbox happy.

2000-11-27 John Fleck <jfleck@inkstain.net>

	* components/help/converters/gnome-db2html2/sect-elements.c
	add line to sect_author_characters to print out contents of author
	tag; fixing bug #4801
	
	elements in body of doc

2000-11-26  Maciej Stachowiak  <mjs@eazel.com>

	Some build fixes to make tinderbox happy.

	* components/services/install/lib/eazel-package-system-private.h:
	Add return types (randomly guessed `void') to function pointer
	members of structs.

	* components/services/install/lib/eazel-package-system.h: Don't
	include the private header in the public header. Add some
	semicolons after some typedefs. Add a missing comma in an enum
	declaration. Add prototype for `eazel_package_system_unref'.

	* components/services/install/lib/Makefile.am: Comment out
	libeazelpackagesystem.la from the build, since even after these
	changes it won't compile.

2000-11-25  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/sect-preparse.c:
        (sect_preparse_sect_start_element):
        Allow navigation links at the end of the glossary (this makes sure
        </BODY> and </HTML> tags are added)

2000-11-24  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/help-method.c:
        (old_help_file): Removed
        (find_help_file): Change this code to make it more consistant and
        clear. I think it also made it go from O(n^2) to O(n) for the case
        of HTML files (even though in practice this may not mean much since n
        is small). Anyway, this is a better fix for bug #4724

2000-11-23  Ali Abdin  <aliabdin@aucegypt.edu>

	Preliminary glossary supports.
	Fix bug #2399, #4702, #4724. Partial fix for #4724
	(a few of the above are thanks to patches/mails from
	jfleck@inkstain.net)
	Some other misc. bug-fixing.
	Cleaned up some code.
	Preliminary glossary support (thanks to a patch by
	jfleck@inkstain.net)
	
	* components/help/help-method.c:
	(file_in_info_path):
	Fix a typo preventing it from searching /usr/gnome/info
	Add in support for /usr/share/info directory for Debian (hopefully
	this fixes bug #4414)
	(transform_file),
	(find_help_file): Move the searching for HTML files into the
	find_help_file function to make things consistant. Fixes bug #4724

	* components/help/converters/gnome-db2html2/gdb3html.c:
	(init_entities): Conver entities to use a table, and add support for
	iso-latin characters (for i18n purposes).
	(parse_file): set version to XML_DEFAULT_VERSION, fixes bug #2399
	#if 0'd out a useless call to a function
	(xml_parse_file): #if 0'd out this function since we no longer use it
	
	* components/help/converters/gnome-db2html2/sect-elements.c:
	(sect_figure_start_element): 
	Increment the figure count as soon as we enter (instead of when we
	leave) (should fix #4702)

	* components/help/converters/gnome-db2html2/gdb3html.[ch]:
	* components/help/converters/gnome-db2html2/sect-elements.[ch]:
	* components/help/converters/gnome-db2html2/sect-preparse.c,
	* components/help/converters/gnome-db2html2/toc-elements.c:
	(glossentry_stack_add), (glossary_start_element),
	(sect_glossseealso_start_element),
	(sect_glosssee_start_element),
	(sect_preparse_glossary_start_element),
	(sect_preparse_glossterm_characters),
	(toc_glossdiv_start_element), (toc_glossdiv_end_element)
	(toc_glossentry_start_element), (toc_glossentry_end_element),
	(toc_glossterm_start_element), (toc_glossterm_end_element):
	New functions for glossary support

	(sect_title_start_element), (sect_title_end_element),
	(sect_title_characters),
	(toc_author_start_element), (toc_author_characters)
	(toc_title_start_element), (toc_title_end_element),
	(toc_title_characters):
	Modified functions for glossary support
	
	(sect_preparse_set_doctype):
	Add support for glossary, and fix a bug (we should set to BOOK_DOC and
	ARTICLE_DOC instead of just BOOK or ARTICLE!!!)

2000-11-22  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-package-system-private.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_finalize), (eazel_package_system_unref),
	(eazel_package_system_class_initialize),
	(eazel_package_system_initialize), (eazel_package_system_get_type),
	(eazel_package_system_new):
	* components/services/install/lib/eazel-package-system.h:
	* components/services/install/lib/eazel-softcat-private.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_finalize), (eazel_softcat_unref),
	(eazel_softcat_class_initialize), (eazel_softcat_initialize),
	(eazel_softcat_get_type), (eazel_softcat_new):
	* components/services/install/lib/eazel-softcat.h:
	The first parts of the upcoming big rewrite of libeazelinstall.
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_install_packages):
	Always set_uninstall(FALSE) in install.
	
	* components/services/install/lib/eazel-install-problem.c:
	(eazel_install_problem_case_to_string),
	(eazel_install_problem_handle_cases):
	Removed debug output and moved the translation comments back to
	right before the i18n strings.
	Also copy the install_categories and uninstall_categories, to not
	corrupt the callers category lists.
	
	* nautilus-installer/src/Makefile:
	Yes.
	* nautilus-installer/src/installer.c: (start_over),
	(start_over_callback_druid), (dont_start_over_callback),
	(create_what_to_do_page), (jump_to_retry_page),
	(eazel_installer_do_install), (eazel_installer_setup_texts):
	Fixing 4841
	* nautilus-installer/src/installer.h:
	Removed some old cruft.

2000-11-22  Andy Hertzfeld  <andy@eazel.com>

`	* libnautilus-extensions/nautilus-image.h:
	added nautilus_image_new_from_file convenience routine
	* libnautilus-extensions/nautilus-image.c:
	(nautilus_image_new_from_file):
	implemented nautilus_image_new_from_file to make it easy to
	convert code that used gnome_pixmap_new_from_file to use
	anti-aliased images
	
	* components/hardware/nautilus-hardware-view.c: (setup_form_title),
	(setup_overview_form):
	converted the hardware view to use anti-aliased images
	
2000-11-22  Michael K. Fleming  <mfleming@eazel.com>

	* src/nautilus-first-time-druid.c: (set_http_proxy):

	Set the newly specified "/system/gnome-vfs/use-http-proxy" flag 
	when setting an http proxy

2000-11-22  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/installer.c: (start_over_button),
	(jump_to_retry_page):

	Change ignore button callback to match what GTK expects.

2000-11-22  Michael Engber  <engber@eazel.com>

	* src/nautilus-application.c: (nautilus_application_startup):
	Always open a window in response to typing nautilus
	at the cmd line. Used to not open a window if you typed
	nautilus --start-desktop. Bug 4720

2000-11-22  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_load_image_callback),
	(nautilus_background_set_image_uri_and_color),
	(nautilus_background_reset):
	* src/nautilus-sidebar.c: (setting_change_metadata_callback),
	(background_settings_changed_callback):
	Fixed problem dropping images onto sidebar - bug 4822

2000-11-22  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Build the mozilla component without rtti and without exceptions.
	This causes problems on some g++ compilers.
	
2000-11-22  Rebecca Schulman  <rebecka@eazel.com>
	Fixed bug 3919, that the numeric date field still
	showed when "day is yesterday" was chosen

	* src/nautilus-search-bar-criterion.c:
	(nautilus_search_bar_criterion_new_from_values),
	(nautilus_search_uri_get_first_criterion),
	(modified_relation_should_show_value), (hide_date_widget),
	(show_date_widget):
	Added callbacks to correctly show and hide the date 
	widget.

2000-11-21  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-problem.c:
	(eazel_install_problem_case_to_string),
	(eazel_install_problem_case_foreach_to_string),
	(eazel_install_problem_case_foreach_to_package_names),
	(eazel_install_problem_cases_to_package_names),
	(eazel_install_problem_find_dominant_problem_type):
	* components/services/install/lib/eazel-install-problem.h:

	Add hack to let us ask for only the package names of items in the
	problem list (and only those that need to be uninstalled).  This
	lets us build up a special bullet list for the "update not found"
	installer panel.
	
	* nautilus-installer/src/callbacks.c: (begin_install),
	(prep_retry):
	* nautilus-installer/src/installer.c: (remove_problems_timer),
	(jump_to_retry_page), (toggle_button_lock),
	(toggle_button_toggled), (eazel_installer_set_default_texts):

	Fix up the "update not found" panel to match a reasonable UI, and
	fix some bugs that caused it to go straight into another
	(extremely confusing) panel that suggested you ignore "all
	problems" and then listed no problems.

	* nautilus-installer/src/Makefile.am:
	* nautilus-installer/src/support.c:
	* nautilus-installer/src/support.h:

	Remove the unused support.c from the Makefile, and mark the files
	as unused so that a more adventurous soul can cvs remove them soon.

2000-11-21  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixes for bugs 690 and 733, to make the clipboard
	work for file editing in place, and make sensitivity
	work. Paste doesn't work correctly still, and a bug
	is filed for this issue.  

	* libnautilus-extensions/nautilus-entry.h:
	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_initialize_class), (nautilus_entry_key_press),
	(nautilus_entry_motion_notify), (nautilus_entry_set_text),
	(nautilus_entry_set_selection), (nautilus_entry_insert_text),
	(nautilus_entry_delete_text):
	Added a new signal to nautilus entry, called "selection_changed"
	that is fired whenever the region selected in an editiable widget
	is changed.  This is used to determine how to set clipboard sensitivity
	correctly.

	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize_class),
	(nautilus_icon_container_start_renaming_selected_item),
	(hide_rename_widget):
	Add a new signal "renaming_icon", which tells the icon view
	to set up clipboard capabilities for the new editable widget
	
	* libnautilus-extensions/nautilus-icon-private.h:
	* libnautilus-extensions/nautilus-icon-text-item.h:
	* libnautilus-extensions/nautilus-icon-text-item.c:
	(iti_stop_editing), (iti_entry_text_changed_by_clipboard),
	(iti_start_editing), (iti_destroy), (iti_start_selecting),
	(iti_stop_selecting), (iti_event),
	(nautilus_icon_text_item_get_renaming_editable):

	Sad hacks that I had to add on top of this already scary file so
	that the editable, which is in its own offscreen window somewhere,
	communicates to the clipboard what is actually going on when text
	is entered and selections are changed.  This includes adding a
	new signal when text is changed, to make sure the entry knows about
	it, firing an initial grab focus for the widget so that the widget
	turns on, passing on more of the events of the canvas
	widget, including motion notifies and focus events, and 
	keeping a persistent copy of the last renaming entry in the icon
	container so that pastes for that widget will still work.

	* libnautilus/nautilus-clipboard.h:
	* libnautilus/nautilus-clipboard.c: (set_menu_item_sensitive),
	(set_paste_sensitive_if_clipboard_contains_data),
	(set_clipboard_menu_items_sensitive),
	(set_clipboard_menu_items_insensitive),
	(clipboard_items_are_merged_in),
	(set_clipboard_items_are_merged_in),
	(merge_in_clipboard_menu_items), (merge_out_clipboard_menu_items),
	(focus_changed_callback), (grab_focus_callback),
	(selection_changed_callback),
	(initialize_clipboard_component_with_callback_data),
	(nautilus_clipboard_set_up_editable),
	(widget_was_set_up_with_selection_sensitivity),
	(first_focus_callback),
	(nautilus_clipboard_set_up_editable_in_control):
	Reorganized some of the code, and also added new callbacks
	to deal with sensitivity changes.  
	
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_get_bonobo_control):
	Add a new function that the icon view uses to
	pass the bonobo control for clipboard set up
	
	* src/file-manager/fm-icon-view.c: (renaming_icon_callback),
	(create_icon_container):
	Set up clipboard capabilities when the renaming widget is 
	created.
	
	* src/nautilus-location-bar.c: (nautilus_location_bar_new):
	* components/notes/nautilus-notes.c: (make_notes_view):	
	* src/nautilus-simple-search-bar.c:
	(nautilus_simple_search_bar_new):
	Changed calls to clipboard set up routines to include
	the new shares_selection_changes parameter. Widgets that
	use the "selection_changed" signal (NautilusEntries) 
	say "TRUE" here, otherwise selection doesn't work quite 
	right, and FALSE is used instead.

	* src/nautilus-search-bar-criterion.c: (get_size_location_for):
	Deal with the case when a user has entered a non-numeric size
	in a smart way, by using nautilus_str_to_int.  This is related
	to bug 2438, but is not a complete fix.

2000-11-21  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Mathieu Lacage  <mathieu@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_xfer_vfs_error):
	Fixed 4486 and 3748. Made the file copy operation error dialog
	have a non-misleading title if the title actually shows up (it
	is not supposed to but it may due to window manager theme bugs).
	Made the error text for copying into non-writeable dialogs more 
	accurate.
	
2000-11-21  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/*.xpm:

	removed obsolete XPM files

2000-11-21  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-info2html2/main.c:
        (main):
        Check /usr/share/info by default for info files too (Debian uses
        this). This partially fixes bug #4414

        * components/help/converters/gnome-db2html2/sect-preparse.c:
        (sect_preparse_sect_start_element):
        Apply a slightly modified patch by John Fleck to handle navigation
        links with regards to the appendix (Fixes bug #4792)

2000-11-21  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c: (fetch_song_info):
	fixed bug 4815, bitrate and time not displayed for certain mp3s. It turns
	out that some encoders reserve a lot of space for id3v2 tags at the
	beginning of the file, so we weren't looking deep enough into the file.
	Fixed by changing the size of the header buffer from 1K to 8K.
	
2000-11-21  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	Fixed bugzilla 855 - Renaming a file with thumbnails does not affect the
	thumbnails and 4654 - Old thumbnails cause problems with renaming.

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(nautilus_directory_rename_file_metadata),
	(nautilus_directory_remove_file_metadata):
	Finish the metafile rename and metafile remove operation by
	updating thumbnail files correspondingly, if they exist.
	
	* libnautilus-extensions/nautilus-directory.c:
	* libnautilus-extensions/nautilus-directory.h:
	(nautilus_directory_get_file_uri):
	Added a convenience routine.

	* libnautilus-extensions/nautilus-thumbnails.c: (vfs_file_exists):
	Tweaked to use the right GnomeVFS call.
	
	* libnautilus-extensions/nautilus-thumbnails.h:
	* libnautilus-extensions/nautilus-thumbnails.c:
	(nautilus_update_thumbnail_file_renamed_one),
	(nautilus_update_thumbnail_file_renamed),
	(nautilus_remove_thumbnail_for_file_one),
	(nautilus_remove_thumbnail_for_file):
	Look for an existing thumbnail for a file, if present, rename or
	remove it respectively to update it to the new state.

	* libnautilus-extensions/nautilus-thumbnails.c:
	(make_thumbnail_path), (nautilus_get_thumbnail_uri), 
	(check_for_thumbnails), (make_thumbnails):
	Added a create_parents_if_needed parameter used by the new thumbnail
	updating calls.
		
2000-11-21  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/installer.c: (early_log_catcher),
	(catch_early_logs), (start_logging), (eazel_installer_initialize):

	Stop spamming the console with crap before logging starts.

2000-11-20  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fix bugs 2943 (Dragging icons between windows or to the desktop
	triggers scrolling), 4786 (Need to remove tree view auto-expand
	feature for 1.0) and 4476 (weird horizontal autoscroll
	behavior). Auto-scroll now has a consistent 750 ms startup delay,
	and the tree auto-expand is off.

	* libnautilus-extensions/nautilus-drag.h,
	libnautilus-extensions/nautilus-drag.c:
	(nautilus_drag_autoscroll_in_scroll_region,
	nautilus_drag_autoscroll_start, nautilus_drag_autoscroll_stop):
	New convenience functions that factor out common code formerly in
	the tree, list and icon view DnD code. This fixes the mistakes
	common to all three of those views, where the auto-scroll initial
	delay was measured from the start of dragging overall, not from
	entering the scroll region.

	* libnautilus-extensions/nautilus-icon-private.h,
	libnautilus-extensions/nautilus-icon-dnd.c
	(auto_scroll_timeout_callback, set_up_auto_scroll_if_needed,
	stop_auto_scroll): Use the above calls. Also, correct a `<'
	vs. `>' mistake that made the auto-scroll delay never take effect.
	
	* libnautilus-extensions/nautilus-list.c
	(auto_scroll_timeout_callback, nautilus_list_start_auto_scroll,
	nautilus_list_stop_auto_scroll): Use the above calls. Also,
	correct a `<' vs. `>' mistake that made the auto-scroll delay
	never take effect.

	* components/tree/nautilus-tree-view-dnd.c:
	(nautilus_tree_view_drag_leave, nautilus_tree_view_drag_motion,
	collapse_time_callback, nautilus_tree_view_expand_node,
	nautilus_tree_view_is_tree_node_expanded, nautilus_dump_info
	expand_hack_unref, expand_hack_new, expand_time_callback,
	nautilus_tree_view_expand_maybe_later): Remove bunches of code to
	disable auto-expand.

	(ready_to_start_scrolling, auto_scroll_timeout_callback),
	(nautilus_tree_view_start_auto_scroll),
	(nautilus_tree_view_stop_auto_scroll),
	(nautilus_tree_view_drag_destroy): Use new common auto-scroll
	code. I also made it possible to add an extra auto-scroll delay
	for horizontal auto-scroll, but now that the startup delay has
	been fixed, it seems almost impossible to trigger horizontal
	auto-scroll accidentally, so I consider 4476 fixed.
	
	* components/adapter/bonobo-stream-vfs.c: (vfs_get_info,
	vfs_set_info, vfs_write, vfs_read, vfs_copy_to, vfs_destroy,
	bonobo_stream_vfs_open): Added FIXME bug numbers.
	* components/adapter/nautilus-adapter-control-embed-strategy.c:
	(activate_uri_callback): Added FIXME bug numbers.
	* components/adapter/nautilus-adapter.c: (nautilus_adapter_new):
	Added FIXME bug numbers.

2000-11-20  Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in: reduced versions of glib
	and gtk to released ones.

2000-11-20  Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in: updated some versions of libs to
	check for

2000-11-20  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_do_file_conflict_check):
	Removed some debug spam
	
	* nautilus-installer/src/Makefile:
	yes.
	
	* nautilus-installer/src/callbacks.c: (begin_install):
	* nautilus-installer/src/installer.c: (skip_over_remove_problems),
	(jump_to_retry_page), (create_initial_force_remove_category),
	(get_detailed_errors_foreach), (get_detailed_errors),
	(eazel_install_preflight), (eazel_installer_post_install),
	(eazel_installer_set_default_texts), (eazel_installer_setup_texts),
	(eazel_install_get_depends), (eazel_installer_initialize):
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/main.c: (main):
	Added my fix for 4706.

2000-11-20  Robey Pointer  <robey@eazel.com>

	* components/rpmview/nautilus-rpm-view-install.c:
	(nautilus_rpm_view_install_package_callback),
	(nautilus_rpm_view_uninstall_package_callback):
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line):
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(lots)
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba-types.c:
	(lots)
	* components/services/install/lib/eazel-install-corba-types.h:
	* components/services/install/lib/eazel-install-corba.c:
	(lots)
	* components/services/install/lib/eazel-install-object.c:
	(lots)
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_view_destroy),
	(nautilus_service_install_done),
	(nautilus_service_install_view_update_from_uri),
	(service_install_stop_loading_callback):
	
	The great renaming: moved Trilobite/Eazel/Install stuff into
	GNOME/Trilobite/Eazel/(etc).
	
	* components/services/install/lib/eazel-install-problem.c:
	(eazel_install_problem_handle_cases):

	Renaming, and initialize some vars to avoid warnings.
	
	* nautilus-installer/src/main.c: (check_disk_space), (main):

	Add a command-line option for ignoring the disk-space check.
	Check /usr instead of /.

2000-11-20  Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 2893 (changing the selection in a view does not make the
	tree view scroll to the correct selectin even while it does has
	the correct selection.)

	* components/tree/nautilus-tree-view-private.h: Added
	got_first_size_allocate boolean to details struct.
	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_initialize): Connect to the size_allocate
	handler.
	(ctree_show_node): Convenience function for scrolling a
	NautilusCTree to show a particular node.
	(ctree_get_first_selected_node): Convenience function to get the
	selected node.
	(tree_select_row_callback): Scroll to the selected node.
	(size_allocate_callback): Scroll to the selected node, if any, on
	the first size_allocate only.

2000-11-18 John Fleck <jfleck@inkstain.net:

	components/help/converters/gnome-db2html2/gdb3html.c:
	changing output of &percnt; entity to &#37; so Mozilla will 
	recognize it

2000-11-17  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (something_failed), (install_failed), (uninstall_failed),
	(delete_files):
	Updated the cli tool's use of the problem-handler
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	Added a flag to ignore file conflicts
	
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install__set_ignore_file_conflicts),
	(impl_Eazel_Install__get_ignore_file_conflicts),
	(eazel_install_get_epv):
	Code to set the ignore file conflicts flag.
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_do_transaction_all_files_check),
	(eazel_install_prune_packages_helper),
	(eazel_install_fetch_dependencies),
	(eazel_install_do_file_conflict_check), (eazel_uninstall_globber):
	Code to use the ignore file conflicts flag
	
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize), (eazel_install_install_packages):
	Changed some 0x%xs to %p and added the nessecary things for the
	extra ignore_file_conflicts flags.
	
	* components/services/install/lib/eazel-install-problem.h: *
	components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach),
	(get_detailed_uninstall_messages_foreach), (compare_problem_case),
	(add_case), (add_cannot_solve_case),
	(add_continue_with_force_case), (add_force_install_both_case),
	(add_force_remove_case), (add_remove_case), (add_update_case),
	(add_cascade_remove), (get_detailed_cases_foreach),
	(get_detailed_uninstall_cases_foreach),
	(eazel_install_problem_case_to_string),
	(eazel_install_problem_case_foreach_destroy),
	(eazel_install_problem_case_new),
	(eazel_install_problem_tree_to_case),
	(eazel_install_problem_tree_to_string),
	(build_categories_from_problem_list),
	(eazel_install_problem_use_set),
	(eazel_install_problem_step_problem),
	(eazel_install_problem_handle_cases): loads of code, so for a
	given set of problems, you can get the dominant type, and step
	forward to the next way of solving the problem. Also fixed the
	problem about updates not including the previous sets of pacakges.
	Also added some new cases.

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_add_to_rpm_set),
	Commented out robeys flailing, which caused some erratic crashes
	because of a NULL packsys struct.
	(eazel_install_start_transaction_make_rpm_argument_list),
	Add --force on ignore_file_conflicts
	(eazel_install_do_rpm_dependency_check):
	%x to %p
	
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new), (categorydata_destroy_foreach),
	(packagedata_new), (packagedata_destroy):
	%x to %p
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_done),
	(nautilus_service_install_failed):
	Updated to the new signatures of the problem handler functions.
	
	* nautilus-installer/src/callbacks.c: (begin_install):
	* nautilus-installer/src/installer.c: (jump_to_retry_page),
	(collect_failure_info), (install_failed), (uninstall_failed),
	(eazel_installer_setup_texts), (eazel_install_get_depends),
	(eazel_installer_initialize):
	Partial fix for 4706, I just want to commit before I slaughter it
	completely.
	
	* nautilus-installer/src/prescript:
	Fixed 4763 by changing the wording.

2000-11-17  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_ensure_gradient_buffered):
	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_ensure_gradient_buffered):
	Damn gradients! Fixed round off error which could
	result in a one pixel error. (bug 4759)

2000-11-17  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_ensure_gradient_buffered):
	Fixed bug occuring when percentages of multi-point
	add up to >100% (bug 4759)

2000-11-17  Mathieu Lacage  <mathieu@eazel.com>

	reviewed by: Sullivan

	update nautilus to the latest gnome-vfs mime/type icon handling.
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_name_for_regular_file): use
	gnome_vfs_mime_get_icon instead of the raw get_value call.
	(get_themed_icon_file_path): if cannot find the pixmap through
	the standard theme code, fallback on gnome-vfs to find the icon.
	(get_icon_file_path): beautification.
	(nautilus_scalable_icon_new_from_text_pieces): idem.

2000-11-17  John Sullivan  <sullivan@eazel.com>

	reviewed by: Mathieu Lacage  <mathieu@eazel.com>

	Fixed bug 4484 (leading whitespace in location bar produces
	errors)
	Fixed bug 4039 (Pasting URL with trailing carriage return fails, 
	but needn't)

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_from_input): Strip leading and trailing white
	space before any further processing; also now handles NULL with
	return_val_if_fail.
	(nautilus_self_check_file_utilities): Added new self-check tests
	for white space stripping, and a couple of others.

2000-11-17  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_ensure_gradient_buffered):
	Fixed off by one error in gradient calculation (bug 4759)

2000-11-17  John Sullivan  <sullivan@eazel.com>

	Fixed bug with "Disks" submenu in desktop context menu where
	the volume-mounting behavior would sometimes run when the
	context menu appeared.

	* libnautilus-extensions/nautilus-volume-monitor.h:
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_mount_unmount_removable):
	Added boolean parameter to specify whether to mount or
	unmount; previously it always toggled the current state.

	* src/file-manager/fm-desktop-icon-view.c: 
	(mount_parameters_new),	(mount_parameters_free),
	(mount_parameters_free_wrapper): New little helper functions
	for dealing with the parameters to the mount_or_unmount callback.
	(mount_or_unmount_removable_volume): Now specifies whether to
	mount or unmount based on command state, rather than always
	toggling; also updates the menu state after the mount/unmount.
	(update_disks_menu): Pass view as well as mount_path for
	callback data, using mount_parameters_new & _free.

2000-11-16  Pavel Cisler <pavel@eazel.com>

	reviewed by: Mathieu Lacage  <mathieu@eazel.com>

	* libnautilus-extensions/nautilus-file-operations-progress.c:
	(delete_event_callback),
	(nautilus_file_operations_progress_initialize),
	(nautilus_file_operations_progress_initialize_class):
	Fix 3094: Closing file progress dialog using the close box 
	crashes.
	The progress dialog shouldn't really have a close box, it only
	shows up in broken window manager themes that don't respect the
	window manager hints. Made it so that clicking the close box
	does nothing instead of crashing.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(fit_rect_on_screen), (center_dialog_over_rect),
	(center_dialog_over_window), (create_xfer_dialog):
	Fix 3092: File operation progress dialog not placed well.
	Made it center over the window that is the target of the
	copy/move operation. I couldn't really do it by setting the window
	as the dialog's parent because you need to be able to close
	the window without the dialog closing. Instead, added explicit
	centering code.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(progress_dialog_set_to_from_item_text):
	Fix 4080: Copy dialog shows to and from as the same location.
	Stupid typo.

2000-11-16  Rebecca Schulman  <rebecka@eazel.com>

	* libnautilus-extensions/nautilus-search-uri.c:
	(nautilus_self_check_search_uri):
	Fixed the tests to go along with my changes

2000-11-16  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Final changes to kill off the legendary bug 3579
	(Convert directory view context menus to use Bonobo)

	* libnautilus/nautilus-bonobo-ui.h:
	#define for zoom items placeholder in popup. Remove
	#defines for popup-specific zooming commands, since now
	we don't need distinct popup-specific ones.

	* libnautilus-extensions/nautilus-bonobo-extensions.h:
	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	(nautilus_bonobo_set_label_for_menu_item_and_command):
	Moved this here and commented; it had been a private 
	function in fm-directory-view.c.
	
	* src/file-manager/fm-directory-view.c: 
	(real_merge_menus): Just hide the placeholder for the zoom items,
	which is now sufficient due to a Bonobo fix Darin made.
	(real_update_menus): Update for API name change.
	(set_label_for_menu_and_command): Moved this to another file
	and renamed it.
	* src/file-manager/fm-icon-view.c: 
	(fm_icon_view_update_menus): Update the dynamic menu items
	in-line here, as was done with fm-directory-view.c in an earlier
	checkin.
	(compute_menu_item_info), (update_one_menu_item): Removed these
	obsolete functions.
	* src/nautilus-shell-ui.xml: Eliminated special pop-up versions of
	zoom commands. They existed only to allow hiding without affecting
	the menu-bar versions, but now that placeholders can be hidden
	these aren't necessary.
	* src/nautilus-window-menus.c: (nautilus_window_initialize_menus):
	Removed verb installation for pop-up versions of zoom commands.

2000-11-16  Rebecca Schulman  <rebecka@eazel.com>

	* check-FIXME.pl:
	Make below change work for modules containing the
	'-' character (like, say, gnome-vfs)

2000-11-16  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/Makefile.am:
	* components/services/Makefile.am:
	* configure.in:
	Fix for (4741), building with services on non-rpm machines.

2000-11-16  Rebecca Schulman  <rebecka@eazel.com>

        reviewed by: Darin Adler <darin@eazel.com>
	(Patch for check-FIXME.pl; later I added
	additional check for "This is not a fixme bug")
	
	* check-FIXME.pl:
	Add the functionality that it also checks for bugs marked
	with "fixme" in the bugzilla database for a product, and
	notifies you if the bug has no fixme comment in the source.
	This is not a perfect operation, so you can explicitly
	include the comment "This is not a fixme bug" and the 
	script will ignore it.  
	* libnautilus-extensions/nautilus-search-uri.c:
	Fixed some wording so that the text is not hard to 
	understand if we are creating an english equivalent for
	several criteria.

2000-11-16  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Reimplemented code that updates menu items' labels and
	sensitivity in a much more straightforward way, made
	possible by the elimination of gtk context menus.

	* src/file-manager/fm-directory-view.c:
	(reset_bonobo_open_with_menu): set sensitivity in here
	instead of in a separate call. Also set sensitivity of
	"Open With" title in context menu, which was previously
	always sensitive. However, it is still always sensitive
	due to a Bonobo bug.
	(set_label_for_menu_and_command): Helper function that
	handles stripping the underscore for the command's label.
	(real_update_menus): Now all the dynamic menu items are
	updated in here, which removes a lot of string compares,
	unnecessary label-setting, and other extra code.

	(compute_menu_item_info), (update_one_menu_item),
	(reset_bonobo_trash_delete_menu): Removed functions;
	they are merged into real_update_menus now.

2000-11-16  John Sullivan  <sullivan@eazel.com>

	* components/adapter/nautilus-zoomable-proxy.c:
	(nautilus_zoomable_proxy_get):
	Fixed uninitialized variable warning that was
	breaking the build (Darin told me the fix).

2000-10-22  Martin Baulig  <baulig@suse.de>

	reviewed by: Darin Adler  <darin@eazel.com>
	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Use the new Bonobo::Zoomable interface instead of Nautilus::Zoomable.

	* libnautilus/nautilus-zoomable.[ch]: Removed.
	* src/nautilus-zoomable-frame-corba.c: Removed.

	* libnautilus/nautilus-view-component.idl
	(ZoomLevels, ZoomLevelList, Zoomable, ZoomableFrame): Removed.

	* src/nautilus-view-frame-private.h
	(impl_Nautilus_ZoomableFrame_vepv, impl_Nautilus_ZoomableFrame__create):
	Removed external declarations.

	* src/nautilus-view-frame.h: include <bonobo/bonobo-zoomable-frame.h>.
	(NautilusViewFrame): Removed the `zoomable' field and changed the
	type of the `zoomable_frame' field from BonoboObject into
	BonoboZoomableFrame.
	(NautilusViewFrameClass): Added `zoom_parameters_changed' signal.

	* src/nautilus-view-frame.c (nautilus_view_frame_destroy_client):
	Don't release `view->zoomable' and set `view->history_frame' and
	`view->zoomable_frame' to NULL, not to CORBA_OBJECT_NIL.
	(nautilus_view_frame_initialize_class): Added ZOOM_PARAMETERS_CHANGED
	signal.
	(zoom_level_changed_callback): New static callback function; this emits
	the ZOOM_LEVEL_CHANGED signal on the NautilusViewFrame.
	(zoom_parameters_changed_callback): New static callback function; this
	emits the ZOOM_PARAMETERS_CHANGED signal on the NautilusViewFrame.
	(nautilus_view_frame_set_to_component): QI the adapted component for
	"IDL:Bonobo/Zoomable:1.0" and - if it was found - create the
	BonoboZoomableFrame, bind it to the BonoboZoomable and connect the
	"zoom_level_changed" and the "zoom_parameters_changed" signals.
	(nautilus_view_frame_is_zoomable): Return `view->zoomable_frame != NULL'.
	(nautilus_view_frame_get_zoom_level): Check whether view->zoomable_frame
	is not NULL and call bonobo_zoomable_frame_get_zoom_level().
	(nautilus_view_frame_set_zoom_level): Check whether view->zoomable_frame
	is not NULL and call bonobo_zoomable_frame_set_zoom_level().
	(nautilus_view_frame_get_min_zoom_level): Check whether
	view->zoomable_frame is not NULL and call
	bonobo_zoomable_frame_get_min_zoom_level().
	(nautilus_view_frame_get_max_zoom_level): Check whether
	view->zoomable_frame is not NULL and call
	bonobo_zoomable_frame_get_max_zoom_level().
	(nautilus_view_frame_get_has_min_zoom_level): New function.
	Check whether view->zoomable_frame is not NULL and call
	bonobo_zoomable_frame_has_min_zoom_level().
	(nautilus_view_frame_get_has_max_zoom_level): New function.
	Check whether view->zoomable_frame is not NULL and call
	bonobo_zoomable_frame_has_max_zoom_level().
	(nautilus_view_frame_get_is_continuous): New function.
	Check whether view->zoomable_frame is not NULL and call
	bonobo_zoomable_frame_is_continuous().
	(nautilus_view_frame_get_preferred_zoom_levels): If
	view->zoomable_frame is NULL, return NULL. Otherwise
	bonobo_zoomable_frame_get_preferred_zoom_levels() returns GList *
	of floats which we can just return.
	(nautilus_view_frame_zoom_in): If view->zoomable_frame is not NULL,
	call bonobo_zoomable_frame_zoom_in().
	(nautilus_view_frame_zoom_out): If view->zoomable_frame is not NULL,
	call bonobo_zoomable_frame_zoom_out().
	(nautilus_view_frame_zoom_to_fit):  If view->zoomable_frame is not
	NULL, call bonobo_zoomable_frame_zoom_out().
	(nautilus_view_frame_zoom_level_changed): Removed.

	* src/nautilus-zoom-control.c (NautilusZoomControlDetails): Added
	`has_min_zoom_level' and `has_max_zoom_level'.
	(draw_zoom_control_image): Call nautilus_zoom_control_can_zoom_in/out()
	to find out whether we can zoom.
	(zoom_menu_callback): Likewise.
	(nautilus_zoom_control_button_press_event): Likewise.
	(create_zoom_menu_item): Changed the type of the `zoom_level' argument
	from double to float.
	(nautilus_zoom_control_set_min_zoom_level): Removed.
	(nautilus_zoom_control_set_max_zoom_level): Removed.
	(nautilus_zoom_control_set_preferred_zoom_levels): Removed.
	(nautilus_zoom_control_set_parameters): New function.
	(nautilus_zoom_control_has_min_zoom_level): New function.
	(nautilus_zoom_control_has_max_zoom_level): New function.
	(nautilus_zoom_control_can_zoom_in): New function.
	(nautilus_zoom_control_can_zoom_out): New function.
	
	* src/file-manager/fm-directory-view.c: #include
	<bonobo/bonobo-zoomable.h> instead of
	<libnautilus/libnautilus-zoomable.h>.
	(FMDirectoryViewDetails): Changed the type of `zoomable' to
	BonoboZoomable.
	(fm_directory_view_preferred_zoom_levels): Made this an array of float,
	not double.
	(fm_directory_view_initialize): Create a new BonoboZoomable object here.
	(zoomable_zoom_in_callback): The first argument is now a BonoboZoomable.
	(zoomable_zoom_out_callback): The first argument is now a BonoboZoomable.
	(nautilus_zoom_level_from_double): Renamed into
	nautilus_zoom_level_from_float().
	(zoomable_set_zoom_level_callback): The first argument is now a
	BonoboZoomable and the second one a float.
	(zoomable_zoom_to_fit_callback): The first argument is now a
	BonoboZoomable.
	(fm_directory_view_set_zoom_level): Call
	bonobo_zoomable_report_zoom_level_changed()
	instead of using nautilus_zoomable_set_zoom_level().

	* src/nautilus-window-manage-views.c:
	(zoom_level_changed_callback): Don't call
	nautilus_zoom_control_set_min_zoom_level(),
	nautilus_zoom_control_set_max_zoom_level() and
	nautilus_zoom_control_set_preferred_zoom_levels() here.
	Use nautilus_zoom_control_can_zoom_in/out() to find out whether we
	can zoom in the calls to nautilus_bonobo_set_sensitive().
	, (zoom_parameters_changed_callback): New callback function.
	Call nautilus_zoom_control_set_parameters() and - if the zoom_level
	is not 0.0 - zoom_level_changed_callback().

	* components/adapter/nautilus-zoomable-proxy.[ch]: New files.

	* components/adapter/Makefile.am (nautilus_adapter_SOURCES):
	Added nautilus-zoomable-proxy.c and nautilus-zoomable-proxy.h.

	* components/adapter/nautilus-adapter-embed-strategy.c
	(NautilusAdapterEmbedStrategyClass): Added new virtual signal
	`get_zoomable' which must be overridden.
	(nautilus_adapter_embed_strategy_initialize_class): Assign it here.
	(nautilus_adapter_embed_strategy_get_zoomable): New static function;
	call the virtual `get_zoomable' in the derived class.

	* components/adapter/nautilus-adapter-control-embed-strategy.c:
	(nautilus_adapter_control_embed_strategy_initialize_class):
	Assign nautilus_adapter_control_embed_strategy_get_zoomable() as
	handler of the `get_zoomable' signal.
	(nautilus_adapter_control_embed_strategy_new): QI the Control for
	"IDL:Bonobo/Zoomable:1.0" and pass it to nautilus_zoomable_proxy_get()
	if found and store the return value in strategy->details->zoomable.
	(nautilus_adapter_control_embed_strategy_get_zoomable): New static
	function; return strategy->details->zoomable which is set in
	nautilus_adapter_control_embed_strategy_new().

	* components/adapter/nautilus-adapter-embeddable-embed-strategy.c:
	(nautilus_adapter_embeddable_embed_strategy_initialize_class):
	Assign nautilus_adapter_embeddable_embed_strategy_get_zoomable() as
	handler of the `get_zoomable' signal.
	(nautilus_adapter_embeddable_embed_strategy_new): QI the View for
	"IDL:Bonobo/Zoomable:1.0" and pass it to nautilus_zoomable_proxy_get()
	if found and store the return value in strategy->details->zoomable.
	(nautilus_adapter_embeddable_embed_strategy_get_zoomable): New static
	function; return strategy->details->zoomable which is set in
	nautilus_adapter_embeddable_embed_strategy_new().

	* components/adapter/nautilus-adapter.c: (nautilus_adapter_new):
	Call nautilus_adapter_embed_strategy_get_zoomable(embed_strategy) and
	bonobo_add_interface() it to the control if found.

	* components/image-viewer/nautilus-image-view.c: Rewrote the Nautilus
	image viewer to be a BonoboControl, to add zoomable support to it and
	to merge back everything from bonobo-image-generic into it.

2000-11-16  Ramiro Estrugo  <ramiro@eazel.com>

	* components/help/converters/gnome-info2html2/main.c: (main):
	Fix uninitialized variable.

	* components/services/vault/command-line/main.c:
	Include stlib.h needed for exit().

	* libnautilus-extensions/nautilus-directory-async.c:
	(call_ready_callbacks):
	Fix uninitialized variable.
	
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(nautilus_gdk_pixbuf_draw_text):
	Workaround int vs uint casting issues with new gcc compiler.

	* libnautilus-extensions/nautilus-mime-actions.c:
	(extract_prefix_add_suffix):
	Workaround int vs uint casting issues with new gcc compiler.

2000-11-16  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/file-manager/fm-desktop-icon-view.c: (real_update_menus):
	* src/file-manager/fm-directory-view.c: (real_update_menus):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_update_menus):
	Bracketed menu-updating code with bonobo_ui_component_freeze/thaw.
	This speeds up fm_directory_view_update_menus by about 50%, and
	it's called a zillion times so that can't hurt.

2000-11-16  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/file-manager/fm-directory-view.c: (open_callback),
	(open_in_new_window_callback), (other_application_callback),
	(other_viewer_callback), (trash_callback), (duplicate_callback),
	(create_link_callback), (new_folder_callback),
	(open_properties_window_callback), (reset_background_callback),
	(remove_custom_icons_callback), (real_merge_menus):
	* src/file-manager/fm-icon-view.c: (show_stretch_handles_callback),
	(unstretch_icons_callback), (clean_up_callback),
	(rename_icon_callback), (customize_icon_text_callback),
	(fm_icon_view_merge_menus):
	* src/file-manager/fm-search-list-view.c: (real_merge_menus),
	(reveal_selected_items_callback):

	Removed all function casts that were allowing us to use a single
	callback for both Bonobo-style and gtk-style menus; converted
	all the functions to take Bonobo-style parameters.

2000-11-16  Martin Baulig  <martin@home-of-linux.org>

	* libnautilus-adapter/nautilus-adapter-factory.idl:
	Use `NAUTILUS_ADAPTER_FACTORY_IDL' instead of
	`NAUTUILUS_ADAPTER_FACTORY_IDL' in the #ifdef/#define
	which protects against multiple inclusion of this file.

2000-11-16  John Sullivan  <sullivan@eazel.com>

	Removed a ton of code that was used only for the gtk
	context menus, which are gone now that we're using
	Bonobo for context menus. There's still some reworking
	of code formerly shared by gtk & Bonobo menus to do, but
	I'll do that in a separate pass.

	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class): Removed signal definitions
	and function assignments for create_selection_context_menu_items
	and create_background_context_menu_items.

	(compute_menu_item_info): Do special_link_in_selection tests here;
	previously they were done only for the gtk context menus (so for
	the past day we've had an as-yet-unnoticed bug where certain
	context menu items on the desktop were sensitive but shouldn't
	have been).
	(fm_directory_view_pop_up_selection_context_menu),
	(fm_directory_view_pop_up_background_context_menu):
	Removed the iffed-out case that used the gtk context menus.

	(zoom_in_callback), (zoom_out_callback), (zoom_default_callback),
	(finish_inserting_menu_item), (finish_appending_menu_item),
	(set_menu_item_path), (append_gtk_menu_item),
	(append_selection_menu_subtree),
	(fm_directory_view_insert_context_menu_item),
	(fm_directory_view_append_context_menu_item),
	(create_background_context_menu_items),
	(real_create_background_context_menu_items),
	(launch_application_from_menu_item), (view_uri_from_menu_item),
	(add_application_to_gtk_menu), (add_component_to_gtk_menu),
	(create_open_with_gtk_menu), 
	(real_create_selection_context_menu_items),
	(create_selection_context_menu),
	(fm_directory_view_create_background_context_menu_items),
	(create_background_context_menu), (menu_item_matches_path),
	(fm_directory_view_get_context_menu_index): 
	Removed obsolete functions.

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_initialize_class): Removed obsolete
	virtual function overrides.
	(real_update_menus): Removed debugging spam I had accidentally
	left in.

	(new_terminal_menu_item_callback),
	(reset_desktop_background_menu_item_callback),
	(change_desktop_background_menu_item_callback),
	(quit_nautilus_desktop_menu_item_callback),
	(empty_trash_menu_item_callback),
	(fm_desktop_icon_view_create_selection_context_menu_items),
	(fm_desktop_icon_view_create_background_context_menu_items),
	(mount_unmount_removable): Removed obsolete functions.
	
	* src/file-manager/fm-icon-view.c: 
	(special_link_in_selection): Just moved this function up.
	(compute_menu_item_info): Check special_link_in_function for
	rename menu item; formerly this only happened for the gtk
	context	menu.
	(fm_icon_view_initialize_class): Removed obsolete virtual 
	function overrides.

	(gtk_tighter_layout_callback), (gtk_sort_reversed_callback),
	(context_menu_layout_radio_item_callback),
	(append_one_context_menu_layout_item),
	(insert_one_context_menu_item), (append_one_context_menu_item),
	(append_one_toggle_context_menu_item),
	(fm_icon_view_create_selection_context_menu_items),
	(fm_icon_view_create_background_context_menu_items):
	Removed obsolete functions.
	
	* src/file-manager/fm-search-list-view.c:
	(fm_search_list_view_initialize_class): Removed obsolete
	virtual function override.

	(real_create_selection_context_menu_items): 
	Removed obsolete function.

2000-11-16  John Sullivan  <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-file-utilities.h:
	Added #define NAUTILUS_TRASH_URI "trash:"
	
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_self_check_directory):
	* libnautilus-extensions/nautilus-drag.c:
	(nautilus_drag_default_drop_action_for_icons):
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical),
	(nautilus_self_check_file_utilities):
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_self_check_file):
	* src/file-manager/fm-desktop-icon-view.c:
	(find_and_rename_trash_link), (create_or_rename_trash):
	* src/file-manager/fm-directory-view.c: (show_trash_callback):
	* src/file-manager/nautilus-trash-monitor.c:
	(nautilus_trash_monitor_initialize):
	Used NAUTILUS_TRASH_URI wherever "trash:" was used before.

2000-11-16  Szabolcs BAN <shooby@gnome.hu>

	* configure.in, po/hu.po: Hungarian language support.

2000-11-15  John Fleck <jfleck@inkstain.net>
	* components/help/converters/gnome-db2html2/gdb3html.c:
	changed init entities function to use
	XML_INTERNAL_PREDEFINED_ENTITY to get mdash and hellip working
	
2000-11-15  Pavel Cisler <pavel@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-gdk-extensions.c:
	* libnautilus-extensions/nautilus-gdk-extensions.h:
	* libnautilus-extensions/nautilus-file-operations-progress.c:
	(set_text_unescaped_trimmed):
	(nautilus_string_ellipsize_start):
	Turn an existing truncation routine to a public one, giving it 
	a better name.
	Get rid of a questionable optimization (bugzilla 2555).

	* libnautilus-extensions/nautilus-gdk-extensions.c:
	(nautilus_self_check_ellipsize_start),
	(nautilus_self_check_gdk_extensions):
	Added tests for the elipsize routine.

	* libnautilus-extensions/nautilus-file-operations.c:
	* libnautilus-extensions/nautilus-file-operations.h:
	(get_label_font), (nautilus_format_name_for_display),
	(nautilus_convert_to_formatted_name_for_display),
	(handle_xfer_vfs_error), (handle_xfer_overwrite),
	(nautilus_file_operations_move_to_trash):
	Fix 826: File operation alerts should truncate file names.
	Add a convenience call to unescape and truncate a file name,
	use it the places that format warning and error dialog strings.
	Add some missing quotes in some of the error strings.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(parent_for_error_dialog):
	Work on fixing 3093 - file operation error dialogs show up in the
	wrong place.
	Make the error dialogs use the progress dialog as their parent window,
	if available, if not, revert to using the original view as a parent.

	* libnautilus-extensions/nautilus-string.c:
	Added a comment pointing people to the new ellipsize routines.

2000-11-15  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 1420, panel splitter drag outline edges are indistinct.

	(nautilus_horizontal_splitter_motion):
	New method overide to handle drawing splitter during drag.
	
	(nautilus_horizontal_splitter_button_release):
	Add additonal code from parent class and don't call
	parent class function at function exit.
	
	* libnautilus-extensions/nautilus-horizontal-splitter.c:
	(nautilus_horizontal_splitter_initialize_class):
	Overide motion method.
	
	(splitter_xor_line):
	Draw splitter outline as two distinct edges.
	
2000-11-15  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-directory-background.c:
	(nautilus_file_background_event_filter):
	fixed some comments

	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(container_foreach_deep_callback),
	(nautilus_gtk_container_foreach_deep):
	* libnautilus-extensions/nautilus-gtk-extensions.h:
	added nautilus_gtk_container_foreach_deep

	* src/nautilus-window.c: (menu_bar_no_resize_hack_size_allocate),
	(menu_bar_no_resize_hack_menu_bar_finder),
	(menu_bar_no_resize_hack_atexit), (menu_bar_no_resize_hack),
	(nautilus_window_constructed):
	added hack to prevent criticals when using the desktop
	bug 4345

2000-11-15  John Sullivan  <sullivan@eazel.com>

	* po/POTFILES.in: Added src/file-manager/fm-desktop-icon-view-ui.xml

2000-11-15  John Sullivan  <sullivan@eazel.com>

	Fixed a couple of cases where context menus appeared on
	the desktop that should have been hidden. This leaves
	behind a new (Bonobo) bug where there are two adjacent 
	separators in the desktop background context menu, which
	I will write up.

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus/nautilus-bonobo-ui.h:
	Add popup zooming commands here that need to be manipulated
	by directory view.
	* src/file-manager/fm-directory-view.c: (real_merge_menus):
	Hide the zooming items in the popup if the directory view
	does not support zooming (e.g., desktop)
	* src/file-manager/fm-icon-view.c: (fm_icon_view_merge_menus):
	Hide the Lay Out submenu in the popup if the icon view
	does not support auto-layout (e.g., desktop)
	* src/nautilus-shell-ui.xml: Make zooming items in popup use
	different commands than zooming items in normal menu, so they
	can be hidden independently.
	* src/nautilus-window-menus.c: (nautilus_window_initialize_menus):
	Attach callbacks to new popup zooming items.

2000-11-15  Gene Z. Ragan  <gzr@eazel.com>	

	Fixed bug 4717, Nautilus draw desktop icons overlapping.

	The problem was caused by the icon container responding to
	an idle function that lays out icons that had been
	newly added.  This is a problem if the callback is called
	from an idle after the icon container has been created, but
	before a size has been allocated. A newly intialized GtkWidget
	has a default allocation of 0, 0, 1, 1 which is too small
	for the layout algorithm to work properly.  A flag was added
	that is set to TRUE when the size_allocate function is called.
	
	* src/nautilus-desktop-window.c: (nautilus_desktop_window_new):
	Set has_been_allocated to FALSE initially.
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(size_allocate), (nautilus_icon_container_initialize),
	(nautilus_icon_container_add):
	Checj status of has_been_allocated flag before adding
	and laying out new icons.
	
	* libnautilus-extensions/nautilus-icon-private.h:
	Added has_been_allocated flag that is set to TRUE
	when size_allocated is first called.

	Work in progress on allowing desktop links to be renamed.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(find_and_update_home_link):
	Allow renaming of home links.
	
	* src/file-manager/fm-icon-view.c: 
	(special_link_in_selection):
	Removed home link from special link types.
	
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_can_rename):
	Allow renaming of home link types.

2000-11-15  Rebecca Schulman  <rebecka@eazel.com>
	This change is the first part of the fix for bug 3920.
	The fix will allow nautilus to tell a user that the
	search they have requested is newer than their index.
	This involved communicating errors that occurred while
	opening and reading the directory outside of the
	directory model to a view, which can react in a useful
	way.

	Reviewed by: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(directory_load_done):
	If the directory load did not complete successfully,
	emit an error signal

	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory.h:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_initialize_class),
	(nautilus_directory_emit_load_error):
	Add the load error signal, and a cover function to 
	emit the signal

	* src/file-manager/fm-directory-view.h:	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class), (load_error_callback),
	(finish_loading_uri), (disconnect_model_handlers):
	Also add a load_error signal to the fm directory view class,
	so that subclasses can get information about errors particular
	to a type of directory, (in this case the search list view)
	and react correctly.

	* src/file-manager/fm-search-list-view.c: (load_error_callback),
	(fm_search_list_view_initialize):
	Handle the load error SERVICE_OBSOLETE, by displaying a dialog
	that tells the user that their index is too old for their
	search to work correctly, and gives them an option to reindex
	
	* src/file-manager/nautilus-indexing-info.c:
	(nautilus_indexing_info_request_reindex):
	* src/file-manager/nautilus-indexing-info.h:
	Add a cover function to medusa's request reindex function
	that the search list view calls.

2000-11-15  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_pop_up_selection_context_menu),
	(fm_directory_view_pop_up_background_context_menu):
	Oops, I accidentally checked in the Bonobo context
	menus enabled. They are now disabled again.

2000-11-15  Darin Adler  <darin@eazel.com>

	* components/adapter/nautilus-adapter.oafinfo:
	* components/hardware/nautilus-hardware-view.oafinfo:
	* components/help/help-contents.oafinfo:
	* components/help/help-factory.oafinfo:
	* components/history/nautilus-history-view.oafinfo:
	* components/html/ntl-web-browser.oafinfo:
	* components/image-viewer/nautilus-image-view.oafinfo:
	* components/loser/content/nautilus-content-loser.oafinfo:
	* components/loser/sidebar/nautilus-sidebar-loser.oafinfo:
	* components/mozilla/nautilus-mozilla-content-view.oafinfo:
	* components/music/nautilus-music-view.oafinfo:
	* components/notes/nautilus-notes.oafinfo:
	* components/rpmview/nautilus-rpm-view.oafinfo:
	* components/sample/nautilus-sample-content-view.oafinfo:
	* components/services/install/nautilus-view/nautilus-service-install-view.oafinfo:
	* components/services/install/server/trilobite-eazel-install-service.oafinfo:
	* components/services/inventory/nautilus-view/nautilus-inventory-view.oafinfo:
	* components/services/login/nautilus-view/nautilus-change-password-view.oafinfo:
	* components/services/summary/nautilus-view/nautilus-summary-view.oafinfo:
	* components/services/time/nautilus-view/trilobite-eazel-time-view. oafinfo:
	* components/services/time/service/trilobite-eazel-time-service.oafinfo:
	* components/services/trilobite/sample/nautilus-view/nautilus-sample-service-view.oafinfo:
	* components/services/trilobite/sample/service/trilobite-eazel-sample-service.oafinfo:
	* components/shell/shell.oafinfo:
	* components/websearch/ntl-web-search.oafinfo:
	* src/nautilus.oafinfo:

	Changed all references to GNOME/GenericFactory to refer to
	GNOME/ObjectFactory instead.

2000-11-15  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	More work towards using Bonobo for context menus. All
	context menu items should now appear and be correctly 
	hooked up. The Bonobo context menus are still not quite
	enabled, awaiting a couple of Bonobo fixes.

	Redid the API for creating dynamic sets of Bonobo 
	menu items (as used by bookmarks, application & viewer
	lists), and added support for lists of toggle items
	(needed for Disks submenu in desktop context menu).

	Also, added "Show Trash" menu item in File menu, just above
	Empty Trash, after discussing with Andy and Arlo.

	* libnautilus-extensions/nautilus-bonobo-extensions.h:
	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	(get_numbered_menu_item_name): New helper function, returns
	generated menu item name given parent path and index.
	(nautilus_bonobo_get_numbered_menu_item_command): New
	function, returns generated command name given parent path
	and index. 
	(nautilus_bonobo_get_numbered_menu_item_path): New function,
	returns generated menu item path given parent path and index.
	(add_numbered_menu_item_internal): New helper function,
	creates menu item using these other new calls. Mostly extracted
	and rewritten from nautilus_bonobo_add_menu_item.
	(nautilus_bonobo_add_numbered_menu_item): Renamed from
	nautilus_bonobo_add_menu_item, and reimplemented to
	call add_numbered_menu_item_internal.
	(nautilus_bonobo_add_numbered_toggle_menu_item):
	New function, like _add_numbered_menu_item but creates a
	toggle menu item.
	(remove_commands): Renamed from remove_verbs; now handles ids
	as well as verbs.
	(nautilus_bonobo_remove_menu_items_and_commands):
	Renamed from ..._items_and_verbs; now handles ids as well as
	verbs.
	(nautilus_bonobo_get_menu_item_verb_name): Removed; replaced by
	_get_numbered_menu_item_command.
	
	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	New file, Bonobo-style version of desktop context menus.
	* src/file-manager/Makefile.am: Include new file in build.
	
	* src/file-manager/fm-desktop-icon-view.c:
	Add BonoboUIComponent to details struct.
	(fm_desktop_icon_view_destroy): Dispose of BonoboUIComponent.
	(fm_desktop_icon_view_initialize_class): wire up overrides for
	merge_menus and update_menus.
	(new_terminal_callback),
	(change_background_callback), (empty_trash_callback),
	(reset_background_callback), (quit_desktop_callback):
	New Bonobo-style menu callbacks.
	(empty_trash_menu_item_callback): Renamed so I could use the old
	simpler name for new Bonobo callback; this one will be deleted
	when the Bonobo conversion is completed.
	(fm_desktop_icon_view_create_selection_context_menu_items): Reflect
	name change.
	(mount_or_unmount_removable_volume): New Bonobo listener callback
	used by Disks items.
	(update_disks_menu): New function, recreates the Disks menu.
	(real_update_menus): New function, updates the dynamic desktop
	context menu items.
	(real_merge_menus): New function, wires up the BonoboUIComponent
	and verbs.
	
	* src/file-manager/fm-directory-view.c: 
	(fm_directory_view_pop_up_background_context_menu),
	(fm_directory_view_pop_up_selection_context_menu): Change TRUE
	to FALSE to enable the Bonobo context menus.
	(show_trash_callback): New function, navigates to "trash:"
	(add_open_with_program_menu_item), (reset_bonobo_open_with_menu):
	Reworked for new API.
	(real_merge_menus): Add verb for "Show Trash"
	
	* src/file-manager/nautilus-directory-view-ui.xml: Added 
	"Show Trash"; added placeholders in background popup used
	for desktop view.
	
	* src/nautilus-window-menus.c: 
	(append_bookmark_to_menu): Updated for new numbered_menu_item
	API; deleted unused parameter.
	(create_menu_item_from_node), (append_dynamic_bookmarks),
	(refresh_go_menu): Updated append_bookmark_to_menu callers for
	API changes.
	(nautilus_window_remove_bookmarks_menu_items),
	(nautilus_window_remove_go_menu_items): Updated for API name changes.

2000-11-15  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/nautilus-view-frame.c 
	(nautilus_view_frame_new): ref the ui_container
	
	(nautilus_view_frame_destroy_client): check if ui_container->win
	is NULL before trying to use it; unref the ui_container
	
	* components/adapter/bonobo-stream-vfs.c (vfs_copy_to): Fix a bug
	whereby the `copyTo' operation would not handle -1 as a request to
	copy the whole file properly.
	
2000-11-15  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by:  George Lebl  <jirka@5z.com>

	* components/loser/README: Added missing `crash' mode to docs.

	* src/nautilus-view-frame.c: (nautilus_view_frame_destroy_client,
	nautilus_view_frame_handle_client_destroy,
	nautilus_view_frame_handle_client_gone, check_if_view_is_gone):
	Added calls to `bonobo_window_deregister_dead_components' to clean
	up menus and toolbars from dead components, fixing Nautilus bug
	1740.

2000-11-15  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize), (eazel_install_log_to_stderr),
	(eazel_install_failed_because_of_disk_full):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file):
	* components/services/install/lib/eazel-install-public.h:

	Re-shuffle logging stuff again to try to make sure that we log as
	little as possible until the log handler is set up.  Add a flag to
	the installer service that indicates if the installer ran out of
	disk space.  Then, you know, actually check the return codes of
	fwrite/fclose to see if they failed.
	
	* nautilus-installer/src/Makefile:

	More crap.
	
	* nautilus-installer/src/installer.c: (create_what_to_do_page),
	(create_install_page), (create_window), (get_detailed_errors),
	(download_failed), (eazel_install_preflight), (install_done),
	(eazel_installer_initialize):

	Re-shuffle some of the initialization to move as much as possible
	after the fetching of the text strings.  It isn't possible to
	cover 100% of the cases this way, so load the default text strings
	first, so we'll have text to display in early errors.  Fix a
	dyslexic typo that would occasionally cause an assertion to fail.
	Notice the new disk-full flag and give an appropriate error
	message.

	* nautilus-installer/src/main.c: (check_disk_space), (main):

	Check for disk space before starting, and refuse to even start
	unless there's N space in /tmp and M space in /.  For now, N = M =
	75 MB.

	* nautilus-installer/src/prescript:

	Apply kisza's patch (4729) to fix xhost parameters.

2000-11-14  Mathieu Lacage  <mathieu@eazel.com>

	Buddy: john harper.
	FIX bug 2946: no icon under cursor when dragging from 
	tree view.
	* components/tree/nautilus-tree-view-dnd.c:
	(nautilus_tree_view_drag_begin), call new function below
	(nautilus_tree_view_set_dnd_icon): sets the icon for the 
	just-started drag.

2000-11-14  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/nautilus-tree-view-dnd.c:
	(nautilus_tree_view_drag_motion),
	(nautilus_tree_view_motion_notify),
	(nautilus_tree_view_make_prelight_if_file_operation),
	(nautilus_tree_view_prelight_stop),
	(nautilus_tree_view_drag_destroy):
	make it use the new prelighting code. leave the old code around
	even though it does nothing. The new prelighting now flickers like
	hell but maciej says he wants to fix it.
	* libnautilus-extensions/nautilus-ctree.c: (nautilus_ctree_row_at),
	(get_cell_rectangle), (nautilus_ctree_set_prelight), (draw_row),
	(real_insert_row), (nautilus_ctree_node_nth),
	(nautilus_ctree_find): implement prelighting. copy/paste code from 
	the NautilusList code to do it.
	* libnautilus-extensions/nautilus-ctree.h: add signature for
	nautilus_ctree_set_prelight plus fields in NautilusCTreeRow.
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_prelight_if_necessary): remove useless code.

2000-11-14  Eskil Heyn Olsen  <eskil@eazel.com>

	buddy: Ramiro Estrugo <ramiro@eazel.com>

	* configure.in:
	Fix to make --disable-eazel-services work, (4722), it no
	longer checks for rpm and ammonite, nor tries to build
	rpmview.

2000-11-14  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/gdb3html.c:
        (init_entities),
        (gdb3html_internalSubset):
        New function and a workaround for the entity bug. Should now support
        &mdash;/&hellip;/&percent; - Fixes bug #2438.

        * components/help/help-method.c:
        (transform_file), (old_help_file),
        (find_help_file):
        Realized that that the gnome_help_file_path function checks for the
        existance of the file using g_file_exists. This spoiled things for the
        way we were trying to detect locale. Fixed it (Bug #4618).

        There is still a bug in this which I will tackle later. This'll do for
        now.

2000-11-14  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-directory-background.c:
	(nautilus_file_background_event_filter), (set_root_pixmap):
	Nautilus no longer responds to PropertyChange events on
	the root window that it originates (bug 3038)

	* libnautilus-extensions/nautilus-background.c:
	(update_drawable_with_pixbuf), (nautilus_background_draw),
	(nautilus_background_draw_to_drawable),
	(nautilus_background_draw_aa),
	(nautilus_background_draw_to_canvas),
	(nautilus_background_load_image_callback),
	(nautilus_background_start_loading_image),
	(nautilus_background_set_image_uri),
	(set_image_and_color_image_loading_done_callback),
	(nautilus_background_set_image_uri_and_color):
	nautilus_background_set_image_uri_and_color used to generate
	an extra SETTINGS_CHANGED + reformatted a bunch of code.

2000-11-14  Darin Adler  <darin@eazel.com>

	* src/nautilus-property-browser.c: Some small stuff that got
	left out of my last commit by accident.

2000-11-14  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(display_selection_info_idle_callback),
	(update_menus_idle_callback), (display_pending_idle_callback): Add
	code to ref the BonoboControl around all three of these idle
	functions to eliminate the problem where the directory view would
	get destroyed in the middle of an idle.
	
	* data/browser.xml:
	* data/linksets/apps.xml:
	* data/linksets/desktop.xml:
	* data/linksets/portals.xml:
	* data/linksets/search_engines.xml:
	* data/static_bookmarks.xml:
	Used "_" prefix on all localizable fields of XML files.
	
	* po/POTFILES.in: Add all these XML files that need translation.
	
	* libnautilus-extensions/nautilus-link-set.c:
	(nautilus_link_set_install), (nautilus_link_set_is_installed),
	(nautilus_link_set_remove): Fix storage leaks, also use
	nautilus_xml_get_property_translated to get the property for the
	"name" property so it can be translated if desired.
	
	* libnautilus-extensions/nautilus-xml-extensions.h:
	* libnautilus-extensions/nautilus-xml-extensions.c:
	(nautilus_xml_get_property_translated): Add a version of
	xmlGetProp that looks for an untranslated version of the property
	and runs it through gettext if there is not a pre-translated
	version present.  For strings downloaded from the service, for
	example, we'll probably use a pre-translated string, but for
	things in the Nautilus source tree we can use an untranslated
	string.
	
	* src/nautilus-bookmark-parsing.c:
	(nautilus_bookmark_new_from_node): Use
	nautilus_xml_get_property_translated to get the bookmark name so
	that static bookmarks can have names translated with gettext. New
	versions of the static bookmarks downloaded from the service can
	use either kind of name. And user-created bookmarks are not run
	through the gettext mechanism.
	
	* src/nautilus-window-menus.c: (create_menu_item_from_node): Use
	nautilus_xml_get_property_translated to get the folder names
	translated just as the bookmarks themselves.

	* src/nautilus-link-set-window.c: (get_link_set_names): Added a
	FIXME. The link set names should come from inside the XML, not
	from the file names.
	
	* src/nautilus-property-browser.c: (get_xml_path),
	(read_browser_xml), (write_browser_xml), (get_color_category):
	(remove_color), (add_color_to_file): Factor out some shared code.
	(add_reset_property): Make hard-wired font size with FIXME.
	(make_properties_from_xml_node): Fix storage leaks and get the
	name of the color using nautilus_xml_get_property_translated so
	the names can be translated.
	(set_up_category_width): Fix storage leaks
	(nautilus_property_browser_update_contents): Fix storage leaks and
	get the display name and description with
	nautilus_xml_get_property_translated so they can be translated.

	* check-THANKS.pl: Got rid of extra blank line at end.

	* libnautilus-extensions/nautilus-customization-data.c:
	(format_name_for_display): Add FIXME to bad-for-localization
	function that turns "_" into " " and capitalizes the first letter
	after each " ".
	
2000-11-14  Gene Z. Ragan  <gzr@eazel.com>

	Fixed a bug where changing the Nautilus theme would cause
	the history view to crash.  The problem was with an
	improperly defined signal handler.
	
	* components/history/nautilus-history-view.c:
	(history_view_update_icons), (do_destroy), (make_obj):

2000-11-14  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.c: (determine_turbolinux_version),
	(determine_mandrake_version), (trilobite_get_distribution_name):

	Add detection of version numbers for Mandrake, in the hopes that
	someday they'll be supported.
	
	* nautilus-installer/src/installer.c:
	(get_detailed_errors_foreach), (eazel_installer_post_install),
	(start_logging), (find_old_tmpdir), (eazel_installer_initialize):
	* nautilus-installer/src/main.c: (main):
	* nautilus-installer/src/prescript:

	Fix handling of /tmp directory and make it configurable on the
	command line.  Clarify the "your distribution not supported"
	message.  Clean up the prescript considerably, hopefully in the
	process fixing bugs with specifying what shell to use, what su to
	use, and allowing root to run the installer (worksforme).

2000-11-13  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 1633, History sidebar panel items all display generic 
	bookmark icon.
	
	* libnautilus/nautilus-view-component.idl:
	Added icon string element to History structure to hold
	an pifbuf converted to a XML string.

	* src/nautilus-window-manage-views.c: (get_history_list_callback):
	Get bookmark pixbuf, convert it to XML and copt the XML string into
	the CORBA structure that is added to the list to be returned.
	
	* components/history/nautilus-history-view.c: 
	(install_icon):
	Check and see if pixbuf is non-NULL. If it is, use it. Otherwise
	use the generic bookmark icon.
	
	(history_view_update_icons):
	Reload entire list to ensure that proper icons are used.
	
	(history_load_location):
	Call install_icon with new pixbuf parameter.	

2000-11-13  Eskil Heyn Olsen  <eskil@eazel.com>

	A lot of housecleaning, for which there were no bug reports...
	amongst this some of the leak fixing that libleakcheck pointed
	out.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (delete_files), (main):
	Pass the install categories to the problem handler
	Don't ask about delete iff --file was used
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_for_file_conflicts),
	Added a comment
	(eazel_install_do_transaction_save_report),
	Don't store the provides lists when storing the transaction
	(eazel_install_display_arguments),
	(eazel_install_start_transaction),
	Log rpm arguments again
	(eazel_install_add_to_extras_foreach),
	(eazel_install_check_existing_packages),
	(eazel_install_ensure_deps), (eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse),
	(eazel_uninstall_check_for_install):
	Leak fixing
	
	* components/services/install/lib/eazel-install-md5.c:
	(md5_get_digest_from_file):
	Close files after md5 check
	* components/services/install/lib/eazel-install-object.c:
	(xml_from_packagedata), (xml_from_packagedata_list),
	Packagedata to xml with provides lists
	(eazel_install_unref), 
	call gtk_object_unref i EAZEL_INSTALL_NO_CORBA
	(eazel_install_initialize),
	(eazel_install_fetch_remote_package_list), (eazel_install_log),
	(eazel_install_open_log), (eazel_install_alter_mode_on_temp),
	(eazel_install_delete_downloads), (eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_emit_install_progress),
	(eazel_install_emit_install_progress_default),
	(eazel_install_emit_download_progress),
	(eazel_install_emit_download_progress_default),
	(eazel_install_emit_preflight_check),
	(eazel_install_emit_preflight_check_default),
	(eazel_install_emit_download_failed),
	(eazel_install_emit_download_failed_default),
	(eazel_install_emit_md5_check_failed),
	(eazel_install_emit_md5_check_failed_default),
	(eazel_install_emit_install_failed),
	(eazel_install_emit_install_failed_default),
	(eazel_install_emit_uninstall_failed),
	(eazel_install_emit_uninstall_failed_default),
	(eazel_install_emit_dependency_check),
	(eazel_install_emit_dependency_check_default),
	(eazel_install_emit_done), (eazel_install_emit_done_default):
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-private.h:
	The rest is rename of a define in the .h file
	
	* components/services/install/lib/eazel-install-problem.h:
	* components/services/install/lib/eazel-install-problem.c:
	(eazel_install_problem_debug_attempts), (compare_problem_case),
	(add_case), (add_cannot_solve_case), (add_force_install_both_case),
	(add_force_remove_case), (eazel_install_problem_case_to_string),
	(eazel_install_problem_case_foreach_destroy),
	(finalize_attempts_hash_cleanup), (eazel_install_problem_finalize),
	(problem_step_foreach_remove), (eazel_install_problem_step),
	(eazel_install_problem_tree_to_case),
	(eazel_install_problem_find_dominant_problem_type),
	(find_dominant_problems), (build_categories_from_problem_list),
	(eazel_install_problem_handle_cases):
	Strewed debug output around.
	Added a CANNOT_SOLVE case.
	Fixed a memory corruption that occured when I freed handled
	problems
	Made the humanreadable strings i18n'ed, and added comments for the
	translators.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package), (get_search_url_for_package):
	Leak fixing.
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query), (eazel_install_simple_query):
	Added which root it's opening to the debug output, used to catch a
	bug in the installer.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings),
	(eazel_install_start_transaction_make_rpm_argument_list),
	(eazel_install_free_rpm_system),
	(eazel_install_prepare_rpm_system):
	Leak fixing and debug output changing...
	
	* components/services/install/lib/eazel-install-xml-package-list.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (parse_category),
	(eazel_install_packagedata_to_xml),
	(eazel_install_packagelist_to_xml),
	(eazel_install_categorydata_to_xml), (osd_parse_implementation),
	(osd_parse_softpkg):
	Leak fixing, plus the ability to generate xml without PROVIDES.
	
	* components/services/install/lib/makefile.staticlib.in:
	Added eazel-install-problem, since the installer now uses it.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_parse_uri),
	(nautilus_service_install_done),
	(nautilus_service_install_view_update_from_uri):
	Moved the category list into the details for the view, so when
	calling eazel-install-problem handler, I could pass the categories
	to install.
	
	* components/services/trilobite/helper/eazel-helper.security.in:
	Fixed so it should work with all usermode versions.
	
	* components/services/trilobite/libtrilobite/trilobite-core-utils.h
	:
	* components/services/trilobite/libtrilobite/helixcode-utils.c:
	* components/services/trilobite/libtrilobite/helixcode-utils.h:
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_fetch_uri), (trilobite_fetch_uri_to_file),
	(trilobite_setenv):
	Leak fixing and debug output and s/glib types/c types/.
	
	* nautilus-installer/src/HACKING:
	Added a warning saying you have to be Eskil or Robey to make this
	compile.
	
	* nautilus-installer/src/Makefile:
	Yes.
	
	* nautilus-installer/src/callbacks.c: (begin_install):
	Hacked to use the eazel-install problem solver.
	
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/installer.c: (create_what_to_do_page),
	(create_install_page), (jump_to_error_page), (start_over),
	(dont_start_over_callback), (jump_to_retry_page),
	(create_finish_page_good), (eazel_install_progress),
	(eazel_download_progress), (create_initial_force_remove_category),
	(add_force_remove), (get_detailed_errors_foreach),
	(get_detailed_errors), (install_failed), (eazel_install_preflight),
	(install_done), (eazel_installer_add_category), (check_system),
	(more_check_system), (eazel_installer_do_install),
	(eazel_installer_post_install), (draw_splash_text),
	(eazel_installer_set_default_texts), (eazel_installer_setup_texts),
	(eazel_install_get_depends), (add_singular_package),
	(eazel_installer_initialize):
	Changed to use the eazel-install-problem handler.
	Most text strings are taken from a array, which is set in a
	function that can grab the strings from a server (partly fix for
	1094).
	Removed all the old problem handler code.

	* nautilus-installer/src/main.c: (main):
	Added a secret --package option that makes the installer ignore
	the server specified package and just download another. Good for
	debugging.

2000-11-13  Mathieu Lacage  <mathieu@eazel.com>

	Make maciej happy and split the dnd code in a new file.
	
	* components/tree/Makefile.am: add new files.
	* components/tree/nautilus-tree-view-dnd.c: new file for dnd code.
	(tree_view_realize_callback), (nautilus_tree_view_init_dnd),
	(nautilus_tree_view_drag_begin), (nautilus_tree_view_drag_end),
	(collapse_time_callback), (nautilus_tree_view_drag_leave),
	(nautilus_tree_view_drag_motion), (nautilus_tree_view_drag_drop),
	(nautilus_tree_view_drag_data_received),
	(nautilus_tree_view_drag_data_get),
	(nautilus_tree_view_button_press),
	(nautilus_tree_view_button_release),
	(nautilus_tree_view_motion_notify),
	(nautilus_tree_view_make_prelight_if_file_operation),
	(nautilus_tree_view_expand_node),
	(nautilus_tree_view_collapse_node),
	(nautilus_tree_view_is_tree_node_expanded),
	(nautilus_tree_view_expand_or_collapse_row),
	(nautilus_tree_view_move_copy_files),
	(nautilus_tree_view_find_drop_target),
	(nautilus_tree_view_is_tree_node_directory),
	(nautilus_tree_view_tree_node_at), (nautilus_tree_view_item_at),
	(nautilus_tree_view_get_drag_uri),
	(nautilus_tree_view_ensure_drag_data), (nautilus_dump_info),
	(expand_hack_unref), (expand_hack_new), (expand_time_callback),
	(nautilus_tree_view_expand_maybe_later),
	(auto_scroll_timeout_callback),
	(nautilus_tree_view_start_auto_scroll),
	(nautilus_tree_view_stop_auto_scroll),
	(nautilus_tree_view_real_scroll),
	(nautilus_tree_view_get_drop_action),
	(nautilus_tree_view_collapse_all),
	(nautilus_tree_view_receive_dropped_icons),
	(nautilus_tree_view_prelight_stop),
	(nautilus_tree_view_drag_destroy),
	(nautilus_tree_view_drag_destroy_real):
	* components/tree/nautilus-tree-view-dnd.h: header.
	* components/tree/nautilus-tree-view-private.h: shared stuff between
	TreeView and dnd code.
	
	* components/tree/nautilus-tree-view.c: remove all those functions.
	(nautilus_tree_view_insert_model_node), (forget_view_node),
	(nautilus_tree_view_remove_model_node),
	(nautilus_tree_view_update_model_node),
	(nautilus_tree_view_initialize),
	(nautilus_tree_view_model_node_to_view_node),
	(nautilus_tree_view_node_to_model_node),
	(nautilus_tree_view_node_to_file), (tree_expand_callback),
	(tree_collapse_callback), (tree_select_row_callback),
	(nautilus_tree_view_find_parent_node):
	* components/tree/nautilus-tree-view.h:

2000-11-13  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* configure.in:
	Enable the sign-compare and cast-align warnings.
	
	* components/help/converters/gnome-db2html2/gdb3html.c:
	(find_first_element):
	* components/help/hyperbola-filefmt.c: (fmt_free_tree_info):
	* components/help/hyperbola-nav-index.c:
	(hyperbola_navigation_index_update_clist), (despace),
	(end_element):
	* components/history/nautilus-history-view.c:
	(history_load_location):
	* components/mozilla/nautilus-mozilla-content-view.c:
	(string_list_get_index_of_string):
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_string_sequence_to_glist),
	(corba_packagedatastructlist_from_packagedata_list),
	(packagedata_list_from_corba_packagedatastructlist),
	(categorydata_list_from_corba_categorystructlist):
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_monitor_rpm_process_pipe):
	* components/services/install/lib/eazel-install-rpm-signature.c:
	(read_rpm_lead), (read_rpm_signature):
	* components/services/trilobite/libtrilobite/trilobite-root-helper.
	c: (trilobite_root_helper_run_program),
	(trilobite_root_helper_set_time):
	* cut-n-paste-code/widgets/nautilusclist/nautilusclist.c:
	(nautilus_clist_get_arg), (nautilus_clist_construct):
	* helper-utilities/authenticate/nautilus-authenticate.c: (main):
	* libnautilus-extensions/nautilus-background.c:
	(set_image_and_color_image_loading_done_callback):
	* libnautilus-extensions/nautilus-buffered-widget.c:
	(nautilus_gdk_pixbuf_tile_alpha):
	* libnautilus-extensions/nautilus-caption-table.c:
	(entry_activate):
	* libnautilus-extensions/nautilus-caption-table.h:
	* libnautilus-extensions/nautilus-ctree.c:
	(nautilus_ctree_node_nth), (nautilus_ctree_drag_motion):
	* libnautilus-extensions/nautilus-ctree.h:
	* libnautilus-extensions/nautilus-directory-async.c:
	(metafile_write):
	* libnautilus-extensions/nautilus-file-changes-queue.c:
	(nautilus_file_changes_consume_changes):
	* libnautilus-extensions/nautilus-file-operations-progress.c:
	(truncate_string_from_start):
	* libnautilus-extensions/nautilus-file-operations.c:
	(extract_string_until):
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_read_entire_file):
	* libnautilus-extensions/nautilus-gdk-extensions.c:
	(nautilus_get_largest_fitting_font):
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_get_sidebar_panel_view_identifiers):
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_window_set_initial_geometry_from_string),
	(nautilus_gtk_menu_set_item_visibility):
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(draw_or_measure_label_text), (draw_or_measure_label_text_aa):
	* libnautilus-extensions/nautilus-icon-container.c:
	(rubberband_timeout_callback), (destroy), (compute_stretch):
	* libnautilus-extensions/nautilus-icon-container.h:
	(nautilus_icon_container_find_drop_target):
	* libnautilus-extensions/nautilus-icon-factory.c:
	(check_recently_used_list), (get_themed_icon_file_path),
	(revise_scale_factors_if_too_big):
	* libnautilus-extensions/nautilus-icon-text-item.c:
	(recompute_bounding_box), (iti_draw), (iti_selection_motion):
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_size_allocate), (label_recompute_line_geometries):
	* libnautilus-extensions/nautilus-list.c: (draw_cell),
	(nautilus_list_drag_data_received):
	* libnautilus-extensions/nautilus-mime-actions.c:
	(server_matches_content_requirements),
	(nautilus_do_component_query):
	* libnautilus-extensions/nautilus-password-dialog.c:
	(caption_table_activate_callback):
	* libnautilus-extensions/nautilus-preferences-item.c:
	(has_image_file):
	* libnautilus-extensions/nautilus-scalable-font.c:
	(file_as_string), (parse_font_description_file),
	(nautilus_text_layout_new):
	* libnautilus-extensions/nautilus-scalable-font.h:
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(check_permissions):
	* libnautilus/nautilus-view.c:
	(nautilus_shallow_g_list_from_uri_list):
	* libnautilus/nautilus-zoomable.c:
	(nautilus_g_list_from_ZoomLevelList):
	* librsvg/rsvg-ft.c: (rsvg_ft_measure_or_render_string):
	* librsvg/rsvg.c: (rsvg_parse_transform):
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_create_background_context_menu_items),
	(get_sort_criterion_by_metadata_text), (get_sort_criterion_by_id):
	* src/file-manager/fm-list-view.c: (select_row_common),
	(select_matching_name_callback), (select_previous_next_common),
	(fm_list_view_bump_zoom_level):
	* src/nautilus-search-bar-criterion.c:
	(nautilus_search_bar_criterion_update_valid_criteria_choices):
	* src/nautilus-shell.c: (corba_open_windows),
	(corba_open_default_window):
	* src/nautilus-sidebar.c: (nautilus_sidebar_add_panel_items):
	* src/nautilus-window-menus.c:
	(nautilus_window_disable_keyboard_navigation_for_menus):
	* src/nautilus-window.c: (nautilus_window_size_request):
	Fix all sign-compare violations.

2000-11-13  Mathieu Lacage  <mathieu@eazel.com>

	Buddy: pavel.
	Fix bug 2422 and 4382.
	
	* components/tree/nautilus-tree-view.c:
	(filtering_changed_callback), 
	(collapse_time_callback): added. collapses opened folders when
	you leave the tree view.
	(nautilus_tree_view_drag_leave): make it call tree_view_drag_destroy
	(nautilus_tree_view_drag_motion): cleanup, make it call
	tree_view_drag_destroy_real
	(nautilus_tree_view_drag_drop): spaces.
	(nautilus_tree_view_drag_data_received): cleanup: make it call
	tree_view_drag_destroy.
	(nautilus_dump_info): cleanup.
	(expand_time_callback): cleanup.
	(nautilus_tree_view_expand_maybe_later): cleanup
	(nautilus_tree_view_collapse_all): cleanup.
	(nautilus_tree_view_receive_dropped_icons): make it collapse
	correctly.
	(nautilus_tree_view_prelight_stop): new function: clears prelighting.
	(nautilus_tree_view_drag_destroy): new function: destroys when drag finished.
	(nautilus_tree_view_drag_destroy_real): new function: destroys when drag begins.
	* docs/dnd.txt: add some thoughts.
	* libnautilus-extensions/nautilus-drag.c: 
	(nautilus_drag_init): init new field.
	* libnautilus-extensions/nautilus-drag.h: add shared field to public structure.

2000-11-13  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4700, ejecting an audio cd kills Nautilus
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_get_volume_name):
	Check for NULL string before using it.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(volume_unmounted_callback):
	Don't bother emiting signal if volume was never mounted
	in the first place.

2000-11-13  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	More work towards using Bonobo for context menus. Also, found
	and fixed bug where "Open With" items weren't working from
	the File menu (though they were from the context menu).

	* src/file-manager/fm-directory-view.c:
	(add_open_with_program_menu_item): Determine verb name from item
	path, not item label. This was broken before, causing "Open With"
	items in the File menu not to work. Not sure why this ever worked,
	but I didn't spend too much time investigating its change history.
	(add_open_with_app_bonobo_menu_item), 
	(add_open_with_viewer_bonobo_menu_item): Removed these functions;
	they were adding an extra layer that ended up hurting rather than
	helping.
	(add_application_to_bonobo_menu),
	(add_component_to_bonobo_menu): consolidated with the removed
	functions; add item to context menu as well as normal menu.
	(reset_bonobo_open_with_menu): remove menu items and verbs from
	context menu as well as normal menu.

2000-11-13  Josh Barrow  <josh@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_register):
	Renamed "directory" to "folder"

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: John Sullivan  <sullivan@eazel.com>

	* src/run-nautilus: Fixed bug 3248 (2nd copy of Nautilus faults)
	by removing the nautilus-clean.sh calls from run-nautilus (Ramiro
	claims it was fixed already, but there were race conditions, and
	these calls are masking bugs that we want to fix for release).

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* components/adapter/nautilus-adapter-progressive-load-strategy.c:
	Increased chunk-size to 32k in an unsuccesful attempt to improve
	the situation with regards to fix bug 3256 (attempt to view huge
	text file is very slow). It did not help which leads me to believe
	the problem is with the way the text control handles progressive
	updates.

	Fix bug 2180 (switching from icon view to list view, the zoom
	control disappears and then reappears).
	
	* src/nautilus-window-manage-views.c (load_content_view,
	zoom_level_changed_callback): Don't show and hide the zoom control
	at various times. Instead, let
	`nautilus_window_set_content_view_widget' establish the right
	visibility state when we finally enable the widget. This way, the
	zoom control won't ever disappear and reappear when switching
	between two different zoomable views.
	* src/nautilus-window.c (nautilus_window_set_content_view_widget):
	Set the zoom control to the right visibility state when setting
	the new widget.

2000-11-13  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-theme-selector.c: (exit_remove_mode):
	fixed bug 3823, text in theme selector is wrong, by correcting
	a mis-set boolean.
	
2000-11-13  John Sullivan  <sullivan@eazel.com>

	More progress on using Bonobo for context menu items.
	Now the Bonobo context menu items get their labels
	updated to match the selection.

	* src/file-manager/fm-directory-view.c: 
	(compute_menu_item_info):
	Now has return parameters for the label with & without underscore,
	instead of a boolean parameter to choose between them.	
	(append_gtk_menu_item), (append_selection_menu_subtree):
	Update callers that only want the without-underscore version.	
	(update_one_menu_item): Set the label for the verb (no underscore)
	as well as the label for the menu item (include underscore).

	* src/file-manager/fm-icon-view.c: 
	(compute_menu_item_info):
	Now has return parameters for the label with & without underscore,
	instead of a boolean parameter to choose between them.
	(insert_one_context_menu_item),
	(fm_icon_view_create_background_context_menu_items):
	Update callers that only want the without-underscore version.
	(update_one_menu_item): Set the label for the verb (no underscore)
	as well as the label for the menu item (include underscore).

	* src/file-manager/fm-search-list-view.c:
	(compute_reveal_item_name_and_sensitivity):
	Now has return parameters for the label with & without underscore,
	instead of a boolean parameter to choose between them.
	(real_create_selection_context_menu_items): Update caller that
	only wants the without-underscore version.
	(update_reveal_item): Set the label for the verb (no underscore)
	as well as the label for the menu item (include underscore).
	
	* src/file-manager/nautilus-directory-view-ui.xml:
	Add some placeholders in the selection context menu so subclasses
	can place items correctly.
	* src/file-manager/nautilus-icon-view-ui.xml:
	Insert Rename, Stretch, and Unstretch into context menu.
	* src/file-manager/nautilus-search-list-view-ui.xml:
	Define commands for each verb. Move tips to commands.
	Insert Reveal into context menu.

2000-11-13  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 4703, add new background crashes when you pick trash.
	
	* src/nautilus-property-browser.c: (add_background_to_browser):
	fixed by removing a double-free in the case when the selected
	file is not an image.
	
2000-11-13  John Sullivan  <sullivan@eazel.com>

	More work towards converting directory view context menus
	to use Bonobo. Checking in so Darin can help me debug.
	The Bonobo context menus still aren't used unless you
	modify code.

	* src/file-manager/fm-directory-view.c: 
	(real_merge_menus): Add verb handler for "Reset Background"
	(fm_directory_view_pop_up_selection_context_menu): Add
	conditional to execute Bonobo version (if TRUE changed to FALSE).
	(fm_directory_view_pop_up_background_context_menu): formatting tweak.
	* src/file-manager/nautilus-directory-view-ui.xml:
	Added command definitions for all verbs. Moved labels from
	context items into commands. Moved tips into commands. Populated
	the background and selection popup menu definitions.
	* src/file-manager/nautilus-icon-view-ui.xml:
	Added command definitions for all verbs and ids. Defined labels
	for commands. Moved tips into commands. Partially populated the
	background popup menu definition.
	* src/nautilus-shell-ui.xml: Moved accelerators for Zoom commands
	to menu items, so they don't appear in context menus. Add labels
	for Zoom commands. Add degenerate background popup that defines
	the zoom items.

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-program-choosing.c
	(nautilus_launch_application_from_command): Remove stray printf.

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	* THANKS: Updated based on running check-THANKS.pl
	* AUTHORS, ChangeLog-200001018: Fixed some typos in
	people's email addresses.

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	Fix bugs 3641 (text preview gets garbled when switching files in
	the middle of a load) and 3479 (Nautilus crashes if
	nautilus-adapter* missing).

	* components/adapter/nautilus-adapter-progressive-load-strategy.c
	(call_when_stopped, load_and_free_uri, declare_done_loading,
	stop_loading,
	nautilus_adapter_progressive_load_strategy_load_location): Make
	sure previous load is completely stopped before ever starting a
	new load.

	* components/adapter/nautilus-adapter.c:
	(nautilus_adapter_destroy, nautilus_adapter_new): Avoid reporting
	signals to the view frame while in the middle of destroying the
	adapter.
	* src/nautilus-component-adapter-factory.c
	(nautilus_component_adapter_factory_get): Return NULL when loading
	the adapter factory component fails.
	(nautilus_component_adapter_factory_initialize,
	component_adapter_factory_at_exit_destructor): Changes required by
	the above.
	* src/nautilus-view-frame.c
	(nautilus_view_frame_set_to_component): report failure if we can't
	load the adapter factory.
	* src/nautilus-window-manage-views.c
	(report_content_view_failure_to_user, load_content_view,
	handle_view_failure, nautilus_window_set_sidebar_panels): Do a
	somewhat better job of reporting view load failures.

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_insert_model_node,
	nautilus_tree_view_update_model_node): Set both open and closed
	pixmaps, so open folders have a disttinct appearance in the tree,
	in addition to the disclosure triangles. This fixes bug 2421. This
	work was needed to fix bug 3279 (Icons in tree sidebar panel don't
	update when theme is changed), which was a side effect of not
	doing this.

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-ctree.c (ctree_is_hot_spot):
	Expand margins around expander by 3 pixels on each side to make it
	easier to click the disclosure triangle (triangle will prelight
	when within range), to fix bug 4479


	Fix bugs 4497 (Add configuration option to show only folders in
	tree view) and 2419 (Tree view should track "show hidden files"
	preference):

	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_should_skip_file,
	nautilus_tree_view_insert_model_node,
	nautilus_tree_view_remove_model_node,
	nautilus_tree_view_update_model_node): Handle possibly filtering
	out hidden files, backup files or non-directories.
	
	(filtering_changed_callback,
	nautilus_tree_view_initialize): Initialize from and watch
	filtering preferences, reload whole tree when prefs change.
	
	(nautilus_tree_view_destroy): Stop watching filtering prefs.

	(reload_model_node, reload_whole_tree, expand_node_for_file,
	nautilus_tree_view_receive_dropped_icons): Update code for
	reloading the tree on expand/collapse etc.

 	* components/tree/nautilus-tree-model.c
	(nautilus_tree_model_directory_files_added_callback): Check if we
	already have a node for each file before trying to create a new
	one. This was needed because otherwise chaning the preference
	settins mentioned above would result in crashes.

	* libnautilus-extensions/nautilus-file.h,
	libnautilus-extensions/nautilus-file.c:
	(nautilus_file_is_hidden_file, nautilus_file_is_backup_file,
	nautilus_file_should_show,
	filter_hidden_and_backup_partition_callback,
	nautilus_file_list_filter_hidden_and_backup): Move hidden file and
	backup file filtering logic here from fm-directory-view.c.

	* src/file-manager/fm-directory-view.c (queue_pending_files): Use
	`nautilus_file_list_filter_hidden_and_backup' to do filtering.
	
	* libnautilus-extensions/nautilus-global-preferences.h,
	libnautilus-extensions/nautilus-global-preferences.c
	(global_preferences_create_dialog, global_preferences_register):
	Add a new preference for showing only directories in the tree
	view.

	* libnautilus-extensions/nautilus-preferences-dialog.c: Make
	preferences dialog a bit bigger to accomodate the new setting.

2000-11-12  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 3210, trash image fails to appear when defined as
	emblem, by disallowing new emblems to be defined with the same
	name as intrinsic ones.  Also, disallowed adding an emblem with
	the same name as an existing one.

	* src/nautilus-property-browser.c:
	(nautilus_property_browser_destroy), (emblem_keyword_valid),
	(is_reserved_keyword), (emblem_dialog_clicked),
	(make_properties_from_directories):
	maintain a glist of emblem names, and check it when we're adding a
	new one to make sure it's not already on it.  Put up an error dialog
	if it already exists.
	
2000-11-12  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 3116, add preference for disabling sound preview
	
	* libnautilus-extensions/nautilus-global-preferences.h:
	defined sound preview preference
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_create_dialog), (global_preferences_register):
	registered sound preview preference and added to speed tradeoffs
	* src/file-manager/fm-icon-view.c: (should_preview_sound),
	(icon_container_preview_callback):
	only preview sounds if the preference is set
	
2000-11-12 John Fleck <jfleck@inkstain.net>

	* adding term tag support to gnome-db2html2 - fixing bug #4406
	
2000-11-12  Maciej Stachowiak  <mjs@eazel.com>

	Fixed bugs 4503 and 4584.
	
	* components/tree/nautilus-tree-view.c: Added
	`current_main_view_uri' field to details struct.
	(nautilus_tree_view_load_uri): Set `current_main_view_uri' field
	every time, whether or not we end up selecting it.
	(nautilus_tree_view_destroy): Free `current_main_view_uri' and
	`selected_uri' fields.
	(tree_select_row_callback): Only ignore the select if the selected
	row matches `current_main_view_uri', not just `selected_uri' to
	fix bug 4584 (Can not reselect the previous directory in the tree
	when I entered a "hidden" directory in the content view)

	(nautilus_tree_view_button_release): Only select the row on a
	release of button 1, otherwise ignore to fix bug 4503 ("Tree
	Sidebar panel treats right-clicks as left-clicks (should do
	nothing)")
 
	(tree_view_realize_callback): trivial formatting fix. 

2000-11-11  Maciej Stachowiak  <mjs@eazel.com>

	* components/help/hyperbola-nav-tree.c
	(hyperbola_navigation_tree_new): FIx bug 4352 and make the
	redundant "Document Tree" title go away.

2000-11-11  Maciej Stachowiak  <mjs@eazel.com>

	Fixed bugzilla.eazel.com bugs 4051 (applications which require
	terminals don't get them) and 4072 (mime types: command= string
	can't take args?).

	* libnautilus-extensions/nautilus-gnome-extensions.c
	(nautilus_gnome_terminal_shell_execute): Don't take the shell as
	an argument, just use "/bin/sh", there's no reason to use any
	other shell for the purpose of launching a terminal like this.

	(nautilus_gnome_open_terminal): Don't pass user shell to
	`nautilus_gnome_terminal_shell_execute'; handle `gnome-terminal'
	properly by passing it "-x" instead of incorrectly trying to quote
	the command.
	
	* libnautilus-extensions/nautilus-gnome-extensions.h: Fix minor
	typo.
	
	* libnautilus-extensions/nautilus-program-choosing.h,
	libnautilus-extensions/nautilus-program-choosing.c:
	(nautilus_launch_application_from_command): Add a use_termial
	argument and if passed, launch the program in a terminal; minor
	fixes to the way non-terminal-requiring programs are launched as
	well, including not quoting the command, so that it can include
	command line arguments (if the command name includes a space, it
	had better be quoted already).

	(nautilus_launch_application): Use the new `use_terminal' argument
	when calling `nautilus_launch_application_from_command'.
	
	* libnautilus-extensions/nautilus-program-chooser.c:
	(launch_mime_capplet): Use the new `use_terminal' argument
	when calling `nautilus_launch_application_from_command'.

	* src/file-manager/fm-desktop-icon-view.c
	(change_desktop_background_menu_item_callback): Use the new
	`use_terminal' argument when calling
	`nautilus_launch_application_from_command'.
	
	* src/file-manager/fm-directory-view.c (activate_callback): Use
	the new `use_terminal' argument when calling
	`nautilus_launch_application_from_command'. Also, shell-quote the
	command, since nautilus_application_launch_from_command won't do
	that for you any more.

2000-11-10  Maciej Stachowiak  <mjs@eazel.com>

	* icons/gnome/Makefile.am, icons/i-executable.png: Restored
	original icon to Gnome theme (Andy accidentally changed it while
	replacing the default theme's exectuable icon).

2000-11-10  Andy Hertzfeld  <andy@eazel.com>

	* icons/Makefile.am:
	* icons/i-executable-aa.png:
	* icons/i-executable.png:
	new executable icons from Susan
	
2000-11-10  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c:
	(nautilus_color_selection_dialog_new), (add_color_to_file),
	(add_color_to_browser), (show_color_selection_window),
	(add_new_color), (make_properties_from_xml_node):
	fixed bug 4197, colors can't be given a name, by adding a
	color selection window with a name entry, and using that
	to name the color.
	
	* icons/villanova/Makefile.am:
	* icons/villanova/i-directory-accept-*.png:
	fixed bug 4641, missing non-aa "folder-accept" image for the
	villanova theme, by adding new images from Susan.
	
	* icons/eazel/eazel.xml:
	* icons/villanova/villanova.xml:
	tweaked the selection box colors for the eazel and villanova
	themes according to Susan's specification.
	
2000-11-10  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3057, Icon renaming state can get broken by clicking 
	in location bar.
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(handle_focus_out_event): 
	Signal handler that ends renaming mode when focus changes.
	(nautilus_icon_container_initialize):
	Connect "focus_out_event" to new signal handler above.
	
	* libnautilus-extensions/nautilus-icon-text-item.c: (layout_text),
	(iti_start_editing), (iti_draw), (iti_event),
	(nautilus_icon_text_item_select),
	(nautilus_icon_text_item_get_text),
	(nautilus_icon_text_item_start_editing),
	(nautilus_icon_text_item_stop_editing):
	Code style cleanups.

2000-11-10  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Gene Z. Ragan <gzr@eazel.com>

	I think 3320 is fixed (I definitely can't reproduce it) but this
	change should eliminate a few remaining possible causes.
	
	* components/tree/nautilus-tree-model.h,
	components/tree/nautilus-tree-model.c
	(nautilus_tree_model_get_node_from_file): New function that gets
	the node corresponding to a NautilusFile (to avoid possible
	problems with multiple NautilusFile objects for one URI).
	
	(nautilus_tree_model_get_node, report_node_changed,
	report_node_removed_internal,
	nautilus_tree_model_directory_files_changed_callback,
	nautilus_tree_model_directory_done_loading_callback): Use where
	possible.

	* components/tree/nautilus-tree-view.c: (reload_node_for_file,
	nautilus_tree_view_find_parent_node): Use
	`nautilus_tree_model_get_node_from_file'.

2000-11-09  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c:
	(nautilus_property_browser_drag_data_get):
	fix bug where newly added reset coupon in the colors section
	of the property browser wasn't working on the sidebar.  Fixed
	by making sure it issues a uri to a valid image in
	drag_data_get.
	
2000-11-09 Elliot Lee <sopwith@redhat.com>

	* configure.in: Fix freetype2 detection
	* Various makefiles: fix srcdir != builddir.

2000-11-09  Darin Adler  <darin@eazel.com>

	buddy: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopuluate_program_list), (is_component_default_for_file),
	(program_file_pair_is_default_for_file),
	(program_file_pair_is_in_short_list_for_file),
	(add_to_short_list_for_file), (remove_from_short_list_for_file),
	(remove_default_for_item), (set_default_for_item):
	* libnautilus-extensions/nautilus-program-choosing.c:
	(nautilus_choose_component_for_file):

	Remove unnecessary calls to wait functions. There are still
	one or two cases of calls. Next step is to replace them.

2000-11-09  John Sullivan  <sullivan@eazel.com>

	The beginnings of converting directory view context menus
	to Bonobo. This doesn't work right yet; I'm checking in
	so Darin can help me debug (the new code is iffed out for
	now)

	* src/file-manager/fm-directory-view.c: (get_bonobo_window),
	(create_popup_menu), (real_merge_menus),
	(fm_directory_view_pop_up_background_context_menu):
	* src/file-manager/nautilus-directory-view-ui.xml:

2000-11-08  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_container_find_drop_target),
	(nautilus_icon_container_get_drop_action):
	fixed bug 3215 and 3723, bad feedback during emblem dropping,
	by rejecting the drop if we're not over an icon.  Also, made it
	reject the drop for colors and backgrounds if we're not over
	the background.  I also fixed a memory leak in get_drop_action.
	
2000-11-08  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:
	if rpm version check fails, hint at user 
	to --disable-eazel-services

2000-11-08  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_for_file_conflicts),
	(eazel_uninstall_downward_traverse):
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_add_to_rpm_set):
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_new_from_rpm_header),
	(packagedata_fill_from_rpm_header), (packagedata_fill_from_file),
	(packagedata_destroy):
	* components/services/install/lib/eazel-install-types.h:
	* nautilus-installer/src/installer.c: (more_check_system):
	
	Backport the memory leak fixes from PR2.  Also clean up the use of
	'Header' structs from librpm since they turn out to be secret
	pointers, not structs.

2000-11-08  Darin Adler  <darin@eazel.com>

	buddy: Gene Ragan <gzr@eazel.com>

	* libnautilus-extensions/nautilus-file.c: (rename_callback): Since
	metadata for the directory itself is now stored under a fixed
	name, no need to rename the metadata for self-owned files any
	more.
	(get_item_count), (get_size), (compare_directories_by_count),
	(compare_files_by_size), (compare_by_size): Reimplement compares
	by size so they don't use gnome_vfs_file_info_compare -- this
	makes them work better for info == NULL cases.
	(get_date), (compare_by_modification_date): Reimplement compares
	by modification date so they don't use gnome_vfs_file_info_compare
	-- this makes them work better for info == NULL cases.
	(compare_by_name): Sort files that start with "." or "#" last.
	(compare_by_name_and_directory_name): Helper function so that we
	always sort by directory name when names are equal.
	(nautilus_file_compare_for_sort): Use the new functions above so
	we never have to use the gnome_vfs_file_info_compare function.
	Because of that, we won't have to keep file names around any more.
	This also simplified the logic -- I was able to remove all the
	special cases for info == NULL.
	(get_metadata_name): Function that returns "." for self-owned
	files so the metadata for the directory itself is stored somewhere
	that's not affected by renaming.
	(nautilus_file_get_metadata), (nautilus_file_get_metadata_list),
	(nautilus_file_set_metadata), (nautilus_file_set_metadata_list),
	(nautilus_file_get_boolean_metadata),
	(nautilus_file_get_integer_metadata),
	(nautilus_file_set_boolean_metadata),
	(nautilus_file_set_integer_metadata): Use the new
	get_metadata_name function.
	
	* src/file-manager/nautilus-directory-view-ui.xml: Changed an old
	<menuitem/> to <separator/>.

	* po/.cvsignore: Ignore the tmp directory, but no need to ignore
	the .headerlock file which is now obsolete.

	* README: Minor tweaks.
	* libnautilus-extensions/Makefile.am: Resorted lists.

2000-11-08  John Sullivan  <sullivan@eazel.com>

	buddy: Darin Adler <darin@eazel.com>

	Fixed bug 4485 (":" as location caused odd error messages)

	* libnautilus-extensions/nautilus-directory.c:
	(real_get_name_for_self_as_new_file): Now checks for
	initial-colon as well as missing-colon.
	
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_self_check_file): Added a few self check tests
	for default file naming from bogus directories.

2000-11-08  Ali Abdin  <aliabdin@aucegypt.edu>

	* components/music/nautilus-music-view.c:
	(xpm_label_box),
	(xpm_dual_label_box):
	Re-write to use gdk-pixbuf. This eliminates a FIXME in there.

2000-11-08  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:
	Fixed bug 4643, check for rpm version 3.0.x

2000-11-08  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4472 (web search uses wrong URI)

	* libnautilus-extensions/nautilus-global-preferences.c:
	Change the web search default URI per Laura.

2000-11-08  Mike Fleming  <mfleming@eazel.com>

	Fix relative URI bugs 4415, 4416, 4417.
	Do eazel-services untranslate for link messages

	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_link_message_callback),
	(remove_internal_relative_components),
	(make_full_uri_from_relative), (mozilla_dom_mouse_click_callback),
	(test_make_full_uri_from_relative):

2000-11-07  Josh Barrow  <josh@eazel.com>

	* icons/eazel/eazel.xml:
	Changed the selection box color to match the icons.

2000-11-07  Darin Adler  <darin@eazel.com>

	Worked on getting rid of wait_until_ready.
	
	* libnautilus-extensions/nautilus-directory.c: Got rid of include
	of nautilus-wait-until-ready.h.
	
	* libnautilus-extensions/nautilus-file.c: Got rid of
	nautilus_file_wait_until_ready.
	
	* libnautilus-extensions/nautilus-mime-actions.c:
	(wait_until_ready_callback),
	(nautilus_mime_actions_wait_for_full_file_attributes):
	Reimplemented so the wait is in here so we can get rid of
	nautilus_file_wait_until_ready.
	
	* libnautilus-extensions/nautilus-mime-actions.h: Moved
	nautilus_mime_actions_wait_for_full_file_attributes into
	nautilus-wait-until-ready.h.
	
	* libnautilus-extensions/nautilus-program-chooser.c: Added include
	of nautilus-wait-until-ready.h since this is one of the two files
	that still uses the thing.
	* libnautilus-extensions/nautilus-program-choosing.c: Added include
	of nautilus-wait-until-ready.h since this is one of the two files
	that still uses the thing.
	
	* libnautilus-extensions/nautilus-wait-until-ready.h: Removed
	nautilsu_file_wait_until_ready and added
	nautilus_mime_actions_wait_for_full_file_attributes.
	
	* src/file-manager/fm-directory-view.c:
	(switch_location_and_view): Get rid of code that waits for
	attributes, because the code guarantees they will already be read
	at this point.
	(fm_directory_view_destroy): Stop monitoring the file for the open
	with menu.
	(files_changed_callback): Update the menus whenever a file changes
	or our knowledge about it changes.
	(create_open_with_gtk_menu): Use the new monitor call to arrange
	to get the information about the single selected file that we
	need.
	(reset_bonobo_open_with_menu): Use the new monitor call to arrange
	to get the information about the single selected file that we
	need.
	(activate_callback): Remove the hack to work around the
	wait_until_ready calls. Also remove the wait_until_ready in here
	because we now request all the attributes we will be needing in
	the call_when_ready call (that already existed).
	(fm_directory_view_activate_file): Request all the attributes
	needed for determining MIME actions.
	(monitor_file_for_open_with): New function to monitor the stuff we
	need to know for the Open with menu.
	
	* test/test-nautilus-mime-actions-set.c: (ready_callback), (main):
	Use call_when_ready instead of wait_until_ready.
	
	* test/test-nautilus-mime-actions.c: (ready_callback), (main): Use
	call_when_ready instead of wait_until_ready.

	* po/ui-extract.pl: Checked in new version from Kenneth.
	* po/update.pl: Kenneth wanted me to update the license.
	
2000-11-07  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c: (emblem_keyword_valid),
	(emblem_dialog_clicked):
	fixed bugs 4168 and 4171, problems occur when slash and backslash
	are included in emblem names, by only allowing alphanumeric
	characters in emblem names and displaying an error dialog if
	that's not so.
	
2000-11-07  Andy Hertzfeld  <andy@eazel.com>

	* icons/villanova/villanova.xml:
	fixed the villanova theme to use the default document icons
	instead of the ones from the eazel theme, now that the eazel
	ones are different.
	
2000-11-07  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/main.c: (main):
	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_destroy),
	(mozilla_open_uri_callback), (eazel_services_scheme_translate),
	(mozilla_content_view_one_time_happenings):

	fix for bugzillea.eazel.com 4596: using services in two Embedded Mozilla
	windows crashes

2000-11-07  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4489 (some menu items are missing status bar hints)

	* src/file-manager/fm-directory-view.c:
	(add_open_with_program_menu_item): New helper function to
	avoid code duplication; also handles setting tip.
	(add_open_with_app_bonobo_menu_item),
	(add_open_with_viewer_bonobo_menu_item): Use helper function
	and construct tips to pass in for apps & viewers in "Open
	With" submenu.
	* src/file-manager/nautilus-directory-view-ui.xml: Add a tip
	to "Open With" menu item itself.
	* src/nautilus-window-menus.c: (append_bookmark_to_menu):
	Tweaked wording of tip used for bookmarks.

2000-11-07  Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.h:
	* libnautilus-extensions/nautilus-file-operations.c:
	* src/nautilus-first-time-druid.h:
	Tweak to match Nautilus coding style.
	
	* src/nautilus-first-time-druid.c: (druid_cancel): Added FIXME
	about the way it quits Nautilus when you cancel.
	(druid_finished): Use #define constants instead of hard-coded
	URLs.
	(make_anti_aliased_label): Put FIXME where a font and size are
	hard-coded.
	(make_hbox_user_level_radio_button): Put FIXME where a font is
	hard-coded.
	(set_up_user_level_page): Put FIXME where a font size is
	hard-coded.
	(next_update_page_callback): Put FIXME where a comment mentions
	a "timer task" that does not exist.
	(nautilus_first_time_druid_show), (download_callback),
	(read_file_handle_cancel_cover), (initiate_file_download): Got rid
	of "cheap workaround" for when the druid goes away; instead, we
	cancel the I/O.
	
	Other tweaks to be at least in the vicinity of Nautilus coding
	style.

2000-11-07  Maciej Stachowiak  <mjs@eazel.com>

	* nautilus-installer/src/prescript: Make the installer run
	successfully when run as root instead of failing silently, as part
	of the fix to 4605. Sadly, when Eli tried installing as root with
	the modified installer it worked, but running Nautilus
	subsequently as root resulted in strange Nautilus behavior, so
	probably we can't call it closed.

2000-11-07  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_create_requirement),
	(eazel_install_do_rpm_dependency_check):
	* components/services/install/lib/eazel-install-types.c:
	(eazel_install_requirement_dep_name_compare):
	* components/services/install/lib/eazel-install-types.h:

	Backport bug 4594's fix to head: skip checking breakage on
	packages we're about to install/upgrade.
	
	* nautilus-installer/src/prescript:

	Revert Josh's well-meaning but incorrect patch to the spelling of
	Gnome in the Nautilus PR1 version test.

2000-11-07  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus-installer/src/installer.c: (did_we_already_try),
	(add_update_package), (get_detailed_errors_foreach),
	(download_failed), (eazel_installer_do_install):
	Fixed some case where we 1) try and update a package 2) not on
	softcat 3) didn't offer to remove it...
	
2000-11-07  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_do_file_conflict_check):

	Backport Eskil's mushroom habit to the head.

2000-11-07  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_copy_uri_simple), (nautilus_unique_temporary_file_name):
	* libnautilus-extensions/nautilus-file-utilities.h:
	* src/nautilus-first-time-druid.c: (download_callback):
	Fix for 4585.  Crash saving updates.tgz file from server if it
	already exists.  The fix is to use a unique temporary file name
	and cleaning up after untar the update tarball.

2000-11-07  Mike Fleming  <mfleming@eazel.com>

	* src/nautilus-first-time-druid.c: (druid_finished),
	(download_callback):

	Ugly fix to 4568 -- If io completes after druid is finished,
	then unpack the file but don't try to update the (now non-existant)
	GUI components

2000-11-06  Maciej Stachowiak  <mjs@eazel.com>

	* src/nautilus-window-manage-views.c: (load_underway_callback,
	load_complete_callback): Replace FIXME 2460 with a comment
	explaining why current behavior is OK.

2000-11-06  Mike Fleming  <mfleming@eazel.com>

	* src/nautilus-first-time-druid.c: (druid_finished),
	(download_callback), (initiate_file_download), (set_http_proxy),
	(my_sigalrm_handler), (check_dns_resolution),
	(check_network_connectivity):

	Fix for bug 4549 Check for a potential DNS freeze case, and hang
	for only 15 seconds rather than 2+ mins in this case.

2000-11-06  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/docs/installer-rpm-cases:
	Beginning a document of rpm cases, tree structures and generel
	crack...
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_download_progress_signal),
	(eazel_install_progress_signal), (tree_helper), (install_failed):
	Nicer output, ability to disable pct output (--no-percent)
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_file_conflict_check):
	Fix for 4579
	
	* nautilus-installer/src/prescript:
	Removed the crack that starts the nautilus launcher applet.
	
2000-11-06  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(trilobite_get_services_address):
	* libnautilus-extensions/nautilus-password-dialog.c:
	(nautilus_password_dialog_new),
	(nautilus_password_dialog_get_remember),
	(nautilus_password_dialog_set_remember),
	(nautilus_password_dialog_set_remember_label_text):

	Backport PR2 changes (fix NULL string check in trilobite, and
	finish Mathieu's patch to turn off the checkbox in the password
	dialog).

2000-11-06  Josh Barrow  <josh@eazel.com>

	* icons/eazel/theme_preview.png:
	Did a new theme preview for the revamped Eazel theme.

2000-11-06  Mathieu Lacage  <mathieu@eazel.com>

	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	(oaf_activation_callback): small fix: replace NULL with 
	CORBA_OBJECT_NIL
	* test/Makefile.am: add new test.
	* test/test-nautilus-async-activation.{c|h}

2000-11-06  Andy Hertzfeld  <andy@eazel.com>

	* icons/eazel/Makefile.am:
	* icons/eazel/eazel.xml:
	* icons/eazel/i-regular.xml:
	* icons/eazel/i-regular-*.png:
	* icons/eazel/i-directory-*.png:
	* icons/eazel/fossil.png:
	
	at Susan's request, transformed the "eazel" theme into her "merion"
	theme.  We still need to update the theme preview icon to reflect
	the new look.
	
2000-11-06  John Sullivan  <sullivan@eazel.com>

	Fixed PR2 bug 4480 (Crash while navigating in Vault).
	Someone still needs to roll this back to the branch.
	Darin has volunteered to do this when he's back from
	lunch unless someone beats him to it. This fix is a
	workaround for the real problem, described in new bug
	4539.

	* src/file-manager/fm-directory-view.c:
	Added details->waiting_for_activation_count_hack.
	(create_open_with_gtk_menu), 
	(reset_bonobo_open_with_menu):
	Don't try to get full file attributes if we're still
	waiting for any pending activation.
	(schedule_update_menus): Added an assert while debugging
	that is useful enough to keep.
	(activate_callback): 
	decrement details->waiting_for_activation_count_hack.
	(fm_directory_view_activate_file):
	increment details->waiting_for_activation_count_hack.

2000-11-06  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/Makefile.am: fix make distcheck.

2000-11-06  Darin Adler  <darin@eazel.com>

	Fixed bug 4504 (select "view as others" leads to core dump).

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_directory_item_mime_types):
	Change to return a copy of the MIME type list as designed.
	
	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_components_for_file):
	Change the callers that don't free the MIME type list so that they
	now do.

2000-11-06  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus-clean.sh:
	Fix for bug 4530.  Race condition in nautilus-clean.sh trying to
	kill its own grep processes.

2000-11-05  Ramiro Estrugo  <ramiro@eazel.com>

	* src/nautilus-first-time-druid.c:
	(next_proxy_configuration_page_callback):
	Fix for bug 4488.  Proxy string is defaulting to ":".  Do some
	validation on the user input.  Only set the proxy if the proxy and
	port entry text fields are not blank.

2000-11-05  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_fetch_uri):
	* nautilus-installer/src/installer.c: (jump_to_retry_page),
	(eazel_install_get_depends):
	* nautilus-installer/src/main.c: (main):
	* nautilus-installer/src/prescript:
	* nautilus-installer/src/proxy.c: (load_nscp_proxy_settings),
	(load_galeon_proxy_settings), (attempt_http_proxy_autoconfigure):
	* nautilus-installer/src/proxy.h:

	Backported from the PR2 branch: Fix proxy autoconfiguration bugs,
	and use temporary filenames when downloading packages.  Use the
	better way of finding out the user's homedir.  Clean up the error
	message for a package with no update available.

2000-11-05  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 4475, add license to help menu
	
	* src/nautilus-shell-ui.xml:
	added menu item for "Nautilus License"
	* src/nautilus-window-menus.c:
	(help_menu_nautilus_license_callback),
	(nautilus_window_initialize_menus):
	added a bonobo verb and a handler to invoke the license document
	* user-guide/C/Makefile.am:
	added license.html
	* user-guide/C/html/.cvsignore:
	* user-guide/C/html/license.html:
	added license html file from Bud.
	
2000-11-05  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c: (play_status_display),
	(slider_moved_callback), (slider_release_callback):
	fixed bug 2407, divide by zero in the music view, which also got
	classified as PR2 bug 4513. I'm not sure this fixes the entire
	problem, since I wasn't able to manifest it in the first place,
	but Eli will confirm.

2000-11-04  Ramiro Estrugo  <ramiro@eazel.com>

	* src/run-nautilus:
	Fix a typo that was causing the script to always bail.
	
2000-11-04  Almer S. Tigelaar  <almer1@dds.nl>

	* configure.in: Add 'nl' to ALL_LINGUAS.

2000-11-03  Ramiro Estrugo  <ramiro@eazel.com>

	FIX from the pr2 branch.
	
	* helper-scripts/nautilus-verify-rpm.sh:
	Fix bug 4453.  Get right urls into "Nautilus RPM is damaged"
	dialog boxes.  Also change the dialogs slighty as specified by
	sullivan in bug 4366.
	
2000-11-03  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(add_to_url):
	Last fix broke the magic static link of the installer, this will
	fix.

2000-11-03  Darin Adler  <darin@eazel.com>

	Fixed bug 4483 (Crash while navigating in Vault).

	* src/nautilus-window.c: (nautilus_window_set_content_view_widget):
	Remove the idle with gtk_idle_remove, not gtk_timeout_remove.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy): Removed the check since it was giving
	false alarms and not helping us for real.

2000-11-03  Darin Adler  <darin@eazel.com>

	* src/nautilus-shell.c: (display_caveat): Lets call the main
	branch "Nautilus", not "Nautilus Preview Release 2". Later we
	should change the caveat for cvs to be worded differently too.

	* src/nautilus-window.c: (nautilus_window_constructed),
	(nautilus_window_set_arg), (nautilus_window_get_arg),
	(nautilus_window_set_content_view_widget): Fixed spaces removed
	by the script (forgot to save this file before committing before).

2000-11-03  Ramiro Estrugo  <ramiro@eazel.com>

	* Makefile.am:
	* configure.in:
	* helper-scripts/.cvsignore:
	* helper-scripts/Makefile.am:
	* helper-scripts/nautilus-verify-rpm.sh:
	Add a place to put helper-scripts.
	
	* helper-utilities/error-dialog/Makefile.am:
	Dont link in with Nautilus libraries and dependencies.
	
	* helper-utilities/error-dialog/nautilus-error-dialog.c:
	(find_message_label), (find_message_label_callback),
	(show_message_box), (show_ok_box), (nautilus_error_dialog),
	(nautilus_yes_no_dialog), (main):
	Add support for specifying button labels on the command line.
	
	* src/run-nautilus:
	Call the nautilus rpm verification script and bail if it fails.
	
2000-11-03  Darin Adler  <darin@eazel.com>

	* README: Tell everyone that we are back on bonobo HEAD.
	* configure.in: Make sure Nautilus doesn't try to compile with the
	old bonobo.
	
	* components/adapter/nautilus-adapter-embed-strategy.c:
	(nautilus_adapter_embed_strategy_get):
	* components/adapter/nautilus-adapter-load-strategy.c:
	(nautilus_adapter_load_strategy_get):
	* components/adapter/nautilus-adapter-progressive-load-strategy.c:
	(nautilus_adapter_progressive_load_strategy_load_location):
	* components/history/nautilus-history-view.c:
	(history_view_frame_call_begin):
	* libnautilus/nautilus-undo.c: (set_up_bonobo_control):
	* libnautilus/nautilus-view.c: (view_frame_call_begin):
	* libnautilus/nautilus-zoomable.c:
	(nautilus_zoomable_ensure_zoomable_frame):
	Fix all the callers of query_interface in CORBA to call it
	queryInterface (I used the Bonobo script to do it).
	
	* src/nautilus-window.h:
	* src/nautilus-window.c: (nautilus_window_constructed),
	(nautilus_window_set_arg), (nautilus_window_get_arg),
	(nautilus_window_set_content_view_widget): Update for BonoboWin ->
	BonoboWindow change. Once again, the change was done by the Bonobo
	script (but I had to undo the spaces it ate after BONOBO_WIN).
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/time/idl/trilobite-eazel-time-service.idl:
	* components/services/trilobite/idl/trilobite-service.idl:
	* components/services/trilobite/sample/idl/sample-service.idl:
	* libnautilus-adapter/nautilus-adapter-factory.idl:
	* libnautilus/nautilus-distributed-undo.idl:
	* libnautilus/nautilus-view-component.idl:
	Since IDL dependencies don't work, I touched every IDL file to
	make the switchover smoother. This only works if people update
	before they try to build and fail, otherwise they need to do:
		find -name '*.xml' | xargs touch
	(Maciej and I want to add dependency support to orbit-idl to make
	this problem go away long term).
	
	* src/nautilus-desktop-window.c: (realize):
	The script updated this comment to, so I let it.
	
	* user-guide/C/Makefile.am: Took out the botched change I made to
	this file. Mathieu did the correct one.

2000-11-03  Mathieu Lacage  <mathieu@eazel.com>

	Hopefully, fix bug 4055 for true.
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_drag_start), (nautilus_list_ensure_drag_data),
	(nautilus_list_drag_end), (nautilus_list_get_drop_action),
	(nautilus_list_drag_motion), (nautilus_list_drag_data_received):
	make it work with multiple successive drags by reinitializing a 
	number of variables used during drag.
	* src/file-manager/fm-list-view.c: (fm_list_receive_dropped_icons),
	(fm_list_get_default_action): make it react to drops in the blank
	area of a list view.

2000-11-03  Eskil Heyn Olsen  <eskil@eazel.com>

	Last commit was botched, here's the changelog
	
	* components/rpmview/nautilus-rpm-view-install.c:
	(nautilus_rpm_view_download_progress_signal),
	(nautilus_rpm_view_install_progress_signal),
	(nautilus_rpm_view_dependency_check),
	(nautilus_rpm_view_install_done),
	(nautilus_rpm_view_install_package_callback):
	Made a last minute fix to the delete file signal change in the
	rpmview. The rpmview still cannot get the spinner to spin when
	installing/uninstalling, but I'm not going to use time on that
	now.

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (install_failed):
	Fixed a typo and an error in the problem handler user
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_existing_packages):
	Added release numbers to debug output.
	* components/services/install/lib/eazel-install-problem.c:
	(eazel_install_problem_case_to_string):
	Changed case_to_string message to a more imperative format
	
	* components/services/install/lib/eazel-install-protocols.c:
	(add_to_url):
	Use gnome_vfs_escape_string instead of our own.
	
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_get_readable_name):
	Hack so it should also recognize EazelCandidate names
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_parse_uri), (show_dialog_and_run_away),
	(nautilus_service_install_solve_cases),
	(nautilus_service_install_done), (dig_up_errors),
	(nautilus_service_install_failed):
	Fix for 4443

2000-11-03  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(draw_outline_rectangle_aa), (draw_stretch_handles_aa),
	(draw_or_measure_label_text_aa), (draw_label_text_aa):
	fixed bug 4192, strange feedback while stretching icons, by using
	libart to draw the rectangle instead of the buggy custom graphics
	routine that we were using.
	
	* src/file-manager/fm-icon-view.c:
	(icon_container_preview_callback):
	fixed bug 4460, remote sound files displayed preview icon but
	didn't actually preview, by adding a check to make it display
	the icon for local files only
	
	* src/nautilus-window-menus.c: (file_menu_new_window_callback):
	fixed bug 4033, new window command should initially point to the
	home directory by calling nautilus_window_go_home instead of going
	to the uri of the current window.
	
2000-11-03  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(dump_one_package):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_set_arg), (eazel_install_initialize),
	(eazel_install_fetch_remote_package_list), (eazel_install_log),
	(eazel_install_set_log), (eazel_install_open_log),
	(eazel_install_log_to_stderr):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_add_log):

	Clean up debug mode (was missing some pieces) and set up the g_log
	handler to not work in corba mode (letting libtrilobite handle
	them in corba mode).  Make it start up as early as possible and
	let the service provide a file pointer for logging.

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form):

	Make the giant label a little bit more palatable to Arlo.
	
	* nautilus-installer/src/installer.c: (log_debug),
	(add_bullet_point_to_vbox), (strip_categories),
	(start_over_make_category_func), (start_over),
	(start_over_callback), (dont_start_over_callback),
	(start_over_timer), (jump_to_retry_page), (create_window),
	(eazel_install_progress), (eazel_download_progress),
	(add_force_packages), (add_force_remove), (add_update_package),
	(get_detailed_errors_foreach), (get_detailed_errors),
	(install_failed), (download_failed), (eazel_install_preflight),
	(eazel_install_dep_check), (install_done), (check_if_next_okay),
	(toggle_button_toggled), (eazel_installer_add_category),
	(check_system), (more_check_system), (eazel_installer_do_install),
	(draw_splash_text), (eazel_installer_finalize), (start_logging),
	(find_old_tmpdir), (eazel_installer_initialize):
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/link.sh:
	* nautilus-installer/src/main.c:
	* nautilus-installer/src/prescript:

	Use /tmp/eazel-install.log for logging (being very careful to make
	sure the file is not a booby trap) instead of spamming all over
	the terminal.  However, the --debug option will give you the
	terminal spam if you want it (in addition to the logfile).  Fix
	the annoying debug logs to use g_log so we can catch them.  Add a
	--batch option that causes the installer to skip all question
	screens.

2000-11-03  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/Makefile.am: fix pb with buildir != srcdir

2000-11-03  Darin Adler  <darin@eazel.com>

	* user-guide/C/Makefile.am: Add a missing file. Another cut at
	making "make distcheck" work.

2000-11-03  Darin Adler  <darin@eazel.com>

	* src/Makefile.am: Fixed a srcdir/builddir problem that prevents
	"make distcheck" from working. This is not necessarily the only
	"make distcheck" problem.

2000-11-02  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	* helper-utilities/Makefile.am:
	* helper-utilities/error-dialog/.cvsignore:
	* helper-utilities/error-dialog/Makefile.am:
	* helper-utilities/error-dialog/nautilus-error-dialog.c: (main):
	* nautilus.spec.in:
	Add a error dialog helper utility that can be called from shell
	scripts to display errors to the user.

	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	Pavel made me do this at gun point.  Make the links activate on
	mouse up not down.
	
2000-11-02  Arlo Rose  <arlo@eazel.com>

	* src/nautilus-first-time-druid.c: (set_up_user_level_page),
	(set_up_service_signup_page), (nautilus_first_time_druid_show):
	Changed some wording so first time users won't be confused.

2000-11-02  Mathieu Lacage  <mathieu@eazel.com>

	Fix bug 4434 and bug 4430
	* libnautilus-extensions/nautilus-password-dialog.c:
	(nautilus_password_dialog_new): remove switch to remember 
	root password.
	* user-guide/C/sgml/chapter-1.sgml: remove mention of PDF.

2000-11-02  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus-installer/src/prescript:
	When we try to run the nautilus launcher, make sure we ignore the
	grep process while grepping for an already running launcher.
	
2000-11-02  Andy Hertzfeld  <andy@eazel.com>

	fixed problem where I accidentally changed the icons for disk
	drives that appear on the desktop when I only meant to change
	the hardware view.  Fixed by restoring the old icon, and using
	one with a different name in the hardware view.
	
	* components/hardware/nautilus-hardware-view.c:
	(setup_overview_form):
	use "i-harddrive.png" instead of "i-blockdev.png"
	
	* icons/Makefile.am:
	* icons/i-blockdev.png:
	* icons/i-harddrive.png:
	restored the old block device icon and added a new hard drive one.
	
2000-11-02  Ramiro Estrugo  <ramiro@eazel.com>

	* components/notes/nautilus-notes.c: (finish_loading_note),
	(notes_load_location), (make_notes_view):
	#if 0 out the undo code which is currently not working.  I filed a
	bug for this issue:  4436.
	
2000-11-02  Josh Barrow  <josh@eazel.com>

	* nautilus-installer/src/prescript:
	GNOME is an acronym, not a word.  Changed as such.

2000-11-02  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus-installer/src/prescript:
	Fix for 4368, utterly untested though...
	
2000-11-02  Darin Adler  <darin@eazel.com>

	Fix crashing part of bug 4157 (Tree View crash involving directory
	rename/move).
	
	* components/tree/nautilus-tree-view.c: (forget_view_node),
	(forget_view_node_and_children),
	(nautilus_tree_view_remove_model_node): Add code to get rid of all
	the child nodes when a node is removed, not just the main node
	itself.

2000-11-02  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus-installer/src/prescript:
	Fix bug 4374.  Add Nautilus launcher to installer prescript.
	
2000-11-02  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/mozilla-events.h:
	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_open_uri_callback), (mozilla_dom_mouse_click_callback):

	bugzilla.eazel.com 4156: Documents containing IFRAME's cause
	unexpected navigation.  This is a hack fix that checks to see if 
	a possible destination is the same as the URI of an IFRAME and, if
	they do, ditch the navigation

2000-11-02  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3613 (activating any file as root tries to
	execute it)

	* src/file-manager/fm-directory-view.c: (file_is_launchable):
	Need to check nautilus_file_is_executable as well as
	nautilus_file_can_execute.

2000-11-02  Maciej Stachowiak  <mjs@eazel.com>

	* components/music/Makefile.am: Install a nautilus-mpg123 symlink
	that points to the real mpg123 if it exists on the system.
	* components/music/mpg123_handler.c (start_playing_file): Run nautilus-mpg123
	* nautilus-clean.sh: Kill nautilus-mpg123
	* nautilus-spec.in: Install the nautilus-mpg123 symlink
	
2000-11-02  Maciej Stachowiak  <mjs@eazel.com>

	Believed fix to 4361 and possible progress on 4157.
	
	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_node_has_monitor_clients,
	nautilus_tree_model_node_begin_monitoring,
	nautilus_tree_model_node_end_monitoring,
	nautilus_tree_model_monitor_node,
	nautilus_tree_model_stop_monitoring_node, report_node_changed):
	Various restructing.

	* components/tree/nautilus-tree-view.c: (insert_hack_node,
	remove_hack_node, freeze_if_have_hack_node,
	nautilus_tree_view_insert_model_node,
	nautilus_tree_view_remove_model_node,
	nautilus_tree_view_update_model_node, notify_node_seen,
	nautilus_tree_view_model_node_changed_callback,
	nautilus_tree_view_model_done_loading_callback,
	nautilus_tree_view_initialize, free_file_to_node_map_entry,
	free_file_to_hack_node_map_entry, nautilus_tree_view_destroy,
	file_to_view_node, model_node_to_view_node, view_node_to_file,
	expand_uri_sequence_and_select_end, reload_node_for_file,
	expand_node_for_file, tree_expand_callback,
	tree_collapse_callback, tree_select_row_callback,
	nautilus_tree_view_find_parent_node, nautilus_tree_view_item_at,
	nautilus_dump_info, nautilus_tree_view_collapse_all): Pass around
	and store NautilusFile objects rather than URIs, since nodes are
	tied to a NautilusFile (which can change URI if moved or renamed).

	* libnautilus-extensions/nautilus-directory-private.h,
	libnautilus-extensions/nautilus-directory.c
	(nautilus_directory_handle_directory_moved,
	nautilus_directory_notify_files_moved),
	libnautilus-extensions/nautilus-file.c (rename_callback): When a
	directory is moved or renamed, update the NautilusDirectory
	structure for it to have the correct new URI.

2000-11-02  Darin Adler  <darin@eazel.com>

	* README: Change to reflect the fact that we currently require
	bonobo and xpdf from a branch, not HEAD.

2000-11-02 John Fleck <jfleck@inkstain.net>
	* gnome-db2html2/sect-elements.c - render <variablelist> as a <UL>
	rather than <OL>

2000-11-02 John Fleck <jfleck@inkstain.net>
	* updating gnome-db2html2/toc-elements.c to improve help
	documentation table of contents display

2000-11-02  Rebecca Schulman  <rebecka@eazel.com>
	Clean up some of the "human" strings for search uris,
	mostly so the translation scheme doesn't fail and 
	leave a search uri sitting around

	* libnautilus-extensions/nautilus-search-uri.c:
	update structures to correspond to latest search uri
	spec
	* nautilus-clean.sh:
	removed mpg123 (it kept interrupting my cds) and 
	a duplicate summary view copy

2000-11-01  Andy Hertzfeld  <andy@eazel.com>

	* icons/villanova/Makefile.am:
	* icons/villanova/villanova.xml:
	* icons/villanova_green.png:
	Susan changed the background image for the icon view of
	the villanova theme
	
	* icons/i-blockdev.png:
	better hard disk for hardware view
	* components/hardware/nautilus-hardware-view.c:
	(setup_overview_form):
	improved layout of IDE items
		
2000-11-01  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_service_locate_menu_entries):
	Just to make sure, I don't think tinderbox got my change...

2000-11-01  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (delete_files), (done), (main):
	Now has a --batch command to it doens't need userinteraction
	--batch=yes|no to set the default answer to continue ?
	questions. Using --batch defaults the answer to delete to yes. Now
	delete works again (after Great Delete Change)
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_cases_foreach):
	Fixed potiental sigsegvs.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_service_locate_menu_entries):
	Fixed a compiler warning that broke build.

2000-11-01  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (main):
	Fixed 4331.
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_download_packages),
	Checked if a toplevel package is a source package
	(eazel_install_prune_packages_helper),
	(eazel_install_check_if_depends_on),
	(eazel_install_do_transaction_fill_hash),
	(eazel_install_prune_packages), 
	(eazel_install_ensure_deps),
	Commented out/changed some debug output
	(eazel_install_fetch_dependencies),
	Changed the debug output in case of circular dependency, also
	added a check for source packages.
	(eazel_install_start_transaction):
	Commented out the debug output of the rpm args
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach),
	Detect source package.
	(eazel_install_problem_tree_to_case):
	Removed debug output.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_view_initialize),
	(nautilus_service_install_installing),
	(nautilus_service_install_done),
	Improved the updating of nautilus from natilus, by actually
	offering to restart nautilus (and doing it if the user wants to)
	(nautilus_install_service_locate_menu_entries):
	If I can't figure out where the desktop files are, don't print
	"blabla is somewhere..."
	
	* nautilus.spec.in:
	Added usermode >= 1.35 for nautilus-trilobite
	
	* po/da.po:
	* po/no.po:
	Removed the fatal Control*t translation.
	
	* src/file-manager/fm-directory-view.c:
	(reset_bonobo_trash_delete_menu):
	Added a comment for the translation teams to not translate
	Control*t at this point.
	
	* src/nautilus-shell.c: (save_window_states):
	When saving windowstates, replace any window->location that starts
	with eazel-install: with eazel:, thereby preventing loops when
	eazel-install: views restart nautilus.

2000-11-01  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-first-time-druid.c: (initiate_file_download):
	fixed bug 1826 by pointing the update download uri to it's
	real location at services.eazel.com.
	
	* src/nautilus-window-manage-views.c: (just_one_window),
	(nautilus_window_end_location_change_callback):
	fixed bug 4351, nautilus quits after running the first time
	druid if services are inaccessible.  Fixed by making it
	not quit if there's a single window that fails, going to
	the home directory (if it's valid) instead.

	* icons/loading.png:
	a better version of the non-anti-aliased loading icon from Susan.
		
2000-11-01  Robey Pointer  <robey@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (set_dialog_parent):

	Fix corner case where dialog won't be parented if services are
	down.

2000-11-01  Darin Adler  <darin@eazel.com>

	* src/nautilus-window-service-ui.c: (goto_services_support):
	Remove FIXME for already-fixed bug.
	* src/run-nautilus: Add Debian-specific hack requested in
	bug report (bug 4353).

2000-11-01  Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.h,
	libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_actions_file_needs_full_file_attributes,
	server_has_content_requirements,
	server_matches_content_requirements): New functions.

	(nautilus_mime_get_all_components_for_file) Updated.

	* src/nautilus-applicable-views.h,
	src/nautilus-applicable-views.c: (got_file_info_callback_common,
	(got_full_file_info_callback, got_minimum_file_info_callback,
	nautilus_navigation_info_new, nautilus_navigation_info_cancel):
	Changed to possibly handle calling the callback twice so we can
	avoid having to load twice before showing a component at all.

	* src/nautilus-window-manage-views.c
	(nautilus_window_end_location_change_callback): If being called a
	preliminary time, ignore it for now.

2000-11-01  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-metadata.c:
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_view_update_from_uri):
	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (start_change_password):
	* components/services/trilobite/libtrilobite/libtrilobite.h:
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	* nautilus-installer/src/installer.c:
	
	Fix builtin uri's to point to a sane place by default.  Make the
	install view use your trilobite gconf config and not a made-up
	site (oops).  Remove leftover "eazel-auth:" uri.  Use good PR2
	defaults for the bootstrap installer.  Fix missing ellipses that
	were bothering Eli.

2000-11-01  Darin Adler  <darin@eazel.com>

	Fixed bug 4335 (music view does not work with Services:Vault)

	* components/music/nautilus-music-view.oafinfo:
	Added the requirement that the URL must be file scheme, since
	the music view doesn't know how to deal with MP3s that are not
	on the local hard disk.

2000-11-01  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4343 (crash clicking "Back" deep in software catalog)

	This was an inaccurate assert. Other similar asserts had been
	fixed earlier, but this one and a parallel one in Forward got
	overlooked.

	* src/nautilus-window-manage-views.c:
	(check_bookmark_location_matches_uri): New helper function, uses
	uris_match.
	(check_last_bookmark_location_matches_window): Now calls the
	new function (which was extracted from this)
	(handle_go_back),
	(handle_go_forward): Use the new function to check that the bookmark
	has the right uri, instead of direct string compares.

2000-11-01  Mathieu Lacage  <mathieu@eazel.com>

	* nautilus.spec.in: adding fdl.
	* user-guide/C/Makefile.am: adding installation of fdl
	* user-guide/C/fdl.sgml: adding fdl

2000-11-01  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4337, Title for nautilus user manual is "GNOME Documemtation"
	
	* user-guide/C/sgml/nautilus.sgml:
	Added "Nautilus User Manual" as <title> tag.
	
2000-11-01  Darin Adler  <darin@eazel.com>

	Fix bug 4305 (Nautilus can't find myplay.com (default bookmark)
	URL). As Mike Fleming and Pavel suggested, changed NautilusFile to
	keep relative URIs around instead of file names. This may also fix
	two other Mozilla-component-related bugs, bug 3438 and 4220. I'll
	check that later.

	Also fix bugs 4128, 4311, and 4344, which are all about a hash
	table NULL critical assertion.

	* libnautilus-extensions/nautilus-directory-async.c:
	(dequeue_pending_idle_callback): Handle info in the order it gets
	queued. That requires a call to g_list_reverse since we add things
	with g_list_prepend. Check for NULL to handle case where the info
	is not part of a directory load. Use the new
	nautilus_directory_find_file_by_name to keep it clearly separate
	from code that would find files given relative URIs.
	
	* libnautilus-extensions/nautilus-directory-private.h: RIP
	nautilus_compare_file_with_name. We haven't used it since we've
	been using a hash table.
	
	* libnautilus-extensions/nautilus-directory.c:
	(add_to_hash_table): Put the relative URI in the hash table, not
	the name.
	(extract_from_hash_table): Look up in the hash table by relative
	URI, not name.
	(nautilus_directory_add_file), (nautilus_directory_remove_file):
	Assertions are based on the relative URI, not the name.
	(nautilus_directory_find_file_by_name): Turn the name into a
	relative URI and search for that.
	(nautilus_directory_find_file_by_relative_uri): Look up in the
	hash table by relative URI, not name.
	
	* libnautilus-extensions/nautilus-file-private.h: Replace the name
	field with a relative_uri field. There aren't always names for
	files.
	
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_new_from_relative_uri): Mechanical changes to make
	it create a file given a directory and relative_uri. Uses the new
	update_info_and_name instead of the old nautilus_update_file_info
	(which no longer updates names).
	(nautilus_file_new_from_info). Use the new update_info_and_name
	instead of the old nautilus_update_file_info (which no longer
	updates names).
	(nautilus_file_get_internal): Call nautilus_uri_make_canonical on
	the URI before using it. This is needed now to make the escaping
	of characters in the relative URI uniform. Also made mechanical
	changes to deal with relative URIs instead of file names.
	(destroy): Always free the relative URI. We no longer share the
	name inside the file info, so the logic is now simpler.
	(nautilus_file_get_gnome_vfs_uri): Append the relative URI instead
	of appending a file name to make the full URI.
	(rename_callback): Use the new update_info_and_name instead of the
	old nautilus_update_file_info (which no longer updates
	names). Also call nautilus_find_file_by_name under its new name.
	(name_is): New helper function for checking the file name quickly
	without requiring a local variable.
	(nautilus_file_rename): Use name_is instead of strcmp since the
	name is no longer so readily available.
	(update_info_internal): Moved the guts of nautilus_file_update_info
	in here and made the name-updating part optional. Logic is a bit
	simpler since we don't share the name in the file info any more.
	(update_info_and_name), (nautilus_file_update_info): Covers that
	call the internal call with the "update_name" flag set.
	(nautilus_file_update_name): Use name_is and update_info_and_name.
	Also fix the info == NULL case to handle relative URIs, not names.
	(nautilus_file_compare_for_sort): Add a FIXME about using the name
	in the info when sorting. Also change the info == NULL case to get
	the names with nautilus_file_get_name.
	(nautilus_file_compare_name): Use nautilus_file_get_name to get
	the names to compare.
	(nautilus_file_get_metadata), (nautilus_file_get_metadata_list),
	(nautilus_file_set_metadata), (nautilus_file_set_metadata_list),
	(nautilus_file_get_boolean_metadata),
	(nautilus_file_get_integer_metadata),
	(nautilus_file_set_boolean_metadata),
	(nautilus_file_set_integer_metadata): Store metadata using the
	relative URI as the key instead of the name. This amounts to a
	minor metadata file format change.
	(nautilus_file_get_name): Create the name by unescaping the
	relative URI. If this fails, just return the relative URI
	itself. In some cases the URI instead of the name would represent
	a terrible error (but the unescaping will not fail in those
	cases), but in other cases we just need some kind of name.
	(nautilus_file_get_uri): Some broken code in here was just
	appending the name to the parent URI. Now it appends the relative
	URI so it's no longer broken.
	(get_description): Use the relative URI instead of the name in the
	warning message.
	(nautilus_file_mark_gone): Since we always keep the relative URI
	around now, can get rid of the logic that copies the name out of
	the file info for this case.
	(nautilus_file_dump): Since we already dump the URI, don't bother
	dumping the name any more.

2000-11-01  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-image.c: (render_buffer_pixbuf):
	Change '=+' to the more common '+=' when adding integers.
	
2000-11-01  John Fleck  <jfleck@inkstain.net>

	* change to sect-elements.c in gnome-db2html2 to change display of
	<note> elements

2000-11-01  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_register):
	Make smooth graphics mode be false by default as agreed for pr2.
	
2000-11-01  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/launcher/nautilus-launcher-applet.c: (image_enter_event),
	(window_set_cursor_for_state), (set_is_launching),
	(get_is_launching), (image_button_press_event),
	(image_button_release_event), (event_filter),
	(root_listen_for_property_changes), (main):
	Keep track of NautilusWindow realization events.  Do this by
	monitoring a property on the root window.  Use this flag in order
	to give the user feedback about the launching state of new
	Nautilus windows.  Fixes bug 4300.
	
	* src/nautilus-window.c: (nautilus_window_update_launcher),
	(nautilus_window_realize):
	Notify the launcher when a NautilusWindow get realized.
	
	* src/run-nautilus:
	If no arguments are given, then open a window pointed to the
	user's home directory.
	
2000-11-01  Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical),
	(nautilus_self_check_file_utilities):
	Hook up new GnomeVFS "make canonical" calls to fix test cases
	Darin needed to work for the bug he is fixing.
	Switched the test cases to their intended values, now that they pass.
	Get rid of some crufty workarounds that weren't really needed
	after my previous fix to not add extra '//' to some URIs and
	removed the respective tests.

2000-11-01  Mathieu Lacage  <mathieu@eazel.com>

	This is completely useless but I needed a break from "usefull"
	bugs.
	* applets/launcher/nautilus-launcher-applet.c: (image_leave_event),
	(image_button_press_event), (image_button_release_event), (main):
	Add an event handler for release event to make sure we launch 
	nautilus only if you release the cursor without leaving the icon.
	Add an offset when you click to give the user feedback about what 
	he is doing.
	* libnautilus-extensions/nautilus-image.c: (render_buffer_pixbuf):
	Fix offset problem when drawing image: the offset was not taken
	into account in the calculation of the x and y coordinates.

2000-10-31  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/main.c: (main):
	* nautilus-installer/src/proxy.c: (load_nscp_proxy_settings),
	(load_galeon_proxy_settings):
	* src/nautilus-first-time-druid.c: (load_nscp_proxy_settings),
	(load_galeon_proxy_settings), (attempt_http_proxy_autoconfigure):

	Fix installer version to follow the Makefile define.  Fix evil bug
	in detecting proxy servers that was freeing g_get_home_dir
	results.  Fixed it again in the first-time druid, and added Galeon
	support there.

2000-10-31  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/Makefile:
	* src/nautilus-window-service-ui.c: (goto_services_support):

	Fix bootstrap installer for new Makefile config and fix typo in
	dropdown menus.

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/launcher/Makefile.am:
	Add missing includes.
	
2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* Makefile.am:
	Add applets to SUBDIRS if needed.
	
	* applets/Makefile.am:
	Tiny bit of cleanup.

	* configure.in:
	Define HAVE_APPLETS only if the applets devel libs are found by
	gnome-config.
	
2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_load_uri),
	(mozilla_content_view_one_time_happenings):
	Remove a rogue printf.  Also fix a broken debug printf.
	
2000-10-31  Andy Hertzfeld  <andy@eazel.com>

	* icons/Makefile.am:
	* icons/loading.png:
	* icons/loading-aa.png:
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_for_file):
	added a new "loading thumbnail" icon from Susan
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_delete_event_callback),
	(cancel_remove_mode), (add_new_button_callback),
	(done_button_callback):
	made the property browser reset remove mode when it's dismissed
	
2000-10-31  Mathieu Lacage  <mathieu@eazel.com>

	* nautilus.spec.in: add gnorba file in specfile.

2000-10-31  Mathieu Lacage  <mathieu@eazel.com>

	* applets/launcher/Makefile.am: add .gnorba file.
	* applets/launcher/nautilus-launcher-applet.c: (main): fix typo.
	* applets/launcher/nautilus-launcher-applet.gnorba: new gnorba file.

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/launcher/.cvsignore:
	Use the right binary name.
	
2000-10-31  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_parse_uri),
	(nautilus_service_install_view_update_from_uri):

	Support [ username "@" ] in the eazel-install: URI so that a
	username can be specified (like anonymous) to libeazelinstall.

	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_init):

	Don't free the result of g_get_home_dir(), because it unleashes
	1000 demons.
	
	* nautilus-installer/src/installer.c: (create_what_to_do_page),
	(eazel_installer_add_category):

	Change the "what to install" header for the single-category case.

2000-10-31  Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_self_check_file_utilities): Add the new self-checks that
	will help Pavel see the minimum I need in a URI canonifying
	function.

2000-10-31  Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_actions_check_if_minimum_attributes_ready),
	(nautilus_mime_actions_check_if_full_attributes_ready),
	(nautilus_mime_actions_get_minimum_file_attributes),
	(nautilus_mime_actions_get_full_file_attributes),
	(nautilus_mime_actions_wait_for_full_file_attributes),
	(nautilus_mime_get_default_action_type_for_file),
	(nautilus_mime_get_default_action_for_file),
	(nautilus_mime_get_default_application_for_file_internal),
	(nautilus_mime_get_default_application_for_file),
	(nautilus_mime_is_default_application_for_file_user_chosen),
	(nautilus_mime_get_default_component_sort_conditions),
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_applications_for_file),
	(nautilus_mime_get_short_list_components_for_file),
	(nautilus_mime_get_short_list_methods_for_file),
	(nautilus_mime_get_all_applications_for_file),
	(nautilus_mime_get_all_components_for_file),
	(nautilus_mime_set_default_application_for_file),
	(nautilus_mime_set_default_component_for_file),
	(nautilus_mime_set_short_list_applications_for_file),
	(nautilus_mime_set_short_list_components_for_file),
	(nautilus_mime_add_application_to_short_list_for_file),
	(nautilus_mime_remove_application_from_short_list_for_file),
	(nautilus_mime_add_component_to_short_list_for_file),
	(nautilus_mime_remove_component_from_short_list_for_file),
	(nautilus_mime_extend_all_applications_for_file),
	(nautilus_mime_remove_from_all_applications_for_file),
	(nautilus_do_component_query):
	* libnautilus-extensions/nautilus-mime-actions.h:
	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list), (is_component_default_for_file),
	(program_file_pair_is_default_for_file),
	(program_file_pair_is_in_short_list_for_file),
	(add_to_short_list_for_file), (remove_from_short_list_for_file),
	(remove_default_for_item), (set_default_for_item):
	* libnautilus-extensions/nautilus-program-choosing.c:
	(any_programs_available_for_file):
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/fm-directory-view.c: (switch_location_and_view),
	(create_open_with_gtk_menu), (reset_bonobo_open_with_menu),
	(activate_callback):
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-applicable-views.c: (nautilus_navigation_info_new):
	* src/nautilus-shell-ui.xml.h:
	* src/nautilus-sidebar.c: (nautilus_sidebar_update_all),
	(nautilus_sidebar_set_uri):
	* src/nautilus-window.c: (nautilus_window_load_content_view_menu):
	* test/test-nautilus-mime-actions-set.c: (main):
	* test/test-nautilus-mime-actions.c: (main): Un-revert my changes
	from before, fixing the bugs in the process.

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/launcher/Makefile.am:
	* applets/launcher/nautilus-icon-applet.c:
	* applets/launcher/nautilus-launcher-applet.c: (create_pixbufs),
	(applet_change_pixel_size), (image_enter_event),
	(image_leave_event), (get_root_window), (root_window_set_busy),
	(root_window_set_not_busy), (image_button_press_event), (main):
	* nautilus.spec.in:
	Rename the launcher applet from 'nautilus-icon-applet' to
	'nautilus-launcher-applet'.
	
2000-10-31  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(get_eazel_auth_path):
	Doh, copied the wrong variable.

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/launcher/Makefile.am:
	* applets/launcher/nautilus-icon-applet.c: (get_root_window),
	(root_window_set_busy), (root_window_set_not_busy),
	(image_button_press_event), (main):
	Add code to execute nautilus.  Add first try at adding busy
	feedback while launching.

2000-10-31  Mathieu Lacage  <mathieu@eazel.com>

	fix bug 4015.
	* libnautilus-extensions/nautilus-global-preferences.c:
	add correct default here.
	* src/nautilus-window.c: (nautilus_window_go_web_search):
	remove bad default here. ramiro has a bug to do the correct
	fix post-pr2.

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* src/run-nautilus:
	Remove a bunch of debug echo statements i left in by mistake.
	
2000-10-31  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package), (get_eazel_auth_path),
	(get_search_url_for_package):
	* components/services/install/lib/eazel-install-metadata.c:
	(init_default_transfer_configuration), (transferoptions_destroy):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize):
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line):
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install__set_username),
	(impl_Eazel_Install__get_username), (eazel_install_get_epv):
	Stuff to get/set a username for eazel-service:/ uris. Needed for
	4004 (The Bug Noone Knew What To Do With And Everyone Ignore)
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_download_packages),
	If a package fails, don't silently remove it, but set CANNOT_OPEN
	and prune it.
	(eazel_install_do_transaction_save_report),
	If no transaction dir is set, dont' try and store the report
	(eazel_install_check_existing_packages):
	Doh! All packages apparently ended at DOWNGRADES, yech.
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach):
	Sane message if file could not be found on server
	
2000-10-31  Maciej Stachowiak  <mjs@eazel.com>

	* src/nautilus-window-manage-views.c
	(nautilus_window_set_sidebar_panels): Call `update_view' on new
	sidebar panels that get activated, so they find out about the
	location and selection.

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/Makefile.am:
	* applets/launcher/Makefile.am:
	* applets/launcher/nautilus-icon-applet.c: (create_pixbufs),
	(image_enter_event), (image_leave_event), (main):
	Make the applet use the nautilus launcher icon and prelight.
	
2000-10-31  Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_xfer_vfs_error):
	Fix 4227 - Trying to copy an unreadable file gives a bogus
	error message.
	Added code that distinguishes between the read and write phases
	of a copy.

2000-10-31  John Sullivan  <sullivan@eazel.com>

Fixed bug 4334 (changing layout separataes icon from name)
Fixed bug 4332 (Right-click after New Folder separates icon from name)

	* libnautilus-extensions/nautilus-icon-container.c:
	(icon_set_position): end renaming mode before changing position
	of icon being renamed.
	(button_press_event): end renaming mode on any background
	context click.

2000-10-31  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package):
	* nautilus-installer/src/installer.c: (eazel_install_dep_check),
	(install_done):
	* nautilus-installer/src/installer.h:

	Don't blame RPM if the real error is that services is down.

2000-10-31  Mathieu Lacage  <mathieu@eazel.com>

	* nautilus.spec.in: add applet to the spec file.
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/nautilus.sgml:
	update the sgml files.

2000-10-31  Robin * Slomkowski  <rslomkow@eazel.com>

	* src/nautilus-window.c: set the url to fix 4015
	but it does not Nautilus attempts to connect to the
	wrong URL. http://www.eazel.com/websearch instead of
	http://services.eazel.com/websearch

2000-10-31  Mathieu Lacage  <mathieu@eazel.com>

	add new directories.
	* applets/.cvsignore:
	* applets/launcher/.cvsignore:	
	* applets/Makefile.am:
	* applets/launcher/Makefile.am:

	stupid applet which is used during installation
	to display a nautilus icon on the user's panel.
	* applets/launcher/nautilus-icon-applet.c:
	(applet_change_pixel_size), (main):

	add checks for the libapplet library.
	* configure.in:

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Fix bug 3729.  Bump the version number to 0.5.0.
	
2000-10-31  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/gdb3html.c:
        (parse_file): Try to correct a problem jfleck was having.

        * libnautilus-extensions/nautilus-file-utilities.c:
        (nautilus_uri_is_local_scheme): Add 'gnome-help' to the list

2000-10-31  Darin Adler  <darin@eazel.com>

	* nautilus.spec.in: Removed vendor again. Putting these in cvs
	is a bad idea. For more details see bug 3461.

2000-10-31  Darin Adler  <darin@eazel.com>

	* nautilus.spec.in: Add vendor.

2000-10-31  Darin Adler  <darin@eazel.com>

	Fixed bug 4242 (Tree view crash trying to navigate to parent uri
	(Up)) and bug 4297 (Opening a window twice causes Nautilus to
	crash).
	
	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_destroy): Disconnect the root_node_changed
	signal.

2000-10-31  J Shane Culpepper  <pepper@eazel.com>

	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (generate_change_password_form):

	Fixing buttons in the change password view to not use nautilus_label
	and pointing to the right help place.

2000-10-31  Brian Frank  <bfrank@eazel.com>

	* data/static_bookmarks.xml
	Fixed capitalization problem of VMware name in bookmark list
	
2000-10-31  Mathieu Lacage  <mathieu@eazel.com>

	* configure.in: fix some configure magic for libfreetype2.

2000-10-31  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-first-time-druid.c: (druid_finished):
	changed the services uris that are hard-coded into the wizard to
	ones specified by Laura; they are not in place yet but she
	assures me that they will be soon.
	
2000-10-31  Darin Adler  <darin@eazel.com>

	Fixed bug 4144 (Extra Services menu items installed by Summary
	view never go away). The problem was actually with the factory
	code from the sample. I had fixed it a while back, but not before
	people cloned the broken sample code.
	
	* components/adapter/nautilus-adapter-factory-server.c:
	(impl_Nautilus_ComponentAdapterFactory_create_adapter):
	* components/hardware/main.c: (hardware_view_make_object):
	* components/music/main.c: (music_view_make_object):
	* components/rpmview/main.c: (rpm_view_make_object):
	* components/services/install/nautilus-view/main.c:
	(service_install_make_object):
	* components/services/inventory/nautilus-view/main.c:
	(inventory_make_object):
	* components/services/login/nautilus-view/main.c:
	(change_password_make_object):
	* components/services/summary/nautilus-view/main.c:
	(summary_make_object):
	* components/tree/libmain.c: (tree_shlib_make_object):
	* components/tree/main.c: (tree_exe_make_object):
	Connect the destroy handler to the NautilusView object rather than
	to the widget. If you connect to the widget, the handler gets
	called too early and the control doesn't get properly destroyed,
	leaving the UI component behind, and causing the bug.

	* components/adapter/main.c: (adapter_factory_make_object): Got
	rid of incorrect comment.
	
2000-10-31  J Shane Culpepper  <pepper@eazel.com>
	
	Fixing one more.

2000-10-31  J Shane Culpepper  <pepper@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.h:
	* src/nautilus-applicable-views.c:
	(nautilus_navigation_info_get_location),
	(nautilus_navigation_info_get_initial_content_id):

	missed a file

2000-10-31  J Shane Culpepper  <pepper@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_actions_check_if_required_attributes_ready),
	(nautilus_mime_actions_get_required_file_attributes),
	(nautilus_mime_actions_wait_for_required_file_attributes),
	(nautilus_mime_get_default_action_type_for_file),
	(nautilus_mime_get_default_action_for_file),
	(nautilus_mime_get_default_application_for_file_internal),
	(nautilus_mime_get_default_application_for_file),
	(nautilus_mime_is_default_application_for_file_user_chosen),
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_applications_for_file),
	(nautilus_mime_get_short_list_components_for_file),
	(nautilus_mime_get_short_list_methods_for_file),
	(nautilus_mime_get_all_applications_for_file),
	(nautilus_mime_get_all_components_for_file),
	(nautilus_mime_set_default_application_for_file),
	(nautilus_mime_set_default_component_for_file),
	(nautilus_mime_set_short_list_applications_for_file),
	(nautilus_mime_set_short_list_components_for_file),
	(nautilus_mime_add_application_to_short_list_for_file),
	(nautilus_mime_remove_application_from_short_list_for_file),
	(nautilus_mime_add_component_to_short_list_for_file),
	(nautilus_mime_remove_component_from_short_list_for_file),
	(nautilus_mime_extend_all_applications_for_file),
	(nautilus_mime_remove_from_all_applications_for_file),
	(nautilus_do_component_query):
	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list), (is_component_default_for_file),
	(program_file_pair_is_default_for_file),
	(program_file_pair_is_in_short_list_for_file),
	(add_to_short_list_for_file), (remove_from_short_list_for_file),
	(remove_default_for_item), (set_default_for_item):
	* libnautilus-extensions/nautilus-program-choosing.c:
	(any_programs_available_for_file):
	* src/file-manager/fm-directory-view.c: (switch_location_and_view),
	(create_open_with_gtk_menu), (reset_bonobo_open_with_menu),
	(activate_callback):
	* src/nautilus-window.c: (nautilus_window_load_content_view_menu):
	* test/test-nautilus-mime-actions-set.c: (main):
	* test/test-nautilus-mime-actions.c: (main):

	backing out changes that caused a serious regression in services.

2000-10-31  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/rpmview/nautilus-rpm-view-install.c:
	(nautilus_rpm_view_install_package_callback):
	Hopefully fixed the completely fatal tmp_dir bug in the 
	package view.

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_pre_install_packages):
	Ifdeffed some borked code

	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach):
	If no messages generated on modification status. Potientially
	completely incorrect unless I check prev_pack->status first.

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (dig_up_errors), (nautilus_service_install_failed):
	Use eazel-install-problem to generate error messages

	* nautilus.spec.in:
	Woops, eazel/throbber is not there..

2000-10-30  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus.spec.in:
	Added some of the themes stuff to %files.

2000-10-30  Andy Hertzfeld  <andy@eazel.com>

	made thumbnailing work remotely for all images, by treating
	small remote files like large ones and keeping a local thumbnail
	for them.
	
	* libnautilus-extensions/nautilus-icon-factory-private.h:
	moved SELF_THUMBNAIL_SIZE_THRESHOLD constant into private,
	so it could be shared with nautilus-thumbnails.
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_for_file):
	if a file is remote, make a thumbnail even if it's smaller
	than the size threshold.
	* libnautilus-extensions/nautilus-thumbnails.c: (make_thumbnails):
	don't use a frame for files smaller than the size threshold.
	
2000-10-30  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(dump_one_package):
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_copy):

	Show provides-list when dumping packages for debug.  Copy
	provides-list when doing a deep copy of the package data.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_category):

	Clean up leading/trailing linefeeds on category descriptions.
	
	* components/services/install/server/main.c: (main):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_add_log), (trilobite_init),
	(trilobite_set_debug_mode):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.h
	:

	Use ~/.nautilus/trilobite-install.log for logging install debug
	messages, and not a file in /tmp.  Timestamp those logs.
	
	* nautilus-installer/src/installer.c: (create_install_page),
	(eazel_download_progress), (get_required_name),
	(get_detailed_errors_foreach), (install_done),
	(eazel_installer_add_category), (find_old_tmpdir),
	(eazel_installer_initialize):

	Make category list display slightly differently when there's only
	one category (which is how PR2 will be): avoid showing the
	checkbox, etc.  If there's a suitable /tmp directory leftover from
	a previous install attempt, reuse it instead of creating a new
	one.

	* nautilus-installer/src/link.sh:

	Fix missing quotes in XFree checking.
	
2000-10-30  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/link.sh:
	link.sh does vague attempt at checking XFree version. Partial fix
	for 4159.

2000-10-30  Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_actions_check_if_minimum_attributes_ready),
	(nautilus_mime_actions_check_if_full_attributes_ready),
	(nautilus_mime_actions_get_minimum_file_attributes),
	(nautilus_mime_actions_get_full_file_attributes),
	(nautilus_mime_actions_wait_for_full_file_attributes),
	(nautilus_mime_get_default_action_type_for_file),
	(nautilus_mime_get_default_action_for_file),
	(nautilus_mime_get_default_application_for_file_internal),
	(nautilus_mime_get_default_application_for_file),
	(nautilus_mime_is_default_application_for_file_user_chosen),
	(nautilus_mime_get_default_component_sort_conditions),
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_applications_for_file),
	(nautilus_mime_get_short_list_components_for_file),
	(nautilus_mime_get_short_list_methods_for_file),
	(nautilus_mime_get_all_applications_for_file),
	(nautilus_mime_get_all_components_for_file),
	(nautilus_mime_set_default_application_for_file),
	(nautilus_mime_set_default_component_for_file),
	(nautilus_mime_set_short_list_applications_for_file),
	(nautilus_mime_set_short_list_components_for_file),
	(nautilus_mime_add_application_to_short_list_for_file),
	(nautilus_mime_remove_application_from_short_list_for_file),
	(nautilus_mime_add_component_to_short_list_for_file),
	(nautilus_mime_remove_component_from_short_list_for_file),
	(nautilus_mime_extend_all_applications_for_file),
	(nautilus_mime_remove_from_all_applications_for_file),
	(nautilus_do_component_query): 
	* libnautilus-extensions/nautilus-mime-actions.h:
	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list), (is_component_default_for_file),
	(program_file_pair_is_default_for_file),
	(program_file_pair_is_in_short_list_for_file),
	(add_to_short_list_for_file), (remove_from_short_list_for_file),
	(remove_default_for_item), (set_default_for_item):
	* libnautilus-extensions/nautilus-program-choosing.c:
	(any_programs_available_for_file):
	* src/file-manager/fm-directory-view.c: (switch_location_and_view),
	(create_open_with_gtk_menu), (reset_bonobo_open_with_menu),
	(activate_callback):
	* src/nautilus-applicable-views.c: (nautilus_navigation_info_new):
	* src/nautilus-sidebar.c: (nautilus_sidebar_update_all),
	(nautilus_sidebar_set_uri):
	* src/nautilus-window.c: (nautilus_window_load_content_view_menu):
	* test/test-nautilus-mime-actions-set.c: (main):
	* test/test-nautilus-mime-actions.c: (main): Portions of the fix
	for 2379 (the parts that don't make it crash).

2000-10-30  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_middle_new):
	Separate the left and right text offsets.  Tweak them some more.
	
2000-10-30  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus-clean.sh:
	Add trilobite-eazel-install-service to list of processes to kill.
	Also alphabetize the list.
	
2000-10-30  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-thumbnails.c:
	(make_thumbnail_path):
	fixed bug 4190, problem thumbnailing icons in vault, by adding
	a test to make sure it tries to keep the thumbnails for remote
	files locally.
	
2000-10-30  Ramiro Estrugo  <ramiro@eazel.com>

	* icons/nautilus-launch-icon.png:
	* nautilus.png:

	I removed these from Makefiles, but forgot to take them out of
	CVS.
	
2000-10-30  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (done), (main):
	Fixed 4203
	
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_string_sequence_to_glist),
	(corba_packagedatastruct_from_packagedata):
	Changed because I added debug and removed it again...
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_pre_install_packages),
	(eazel_install_download_packages),
	(eazel_install_check_existing_packages),
	(eazel_install_fetch_dependencies):
	Made a set of enums for check_for_existing_packages since it no
	longer really acts as a *cmp function (has four result values
	rather then 3)
	* components/services/install/lib/eazel-install-logic.h:
	Also renamed the status enum for the main functions

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_revert_transaction_from_xmlstring):
	Also renamed the status enum for the main functions (in
	logic.[ch])
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach),
	(eazel_install_problem_case_to_string),
	Moved get_required_name into -types.c (as
	packagedata_get_readable_name), so everyone gets the benefit of
	it.
	(eazel_install_problem_handle_cases):
	Now also sets the downgrade flag in handle cases.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings),
	No longer always set rpm debub
	(eazel_install_start_transaction_make_rpm_argument_list):
	Don't set --oldpackage on -e.
	
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_get_readable_name):
	Moved here from -problem.c(get_required_name)
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (eazel_install_packagedata_to_xml):
	Now also put provides into xml. This was needed for the menu path
	info fix that Bart asked for. Unfortunately this means huge
	transaction files, need to put in a boolean or such.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:
	Added list containing all .*\.desktop$ or .*\.kdelnk$ files that
	where installed.	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_dependency_check),
	Print nicer dep check strings (using packagedata_get_readable_name)
	(nautilus_service_install_check_for_desktop_files),
	In preflight, find any .*\.desktop$  or .*\.kdelnk$ files.
	(nautilus_service_install_preflight_check),
	call check_for_desktop_files only on toplevel packages
	(nautilus_service_install_installing),
	Moved the dialog box for nautilus updates down to done.
	(nautilus_install_service_locate_menu_entries),
	Locates where the menu entries went
	(nautilus_service_install_done):
	Pop up the dialog if nautilus was updated, also generate message
	reg. where menu entries went. Fixes 3431
	
	* nautilus-installer/src/installer.c: (jump_to_retry_page),
	(get_detailed_errors_foreach), (eazel_install_dep_check):
	Used packagedata_get_readable_name instead of get_requried_name.
	
2000-10-30  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/mozilla-preferences.cpp:
	* components/mozilla/mozilla-preferences.h:
	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(nautilus_mozilla_content_view_destroy),
	(eazel_services_scheme_translate),
	(test_make_full_uri_from_relative),
	(mozilla_content_view_one_time_happenings):
	Fix bug 4112 - Mozilla component does not listen for proxy
	configuration changes.

	Move all the gconf and proxy related things to
	mozilla-preferences.cpp, makes the main view implementation a
	little less convoluted.

	Add gconf notifications for changes in the proxy and route these
	changes to the mozilla universe.

	Also some minor style changes.

2000-10-30  Darin Adler  <darin@eazel.com>

	Fix bug 4202 (rename a file to an existing file will crash
	Nautilus).
	
	* libnautilus-extensions/nautilus-file.c: (rename_callback): Mark
	the overwritten file as "gone" if we succeed in renaming to an
	existing file's name. Either the module overwrote the file or the
	file was deleted "under Nautilus's nose" -- in either case it is
	gone.
	(nautilus_file_update_name): Fix comment.

2000-10-30  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar-title.c: (update_icon):
	added "eazel-services:" and "man:" to the schemes with custom
	sidebar icons via the recently implemented hack (which will be
	replaced by a real framework after PR2).
	
	* icons/Makefile.am:
	* icons/manual.png:
	added icon for man: scheme

2000-10-30  Andy Hertzfeld  <andy@eazel.com>

	cleaned up the sidebar for the summary view by putting in a
	temporary hack to get the right icon and giving the view
	a shorter title.
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (summary_load_location_callback):
	changed the summary view's title to "Eazel Services" so it fits
	better in the sidebar.
	
	* src/nautilus-sidebar-title.c: (update_icon):
	added a hack to special-case the "eazel:" uri to get the appropriate
	icon; we'll remove this after PR2 and replace it with a real
	framework.
	
2000-10-30  Darin Adler  <darin@eazel.com>

	* icons/Makefile.am: Removed gnome-core.png again.

2000-10-30  Josh Barrow  <josh@eazel.com

	* icons/gnome-core.png: 
	Removed

	* icons/i-core.png:
	Made this be the old gnome-core icon, per Arlo's suggestion.

2000-10-30  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4166, "New Folder" offset problem.

	Also reverted Enter to activate selected items instead of
	entering renaming mode.

	* libnautilus-extensions/nautilus-icon-container.c: 
	(relayout):
	Call nautilus_icon_container_update_scroll_region before
	processing pending reveal and rename actions.

	(key_press_event):
	Enter keypress activates selected items
	
2000-10-30  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/proxy.c: (load_nscp_proxy_settings),
	(load_galeon_proxy_settings), (attempt_http_proxy_autoconfigure):

	Try to find proxy settings via Galeon too.

2000-10-30  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form):

	Fixing the box packing on the news widget.  Still not optimal but
	looks a little better than it did.  Will continue tweaking it until
	it is acceptable.

2000-10-30  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(file_opened_callback), (file_read_callback), (load_done):
	
	Fixed nautilus_gdk_pixbuf_load_async bug that would cause
	it to fail loading xpm files. (bug 4140)

2000-10-30  Rebecca Schulman  <rebecka@eazel.com>
	Fixed bug 4176, that files remaining to be
	copied goes up instead of down.  The short
	fix for this was just to change the wording to
	reflect what was actually being counted.

	* libnautilus-extensions/nautilus-file-operations.c:
	(progress_dialog_set_files_done_text), (handle_xfer_ok):
	changed "Files remaining to be [copied, moved,...]" to
	"Files [copied, moved,...]"

2000-10-30  Darin Adler  <darin@eazel.com>

	Fixed bug 4057 (clicking the back button while opening a huge
	directory often crashes).
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_for_each): The function was iterating
	some icons twice. All the icons on the new_icons list are also on
	the icons list.
	(icon_destroy): Also be sure to remove the icon from the new_icons
	list if it happens to be destroyed while still on that list.

	* configure.in:
	* Makefile.shared:
	Got rid of the shared part of the code to generate .xml.h
	files. It's no longer needed since the po directory takes care of
	everything itself.
	
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/sample/Makefile.am:
	* components/services/summary/nautilus-view/Makefile.am:
	* libnautilus/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	Got rid of the per-directory part of the code to generate .xml.h
	files.
	
	* components/loser/content/nautilus-content-loser-ui.xml.h:
	* components/loser/sidebar/nautilus-sidebar-loser-ui.xml.h:
	* components/mozilla/nautilus-mozilla-ui.xml.h:
	* components/sample/nautilus-sample-content-view-ui.xml.h:
	* components/services/summary/nautilus-view/nautilus-summary-view-ui.xml.h:
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-service-ui.xml.h:
	* src/nautilus-shell-ui.xml.h:
	Got rid of the checked-in copies of the .xml.h files. The worst
	part!

2000-10-30  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (forgot_password_button_cb):

	Fixing Bug #4178.  The Help button was not working right.

2000-10-29  John Sullivan  <sullivan@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_login_dialog): Change "Please login to eazel services"
	to "Please log in to Eazel services", in two places.

2000-10-30  Rebecca Schulman  <rebecka@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (summary_load_location_callback):
	Add setting of window and sidebar title to the summary view
	to "Eazel Services Summary".  I'm not necessarily attached to the wording
	but we should definitely make it something other than "eazel".
	this fixes a bug I filed, #4183

2000-10-30  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/helper/eazel-helper.pam:

	Yeah!  Found out how to let eazel-helper run even if root has
	no password set.  Add "nullok" to the pwdb line in the pam
	config file.

2000-10-30  Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical),
	(nautilus_self_check_file_utilities):
	nautilus_make_uri_canonical was relying on GnomeVFSURI sort-of
	handling relative uris, even though they are illegal in GnomeVFS.
	My earlier fix in gnome-vfs "broke" some of this broken behavior. 
	Added more special-case handling of cryptic absolute to 
	nautilus_make_uri_canonical to make it behave like before and not
	break existing behavior that depends on it. Added some bandaids for
	conversions that are clearly wrong but that may need more work 
	throughout the code that depends on it, for now I'm making it
	behave like the old call.
	My earlier fix to gnome-vfs fixes 2803. Change the test to reflect 
	the correct behavior.

2000-10-30  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/helper/README:
	* components/services/trilobite/helper/eazel-helper.security.in:

	Set fallback (in pam and usermode) to false: always needs to run
	as root.

2000-10-30  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_eazel_news_entry_row):
	disabled the "use all the space" since it causes too much flashing
	during size negotiation.  I'll either fix the flashing or remove
	it from nautilus_label soon.
	
2000-10-29  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_initialize_class), (nautilus_label_size_allocate),
	(get_clipped_width), (label_recompute_line_geometries):
	made nautilus_label interpret a wrap width of -1 to mean "use
	all of the available space".
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_service_entry_row), (generate_eazel_news_entry_row),
	(generate_update_news_entry_row):
	made the news items use all of the available space by setting its
	wrap width to -1.
	
2000-10-29  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_eazel_news_entry_row),
	(authn_cb_succeeded), (authn_cb_failed):
	improved formatting of news items, now that we finally have a long
	one.  Also, removed some unconditional debugging messages.
	
2000-10-29  Robey Pointer  <robey@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(eazel_install_callback_delete_files):
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install_delete_files), (eazel_install_get_epv):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_class_initialize), (create_temporary_directory),
	(eazel_install_delete_downloads), (eazel_install_install_packages),
	(eazel_install_revert_transaction_from_xmlstring),
	(eazel_install_emit_dependency_check_default):
	* components/services/install/lib/eazel-install-public.h:

	Change delete_files from a signal to an explicit API call.  Also
	be sure to erase the temp dir even if it has no files in it.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_done),
	(nautilus_service_install_failed),
	(nautilus_service_install_view_update_from_uri):
	* components/services/install/server/Makefile.am:

	Make the install view use the new explicit delete_files call, and
	condense those into a single dialog box.

	* nautilus-installer/src/callbacks.c: (begin_install),
	(druid_finish):
	* nautilus-installer/src/installer.c: (install_done),
	(eazel_installer_do_install), (eazel_installer_initialize):
	* nautilus-installer/src/installer.h:

	Fix the bootstrap installer for the delete_files call, and don't
	forget to delete the package list too.  Also, set forced-downgrade
	to TRUE until a post-PR2 bug is fixed.
	
2000-10-29  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: switch authority-less eazel-services URL's 
	from "eazel-services:/" to "eazel-services:///"  

	* src/nautilus-window-service-ui.c: (goto_online_storage),
	(goto_software_catalog), (detach_service_ui),
	(nautilus_window_install_service_ui):

	Go back to initing ammonite each time these menus are called.  
	I didn't want to bother with trying to make it work.


2000-10-29  J Shane Culpepper  <pepper@eazel.com>

	* components/loser/content/nautilus-content-loser-ui.xml.h:
	* components/loser/sidebar/nautilus-sidebar-loser-ui.xml.h:
	* components/mozilla/nautilus-mozilla-ui.xml.h:
	* components/sample/nautilus-sample-content-view-ui.xml.h:
	* components/services/summary/nautilus-view/nautilus-summary-view-u
	i.xml.h:
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-service-ui.xml.h:
	* src/nautilus-shell-ui.xml.h:
	* src/nautilus-shell.c: (display_caveat):

	Fixing bad spelling in caveat.

2000-10-29  Robey Pointer  <robey@eazel.com>

	* components/services/install/server/Makefile.am:

	Move RPMLIBS even *earlier* in the Makefile -- way back!  Seems to
	need to be the very first thing or else tons of libs get better
	precedence.

2000-10-29  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (nautilus_summary_view_load_uri),
	(merge_bonobo_menu_items):
	* src/nautilus-window-service-ui.c: (goto_online_storage),
	(goto_software_catalog), (detach_service_ui),
	(nautilus_window_install_service_ui):

	Change uses of "am_i_logged_in" and "who_is_logged_in" to 
	"ammonite_get_default_user_username"  Fix misc bugs/memory leaks.

2000-10-29  Arlo Rose  <arlo@eazel.com>

	* icons/temp-home.png:
	Added some extra stuff to the house to make it look better.

2000-10-28  Arlo Rose  <arlo@eazel.com>

	* icons/temp-home.png:
	Did a new home icon for PR2 that isn't my happy sunflower.

2000-10-28  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/i-regular.png:
	* icons/arlo/i-regular72.png:
	* icons/arlo/i-regular96.png:
	* icons/arlo/i-regular192.png:
	Fixed non-AA i-regular* icons to look the same as the AA versions.

2000-10-28  Robey Pointer  <robey@eazel.com>

	* components/services/install/server/Makefile.am:

	Move RPMLIBS earlier in the Makefile, to try to force the
	sleipnir build to use the right version of libdb.

2000-10-28  Ramiro Estrugo  <ramiro@eazel.com>

	* Makefile.am:
	* icons/Makefile.am:
	* nautilus-launch-icon.png:
	Fix bug 4155.  Nautilus Panel launching icon installed in the
	wrong place.  Needs to be $prefix/share/pixmaps, not
	$prefix/share/pixmaps/nautilus.

	Also added more ChangeLog files to EXTRA_DIST so they can be
	availalble in tarballs.
	
2000-10-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_login_dialog):
	* src/nautilus-service-ui.xml.h:
	* src/nautilus-shell.c: (display_caveat):

	Fixes for Bug #4104 and Bug# 4134. Changed error text to be more
	descriptive about account activation and added new wording for 
	caveat dialog.

2000-10-28  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/server/Makefile.am:
	Undoh rpm stuff

2000-10-28  Josh Barrow  <josh@eazel.com>

	* nautilus-clean.sh:
	Added mpg123 to the list of things to kill.  This finishes
	bug 4076.

2000-10-28  Josh Barrow  <josh@eazel.com>

	* nautilus-clean.sh:
	Changed to clean more things.

	* README
	Changed to reflect actual requirements.

	I actually checked these in a while ago, just neglected to
	check in the ChangeLog

2000-10-27  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:
	Doh doh doh

2000-10-27  Ramiro Estrugo  <ramiro@eazel.com>

	* src/Makefile.am:
	Dumshit me, I forgot to take out the file I retired from the
	makefile.
	
2000-10-27  Ramiro Estrugo  <ramiro@eazel.com>

	Fix bug 4054 - fix nautilus GNOME menu item so it does not
	"crash" nautilus.

	Fix bug 4117 - change default for PR2 back to desktop off.

	Also fix the issue about turning off the gnome crash dialog for
	out of process components.
	
	* icons/Makefile.am:
	* icons/nautilus-launch-icon.png:
	New launch icon from Arlo.

	* src/run-nautilus:
	Change this beast to not always run nautilus-clean.sh.  It only
	runs nautilus-clean.sh right before/after running Nautilus and not
	for every single invocation of 'run-nautilus'.  

	Also, dont start the desktop anymore, since there is not a
	preference in Nautilus to toggle the desktop.

	Finally, turn on the environment variable needed to prevent the
	gnome crash dialog from showing up for out of process components.
	
	* nautilus.desktop:
	Update icon and launch script back to run-nautilus.

	* nautilus.spec.in:
	We're back to using run-nautilus.
	
	* src/launch-nautilus:
	Retire.

2000-10-27  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/server/Makefile.am:
	Moved RPM_LIBS to top to ensure the right db is used.
	
2000-10-27  J Shane Culpepper  <pepper@eazel.com>

	* src/nautilus-window-service-ui.c: (goto_online_storage):

	Fixing Bug # 4097.  Should now point to correct place.

2000-10-27  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings):
	Output which rpmrc file I read.
	* configure.in:
	Attempt at fixing the install view breaking on rpm builds and not
	eazel-hacking builds.

2000-10-27  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4087 (crash leaving Summary view)

	* components/services/summary/nautilus-view/nautilus-summary-view.c: 
	(nautilus_summary_view_destroy): Don't unset container and unref
	component here; that's not necessary for the component that's
	created automagically. And doing so causes a double-destroy.
	(update_menu_items), (merge_bonobo_menu_items): Removed 
	ui_component field from details and changed callers to get the
	ui_component elsewise when needed (to clarify that it isn't
	owned here).
	* src/nautilus-service-ui.xml: Changed "Eazel Services" to
	"Eazel Services Home" since all the services are Eazel Services.
	* src/nautilus-service-ui.xml.h: gotta check this in too.

2000-10-27  Andy Hertzfeld  <andy@eazel.com>

	at Bud's request, implemented bug 4127, add a preference to
	show or hide Nautilus' desktop.
		
	* libnautilus-extensions/nautilus-global-preferences.h:
	define NAUTILUS_PREFERENCES_SHOW_DESKTOP
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_create_dialog), (global_preferences_register):
	register the desktop preference and show the checkbox in
	the appearance section of preferences
	* src/nautilus-application.c: (nautilus_application_initialize),
	(nautilus_application_destroy), (check_for_and_run_as_super_user),
	(desktop_changed_callback):
	watch the desktop preference and show or hide the desktop window
	when it changes.
	* src/nautilus-main.c: (main):
	show the desktop at launch if the preference is set and it's not
	overriden by command-line options.
	
2000-10-27  Darin Adler  <darin@eazel.com>

	Fixed bugs in file renaming. These changes along with the
	gnome-vfs ones take care of bug 3846 (cancel dialog persists after
	renaming online storage folder).

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_gnome_vfs_uri): Moved higher so it could be
	used by rename code.
	(operation_remove): Separated out the remove operation so we can
	remove the operation before the callback. This makes it safe to
	do a nautlius_file_cancel from inside a callback.
	(operation_free): Call the separate remove. Also cut down because
	we don't need so much state in the operation object any more.
	(operation_complete): Call remove before calling callback as
	described above.
	(rename_callback): A new callback that uses set_file_info results
	instead of the old one that used xfer.
	(nautilus_file_rename): Change to use set_file_info instead of
	xfer. Also updates the MIME type now, which will fix a bug I
	think.
	(nautilus_file_update_info): Use gnome_vfs_file_info_dup instead
	of gnome_vfs_file_info_ref so it works with any info, including
	static ones on the stack.
	(set_permissions_callback), (nautilus_file_set_permissions),
	(set_owner_and_group_callback), (set_owner_and_group): Change to
	use the info returned by the async. set_file_info. This simplifies
	things a lot.
	
	* src/file-manager/fm-error-reporting.c: (rename_callback),
	(cancel_rename_callback), (cancel_rename), (fm_rename_file):
	Rewrote renaming code. Use object data to keep track of pending
	renames so we can cancel a previous one if we try to re-rename the
	same file again. This allowed the code to get a lot simpler too.
	
	* libnautilus-extensions/nautilus-directory-async.c:
	(directory_load_done): Fixed bug that prevented the directory from
	ever noticing files that are no longer around. This code never
	worked because we checked for the wrong error code (EOF means
	success here).
	
	* po/Makefile.in.in: Re-removed this file. Seth checked it in by
	accident. This is a generated file, not one that should be checked
	in.
	
	* src/nautilus-window.c: (nautilus_window_realize): Got rid of
	"//"-style comments and used #if 0 instead.

	* components/loser/content/nautilus-content-loser-ui.xml.h:
	* components/loser/sidebar/nautilus-sidebar-loser-ui.xml.h:
	* components/mozilla/nautilus-mozilla-ui.xml.h:
	* components/sample/nautilus-sample-content-view-ui.xml.h:
	* components/services/summary/nautilus-view/nautilus-summary-view-ui.xml.h:
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-service-ui.xml.h:
	* src/nautilus-shell-ui.xml.h:
	Someone checked in some .xml.h files generated with an old
	Bonobo. Soon, this nightmare will be over and we won't check these
	files in any more.
	
2000-10-27  Arlo Rose  <arlo@eazel.com>

	* src/nautilus-first-time-druid.c: (make_anti_aliased_label):
	Made a font size change.

2000-10-28  Mathieu Lacage  <mathieu@eazel.com>

	second round of fixing of the sgml. Will be 
	the last one hopefuly.
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/install.sgml:
	* user-guide/C/sgml/intro.sgml:

2000-10-27  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/install.sgml:
	* user-guide/C/sgml/intro.sgml:
	* user-guide/C/sgml/nautilus.sgml:
	update to John's latest version, fix the sgml where needed.
	Need a new round of checking on my laptop. Help now displays 
	images !! hooray for Ali Abdin :)

2000-10-27  Robin * Slomkowski  <rslomkow@eazel.com>

	* README: package build requirments changed to be current
	left hole3s for gnome-vfs, ammonite, and medusa

2000-10-27  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_eazel_news_entry_row),
	(generate_login_dialog):
	finished bug 3793 for Shane, new login dialog for summary view, by
	changing the widget layout to satisfy Arlo.  Also marked more
	strings for translation.
	
2000-10-27  Arlo Rose  <arlo@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-exte
	nsions.h:
	Tweaked text offests.

2000-10-27  John Sullivan  <sullivan@eazel.com>

	Grumble grumble canonical grumble uri grumble.

	Josh found another assertion failure involving
	canonical uris. Yay Josh! Boo canonical uri troubles!
	
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_get_internal): Removed call to
	nautilus_uri_is_canonical_uri since it isn't quite the
	right check. Decided that the right check here is
	pointless.
	* libnautilus-extensions/nautilus-file-utilities.c:
	* libnautilus-extensions/nautilus-file-utilities.h:
	Removed nautilus_uri_is_canonical_uri since it now has
	no callers.

2000-10-27  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4085 for now (need Support menu item in Services menu)

	The URL will have to be updated again later, as the bug report says.

	* src/nautilus-service-ui.xml: Added Support menu item at end, made
	underline accelerators unique
	* components/services/summary/nautilus-view/nautilus-summary-view-u
	i.xml: tweaked wording and made underline accelerators unique

	* components/services/summary/nautilus-view/nautilus-summary-view-u
	i.xml.h:
	* src/nautilus-service-ui.xml.h: These guys changed.

	* src/nautilus-window-service-ui.c: 
	(goto_services_support): New function, goes to magic URI.
	(nautilus_window_install_service_ui): add verb to connect menu item
	to function.

2000-10-27  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (forgot_password_button_cb):

	Fixing the url for the change password button.

2000-10-27  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4114 (typing single word into location bar crashes)

	Grumble grumble canonical grumble uri grumble.

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical): Return of the workaround to
	convert file://foo to file:///foo, marked with appropriate
	FIXME.
	(nautilus_uri_is_canonical_uri): Changed implementation to just
	call make_uri_canonical and compare. It had been doing a subset
	of the things that make_uri_canonical does, but it had gotten out
	of synch.
	(nautilus_self_check_file_utilities): Updated tests and added more.

2000-10-27  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/gdb3html.[ch]:
        Added a 'base_path' to the Context struct
        (parse_file): Do some minimal parsing to get the base path from the
        provided filename on the command line.

        * components/help/converters/gnome-db2html2/sect-elements.c:
        * components/help/converters/gnome-db2html2/toc-elements.c:
        (sect_figure_end_element),
        (sect_inlinegraphic_start_element),
        (sect_infobox_start_element),
        (toc_artheader_end_element):
        Use 'file://' URIs on images (using base_path to get the path of the
        image). This means images should now work within SGML files. Should
        fix bug #3938

2000-10-27  Ramiro Estrugo  <ramiro@eazel.com>

	Final bits of arlification for the install view.  Make the fonts
	smaller and use a better fill icon.

	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(generate_install_form):
	* components/services/login/nautilus-view/nautilus-change-password-view.c:
	(generate_change_password_form):
	* components/services/nautilus-dependent-shared/eazel-services-extensions.c:
	(eazel_services_label_new):
	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_item_new), (eazel_services_footer_update):
	Reverse the order of font_size and weight as its usually specified.
	
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_title_new),
	(eazel_services_header_middle_new),
	(eazel_services_header_set_left_text),
	(eazel_services_header_set_right_text):
	* components/services/nautilus-dependent-shared/eazel-services-header.h:
	Split the constructors into 2 for the 2 common header cases.
	
	* components/services/nautilus-dependent-shared/icons/Makefile.am:
	Add a new icon for the middle header fill.
	
	* components/services/nautilus-dependent-shared/test-footer-header.c:
	(main):
	Update for header constructor changes.
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (nautilus_summary_view_load_uri):
	Quiet down the debug spew.


2000-10-27  Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-list.c: (nautilus_gdk_gc_copy):
	An attempt to fix a list view redraw glitch Andy and I were trying to 
	track down.

2000-10-27  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings):
	Always enable rpm debugging (needed temporarily)

2000-10-27  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c: (add_play_controls):
	left justified the song label in the music view to make it
	look cleaner.
	
2000-10-27  Josh Barrow  <josh@eazel.com>

	* icons/ardmore/Makefile.am:
	* icons/ardmore/theme_preview.png:
	Added theme preview to the Ardmore theme.

	* icons/villanova/Makefile.am:
	* icons/villanova/theme_preview.png:
	Added theme preview to the Villanova theme.

	* nautilus-installer/src/Makefile:
	As Eskil says, "Yes."

2000-10-26  Seth Nickell  <seth@eazel.com>

	* src/nautilus-window.c: (nautilus_window_realize):

	Commented out a wm hints line that was causing Nautilus to be
	unfocusable (hence not allowing keyboard input, making it
	hard to work on things) in Sawfish. Coordination with 
	Sawfish/John Harper is probably needed here...

2000-10-26  Eskil Heyn Olsen  <eskil@eazel.com>

	This introduces the problem thingy to libeazelinstall. A set of
	funcs that can create humanreadable descriptions of a installation
	failure, plus repair descriptions and even better, automagically
	execute them. Basically this is all the RepairCase related crap
	from the bootstrap installer.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (tree_helper), (install_failed), (delete_files), (done), (main):
	Use the new problem thingy
	
	* components/services/install/lib/Makefile.am:
	Added the .c and .h file for the problem thingy

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_existing_packages):
	Loads of debug output in the case that people kept nagging me
	about. If they still don't get that this is a known problem, they
	must be blind.
	
	* components/services/install/lib/eazel-install-problem.h:
	* components/services/install/lib/eazel-install-problem.c:
	(get_required_name), (get_detailed_messages_foreach),
	(compare_problem_case), (add_case), (add_force_install_both_case),
	(add_force_remove_case), (add_remove_case), (add_update_case),
	(get_detailed_cases_foreach),
	(eazel_install_problem_case_to_string),
	(eazel_install_problem_case_foreach_to_string),
	(eazel_install_problem_case_foreach_destroy),
	(eazel_install_problem_case_new),
	(eazel_install_problem_case_destroy),
	(eazel_install_problem_case_list_destroy),
	(eazel_install_problem_new), (eazel_install_problem_finalize),
	(eazel_install_problem_class_initialize),
	(eazel_install_problem_initialize),
	(eazel_install_problem_get_type), (problem_step_foreach_remove),
	(eazel_install_problem_step), (eazel_install_problem_tree_to_case),
	(eazel_install_problem_tree_to_string),
	(eazel_install_problem_cases_to_string),
	(find_dominant_problem_type), (find_problems_of_type),
	(find_dominant_problems), (build_categories_from_problem_list),
	(eazel_install_problem_handle_cases):
	The problem thingy.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings),
	(eazel_install_prepare_rpm_system):
	Set rpm debug if debug==TRUE, also fixed a debug message
	reg. cannot open rpm db.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_view_update_from_uri):
	Allocate the problem thingy.
	
	* nautilus-installer/src/Makefile:
	Yes.
	
	* nautilus-installer/src/installer.c: (get_required_name):
	Used the samen get_required_name as the problem thingy
	
	* nautilus-installer/src/prescript:
	Removed the hack that we inserted for bug night.

2000-10-26  Robey Pointer  <robey@eazel.com>

	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (run_away_timer), (authn_succeeded), (authn_failed):

	Tidy up the password-change view a bit to try to make it more
	stable, and use more of the info from ammonite.  If ammonite
	throws away the current login (which happens whenever the server
	responds oddly), switch back to the summary view to force a
	re-login instead of drifting away.

2000-10-26  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c: (destroy),
	(icon_destroy):
	fixed bug 4108, changing themes in the list view crashes nautilus.
	Fixed by removing the call to preferences_remove_callback from
	icon_destroy and putting it into the widget's destroy method like
	it should have been.  This also could have been hurting performance
	and causing other weird problems.
	
2000-10-26  Arlo Rose  <arlo@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-exte
	nsions.h:
	Fixed a font weight problem.
	
2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>
	
	* components/services/nautilus-dependent-shared/eazel-services-header.h:
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_new),
	(eazel_services_header_set_left_text),
	(eazel_services_header_set_right_text):
	Change the 'constructor' to accept left/right strings a boolean
	that determines whether the logo is visible.
	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(generate_install_form):
	* components/services/login/nautilus-view/nautilus-change-password-view.c:
	(generate_change_password_form):
	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	(generate_summary_form):
	Update for header changes.  Fixes bug 4099 (Secondary Header broke
	with test changed to the nautilus widget)
	
	* components/services/nautilus-dependent-shared/eazel-services-extensions.c:
	(eazel_services_get_current_date_string):
	Change the date format string.  Using a format of "%e" worked on
	one computer but spewed warnings on another.
	
	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	Tweak the header text offset a bit.
	
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_item_new):
	Fix the last item's right boundary to make this beast be up to the
	most stringent Arlo standards.

	* components/services/nautilus-dependent-shared/test-footer-header.c: (main):
	Add a middle header to test new header features.

	* components/services/nautilus-dependent-shared/shared-service-widgets.c:
	* components/services/nautilus-dependent-shared/shared-service-widgets.h:
	Retire the old way to do middle headers.

2000-10-26  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_prepare_rpm_system):
	Moved the addition of the opened db into the if clause.
	
	* components/services/time/command-line/Makefile.am:
	Added GNOMELOCALEDIR
	
	* components/services/trilobite/helper/Makefile.am:
	Trickery to make the eazel-helper.security file be build during
	make and not make install, as the latter is Real Bad<tm> as the
	rpm version will point to a nonexisting binary.
	
	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.c: (trilobite_get_distribution):
	Inserted a else to fix the mandrake/redhat issue.
	
2000-10-26  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4064 (Can't get a right-click menu in vault)

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical): Changed this to call
	gnome_vfs_uri_new () and gnome_vfs_uri_to_string () so
	we get the same canonicalization behavior as gnome-vfs,
	other than the special Nautilus-specific cases.
	(nautilus_self_check_file_utilities): Added a bunch of
	new checks, including copying & pasting many from
	gnome-vfs.
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_self_check_directory): added a couple of checks.

2000-10-26  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (forgot_password_button_cb), (generate_login_dialog):

	Adding the button toggle between register and i forgot my password
	options in the login dialog.  Still need to tweak the ui before the
	login is finished.

2000-10-26  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c: (relayout),
	(button_press_event), (key_press_event), (get_icon_being_renamed),
	(pending_icon_to_rename_destroy_callback),
	(get_pending_icon_to_rename), (set_pending_icon_to_rename),
	(process_pending_icon_to_rename), (is_renaming_pending),
	(is_renaming),
	(nautilus_icon_container_start_renaming_selected_item),
	(end_renaming_mode):
	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-private.h:
	* src/file-manager/fm-directory-view.c:
	(reveal_newly_added_folder), (new_folder_done):
	Folder renaming now starts when the icon is added rather than
	at some arbitrary timeout after the new folder command is
	issued. Fixed icon container to handle a request to rename an
	unpositioned icon.

2000-10-26  Eskil Heyn Olsen  <eskil@eazel.com>

	* src/Makefile.am:
	Install launch-nautilus, should fix rpmbuilding.

2000-10-26  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form):
	changed "additional services" message in summary view as requested
	by marketing.
	
2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	Fix bug 3845.  When configured to use an HTTP proxy, Mozilla won't
	go through Ammonite.  The fix is to tell the mozilla network
	library to NOT use the proxy to resolve 'localhost'.

2000-10-26  Gene Z. Ragan  <gzr@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(dequeue_pending_idle_callback):
	Did some refactoring to stop an assertion in NautilusDirectory
	add_to_hash_table from firing. This involved removing two lists
	of NautilusFiles that we being created and then merged.  Now one
	list is being used and the condition that causes the assertion (duplicate
	files in the hash table) is not being created.
	
	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_directory_files_changed_callback):
	Removed the world famous ANOMALY error at the request of Darin.
	
2000-10-26  Robey Pointer  <robey@eazel.com>

	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (authn_failed):

	Better logging of a failed password change attempt.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_category):
	* nautilus-installer/src/installer.c: (add_bullet_point_to_vbox),
	(jump_to_error_page), (jump_to_retry_page):

	Factor out the bullet point generation and make it line-wrap
	(using Gtk's unfortunately lame line-wrapping algorithm).  Do
	better debugging on failed package lists.

2000-10-26  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (footer_item_clicked_callback):

	Fixing location callbacks to go to the right place when a user is
	logged in.

2000-10-26  Michael Engber  <engber@eazel.com>

	* src/file-manager/fm-desktop-icon-view.c:
	(quit_nautilus_desktop_menu_item_callback),
	(fm_desktop_icon_view_create_background_context_menu_items):

	Add "Quit Nautilus Desktop" to desktop context menu

2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	Make the font smaller (11 vs 13) as requested by Arlo.	
	
2000-10-26  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (authn_cb_succeeded), (nautilus_summary_view_initialize),
	(nautilus_summary_view_destroy):

	Rolling back gconf evil that seems to be causing the production runs
	of the summary to segfault.

2000-10-26  Rebecca Schulman  <rebecka@eazel.com>
	Fixed the panel menu item to launch the desktop
	and one nautilus window, starting at the user's 
	home directory by default.  To do this, we created
	a new script called launch-nautilus.  Ramiro 
	recommended some changes to run-nautilus that
	I also did.

	* nautilus.desktop:
	Changed run-nautilus to launch-nautilus
	* nautilus.spec.in:
	Changed run-nautilus to launch-nautilus,
	since run-nautilus won't be needed in the
	rpm
	* src/Makefile.am:
	added launch-nautilus to the build
	* src/launch-nautilus:
	* src/run-nautilus:
	removed the mozilla environment 
	LD_LIBRARY_PATH hacks.
	
	* user-guide/C/sgml/chapter-1.sgml:
	Corrected an HTML error.


2000-10-26  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (nautilus_summary_view_load_uri),
	(merge_bonobo_menu_items):
	* src/nautilus-window-service-ui.c: (goto_online_storage),
	(goto_software_catalog):

	Fixing exported function name used from ammonite.

2000-10-26  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 2814, move "built-in bookmarks" checkbox from the
	edit bookmarks window to preferences/navigation.
	
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_create_dialog), (global_preferences_register):
	added a checkbox to control the "hide built-in bookmarks" preference
	* libnautilus-extensions/nautilus-global-preferences.h:
	renamed preference path so the built-in bookmarks preference can
	be in the preferences window
	* src/nautilus-bookmarks-window.c: (create_bookmarks_window),
	(repopulate):
	removed the built-in bookmarks checkbox from the edit bookmarks
	window
	
2000-10-26  Andy Hertzfeld  <andy@eazel.com>

	added a new theme from Susan
	
	* configure.in:
	* icons/Makefile.am:
	* icons/villanova/.cvsignore:
	* icons/villanova/Makefile.am:
	* icons/villanova/villanova.xml:
	* icons/villanova/*.png:
	
2000-10-26  Pavel Cisler  <pavel@eazel.com>

	* librsvg/Makefile.am:
	fix the build.
	Checking in for Ramiro.

2000-10-26  Darin Adler  <darin@eazel.com>

	Fix bug 4052 (sidebar file count is not updated as settings are
	changed).
	
	* libnautilus-extensions/nautilus-directory-async.c:
	(dequeue_pending_idle_callback): Add a missing call to
	nautilus_file_changed.

2000-10-26  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_update_news_entry_row),
	(nautilus_summary_view_load_uri):

	Adding debug prints to locate optimized build crash in the summary view.

2000-10-26  Andy Hertzfeld  <andy@eazel.com>

	moved the eazel throbber into the default theme; moved Arlo's throbber
	into his theme and restored the generic throbber to the gnome theme.
	Updated the theme files to reflect this.
	
	* configure.in:
	* icons/ardmore/ardmore.xml:
	* icons/arlo/Makefile.am:
	* icons/arlo/arlo.xml:
	* icons/arlo/throbber/.cvsignore:
	* icons/arlo/throbber/Makefile.am:
	* icons/default.xml:
	* icons/eazel/Makefile.am:
	* icons/eazel/eazel.xml:
	* icons/gnome/Makefile.am:
	* icons/gnome/gnome.xml:
	* icons/gnome/throbber/.cvsignore:
	* icons/gnome/throbber/Makefile.am:
	* icons/throbber/Makefile.am:

2000-10-26  Darin Adler  <darin@eazel.com>

	Fix bug 3998 (Move to Trash crashes Nautilus if item with that
	name already in trash).

	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_notify_files_moved): Change the sequence so
	that the renaming doesn't try to update the file hash twice.
	
	* src/file-manager/fm-icon-view.c: (compute_menu_item_info):
	Handle NULL icon container case. This case happened to Will while
	testing.
	
	* src/file-manager/fm-directory-view.c: (load_directory): Fix
	GList leak.
	* src/nautilus-view-frame.c: (nautilus_view_frame_destroy): Fix
	string leak.
	* src/nautilus-window-menus.c: (append_bookmark_to_menu): Fix
	GdkPixbuf ref. leak.

	* libnautilus-extensions/nautilus-user-level-manager.c:
	(user_level_set_default_if_needed): Tiny coding style change.
	
2000-10-26  Rebecca Schulman  <rebecka@eazel.com>

	* nautilus.spec.in:  Moved the spec file entry
	from the binaries section to the data section,
	so the manual files' permissions will be set
	correctly, and changed *.sgml to * so
	we'll get the associated .css files (they're
	style sheets, I think?) and the images 
	installed, too.

2000-10-26  Mathieu Lacage  <mathieu@eazel.com>

	* nautilus.spec.in: add sgml files in rpms

2000-10-26  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(get_link_name), (make_next_duplicate_name):
	Link names weren't properly escaped causing them not to
	get selected.

	* src/file-manager/fm-directory-view.c: (copy_move_done_callback),
	(new_folder_done),
	(fm_directory_view_trash_state_changed_callback):
	added asserts

2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_destroy), (label_enter_event), (label_leave_event),
	(image_enter_event), (image_leave_event),
	(prelight_data_free_callback), (image_add_prelighting),
	(label_add_prelighting), (footer_item_new):
	Final arlification touches.  Make the footer item's left and right
	bumpers prelight as well.
	
2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_is_uri_handled_by_nautilus):
	Add "gnome-help" and "ghelp" to the list of uris handled by
	Nautilus as requested by Ali.
	
2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	Add LIBPNG to test program link line.  It was breaking for me.
	
2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/shared-service-utilities.c:
	* components/services/nautilus-dependent-shared/shared-service-utilities.h:
	* components/services/nautilus-dependent-shared/shared-service-widgets.c:
	* components/services/nautilus-dependent-shared/shared-service-widgets.h:
	Remove a bunch of unused code.  Also removed 'go_to_uri()' which
	does the exact same thing (and nothing more) than
	'nautilus_view_open_location()'.  Use that directly instead.

	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(show_dialog_and_run_away),
	(nautilus_service_install_view_update_from_uri):
	* components/services/inventory/nautilus-view/nautilus-inventory-view.c:
	(gather_config_button_cb), (register_later_cb),
	(make_http_post_request):
	* components/services/login/nautilus-view/nautilus-change-password-view.c:
	(authn_succeeded), (maintenance_button_cb):
	Tiny bit of 'go_to_uri' cleanup.
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (logged_in_callback), (logged_out_callback),
	(preferences_button_cb), (register_button_cb), (goto_service_cb),
	(goto_update_cb), (error_dialog_cancel_cb),
	(footer_item_clicked_callback):
	Add #defines for magical uris and 'go_to_uri' cleanup.

2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/main.c: (main):
	Dont need to check the mozilla environment anymore.
	
2000-10-26  Mathieu Lacage  <mathieu@eazel.com>

	Fix bug 2571: action not computed corected for dnd in list view.
	Also, the dnd in list view should be slightly nicer now :)
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_marshal_NONE__POINTER_POINTER_POINTER_INT_INT_INT), space
	(nautilus_gtk_marshal_NONE__POINTER_POINTER_POINTER_POINTER_INT_INT
	_UINT): brand new function for brand new signal as below :)
	* libnautilus-extensions/nautilus-gtk-extensions.h: prototype.
	
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_initialize_class), 
	(nautilus_list_get_drop_action):
	* libnautilus-extensions/nautilus-list.h:
	Add signal get_default_action, remove old code to compute
	default action...

	* src/file-manager/fm-list-view.c:
	(nautilus_list_find_icon_list_drop_target),
	(fm_list_get_default_action), (set_up_list):
	connect to new signal, move old code to there, cleanup, finish.

2000-10-26  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c: (selection_callback),
	(add_play_controls), (nautilus_music_view_set_album_image),
	(nautilus_music_view_update):
	minimized flashing in the music view by fixing the size of the
	song label and play time, since it was relaying everything out
	when they changed.
	
2000-10-26  Mathieu Lacage  <mathieu@eazel.com>

        Make prelighted icons not prelighted when you leave the list 
	view without dropping. Also, move the actual prelighting
	operation from fm-list-view to nautilus-list.
	Also, remove FIXME about this bug since it is fixed.
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_drag_leave),
	(nautilus_list_find_icon_list_drop_target),
	(nautilus_list_prelight_if_necessary):
	* src/file-manager/fm-list-view.c: (fm_list_handle_dragged_items):

2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/Makefile.am:
	Fix bug 4031.  Mozilla component wont run cause of unresolved
	symbols.  Link in the standard location of Mozilla
	(/usr/lib/mozilla) to make it always work without having to mess
	with environment stuff.
	
2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_item_new), (eazel_services_footer_update):
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_new):
	Move more constants to shared place.
	
2000-10-26  Mathieu Lacage  <mathieu@eazel.com>

	* libnautilus-extensions/nautilus-drag.c: spaces...
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_drag_start), 
	(nautilus_list_drag_leave): spaces.
	* src/file-manager/fm-list-view.c: 
	(fm_list_receive_dropped_icons): make dnd work in list 
	view by removing some old code from there which was made 
	useless by some recent changes in teh copy/move code...

2000-10-25  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(eazel_services_scheme_untranslate):

	Fix 3969; Untranslating eazel-services URI's works
	correctly for non-default users.

2000-10-25  John Sullivan  <sullivan@eazel.com>

	Fixed problems that were causing crash when Services button pressed.

	* libnautilus-extensions/nautilus-directory-async.c:
	(load_directory_done), (dequeue_pending_idle_callback):
	Was missing several NULL checks.

2000-10-25  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (generate_install_form), (show_dialog_and_run_away):

	A few quick tweaks to make the installer screenshot-worthy, and to
	fix a possible case where it would switch to a new URI before it
	had told nautilus it was done loading.  (I think that was
	confusing Nautilus in some corner cases.)
	
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(wipe_redirect_table), (add_redirect),
	(trilobite_redirect_lookup):

	Add "/" back to the keys when adding and removing, since otherwise
	we end up with a big blob of evil-named keys.  Fix the bug that
	the missing "/" was hiding: namely, that mass-removing keys had
	stopped working after the gconf upgrade.
	
2000-10-25  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/main.c: (run_test_cases), (main):
	* components/mozilla/nautilus-mozilla-content-view.c:
	(is_uri_partial), (make_full_uri_from_relative),
	(mozilla_dom_mouse_click_callback),
	(test_make_full_uri_from_relative):

	Fix bugzilla.eazel.com 3949.  Better (but still not perfect) 
	support for relative URI's.  The cases that aren't handled are rarely
	encountered in my experiance.  I'd make it perfect, but I just
	don't have time right now.
	Also added self-test.

2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-extensions.c:
	(eazel_services_label_new):
	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_item_new), (eazel_services_footer_update):
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_new):
	Place the font families, weights and sizes in the header file so
	that Arlo can arloify them.
	
2000-10-25  Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory.h:
	* libnautilus-extensions/nautilus-file-private.h:
	* libnautilus-extensions/nautilus-directory-async.c: (istr_equal),
	(istr_hash), (istr_set_new), (istr_set_insert), (add_istr_to_list),
	(istr_set_get_as_list), (istr_set_destroy): New set of functions
	for manipulating a set of case-insensitive strings (private for
	now).
	(mime_list_cancel): Change to use the istr_set.
	(get_filter_options_for_directory_count): Moved up so it can be
	used by the directory load code.
	(load_directory_done): Common function to use when a load is
	completed or cancelled.
	(dequeue_pending_idle_callback): Update file count and MIME list
	as well as just loading the files.
	(should_get_directory_count): New cover that takes into account
	the fact that a directory load is already getting the count.
	(should_get_mime_list): New cover that takes into account
	the fact that a directory load is already getting the MIME list.
	(start_monitoring_file_list): Set up more stuff since a load
	does a lot more now.
	(directory_count_start): Don't start a directory count if we are
	already loading the directory's file list.
	(mime_list_one), (mime_list_callback), (mime_list_load): Change to
	use the istr_set. Also removed some code that set variables that
	were never used.
	(mime_list_start): Don't start a MIME list if we are already
	loading the directory's file list.

	* components/adapter/Makefile.am:
	* components/hardware/Makefile.am:
	* components/html/Makefile.am:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/music/Makefile.am:
	* components/rpmview/Makefile.am:
	* components/sample/Makefile.am:
	* components/services/install/command-line/Makefile.am:
	* components/services/install/lib/Makefile.am:
	* components/services/install/nautilus-view/Makefile.am:
	* components/services/install/server/Makefile.am:
	* components/services/inventory/lib/Makefile.am:
	* components/services/inventory/nautilus-view/Makefile.am:
	* components/services/login/nautilus-view/Makefile.am:
	* components/services/nautilus-dependent-shared/Makefile.am:
	* components/services/summary/lib/Makefile.am:
	* components/services/summary/nautilus-view/Makefile.am:
	* components/services/time/command-line/Makefile.am:
	* components/services/time/nautilus-view/Makefile.am:
	* components/services/time/service/Makefile.am:
	* components/services/trilobite/libtrilobite/Makefile.am:
	* components/services/trilobite/sample/command-line/Makefile.am:
	* components/services/trilobite/sample/lib/Makefile.am:
	* components/services/trilobite/sample/nautilus-view/Makefile.am:
	* components/services/trilobite/sample/service/Makefile.am:
	* components/services/vault/command-line/Makefile.am:
	* components/tree/Makefile.am:
	* helper-utilities/authenticate/Makefile.am:
	* nautilus-installer/src/Makefile.am:
	Changed all use of CPPFLAGS to use INCLUDES instead as it says in
	the automake documentation.
	
	* libnautilus-extensions/nautilus-glib-extensions.h: Reformatting.
	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_remove_deep), (destroy_deep_helper),
	(nautilus_g_hash_table_destroy_deep_custom): Reformatting.

2000-10-25  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(new_folder_xfer_callback):
	new_folder_xfer_callback was not escaping the space in
	duplicate_name, this was causing us to not recognize
	second and subsequent new folders (& select them).
	* src/file-manager/fm-directory-view.c: (copy_move_done_callback):
	moved free call to better spot

2000-10-25  J Shane Culpepper  <pepper@eazel.com>

	* src/nautilus-window-service-ui.c: (goto_online_storage):

	Fixing url string.  Had one too many slashes.

2000-10-25  John Sullivan  <sullivan@eazel.com>

	Fixed various usability problems with the services log-in
	dialog that I ran into. Some coding tweaks too.

	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	(generate_error_dialog): move cast to cause fewer of them
	(name_or_password_field_activated): New function, auto-clicks the
	OK button if the password row is activated.
	(generate_login_dialog): move cast to cause fewer of them; use
	#defines for button indices and row numbers; changed "Opps" to
	"Oops" (Oops!); set default button to OK button; wire up
	name_or_password_field_activated; start with focus in Name field.

2000-10-25  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (nautilus_summary_view_load_uri),
	(merge_bonobo_menu_items):
	* src/Makefile.am:
	* src/nautilus-window-service-ui.c: (goto_online_storage),
	(goto_software_catalog):

	Fixing the services menu items to go to correct locations.

2000-10-25  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-query.c:
	Fixed a include problem.
	* components/services/install/lib/eazel-install-rpm-glue.h:
	Added /me to authors

2000-10-25  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_category):
	* nautilus-installer/src/installer.c:
	(eazel_installer_add_category):

	Add <DEFAULT/> option to the package list XML file, and make all
	default choices be pre-clicked when the user gets to the selection
	page.

2000-10-25  Darin Adler  <darin@eazel.com>

	* src/nautilus-applicable-views.c: (nautilus_navigation_info_new),
	(nautilus_navigation_info_free),
	(nautilus_navigation_info_get_location): Changed to store the
	location URI separate from the NautilusFile object. NautilusFile
	was munging URLs that had queries in them, causing big problems
	for the software catalog among other things. This is a good
	short-term fix.

2000-10-25  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Don't bomb out when db cannot be accessed.

2000-10-25  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_set_selection):
	nautilus_list_set_selection used to pass a bogus NautilusCListRow*
	to row_set_selected
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_new_folder):
	whitespace change

	* src/file-manager/fm-list-view.c:
	comment corrected

2000-10-25  Darin Adler  <darin@eazel.com>

	* components/adapter/bonobo-stream-vfs.c: (vfs_get_info),
	(vfs_set_info), (vfs_write), (vfs_read), (vfs_seek), (vfs_copy_to),
	(vfs_commit), (vfs_revert), (vfs_destroy),
	(bonobo_stream_vfs_class_init), (bonobo_stream_vfs_open):
	Update for changes to the BonoboStream class. Also did a thorough code
	review, fixed some small bugs, and added a bunch of FIXMEs for things
	that are broken.

2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-constants.h:
	Removed.  It was a bad try.  Stuff is now in eazel-services-extensions.h.
	
	* components/services/nautilus-dependent-shared/Makefile.am:
	* components/services/nautilus-dependent-shared/eazel-services-extensions.c:
	(pixbuf_new_from_name), (eazel_services_image_new),
	(eazel_services_label_new):
	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	Add a place to put shared services extensions.
	
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_item_new), (footer_remainder_new),
	(eazel_services_footer_update):
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_new):
	* components/services/nautilus-dependent-shared/test-footer-header.c:
	Remove a bunch of duplicated code and put it in a shared
	extensions location.  Make the footer real.  Add an item_clicked
	signal to the footer.

	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	Hook up the footer for item clicks.
	
	* libnautilus-extensions/nautilus-image.c:
	(nautilus_image_new_loaded):
	* libnautilus-extensions/nautilus-image.h:
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_new_loaded):
	* libnautilus-extensions/nautilus-label.h:
	Add constructors that take a bunch of arguments for the various
	widgets attributes.  Makes the widgets easier to use for callers
	that need to tweak many attributes (like eazel services).
	
2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/.cvsignore:
	* components/services/nautilus-dependent-shared/Makefile.am:
	* components/services/nautilus-dependent-shared/eazel-services-constants.h:
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(eazel_services_footer_initialize_class),
	(eazel_services_footer_initialize), (footer_destroy),
	(pixbuf_new_from_name), (label_new), (label_enter_event),
	(label_leave_event), (label_button_press_event), (label_free_data),
	(label_free_uri), (image_new), (image_new_from_name),
	(buffered_widget_add_prelighting), (footer_item_new),
	(footer_remainder_new), (eazel_services_footer_new),
	(eazel_services_footer_update):
	* components/services/nautilus-dependent-shared/eazel-services-footer.h:
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_initialize_class),
	(eazel_services_header_initialize), (header_destroy),
	(pixbuf_new_from_name), (label_new), (image_new),
	(image_new_from_name), (eazel_services_header_new),
	(eazel_services_header_set_text):
	* components/services/nautilus-dependent-shared/eazel-services-header.h:
	Two new widgets to deal with services views headers and footers.
	
	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(generate_install_form):
	* components/services/login/nautilus-view/nautilus-change-password-view.c:
	(generate_change_password_form):
	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	(generate_summary_form):
	Use the new footer and header widgets.
	
	* components/services/nautilus-dependent-shared/shared-service-widgets.c:
	* components/services/nautilus-dependent-shared/shared-service-widgets.h:
	Retire some old code.

	* components/services/nautilus-dependent-shared/test-footer-header.c:
	(delete_event), (main):
	Add a test for the new header and footer widgets.
	
2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_size_request), (render_buffer_pixbuf):
	Make sure text layout honors the vertical and horizontal offsets.

	(nautilus_scalable_font_draw_text):
	* test/test-nautilus-image.c: (label_new), (label_enter_event),
	(label_leave_event), (label_free_data),
	(buffered_widget_add_prelighting), (header_new), (footer_item_new),
	(footer_remainder_new), (footer_new), (main):
	More work on prelighting footers.
	
2000-10-25  Andy Hertzfeld  <andy@eazel.com>

	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.c: (create_image_widget), (create_image_widget_from_uri):
	fixed bug where local images were not showing up in the summary
	view.
	
2000-10-24  Andy Hertzfeld  <andy@eazel.com>

	worked on bug 3898, selection in the aa icon view is too slow.
	Fixed by using a fill to make the selection pixbuf with some tiny
	blits for the rounded corners, instead of stretching a pixbuf.
	Also, made the selection color themable in the process.
	
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(clear_rounded_corners), (draw_label_text_aa):
	make the selection pixbuf with a fill and then some
	blits for the corner.
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize), (icon_destroy),
	(nautilus_icon_container_set_is_fixed_size),
	(nautilus_icon_container_theme_changed):
	made it read the selection color from the current theme
	* libnautilus-extensions/nautilus-icon-private.h:
	added a field to keep the selection color w/alpha.
	* icons/default.xml:
	added semi-transparent gray selection color to default theme.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-buffered-widget.c:
	Remove a bunch of extraneous includes.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/icons/Makefile.am:
	Rename one of the icons.
	
	* test/test-nautilus-image.c: (delete_event), (icon_get_path),
	(pixbuf_new_from_name), (label_new), (label_enter_event),
	(label_leave_event), (label_new_with_prelight), (image_new),
	(image_new_from_name), (header_new), (footer_new), (main):
	Add better test for image and label widgets.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	Fix the broken build.  Add missing header to sources.
	
2000-10-24  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	Moved a CORBA include, so EAZEL_INSTALL_NO_CORBA doesn't include
	it
	
	* components/services/time/command-line/main.c: (main):
	* components/services/time/idl/trilobite-eazel-time-service.idl:
	* components/services/time/nautilus-view/trilobite-eazel-time-view.
	c: (server_button_pressed), (timediff_button_pressed),
	(trilobite_eazel_time_view_initialize),
	(trilobite_eazel_time_view_destroy):
	* components/services/time/service/trilobite-eazel-time-service-pri
	vate.h:
	* components/services/time/service/trilobite-eazel-time-service.c:
	(impl_Trilobite_Eazel_Time_Service_set_time_server),
	(trilobite_eazel_time_service_get_epv),
	(trilobite_eazel_time_service_finalize),
	(trilobite_eazel_time_service_initialize_load_config),
	(get_nist_time), (trilobite_eazel_time_service_get_server_time):
	Revived the timeservice, made it use nist/ntp (defaults to
	nist1.sjc.certifiedtime.com). Uses code from gnuclear to do the
	actual nist parse.
	
	* nautilus-installer/src/Makefile:
	Yes.
	* nautilus-installer/src/installer.c: (start_over),
	(add_update_package), (eazel_install_preflight), (check_system),
	(more_check_system):
	Fixed the "will update eog && will remove eog" bug. Now it just
	say "will update eog x 2". Also checks for rh7.x and rpm v.4.x
	
	* nautilus-installer/src/prescript:
	Temporarily hacked prescript to run
	/h/public/bin/eazel-trilobite-configure (if present), and set
	nautilus to use gegl as services server.
	
	* nautilus.spec.in:
	Updated deps to ORBit >= 0.5.3 and oaf >= 0.6.0

2000-10-24  Robey Pointer  <robey@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(mime_list_callback):

	Fix a typo that caused a failure to not report that it failed.

2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/icons/Makefile.am:
	* components/services/nautilus-dependent-shared/icons/eazel-logo-left-side-repeat.png:
	* components/services/nautilus-dependent-shared/icons/eazel-logo-right-side-eazel-logo.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-normal-fill.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-normal-left-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-normal-right-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-prelight-fill.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-prelight-left-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-prelight-right-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-remainder-fill.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-remainder-left-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-remainder-right-bumper.png:

	New icons for summary view.
	
2000-10-24  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):
	lots of layout tweaks to please Arlo; it's still not finished yet
	since I wasn't able to shrink the news section properly
	
	* libnautilus-extensions/nautilus-tabs.c:
	(nautilus_tabs_initialize), (draw_tab_label), (draw_all_tabs),
	(nautilus_tabs_prelight_tab), (nautilus_tabs_select_tab):
	changed font size, text spacing and prelight behaviour as
	specified by Arlo.
	
	* icons/eazel/Back.png:
	* icons/eazel/Forward.png:
	* icons/eazel/Home.png:
	* icons/eazel/Refresh.png:
	* icons/eazel/Search.png:
	* icons/eazel/SearchWeb.png: 
	* icons/eazel/Services.png:
	* icons/eazel/Stop.png:
	* icons/eazel/Up.png:

	updated Susan's toolbar icons
	
2000-10-24  Arlo Rose  <arlo@eazel.com>

	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-active-bridge.png:
	Fixed a typo.

2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	* librsvg/art_rgba.c: (art_rgba_rgba_composite),
	(art_rgba_fill_run), (art_rgba_run_alpha):
	* librsvg/art_rgba.h:
	* librsvg/rsvg.c:
	Make Raph's latest changes work with the old version of libart in
	gnome-libs-1-0.
	
2000-10-24  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/i-directory.xml:
	* icons/arlo/emblem-nowrite-72.png:
	* icons/arlo/emblem-nowrite-96.png:
	Some old stuff I guess I never checked in...

	
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-fill.png:
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/active-prelight-bridge.png:
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-active-bridge.png:
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-right-bumper.png:
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-left-bumper.png:
	Making the summary view tabs pre-light better.
	
2000-10-24  Raph Levien  <raph@acm.org>

	* librsvg/rsvg.c: Implemented the "opacity" property for objects
	and groups. This makes rsvg render more SVG files exported from
	Adobe Illustrator 9 correctly and should make Arlo happy.

	* librsvg/opacity.svg: New test file including opacity examples.

2000-10-24  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_update_news_entry_row), (authn_cb_failed),
	(login_button_cb), (generate_login_dialog),
	(nautilus_summary_view_load_uri):

	Adding login changes to the summary view.  Still needs a bit more
	work but looks better.

2000-10-24  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_destroy_deep_helper):
	These two fns now properly handle key == value (won't double free)

2000-10-24  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_xfer_ok):
	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_remove_deep),
	(nautilus_g_hash_table_destroy_deep_helper),
	(nautilus_g_hash_table_destroy_deep_custom),
	(nautilus_g_hash_table_destroy_deep):
	* libnautilus-extensions/nautilus-glib-extensions.h:
	* src/file-manager/fm-directory-view.c: (debuting_uri_data_free):
	Fix embarrassing check-in sloppiness

2000-10-24  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_remove_deep),
	(nautilus_g_hash_table_free_deep_helper),
	(nautilus_g_hash_table_free_deep_custom),
	(nautilus_g_hash_table_free_deep):
	* libnautilus-extensions/nautilus-glib-extensions.h:
	Fixed APIs of new utils to match existing, similar, fns.

	* src/file-manager/fm-directory-view.c: (debuting_uri_data_free),
	(debuting_uri_add_file_callback), (copy_move_done_data_free),
	(pre_copy_move_add_file_callback), (copy_move_done_partition_func),
	(copy_move_done_callback):
	Icons now left selected after copy_move operation.

2000-10-24  Brian Frank  <bfrank@eazel.com>

	* data/static_bookmarks.xml
	Updated bookmarks list to current links

2000-10-24  Darin Adler  <darin@eazel.com>

	Some work towards reducing load_directory calls.

	Also fixed bug 3978 (Many Bonobo warnings/errors on quit).
	
	* libnautilus-extensions/nautilus-directory-async.c:
	(set_up_request_by_file_attributes),
	(update_file_info_in_list_if_needed),
	(dequeue_pending_idle_callback), (request_is_satisfied),
	(get_info_callback), (file_info_start):
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-file-attributes.h:
	* libnautilus-extensions/nautilus-file-private.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_new_from_info), (destroy),
	(nautilus_file_update_info), (nautilus_file_update_name),
	(nautilus_file_compare_by_type),
	(nautilus_file_get_string_attribute), (get_description),
	(update_description_for_link), (nautilus_file_get_type_as_string),
	(nautilus_file_get_mime_type), (nautilus_file_is_mime_type),
	(nautilus_file_check_if_ready):
	* libnautilus-extensions/nautilus-file.h:
	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_actions_get_required_file_attributes),
	(nautilus_mime_get_default_action_type_for_file),
	(nautilus_mime_get_default_application_for_file_internal),
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_applications_for_file),
	(nautilus_mime_get_short_list_components_for_file),
	(nautilus_mime_get_short_list_methods_for_file),
	(nautilus_mime_get_all_applications_for_file),
	(nautilus_mime_get_all_components_for_file),
	(nautilus_mime_set_short_list_applications_for_file),
	(nautilus_mime_set_short_list_components_for_file):
	Get rid of the distinction between slow and default MIME type once
	again. We (Pavel, Maciej, John, and I) decided it's better not to
	have multiple opinions on the MIME type, despite our original idea
	that we needed the slow MIME type for some things, even on remote
	file systems.
	
	* libnautilus-extensions/nautilus-glib-extensions.h:
	Fixed the formatting in this file.
	
	* src/file-manager/fm-directory-view.c: (load_location_callback):
	Only force a reload if we are reloading the same directory. This
	is needed to take advantage of the loading already done for us by
	the framework.
	(load_directory): Take a NautilusDirectory instead of a URI string.
	Also take a boolean parameter to control if we force a reload.
	(finish_loading_uri): Respect the boolean parameter that tells us
	whether to force a reload.
	(filtering_changed_callback): Use the new load_directory.
	
	* src/nautilus-applicable-views.c: (nautilus_navigation_info_new),
	(nautilus_navigation_info_cancel), (nautilus_navigation_info_free):
	Monitor the directory while we are loading the component. We
	already need to load the directory to get the MIME types, so this
	does no additional harm, and it prepares us to consolidate the
	loading done for different reasons.
	
	* src/nautilus-main.c: (main): Use nautilus_setenv instead of
	putenv, since it's more portable.
	
	* src/nautilus-window-manage-views.c: Quick simplification pass on
	state machine. Got rid of the use of varargs and renamed a bunch
	of things.
	
	* src/nautilus-window-manage-views.h:
	* src/nautilus-window-private.h:
	Moved external functions from nautilus-window-manage-views.c to
	all be in nautilus-window-manager-views.h. This is one step in
	reducing the number of clients that need access to private stuff
	in NautilusWindow.
	
	* src/nautilus-window-service-ui.c: (detach_service_ui),
	(nautilus_window_install_service_ui): Detach the service UI on
	"destroy" rather that using set_data_full, because finalize time
	is too late.

	* src/nautilus-view-frame.c: (nautilus_view_frame_destroy):
	Got rid of extra unref that was messing things up here.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(uris_are_equal), (nautilus_mozilla_content_view_load_uri):
	Fix for bug 3908.  Browsing to web documents deeper than the root
	is broken.  I fixed it by backing out my previous broken fix for
	"reloading" a web page.  There is a separate bug for the reload
	issue which ill fix properly later.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Make the require rpm version be 3.0.4 or greater.  Not just 3.0.4.
	
2000-10-24  Andy Hertzfeld  <andy@eazel.com>

	added new certified emblem from Susan
	
	* data/emblems/Makefile.am:
	* data/emblems/certified.png:
	added certified.png
	* icons/Makefile.am:
	* icons/emblem-certified.svg:
	added emblem-certified.svg, removed emblem-certified.gif

2000-10-23  Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(parse_previous_duplicate_name),
	(nautilus_self_check_file_operations):
	Fix 3971 - "duplicate" from context-click menu adds space to
	beginning of the name.
	This was a case of misinterpretting files such as ".bashrc" as
	an extension.
	Added tests that catch this problem and fixed it. 

2000-10-24  Josh Barrow  <josh@eazel.com>

	* nautilus.spec.in:
	Make it require 3.0.4 or *greater*.  I'm using 3.0.5 and it 
	works fine.

2000-10-23  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_category):
	* nautilus-installer/src/installer.c: (strip_categories),
	(start_over_make_category_func), (start_over),
	(jump_to_retry_page), (add_force_packages), (add_force_remove),
	(add_update_package), (toggle_button_toggled),
	(eazel_installer_add_category), (eazel_installer_do_install):

	add <EXCLUSIVE/> tag to categories in package-list.xml to indicate
	that a category can't be selected with any other category (it's
	mutually exclusive with them).  added puppet-strings to the
	bootstrap installer to support that.
	
2000-10-23  Eskil Heyn Olsen  <eskil@eazel.com>

	* user-guide/C/Makefile.am:
	Fixing tinderbox build.
	
2000-10-23  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:
	Some code to test for rpm version. We require 3.0.4. If it fucks
	up, feel free to revert.
	
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	Moved the DEFAULT_RPM_DB_ROOT into -private.h
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Code so you can call the query function directly
	(EAZEL_INSTALL_SLIM/NO_CORBA)
	
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):
	Moved support for rpm < 3.0.4
	
	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/callbacks.c: (begin_install):
	* nautilus-installer/src/installer.c: (insert_info_page),
	(create_window), (check_system), (more_check_system),
	(eazel_installer_initialize):
	If eazel-hacking is installed, offer to remove it.
	
2000-10-23  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/nautilus-view/main.c: (main):
	Add gconf-init
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (save_default_eazel_service_user), (authn_cb_succeeded),
	(am_i_logged_in), (logged_in_callback),
	(nautilus_summary_view_initialize),
	(nautilus_summary_view_destroy):

	Store previously used Eazel Service user for later.  The ammonite
	login dialog makes use of this as the default username.
	

2000-10-23  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):

	Fix a few warnings that show up on older rpmlibs.

2000-10-23  Pavel Cisler  <pavel@eazel.com>

	Last part of fix to 2989 - Disk thrashing on Nautilus startup.
	* libnautilus-extensions/nautilus-trash-directory.c: (add_volume):
	When starting up, don't try to create a Trash up-front, just search
	for existing Trash directories. The first time Nautilus ever runs,
	this will still take the same ammount of time, the next time it
	will use the cached entries.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_can_move_file_to_trash):
	Trash monitor no longer creates Trash directories on startup.
	Create them lazily when trying to move an item to the Trash.

2000-10-23  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/Makefile.am: make it install files for real...

2000-10-23  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 1945, Image viewer component does not display XPMs
	Fixed bug 1964, doesn't load xpm images using the loader framework.
	
	* components/image-viewer/nautilus-image-view.c:
	(load_image_from_stream):
	Fixed some leaks and call close on the loader to fix TIFF and XPM loading.
	
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(nautilus_gdk_pixbuf_load):
	Now it does. Loader must be closed to cause callbacks an non-progressive
	loaders to complete.

	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):
	Fixed a couple of build breaking unitilaized variable warnings.
	
	* components/tree/nautilus-tree-view.c:
	Updated function call to new prototype that was causing build to fail.	

2000-10-23  Mathieu Lacage  <mathieu@eazel.com>

	* components/help/hyperbola-filefmt.c:
	(fmt_help_populate_tree_from_subdir): add lookup 
	for sgml and xml files.

2000-10-23  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_local_xml_package_list):
	* nautilus-installer/src/installer.c: (strip_categories),
	(start_over_make_category_func), (start_over),
	(jump_to_retry_page), (add_force_packages), (add_force_remove),
	(add_update_package), (eazel_installer_add_category),
	(eazel_installer_do_install), (eazel_installer_initialize):
	* nautilus-installer/src/link.sh:
	
	Reduce category description text to 10pt and adjust the layout to
	match Arlo specs.  Change g_message's to LOG_DEBUG just to annoy
	Eskil (actually, so we can turn them on/off easily with --debug).

2000-10-23  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_xfer_ok), (sync_xfer_callback),
	(nautilus_file_operations_copy_move),
	(nautilus_file_operations_move_to_trash),
	(nautilus_file_operations_delete), (do_empty_trash):
	* libnautilus-extensions/nautilus-file-operations.h:
	Added callback for copy_move operation - to support
	selecting icons afterward.

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_remove_deep),
	(nautilus_g_hash_table_free_deep_helper),
	(nautilus_g_hash_table_free_deep_custom),
	(nautilus_g_hash_table_free_deep):
	* libnautilus-extensions/nautilus-glib-extensions.h:
	Added misc hash table utilities

	* src/file-manager/fm-directory-view.c: (debuting_uri_data_free),
	(debuting_uri_add_file_callback), (copy_move_done_data_free),
	(pre_copy_move_add_file_callback), (pre_copy_move),
	(copy_move_done_partition_func), (copy_move_done_callback),
	(fm_directory_view_create_links_for_files),
	(fm_directory_view_duplicate_selection), (new_folder_done),
	(fm_directory_view_new_folder),
	(fm_directory_view_move_copy_items):
	Hooked up to new copy_move callback. There are still problems,
	the icons get unselected by someone after they're selected.

2000-10-23  Eskil Heyn Olsen  <eskil@eazel.com>

	* README:
	Added that we require rpm 3.0.4 if --enable-eazel-service

	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):
	Fix for older rpm's (although installation will probably still
	be borked, should insert #error instead.

	* nautilus.spec.in:
	nautilus-trilobite requires rpm = 3.0.4

2000-10-23  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (create_package):

	Nautilus doesn't always encode "rpm_id=" into "rpm_id%3D", so
	check for both.

2000-10-23  Darin Adler  <darin@eazel.com>

	* Makefile.shared: Fix extra dependency that was causing the xml.h
	files to be generated too often.
	* configure.in: Fix code that detects the gcc options to work even
	with -O on.
	
	* src/nautilus-view-frame.h:
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_initialize_class),
	(view_frame_loaded), (view_frame_failed),
	(nautilus_view_frame_handle_client_destroy),
	(nautilus_view_frame_handle_client_gone),
	(nautilus_view_frame_new), (check_if_view_is_gone),
	(nautilus_view_frame_set_to_component),
	(nautilus_view_frame_get_is_underway):
	Revamp set of signals to be easier to understand. Handle all
	failures uniformly,
	
	* src/nautilus-window-manage-views.h:
	* src/nautilus-window-manage-views.c: (change_selection),
	(nautilus_window_update_for_new_location),
	(nautilus_window_has_really_changed),
	(nautilus_window_set_state_info),
	(nautilus_window_set_sidebar_panels),
	(zoom_level_changed_callback), (get_history_list_callback),
	(change_selection_callback), (change_status_callback),
	(failed_callback), (load_underway_callback),
	(load_complete_callback), (open_location_callback),
	(open_location_in_new_window_callback), (title_changed_callback),
	(nautilus_window_connect_view), (nautilus_window_disconnect_view):
	Make more of the view management private to this file. Use the
	signals by their new names. Disconnect all the signals, not just
	the error-related ones.
	
	* src/nautilus-window.c:
	(nautilus_window_set_content_view_widget): Updated the debugging
	check to do it with the new Bonobo UI calls.

2000-10-23  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form):
	made the summary view not display the news section when there is
	no news to display.
	
2000-10-23  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	Added a comment to the ssl_rename variable.
	Added a function stub for querying the server about packages. Not
	impl yet.
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_transaction_fill_hash),
	(eazel_install_monitor_process_pipe),
	(eazel_install_monitor_err_process_pipe),
	(eazel_install_monitor_subcommand_pipe),
	(eazel_install_do_transaction_all_files_check),
	(eazel_install_clean_name_to_package_hash),
	(eazel_install_start_transaction),
	(eazel_install_check_existing_packages),
	(eazel_install_fetch_dependencies), (dump_one_package),
	(eazel_install_do_file_conflict_check),
	(eazel_install_ensure_deps), (eazel_uninstall_upward_traverse),
	(eazel_uninstall_globber):
	Added comments and clarified some variable names.
	No file dep checking on --force.
	No whatrequires check on uninstall on --force
	Moved the all_files_check call into ensure_deps, so if packages
	are pruned we can rerun ensure_deps.
	No longer check if a provides file is a directory before conflict
	check (not needed because of fix in eazel-install-types).
	Calling g_main_iteration during file conflict checking if
	EAZEL_INSTALL_SLIM is set.
	Clean up some lists and hashtables at the end of a transaction.
	
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_finalize), (eazel_install_class_initialize),
	(eazel_install_initialize), (eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_revert_transaction_from_xmlstring),
	(eazel_install_emit_done):
	All default funcs are NULL if EAZEL_INSTALL_NO_CORBA set.
	Set private->revert to TRUE during revert.
	Some more debug output.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file), (eazel_install_fetch_file),
	(eazel_install_fetch_package), (get_search_url_for_package):
	Don't add the package to downloaded_files list till after we've
	checked the version and name.
	If revert, use &flag=8 otherwise 12.
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Assert that the dbs hashtable is !null.
	
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings),
	(eazel_install_start_transaction_make_rpm_argument_list),
	(eazel_install_monitor_rpm_process_pipe),
	(eazel_install_free_rpm_system),
	(eazel_install_prepare_rpm_system),
	(eazel_install_package_modifies_provides_compare),
	(eazel_install_do_rpm_dependency_check):
	Loads of debug code to grab stderr & stdout output from rpm.
	More comments in the do_rpm_dependency_check func.
	
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new), (categorydata_list_copy), (categorydata_copy),
	(packagedata_list_copy), (packagedata_copy),
	(packagedata_fill_from_rpm_header), (packagedata_destroy):
	Added a boolean flag to packagedata_copy, toggles whether or not
	to deep copy.
	Fix rpm header load to not add directories to the ->provides list
	(using a wonderfull O(n) function, I'll leave it to the reader to
	improve it).
	Uncommented the rpmheaderFree call.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(eazel_install_packagelist_to_xml):
	More debug output (we can never have enough!)
	
	* nautilus-installer/src/Makefile:
	Yes.
	
	* nautilus-installer/src/callbacks.c: (druid_cancel),
	(druid_delete), (begin_install), (druid_finish), (prep_install):
	* nautilus-installer/src/installer.c: (create_what_to_do_page),
	(strip_categories), (start_over_make_category_func), (start_over),
	(jump_to_retry_page), (create_window), (eazel_install_progress),
	(eazel_download_progress), (add_force_packages),
	(add_force_remove), (add_update_package), (get_required_name),
	(get_detailed_errors_foreach), (get_detailed_errors),
	(eazel_install_preflight), (eazel_install_delete_files),
	(install_done), (check_system), (eazel_installer_do_install),
	(eazel_installer_initialize):
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/link.sh:
	* nautilus-installer/src/main.c: (main):
	Now takes a --tmpdir argument
	Puts builddate in window title
	Has a system for creating RepairCases when traversing a tree in
	install_failed signal handler.
	Now handles stuff like "need to updage eog" and then there is no
	update for eog.
	Hopefully also handles circular conflict cases.
	Now has a completely obfuscated call stack...

2000-10-23  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/sgml/chapter-1.sgml:
	applying patch from John Fleck to make it work better
	with the current gnome-db2html behaviour.

2000-10-23  John Sullivan  <sullivan@eazel.com>

	* src/nautilus-window-menus.c: (append_bookmark_to_menu):
	Fixed memory leak I happened to notice.

2000-10-23  J Shane Culpepper  <pepper@eazel.com>

	* nautilus.spec.in:

	Fixing the spec to pick up new image directory.

2000-10-23  John Sullivan  <sullivan@eazel.com>

	Fixed 3568: Bonobo verbs and data leak when menus rebuilt

	Michael Meeks added verb-removing support to Bonobo, which
	I have now deployed in Nautilus.

	* libnautilus-extensions/nautilus-bonobo-extensions.h:
	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	(remove_verbs): New function, walks through the XML nodes
	beneath a specified path and removes each verb it finds.
	(nautilus_bonobo_remove_menu_items_and_verbs): Now calls
	remove_verbs; also changed name from _remove_menu_items
	for clarity.

	* src/file-manager/fm-directory-view.c:
	(reset_bonobo_open_with_menu):
	* src/nautilus-window-menus.c:
	(nautilus_window_remove_bookmarks_menu_items),
	(nautilus_window_remove_go_menu_items): Removed FIXMEs
	and updated for name change.

2000-10-23  John Sullivan  <sullivan@eazel.com>

	* src/nautilus-applicable-views.c:
	(get_nautilus_navigation_result_from_gnome_vfs_result):
	Improved the warning message output to the terminal when 
	get-file-info returns a GnomeVFSResult for which we don't 
	have a nice user error message.

2000-10-23  Mike Fleming  <mfleming@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(trilobite_get_services_address)
	Added small comment to currently unused  function with regards to
	format of gconf paramameter (services-host)

2000-10-22  Martin Baulig  <baulig@suse.de>

	This is Maciej checking in Martin's fix for 3691. Credit to him,
	blame to me.
	
	* components/adapter/nautilus-adapter-embed-strategy.h
	(NautilusAdapterEmbedStrategyClass): Added "activate" and "deactivate"
	signals.
	(nautilus_adapter_embed_strategy_get): Removed ui_container argument.
	(nautilus_adapter_embed_strategy_activate): New function; emits
	the "activate" signal.
	(nautilus_adapter_embed_strategy_deactivate): New function; emits
	the "deactivate" signal.

	* components/adapter/nautilus-adapter-control-embed-strategy.c
	(nautilus_adapter_control_embed_strategy_activate): New static function;
	this is the handler of the "activate" signal.
	(nautilus_adapter_control_embed_strategy_deactivate): New static function;
	this is the handler of the "deactivate" signal.

	* components/adapter/nautilus-adapter-embeddable-embed-strategy.c
	(nautilus_adapter_embeddable_embed_strategy_activate): New static function;
	this is the handler of the "activate" signal.
	(nautilus_adapter_embeddable_embed_strategy_deactivate): New static function;
	this is the handler of the "deactivate" signal.

	* components/adapter/nautilus-adapter.c (nautilus_adapter_activate_callback):
	New static function; connect this to the "activate" signal of the adapter
	control.

2000-10-23  Kjartan Maraas  <kmaraas@gnome.org>

	* src/nautilus-shell-ui.xml.h: Check in a file containing
	the strings to be translated instead of the 0-byte file that's
	there now.
	
2000-10-23  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (service_tab_selected_callback),
	(updates_tab_selected_callback):
	made the updates section of the summary use the new, image-based tabs.
	
	* libnautilus-extensions/nautilus-tabs.c: (draw_all_tabs):
	made it handle the right edge for the single tab case properly.
	
2000-10-22  Andy Hertzfeld  <set EMAIL_ADDRESS environment variable>

	* components/services/summary/
		nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_login_dialog),
	(nautilus_summary_view_load_uri), (service_tab_selected_callback):
	
	added image-based tabs to the summary view.  Also, fixed problem where
	the throbber kept spinning until the login dialog was dismissed by
	making it a non-modal dialog by refraining from calling gnome_run_dialog
	Currently, only the service tabs have been converted but the update
	tab is coming soon.
	
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-tabs.c:
	(nautilus_tabs_initialize_class), (nautilus_tabs_initialize),
	(nautilus_tabs_new), (tab_item_destroy), (tab_item_destroy_cover),
	(nautilus_tabs_destroy), (nautilus_tabs_unload_tab_pieces),
	(load_tab_piece), (nautilus_tabs_load_tab_pieces),
	(nautilus_tabs_hit_test), (measure_height), (recalculate_size),
	(nautilus_tabs_size_request), (draw_tab_piece_aa),
	(draw_pixbuf_tiled_aa), (allocate_cleared_pixbuf),
	(measure_tab_name), (draw_tab_label), (draw_all_tabs),
	(tab_item_find_by_name), (nautilus_tabs_expose),
	(nautilus_tabs_draw), (nautilus_tabs_add_tab),
	(nautilus_tabs_remove_tab), (nautilus_tabs_prelight_tab),
	(nautilus_tabs_select_tab), (nautilus_tabs_press_event),
	(nautilus_tabs_leave_event), (nautilus_tabs_motion_event):
	* libnautilus-extensions/nautilus-tabs.h:
	added a new class for the fancy Arlo tabs in the summary view,
	based on the sidebar tabs.

	* configure.in:
	* components/services/summary/
		nautilus-view/Makefile.am:
	* components/services/summary/
		nautilus-view/icons/.cvsignore:
	* components/services/summary/
		nautilus-view/icons/Makefile.am:
	* components/services/summary/
		nautilus-view/icons/gray_tab_pieces/.cvsignore:
	* components/services/summary/
		nautilus-view/icons/gray_tab_pieces/*.png
	
	added Arlo's new tab images for the summary view
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize), (add_new_button_callback),
	(done_button_callback):
	
	added a done button to the property dialog to make it easier to
	dismiss it.
	
2000-10-22  Mike Fleming  <mfleming@eazel.com>

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_free), (timed_wait_callback):

	Made timed-wait dialog remember the dialog.  Was being triggered
	during a DAV rename w/ debug info on.

2000-10-22  Robert Brady  <rwb197@zepler.org>

	* configure.in: Added en_GB to ALL_LINGUAS.

Sun Oct 22 05:25:46 2000  George Lebl <jirka@5z.com>

	* librsvg/rsvg-ft.c (rsvg_ft_ctx_done): Things allocated with
	  glib functions must be freed with g_free, not free

2000-10-21  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus.spec.in:
	Dep on bonobo>=0.24 and medusa >= 0.2.1

2000-10-21  Gene Z. Ragan  <gzr@eazel.com>

	* THANKS:
	Added syncomm to THANKS file.
	
2000-10-21  Josh Barrow  <josh@eazel.com>

	* AUTHORS:
	* THANKS:
	* src/nautilus-window-menus.c: (help_menu_about_nautilus_callback):
	Added Eli to the about box and moved him from THANKS to AUTHORS, per 
	Maciej.

2000-10-21  Ali Abdin  <aliabdin@aucegypt.edu>

	* components/help/converters/gnome-db2html2/toc-elements.c:
	(toc_sect_end_element): Add in 'break;' at the appropriate areas of
	the code. Should fix some issues. DOH!! This was also needed to fix
	Bug #3863. Thank god for testers.

2000-10-21  Zbigniew Chyla  <cyba@gnome.pl>

	* configure.in: Added pl to ALL_LINGUAS.

2000-10-21  Mathieu Lacage <mathieu@eazel.com>

	* user-guide/C/img/*.png: remove till I can find time to redo all
	the screenshots: people are complaining it kills their bandwith for
	no good reason.

2000-10-21  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/sect-elements.c:
        (sect_sect_end_element): Add in 'break;' at the appropriate areas of
        the code. Should fix some issues. Fixes Bug #3863.

2000-10-21  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (generate_install_form),
	(nautilus_service_install_downloading),
	(nautilus_service_install_installing):

	Remove artificial pauses I was using for testing (oops), and
	change the font size of the overall feedback text to something
	readable in AA.

2000-10-20 John Fleck <jfleck@inkstain.net>

	* user-guide/C/sgml/nautilus.sgml - changed "doctype" to "DOCTYPE"
	in the dtd declaration. This is needed for gnome-db2html2 to
	correctly render the document into html for Mozilla to display

2000-10-20  Robey Pointer  <robey@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_from_packagedata),
	(packagedata_from_corba_packagedatastruct):
	* components/services/install/lib/eazel-install-protocols.c:
	(get_url_for_package):
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_new), (packagedata_copy),
	(packagedata_fill_from_rpm_header), (packagedata_destroy):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (eazel_install_packagedata_to_xml):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (add_padding_to_box), (generate_install_form),
	(show_overall_feedback), (make_new_status),
	(current_progress_bar_complete),
	(nautilus_service_install_downloading),
	(nautilus_service_install_installing),
	(nautilus_service_install_view_update_from_uri):

	Add package "summary" field to store the RPM one-line summary
	field (we want to show it in the installer).

2000-10-20  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_update_icon):
	at Arlo's urging, I removed the emblem scale pinning that was added
	last week, which isn't right if you think of the emblems as part
	of the icons like Arlo does.  I also added an emblem scale factor to
	make the emblems a more reasonable size.
	
	* src/file-manager/fm-list-view.c:
	fixed bug 3900, emblems too large in the list view, by correct
	the LIST_VIEW_MINIMAL_EMBLEM_SIZE constant, which was set too large.
	
2000-10-20  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3548 (modal error dialog is flakey in summary view)

	I made a bunch of small improvements to this file. Most of
	these had been checked in earlier but accidentally clobbered,
	but there are some new ones too.

	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	Removed feedback_text field from details struct. This was used in
	an unnecessary and leak-inducing way before.
	(generate_summary_form): Remove period following exclamation point
	in on-screen text.
	(error_dialog_retry_cb): Removed this function.
	(set_dialog_parent): New helper function to parent a dialog on
	the NautilusSummaryView's window.
	(generate_error_dialog): Removed "Retry" button since it is 
	extremely unlikely to work, thus resulting in constant frustration;
	Removed initialized but unused "reply" variable; removed extra 
	initialization of "dialog" variable; use OK button instead of
	Cancel since there's only one button now; set up error message
	with parameter instead of details field; set text justification
	and line wrap to accommodate longer messages; parent the dialog
	so it doesn't appear in some random place.
	(authn_cb_failed): pass message to generate_error_dialog directly;
	removed unnecessary capital letter in message.
	(generate_login_dialog): remove initialized but unused "reply" variable;
	change "Please Login" to "Please log in"; parent the dialog.
	(nautilus_summary_view_load_uri): collapse a lot of identical code;
	improve error messages; display error message when xml file couldn't
	be parsed (was supposed to before, but wasn't); only generate the
	summary form if xml file was parsed.
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-service-ui.xml.h:
	* src/nautilus-shell-ui.xml.h:

2000-10-21  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/sgml/chapter-1.sgml:
	stupid me: forgot a sect2 in the middle of nowhere...

2000-10-20  Rebecca Schulman  <rebecka@eazel.com>
	Fix for bug 1768, to put a hard limit on
	the number of files for PR2.  We do this 
	by keeping a count of confirmed files
	in directories, and stopping a load once the confirmed 
	file count reaches a certain level.

	* libnautilus-extensions/nautilus-directory-async.c:
	(set_file_unconfirmed), (dequeue_pending_idle_callback),
	(directory_load_one), (directory_load_done),
	(directory_load_callback), (mark_all_files_unconfirmed),
	(nautilus_directory_stop_monitoring_file_list):
	Increment or decrement file count when marking a file confirmed
	or unconfirmed.
	* libnautilus-extensions/nautilus-directory-private.h:
	add file count file
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_add_file), (nautilus_directory_remove_file),
	(nautilus_directory_file_list_length_reached):
	increment and decrement file counts here when a file is added.
	A file is always confirmed when it is initially added, so 
	increment always, but only decrement the count when we are 
	removing a confirmed file.
	* libnautilus-extensions/nautilus-directory.h:
	Add function nautilus_directory_file_list_length_reached
	as public 
	* src/file-manager/fm-directory-view.c:
	(check_for_directory_hard_limit), (done_loading):
	when we finish loading the directory, display the hard limit
	dialog if necesssary, to let the user know we've stopped the directory
	load to prevent nautilus from overloading.

2000-10-20  Darin Adler  <darin@eazel.com>

	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/sample/Makefile.am:
	* components/services/summary/nautilus-view/Makefile.am:
	* libnautilus/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	We need to include the .xml.h files in EXTRA_DIST. My mistake
	turning that off (killed the Tinderbox).
	
	* src/nautilus-window-manage-views.c:
	(position_and_show_window_callback),
	(nautilus_window_end_location_change_callback): Fix small ref
	mistake I might have introduced with my last check-in.

2000-10-20  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	* components/services/summary/nautilus-view/tests/README:
	* components/services/summary/nautilus-view/tests/redirects.xml:
	* components/services/summary/nautilus-view/tests/services.xml:
	* src/nautilus-service-ui.xml.h:

	Added simple test xmls to generate lots of entries in the summary view.

2000-10-20  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_service_entry_row):
	fixed a memory leak in the summary view, where it was allocating a
	structure used in a callback but never releasing it.
	
2000-10-20  Andy Hertzfeld  <andy@eazel.com>

	* components/hardware/icons/Makefile.am:
	* components/hardware/icons/CD_drive.png:
	* components/hardware/nautilus-hardware-view.c:
	(setup_overview_form):
	added a better icon for CD drives from Susan, and used it in the
	hardware view instead of the CD icon it was using.
	
2000-10-20  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3805, Nautilus tries to parse text files on the desktop as XML.
	
	* libnautilus-extensions/nautilus-link.c:
	(local_get_root_property):
	Do a check on the mime type of the file before processing it as XML.
	Also fix a bug where a NULL XMLDoc was being used.

2000-10-20  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 3803, pin image size for downloaded images in summary
	view
	
	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.c: (create_image_widget_from_uri):
	added optional image size pinning to create_image_widget_from_uri
	
	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.h:
	changed parameters to create_image_widget_from_uri
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):
	pinned downloaded images to a maximum size, fixing bug 3803.  Also,
	tweaked button layout a bit.
	
2000-10-20  Darin Adler  <darin@eazel.com>

	* Makefile.am:
	* Makefile.shared:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/sample/Makefile.am:
	* components/services/install/command-line/Makefile.am:
	* components/services/summary/nautilus-view/Makefile.am:
	* libnautilus-extensions/Makefile.am:
	* libnautilus/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	Moved some shared Makefile stuff to a shared include file so we
	don't use "copy and paste technology" in our Makefiles. Fixed the
	rule that builds .xml.h files so it doesn't have to be copied and
	pasted everywhere.
	
	* components/loser/content/nautilus-content-loser-ui.xml.h:
	* components/loser/sidebar/nautilus-sidebar-loser-ui.xml.h:
	* components/mozilla/nautilus-mozilla-ui.xml.h:
	* components/sample/nautilus-sample-content-view-ui.xml.h:
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-shell-ui.xml.h:
	Regenerated the xml.h files with the new Bonobo tool, which keeps
	things in alphabetical order to minimize cvs thrashing.
	
	* components/services/summary/nautilus-view/Makefile.am:
	* components/services/summary/nautilus-view/nautilus-summary-view-ui.xml.h:
	Added localization for the summary view UI.
		
	* src/Makefile.am:
	Added localization for the service UI pieces.
	
	* libnautilus-extensions/nautilus-buffered-widget.c:
	(nautilus_buffered_widget_initialize),
	(connect_to_background_if_needed): Fixed bug where the widget
	would stay connected after the background was destroyed. John saw
	it once, but I'm not sure how to reproduce it.
	
	* nautilus.spec.in: Fix some bad spelling and strange wording.
	
	* src/nautilus-applicable-views.h:
	* src/nautilus-applicable-views.c: (got_file_info_callback),
	(nautilus_navigation_info_new), (nautilus_navigation_info_cancel),
	(nautilus_navigation_info_free),
	(nautilus_navigation_info_get_location),
	(nautilus_navigation_info_get_initial_content_id):
	Removed lots of cruft from this class so it's private and can be
	changed around a bit.
	
	* src/nautilus-window-manage-views.c:
	(nautilus_window_update_internals): Use the new
	nautilus_navigation_info_get_location.
	(handle_unreadable_location): Get rid of unneeded file == NULL
	check.
	(load_view_for_new_location): Use the new
	nautilus_navigation_info_get_initial_content_id.
	(set_view_location_and_selection): Use the new
	nautilus_navigation_info_get_location.
	(nautilus_window_end_location_change_callback): Use the new
	nautilus_navigation_info_get_location.
	(nautilus_window_begin_location_change): Remove some unnecessary
	code.

2000-10-20  Mathieu Lacage  <mathieu@eazel.com>

	More ids in sects.
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:

2000-10-20  Mathieu Lacage  <mathieu@eazel.com>

	Add sect ids and big caps entities
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/install.sgml:
	* user-guide/C/sgml/intro.sgml:
	* user-guide/C/sgml/manual.sgml:

2000-10-20  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3902 (Some search results do not have file
	info displayed)

	* libnautilus-extensions/nautilus-directory-async.c:
	(async_job_wake_up): Remove directory from hash table
	when it's awoken; clear already_waking_up boolean at
	end of routine.

2000-10-20  Ramiro Estrugo  <ramiro@eazel.com>

	* src/nautilus-sidebar-title.c: (update_font):
	Make the code that looks for largest font that fits a sidebar
	title work even if we dont find the exact font we look for.
	Fixes bug 2812.
	
2000-10-20  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	* librsvg/rsvg.c: (rsvg_text_handler_characters):
	Make sure the font used for text is svg icons actually exists.
	Fix (rather a worksround) for bug 3774.  We will have a better fix
	later (bug 3904).
	
2000-10-22  Andy Hertzfeld  <andy@eazel.com>

	made the images show up again in the summary view by adding
	image fetching from the service via http.
	
	* components/services/nautilus-dependent-shared/
	shared-service-widgets.c: (create_image_widget_from_pixbuf),
	(create_image_widget), (create_image_widget_from_uri):
	restructured code a bit so I could at fetching from a uri instead of
	a local icon.  Added optimization so a local icon could be used
	at the service's discretion.
	
	* components/services/nautilus-dependent-shared/
	  shared-service-widgets.h:
	added create_image_widget_from_uri
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):
	made it fetch the icons from the service
	
2000-10-20  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/rsvg.c: (rsvg_text_handler_characters),
	(rsvg_start_text):
	Quiet down the debug spewage.
	
2000-10-20  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus.spec.in:
	Forgot to add the font metrics to the rpm spec file.
	
2000-10-20  Ramiro Estrugo  <ramiro@eazel.com>

	* data/fonts/urw/Makefile.am:
	* data/fonts/urw/fonts.dir:
	* data/fonts/urw/n019003l.afm:
	* data/fonts/urw/n019004l.afm:
	* data/fonts/urw/n019023l.afm:
	* data/fonts/urw/n019024l.afm:
	Added missing font metrics.
	Also update to latest urw fonts.

2000-10-20  Maciej Stachowiak  <mjs@eazel.com>

	* components/adapter/bonobo-stream-vfs.h,
	components/adapter/bonobo-stream-vfs.c: (vfs_write), (vfs_read),
	(vfs_seek), (vfs_truncate), (vfs_copy_to), (vfs_close), (vfs_eos),
	(vfs_length), (bonobo_stream_vfs_class_init),
	(bonobo_stream_vfs_init), (bonobo_stream_vfs_get_type),
	(Bonobo_Stream_vfs__create), (bonobo_stream_vfs_new_internal),
	(bonobo_stream_vfs_open), (bonobo_stream_vfs_new): Moved here from
	libnautilus-extensions; bunches of cleanup to match nautilus style
	better.

	* components/adapter/Makefile.am: Added above two files to build.

	* components/adapter/nautilus-adapter-progressive-load-strategy.c:
	Up the load chunk.
	
	* components/adapter/nautilus-adapter-stream-load-strategy.c:
	Include "bonobo-stream-vfs.h" not
	<libnautilus-extensions-stream-vfs.h>

	* libnautilus-extensions/bonobo-stream-vfs.c,
	libnautilus-extensions/bonobo-stream-vfs.h: Removed from here.
	
	* libnautilus-extensions/Makefile.am: Removed from build.

2000-10-20  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):

	Added vseparators, fixed button sizes, added new buttons to the
	updates section.  I'm almost getting good at this stuff !

2000-10-20  Robey Pointer  <robey@eazel.com>

	* icons/Makefile.am:
	* icons/services-rpm-72.png:
	* libnautilus-extensions/nautilus-icon-factory.c:

	Add new eazel-install: icon for Arlo and make the icon factory use
	it instead of the gnome-pack-rpm one.

2000-10-20  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2948, list view does not prelight under cursor when
	dragging files.
	
	* libnautilus-extensions/nautilus-list.c:
	* libnautilus-extensions/nautilus-list.h:
	(nautilus_list_initialize), (draw_cell_pixmap), (draw_cell),
	(nautilus_list_prelight_if_necessary),

	(nautilus_list_set_drag_prelight_row):
	New function to set drag prelight row based on mouse position.
	
	* src/file-manager/fm-list-view.c: (fm_list_handle_dragged_items):
	
	* components/image-viewer/nautilus-image-view.c:
	(view_size_allocate_cb):
	Removed some old debug code.
	
2000-10-19  Robey Pointer  <robey@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install_stop), (eazel_install_get_epv):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_install_packages),
	(eazel_install_emit_install_progress_default),
	(eazel_install_emit_download_progress_default),
	(eazel_install_emit_preflight_check_default),
	(eazel_install_emit_delete_files_default):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_xfer_callback), (gnome_vfs_fetch_remote_file):

	Make the install lib check for corba events while doing a download
	(which might take a while) so that it can receive a "stop"
	message.  Ref itself while doing the install to avoid a mess.  Try
	to catch some corba exceptions and abort on them.  Set a flag on
	the "stop" message and cancel the gnome-vfs operation.  Make the
	download_progress callback be a two-way call to trick corba into
	checking for potential incoming "stop" calls.  These sum up to a
	rough hack which will be cleaned out when the installer is broken
	up into more stateful components post-PR2.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_view_destroy),
	(current_progress_bar_complete),
	(nautilus_service_install_downloading),
	(nautilus_service_install_installing),
	(nautilus_service_need_password),
	(nautilus_service_install_view_update_from_uri),
	(service_install_stop_loading_callback):

	Send "stop" message to the install view when the user hits the
	"stop" button, and also when the view is about to be destroyed.
	Cleanly handle the "stop" button by treating it like an abort.
	Use better-named /tmp directory, for security reasons.
	
2000-10-20  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Update for latest freeype2 rpm changes.
	
2000-10-20  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):

	Adding "infinite" row capabilities for generated tables.  Fixed several
	more layout issues.  The buttons are completely screwed up now from a
	ui perspective.  Trying to fix that now.

2000-10-19  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/lib/eazel-summary-shared.c:
	(eazel_news_data_new), (update_news_data_new),
	(parse_a_eazel_news_item), (parse_a_update_news_item):
	* components/services/summary/lib/eazel-summary-shared.h:
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_update_news_entry_row):

	New xml parsing information.  Fixed button labels and sizes.  A few
	minor ui tweaks.

2000-10-20  Mathieu Lacage  <mathieu@eazel.com>

	Add screenshot images.
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/install.sgml:

2000-10-19  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/
	nautilus-summary-view.c: (authn_cb_failed), (logout_button_cb), 
	(logged_in_callback), (logged_out_callback),
	(bonobo_logout_callback), (bonobo_preferences_callback),
	(update_menu_items), (merge_bonobo_menu_items):
	
	fixed the login menu command, and added support for the preferences
	and logout command.  Made it properly show and hide the appropriate
	commands according to the logged_in state
	
	* components/services/summary/nautilus-view/
	nautilus-summary-view-ui.xml:
	added menu items for preferences and logout
	
	* src/nautilus-service-ui.xml:
	added tooltips for service menu commands

2000-10-19  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/Makefile.am: modify to install sgml 
	instead of html
	* user-guide/C/img/.cvsignore: add 
	* user-guide/C/sgml/.cvsignore: add

	sgml files.
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/install.sgml:
	* user-guide/C/sgml/intro.sgml:
	* user-guide/C/sgml/manual.sgml:
	* user-guide/C/sgml/model.sgml:

	screenshots....
	* user-guide/C/img/*.png

2000-10-19  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_error_dialog), (generate_login_dialog),
	(nautilus_summary_view_load_uri):

	Fixing dialogs and error control cases.  Works a little better now
	but still doesn't destroy the error dialogs like its supposed to do.

2000-10-19  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (logged_in_callback):

	Fixing login callback so that view does not crash.

2000-10-19  Darin Adler  <darin@eazel.com>

	Check in the xml.h files. It would be better not to have these
	checked in, but it helps the translators if they are. If we
	come up with something better later, we can get rid of them.
	For now, if you exit a ui.xml file, then you should also do
	a build and check in the generated xml.h file.

	* components/loser/content/nautilus-content-loser-ui.xml.h:
	* components/loser/sidebar/nautilus-sidebar-loser-ui.xml.h:
	* components/mozilla/nautilus-mozilla-ui.xml.h:
	* components/sample/nautilus-sample-content-view-ui.xml.h:
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-shell-ui.xml.h:

2000-10-19  Darin Adler  <darin@eazel.com>

	Do some routine housekeeping that will help make the future
	switchover to libxml2 easier.
	
	* components/help/converters/gnome-db2html2/gdb3html.h:
	* components/help/hyperbola-nav-index.c:
	* components/help/hyperbola-nav-search.c:
	* libnautilus-extensions/nautilus-directory-async.c:
	* libnautilus-extensions/nautilus-directory-metafile.c:
	* libnautilus-extensions/nautilus-directory-metafile.h:
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-file.c:
	* libnautilus-extensions/nautilus-icon-factory.c:
	* libnautilus-extensions/nautilus-link-set.c:
	* libnautilus-extensions/nautilus-link.c:
	* libnautilus-extensions/nautilus-theme.c:
	* libnautilus-extensions/nautilus-volume-monitor.c:
	* libnautilus-extensions/nautilus-xml-extensions.h:
	* librsvg/rsvg.c:
	* src/nautilus-bookmark-list.c:
	* src/nautilus-bookmark-parsing.c:
	* src/nautilus-bookmark-parsing.h:
	* src/nautilus-link-set-window.c:
	* src/nautilus-property-browser.c:
	* src/nautilus-sidebar.c:
	* src/nautilus-theme-selector.c:
	* src/nautilus-window-menus.c:
	Use the <gnome-xml/> prefix on all includes of gnome-xml headers.
	This is allowed with the version of libxml1 we use now, and
	required for libxml2. Note that we now require the newer libxml1
	version that allows this, because Bonobo requires it.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (parse_category), (parse_shared),
	(parse_memory_transaction_file), (parse_local_xml_package_list),
	(generate_xml_package_list), (osd_parse_dependency),
	(osd_parse_implementation), (osd_parse_softpkg),
	(osd_parse_shared):
	* components/services/summary/lib/eazel-summary-shared.c:
	(build_services_glist_from_xml), (build_eazel_news_glist_from_xml),
	(build_update_news_glist_from_xml), (parse_summary_xml_file):
	* components/services/trilobite/libtrilobite/helixcode-utils.c:
	(xml_get_value):
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(trilobite_redirect_parse_xml):
	* libnautilus-extensions/nautilus-xml-extensions.c:
	(nautilus_xml_get_children):
	Use xmlChildrenNode instead of childs, as recommended by the
	libxml maintainer for libxml1/libxml2 compatibility.
	
	* src/nautilus-main.c: (main): Use the LIBXML_TEST_VERSION macro
	as recommended by the libxml maintainer for libxml1/libxml2
	compatibility.
	
	* components/music/nautilus-music-view.c:
	Added a lot of FIXMEs. Some other rudimentary cleanup.

2000-10-19  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c:
	(icon_is_positioned), (pending_icon_to_reveal_destroy_callback),
	(get_pending_icon_to_reveal), (set_pending_icon_to_reveal),
	(reveal_icon), (process_pending_icon_to_reveal),
	(lay_down_icons_tblr), (relayout):
	* libnautilus-extensions/nautilus-icon-private.h:
	* src/file-manager/fm-directory-view.c: (start_renaming_item),
	(reveal_newly_added_folder), (new_folder_done),
	(fm_directory_view_new_folder), (fm_directory_view_set_selection),
	(fm_directory_view_select_file):

	Newly added folders are now revealed (bug 2208). Other cases
	(e.g. duplicate) still remain. They will require adding new hooks
	to nautilus-file-operations.

2000-10-19  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (nautilus_summary_view_load_uri),
	(bonobo_login_callback):

	Fixing login menu callback and adding logic to only display login
	dialog when no user is logged in.

2000-10-19  John Sullivan  <sullivan@eazel.com>

	Fixed some cases where the error message for why a
	location couldn't be loaded was misleading or too generic.
	I ran into some of these while fiddling with the proxy 
	settings to try out services, so I'm sure other users
	will too.

	* libnautilus-extensions/nautilus-directory-async.c:
	(file_info_start): When you can't make a vfs_uri, use
	error GNOME_VFS_ERROR_INVALID_URI. It had been leaving
	this defaulting to GNOME_VFS_OK, which caused locations
	like "bogus:foo" to have a mysterious error message.
	
	* src/nautilus-applicable-views.c:
	(get_nautilus_navigation_result_from_gnome_vfs_result):
	* src/nautilus-applicable-views.h:
	* src/nautilus-window-manage-views.c:
	(nautilus_window_end_location_change_callback): Added
	separate messages for HOST_NOT_FOUND and HOST_HAS_NO_ADDRESS.
	You can get the former by specifying a bogus host name in the
	HTTP Proxy settings, and the latter by not specifying a
	host name at all in the HTTP Proxy settings.

2000-10-19  John Sullivan  <sullivan@eazel.com>

	* components/help/help-contents.oafinfo:
	Changed name of sidebar panel from "Help Contents" to "Help"
	since there is only one Help sidebar panel, and the longer
	title made it take too much space and stand out while adding
	no value.

2000-10-19  John Sullivan  <sullivan@eazel.com>

	Fixed bugzilla bug 3648 (not clear what "xxx" under
	folders means)

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_string_attribute_with_default):
	Change some of the default strings; use "..." when
	we were using "--" (for info not yet obtained); use
	"? items" or "? bytes" when we were using "xxx" 
	(for info not readable).
	(nautilus_file_get_top_left_text): Use "..." when
	we were using "--"

2000-10-19  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (nautilus_summary_view_destroy), (merge_bonobo_menu_items):
	unmerge the summary component's menu items properly by keeping a
	reference to the ui component and unhooking it in the summary view's
	destroy method.
	
2000-10-19  Andy Hertzfeld  <andy@eazel.com>

	first pass at making the summary view merge its menu commands onto
	the services menu. This isn't finished yet.
	
	* components/services/summary/nautilus-view/Makefile.am:
	added a ui xml file for the summary menu commands
	* components/services/summary/nautilus-view/nautilus-summary-view-ui.xml:
	defined the summary view menu items
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (nautilus_summary_view_initialize), (bonobo_register_callback),
	(bonobo_login_callback), (detach_ui), (merge_bonobo_menu_items):
	merge the menu items when the view is activated, unmerge when destroyed
	
	* src/nautilus-window-service-ui.c: (goto_software_catalog):
	made the software catalog command use the real url.
	
2000-10-19  Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_uri_get_basename):
	Ooops, fix a stupid mistake in my last checkin that broke file 
	change notification for fancy names.

2000-10-19  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus.spec.in:
	Removed eog dep and added xpdf for nautilus-extras.

2000-10-19  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/sample/Makefile.am:
	* libnautilus/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	Fun with Build chapter IX.

2000-10-18  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize), (set_album_cover),
	(image_button_callback), (nautilus_music_view_set_album_image):
	completed bug 2261, setting images for album covers, by making
	the set album cover button the proper size, and leaving it visible
	even when there's a cover so you can change it after setting it.
	
2000-10-18  Eskil Heyn Olsen  <eskil@eazel.com>

	* src/file-manager/Makefile.am:
	Fun with Build.
	I'm feeble and only very slowly finding
	all the -ui.xml.h thing I need to fix.

2000-10-18  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/sample/Makefile.am:
	* libnautilus/Makefile.am:
	Still trying to fix the bloody build...

2000-10-18  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/sample/Makefile.am:
	* po/POTFILES.in:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	Still fixing the tinderbox build.

2000-10-18  Ramiro Estrugo  <ramiro@eazel.com>

	* README:
	Update for new Mozilla M18 rpms.
	
2000-10-18  Rebecca Schulman  <rebecka@eazel.com>

	Fixed problems in making the new bonobo translation 
	that confused the headers.  Also added .cvsignore
	entries for the new generated xml files.
	
	* components/loser/content/.cvsignore:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/.cvsignore:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/.cvsignore:
	* components/mozilla/Makefile.am:
	* components/sample/.cvsignore:
	* components/sample/Makefile.am:
	* icons/.cvsignore:
	* libnautilus/.cvsignore:
	* libnautilus/Makefile.am:
	* src/.cvsignore:
	* src/Makefile.am:
	* src/file-manager/.cvsignore:
	* src/file-manager/Makefile.am:

2000-10-18  Eskil Heyn Olsen  <eskil@eazel.com>

	* po/POTFILES.in:
	Removing more .xml.h files to make tinderbox build again.

2000-10-18  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3705, Bookmark icons do not appear in the menu item

	This was caused by a strange precedence issue in the setting of
	UI component pixbuf data.  If a menu item has alread been created,
	setting the pixbuf data will have no effect.  Either the verb for 
	the item has to be set with the data or the item has to have
	its XML contructed  with the pixbuf type and data included in it
	at creation time. I have opted for the latter choice.
	
	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	* libnautilus-extensions/nautilus-bonobo-extensions.h:	
	(nautilus_bonobo_add_menu_item):
	Added setting of bitmap data if it is present as a
	valid argument passed into the function.
		
	* src/file-manager/fm-directory-view.c:
	(add_open_with_app_bonobo_menu_item),
	(add_open_with_viewer_bonobo_menu_item):
	Call nautilus_bonobo_add_menu_item
	
	* src/nautilus-window-menus.c: (append_bookmark_to_menu):
	Call nautilus_bonobo_add_menu_item
	
	* src/nautilus-window.c: (nautilus_window_filter),
	(nautilus_window_realize), (view_menu_choose_view_callback),
	(nautilus_window_show):
	Work in progress to handle focus issues when performing
	click drag operations in background windows.
	
	* libnautilus-extensions/nautilus-gdk-extensions.c:
	* libnautilus-extensions/nautilus-gdk-extensions.h:
	(nautilus_gdk_window_set_wm_hints_input):
	New function set input files of WM_HINTS. This 
	will be used later to handle click drag in background
	windows.

2000-10-18  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(uris_are_equal), (nautilus_mozilla_content_view_load_uri):
	Add support for reloading pages while ignoring the mozilla cache.
	Fixes bug 2780.
	
2000-10-18  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_fetch_uri):
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(check_gconf_init):

	Fix new incompatability with gnome-vfs (EOF is now an "error").
	
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_name_for_regular_file):

	Begin the slightly distateful process of adding special-case uri
	scheme icons to the left panel: make the install view use the RPM
	package icon.  Eventually we need to generalize the association of
	icons with uri schemes.

2000-10-18  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3839 (want Nautilus User Manual menu item)
	Note that this menu item does not actually work, due
	to bug 3876.

	* src/nautilus-shell-ui.xml:
	Add menu item for bringing up Nautilus User Manual.
	* src/nautilus-window-menus.c:
	(help_menu_nautilus_manual_callback),
	(nautilus_window_initialize_menus): Add verb
	and callback for Nautilus User Manual menu item.

2000-10-18  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:
	If no bonobo-ui-extract, AC_MSG_ERROR rather then cryptic failure
	during compile.
	
	* libnautilus/Makefile.am:
	Removed some evil blankspace

	* po/POTFILES.in
	Had to remove nautitlus-mozilla-ui.xml.h, since it's a conditional
	build, and eg. is not built on tinderbox.eazel.com. Better fix
	will have to come later, need new rpms' in softcat.
	
2000-10-18  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row),
	(authn_cb_succeeded), (authn_cb_failed), (login_button_cb),
	(generate_error_dialog), (generate_login_dialog),
	(widget_set_nautilus_background_color),
	(nautilus_summary_view_initialize),
	(nautilus_summary_view_load_uri):

	New summary view ui.  Still missing a few fetures but works ok now.

2000-10-18  Mathieu Lacage  <mathieu@eazel.com>

	disable bug-buddy for nautilus.
	* src/nautilus-main.c: (main):

2000-10-19  Kjartan Maraas  <kmaraas@gnome.org>

	* */Makefile.am: Feeble attempt to hook up generation
	of .h files from the *-ui.xml files to get them included
	in the translations. This will need to be done in a better
	way I guess.
	* configure.in: Added a check for bonobo-ui-extract.
	
2000-10-18  Pavel Cisler  <pavel@eazel.com>

	* components/tree/nautilus-tree-view.c:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_notify_files_moved),
	(nautilus_directory_schedule_metadata_copy),
	(nautilus_directory_schedule_metadata_move),
	(nautilus_directory_schedule_metadata_remove):
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_uri_get_basename):
	* libnautilus-extensions/nautilus-file-utilities.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_internal):
	* src/nautilus-theme-selector.c: (add_theme_to_icons):
	Clean up calls to gnome_vfs_extract_short_name, remove explicit
	unescaping because gnome_vfs_extract_short_name now does it.
	Eliminate some copy-paste technology, creating a new call
	nautilus_uri_get_basename.

2000-10-18  Robey Pointer  <robey@eazel.com>

	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (user_logged_in), (generate_change_password_form):
	* components/services/login/nautilus-view/nautilus-change-password-
	view.oafinfo:

	Fill in the username automatically if you're already logged in.
	Make the prompts more i18n'able.  Change title from "Log in" to
	"Change password".  Fix oafinfo typo that caused the change-pw
	view to never get displayed.
	
2000-10-18  Darin Adler  <darin@eazel.com>

	Some Music View fixes. Andy asked me to work on this.
	
	* components/music/main.c: (main): Make warnings drop into the
	debugger.
	
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_destroy): Change to use a NautilusFile object
	instead of using a uri string.
	(set_album_cover): Use the file object.
	(metadata_callback): Get rid of the unref that was causing a lot
	of trouble.
	(nautilus_music_view_update): Get the uri from the file object
	instead of vice versa.
	(detach_file): Cancel the call when releasing the file.
	(nautilus_music_view_load_uri): Release the old file and get a new
	one when the URI changes.

2000-10-17  Maciej Stachowiak  <mjs@eazel.com>

	Fixed bugzilla.eazel.com bugs 2222, 3177, 3468, 3650, 3788
	(some vestiges of wait_until_ready remain in the farther reaches
	of the UI).
	
	* libnautilus-extensions/nautilus-mime-actions.h,
	libnautilus-extensions/nautilus-mime-actions.c
	(nautilus_mime_actions_check_if_required_attributes_ready,
	nautilus_mime_actions_get_required_file_attributes,
	nautilus_mime_actions_wait_for_required_file_attributes): New
	functions to help with monitoring or waiting for required
	attributes for the nautilus mime API.
	(nautilus_mime_get_default_action_type_for_file,
	nautilus_mime_get_default_action_for_file,
	nautilus_mime_get_default_application_for_file_internal,
	nautilus_mime_get_default_application_for_file,
	nautilus_mime_is_default_application_for_file_user_chosen,
	nautilus_mime_get_default_component_for_file_internal,
	nautilus_mime_get_default_component_for_file,
	nautilus_mime_is_default_component_for_file_user_chosen,
	nautilus_mime_get_short_list_applications_for_file,
	nautilus_mime_get_short_list_components_for_file,
	nautilus_mime_get_short_list_methods_for_file,
	nautilus_mime_get_all_applications_for_file,
	nautilus_mime_has_any_applications_for_file,
	nautilus_mime_get_all_components_for_file,
	nautilus_mime_has_any_components_for_file,
	nautilus_mime_set_default_action_type_for_file,
	nautilus_mime_set_default_application_for_file,
	nautilus_mime_set_default_component_for_file,
	nautilus_mime_set_short_list_applications_for_file,
	nautilus_mime_set_short_list_components_for_file,
	nautilus_mime_add_application_to_short_list_for_file,
	nautilus_mime_remove_application_from_short_list_for_file,
	nautilus_mime_add_component_to_short_list_for_file,
	nautilus_mime_remove_component_from_short_list_for_file,
	nautilus_mime_extend_all_applications_for_file,
	nautilus_mime_remove_from_all_applications_for_file,
	mime_type_get_supertype): Don't `nautilus_file_wait_until_ready'
	for the required attributes; instead assert (Well, return_if_fail)
	that they are available using
	`nautilus_file_check_if_ready'. Also, use
	`nautilus_file_get_uri_scheme' where possible.

	* libnautilus-extensions/nautilus-directory-async.c
	(mime_list_callback): Correct some coding mistakes.

	* libnautilus-extensions/nautilus-wait-until-ready.h,
	libnautilus-extensions/nautilus-directory.c: Remove
	`nautilus_directory_wait_until_ready'.

	* libnautilus-extensions/nautilus-file.h,
	libnautilus-extensions/nautilus-file.c
	(nautilus_file_get_uri_scheme): new convenience function.
	
	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list, is_application_default_for_file,
	is_component_default_for_file,
	is_component_in_short_list_for_file,
	is_application_in_short_list_for_file,
	program_file_pair_is_default_for_file,
	program_file_pair_is_in_short_list_for_file,
	add_to_short_list_for_file, remove_from_short_list_for_file,
	remove_default_for_item, set_default_for_item): wait_until_ready
	for required file attributes.

	* libnautilus-extensions/nautilus-program-choosing.c:
	(any_programs_available_for_file): wait_until_ready for required
	file attributes.

	* src/file-manager/fm-directory-view.c: (switch_location_and_view,
	create_open_with_gtk_menu, reset_bonobo_open_with_menu,
	activate_callback): Wait for the right file attributes.

	* src/nautilus-applicable-views.c: (got_file_info_callback),
	(nautilus_navigation_info_new): Wait for the right file
	attributes. (no wait_until_ready).
	
	* src/nautilus-sidebar.c: (nautilus_sidebar_destroy,
	nautilus_sidebar_update_buttons, nautilus_sidebar_update_all),
	nautilus_sidebar_set_uri): Monitor the file the sidebar is
	displaying, and update when it's attributes change.
	
	* src/nautilus-window-manage-views.c
	(nautilus_window_set_content_view): Wait for the right file
	attributes. (no wait_until_ready).

	* src/nautilus-window.c: (nautilus_window_destroy,
	view_menu_choose_view_callback, view_menu_vfs_method_callback,
	nautilus_window_real_load_content_view_menu,
	nautilus_window_load_content_view_menu): Wait for the right
	attributes. (no wait_until_ready in this chain).
	
	* test/test-nautilus-mime-actions-set.c (main): Wait for the right attributes.
	* test/test-nautilus-mime-actions.c (main): Wait for the right attributes.

2000-10-18  Darin Adler  <darin@eazel.com>

	* components/notes/nautilus-notes.c: (make_notes_view):
	* src/nautilus-location-bar.c: (nautilus_location_bar_new):
	* src/nautilus-simple-search-bar.c:
	(nautilus_simple_search_bar_new):
	Use calls by new names.
	
	* libnautilus-extensions/nautilus-undo-signal-handlers.c:
	(editable_key_press_event), (nautilus_undo_editable_set_undo_key):
	Disabled the undo-key part of undo also. The old code was actually
	harmless because it got the name of the signal wrong, but it's
	better to have it disabled.
	* src/nautilus-shell-ui.xml: Added a comment that points out the
	2nd place where undo has been disabled.
	
	* libnautilus/nautilus-clipboard.h:
	* libnautilus/nautilus-clipboard.c: (cut_callback),
	(copy_callback), (paste_callback), (clear_callback),
	(set_paste_sensitive_if_clipboard_contains_data),
	(focus_changed_callback), (target_destroy_callback),
	(nautilus_clipboard_set_up_editable), (first_focus_callback),
	(control_destroyed_callback),
	(nautilus_clipboard_set_up_editable_in_control),
	(disconnect_set_up_in_control_handlers):
	Some minor cleanup of the clipboard code. Includes bug fixes for
	items that are already in focus when the clipboard is hooked up
	(should never happen), and a fix for code that was using
	gtk_signal_disconnect on something that was connected with
	gtk_signal_connect_while_alive (doesn't work). Also got rid of
	misguided code that was copying a Bonobo_UIContainer with memcpy
	(since Bonobo_UIContainer is just a pointer).
	
	* src/Makefile.am:
	* src/nautilus-window-private.h:
	Changed source file name from nautilus-service-menu to
	nautilus-service-ui, since it does a toolbar item, not just a
	menu.
	
	* src/nautilus-window-service-ui.c:
	* src/nautilus-window-service-ui.h:
	A second cut at the service UI code. It no longer leaks a UI
	component.

	* src/nautilus-window.c: (nautilus_window_constructed),
	(nautilus_window_get_ui_container): Use our own pointer to the UI
	container instead of asking the shell UI for its container.

2000-10-18  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3862 (Icon view reversed after looking at list view)
	Fixed bug 916 (workaround for Bonobo radio item bug)
	Also fixed bug where the "tighter layout" and "reversed order"
	items in the context menu were doing nothing at all.

	* src/file-manager/fm-icon-view.c: 
	Removed "updating_toggle_menu_item" from Details struct.
	(set_tighter_layout): New helper function, handles the code
	common to the Bonobo and GTK menu callbacks.
	(gtk_tighter_layout_callback), (gtk_sort_reversed_callback),
	New functions used for GTK context menu. Will go away when 
	we use Bonobo for context menus.
	(tighter_layout_state_changed_callback),
	(sort_reversed_state_changed_callback): Use passed state value,
	including checking for empty state (empty state happens when
	component is removed from container). This lets us eliminate the
	checks for "updating_toggle_item".	
	(handle_radio_item): Removed check for updating_toggle_menu_item.
	This already worked correctly without this check.
	(insert_one_context_menu_item),	(append_one_context_menu_item),
	(append_one_toggle_context_menu_item): Tweaked these to pass in
	an initial toggle state for toggle menu items, to avoid setting
	the toggle state after the callback has been attached. All this
	code will be removed when we switch to Bonobo for context menus.
	(fm_icon_view_create_selection_context_menu_items),
	(fm_icon_view_create_background_context_menu_items),
	(update_layout_menus):

2000-10-18  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-preferences-item.c:
	(preferences_item_create_font_family):
	Remove the fixed font from the list of available fonts.  Its a bad
	one to use because it crashes the SideBar sometimes.  The problem
	is that the fixed font doesnt support the "find the largest
	fitting font" game that the SideBar plays for long strings.

	Its kinda lame to fix the bug by yanking the font, but we have
	many font improvements planned for after PR2 which will render
	this issue irrelevant.

	Fixes bug 2256.
	
2000-10-18  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/rsvg-ft.c: (rsvg_ft_measure_or_render_string),
	(rsvg_ft_render_string), (rsvg_ft_measure_string):
	* librsvg/rsvg-ft.h:
	Add new function to only measure a string without doing all the
	rendering work.
	
	* libnautilus-extensions/nautilus-scalable-font.c:
	(nautilus_scalable_font_measure_text):
	Use the new rsvg_ft string measuring api.

	Fixes bug 2544.
	
2000-10-18  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-font-factory.c:
	(font_hash_node_lookup_with_insertion),
	(nautilus_font_factory_get_fallback_font):
	* libnautilus-extensions/nautilus-gdk-extensions.c:
	(nautilus_get_largest_fitting_font), (nautilus_gdk_font_get_bold):
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_widget_set_font_by_name):
	* libnautilus-extensions/nautilus-icon-factory.c: (embed_text):
	* src/nautilus-zoom-control.c: (draw_number):
	Use gdk_fontset_load() instead of gdk_font_load() to make i18n
	work better.  Also marked some hard-coded fonts fot localization.
	There is still an open bug on writing useful comments about these
	for the localizers.  Fixes bugs 3143 and 3144.

	Thanks to Yukihiro Nakai <ynakai@redhat.com> for pointing these
	problems out and providing patches to fix them.
	
	* src/nautilus-profiler.c: (window_print_button_callback),
	(window_save_button_callback), (dump_dialog_new),
	(dump_dialog_show):
	Same as above plus mark some strings for localization and add
	assertions to currently unimplemented functions.
	
2000-10-18  Maciej Stachowiak  <mjs@eazel.com>

	* ChangeLog: rolled over to ChangeLog-20001018.

