2000-10-25  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (nautilus_summary_view_load_uri),
	(merge_bonobo_menu_items):
	* src/Makefile.am:
	* src/nautilus-window-service-ui.c: (goto_online_storage),
	(goto_software_catalog):

	Fixing the services menu items to go to correct locations.

2000-10-25  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-query.c:
	Fixed a include problem.
	* components/services/install/lib/eazel-install-rpm-glue.h:
	Added /me to authors

2000-10-25  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_category):
	* nautilus-installer/src/installer.c:
	(eazel_installer_add_category):

	Add <DEFAULT/> option to the package list XML file, and make all
	default choices be pre-clicked when the user gets to the selection
	page.

2000-10-25  Darin Adler  <darin@eazel.com>

	* src/nautilus-applicable-views.c: (nautilus_navigation_info_new),
	(nautilus_navigation_info_free),
	(nautilus_navigation_info_get_location): Changed to store the
	location URI separate from the NautilusFile object. NautilusFile
	was munging URLs that had queries in them, causing big problems
	for the software catalog among other things. This is a good
	short-term fix.

2000-10-25  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Don't bomb out when db cannot be accessed.

2000-10-25  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_set_selection):
	nautilus_list_set_selection used to pass a bogus NautilusCListRow*
	to row_set_selected
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_new_folder):
	whitespace change

	* src/file-manager/fm-list-view.c:
	comment corrected

2000-10-25  Darin Adler  <darin@eazel.com>

	* components/adapter/bonobo-stream-vfs.c: (vfs_get_info),
	(vfs_set_info), (vfs_write), (vfs_read), (vfs_seek), (vfs_copy_to),
	(vfs_commit), (vfs_revert), (vfs_destroy),
	(bonobo_stream_vfs_class_init), (bonobo_stream_vfs_open):
	Update for changes to the BonoboStream class. Also did a thorough code
	review, fixed some small bugs, and added a bunch of FIXMEs for things
	that are broken.

2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-constants.h:
	Removed.  It was a bad try.  Stuff is now in eazel-services-extensions.h.
	
	* components/services/nautilus-dependent-shared/Makefile.am:
	* components/services/nautilus-dependent-shared/eazel-services-extensions.c:
	(pixbuf_new_from_name), (eazel_services_image_new),
	(eazel_services_label_new):
	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	Add a place to put shared services extensions.
	
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_item_new), (footer_remainder_new),
	(eazel_services_footer_update):
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_new):
	* components/services/nautilus-dependent-shared/test-footer-header.c:
	Remove a bunch of duplicated code and put it in a shared
	extensions location.  Make the footer real.  Add an item_clicked
	signal to the footer.

	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	Hook up the footer for item clicks.
	
	* libnautilus-extensions/nautilus-image.c:
	(nautilus_image_new_loaded):
	* libnautilus-extensions/nautilus-image.h:
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_new_loaded):
	* libnautilus-extensions/nautilus-label.h:
	Add constructors that take a bunch of arguments for the various
	widgets attributes.  Makes the widgets easier to use for callers
	that need to tweak many attributes (like eazel services).
	
2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/.cvsignore:
	* components/services/nautilus-dependent-shared/Makefile.am:
	* components/services/nautilus-dependent-shared/eazel-services-constants.h:
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(eazel_services_footer_initialize_class),
	(eazel_services_footer_initialize), (footer_destroy),
	(pixbuf_new_from_name), (label_new), (label_enter_event),
	(label_leave_event), (label_button_press_event), (label_free_data),
	(label_free_uri), (image_new), (image_new_from_name),
	(buffered_widget_add_prelighting), (footer_item_new),
	(footer_remainder_new), (eazel_services_footer_new),
	(eazel_services_footer_update):
	* components/services/nautilus-dependent-shared/eazel-services-footer.h:
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_initialize_class),
	(eazel_services_header_initialize), (header_destroy),
	(pixbuf_new_from_name), (label_new), (image_new),
	(image_new_from_name), (eazel_services_header_new),
	(eazel_services_header_set_text):
	* components/services/nautilus-dependent-shared/eazel-services-header.h:
	Two new widgets to deal with services views headers and footers.
	
	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(generate_install_form):
	* components/services/login/nautilus-view/nautilus-change-password-view.c:
	(generate_change_password_form):
	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	(generate_summary_form):
	Use the new footer and header widgets.
	
	* components/services/nautilus-dependent-shared/shared-service-widgets.c:
	* components/services/nautilus-dependent-shared/shared-service-widgets.h:
	Retire some old code.

	* components/services/nautilus-dependent-shared/test-footer-header.c:
	(delete_event), (main):
	Add a test for the new header and footer widgets.
	
2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_size_request), (render_buffer_pixbuf):
	Make sure text layout honors the vertical and horizontal offsets.

	(nautilus_scalable_font_draw_text):
	* test/test-nautilus-image.c: (label_new), (label_enter_event),
	(label_leave_event), (label_free_data),
	(buffered_widget_add_prelighting), (header_new), (footer_item_new),
	(footer_remainder_new), (footer_new), (main):
	More work on prelighting footers.
	
2000-10-25  Andy Hertzfeld  <andy@eazel.com>

	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.c: (create_image_widget), (create_image_widget_from_uri):
	fixed bug where local images were not showing up in the summary
	view.
	
2000-10-24  Andy Hertzfeld  <andy@eazel.com>

	worked on bug 3898, selection in the aa icon view is too slow.
	Fixed by using a fill to make the selection pixbuf with some tiny
	blits for the rounded corners, instead of stretching a pixbuf.
	Also, made the selection color themable in the process.
	
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(clear_rounded_corners), (draw_label_text_aa):
	make the selection pixbuf with a fill and then some
	blits for the corner.
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize), (icon_destroy),
	(nautilus_icon_container_set_is_fixed_size),
	(nautilus_icon_container_theme_changed):
	made it read the selection color from the current theme
	* libnautilus-extensions/nautilus-icon-private.h:
	added a field to keep the selection color w/alpha.
	* icons/default.xml:
	added semi-transparent gray selection color to default theme.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-buffered-widget.c:
	Remove a bunch of extraneous includes.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/icons/Makefile.am:
	Rename one of the icons.
	
	* test/test-nautilus-image.c: (delete_event), (icon_get_path),
	(pixbuf_new_from_name), (label_new), (label_enter_event),
	(label_leave_event), (label_new_with_prelight), (image_new),
	(image_new_from_name), (header_new), (footer_new), (main):
	Add better test for image and label widgets.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	Fix the broken build.  Add missing header to sources.
	
2000-10-24  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	Moved a CORBA include, so EAZEL_INSTALL_NO_CORBA doesn't include
	it
	
	* components/services/time/command-line/main.c: (main):
	* components/services/time/idl/trilobite-eazel-time-service.idl:
	* components/services/time/nautilus-view/trilobite-eazel-time-view.
	c: (server_button_pressed), (timediff_button_pressed),
	(trilobite_eazel_time_view_initialize),
	(trilobite_eazel_time_view_destroy):
	* components/services/time/service/trilobite-eazel-time-service-pri
	vate.h:
	* components/services/time/service/trilobite-eazel-time-service.c:
	(impl_Trilobite_Eazel_Time_Service_set_time_server),
	(trilobite_eazel_time_service_get_epv),
	(trilobite_eazel_time_service_finalize),
	(trilobite_eazel_time_service_initialize_load_config),
	(get_nist_time), (trilobite_eazel_time_service_get_server_time):
	Revived the timeservice, made it use nist/ntp (defaults to
	nist1.sjc.certifiedtime.com). Uses code from gnuclear to do the
	actual nist parse.
	
	* nautilus-installer/src/Makefile:
	Yes.
	* nautilus-installer/src/installer.c: (start_over),
	(add_update_package), (eazel_install_preflight), (check_system),
	(more_check_system):
	Fixed the "will update eog && will remove eog" bug. Now it just
	say "will update eog x 2". Also checks for rh7.x and rpm v.4.x
	
	* nautilus-installer/src/prescript:
	Temporarily hacked prescript to run
	/h/public/bin/eazel-trilobite-configure (if present), and set
	nautilus to use gegl as services server.
	
	* nautilus.spec.in:
	Updated deps to ORBit >= 0.5.3 and oaf >= 0.6.0

2000-10-24  Robey Pointer  <robey@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(mime_list_callback):

	Fix a typo that caused a failure to not report that it failed.

2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/icons/Makefile.am:
	* components/services/nautilus-dependent-shared/icons/eazel-logo-left-side-repeat.png:
	* components/services/nautilus-dependent-shared/icons/eazel-logo-right-side-eazel-logo.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-normal-fill.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-normal-left-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-normal-right-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-prelight-fill.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-prelight-left-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-prelight-right-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-remainder-fill.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-remainder-left-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-remainder-right-bumper.png:

	New icons for summary view.
	
2000-10-24  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):
	lots of layout tweaks to please Arlo; it's still not finished yet
	since I wasn't able to shrink the news section properly
	
	* libnautilus-extensions/nautilus-tabs.c:
	(nautilus_tabs_initialize), (draw_tab_label), (draw_all_tabs),
	(nautilus_tabs_prelight_tab), (nautilus_tabs_select_tab):
	changed font size, text spacing and prelight behaviour as
	specified by Arlo.
	
	* icons/eazel/Back.png:
	* icons/eazel/Forward.png:
	* icons/eazel/Home.png:
	* icons/eazel/Refresh.png:
	* icons/eazel/Search.png:
	* icons/eazel/SearchWeb.png: 
	* icons/eazel/Services.png:
	* icons/eazel/Stop.png:
	* icons/eazel/Up.png:

	updated Susan's toolbar icons
	
2000-10-24  Arlo Rose  <arlo@eazel.com>

	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-active-bridge.png:
	Fixed a typo.

2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	* librsvg/art_rgba.c: (art_rgba_rgba_composite),
	(art_rgba_fill_run), (art_rgba_run_alpha):
	* librsvg/art_rgba.h:
	* librsvg/rsvg.c:
	Make Raph's latest changes work with the old version of libart in
	gnome-libs-1-0.
	
2000-10-24  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/i-directory.xml:
	* icons/arlo/emblem-nowrite-72.png:
	* icons/arlo/emblem-nowrite-96.png:
	Some old stuff I guess I never checked in...

	
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-fill.png:
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/active-prelight-bridge.png:
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-active-bridge.png:
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-right-bumper.png:
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-left-bumper.png:
	Making the summary view tabs pre-light better.
	
2000-10-24  Raph Levien  <raph@acm.org>

	* librsvg/rsvg.c: Implemented the "opacity" property for objects
	and groups. This makes rsvg render more SVG files exported from
	Adobe Illustrator 9 correctly and should make Arlo happy.

	* librsvg/opacity.svg: New test file including opacity examples.

2000-10-24  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_update_news_entry_row), (authn_cb_failed),
	(login_button_cb), (generate_login_dialog),
	(nautilus_summary_view_load_uri):

	Adding login changes to the summary view.  Still needs a bit more
	work but looks better.

2000-10-24  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_destroy_deep_helper):
	These two fns now properly handle key == value (won't double free)

2000-10-24  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_xfer_ok):
	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_remove_deep),
	(nautilus_g_hash_table_destroy_deep_helper),
	(nautilus_g_hash_table_destroy_deep_custom),
	(nautilus_g_hash_table_destroy_deep):
	* libnautilus-extensions/nautilus-glib-extensions.h:
	* src/file-manager/fm-directory-view.c: (debuting_uri_data_free):
	Fix embarrassing check-in sloppiness

2000-10-24  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_remove_deep),
	(nautilus_g_hash_table_free_deep_helper),
	(nautilus_g_hash_table_free_deep_custom),
	(nautilus_g_hash_table_free_deep):
	* libnautilus-extensions/nautilus-glib-extensions.h:
	Fixed APIs of new utils to match existing, similar, fns.

	* src/file-manager/fm-directory-view.c: (debuting_uri_data_free),
	(debuting_uri_add_file_callback), (copy_move_done_data_free),
	(pre_copy_move_add_file_callback), (copy_move_done_partition_func),
	(copy_move_done_callback):
	Icons now left selected after copy_move operation.

2000-10-24  Brian Frank  <bfrank@eazel.com>

	* data/static_bookmarks.xml
	Updated bookmarks list to current links

2000-10-24  Darin Adler  <darin@eazel.com>

	Some work towards reducing load_directory calls.

	Also fixed bug 3978 (Many Bonobo warnings/errors on quit).
	
	* libnautilus-extensions/nautilus-directory-async.c:
	(set_up_request_by_file_attributes),
	(update_file_info_in_list_if_needed),
	(dequeue_pending_idle_callback), (request_is_satisfied),
	(get_info_callback), (file_info_start):
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-file-attributes.h:
	* libnautilus-extensions/nautilus-file-private.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_new_from_info), (destroy),
	(nautilus_file_update_info), (nautilus_file_update_name),
	(nautilus_file_compare_by_type),
	(nautilus_file_get_string_attribute), (get_description),
	(update_description_for_link), (nautilus_file_get_type_as_string),
	(nautilus_file_get_mime_type), (nautilus_file_is_mime_type),
	(nautilus_file_check_if_ready):
	* libnautilus-extensions/nautilus-file.h:
	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_actions_get_required_file_attributes),
	(nautilus_mime_get_default_action_type_for_file),
	(nautilus_mime_get_default_application_for_file_internal),
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_applications_for_file),
	(nautilus_mime_get_short_list_components_for_file),
	(nautilus_mime_get_short_list_methods_for_file),
	(nautilus_mime_get_all_applications_for_file),
	(nautilus_mime_get_all_components_for_file),
	(nautilus_mime_set_short_list_applications_for_file),
	(nautilus_mime_set_short_list_components_for_file):
	Get rid of the distinction between slow and default MIME type once
	again. We (Pavel, Maciej, John, and I) decided it's better not to
	have multiple opinions on the MIME type, despite our original idea
	that we needed the slow MIME type for some things, even on remote
	file systems.
	
	* libnautilus-extensions/nautilus-glib-extensions.h:
	Fixed the formatting in this file.
	
	* src/file-manager/fm-directory-view.c: (load_location_callback):
	Only force a reload if we are reloading the same directory. This
	is needed to take advantage of the loading already done for us by
	the framework.
	(load_directory): Take a NautilusDirectory instead of a URI string.
	Also take a boolean parameter to control if we force a reload.
	(finish_loading_uri): Respect the boolean parameter that tells us
	whether to force a reload.
	(filtering_changed_callback): Use the new load_directory.
	
	* src/nautilus-applicable-views.c: (nautilus_navigation_info_new),
	(nautilus_navigation_info_cancel), (nautilus_navigation_info_free):
	Monitor the directory while we are loading the component. We
	already need to load the directory to get the MIME types, so this
	does no additional harm, and it prepares us to consolidate the
	loading done for different reasons.
	
	* src/nautilus-main.c: (main): Use nautilus_setenv instead of
	putenv, since it's more portable.
	
	* src/nautilus-window-manage-views.c: Quick simplification pass on
	state machine. Got rid of the use of varargs and renamed a bunch
	of things.
	
	* src/nautilus-window-manage-views.h:
	* src/nautilus-window-private.h:
	Moved external functions from nautilus-window-manage-views.c to
	all be in nautilus-window-manager-views.h. This is one step in
	reducing the number of clients that need access to private stuff
	in NautilusWindow.
	
	* src/nautilus-window-service-ui.c: (detach_service_ui),
	(nautilus_window_install_service_ui): Detach the service UI on
	"destroy" rather that using set_data_full, because finalize time
	is too late.

	* src/nautilus-view-frame.c: (nautilus_view_frame_destroy):
	Got rid of extra unref that was messing things up here.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(uris_are_equal), (nautilus_mozilla_content_view_load_uri):
	Fix for bug 3908.  Browsing to web documents deeper than the root
	is broken.  I fixed it by backing out my previous broken fix for
	"reloading" a web page.  There is a separate bug for the reload
	issue which ill fix properly later.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Make the require rpm version be 3.0.4 or greater.  Not just 3.0.4.
	
2000-10-24  Andy Hertzfeld  <andy@eazel.com>

	added new certified emblem from Susan
	
	* data/emblems/Makefile.am:
	* data/emblems/certified.png:
	added certified.png
	* icons/Makefile.am:
	* icons/emblem-certified.svg:
	added emblem-certified.svg, removed emblem-certified.gif

2000-10-23  Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(parse_previous_duplicate_name),
	(nautilus_self_check_file_operations):
	Fix 3971 - "duplicate" from context-click menu adds space to
	beginning of the name.
	This was a case of misinterpretting files such as ".bashrc" as
	an extension.
	Added tests that catch this problem and fixed it. 

2000-10-24  Josh Barrow  <josh@eazel.com>

	* nautilus.spec.in:
	Make it require 3.0.4 or *greater*.  I'm using 3.0.5 and it 
	works fine.

2000-10-23  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_category):
	* nautilus-installer/src/installer.c: (strip_categories),
	(start_over_make_category_func), (start_over),
	(jump_to_retry_page), (add_force_packages), (add_force_remove),
	(add_update_package), (toggle_button_toggled),
	(eazel_installer_add_category), (eazel_installer_do_install):

	add <EXCLUSIVE/> tag to categories in package-list.xml to indicate
	that a category can't be selected with any other category (it's
	mutually exclusive with them).  added puppet-strings to the
	bootstrap installer to support that.
	
2000-10-23  Eskil Heyn Olsen  <eskil@eazel.com>

	* user-guide/C/Makefile.am:
	Fixing tinderbox build.
	
2000-10-23  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:
	Some code to test for rpm version. We require 3.0.4. If it fucks
	up, feel free to revert.
	
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	Moved the DEFAULT_RPM_DB_ROOT into -private.h
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Code so you can call the query function directly
	(EAZEL_INSTALL_SLIM/NO_CORBA)
	
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):
	Moved support for rpm < 3.0.4
	
	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/callbacks.c: (begin_install):
	* nautilus-installer/src/installer.c: (insert_info_page),
	(create_window), (check_system), (more_check_system),
	(eazel_installer_initialize):
	If eazel-hacking is installed, offer to remove it.
	
2000-10-23  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/nautilus-view/main.c: (main):
	Add gconf-init
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (save_default_eazel_service_user), (authn_cb_succeeded),
	(am_i_logged_in), (logged_in_callback),
	(nautilus_summary_view_initialize),
	(nautilus_summary_view_destroy):

	Store previously used Eazel Service user for later.  The ammonite
	login dialog makes use of this as the default username.
	

2000-10-23  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):

	Fix a few warnings that show up on older rpmlibs.

2000-10-23  Pavel Cisler  <pavel@eazel.com>

	Last part of fix to 2989 - Disk thrashing on Nautilus startup.
	* libnautilus-extensions/nautilus-trash-directory.c: (add_volume):
	When starting up, don't try to create a Trash up-front, just search
	for existing Trash directories. The first time Nautilus ever runs,
	this will still take the same ammount of time, the next time it
	will use the cached entries.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_can_move_file_to_trash):
	Trash monitor no longer creates Trash directories on startup.
	Create them lazily when trying to move an item to the Trash.

2000-10-23  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/Makefile.am: make it install files for real...

2000-10-23  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 1945, Image viewer component does not display XPMs
	Fixed bug 1964, doesn't load xpm images using the loader framework.
	
	* components/image-viewer/nautilus-image-view.c:
	(load_image_from_stream):
	Fixed some leaks and call close on the loader to fix TIFF and XPM loading.
	
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(nautilus_gdk_pixbuf_load):
	Now it does. Loader must be closed to cause callbacks an non-progressive
	loaders to complete.

	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):
	Fixed a couple of build breaking unitilaized variable warnings.
	
	* components/tree/nautilus-tree-view.c:
	Updated function call to new prototype that was causing build to fail.	

2000-10-23  Mathieu Lacage  <mathieu@eazel.com>

	* components/help/hyperbola-filefmt.c:
	(fmt_help_populate_tree_from_subdir): add lookup 
	for sgml and xml files.

2000-10-23  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_local_xml_package_list):
	* nautilus-installer/src/installer.c: (strip_categories),
	(start_over_make_category_func), (start_over),
	(jump_to_retry_page), (add_force_packages), (add_force_remove),
	(add_update_package), (eazel_installer_add_category),
	(eazel_installer_do_install), (eazel_installer_initialize):
	* nautilus-installer/src/link.sh:
	
	Reduce category description text to 10pt and adjust the layout to
	match Arlo specs.  Change g_message's to LOG_DEBUG just to annoy
	Eskil (actually, so we can turn them on/off easily with --debug).

2000-10-23  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_xfer_ok), (sync_xfer_callback),
	(nautilus_file_operations_copy_move),
	(nautilus_file_operations_move_to_trash),
	(nautilus_file_operations_delete), (do_empty_trash):
	* libnautilus-extensions/nautilus-file-operations.h:
	Added callback for copy_move operation - to support
	selecting icons afterward.

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_remove_deep),
	(nautilus_g_hash_table_free_deep_helper),
	(nautilus_g_hash_table_free_deep_custom),
	(nautilus_g_hash_table_free_deep):
	* libnautilus-extensions/nautilus-glib-extensions.h:
	Added misc hash table utilities

	* src/file-manager/fm-directory-view.c: (debuting_uri_data_free),
	(debuting_uri_add_file_callback), (copy_move_done_data_free),
	(pre_copy_move_add_file_callback), (pre_copy_move),
	(copy_move_done_partition_func), (copy_move_done_callback),
	(fm_directory_view_create_links_for_files),
	(fm_directory_view_duplicate_selection), (new_folder_done),
	(fm_directory_view_new_folder),
	(fm_directory_view_move_copy_items):
	Hooked up to new copy_move callback. There are still problems,
	the icons get unselected by someone after they're selected.

2000-10-23  Eskil Heyn Olsen  <eskil@eazel.com>

	* README:
	Added that we require rpm 3.0.4 if --enable-eazel-service

	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):
	Fix for older rpm's (although installation will probably still
	be borked, should insert #error instead.

	* nautilus.spec.in:
	nautilus-trilobite requires rpm = 3.0.4

2000-10-23  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (create_package):

	Nautilus doesn't always encode "rpm_id=" into "rpm_id%3D", so
	check for both.

2000-10-23  Darin Adler  <darin@eazel.com>

	* Makefile.shared: Fix extra dependency that was causing the xml.h
	files to be generated too often.
	* configure.in: Fix code that detects the gcc options to work even
	with -O on.
	
	* src/nautilus-view-frame.h:
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_initialize_class),
	(view_frame_loaded), (view_frame_failed),
	(nautilus_view_frame_handle_client_destroy),
	(nautilus_view_frame_handle_client_gone),
	(nautilus_view_frame_new), (check_if_view_is_gone),
	(nautilus_view_frame_set_to_component),
	(nautilus_view_frame_get_is_underway):
	Revamp set of signals to be easier to understand. Handle all
	failures uniformly,
	
	* src/nautilus-window-manage-views.h:
	* src/nautilus-window-manage-views.c: (change_selection),
	(nautilus_window_update_for_new_location),
	(nautilus_window_has_really_changed),
	(nautilus_window_set_state_info),
	(nautilus_window_set_sidebar_panels),
	(zoom_level_changed_callback), (get_history_list_callback),
	(change_selection_callback), (change_status_callback),
	(failed_callback), (load_underway_callback),
	(load_complete_callback), (open_location_callback),
	(open_location_in_new_window_callback), (title_changed_callback),
	(nautilus_window_connect_view), (nautilus_window_disconnect_view):
	Make more of the view management private to this file. Use the
	signals by their new names. Disconnect all the signals, not just
	the error-related ones.
	
	* src/nautilus-window.c:
	(nautilus_window_set_content_view_widget): Updated the debugging
	check to do it with the new Bonobo UI calls.

2000-10-23  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form):
	made the summary view not display the news section when there is
	no news to display.
	
2000-10-23  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	Added a comment to the ssl_rename variable.
	Added a function stub for querying the server about packages. Not
	impl yet.
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_transaction_fill_hash),
	(eazel_install_monitor_process_pipe),
	(eazel_install_monitor_err_process_pipe),
	(eazel_install_monitor_subcommand_pipe),
	(eazel_install_do_transaction_all_files_check),
	(eazel_install_clean_name_to_package_hash),
	(eazel_install_start_transaction),
	(eazel_install_check_existing_packages),
	(eazel_install_fetch_dependencies), (dump_one_package),
	(eazel_install_do_file_conflict_check),
	(eazel_install_ensure_deps), (eazel_uninstall_upward_traverse),
	(eazel_uninstall_globber):
	Added comments and clarified some variable names.
	No file dep checking on --force.
	No whatrequires check on uninstall on --force
	Moved the all_files_check call into ensure_deps, so if packages
	are pruned we can rerun ensure_deps.
	No longer check if a provides file is a directory before conflict
	check (not needed because of fix in eazel-install-types).
	Calling g_main_iteration during file conflict checking if
	EAZEL_INSTALL_SLIM is set.
	Clean up some lists and hashtables at the end of a transaction.
	
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_finalize), (eazel_install_class_initialize),
	(eazel_install_initialize), (eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_revert_transaction_from_xmlstring),
	(eazel_install_emit_done):
	All default funcs are NULL if EAZEL_INSTALL_NO_CORBA set.
	Set private->revert to TRUE during revert.
	Some more debug output.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file), (eazel_install_fetch_file),
	(eazel_install_fetch_package), (get_search_url_for_package):
	Don't add the package to downloaded_files list till after we've
	checked the version and name.
	If revert, use &flag=8 otherwise 12.
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Assert that the dbs hashtable is !null.
	
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings),
	(eazel_install_start_transaction_make_rpm_argument_list),
	(eazel_install_monitor_rpm_process_pipe),
	(eazel_install_free_rpm_system),
	(eazel_install_prepare_rpm_system),
	(eazel_install_package_modifies_provides_compare),
	(eazel_install_do_rpm_dependency_check):
	Loads of debug code to grab stderr & stdout output from rpm.
	More comments in the do_rpm_dependency_check func.
	
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new), (categorydata_list_copy), (categorydata_copy),
	(packagedata_list_copy), (packagedata_copy),
	(packagedata_fill_from_rpm_header), (packagedata_destroy):
	Added a boolean flag to packagedata_copy, toggles whether or not
	to deep copy.
	Fix rpm header load to not add directories to the ->provides list
	(using a wonderfull O(n²) function, I'll leave it to the reader to
	improve it).
	Uncommented the rpmheaderFree call.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(eazel_install_packagelist_to_xml):
	More debug output (we can never have enough!)
	
	* nautilus-installer/src/Makefile:
	Yes.
	
	* nautilus-installer/src/callbacks.c: (druid_cancel),
	(druid_delete), (begin_install), (druid_finish), (prep_install):
	* nautilus-installer/src/installer.c: (create_what_to_do_page),
	(strip_categories), (start_over_make_category_func), (start_over),
	(jump_to_retry_page), (create_window), (eazel_install_progress),
	(eazel_download_progress), (add_force_packages),
	(add_force_remove), (add_update_package), (get_required_name),
	(get_detailed_errors_foreach), (get_detailed_errors),
	(eazel_install_preflight), (eazel_install_delete_files),
	(install_done), (check_system), (eazel_installer_do_install),
	(eazel_installer_initialize):
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/link.sh:
	* nautilus-installer/src/main.c: (main):
	Now takes a --tmpdir argument
	Puts builddate in window title
	Has a system for creating RepairCases when traversing a tree in
	install_failed signal handler.
	Now handles stuff like "need to updage eog" and then there is no
	update for eog.
	Hopefully also handles circular conflict cases.
	Now has a completely obfuscated call stack...

2000-10-23  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/sgml/chapter-1.sgml:
	applying patch from John Fleck to make it work better
	with the current gnome-db2html behaviour.

2000-10-23  John Sullivan  <sullivan@eazel.com>

	* src/nautilus-window-menus.c: (append_bookmark_to_menu):
	Fixed memory leak I happened to notice.

2000-10-23  J Shane Culpepper  <pepper@eazel.com>

	* nautilus.spec.in:

	Fixing the spec to pick up new image directory.

2000-10-23  John Sullivan  <sullivan@eazel.com>

	Fixed 3568: Bonobo verbs and data leak when menus rebuilt

	Michael Meeks added verb-removing support to Bonobo, which
	I have now deployed in Nautilus.

	* libnautilus-extensions/nautilus-bonobo-extensions.h:
	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	(remove_verbs): New function, walks through the XML nodes
	beneath a specified path and removes each verb it finds.
	(nautilus_bonobo_remove_menu_items_and_verbs): Now calls
	remove_verbs; also changed name from _remove_menu_items
	for clarity.

	* src/file-manager/fm-directory-view.c:
	(reset_bonobo_open_with_menu):
	* src/nautilus-window-menus.c:
	(nautilus_window_remove_bookmarks_menu_items),
	(nautilus_window_remove_go_menu_items): Removed FIXMEs
	and updated for name change.

2000-10-23  John Sullivan  <sullivan@eazel.com>

	* src/nautilus-applicable-views.c:
	(get_nautilus_navigation_result_from_gnome_vfs_result):
	Improved the warning message output to the terminal when 
	get-file-info returns a GnomeVFSResult for which we don't 
	have a nice user error message.

2000-10-23  Mike Fleming  <mfleming@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(trilobite_get_services_address)
	Added small comment to currently unused  function with regards to
	format of gconf paramameter (services-host)

2000-10-22  Martin Baulig  <baulig@suse.de>

	This is Maciej checking in Martin's fix for 3691. Credit to him,
	blame to me.
	
	* components/adapter/nautilus-adapter-embed-strategy.h
	(NautilusAdapterEmbedStrategyClass): Added "activate" and "deactivate"
	signals.
	(nautilus_adapter_embed_strategy_get): Removed ui_container argument.
	(nautilus_adapter_embed_strategy_activate): New function; emits
	the "activate" signal.
	(nautilus_adapter_embed_strategy_deactivate): New function; emits
	the "deactivate" signal.

	* components/adapter/nautilus-adapter-control-embed-strategy.c
	(nautilus_adapter_control_embed_strategy_activate): New static function;
	this is the handler of the "activate" signal.
	(nautilus_adapter_control_embed_strategy_deactivate): New static function;
	this is the handler of the "deactivate" signal.

	* components/adapter/nautilus-adapter-embeddable-embed-strategy.c
	(nautilus_adapter_embeddable_embed_strategy_activate): New static function;
	this is the handler of the "activate" signal.
	(nautilus_adapter_embeddable_embed_strategy_deactivate): New static function;
	this is the handler of the "deactivate" signal.

	* components/adapter/nautilus-adapter.c (nautilus_adapter_activate_callback):
	New static function; connect this to the "activate" signal of the adapter
	control.

2000-10-23  Kjartan Maraas  <kmaraas@gnome.org>

	* src/nautilus-shell-ui.xml.h: Check in a file containing
	the strings to be translated instead of the 0-byte file that's
	there now.
	
2000-10-23  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (service_tab_selected_callback),
	(updates_tab_selected_callback):
	made the updates section of the summary use the new, image-based tabs.
	
	* libnautilus-extensions/nautilus-tabs.c: (draw_all_tabs):
	made it handle the right edge for the single tab case properly.
	
2000-10-22  Andy Hertzfeld  <set EMAIL_ADDRESS environment variable>

	* components/services/summary/
		nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_login_dialog),
	(nautilus_summary_view_load_uri), (service_tab_selected_callback):
	
	added image-based tabs to the summary view.  Also, fixed problem where
	the throbber kept spinning until the login dialog was dismissed by
	making it a non-modal dialog by refraining from calling gnome_run_dialog
	Currently, only the service tabs have been converted but the update
	tab is coming soon.
	
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-tabs.c:
	(nautilus_tabs_initialize_class), (nautilus_tabs_initialize),
	(nautilus_tabs_new), (tab_item_destroy), (tab_item_destroy_cover),
	(nautilus_tabs_destroy), (nautilus_tabs_unload_tab_pieces),
	(load_tab_piece), (nautilus_tabs_load_tab_pieces),
	(nautilus_tabs_hit_test), (measure_height), (recalculate_size),
	(nautilus_tabs_size_request), (draw_tab_piece_aa),
	(draw_pixbuf_tiled_aa), (allocate_cleared_pixbuf),
	(measure_tab_name), (draw_tab_label), (draw_all_tabs),
	(tab_item_find_by_name), (nautilus_tabs_expose),
	(nautilus_tabs_draw), (nautilus_tabs_add_tab),
	(nautilus_tabs_remove_tab), (nautilus_tabs_prelight_tab),
	(nautilus_tabs_select_tab), (nautilus_tabs_press_event),
	(nautilus_tabs_leave_event), (nautilus_tabs_motion_event):
	* libnautilus-extensions/nautilus-tabs.h:
	added a new class for the fancy Arlo tabs in the summary view,
	based on the sidebar tabs.

	* configure.in:
	* components/services/summary/
		nautilus-view/Makefile.am:
	* components/services/summary/
		nautilus-view/icons/.cvsignore:
	* components/services/summary/
		nautilus-view/icons/Makefile.am:
	* components/services/summary/
		nautilus-view/icons/gray_tab_pieces/.cvsignore:
	* components/services/summary/
		nautilus-view/icons/gray_tab_pieces/*.png
	
	added Arlo's new tab images for the summary view
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize), (add_new_button_callback),
	(done_button_callback):
	
	added a done button to the property dialog to make it easier to
	dismiss it.
	
2000-10-22  Mike Fleming  <mfleming@eazel.com>

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_free), (timed_wait_callback):

	Made timed-wait dialog remember the dialog.  Was being triggered
	during a DAV rename w/ debug info on.

2000-10-22  Robert Brady  <rwb197@zepler.org>

	* configure.in: Added en_GB to ALL_LINGUAS.

Sun Oct 22 05:25:46 2000  George Lebl <jirka@5z.com>

	* librsvg/rsvg-ft.c (rsvg_ft_ctx_done): Things allocated with
	  glib functions must be freed with g_free, not free

2000-10-21  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus.spec.in:
	Dep on bonobo>=0.24 and medusa >= 0.2.1

2000-10-21  Gene Z. Ragan  <gzr@eazel.com>

	* THANKS:
	Added syncomm to THANKS file.
	
2000-10-21  Josh Barrow  <josh@eazel.com>

	* AUTHORS:
	* THANKS:
	* src/nautilus-window-menus.c: (help_menu_about_nautilus_callback):
	Added Eli to the about box and moved him from THANKS to AUTHORS, per 
	Maciej.

2000-10-21  Ali Abdin  <aliabdin@aucegypt.edu>

	* components/help/converters/gnome-db2html2/toc-elements.c:
	(toc_sect_end_element): Add in 'break;' at the appropriate areas of
	the code. Should fix some issues. DOH!! This was also needed to fix
	Bug #3863. Thank god for testers.

2000-10-21  Zbigniew Chyla  <cyba@gnome.pl>

	* configure.in: Added pl to ALL_LINGUAS.

2000-10-21  Mathieu Lacage <mathieu@eazel.com>

	* user-guide/C/img/*.png: remove till I can find time to redo all
	the screenshots: people are complaining it kills their bandwith for
	no good reason.

2000-10-21  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/sect-elements.c:
        (sect_sect_end_element): Add in 'break;' at the appropriate areas of
        the code. Should fix some issues. Fixes Bug #3863.

2000-10-21  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (generate_install_form),
	(nautilus_service_install_downloading),
	(nautilus_service_install_installing):

	Remove artificial pauses I was using for testing (oops), and
	change the font size of the overall feedback text to something
	readable in AA.

2000-10-20 John Fleck <jfleck@inkstain.net>

	* user-guide/C/sgml/nautilus.sgml - changed "doctype" to "DOCTYPE"
	in the dtd declaration. This is needed for gnome-db2html2 to
	correctly render the document into html for Mozilla to display

2000-10-20  Robey Pointer  <robey@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_from_packagedata),
	(packagedata_from_corba_packagedatastruct):
	* components/services/install/lib/eazel-install-protocols.c:
	(get_url_for_package):
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_new), (packagedata_copy),
	(packagedata_fill_from_rpm_header), (packagedata_destroy):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (eazel_install_packagedata_to_xml):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (add_padding_to_box), (generate_install_form),
	(show_overall_feedback), (make_new_status),
	(current_progress_bar_complete),
	(nautilus_service_install_downloading),
	(nautilus_service_install_installing),
	(nautilus_service_install_view_update_from_uri):

	Add package "summary" field to store the RPM one-line summary
	field (we want to show it in the installer).

2000-10-20  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_update_icon):
	at Arlo's urging, I removed the emblem scale pinning that was added
	last week, which isn't right if you think of the emblems as part
	of the icons like Arlo does.  I also added an emblem scale factor to
	make the emblems a more reasonable size.
	
	* src/file-manager/fm-list-view.c:
	fixed bug 3900, emblems too large in the list view, by correct
	the LIST_VIEW_MINIMAL_EMBLEM_SIZE constant, which was set too large.
	
2000-10-20  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3548 (modal error dialog is flakey in summary view)

	I made a bunch of small improvements to this file. Most of
	these had been checked in earlier but accidentally clobbered,
	but there are some new ones too.

	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	Removed feedback_text field from details struct. This was used in
	an unnecessary and leak-inducing way before.
	(generate_summary_form): Remove period following exclamation point
	in on-screen text.
	(error_dialog_retry_cb): Removed this function.
	(set_dialog_parent): New helper function to parent a dialog on
	the NautilusSummaryView's window.
	(generate_error_dialog): Removed "Retry" button since it is 
	extremely unlikely to work, thus resulting in constant frustration;
	Removed initialized but unused "reply" variable; removed extra 
	initialization of "dialog" variable; use OK button instead of
	Cancel since there's only one button now; set up error message
	with parameter instead of details field; set text justification
	and line wrap to accommodate longer messages; parent the dialog
	so it doesn't appear in some random place.
	(authn_cb_failed): pass message to generate_error_dialog directly;
	removed unnecessary capital letter in message.
	(generate_login_dialog): remove initialized but unused "reply" variable;
	change "Please Login" to "Please log in"; parent the dialog.
	(nautilus_summary_view_load_uri): collapse a lot of identical code;
	improve error messages; display error message when xml file couldn't
	be parsed (was supposed to before, but wasn't); only generate the
	summary form if xml file was parsed.
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-service-ui.xml.h:
	* src/nautilus-shell-ui.xml.h:

2000-10-21  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/sgml/chapter-1.sgml:
	stupid me: forgot a sect2 in the middle of nowhere...

2000-10-20  Rebecca Schulman  <rebecka@eazel.com>
	Fix for bug 1768, to put a hard limit on
	the number of files for PR2.  We do this 
	by keeping a count of confirmed files
	in directories, and stopping a load once the confirmed 
	file count reaches a certain level.

	* libnautilus-extensions/nautilus-directory-async.c:
	(set_file_unconfirmed), (dequeue_pending_idle_callback),
	(directory_load_one), (directory_load_done),
	(directory_load_callback), (mark_all_files_unconfirmed),
	(nautilus_directory_stop_monitoring_file_list):
	Increment or decrement file count when marking a file confirmed
	or unconfirmed.
	* libnautilus-extensions/nautilus-directory-private.h:
	add file count file
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_add_file), (nautilus_directory_remove_file),
	(nautilus_directory_file_list_length_reached):
	increment and decrement file counts here when a file is added.
	A file is always confirmed when it is initially added, so 
	increment always, but only decrement the count when we are 
	removing a confirmed file.
	* libnautilus-extensions/nautilus-directory.h:
	Add function nautilus_directory_file_list_length_reached
	as public 
	* src/file-manager/fm-directory-view.c:
	(check_for_directory_hard_limit), (done_loading):
	when we finish loading the directory, display the hard limit
	dialog if necesssary, to let the user know we've stopped the directory
	load to prevent nautilus from overloading.

2000-10-20  Darin Adler  <darin@eazel.com>

	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/sample/Makefile.am:
	* components/services/summary/nautilus-view/Makefile.am:
	* libnautilus/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	We need to include the .xml.h files in EXTRA_DIST. My mistake
	turning that off (killed the Tinderbox).
	
	* src/nautilus-window-manage-views.c:
	(position_and_show_window_callback),
	(nautilus_window_end_location_change_callback): Fix small ref
	mistake I might have introduced with my last check-in.

2000-10-20  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	* components/services/summary/nautilus-view/tests/README:
	* components/services/summary/nautilus-view/tests/redirects.xml:
	* components/services/summary/nautilus-view/tests/services.xml:
	* src/nautilus-service-ui.xml.h:

	Added simple test xmls to generate lots of entries in the summary view.

2000-10-20  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_service_entry_row):
	fixed a memory leak in the summary view, where it was allocating a
	structure used in a callback but never releasing it.
	
2000-10-20  Andy Hertzfeld  <andy@eazel.com>

	* components/hardware/icons/Makefile.am:
	* components/hardware/icons/CD_drive.png:
	* components/hardware/nautilus-hardware-view.c:
	(setup_overview_form):
	added a better icon for CD drives from Susan, and used it in the
	hardware view instead of the CD icon it was using.
	
2000-10-20  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3805, Nautilus tries to parse text files on the desktop as XML.
	
	* libnautilus-extensions/nautilus-link.c:
	(local_get_root_property):
	Do a check on the mime type of the file before processing it as XML.
	Also fix a bug where a NULL XMLDoc was being used.

2000-10-20  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 3803, pin image size for downloaded images in summary
	view
	
	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.c: (create_image_widget_from_uri):
	added optional image size pinning to create_image_widget_from_uri
	
	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.h:
	changed parameters to create_image_widget_from_uri
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):
	pinned downloaded images to a maximum size, fixing bug 3803.  Also,
	tweaked button layout a bit.
	
2000-10-20  Darin Adler  <darin@eazel.com>

	* Makefile.am:
	* Makefile.shared:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/sample/Makefile.am:
	* components/services/install/command-line/Makefile.am:
	* components/services/summary/nautilus-view/Makefile.am:
	* libnautilus-extensions/Makefile.am:
	* libnautilus/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	Moved some shared Makefile stuff to a shared include file so we
	don't use "copy and paste technology" in our Makefiles. Fixed the
	rule that builds .xml.h files so it doesn't have to be copied and
	pasted everywhere.
	
	* components/loser/content/nautilus-content-loser-ui.xml.h:
	* components/loser/sidebar/nautilus-sidebar-loser-ui.xml.h:
	* components/mozilla/nautilus-mozilla-ui.xml.h:
	* components/sample/nautilus-sample-content-view-ui.xml.h:
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-shell-ui.xml.h:
	Regenerated the xml.h files with the new Bonobo tool, which keeps
	things in alphabetical order to minimize cvs thrashing.
	
	* components/services/summary/nautilus-view/Makefile.am:
	* components/services/summary/nautilus-view/nautilus-summary-view-ui.xml.h:
	Added localization for the summary view UI.
		
	* src/Makefile.am:
	Added localization for the service UI pieces.
	
	* libnautilus-extensions/nautilus-buffered-widget.c:
	(nautilus_buffered_widget_initialize),
	(connect_to_background_if_needed): Fixed bug where the widget
	would stay connected after the background was destroyed. John saw
	it once, but I'm not sure how to reproduce it.
	
	* nautilus.spec.in: Fix some bad spelling and strange wording.
	
	* src/nautilus-applicable-views.h:
	* src/nautilus-applicable-views.c: (got_file_info_callback),
	(nautilus_navigation_info_new), (nautilus_navigation_info_cancel),
	(nautilus_navigation_info_free),
	(nautilus_navigation_info_get_location),
	(nautilus_navigation_info_get_initial_content_id):
	Removed lots of cruft from this class so it's private and can be
	changed around a bit.
	
	* src/nautilus-window-manage-views.c:
	(nautilus_window_update_internals): Use the new
	nautilus_navigation_info_get_location.
	(handle_unreadable_location): Get rid of unneeded file == NULL
	check.
	(load_view_for_new_location): Use the new
	nautilus_navigation_info_get_initial_content_id.
	(set_view_location_and_selection): Use the new
	nautilus_navigation_info_get_location.
	(nautilus_window_end_location_change_callback): Use the new
	nautilus_navigation_info_get_location.
	(nautilus_window_begin_location_change): Remove some unnecessary
	code.

2000-10-20  Mathieu Lacage  <mathieu@eazel.com>

	More ids in sects.
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:

2000-10-20  Mathieu Lacage  <mathieu@eazel.com>

	Add sect ids and big caps entities
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/install.sgml:
	* user-guide/C/sgml/intro.sgml:
	* user-guide/C/sgml/manual.sgml:

2000-10-20  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3902 (Some search results do not have file
	info displayed)

	* libnautilus-extensions/nautilus-directory-async.c:
	(async_job_wake_up): Remove directory from hash table
	when it's awoken; clear already_waking_up boolean at
	end of routine.

2000-10-20  Ramiro Estrugo  <ramiro@eazel.com>

	* src/nautilus-sidebar-title.c: (update_font):
	Make the code that looks for largest font that fits a sidebar
	title work even if we dont find the exact font we look for.
	Fixes bug 2812.
	
2000-10-20  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	* librsvg/rsvg.c: (rsvg_text_handler_characters):
	Make sure the font used for text is svg icons actually exists.
	Fix (rather a worksround) for bug 3774.  We will have a better fix
	later (bug 3904).
	
2000-10-22  Andy Hertzfeld  <andy@eazel.com>

	made the images show up again in the summary view by adding
	image fetching from the service via http.
	
	* components/services/nautilus-dependent-shared/
	shared-service-widgets.c: (create_image_widget_from_pixbuf),
	(create_image_widget), (create_image_widget_from_uri):
	restructured code a bit so I could at fetching from a uri instead of
	a local icon.  Added optimization so a local icon could be used
	at the service's discretion.
	
	* components/services/nautilus-dependent-shared/
	  shared-service-widgets.h:
	added create_image_widget_from_uri
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):
	made it fetch the icons from the service
	
2000-10-20  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/rsvg.c: (rsvg_text_handler_characters),
	(rsvg_start_text):
	Quiet down the debug spewage.
	
2000-10-20  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus.spec.in:
	Forgot to add the font metrics to the rpm spec file.
	
2000-10-20  Ramiro Estrugo  <ramiro@eazel.com>

	* data/fonts/urw/Makefile.am:
	* data/fonts/urw/fonts.dir:
	* data/fonts/urw/n019003l.afm:
	* data/fonts/urw/n019004l.afm:
	* data/fonts/urw/n019023l.afm:
	* data/fonts/urw/n019024l.afm:
	Added missing font metrics.
	Also update to latest urw fonts.

2000-10-20  Maciej Stachowiak  <mjs@eazel.com>

	* components/adapter/bonobo-stream-vfs.h,
	components/adapter/bonobo-stream-vfs.c: (vfs_write), (vfs_read),
	(vfs_seek), (vfs_truncate), (vfs_copy_to), (vfs_close), (vfs_eos),
	(vfs_length), (bonobo_stream_vfs_class_init),
	(bonobo_stream_vfs_init), (bonobo_stream_vfs_get_type),
	(Bonobo_Stream_vfs__create), (bonobo_stream_vfs_new_internal),
	(bonobo_stream_vfs_open), (bonobo_stream_vfs_new): Moved here from
	libnautilus-extensions; bunches of cleanup to match nautilus style
	better.

	* components/adapter/Makefile.am: Added above two files to build.

	* components/adapter/nautilus-adapter-progressive-load-strategy.c:
	Up the load chunk.
	
	* components/adapter/nautilus-adapter-stream-load-strategy.c:
	Include "bonobo-stream-vfs.h" not
	<libnautilus-extensions-stream-vfs.h>

	* libnautilus-extensions/bonobo-stream-vfs.c,
	libnautilus-extensions/bonobo-stream-vfs.h: Removed from here.
	
	* libnautilus-extensions/Makefile.am: Removed from build.

2000-10-20  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):

	Added vseparators, fixed button sizes, added new buttons to the
	updates section.  I'm almost getting good at this stuff !

2000-10-20  Robey Pointer  <robey@eazel.com>

	* icons/Makefile.am:
	* icons/services-rpm-72.png:
	* libnautilus-extensions/nautilus-icon-factory.c:

	Add new eazel-install: icon for Arlo and make the icon factory use
	it instead of the gnome-pack-rpm one.

2000-10-20  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2948, list view does not prelight under cursor when
	dragging files.
	
	* libnautilus-extensions/nautilus-list.c:
	* libnautilus-extensions/nautilus-list.h:
	(nautilus_list_initialize), (draw_cell_pixmap), (draw_cell),
	(nautilus_list_prelight_if_necessary),

	(nautilus_list_set_drag_prelight_row):
	New function to set drag prelight row based on mouse position.
	
	* src/file-manager/fm-list-view.c: (fm_list_handle_dragged_items):
	
	* components/image-viewer/nautilus-image-view.c:
	(view_size_allocate_cb):
	Removed some old debug code.
	
2000-10-19  Robey Pointer  <robey@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install_stop), (eazel_install_get_epv):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_install_packages),
	(eazel_install_emit_install_progress_default),
	(eazel_install_emit_download_progress_default),
	(eazel_install_emit_preflight_check_default),
	(eazel_install_emit_delete_files_default):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_xfer_callback), (gnome_vfs_fetch_remote_file):

	Make the install lib check for corba events while doing a download
	(which might take a while) so that it can receive a "stop"
	message.  Ref itself while doing the install to avoid a mess.  Try
	to catch some corba exceptions and abort on them.  Set a flag on
	the "stop" message and cancel the gnome-vfs operation.  Make the
	download_progress callback be a two-way call to trick corba into
	checking for potential incoming "stop" calls.  These sum up to a
	rough hack which will be cleaned out when the installer is broken
	up into more stateful components post-PR2.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_view_destroy),
	(current_progress_bar_complete),
	(nautilus_service_install_downloading),
	(nautilus_service_install_installing),
	(nautilus_service_need_password),
	(nautilus_service_install_view_update_from_uri),
	(service_install_stop_loading_callback):

	Send "stop" message to the install view when the user hits the
	"stop" button, and also when the view is about to be destroyed.
	Cleanly handle the "stop" button by treating it like an abort.
	Use better-named /tmp directory, for security reasons.
	
2000-10-20  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Update for latest freeype2 rpm changes.
	
2000-10-20  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):

	Adding "infinite" row capabilities for generated tables.  Fixed several
	more layout issues.  The buttons are completely screwed up now from a
	ui perspective.  Trying to fix that now.

2000-10-19  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/lib/eazel-summary-shared.c:
	(eazel_news_data_new), (update_news_data_new),
	(parse_a_eazel_news_item), (parse_a_update_news_item):
	* components/services/summary/lib/eazel-summary-shared.h:
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_update_news_entry_row):

	New xml parsing information.  Fixed button labels and sizes.  A few
	minor ui tweaks.

2000-10-20  Mathieu Lacage  <mathieu@eazel.com>

	Add screenshot images.
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/install.sgml:

2000-10-19  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/
	nautilus-summary-view.c: (authn_cb_failed), (logout_button_cb), 
	(logged_in_callback), (logged_out_callback),
	(bonobo_logout_callback), (bonobo_preferences_callback),
	(update_menu_items), (merge_bonobo_menu_items):
	
	fixed the login menu command, and added support for the preferences
	and logout command.  Made it properly show and hide the appropriate
	commands according to the logged_in state
	
	* components/services/summary/nautilus-view/
	nautilus-summary-view-ui.xml:
	added menu items for preferences and logout
	
	* src/nautilus-service-ui.xml:
	added tooltips for service menu commands

2000-10-19  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/Makefile.am: modify to install sgml 
	instead of html
	* user-guide/C/img/.cvsignore: add 
	* user-guide/C/sgml/.cvsignore: add

	sgml files.
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/install.sgml:
	* user-guide/C/sgml/intro.sgml:
	* user-guide/C/sgml/manual.sgml:
	* user-guide/C/sgml/model.sgml:

	screenshots....
	* user-guide/C/img/*.png

2000-10-19  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_error_dialog), (generate_login_dialog),
	(nautilus_summary_view_load_uri):

	Fixing dialogs and error control cases.  Works a little better now
	but still doesn't destroy the error dialogs like its supposed to do.

2000-10-19  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (logged_in_callback):

	Fixing login callback so that view does not crash.

2000-10-19  Darin Adler  <darin@eazel.com>

	Check in the xml.h files. It would be better not to have these
	checked in, but it helps the translators if they are. If we
	come up with something better later, we can get rid of them.
	For now, if you exit a ui.xml file, then you should also do
	a build and check in the generated xml.h file.

	* components/loser/content/nautilus-content-loser-ui.xml.h:
	* components/loser/sidebar/nautilus-sidebar-loser-ui.xml.h:
	* components/mozilla/nautilus-mozilla-ui.xml.h:
	* components/sample/nautilus-sample-content-view-ui.xml.h:
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-shell-ui.xml.h:

2000-10-19  Darin Adler  <darin@eazel.com>

	Do some routine housekeeping that will help make the future
	switchover to libxml2 easier.
	
	* components/help/converters/gnome-db2html2/gdb3html.h:
	* components/help/hyperbola-nav-index.c:
	* components/help/hyperbola-nav-search.c:
	* libnautilus-extensions/nautilus-directory-async.c:
	* libnautilus-extensions/nautilus-directory-metafile.c:
	* libnautilus-extensions/nautilus-directory-metafile.h:
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-file.c:
	* libnautilus-extensions/nautilus-icon-factory.c:
	* libnautilus-extensions/nautilus-link-set.c:
	* libnautilus-extensions/nautilus-link.c:
	* libnautilus-extensions/nautilus-theme.c:
	* libnautilus-extensions/nautilus-volume-monitor.c:
	* libnautilus-extensions/nautilus-xml-extensions.h:
	* librsvg/rsvg.c:
	* src/nautilus-bookmark-list.c:
	* src/nautilus-bookmark-parsing.c:
	* src/nautilus-bookmark-parsing.h:
	* src/nautilus-link-set-window.c:
	* src/nautilus-property-browser.c:
	* src/nautilus-sidebar.c:
	* src/nautilus-theme-selector.c:
	* src/nautilus-window-menus.c:
	Use the <gnome-xml/> prefix on all includes of gnome-xml headers.
	This is allowed with the version of libxml1 we use now, and
	required for libxml2. Note that we now require the newer libxml1
	version that allows this, because Bonobo requires it.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (parse_category), (parse_shared),
	(parse_memory_transaction_file), (parse_local_xml_package_list),
	(generate_xml_package_list), (osd_parse_dependency),
	(osd_parse_implementation), (osd_parse_softpkg),
	(osd_parse_shared):
	* components/services/summary/lib/eazel-summary-shared.c:
	(build_services_glist_from_xml), (build_eazel_news_glist_from_xml),
	(build_update_news_glist_from_xml), (parse_summary_xml_file):
	* components/services/trilobite/libtrilobite/helixcode-utils.c:
	(xml_get_value):
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(trilobite_redirect_parse_xml):
	* libnautilus-extensions/nautilus-xml-extensions.c:
	(nautilus_xml_get_children):
	Use xmlChildrenNode instead of childs, as recommended by the
	libxml maintainer for libxml1/libxml2 compatibility.
	
	* src/nautilus-main.c: (main): Use the LIBXML_TEST_VERSION macro
	as recommended by the libxml maintainer for libxml1/libxml2
	compatibility.
	
	* components/music/nautilus-music-view.c:
	Added a lot of FIXMEs. Some other rudimentary cleanup.

2000-10-19  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c:
	(icon_is_positioned), (pending_icon_to_reveal_destroy_callback),
	(get_pending_icon_to_reveal), (set_pending_icon_to_reveal),
	(reveal_icon), (process_pending_icon_to_reveal),
	(lay_down_icons_tblr), (relayout):
	* libnautilus-extensions/nautilus-icon-private.h:
	* src/file-manager/fm-directory-view.c: (start_renaming_item),
	(reveal_newly_added_folder), (new_folder_done),
	(fm_directory_view_new_folder), (fm_directory_view_set_selection),
	(fm_directory_view_select_file):

	Newly added folders are now revealed (bug 2208). Other cases
	(e.g. duplicate) still remain. They will require adding new hooks
	to nautilus-file-operations.

2000-10-19  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (nautilus_summary_view_load_uri),
	(bonobo_login_callback):

	Fixing login menu callback and adding logic to only display login
	dialog when no user is logged in.

2000-10-19  John Sullivan  <sullivan@eazel.com>

	Fixed some cases where the error message for why a
	location couldn't be loaded was misleading or too generic.
	I ran into some of these while fiddling with the proxy 
	settings to try out services, so I'm sure other users
	will too.

	* libnautilus-extensions/nautilus-directory-async.c:
	(file_info_start): When you can't make a vfs_uri, use
	error GNOME_VFS_ERROR_INVALID_URI. It had been leaving
	this defaulting to GNOME_VFS_OK, which caused locations
	like "bogus:foo" to have a mysterious error message.
	
	* src/nautilus-applicable-views.c:
	(get_nautilus_navigation_result_from_gnome_vfs_result):
	* src/nautilus-applicable-views.h:
	* src/nautilus-window-manage-views.c:
	(nautilus_window_end_location_change_callback): Added
	separate messages for HOST_NOT_FOUND and HOST_HAS_NO_ADDRESS.
	You can get the former by specifying a bogus host name in the
	HTTP Proxy settings, and the latter by not specifying a
	host name at all in the HTTP Proxy settings.

2000-10-19  John Sullivan  <sullivan@eazel.com>

	* components/help/help-contents.oafinfo:
	Changed name of sidebar panel from "Help Contents" to "Help"
	since there is only one Help sidebar panel, and the longer
	title made it take too much space and stand out while adding
	no value.

2000-10-19  John Sullivan  <sullivan@eazel.com>

	Fixed bugzilla bug 3648 (not clear what "xxx" under
	folders means)

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_string_attribute_with_default):
	Change some of the default strings; use "..." when
	we were using "--" (for info not yet obtained); use
	"? items" or "? bytes" when we were using "xxx" 
	(for info not readable).
	(nautilus_file_get_top_left_text): Use "..." when
	we were using "--"

2000-10-19  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (nautilus_summary_view_destroy), (merge_bonobo_menu_items):
	unmerge the summary component's menu items properly by keeping a
	reference to the ui component and unhooking it in the summary view's
	destroy method.
	
2000-10-19  Andy Hertzfeld  <andy@eazel.com>

	first pass at making the summary view merge its menu commands onto
	the services menu. This isn't finished yet.
	
	* components/services/summary/nautilus-view/Makefile.am:
	added a ui xml file for the summary menu commands
	* components/services/summary/nautilus-view/nautilus-summary-view-ui.xml:
	defined the summary view menu items
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (nautilus_summary_view_initialize), (bonobo_register_callback),
	(bonobo_login_callback), (detach_ui), (merge_bonobo_menu_items):
	merge the menu items when the view is activated, unmerge when destroyed
	
	* src/nautilus-window-service-ui.c: (goto_software_catalog):
	made the software catalog command use the real url.
	
2000-10-19  Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_uri_get_basename):
	Ooops, fix a stupid mistake in my last checkin that broke file 
	change notification for fancy names.

2000-10-19  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus.spec.in:
	Removed eog dep and added xpdf for nautilus-extras.

2000-10-19  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/sample/Makefile.am:
	* libnautilus/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	Fun with Build chapter IX.

2000-10-18  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize), (set_album_cover),
	(image_button_callback), (nautilus_music_view_set_album_image):
	completed bug 2261, setting images for album covers, by making
	the set album cover button the proper size, and leaving it visible
	even when there's a cover so you can change it after setting it.
	
2000-10-18  Eskil Heyn Olsen  <eskil@eazel.com>

	* src/file-manager/Makefile.am:
	Fun with Build.
	I'm feeble and only very slowly finding
	all the -ui.xml.h thing I need to fix.

2000-10-18  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/sample/Makefile.am:
	* libnautilus/Makefile.am:
	Still trying to fix the bloody build...

2000-10-18  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/sample/Makefile.am:
	* po/POTFILES.in:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	Still fixing the tinderbox build.

2000-10-18  Ramiro Estrugo  <ramiro@eazel.com>

	* README:
	Update for new Mozilla M18 rpms.
	
2000-10-18  Rebecca Schulman  <rebecka@eazel.com>

	Fixed problems in making the new bonobo translation 
	that confused the headers.  Also added .cvsignore
	entries for the new generated xml files.
	
	* components/loser/content/.cvsignore:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/.cvsignore:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/.cvsignore:
	* components/mozilla/Makefile.am:
	* components/sample/.cvsignore:
	* components/sample/Makefile.am:
	* icons/.cvsignore:
	* libnautilus/.cvsignore:
	* libnautilus/Makefile.am:
	* src/.cvsignore:
	* src/Makefile.am:
	* src/file-manager/.cvsignore:
	* src/file-manager/Makefile.am:

2000-10-18  Eskil Heyn Olsen  <eskil@eazel.com>

	* po/POTFILES.in:
	Removing more .xml.h files to make tinderbox build again.

2000-10-18  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3705, Bookmark icons do not appear in the menu item

	This was caused by a strange precedence issue in the setting of
	UI component pixbuf data.  If a menu item has alread been created,
	setting the pixbuf data will have no effect.  Either the verb for 
	the item has to be set with the data or the item has to have
	its XML contructed  with the pixbuf type and data included in it
	at creation time. I have opted for the latter choice.
	
	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	* libnautilus-extensions/nautilus-bonobo-extensions.h:	
	(nautilus_bonobo_add_menu_item):
	Added setting of bitmap data if it is present as a
	valid argument passed into the function.
		
	* src/file-manager/fm-directory-view.c:
	(add_open_with_app_bonobo_menu_item),
	(add_open_with_viewer_bonobo_menu_item):
	Call nautilus_bonobo_add_menu_item
	
	* src/nautilus-window-menus.c: (append_bookmark_to_menu):
	Call nautilus_bonobo_add_menu_item
	
	* src/nautilus-window.c: (nautilus_window_filter),
	(nautilus_window_realize), (view_menu_choose_view_callback),
	(nautilus_window_show):
	Work in progress to handle focus issues when performing
	click drag operations in background windows.
	
	* libnautilus-extensions/nautilus-gdk-extensions.c:
	* libnautilus-extensions/nautilus-gdk-extensions.h:
	(nautilus_gdk_window_set_wm_hints_input):
	New function set input files of WM_HINTS. This 
	will be used later to handle click drag in background
	windows.

2000-10-18  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(uris_are_equal), (nautilus_mozilla_content_view_load_uri):
	Add support for reloading pages while ignoring the mozilla cache.
	Fixes bug 2780.
	
2000-10-18  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_fetch_uri):
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(check_gconf_init):

	Fix new incompatability with gnome-vfs (EOF is now an "error").
	
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_name_for_regular_file):

	Begin the slightly distateful process of adding special-case uri
	scheme icons to the left panel: make the install view use the RPM
	package icon.  Eventually we need to generalize the association of
	icons with uri schemes.

2000-10-18  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3839 (want Nautilus User Manual menu item)
	Note that this menu item does not actually work, due
	to bug 3876.

	* src/nautilus-shell-ui.xml:
	Add menu item for bringing up Nautilus User Manual.
	* src/nautilus-window-menus.c:
	(help_menu_nautilus_manual_callback),
	(nautilus_window_initialize_menus): Add verb
	and callback for Nautilus User Manual menu item.

2000-10-18  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:
	If no bonobo-ui-extract, AC_MSG_ERROR rather then cryptic failure
	during compile.
	
	* libnautilus/Makefile.am:
	Removed some evil blankspace

	* po/POTFILES.in
	Had to remove nautitlus-mozilla-ui.xml.h, since it's a conditional
	build, and eg. is not built on tinderbox.eazel.com. Better fix
	will have to come later, need new rpms' in softcat.
	
2000-10-18  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row),
	(authn_cb_succeeded), (authn_cb_failed), (login_button_cb),
	(generate_error_dialog), (generate_login_dialog),
	(widget_set_nautilus_background_color),
	(nautilus_summary_view_initialize),
	(nautilus_summary_view_load_uri):

	New summary view ui.  Still missing a few fetures but works ok now.

2000-10-18  Mathieu Lacage  <mathieu@eazel.com>

	disable bug-buddy for nautilus.
	* src/nautilus-main.c: (main):

2000-10-19  Kjartan Maraas  <kmaraas@gnome.org>

	* */Makefile.am: Feeble attempt to hook up generation
	of .h files from the *-ui.xml files to get them included
	in the translations. This will need to be done in a better
	way I guess.
	* configure.in: Added a check for bonobo-ui-extract.
	
2000-10-18  Pavel Cisler  <pavel@eazel.com>

	* components/tree/nautilus-tree-view.c:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_notify_files_moved),
	(nautilus_directory_schedule_metadata_copy),
	(nautilus_directory_schedule_metadata_move),
	(nautilus_directory_schedule_metadata_remove):
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_uri_get_basename):
	* libnautilus-extensions/nautilus-file-utilities.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_internal):
	* src/nautilus-theme-selector.c: (add_theme_to_icons):
	Clean up calls to gnome_vfs_extract_short_name, remove explicit
	unescaping because gnome_vfs_extract_short_name now does it.
	Eliminate some copy-paste technology, creating a new call
	nautilus_uri_get_basename.

2000-10-18  Robey Pointer  <robey@eazel.com>

	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (user_logged_in), (generate_change_password_form):
	* components/services/login/nautilus-view/nautilus-change-password-
	view.oafinfo:

	Fill in the username automatically if you're already logged in.
	Make the prompts more i18n'able.  Change title from "Log in" to
	"Change password".  Fix oafinfo typo that caused the change-pw
	view to never get displayed.
	
2000-10-18  Darin Adler  <darin@eazel.com>

	Some Music View fixes. Andy asked me to work on this.
	
	* components/music/main.c: (main): Make warnings drop into the
	debugger.
	
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_destroy): Change to use a NautilusFile object
	instead of using a uri string.
	(set_album_cover): Use the file object.
	(metadata_callback): Get rid of the unref that was causing a lot
	of trouble.
	(nautilus_music_view_update): Get the uri from the file object
	instead of vice versa.
	(detach_file): Cancel the call when releasing the file.
	(nautilus_music_view_load_uri): Release the old file and get a new
	one when the URI changes.

2000-10-17  Maciej Stachowiak  <mjs@eazel.com>

	Fixed bugzilla.eazel.com bugs 2222, 3177, 3468, 3650, 3788
	(some vestiges of wait_until_ready remain in the farther reaches
	of the UI).
	
	* libnautilus-extensions/nautilus-mime-actions.h,
	libnautilus-extensions/nautilus-mime-actions.c
	(nautilus_mime_actions_check_if_required_attributes_ready,
	nautilus_mime_actions_get_required_file_attributes,
	nautilus_mime_actions_wait_for_required_file_attributes): New
	functions to help with monitoring or waiting for required
	attributes for the nautilus mime API.
	(nautilus_mime_get_default_action_type_for_file,
	nautilus_mime_get_default_action_for_file,
	nautilus_mime_get_default_application_for_file_internal,
	nautilus_mime_get_default_application_for_file,
	nautilus_mime_is_default_application_for_file_user_chosen,
	nautilus_mime_get_default_component_for_file_internal,
	nautilus_mime_get_default_component_for_file,
	nautilus_mime_is_default_component_for_file_user_chosen,
	nautilus_mime_get_short_list_applications_for_file,
	nautilus_mime_get_short_list_components_for_file,
	nautilus_mime_get_short_list_methods_for_file,
	nautilus_mime_get_all_applications_for_file,
	nautilus_mime_has_any_applications_for_file,
	nautilus_mime_get_all_components_for_file,
	nautilus_mime_has_any_components_for_file,
	nautilus_mime_set_default_action_type_for_file,
	nautilus_mime_set_default_application_for_file,
	nautilus_mime_set_default_component_for_file,
	nautilus_mime_set_short_list_applications_for_file,
	nautilus_mime_set_short_list_components_for_file,
	nautilus_mime_add_application_to_short_list_for_file,
	nautilus_mime_remove_application_from_short_list_for_file,
	nautilus_mime_add_component_to_short_list_for_file,
	nautilus_mime_remove_component_from_short_list_for_file,
	nautilus_mime_extend_all_applications_for_file,
	nautilus_mime_remove_from_all_applications_for_file,
	mime_type_get_supertype): Don't `nautilus_file_wait_until_ready'
	for the required attributes; instead assert (Well, return_if_fail)
	that they are available using
	`nautilus_file_check_if_ready'. Also, use
	`nautilus_file_get_uri_scheme' where possible.

	* libnautilus-extensions/nautilus-directory-async.c
	(mime_list_callback): Correct some coding mistakes.

	* libnautilus-extensions/nautilus-wait-until-ready.h,
	libnautilus-extensions/nautilus-directory.c: Remove
	`nautilus_directory_wait_until_ready'.

	* libnautilus-extensions/nautilus-file.h,
	libnautilus-extensions/nautilus-file.c
	(nautilus_file_get_uri_scheme): new convenience function.
	
	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list, is_application_default_for_file,
	is_component_default_for_file,
	is_component_in_short_list_for_file,
	is_application_in_short_list_for_file,
	program_file_pair_is_default_for_file,
	program_file_pair_is_in_short_list_for_file,
	add_to_short_list_for_file, remove_from_short_list_for_file,
	remove_default_for_item, set_default_for_item): wait_until_ready
	for required file attributes.

	* libnautilus-extensions/nautilus-program-choosing.c:
	(any_programs_available_for_file): wait_until_ready for required
	file attributes.

	* src/file-manager/fm-directory-view.c: (switch_location_and_view,
	create_open_with_gtk_menu, reset_bonobo_open_with_menu,
	activate_callback): Wait for the right file attributes.

	* src/nautilus-applicable-views.c: (got_file_info_callback),
	(nautilus_navigation_info_new): Wait for the right file
	attributes. (no wait_until_ready).
	
	* src/nautilus-sidebar.c: (nautilus_sidebar_destroy,
	nautilus_sidebar_update_buttons, nautilus_sidebar_update_all),
	nautilus_sidebar_set_uri): Monitor the file the sidebar is
	displaying, and update when it's attributes change.
	
	* src/nautilus-window-manage-views.c
	(nautilus_window_set_content_view): Wait for the right file
	attributes. (no wait_until_ready).

	* src/nautilus-window.c: (nautilus_window_destroy,
	view_menu_choose_view_callback, view_menu_vfs_method_callback,
	nautilus_window_real_load_content_view_menu,
	nautilus_window_load_content_view_menu): Wait for the right
	attributes. (no wait_until_ready in this chain).
	
	* test/test-nautilus-mime-actions-set.c (main): Wait for the right attributes.
	* test/test-nautilus-mime-actions.c (main): Wait for the right attributes.

2000-10-18  Darin Adler  <darin@eazel.com>

	* components/notes/nautilus-notes.c: (make_notes_view):
	* src/nautilus-location-bar.c: (nautilus_location_bar_new):
	* src/nautilus-simple-search-bar.c:
	(nautilus_simple_search_bar_new):
	Use calls by new names.
	
	* libnautilus-extensions/nautilus-undo-signal-handlers.c:
	(editable_key_press_event), (nautilus_undo_editable_set_undo_key):
	Disabled the undo-key part of undo also. The old code was actually
	harmless because it got the name of the signal wrong, but it's
	better to have it disabled.
	* src/nautilus-shell-ui.xml: Added a comment that points out the
	2nd place where undo has been disabled.
	
	* libnautilus/nautilus-clipboard.h:
	* libnautilus/nautilus-clipboard.c: (cut_callback),
	(copy_callback), (paste_callback), (clear_callback),
	(set_paste_sensitive_if_clipboard_contains_data),
	(focus_changed_callback), (target_destroy_callback),
	(nautilus_clipboard_set_up_editable), (first_focus_callback),
	(control_destroyed_callback),
	(nautilus_clipboard_set_up_editable_in_control),
	(disconnect_set_up_in_control_handlers):
	Some minor cleanup of the clipboard code. Includes bug fixes for
	items that are already in focus when the clipboard is hooked up
	(should never happen), and a fix for code that was using
	gtk_signal_disconnect on something that was connected with
	gtk_signal_connect_while_alive (doesn't work). Also got rid of
	misguided code that was copying a Bonobo_UIContainer with memcpy
	(since Bonobo_UIContainer is just a pointer).
	
	* src/Makefile.am:
	* src/nautilus-window-private.h:
	Changed source file name from nautilus-service-menu to
	nautilus-service-ui, since it does a toolbar item, not just a
	menu.
	
	* src/nautilus-window-service-ui.c:
	* src/nautilus-window-service-ui.h:
	A second cut at the service UI code. It no longer leaks a UI
	component.

	* src/nautilus-window.c: (nautilus_window_constructed),
	(nautilus_window_get_ui_container): Use our own pointer to the UI
	container instead of asking the shell UI for its container.

2000-10-18  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3862 (Icon view reversed after looking at list view)
	Fixed bug 916 (workaround for Bonobo radio item bug)
	Also fixed bug where the "tighter layout" and "reversed order"
	items in the context menu were doing nothing at all.

	* src/file-manager/fm-icon-view.c: 
	Removed "updating_toggle_menu_item" from Details struct.
	(set_tighter_layout): New helper function, handles the code
	common to the Bonobo and GTK menu callbacks.
	(gtk_tighter_layout_callback), (gtk_sort_reversed_callback),
	New functions used for GTK context menu. Will go away when 
	we use Bonobo for context menus.
	(tighter_layout_state_changed_callback),
	(sort_reversed_state_changed_callback): Use passed state value,
	including checking for empty state (empty state happens when
	component is removed from container). This lets us eliminate the
	checks for "updating_toggle_item".	
	(handle_radio_item): Removed check for updating_toggle_menu_item.
	This already worked correctly without this check.
	(insert_one_context_menu_item),	(append_one_context_menu_item),
	(append_one_toggle_context_menu_item): Tweaked these to pass in
	an initial toggle state for toggle menu items, to avoid setting
	the toggle state after the callback has been attached. All this
	code will be removed when we switch to Bonobo for context menus.
	(fm_icon_view_create_selection_context_menu_items),
	(fm_icon_view_create_background_context_menu_items),
	(update_layout_menus):

2000-10-18  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-preferences-item.c:
	(preferences_item_create_font_family):
	Remove the fixed font from the list of available fonts.  Its a bad
	one to use because it crashes the SideBar sometimes.  The problem
	is that the fixed font doesnt support the "find the largest
	fitting font" game that the SideBar plays for long strings.

	Its kinda lame to fix the bug by yanking the font, but we have
	many font improvements planned for after PR2 which will render
	this issue irrelevant.

	Fixes bug 2256.
	
2000-10-18  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/rsvg-ft.c: (rsvg_ft_measure_or_render_string),
	(rsvg_ft_render_string), (rsvg_ft_measure_string):
	* librsvg/rsvg-ft.h:
	Add new function to only measure a string without doing all the
	rendering work.
	
	* libnautilus-extensions/nautilus-scalable-font.c:
	(nautilus_scalable_font_measure_text):
	Use the new rsvg_ft string measuring api.

	Fixes bug 2544.
	
2000-10-18  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-font-factory.c:
	(font_hash_node_lookup_with_insertion),
	(nautilus_font_factory_get_fallback_font):
	* libnautilus-extensions/nautilus-gdk-extensions.c:
	(nautilus_get_largest_fitting_font), (nautilus_gdk_font_get_bold):
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_widget_set_font_by_name):
	* libnautilus-extensions/nautilus-icon-factory.c: (embed_text):
	* src/nautilus-zoom-control.c: (draw_number):
	Use gdk_fontset_load() instead of gdk_font_load() to make i18n
	work better.  Also marked some hard-coded fonts fot localization.
	There is still an open bug on writing useful comments about these
	for the localizers.  Fixes bugs 3143 and 3144.

	Thanks to Yukihiro Nakai <ynakai@redhat.com> for pointing these
	problems out and providing patches to fix them.
	
	* src/nautilus-profiler.c: (window_print_button_callback),
	(window_save_button_callback), (dump_dialog_new),
	(dump_dialog_show):
	Same as above plus mark some strings for localization and add
	assertions to currently unimplemented functions.
	
2000-10-18  Maciej Stachowiak  <mjs@eazel.com>

	* ChangeLog: rolled over to ChangeLog-20001018.

