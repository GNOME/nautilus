2006-08-21  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.15.92 ===

2006-08-21  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release
	
2006-08-21  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Don't crash when quickly changing user or group.
	Patch from Christian Neumair

2006-08-17  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-recent.c (nautilus_recent_add_file):
	Fix double free.
	Patch from Rouslan Solomakhin

2006-08-15  Federico Mena Quintero  <federico@novell.com>

	* src/nautilus-main.c (main): Call setlocale() before we try to
	obtain any translations.  Fixes bug #342147.  Patch by Stanislav
	Brabec <sbrabec@suse.cz>.

2006-08-15  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Fix intltool req.

2006-08-08  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.15.91 ===

2006-08-08  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.in:
	Require new eel.

2006-08-08  Vincent Untz  <vuntz@gnome.org>

	Use GTK+ to handle recent documents.

	* configure.in: require GTK+ 2.10
	* cut-n-paste-code/libegg/Makefile.am:
	* cut-n-paste-code/libegg/egg-recent-*: kill
	* libnautilus-private/nautilus-recent.[ch]: (nautilus_recent_get_model):
	renamed to nautilus_recent_get_manager()
	(nautilus_recent_add_uri): new, to make it easier to use
	gtk_recent_manager_add_full()
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_launch_application): use nautilus_recent_add_uri()
	instead of old egg code
	(activate_callback): ditto

2006-08-08  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-directory-async.c (read_dot_hidden_file):
	Follow symlinks when reading .hidden files.

2006-08-08  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-directory-background.c:
	Do background change comparison in eel instead (#349961)
	Patch from Matthias Clasen
	
2006-08-08  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	Fix down when in the rightmost column in the next to last row (#316117)
	Based on patch from Nelson Benitez

2006-08-08  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c:
	Handle desktop drops from panel. (#347673)
	Patch from Christian Neumair

2006-08-04  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-directory-async.c:
	(dequeue_pending_idle_callback): Revert patch from #336051
	as it breaks the file update machinery. Fixes #348097.

2006-07-25  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-dnd.c:
	Rename nautilus_drag_default_drop_action_for_url to
	nautilus_drag_default_drop_action_for_netscape_url.
	Don't offer netscape URL drags.

	* libnautilus-private/nautilus-dnd.h: Rename
	NAUTILUS_ICON_DND_URL(_TYPE) to NAUTILUS_ICON_DND_NETSCAPE_URL(_TYPE)
	and nautilus_drag_default_drop_action_for_url to
	nautilus_drag_default_drop_action_for_netscape_url.

	* libnautilus-private/nautilus-file-operations.c:
	(nautilus_file_operations_new_file_from_template):
	Filter out special URIs, handle gnome_vfs_uri_new() failure.

	* libnautilus-private/nautilus-file-utilities.c:
	(test_uri_exists), (nautilus_ensure_unique_file_name):
	Handle gnome_vfs_uri_new() failure by returning NULL.

	* libnautilus-private/nautilus-icon-container.c:
	* libnautilus-private/nautilus-icon-container.h:
	Rename HANDLE_URL signal to HANDLE_NETSCAPE_URL.

	* libnautilus-private/nautilus-icon-dnd.c:
	* libnautilus-private/nautilus-icon-dnd.h:
	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	* libnautilus-private/nautilus-tree-view-drag-dest.h:
	Don't offer netscape URL drags, prefer netscape URL drops over
	"text/uri-list" drops. Also rename DND_URL symbols to DND_NETSCAPE_URL.

	* libnautilus-private/nautilus-link-desktop-file.c:
	(nautilus_link_desktop_file_local_create):
	Handle trash, desktop and search URIs, handle
	NULL retval of nautilus_ensure_unique_file_name.

	* src/nautilus-location-bar.c:
	* src/nautilus-spatial-window.c:
	* src/file-manager/fm-list-model.c:
	Don't offer/handle netscape URL drags.

	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view:
	Rename DND_URL symbols to DND_NETSCAPE_URL.

	Should fix #347673.

2006-07-25  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file.c (nautilus_file_get_selinux_context):
	Translate the selinux context from raw form when displayin.

2006-07-25  Alexander Larsson  <alexl@redhat.com>

	* cut-n-paste-code/gsequence/gsequence.[ch]:
	Import the latest EggSequence which supposedly fixes a
	bunch of bugs.
	
	* src/file-manager/fm-list-model.c:
	Fix to use new function names of EggSequence	
	
2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post-release version bump

=== nautilus 2.15.90 ===

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

	* configure.in:
	Require eel 2.15.90

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-main.c: (main):
	Unref GnomeProgram at the end. (#348429)

	Patch from Christian Persch <chpe@gnome.org> 

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-file-management-properties.c:
	(nautilus_file_management_properties_dialog_setup):
	* src/nautilus-file-management-properties.glade:
	Remove the "always use text-entry location bar" checkbox from the
	preferences page.

	* src/nautilus-navigation-window.[ch]: (location_button_create),
	(nautilus_navigation_window_instance_init),
	(nautilus_navigation_window_destroy):
	Add a tooltip to the new location bar toggle button.

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-properties-window.c:
	(permission_combo_update): Add a translator comment for
	permission combo box labels. (#347764)

	Patch from Hendrik Richter  <hendi@gnome-de.org>

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-window-private.h (NautilusNavigationWindowDetails):
	Add a location_button field.

	* src/nautilus-navigation-window.c
	(nautilus_navigation_window_instance_init): Create the
	location_button.
	(location_button_toggled_cb): New callback.  Changes the
	preference for toggling between the path bar and the location bar.
	(always_use_location_entry_changed): Toggle the button as
	appropriate.

	Add a button to the location bar to toggle betwen the path bar
	and a location entry. (#347991)

	Patch from Federico Mena Quintero  <federico@novell.com>

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-icon-factory.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-tree-view.c: (create_popup_menu):
	* src/nautilus-window-menus.c:
	Use trash icons from the icon naming specification for trash
	related operations. (#340321)

	Patch from Rodney Dawes  <dobey@novell.com>

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (add_place), (update_places):
	Take the sidebar as parameter and refilter it after adding.

	(reorder_bookmarks): Implement reordering of bookmarks.

	(drag_data_delete_callback), (drag_data_received_callback),
	(drag_motion_callback): Handle dragging of tree rows.

	(nautilus_places_sidebar_init)
	(_shortcuts_model_filter_class_init),
	(_shortcuts_model_filter_init),
	(shortcuts_model_filter_row_draggable),
	(shortcuts_model_filter_drag_data_get),
	(shortcuts_model_filter_drag_source_iface_init),
	(shortcuts_model_filter_new):
	Implement GtkTreeDragSource.

	(get_selected_iter), (bookmarks_check_popup_sensitivity),
	(loading_uri_callback): Use the filter model.

	Enable reordering of bookmarks in the places sidebar via
	Drag'n'Drop. (#319022)

	Patch from Xavier Claessens <xclaesse@gmail.com>

2006-07-24  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-search-engine-beagle.c:
	(nautilus_search_engine_beagle_new): Check whether daemon is
	running as beagle_client_new doesn't fail when a stale socket
	file exists.

	Patch from Jürg Billeter <j@bitron.ch>

2006-07-24  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	* libnautilus-extension/Makefile.am:
	Add extension versioning infrastructure and add nautilus-menu.[ch].

	* libnautilus-extension/nautilus-menu-item.[ch]:
	Add and handle a 'menu' property and add a function
	nautilus_menu_item_set_submenu.

	* libnautilus-extension/nautilus-menu.[ch]:
	New files implementing a submenu item.

	* src/file-manager/fm-directory-view.c: (add_extension_menu_items),
	(reset_extension_actions_menu):
	Add extension menu items recursively.

	* libnautilus-extension/nautilus-menu-provider.h:
	Update include.

	Extend extension API to support submenus. (#314579)

	Patch from Raffaele Sandrini  <rasa@gmx.ch>

2006-07-11  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post-release version bump

=== nautilus 2.15.4 ===

2006-07-11  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

	* configure.in:
	Bump version to 2.15.4
	Require eel 2.15.4

2006-07-11  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-directory-async.c:
	(dequeue_pending_idle_callback): Never add a file to both
	the added_files and changed_files lists. Don't ref an existing
	file without adding it to the changed_file list. (#336051)

	Patch from Christian Neumair  <chris@gnome-de.org>

2006-07-11  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file-dnd.[ch]:
	Add functions nautilus_drag_can_accept_files and
	nautilus_drag_can_accept_info.

	* libnautilus-private/nautilus-icon-dnd.c: (receive_dropped_url),
	(receive_dropped_uri_list), (receive_dropped_text),
	(drag_data_received_callback):
	Accept the entire drag context as parameter and use
	nautilus_icon_container_find_drop_target.

	(nautilus_icon_container_find_drop_target):
	(nautilus_icon_dnd_update_drop_target):
	Use nautilus_drag_can_accept_info.

	* libnautilus-private/nautilus-marshal.list:
	Add new signature.

	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	Add function get_drop_target_uri_at_pos and use it in the drop
	handlers to determine the target uris for actions.
	Rename get_drop_target to get_drop_target_uri_for path.

	(nautilus_tree_view_drag_dest_class_init):
	Adapt to new drag handler signatures.

	(set_widget_highlight):
	Fix DND highlighting of an empty tree view.

	(drag_motion_callback):
	Ignore drags on the header.

	* libnautilus-private/nautilus-tree-view-drag-dest.[ch]:
	* libnautilus-private/nautilus-icon-container.[ch]:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Add a target/parent uri parameter to the drop handler functions.

	* src/file-manager/fm-directory-view.[ch]:
	Add handling for the additional target parameter to support
	drops of URIs, URLs and text to subfolders.

	Patch from Christian Neumair  <chris@gnome-de.org>

2006-07-08  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file-utilities.c:
	* libnautilus-private/nautilus-file-utilities.h:
	Add nautilus_find_existing_uri_in_hierarchy.
	Remove undefined in_gnome_path helper declarations.

	* src/nautilus-pathbar.c:
	* src/nautilus-pathbar.h:
	Make nautilus_path_bar_clear_buttons public.

	* src/nautilus-window-manage-views.c: (viewed_file_changed_callback):
	If the displayed location was removed, and it has an existing parent,
	navigate window to this parent. Fixes #336724.

2006-07-06  William Jon McCann  <mccann@jhu.edu>

	* libnautilus-private/nautilus-icon-factory.c:
	(get_special_icon_for_file):
	* src/nautilus-window-menus.c:
	Use nautilus-cd-burner icon instead of gnome-dev-cdrom
	for burn:///.

2006-06-21  Christian Neumair  <chris@gnome-de.org>

	Add complete session management, remember maximization state and type
	of open windows, save history on quit.

	* libnautilus-private/nautilus-global-preferences.c
	* libnautilus-private/nautilus-global-preferences.h:
	Add NAUTILUS_PREFERENCES_NAVIGATION_WINDOW_MAXIMIZED setting.

	* libnautilus-private/nautilus-metadata.h:
	Add NAUTILUS_METADATA_KEY_WINDOW_MAXIMIZED key.

	* src/nautilus-application.c:
	* src/nautilus-application.h:
	Save session on session save request, add
	nautilus_application_load_session(), move
	initial navigational geometry handling to
	nautilus_application_create_navigation_window,
	maximize window if 
	NAUTILUS_PREFERENCES_NAVIGATION_WINDOW_MAXIMIZED
	is set.

	* src/nautilus-main.c:
	Add "--load-session" parameter.

	* src/nautilus-shell-interface.idl:
	* src/nautilus-shell.c:
	Add load_session CORBA method.

	* src/nautilus-navigation-window.c:
	* src/nautilus-spatial-window.c:
	Save maximized state when appropriate.

	* src/nautilus-window-manage-views.c:
	Load maximized state for spatial windows,
	remove navigation window geometry handling.

	* src/nautilus-window.c:
	* src/nautilus-window-private.h:
	Add nautilus_add_to_history_list_no_notify.

2006-06-16  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-extension/nautilus-menu-provider.[ch]:
	Add items_updated signal
	
	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-signaller.[ch]:
	* src/nautilus-signaller.[ch]:
	* src/Makefile.am:
	Move NautilusSignaller to libnautilus-private.
	Add popup_menu_changed signal.
	
	* src/nautilus-application.c:
	Signal popup_menu_changed when a menu provider emits items_updated.
	
	* src/file-manager/fm-directory-view.c:
	* src/nautilus-window.c:
	Handle popup_menu_changed.
	
	* src/nautilus-emblem-sidebar.c:
	* src/nautilus-history-sidebar.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-navigation-window.c:
	* src/nautilus-property-browser.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-menus.c:
	Update includes.

	Patch from RUAUDEL Frédéric <ruaudel@embl.fr>

2006-06-16  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-column-utilities.c:
	Add selinux context column
	
	* libnautilus-private/nautilus-directory-async.c:
	* libnautilus-private/nautilus-file-private.h:
	* libnautilus-private/nautilus-file.[ch]:
	Get selinux context for all files.
	Add nautilus_file_can_get_selinux_context and nautilus_file_get_selinux_context
	Add selinux_context string attribute.
	
	* src/file-manager/fm-properties-window.c:
	Display selinux context in permissions page.

2006-06-16  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-global-preferences.[ch]:
	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	Add show_advanced_permissions setting
	Remove show_special_flags setting, its always on in advanced mode.
	
	* libnautilus-private/nautilus-file-operations.[ch]:
	Add nautilus_file_set_permissions_recursive
	
	* src/file-manager/fm-properties-window.c:
	Change permission page. Implement both simple and advanced mode.
	Add recursive permissions setting.
	HIGify some spacing.

2006-06-12  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post-release version bump

=== nautilus 2.15.2 ===

2006-06-12  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2006-05-30  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-factory.c:
	* libnautilus-private/nautilus-thumbnails.c:
	* libnautilus-private/nautilus-thumbnails.h:
	Use GdkPixbufLoader for thumbnailing.

2006-05-29  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-factory.c: (load_pixbuf_svg):
	Limit max. returned SVG icon size to requested icon size.

2006-05-24  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file-utilities.c:
	(nautilus_file_operations_copy_move):
	Use gnome_vfs_volume_monitor_get_volume_for_path instead of
	nautilus_file_get_enclosing_volume.

	* libnautilus-private/nautilus-file-utilities.c:
	* libnautilus-private/nautilus-file-utilities.h:
	Remove nautilus_get_enclosing_volume.

2006-05-24  Paolo Borelli  <pborelli@katamail.com>

	* src/nautilus-information-panel.c:
	* src/nautilus-window-bookmarks.c:
	* src/file-manager/fm-properties-window.c:

	Use g_signal_connect_data instead of the outdated eel equivalent.

2006-05-24  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Remove unused include of eel-cell-renderer-pixbuf-list.h

2006-05-24  Paolo Borelli  <pborelli@katamail.com>

	* libnautilus-private/nautilus-file.c (nautilus_file_get_uri_scheme):
	use gnome_vfs_get_uri_scheme instead of eel_uri_get_scheme.

2006-05-17  Francisco Javier F. Serrador  <serrador@cvs.gnome.org>

	* nautilus-folder-handler.desktop.in: Add internationalization
	* po/POTFILES.in: Add the file.

2006-05-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-container.c (fm_icon_container_get_icon_images):
	Only pass TRUE for embedding_text if we actually read a top-left text.
	Based on patch from Rene Hausleitner (#335435)

2006-05-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: 
	* src/nautilus-places-sidebar.c:
	Don't allow floppy formating if the floppy is mounted,
	since gfloppy can't handle that. (#125819)
	Patch from Xavier Claessens

2006-05-16  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post-release version bump.

=== nautilus 2.15.1 ===

2006-05-16  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

2006-05-16  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-icon-container.c: (icon_get_size),
	(icon_set_size), (icon_toggle_selected),
	(nautilus_icon_container_move_icon), (keyboard_stretching),
	(end_stretching), (nautilus_icon_container_update_icon),
	(assign_icon_position), (nautilus_icon_container_add),
	(nautilus_icon_container_is_stretched),
	(nautilus_icon_container_unstretch),
	(nautilus_icon_container_freeze_icon_positions):
	* libnautilus-private/nautilus-icon-container.h:
	* libnautilus-private/nautilus-icon-dnd.c: (handle_local_move):
	* libnautilus-private/nautilus-icon-private.h:
	* src/file-manager/fm-icon-view.c:
	(get_stored_icon_position_callback),
	(icon_position_changed_callback):
	Cleanup to merge the x any y icon scale factors into one variable.

	Patch from Christian Neumair <chris@gnome-de.org>

2006-05-15  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (update_places_cb),
	(volume_unmounted_callback), (drive_disconnected_callback),
	(drive_connected_callback),
	(nautilus_places_sidebar_set_parent_window):
	Update the places on drive-connected and drive-disconnected
	signals too. Delay the update for the volume-unmounted signal
	with an idle callback to work around gnome-vfs removing the
	volume only after we received the signal.

	Patch from Xavier Claessens <xclaesse@gmail.com>

2006-05-09  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-window-manage-views.c:
	(got_file_info_for_view_selection_callback):
	Re-set viewed_file after a location change failed. Prevents
	crashing over an assertion in viewed_file_changed_callback
	on slow filesystems. Fixes #339965.

2006-05-08  Federico Mena Quintero  <federico@novell.com>

	* libnautilus-private/nautilus-file-operations.c
	(handle_transfer_ok): Don't special-case the first 0 bytes of the
	file in the case of reporting actual copy/move progress.  It is
	fine to update both the labels and the sizes every time.  Fixes
	http://bugzilla.gnome.org/show_bug.cgi?id=341064
	https://bugzilla.novell.com/show_bug.cgi?id=66073

2006-05-08  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (add_place), (update_places),
	(check_visibility), (bookmarks_check_popup_sensitivity),
	(get_selected_iter), (rename_selected_bookmark),
	(remove_selected_bookmarks), (mount_shortcut_cb),
	(unmount_shortcut_cb), (eject_shortcut_cb),
	(nautilus_places_sidebar_init):
	Add volume data to the list store and use it to show
	an unmount command for network volumes. (#316184)

	Patch from Xavier Claessens <xclaesse@gmail.com>

2006-05-07  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-dnd.c:
	(nautilus_drag_drop_action_ask),
	(nautilus_drag_drop_background_ask):
	* src/file-manager/fm-tree-view.c: (create_popup_menu):
	* src/nautilus-places-sidebar.c:
	(bookmarks_build_popup_menu):
	Use eel_gtk_menu_append_separator.

	* src/nautilus-places-sidebar.c:
	(bookmarks_check_popup_sensitivity):
	Use eel_gtk_widget_set_shown.

2006-05-07  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-query-editor.c: (type_combo_changed):
	Fix typo in function name: s/availible/available/ (#326053)

	* configure.in:
	Require eel 2.15.1

2006-05-04  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-navigation-action.c:
	(nautilus_navigation_action_class_init), (disconnect_proxy):
	Disconnect signal handlers registered when connecting proxies.

2006-05-03  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (volume_op_callback):
	(row_activated_callback), (bookmarks_popup_menu_detach_cb),
	(eject_for_type), (set_visibility),
	(bookmarks_check_popup_sensitivity), (get_selected_drive),
	(mount_shortcut_cb), (unmount_shortcut_cb), (eject_shortcut_cb),
	(format_shortcut_cb), (bookmarks_build_popup_menu):
	Add mount, unmount, eject and format menu items to the popup menu
	of drives in the places sidebar. (#316184)

	Based on a patch from Xavier Claessens <xclaesse@gmail.com>

2006-05-01  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-window-menus.c: (action_about_nautilus_callback):
	Adapt to new GtkAboutDialog behaviour and use wrap-license.
	Makes the close button work again. Fixes #336520.
	
	Patch from Christian Persch <chpe@gnome.org> 

2006-05-01  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-query-editor.c: (location_row_create_widgets):
	Fix typo in the query filechooser window title. (#325284)

2006-05-01  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-query-editor.c: (nautilus_query_editor_add_row),
	(finish_first_line):
	Fix wording: Use "criterion" instead of "criterium". (#331682)

	Patch from Farzaneh Sarafraz <farzaneh@farsiweb.info>

2006-05-01  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-program-choosing.c:
	(application_cannot_open_location):
	Remove bogus period from strings. (#336909)

	Patch from Javier F. Serrador <serrador@tecknolabs.com>

2006-05-01  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file-operations.c:
	(handle_transfer_overwrite):  Use the same phrasing and 
	format as the GTK+ overwrite dialog.  Also, per the HIG
	convert the dialog to a confirmation alert since the user's 
	command may destroy data. (#325188)

	Patch from Dennis Cranston <dennis_cranston@yahoo.com>

2006-05-01  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-image-properties-page.c: (append_tag_value_pair),
	(append_exifdata_string):
	Prefer "Date Taken" and "Date Digitized" over "Date Modified" when
	deciding which date to show from image metadata. (#331810)

	Patch from Pat Suwalski <pat@suwalski.net>

2006-04-28  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	* po/LINGUAS:
	Update handling of po/LINGUAS for new instructions.  Refer
	to http://live.gnome.org/GnomeGoals/PoLinguas

	Patch from Brian Pepple  <bdpepple@gmail.com>

2006-04-27  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	(file_get_volume_and_drive),
	(action_self_mount_volume_callback),
	(action_self_unmount_volume_callback),
	(action_self_eject_volume_callback),
	(action_self_format_volume_callback),
	(file_get_volume_and_drive),
	(file_should_show_self),
	(real_update_menus_volumes):
	* src/file-manager/fm-tree-view.c:
	(create_popup_menu):
	* src/file-manager/nautilus-directory-view-ui.xml:
	Allow to mount/unmout/eject/format a volume when displaying its
	activation URI.

2006-04-26  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file.c:
	(nautilus_file_denies_access_permission),
	(nautilus_file_can_get_permissions),
	(nautilus_file_can_set_permissions):
	If no ACCESS file info field is available, pretend to have full
	access. If no PERMISSIONS field is available, pretend to have full
	permission control.

2006-04-26  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-canvas-item.c:
	Fix width of text selection in text-below-icons mode.
	(it was to wide.)
	
2006-04-26  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Remove popt
	
	* src/nautilus-connect-server-dialog-main.c:
	* src/nautilus-main.c:
	Convert from popt to goption.
	Based on patch from Philip Van Hoof

2006-04-25  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-main.c:
	Remove icon registration, as its no longer needed with gtk 2.9.
	
	* src/nautilus-window-menus.c:
	(nautilus_menus_append_bookmark_to_menu):
	Remove bogus TODO.

2006-04-25  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.15.1
	2.14 development continues on gnome-2-14 branch.

==== gnome-2-14 branched from here ===
	
2006-04-25  Christian Neumair  <chris@gnome-de.org>

	* configure.in: 
	Require gnome-vfs 2.14.2, gnome_vfs_volume_compare fixes.

	* src/file-manager/fm-tree-view.c: (create_tree):
	Use gnome_vfs_volume_compare to sort volumes from the volume monitor.

2006-04-18  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-attributes.h:
	* libnautilus-private/nautilus-directory-async.c:
	* libnautilus-private/nautilus-directory-private.h:
	* libnautilus-private/nautilus-file-private.h:
	* libnautilus-private/nautilus-file.c:
	* libnautilus-private/nautilus-file.h:
	Add  LARGE_TOP_LEFT_TEXT attribute and change the text size for
	the normal top-left text to 10x5.
	Add need_large argument to nautilus_file_peek_top_left_text and
	nautilus_extract_top_left_text.
	
	* libnautilus-private/nautilus-icon-canvas-item.[ch]
	Make details an instance-private instead of allocating separately.
	Add _set_is_visible() and only keep PangoLayouts cached for
	visible icons.
	
	* libnautilus-private/nautilus-icon-container.[ch]:
	* src/file-manager/fm-icon-container.c:
	Monitor large embedded text for larger icons.
	Call nautilus_icon_canvas_item_set_is_visible as needed.
	
	* libnautilus-private/nautilus-icon-factory.[ch]:
	Limit never-free recently used cache to 20 items.
	Free other unused cache items after a 100 sec.

2006-04-15  Martin Wehner  <martin.wehner@gmail.com>

	* po/LINGUAS:
	Remove newlines to fix build with CVS intltool. (#338423) 

2006-04-15  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (remove_selected_bookmarks):
	Don't delete the first bookmark if pressing del key on an
	undeletable item. Fixes #338377.

2006-04-14  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-spatial-window.c: (action_add_bookmark_callback):
	Don't add location bookmark for desktop windows. Fixes #334860.

	Patch from Christian Neumair <chris@gnome-de.org>

2006-04-11  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post-release version bump.

=== nautilus 2.14.1 ===

2006-04-11  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

	* configure.in:
	Require eel 2.14.1

2006-04-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-side-pane.c: (nautilus_side_pane_init):
	Use smaller close icon for the sidebar.

	Patch from Yang Hong <yanghong@ccoss.com.cn>

2006-04-10  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-icon-dnd.c:
	(get_data_on_first_target_we_support):
	Determine drop target by iterating through drop container
	target list instead of drag context DND list. (#337588)

	Patch from Christian Neumair <chris@gnome-de.org>

2006-04-10  Martin Wehner  <martin.wehner@gmail.com>

	* po/LINGUAS: New file listing all supported languages.

	* configure.in: Use po/LINGUAS instead of including all languages
	directly in this file. See the wiki for more information:
	http://live.gnome.org/GnomeGoals/PoLinguas

	Patch from Brian Pepple  <bdpepple@gmail.com>

2006-04-08  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_update),
	(nautilus_file_operations_progress_set_operation_string):
	Update progress dialog when setting its operation string,
	also set operation string during preflight.

2006-04-08  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(set_script_environment_variables),
	(unset_script_environment_variables):
	* src/nautilus-main.c: (main):
	* src/nautilus-shell.c: (corba_restart):
	Use g_(un)setenv instead of their eel_ counterparts.

2006-04-07  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (add_place), (update_places),
	(mount_volume_callback), (row_activated_callback),
	(bookmarks_popup_menu_detach_cb), (nautilus_places_sidebar_init):
	Adapt the same policy for showing drives and volumes in the places
	sidebar as in computer:/// and the gtk filechooser: Show unmounted
	but user-visible drives and mount them on activation. (#321320)

	Patch from Xavier Claessens <xclaesse@gmail.com>

2006-04-07  Martin Wehner  <martin.wehner@gmail.com>

	* data/patterns/.striated.png:
	* data/patterns/Makefile.am:
	Remove unused pattern file. (#337353)

2006-03-30  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_get_loading):
	* src/file-manager/fm-directory-view.h:
	Add fm_directory_view_get_loading().

	* src/file-manager/fm-icon-view.c: (file_has_lazy_position),
	(fm_icon_view_add_file), (fm_icon_view_screen_changed):
	Use fm_directory_view_get_loading() to determine whether view is
	loaded. If it is not yet loaded, don't position icons lazily.

2006-03-24  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-connect-server-dialog-main.c: (main):
	Get the command line options and pass them on to the dialog.

	* src/nautilus-connect-server-dialog.c: (connect_to_server),
	(nautilus_connect_server_dialog_init), (setup_for_type):
	Use new MethodInfo struct to construct the UI.
	(display_server_uri): New function for initialising the UI based
	on the broken down parts of the URI.
	(nautilus_connect_server_dialog_new): Use display_server_uri.
	(get_method_description): New helper function.
	(port_insert_text): Accept more than one digit at a time.

	Display broken down URIs in 'Connect to Server' properly. (#332848)

	Patch from Nate Nielsen <nielsen@memberwebs.com>

2006-03-22  Daniel Drake  <dsd@gentoo.org>

	* libnautilus-private/nautilus-icon-factory.c: Only consider
	the filename suffix when deciding if a file is an SVG image.
	Bug #330019.

2006-03-22  Paolo Borelli  <pborelli@katamail.com>

	* src/nautilus-application.c: use g_strv_length instead of a 
	private copy and gnome_vfs_make_uri_from_shell_arg instead of
	the old eel_make_uri_from_shell_arg. Bug #334077.

2006-03-22  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(pattern_select_response_cb), (select_pattern):
	Add help button to the Select Pattern dialog. (#331443)

	* src/nautilus-connect-server-dialog.c: (response_callback),
	(nautilus_connect_server_dialog_init):
	Add help button to the Connect to Server dialog. (#334330)

	* src/nautilus-location-dialog.c: (response_callback),
	(nautilus_location_dialog_init):
	Add help button to the Open Location dialog (#334293)

2006-03-14  Federico Mena Quintero  <federico@novell.com>

	* src/nautilus-window-menus.c: (nautilus_window_initialize_menus):
	Don't set the visibility of the "burn CD" action here.
	(nautilus_window_initialize_menus_constructed): New public
	function.  Only disable NAUTILUS_ACTION_GO_TO_BURN_CD if we are in
	a window which has a menubar.  This prevents calling
	have_burn_uri() unnecessarily for the desktop window, as this is
	an expensive operation during login (up to 1 second!).  The way
	have_burn_uri() works is by creating a "burn:///" URI and seeing
	if it is valid, but this makes gnome-vfs load libmapping.so from
	nautilus-cd-burner; this takes a long time during login.

	* src/nautilus-window-private.h: Added prototype for
	nautilus_window_initialize_menus_constructed().

	* src/nautilus-window.h: New prototype for
	nautilus_window_has_menubar_and_statusbar().

	* src/nautilus-window.c
	(nautilus_window_has_menubar_and_statusbar): New function; returns
	whether the window should have a menubar and statusbar.  This
	depends on the window_type from the class structure.
	(nautilus_window_constructor): Call
	nautilus_window_initialize_menus_constructed().  We do it here so
	that its own call to nautilus_window_has_menubar_and_statusbar()
	will already have the right value for class->window_type.

2006-03-19  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-main.c: (register_icons):
	Speed up stock icon registration, as discussed on the mailing list:

	http://mail.gnome.org/archives/nautilus-list/2006-March/msg00036.html

	Also fixes #335158.

	* libnautilus-private/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move):
	Check whether enclosing volume for any of the source files is
	read-only, and set GNOME_VFS_XFER_TARGET_DEFAULT_PERMS in this case.
	Fixes #167102.

	* libnautilus-private/nautilus-file-utilities.c:
	* libnautilus-private/nautilus-file-utilities.h:
	Add nautilus_get_enclosing_volume.

2006-03-19  Martin Wehner  <martin.wehner@gmail.com>

	* nautilus-computer.desktop.in:
	* nautilus-folder-handler.desktop.in:
	* nautilus-home.desktop.in:
	* src/network-scheme.desktop.in:
	Add --no-desktop to the Exec command line options. (#326338)

	Patch from Saleem Abdulrasool

	* nautilus-computer.desktop.in:
	* nautilus-folder-handler.desktop.in:
	* nautilus-home.desktop.in:
	* nautilus.desktop.in:
	Remove obsolete X-Gnome-Bugzilla-OtherBinaries entry,
	none of the listed binaries does exist anymore.

2006-03-18  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/*.c:
	* src/file-manager/*.c:
	* src/*.c:
	Use gi18n.h instead of deprecated gnome-i18n.h header.

	* libnautilus-private/nautilus-query.c:
	(nautilus_query_to_readable_string):
	Mark string for translation.		

	* po/POTFILES.in:
	Add nautilus-query.c

	Patch from Wouter Bolsterlee <uws+gnome@xs4all.nl>

2006-03-17  Vladimer Sichinava  <alinux@siena.linux.it>

	* configure.in: Added "ka" Georgian to 
	ALL_LINGUAS.

2006-03-13  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post-release version bump.

=== nautilus 2.14.0 ===

2006-03-13  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.in:
	Update version to 2.14.0

2006-03-07  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: (drive_mounted_callback),
	(activation_drive_mounted_callback):
	Don't show error dialog if mount error is "".

2006-03-06  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-canvas-item.c:
	Fix text drawing in RTL mode in text beside icons.

2006-03-05  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-mime-actions.c:
	(nautilus_mime_actions_get_full_file_attributes):
	Don't request the mime list for activation, context menu and
	the view as menu anymore. It was once used for determining a
	specialized component for directories, but we don't support that
	anymore. Nowadays it just delays these operations and can cause
	auth dialogs when opening the popup menu. 

2006-03-05  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file.c:
	(nautilus_file_recompute_deep_counts):
	Add file to work queue of enclosing directory when recomputing
	deep count for the properties dialog. Fixes #169342.
	 
	Patch from Christian Neumair

2006-03-03  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window-manage-views.c:
	* src/nautilus-window-private.h:
	Close window when it gets put in the trash.

	Patch from Christian Neumair
	
2006-03-03  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-canvas-item.[ch]:
	measure text in nautilus_icon_canvas_item_get_text_rectangle to avoid
	icons jumping around
	
	* libnautilus-private/nautilus-icon-container.c:
	remove old workaround

	Patch from Christian Neumair

2006-03-02  Stanislav Brabec  <sbrabec@suse.cz>

	* configure.in: Add "km" to ALL_LINGUAS.

2006-03-01  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-directory-async.c:
	(new_files_cancel), (nautilus_directory_cancel):
	Cancel get_file_info calls for new files too. Fixes a crash
	when leaving a directory with pending calls (#152977).

2006-02-28  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (activate_callback):
	Close the window after the file activation, not before.
	Fixes a crash when middle-clicking a file (#330491).

2006-02-28  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file.c (nautilus_file_should_show_directory_item_count):
	Don't show directory count for smb shares, as that can cause
	lots of network traffic and auth dialogs.

2007-02-28  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-container.c:
	(get_cmp_point_x), (get_cmp_point_y),
	(compare_icons_horizontal_first), (compare_icons_vertical_first),
	(closest_in_90_degrees), (record_arrow_key_start):
	Use better icon points for comparing the position of two items in
	"Text Beside Icon" mode. Fixes keynav issues with items that have
	different icon sizes.

2006-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	(get_drop_path):
	Test for the right path in the break condition. Fixes an infinite
	loop when dragging an item over a non-folder child of an expanded 
	node in the list view, deadlocking the desktop.

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.13.92 ===

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c (fm_icon_view_add_file):
	Use lazy positioning for volumes only, not all desktop file icons,
	as this can cause icons to move around, and its mainly required
	for removable volumes anyway.

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window.[ch]:
	Don't shortcut the title change when the bookmark name changes.
	Fixes #331383
	Patch from Christian Neumair.

2006-02-26  Zbigniew Chyla  <mail@zbigniew.chyla.pl>

	Get users' and groups' names via a cache to avoid calling
	getpwuid/getgrgid too often (i.e. many times during single redraw).

	* libnautilus-private/Makefile.am: (libnautilus_private_la_SOURCES):
	Added nautilus-users-groups-cache.[ch]
	* libnautilus-private/nautilus-users-groups-cache.[ch]: New,
	implementation of cache for getpwuid/getgrgid results.
	* libnautilus-private/nautilus-file.c:
	(get_user_name_from_id): removed
	(get_real_name): accept "name + gecos" pair instead of "struct passwd".
	(get_user_and_real_name_from_id): get user name and gecos using
	nautilus_users_cache_* functions instead of using getpwuid directly.
	(nautilus_get_user_names): adjusted to changed signature of get_real_name.
	(nautilus_file_get_group_name): get group name using
	nautilus_groups_cache_get_name instead of using getgrgid directly.
	(nautilus_file_get_owner_as_string): get user name using
	nautilus_users_cache_get_name.

2006-02-26  Zbigniew Chyla  <mail@zbigniew.chyla.pl>

	Don't add all possible columns to GtkTreeView when initializing
	FMListView, only the ones we actually show. This way we avoid getting
	unnecessary data from the model, e.g. quite heavy "owner" and "group"
	columns with the default settings.

	* src/file-manager/fm-list-view.c:
	(apply_visible_columns_foreach, apply_visible_columns,
	apply_column_order): removed
	(apply_columns_settings): new function, updates a list of columns in
	GtkTreeView given both a list of visible columns and their ordering,
	replacement for apply_visible_columns and apply_column_order.
	(create_and_set_up_tree_view): when creating details->columns hash
	table, pass g_object_unref as value_destroy_func; before adding
	columns to the hash call g_object_ref+gtk_object_sink on them, don't
	add columns to the view, the appropriate columns will be added when
	applying the configuration; in order to apply initial columns
	settings, call apply_columns_settings (instead of
	apply_visible_columns + apply_column_order).
	(set_visible_columns_from_metadata_and_preferences,
	set_column_order_from_metadata_and_preferences): removed
	(set_columns_settings_from_metadata_and_preferences): new, replacement
	for set_visible_columns_* and set_column_order_*.
	(fm_list_view_begin_loading, column_chooser_changed_callback,
	column_chooser_use_default_callback, fm_list_view_reset_to_defaults,
	default_visible_columns_changed_callback,
	default_column_order_changed_callback): use newly added
	set_columns_settings_from_metadata_and_preferences.

2006-02-26  Zbigniew Chyla  <mail@zbigniew.chyla.pl>

	Avoid heavy operations inside "motion_notify_event" handler: don't
	call gtk_tree_model_row_changed (which causes updating the whole
	view), don't create new mouse cursor, change cursor only when
	necessary.
	As a bonus we avoid leaking hand cursor in nautilus and X server.

	* src/file-manager/fm-list-view.c:
	(hand_cursor): new global variable for storing hand cursor used in
	single click mode
	(motion_notify_callback): don't call gtk_tree_model_row_changed on
	the model when changing rows, it's very slow and unnecessary - GTK+
	automatically invalidates parts of the view occupied by old and new
	row; don't leak the hand cursor (GdkCursor), change mouse cursor
	only when necessary (from GDK_HAND2 to default and the other way
	round)
	(leave_notify_callback): don't call gtk_tree_model_row_changed on
	the current row in the model, GTK+ automatically redraws the current
	row
	(enter_notify_callback): in case single click mode is used, update
	details->hover_path and set hand cursor if necessary
	(create_and_set_up_tree_view): connect to enter_notify_event signal
	in addition to leave_notify_event.
	(fm_list_view_click_policy_changed): unref global hand_cursor and
	set it to NULL when changing to double click mode, create new cursor
	and assign it to hand_cursor when changing to single click one.
	(fm_list_view_finalize): free details->hover_path if necessary
	(fm_list_view_init): explicitly set details->hover_path to NULL

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window-manage-views.c:
	Don't close window if old file changed when we're loading
	a new one (#137027).
	Based on patch from Christian Neumair.

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	Correctly handle *_margins as pixel values, not world-coords.
	Based on patch from Christian Neumair.

2006-02-27  Federico Mena Quintero  <federico@novell.com>

	* libnautilus-private/nautilus-icon-container.c
	(finish_adding_new_icons): Do not place icons both in the
	no_position_icons and semi_position_icons lists!
	(snap_position): The final *x could be negative if (start_x + icon_width / 2)
	is less than SNAP_SIZE_X, as SNAP_NEAREST_HORIZONTAL() would
	return DESKTOP_PAD_HORIZONTAL.  Then, we would subtract icon_width / 2,
	getting a negative number.  So, we initially test for this and
	start that the first snap column.  The same reasoning applies to
	*y and the baseline.

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window.c:
	Allow saving a sidebar width of 0 (#331475)
	Patch from Christian Neumair

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-canvas-item.c (create_label_layout):
	Allow line-breaks after '-', '_', '.'
	(although not when a short number follows '.')
	Patch from Christian Neumair

2006-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (can_accept_file_as_bookmark),
	(can_accept_items_as_bookmarks), (drag_motion_callback),
	(bookmarks_drop_uris), (build_selection_list),
	(drag_data_received_callback):
	Only allow creation of bookmarks for directories. Fixes #328074.

2006-02-26  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-directory.c:
	(nautilus_directory_notify_files_removed):
	Plug potential leak.

2006-02-26  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (done_loading):
	Only use the idle reveal mechanism for the list view.

2006-02-26  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy), (reveal_selection_idle_callback),
	(done_loading):
	Call reveal_selection in an idle callback to work around a bug in
	GtkTreeView which produces buggy scroll states when the nodes have
	not yet been allocated. It would make the selection always the top
	row even when it should ignore alignment, among other oddities. 

2006-02-26  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-application.c: (nautilus_application_get_n_windows):
	* src/nautilus-application.h:
	* src/nautilus-window-manage-views.c:
	(got_file_info_for_view_selection_callback):
	Also consider desktop windows when deciding whether to fallback to
	home or not. Fixes #331605.

2006-02-25  Chao-Hsiung Liao  <j_h_liau@yahoo.com.tw>

	* configure.in: Add "zh_HK" to ALL_LINGUAS.
	
2006-02-24  Alexander Larsson  <alexl@redhat.com>
	
	* libnautilus-private/nautilus-directory-async.c:
	(directory_count_start):
	Use new GNOME_VFS_FILE_INFO_NAME_ONLY flag when counting files.
	This avoids lots of stats.
	
	* configure.in:
	Require vfs 2.13.92 (cvs for now) for the above.

2006-02-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (bookmarks_drop_uris):
	Don't leak bookmark.

2006-02-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (bookmarks_drop_uris):
	Resolve the dropped uris to their drop target, use the same naming
	logic as the bookmark menu and use gnome-fs-directory icon when adding.
	If something more fitting is available it will be updated anyway.
	Fixes #332235.

2006-02-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (bookmarks_edited):
	Set the has_custom_name_flag before setting the name - which would
	otherwise immediately commit the bookmarks to disk without the name.
	Fixes #327744.

2006-02-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (bookmarks_popup_menu):
	(bookmarks_button_press_event_cb):
	Open the popup menu non-modal and pass the button event on to the
	tree view. Makes a right click select the item under the cursor
	before bringing up the menu. Fixes #329778.

2006-02-21  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file.c:
	(nautilus_file_get_size_as_string_with_real_size):
	Add a cast to fix build for platforms where GnomeVFSFileSize
	is not defined as long long (e.g. AMD64). Fixes bug #331636. 

2006-02-21  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-error-reporting.[ch]:
	Add callback to fm_rename_file.

	* src/file-manager/fm-icon-view.c:
	Pass NULL as above callback
	
	* src/file-manager/fm-list-view.c:
	Don't activate file when renaming, delay until rename done.
	After rename, scroll to renamed file if not visibile, because it
	may have moved.

	Above based on initial patch by Nelson Benítez <gnel@cenobioracing.com>
	
	* src/file-manager/fm-list-model.c:
	On file change, if file was re-sorted emit rows_reordered.

	This fixes bug #326581
	
2006-02-19  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-mime-actions.c:
	(file_compare_by_mime_type), (file_compare_by_guessed_mime_type),
	(file_compare_by_uri_scheme),
	(nautilus_mime_get_default_application_for_files),
	(nautilus_mime_get_open_with_applications_for_files),
	(nautilus_mime_get_applications_for_files),
	(nautilus_mime_has_any_applications_for_files):
	Avoid redundant application lookups by sorting the files by mime type
	and skipping the ones which have the same mime type / parent uri
	combination as the previous one. Prevents nautilus from blocking for
	seconds when selecting many files of similar type. 

2006-02-17  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file-operations.c: (get_link_name):
	Fall back to locale encoding or force utf8 if the utf8 conversion
	of the link target filename fails. (#331379)

2006-02-15  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c (append_extension_pages):
	Pass the original files, not the target files to property
	page providers. (#329426)
	(create_permissions_page):
	Make sure we can get permissions from target before showing
	permissions page.

2006-02-13  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.13.91 ===

2006-02-13  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.in:
	Require eel 2.13.91

2006-02-06  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c (lay_down_icons_tblr):
	Fix layout bug on desktop (#153519)

2006-02-06  Alexander Larsson  <alexl@redhat.com>

	* nautilus-folder-handler.desktop.in:
	Add application/x-gnome-saved-search to the list of folder types handled

2006-01-31  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.13.90 ===

2006-01-31  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

	* configure.in:
	Bump version to 2.13.90

2006-01-31  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-file-management-properties.c:
	(nautilus_file_management_properties_dialog_setup):
	* src/nautilus-file-management-properties.glade:
	Add the option to always use the location bar to the
	preferences dialog. Closes #328659.
	Patch from Justin Fitzsimmons <jfitzsimmons@gmail.com>

2006-01-31  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-view.h:
	* libnautilus-private/nautilus-view.c: (nautilus_view_grab_focus):
	Add new grab_focus method.

	* src/file-manager/fm-list-view.c: (fm_list_view_grab_focus),
	(fm_list_view_iface_init):
	Implement grab_focus.

	* src/nautilus-window.c: (nautilus_window_set_content_view_widget):
	Use grab_focus to set the focus on the content view. Fixes #329087.
	Patch from Nelson Benitez <gnel@cenobioracing.com>

2006-01-30  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (compute_drop_position),
	(get_drag_data), (free_drag_data), (drag_motion_callback),
	(drag_leave_callback), (uri_list_from_selection),
	(drag_data_received_callback), (drag_drop_callback),
	(nautilus_places_sidebar_init), (nautilus_places_sidebar_finalize):
	Enable bookmarks as drop targets. Closes #43311.
	Based on a patch from Christian Neumair <chris@gnome-de.org>.

2006-01-29  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-container.c:
	(finish_adding_new_icons):
	Use same grid as positioned icons to not mess up spacing.

2006-01-28  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file.c:
	(nautilus_file_get_size_as_string_with_real_size),
	(nautilus_file_get_string_attribute):
	* src/file-manager/fm-properties-window.c: (create_basic_page):
	Show the detailed file size in addition to the formatted one
	in the properties dialog. Fixes #62713.
	Patch from Gautier Portet <kassoulet@gmail.com>

2006-01-26  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(confirm_delete_from_trash):
	HIGify the icon in the delete from trash dialog.
	Patch from Luca Ferretti <elle.uca@libero.it> 

2006-01-26  Martin Wehner  <martin.wehner@gmail.com>

	* test/test-nautilus-directory-async.c: (main):
	Fix C99-style variable initialization.
	Patch from Jens Granseuer <jensgr@gmx.net>

2006-01-26  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-list-view.c: (cell_renderer_edited),
	(stop_cell_editing), (fm_list_view_clear), (fm_list_view_dispose):
	Stop cell editing when disposing the view. Fixes #322821.

2006-01-26  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file-operations.c:
	(progress_dialog_set_to_from_item_text):
	Use nautilus_get_uri_shortname_for_display to avoid
	crashing g_markup with invalid utf-8. Fixes #325586.

2006-01-22  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-properties-window.c:
	(synch_groups_combo_box), (synch_user_menu):
	Don't try to update the owner and group widgets if
	the monitored file was removed. Fixes #325702.

2006-01-21  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-window.c: (nautilus_window_destroy):
	Unref and destroy a new content view that has been created
	but not yet been switched to. Fixes a rare crash.

2006-01-21  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-bookmark-list.c: (get_default_bookmark_name):
	Don't leak title.

2006-01-21  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-desktop-directory-file.c:
	(desktop_directory_file_monitor_add):
	Fix a typo that makes the desktop directory monitors leak.

2006-01-20  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-icon-factory.c: (scale_icon):
	Never try to scale icons down to 0px. Fixes scaling for
	images with extreme ratios.

2006-01-20  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-mime-actions.c:
	(nautilus_mime_get_applications_for_file):
	Don't leak mime_type.

2006-01-18  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-window-bookmarks.c: (nautilus_bookmarks_exiting):
	Destroy the bookmarks window on shutdown.

	* src/nautilus-bookmarks-window.c: (on_window_destroy_event):
	Release the bookmark stores.

2006-01-17  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-spatial-window.c:
	(nautilus_spatial_window_finalize):
	Don't leak last_geometry.

	* src/file-manager/fm-tree-view.c:
	(show_iter_for_file):
	Don't leak path.

2006-01-16  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_remove):
	Don't try to remove dummy rows from the reverse maps. Fixes
	critical warnings when reloading a list view with subdirectories.

2006-01-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.13.4 ===

2006-01-16  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

2006-01-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-search-engine-tracker.[ch]:
	* libnautilus-private/nautilus-search-engine.c:
	Add search support for the Tracker indexing engine.

2006-01-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	Handle the mount/unmount error case where the mount system handled
	the error dialogs.

2006-01-16  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (add_place), (update_places),
	(get_bookmark_index), (compute_drop_position),
	(drag_motion_callback), (drag_leave_callback),
	(bookmarks_drop_uris), (drag_data_received_callback),
	(drag_drop_callback), (bookmarks_popup_menu_detach_cb),
	(bookmarks_check_popup_sensitivity),
	(bookmarks_selection_changed_cb), (rename_selected_bookmark),
	(rename_shortcut_cb), (remove_selected_bookmarks),
	(remove_shortcut_cb), (bookmarks_key_press_event_cb),
	(bookmarks_build_popup_menu), (bookmarks_update_popup_menu),
	(bookmarks_popup_menu), (bookmarks_popup_menu_cb),
	(bookmarks_button_press_event_cb), (bookmarks_edited),
	(bookmarks_editing_canceled), (nautilus_places_sidebar_init):
	Merge parts of the d'n'd and popup menu code from the gtk filechooser
	into the places sidebar.  

2006-01-14  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-directory-background.c:
	(nautilus_file_background_read_desktop_settings),
	(nautilus_file_background_write_desktop_settings):
	Handle new background zooming mode. (#105231) 

2006-01-14  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_destroy), (fm_desktop_icon_view_finalize):
	Remove the default_zoom pref callback in finalize, not destroy.
	Fixes #326063.

2006-01-14  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file-operations.c:
	(progress_dialog_set_to_from_item_text):
	Handle hostnames in the progress dialog strings more robustly.
	Fixes #325737.
	Based on a batch from Anilkumar B. <anilkumar.bacheli@wipro.com>

2006-01-12  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-bookmarks-window.c: (update_bookmark_from_text):
	Update current bookmark name/pixbuf on changes. Partially fixes
	#44906.

2006-01-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-error-reporting.c: (rename_callback),
	(cancel_rename_callback), (cancel_rename), (fm_rename_file):
	Don't call eel_timed_wait_stop when the timer triggers. (#302735)
	
2006-01-11  Sebastien Bacher  <seb128@debian.org>

	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	updated the default thumbnailing value (Fixes #317587)

2006-01-11  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-mime-actions.c:
	(nautilus_mime_get_default_application_for_files),
	(intersect_application_lists),
	(nautilus_mime_get_open_with_applications_for_files),
	(nautilus_mime_has_any_applications_for_files):
	* libnautilus-private/nautilus-mime-actions.h:
	Add file list helpers for getting associated applications.

	* libnautilus-private/nautilus-program-choosing.c:
	* libnautilus-private/nautilus-program-choosing.h:
	(nautilus_launch_application):
	Allow to pass multiple files per application launch.

	* src/nautilus-information-panel.c:
	(command_button_callback):
	Port to new API.

	* src/file-manager/fm-directory-view.c:
	(application_launch_parameters_new),
	(application_launch_parameters_free),
	(fm_directory_view_launch_application),
	(fm_directory_view_chose_application_callback),
	(application_selected_cb),
	(open_with_launch_application_callback),
	(add_application_to_open_with_menu), (reset_open_with_menu),
	(real_update_menus), (list_to_parameters_foreach),
	(mime_application_hash),
	(fm_directory_view_make_activation_parameters),
	(activate_callback):
	Support activation of multiple files at once, correctly figure out
	their associated applications. Fixes #105653.

	* src/file-manager/fm-directory-view.c:
	(activate_callback):
	ref/unref the view before/after operating on it. Fixes #326231.

2006-01-11  Ryan Lortie  <desrt@desrt.ca>

	* src/nautilus-location-entry.c (try_to_expand_path): Use strlen()
	instead of g_utf8_strlen() since gtk_editable_insert_text takes
	the number of bytes (not number of characters).  Fixes #324406.

2006-01-10  Jürg Billeter  <j@bitron.ch>

	* libnautilus-private/nautilus-desktop-link.c:
	(nautilus_desktop_link_new):
	Don't try to free constant string. Fixes #326114.

2005-12-20  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file.c:
	(nautilus_file_get_custom_icon):
	* src/file-manager/fm-properties-window.c:
	(fm_properties_window_drag_data_received),
	(make_relative_uri_from_full), (set_icon),
	(select_image_button_callback):
	Set icons for directories relative to the directory location to make
	it follow location changes.

2005-12-20  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-query-editor.c:
	Support filtering on arbitrary mime type.
	Uses the new eel_mime_get_availible_mime_types
	
	* configure.in:
	Require eel 2.13.4 for new mime list function

2005-12-20  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-query-editor.c: (edit_clicked),
	(nautilus_query_editor_grab_focus):
	Don't focus invisible widget.

2005-12-20  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-extension/Makefile.am:
	* libnautilus-extension/nautilus-location-widget-provider.[ch]:
	Add NautilusLocationWidgetProvider
	
	* src/nautilus-window-manage-views.c:
	Use NautilusLocationWidgetProvider

2005-12-20  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(action_save_search_as_callback):
	Some better strings, not resizeable.

	* src/nautilus-navigation-window.c:
	(nautilus_navigation_window_instance_init),
	(nautilus_navigation_window_destroy):
	Remove unused tooltips object
	
	* src/nautilus-query-editor.c:
	Add tooltips, fix spacing
	
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-manage-views.c:
	Fix spacing for extra location widgets

2005-12-18  Dennis Cranston <dennis_cranston@yahoo.com>

	* src/file-manager/fm-directory-view.c 
	(action_save_search_as_callback):  HIG fixes for the save 
	search dialog.
	
2005-12-18  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-desktop-link-monitor.c:
	(volume_delete_dialog):
	* libnautilus-private/nautilus-file-operations.c:
	(handle_transfer_overwrite), (nautilus_file_operations_copy_move):
	* libnautilus-private/nautilus-icon-dnd.c:
	(confirm_switch_to_manual_layout):
	* libnautilus-private/nautilus-program-choosing.c:
	(application_cannot_open_location):
	* src/file-manager/fm-directory-view.c:
	(report_broken_symbolic_link):
	* src/nautilus-location-bar.c: (drag_data_received_callback):
	Adapt callers to eel dialog API changes. Fixes #324262.

	Patch from Christian Neumair <chris@gnome-de.org>
	and Claudio Saavedra <csaavedra@alumnos.utalca.cl>

2005-12-16  Dennis Cranston  <dennis_cranston@yahoo.com>
 
 	* libnautilus-private/nautilus-dnd.c:
 	(nautilus_drag_drop_action_ask): HIG fix.  Use title capitalization 
 	for menu items.  
 
2005-12-16  Dennis Cranston  <dennis_cranston@yahoo.com>

 	* src/nautilus-property-browser.c: (nautilus_emblem_dialog_new),
 	(add_new_pattern), (add_new_color): HIG fixes.  Use title 
 	capitalization for window titles.  Fix widget spacing.

2005-12-16  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file.c: (get_time),
	(compare_by_time), (nautilus_file_compare_for_sort),
	(nautilus_file_compare_for_sort_by_attribute):
	Support comparison by accessed time. Fixes #321671.

	* libnautilus-private/nautilus-file.h:
	Add atime sort type.

	Based on a patch from bluefuture@email.it

2005-12-16  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-properties-window.c:
	(select_image_button_callback):
	Use GTK_STOCK_REVERT_TO_SAVED item for icon
	selection dialog. Closes #95115.
	Patch from Vidar Braut Haarr (vhaarr@gmail.com)

2005-12-16  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-extension/nautilus-column.c:
	* libnautilus-extension/nautilus-menu-item.c:
	* libnautilus-extension/nautilus-property-page.c:
	Chain up in finalize handler, to fix leaks.

2005-12-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (reveal_newly_added_folder):
	Correct arguments for add_file, makes rename on new folder/file work
	again.

2005-12-15  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	* libnautilus-private/nautilus-global-preferences.h:
	Rename network icon prefs to match others.

2005-12-15  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	* libnautilus-private/nautilus-global-preferences.c:
	Disable network icon on desktop by default.
	
	* src/nautilus-main.c:
	* src/nautilus-navigation-window-ui.xml:
	* src/nautilus-spatial-window-ui.xml:
	* src/nautilus-window-menus.c:
	Add network to go/places menu.

2005-12-15  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-location-dialog.c: (nautilus_location_dialog_init):
	Make entry 30 chars to match file selector dialog.
	Patch from Ray Strode

2005-12-13  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-module.c (nautilus_module_load):
	open modules G_MODULE_BIND_LOCAL

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.13.3 ===

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	disable update-mimedb in distcheck

	* libnautilus-private/Makefile.am:
	Add beagle sources to extradist

	* NEWS:
	Update for release

--- Merged the nautilus-search2 branch ---
	
2005-12-12  Alexander Larsson  <alexl@redhat.com>

	Merge in changes from NAUTILUS_SEARCH2_MERGE_ANCHOR1 to
	NAUTILUS_SEARCH2_MERGE_ANCHOR2 (on HEAD).
	(This is NAUTILUS_SEARCH2_MERGE_POINT2)

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file.c (nautilus_file_new_from_relative_uri):
	Another case where we need to create a saved search file.

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Make it possible to build without beagle.

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-search-engine-simple.[ch]:
	Add new NautilusSearchEngineSimple backend.
	
	* libnautilus-private/nautilus-file-utilities.[ch]:
	Add nautilus_get_home_directory_uri.
	
	* libnautilus-private/nautilus-marshal.list:
	Add VOID:OBJECT,BOOLEAN, sort
	
	* libnautilus-private/nautilus-search-directory.[ch]:
	Add nautilus_search_directory_is_indexed.
	Make sure saved searches are never returned as search hits.
	
	* libnautilus-private/nautilus-search-engine-beagle.[ch]:
	Make _new fail if we can't contact beagle daemon.
	Set text on query as one string (it can have keywords in it)
	Move freeing of query data to after query is done.
	Add _is_indexed
	
	* libnautilus-private/nautilus-search-engine.[ch]:
	Add nautilus_search_engine_is_indexed
	Remove nautilus_search_engine_enabled
	Use beagle if availible, otherwise simple backend.
	
	* src/nautilus-navigation-window-menus.c:
	Remove search disabled code

	* src/nautilus-query-editor.[ch]:
	Rename activate to changed and add reload argument
	Add go/reload button for non-indexed searches
	Add mnemonic for entry
	Change saved search string to "Search Folder"
	
	* src/nautilus-navigation-window.c:
	Update for query editor changes
	For indexed search engines, default to search in homedir
	
	* src/nautilus-spatial-window.c:
	Update for query editor changes
	For indexed search engines, default to search in homedir
	Remove search disabled code

2005-12-07  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-query-editor.c (setup_external_entry):
	Make ugly string slightly better.

2005-12-07  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Mime API needs gnome-vfs-module. Unfortunate...
	
	* libnautilus-private/nautilus-query.c:
	Parse queries fully
	
	* libnautilus-private/nautilus-search-engine-beagle.c:
	Look at mime types and location.
	
	* src/nautilus-query-editor.c:
	Add mime type and location to query editor

2005-12-06  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-query.[ch]:
	Add new fields to NautilusQuery

2005-12-06  Alexander Larsson  <alexl@redhat.com>

	Merge in changes from NAUTILUS_2_12_1 to
	NAUTILUS_SEARCH2_MERGE_ANCHOR1 (on HEAD).
	(This is NAUTILUS_SEARCH2_MERGE_POINT1)

2005-12-06  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-history-sidebar.c: (update_history),
	(nautilus_history_sidebar_init):
	Fix leaks of bookmarks and model.

2005-12-06  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-search-engine-beagle.c:
	(nautilus_search_engine_beagle_set_query):
	Unref the right query.

2005-12-05  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-utilities.c:
	(nautilus_compute_title_for_uri):
	Handle NULL query in search.
	
	* libnautilus-private/nautilus-file-utilities.h:
	* libnautilus-private/nautilus-search-directory.h:
	Move saved search uri/mimetype define to
	nautilus-file-utilities.h.
	
	* libnautilus-private/nautilus-search-directory.c:
	Ref query in get
	
	* libnautilus-private/nautilus-search-engine.c:
	Remove unused stuff.
	
	* src/Makefile.am:
	* src/nautilus-query-editor.[ch]:
	Add new files implementing NautilusQueryEditor
	
	* src/nautilus-places-sidebar.c:
	Remove search from places sidebar.
	
	* src/nautilus-search-bar.[ch]:
	Only handle text queries.

	* src/nautilus-window.[ch]:
	* src/nautilus-window-private.h:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-window-manage-views.c:
	extra location widgets support and some search mode changes

	* src/nautilus-navigation-window.[ch]:
	* src/nautilus-spatial-window.c:
	Implement new search ui using extra location widgets
	
	* src/file-manager/fm-directory-view.c:
	Implement save search and save search as.
	Fix free bugs in fm_directory_view_stop.
	
	* src/file-manager/fm-icon-view.c: (fm_icon_view_supports_uri):
	* src/file-manager/fm-list-view.c: (fm_list_view_supports_uri):
	Also handle saved search mimetypes.
	

2005-12-02  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-search-directory.[ch]:
	More functions to save queres.
	
	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/nautilus-directory-view-ui.xml:
	Initial stubs for save search menu items.

2005-12-01  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-directory.c:
	* libnautilus-private/nautilus-search-directory.[ch]:
	* src/nautilus-bookmark-list.c:
	Further refactor the query loading, and remove all traces
	of the old load/save mechanism.

2005-12-01  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-directory.c:
	* libnautilus-private/nautilus-query.[ch]:
	* libnautilus-private/nautilus-search-directory.[ch]:
	Refactor query loading into NautilusQuery object.

2005-12-01  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Check for update-mime-database
	
	* data/.cvsignore:
	* data/Makefile.am:
	* data/nautilus.xml.in:
	Add mime database entries for saved searches.
	
	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-saved-search-file.[ch]:
	Special file type for saved search files to pretend that
	they are directories.
	
	* libnautilus-private/nautilus-directory.[ch]:
	Make nautilus_directory_ref return its arg.
	Create NautilusSearchDirectory for saved searches.
	
	* libnautilus-private/nautilus-file-dnd.c:
	Non-editable directories do not accept drops.
	
	* libnautilus-private/nautilus-file-private.h:
	* libnautilus-private/nautilus-file.h:
	Move nautilus_file_get_existing to public header.
	
	* libnautilus-private/nautilus-file.c:
	Create saved search files at right time
	
	* libnautilus-private/nautilus-marshal.list:
	Add new marshallers
	
	* libnautilus-private/nautilus-monitor.c:
	Remove some spew
	
	* libnautilus-private/nautilus-search-directory.[ch]:
	Split out search file loading to a separate function.

	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	Handle several layers of cannot accept drop.
	
	* src/file-manager/fm-directory-view.[ch]:
	Make files be related to the directory they are in, since
	a file can be in a tree multiple times, with searches.
	Sorting us now done in base class, and inheriting classes just
	add a compare function.
	Fix file leak in new_folder_done.
	
	* src/file-manager/fm-icon-view.c:
	Update to new base class API.
	In scroll_to_file, don't create a NautilusFile if it doesn't exist.
	
	* src/file-manager/fm-list-model.[ch]:
	Rearrange data so that we can have one file in multiple dirs.
	Still problems with the same directory in multiple dirs.
	In scroll_to_file, don't create a NautilusFile if it doesn't exist.
	Fix leak in each_path_get_data_binder
	
	* src/file-manager/fm-list-view.c:
	Update to new APIs (base class and model).
	Fix leak in fm_list_view_get_selection_foreach_func.
	
--- end of nautilus-search2 merge ---
    
2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(report_broken_symbolic_link):
	Don't ask to move broken symlinks to trash in trash (#132751)

	Patch from Christian Neumair

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-desktop-icon-file.c:
	* libnautilus-private/nautilus-directory-async.c:
	* libnautilus-private/nautilus-file.c:
	Use GNOME_VFS_FILE_INFO_FIELDS_ACCESS to calculate
	permissions.

	Patch from Christian Neumair and Christian Kellner

	* configure.in:
	Require latest gnome-vfs for GNOME_VFS_FILE_INFO_FIELDS_IDS.
	
2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Use GtkComboBox, not option menu. (#322567)

	Patch by Jaap A. Haitsma

2005-12-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(extension_action_slow_mime_types_ready_callback),
	(extension_action_callback), (add_extension_action_for_files):
	Keep the original action refed till its activation callback is
	done. Prevents the callback data from being freed prematurely.
	Fixes #320230.

2005-12-09  Federico Mena Quintero  <federico@ximian.com>

	Fixes bug #322957:

	Add a "Network Servers" icon on the desktop, which takes you to network:///

	* libnautilus-private/nautilus-global-preferences.h
	(NAUTILUS_PREFERENCES_DESKTOP_NETWORK_VISIBLE): New preference
	name.  This determines whether we show the "Network Servers" icon.

	* libnautilus-private/apps_nautilus_preferences.schemas.in: Add a
	schema for /apps/nautilus/desktop/network_visible; the default is true.

	* libnautilus-private/nautilus-desktop-link.h
	(NautilusDesktopLinkType): Add a NAUTILUS_DESKTOP_LINK_NETWORK type.

	* libnautilus-private/nautilus-desktop-link.c
	(nautilus_desktop_link_new): Support NAUTILUS_DESKTOP_LINK_NETWORK.

	* libnautilus-private/nautilus-desktop-link-monitor.c
	(NautilusDesktopLinkMonitorDetails): Added a network_link field.
	(nautilus_desktop_link_monitor_delete_link): Don't delete
	NAUTILUS_DESKTOP_LINK_NETWORK links.
	(update_link_visibility): New helper function.
	(desktop_home_visible_changed): Use update_link_visibility(), to
	avoid duplicated code.
	(desktop_computer_visible_changed): Likewise.
	(desktop_trash_visible_changed): Likewise.
	(desktop_network_visible_changed): New function.
	(create_link_and_add_preference): New helper function.
	(nautilus_desktop_link_monitor_init): Use
	create_link_and_add_preference() to avoid duplicated code.  Also,
	create the network_link.
	(desktop_link_monitor_finalize): Unref the network_link.
	(remove_link_and_preference): New helper function.
	(desktop_link_monitor_finalize): Use remove_link_and_preference()
	to avoid duplicated code.  Also, free the network_link.

	* src/file-manager/fm-icon-container.c (SortCategory): Add a
	SORT_NETWORK_LINK category right before SORT_MOUNT_LINK, so that
	the "Network Servers" icon appears before mounts.
	(get_sort_category): Use SORT_NETWORK_LINK as the category for
	NAUTILUS_DESKTOP_LINK_NETWORK.

2005-12-09  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-emblem-utils.c:
	* libnautilus-private/nautilus-file-operations.c:
	* libnautilus-private/nautilus-program-choosing.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-error-reporting.c:
	* src/file-manager/fm-properties-window.c:
	* src/file-manager/fm-tree-view.c:
	* src/nautilus-application.c:
	* src/nautilus-connect-server-dialog-main.c:
	* src/nautilus-connect-server-dialog.c:
	* src/nautilus-emblem-sidebar.c:
	* src/nautilus-information-panel.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-property-browser.c:
	* src/nautilus-window-bookmarks.c:
	* src/nautilus-window-manage-views.c:
	Remove title from alerts. (#323134)

	Patch from jaap@haitsma.org
	
	* libnautilus-private/nautilus-file-queue.c (nautilus_file_queue_enqueue):
	Fix warning from ignoring g_list_append return value

2005-12-09  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window.[ch]:
	Use combo box instead of option menu (#322567)

	Patch from jaap@haitsma.org
	
2005-12-08  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-file-management-properties.c:
	* src/nautilus-file-management-properties.glade:
	Use the new combo box code (#322487)
	
	Patch from jaap@haitsma.org
	
	* configure.in:
	Require new eel.

2005-12-01  Federico Mena Quintero  <federico@ximian.com>

	Fixes bug #318140:

	* libnautilus-private/nautilus-link-desktop-file.c
	(nautilus_link_desktop_file_get_link_icon_from_desktop): If the
	.desktop file doesn't have an Icon property, fall back to some
	reasonable icons depending on the type of the .desktop file.

	* libnautilus-private/nautilus-icon-factory.c
	(nautilus_icon_factory_get_icon_for_file): Clarify what we mean by
	custom icons vs. special icons.

2005-12-01  Federico Mena Quintero  <federico@ximian.com>

	Fixes bug #317962:

	* src/nautilus-pathbar.c (get_dir_name): Don't special-case the
	name for $HOME; just let it be the actual display name of the
	folder on disk.

	* src/nautilus-places-sidebar.c (update_places): Likewise, to make
	this consistent.

2005-11-28  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (done_loading),
	(display_pending_callback),
	(schedule_idle_display_of_pending_files),
	(schedule_timeout_display_of_pending_files),
	(unschedule_display_of_pending_files), (queue_pending_files),
	(remove_changes_timeout_callback), (reset_update_interval),
	(changes_timeout_callback), (schedule_changes),
	(files_added_callback), (files_changed_callback),
	(done_loading_callback), (schedule_update_menus),
	(file_changed_callback), (finish_loading),
	(fm_directory_view_stop):
	Schedule the frequency of updates to the view in relation to the
	activity in a viewed directory instead of simply scheduling everything
	as idle. Prevents high CPU load from constant updates in busy
	directories and allows more efficient use of the cached info for
	the initial display. 

2005-11-24  Dennis Cranston  <dennis_cranston@yahoo.com>

	* src/file-manager/fm-directory-view.c: (confirm_delete_directly):
	HIG fixes for the delete confirmation dialog.  Remove window 
	title & convert dialog type from question to warning. 

2005-11-24  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	Allow shift-delete even if not visible in ui.

	Patch from Nelson Benítez <gnel@cenobioracing.com>

2005-11-24  Alexander Larsson  <alexl@redhat.com>

	* icons/knob.png:
	New knob icon from Luca Ferretti

2005-11-24  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file.[ch]:
	Add nautilus_file_list_cancel_call_when_ready.
	
	* src/file-manager/fm-directory-view.c:
	Handle multiple files being activated together.

	Patch from Christian Neumair with some changes.

2005-11-23  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-thumbnails.c:
	(nautilus_thumbnail_load_framed_image):
	Don't frame thumbnails with alpha channel.

2005-11-22  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-file-management-properties.glade:
	Use pixel offset for indenting, not spaces.
	Patch from Jaap Haitsma 

2005-11-22  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libnautilus-private/nautilus-module.c (nautilus_module_load): Use
	G_MODULE_BIND_LAZY when dlopening a module.

2005-11-19  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(action_location_delete_callback): Ask for confirmation when deleting
	through the location context menu. Fixes #321584.

2005-11-17  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-file-management-properties.c:
	(nautilus_file_management_properties_size_group_create):
	Don't leak size_group reference.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.13.2 ===

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require new eel

	* NEWS:
	Update for release

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-view.c: (create_tree):
	* src/nautilus-main.c: (register_icons):
	* src/nautilus-window-menus.c:
	Always use gnome-fs-home for home icon.

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_bounds):
	Handle emblem size correctly when zoomed.
	Patch from Christian Neumair

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-desktop-window.c (realize):
	Fix typo (#320003)

2005-11-07  Federico Mena Quintero  <federico@ximian.com>

       Fix the volumes part of bug #45953:

       * libnautilus-private/nautilus-icon-container.c
       (finish_adding_new_icons): First, call assign_icon_position().
       Then, don't ignore the fact that the icon may have a lazy
       position; check the icon->has_lazy_position flag even after
       retrieving its stored position.  If the flag is turned on, defer
       the icon to the semi_position_icons list.
	
2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-canvas-item.c: (draw_frame):
	Handle the case of missing highlight frame better.
	Patch from Christian Neumair

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Nicer ui for setting custom icons (#95115)
	Patch from Christian Neumair

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.[ch]:
	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-tree-view.c:
	Get the right position on new folders/files when in
	manual position mode.
	Patch from Christian Neumair

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c:
	(handle_transfer_overwrite):
	Add skip all button. (#48331)
	Patch from Guillaume Desmottes <cass@skynet.be>

2005-11-13  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-container.c:
	Use ctrl-shift-g to browse back in results. Fixes #320061.

2005-11-08  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-tree-view.c: (create_tree):
	Connect the compare function before root nodes are added.
	Prevents the internal sort model of GtkTree from going
	out of sync with the tree view after a root node resort.
	Fixes #158506.

2005-10-28  Matthias Clasen  <mclasen@redhat.com>

	* libnautilus-private/nautilus-icon-canvas-item.h:
	* libnautilus-private/nautilus-icon-canvas-item.c (draw_stretch_handles:
	(hit_test_stretch_handle): Improve drawing of the outline for icon stretching,
	make the knob image themable as stock-nautilus-knob.

	* libnautilus-private/nautilus-icon-container.c: Implement icon stretching
	via keyboard, with <Control>+, <Control>- and <Control>0.

	* src/nautilus-window-manage-views.c (zoom_level_changed_callback): Make the
	ZOOM_NORMAL action insensitive when zooming is not supported, so that it 
	does not eat <Control>0.

2005-10-26  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c:
	Include locale.h to fix build. Patch from Nelson Benítez.

2005-10-26  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window-menus.c: (action_connect_to_server_callback):
	Fix leak. Patch from Kjartan Maraas. (#319333)

2005-10-26  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-mime-actions.c (get_open_with_mime_applications):
	Correctly sort the mime lists.

2005-10-24  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.13.1 ===

2005-10-24  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-factory.c (nautilus_self_check_icon_factory):
	Fix test, icon size was removed

	* NEWS:
	Update for release

2005-10-21  Matthias Clasen  <mclasen@redhat.com>

	* src/file-manager/fm-directory-view.c: Only show
	the "Format" item if gfloppy is around.

2005-10-21  Matthias Clasen  <mclasen@redhat.com>

	* src/file-manager/fm-actions.h: 
	* src/file-manager/nautilus-directory-view-ui.xml: 
	* src/file-manager/fm-directory-view.c: Add a "Format"
	menuitem to the context menu of Floppy in Computer,
	which runs gfloppy.

2005-10-20  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-program-choosing.c:
	(nautilus_launch_show_file):
	* src/nautilus-window-manage-views.c:
	(display_view_selection_failure):
	* src/file-manager/fm-directory-view.c:
	(activate_callback),
	(activate_activation_uri_ready_callback):
	Don't bail if an authentication request was cancelled.

2005-10-20  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-sidebar-title.c:
	(update_more_info):
	* libnautilus-private/nautilus-file.c:
	* libnautilus-private/nautilus-file.h:
	(nautilus_file_should_show_type):
	Don't display file type in sidebar for computer, network and smb
	toplevel URIs. Fixes #168561.

2005-10-19  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-mime-actions.c:
	(get_open_with_mime_applications), (application_compare_by_name),
	(application_compare_by_id):
	Sort applications by name. Fixes bug #310038.

2005-10-19  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-bookmark.c:
	(bookmark_file_changed_callback):
	Don't update bookmarks when its target file is trashed. Fixes #162787.

2005-10-19  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-window-info.h:
	* src/nautilus-window-manage-views.c:
	(nautilus_window_open_location_full):
	* src/file-manager/fm-icon-view.c:
	(icon_container_activate_alternate_callback):
	* src/file-manager/fm-list-view.c:
	(activate_selected_items_alternate):
	Open a new navigational window on alternative item activation.

2005-10-19  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-spatial-window.c:
	(got_file_info_for_location_menu_callback):
	Use custom image for location button if available. Partially fixes
	#311394 and plugs a leak.

2005-10-19  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (fm_list_view_start_renaming_file):
	Scroll into view correctly when renaming (#309964)
	
2005-10-19  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/Makefile.am (INCLUDES):
	Remove duplicate setting of libnautilus_private_la_LIBADD

2005-10-19  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-shell-interface.idl:
	Reuse Nautilus::URI from the one defined in libnautilus-private.
	
	* libnautilus-private/Makefile.am:
	Link libnautilus-private statically.

2005-10-18  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(can_delete_uri_without_confirm),
	(confirm_delete_directly):
	Don't request confirmation for deletion of "burn:" URIs. Fixes
	#302607.

2005-10-18  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-places-sidebar.c: (update_places):
	* src/nautilus-window-bookmarks.c: (update_bookmarks):
	Skip nonexistant bookmarks in menus/sidebar. Fixes #312507.

2005-10-18  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-metafile.c: Make metadata
	copying/moving asynchronous.

2005-10-18  Christian Neumair  <chris@gnome-de.org>

	* data/browser.xml: Don't mark strings for translation we get from
	gnome-icon-theme. Fixes #114919.

2005-10-18  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c: (key_press_event):
	Don't send slash to typeahead
	
	* src/nautilus-location-dialog.[ch]:
	Add nautilus_location_dialog_set_location.
	
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-navigation-window.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window.[ch]:
	Open location dialog/entry when you press '/'.
	
2005-10-18  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c: 
	Use gtktreeview typeahead. Patch by Christian Neumair.
	
2005-10-18  Jürg Billeter  <j@bitron.ch>

	* libnautilus-private/nautilus-icon-container.c: (destroy),
	(unrealize), (button_press_event),
	(nautilus_icon_container_search_position_func),
	(nautilus_icon_container_real_search_enable_popdown),
	(nautilus_icon_container_search_enable_popdown),
	(nautilus_icon_container_search_disable_popdown),
	(send_focus_change), (nautilus_icon_container_search_dialog_hide),
	(nautilus_icon_container_search_entry_flush_timeout),
	(nautilus_icon_container_search_preedit_changed),
	(nautilus_icon_container_search_activate),
	(nautilus_icon_container_search_delete_event),
	(nautilus_icon_container_search_button_press_event),
	(nautilus_icon_container_search_iter),
	(nautilus_icon_container_search_move),
	(nautilus_icon_container_search_scroll_event),
	(nautilus_icon_container_search_key_press_event),
	(nautilus_icon_container_search_init),
	(nautilus_icon_container_ensure_interactive_directory),
	(nautilus_icon_container_real_start_interactive_search),
	(nautilus_icon_container_start_interactive_search),
	(key_press_event), (nautilus_icon_container_class_init):
	* libnautilus-private/nautilus-icon-container.h:
	* libnautilus-private/nautilus-icon-private.h:
	* libnautilus-private/nautilus-marshal.list:
	
	Replace NautilusIconContainer typeahead implementation by a port of
	GtkTreeView's interactive search.

2005-10-18  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-extension/Makefile.am:
	* libnautilus-private/Makefile.am:
	Build fixes for cygwin.
	Patch from Yaakov S (Cygwin Port)
	
2005-10-17  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-bookmark.c:
	* libnautilus-private/nautilus-bookmark.h:
	* libnautilus-private/nautilus-icon-container.c:
	* libnautilus-private/nautilus-icon-factory.c:
	* libnautilus-private/nautilus-icon-factory.h:
	* libnautilus-private/nautilus-ui-utilities.c:
	* src/nautilus-bookmarks-window.c:
	* src/nautilus-history-sidebar.c:
	* src/nautilus-places-sidebar.c:
	* src/nautilus-sidebar-title.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-menus.c:
	* src/file-manager/fm-directory-view.c:
	Kill NAUTILUS_ICON_SIZE_FOR_MENUS, make icon factory support GTK+
	stock icon size, use this size in the sidebar, and in menus.
	Fixes #167107 and others.

2005-10-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (fm_directory_view_class_init):
	Remove ctrl-backspace delete keybinding. (#310546)

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-extension/nautilus-file-info.c:
	* libnautilus-extension/nautilus-file-info.h:
	* libnautilus-private/nautilus-file.c:
	Add new functions for extensions:
	nautilus_file_info_has_volume, nautilus_file_info_has_drive,
	nautilus_file_info_get_volume, nautilus_file_info_get_drive

	Patch from Trevor Davenport

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.13.1. Further 2.12.x work is on
	gnome-2-12 branch.
	
==== gnome-2-12 branched from here ===
	
2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* configure.in: 
	Post release version bump

=== nautilus 2.12.1 ===

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for 2.12.1

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_new),
	(nautilus_file_operations_progress_new_file):
	Correctly escape input strings for GMarkup. (#317736)
	Patch from Christian Neumair.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c:
	(fm_list_model_sort_file_entries):
	Correctly pass iter to gtk_tree_model_rows_reordered() (#315704)
	Patch from Christian Neumair.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-directory-metafile.c:
	(nautilus_directory_get_file_metadata):
	On assert failure, return default metadata, not NULL.
	Partial fix of #308977.
	Patch from Christian Neumair.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window.c:
	Verify arguments in public functions.
	Patch from Christian Neumair.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	* libnautilus-private/nautilus-icon-private.h:
	Don't crash if file removed during start of drag. (#158196)
	Patch from Christian Neumair.

	Remove remove_context_menu_timeout, which is not needed anymore.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/nautilus-directory-view-ui.xml:
	Fix some spelling errors.
	Patch from Lukasz Stelmach <stlman@poczta.fm>

2005-09-30  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-container.c:
	(nautilus_icon_container_update_scroll_region),
	(lay_down_icons_horizontal):
	Only wrap icons when the right margin touches the rightmost icon.
	Fixes #313025.

2005-09-30  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-view.c: (compare_rows):
	Correct sort order for dummy row.
	Possible fix for #123051

2005-09-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(activate_check_mime_types):
	Never warn if the files would be launched in the same app.
	Partially reverts checkin from 2005-08-01.

2005-09-26  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-desktop-directory.c:
	(desktop_directory_changed_callback), (desktop_finalize),
	(update_desktop_directory): Make changes to "desktop_is_home_dir"
	GConf key instant apply. Fixes #116217.

	* libnautilus-private/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_get_image): Add emblems to drag icon.
	Partially fixes	#159643.

	* src/file-manager/fm-directory-view.c:
	(action_mount_volume_callback), (action_unmount_volume_callback),
	(action_eject_volume_callback), (file_should_show_foreach),
	(real_update_menus_volumes): Allow to mount/unmount/eject multiple
	volumes at once. Fixes #156169.

2005-09-20  christian neumair  <chris@gnome-de.org>

	* src/nautilus-connect-server-dialog.c: (connect_to_server):
	Fix leak and crasher. Fixes #314730.

	* src/file-manager/fm-directory-view.c: (connect_proxy):
	Don't poke around with null pixbuf if icon theme lookup failed.

	* libnautilus-private/nautilus-desktop-directory-file.c:
	(desktop_directory_file_get_deep_counts):
	* libnautilus-private/nautilus-file.c:
	(nautilus_file_get_deep_counts),
	(nautilus_file_get_string_attribute_with_default:):
	* libnautilus-private/nautilus-file.h:
	* libnautilus-private/nautilus-trash-file.c:
	(trash_file_get_deep_counts):
	* src/file-manager/fm-properties-window.c:
	(directory_contents_value_field_update),
	(attach_directory_contents_value_field),
	(update_visibility_of_item_count_fields),
	(update_visibility_of_item_count_fields_wrapper),
	(remember_directory_contents_widget),
	(append_directory_contents_fields), (real_destroy):
	Add force flag to nautilus_file_get_deep_counts, which forces
	generation even if the "show deep count" preference is turned off.
	pass TRUE in property window and FALSE everywhere else. Fixes #126068.

2005-09-19  Nate Nielsen <nielsen@memberwebs.com>

	* nautilus-connect-server-dialog-main.c: (main):
	* nautilus-connect-server-dialog.h:
	* nautilus-connect-server-dialog.c:
	(nautilus_connect_server_dialog_new):
	* nautilus-window-menus.c:
	(action_connect_to_server_callback): 
	Autofill "Connect to server" dialog where possible.
	Fixes #314745

2005-09-19  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move),:
	Try to use the trash associated with a symlink's parent directory if
	resolution fails because of broken symlink when moving symlink to
	trash.

	* libnautilus-private/nautilus-file-operations.c:
	(nautilus_self_check_file_operations):
	Fix date self checks. Fixes #47364.

2005-09-19  Alexander Larsson  <alexl@redhat.com>

	* icons/Makefile.am:
	* icons/Search.png:
	* icons/nautilus-desktop.png:
	* icons/nautilus-file-management-properties.png:
	* icons/nautilus-mini-logo.png:
	* icons/nautilus-server-connect.png:
	* icons/side_bar_image.png:
	Remove unused icons (#315990)
	Patch from Jaap A. Haitsma
	
2005-09-19  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-metafile.c: (copy_file_metadata):
	* libnautilus-private/nautilus-thumbnails.c:
	(nautilus_update_thumbnail_file_copied),
	(nautilus_update_thumbnail_file_renamed),
	(nautilus_remove_thumbnail_for_file):
	* libnautilus-private/nautilus-thumbnails.h:
	Copy thumbnails when copying file metadata. Fixes #45191.

2005-09-19  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-list-view.c: (drag_begin_callback),
	(motion_notify_callback):
	Setup drag in the "drag-begin" handler.

2005-09-19  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.[ch]:
	* libnautilus-private/nautilus-icon-private.h:
	Add support for lazily positioned icons.
	
	* libnautilus-private/nautilus-icon-dnd.c: (handle_local_move):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_add_file),
	(fm_icon_view_screen_changed):
	Use lazily positioned icons for desktop icons. (#45953)

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-09-10  Erdal Ronahi  <erdal.ronahi@gmail.com>

        * confiure.in: Added "ku" (Kurdish) to ALL_LINGUAS

2005-09-08  Federico Mena Quintero  <federico@ximian.com>

	Fixes bug #171073:

	* libnautilus-private/nautilus-trash-directory.c
	(nautilus_trash_directory_instance_init): In addition to
	connecting to "volume_pre_unmount" on the volume monitor, also
	connect to "volume_unmounted".  This will let the trash clean up
	its merged directory even if the unmount is not initiated from
	Nautilus.
	
	* libnautilus-private/nautilus-merged-directory.c
	(merged_remove_real_directory): When a real directory is removed
	from the merged directory, emit notifications to that effect.
	This lets the trash window remove the icons that used to
	correspond to a volume that got unmounted.
	(real_directory_notify_files_removed): New utility function.

2005-09-06  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-list-view.c: (fm_list_view_init): Ensure that
	the zoom level is initialized correctly in fm_list_view_begin_loading.
	Fixes #314269.

2005-09-06  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-directory-async.c:
	(nautilus_directory_monitor_add_internal),
	(nautilus_directory_monitor_remove_internal):
	* libnautilus-private/nautilus-file-private.h:
	* libnautilus-private/nautilus-file.c: (finalize):
	Only use directory monitors to avoid using lots and lots of
	file monitors. This is an optimization in almost all cases, although
	it does a bit more work when viewing a file properties dialog with the
	containing folder window hidden. (#315041)

2005-09-06  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (add_extension_menu_items),
	(get_unique_files), (reset_extension_actions_menu): Always pass all
	selected files to extension, instead of passing max. 1 per selected
	MIME type. Fixes #314721.

2005-09-05  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.12.0 ===

2005-09-05  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require eel 2.12.

	* NEWS:
	Update for release

2005-08-31  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	(handle_focus_in_event), (handle_focus_out_event):
	Don't redraw the whole desktop on focus in/out.

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-factory.c:
	(get_icon_from_cache):
	Revert memleak patch from 2005-08-23, since it was
	wrong and causes crashes.

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-dnd.c:
	(nautilus_icon_container_get_drop_action):
	Handle background color/image drops even on
	icons. (#47536)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(filtering_changed_callback):
	Fix handling of global show-hidden-file prefs change.
	(#306821)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	(nautilus_icon_container_get_first_visible_icon):
	Handle non-sorted-by-y icon containers (manual mode).
	#157415. Patch from Christian Neumair <chris@gnome-de.org>

2005-08-25  William Jon McCann  <mccann@jhu.edu>

	* src/file-manager/fm-icon-view.c (should_preview_sound):
	Don't allow audio preview in burn://.  Workaround for
	#312275.

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-factory.c:
	(get_special_icon_for_file),
	(nautilus_icon_factory_get_icon_for_file),
	(nautilus_icon_factory_is_icon_ready_for_file):
	Handle some more special location icons, and don't require
	attributes for special location icons. (#312095, #312134)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-26  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	Better handling of script env vars:
	Expand uri for desktop directory.
	Expand uris for links on desktop
	Expand pathnames for items in trash.
	Fixes bug #148545
	Based on a patch from Christian Neumair  <chris@gnome-de.org>
	
2005-08-26  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	(lay_down_icons_horizontal):
	Fix layouting in text-beside-icons mode for short names.
	(#159621)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-25  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.[ch]:
	* src/file-manager/fm-directory-view.c:
	Remove usage of GNOME_VFS_XFER_REMOVESOURCE in
	nautilus_file_operations_new_file_from_template, instead
	manually removing source when needed. This fixes #309592.

2005-08-23  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.11.92 ===

2005-08-23  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Require eel 2.11.92.

	* NEWS: 
	Update for release

2005-08-23  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	(get_drop_action), (receive_dropped_keyword),
	(drag_data_received_callback):
	Enable emblem dropping to the list view and allow text
	drags on the list background. Fixes #313408.

	Based on a patch from Christian Neumair  <chris@gnome-de.org>

2005-08-23  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-icon-factory.c:
	(get_icon_from_cache):
	Don't ref cached_icon twice. Fixes #307288.

	Patch from Kjartan Maraas  <kmaraas@gnome.org>

2005-08-22  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file.c:
	(nautilus_file_is_desktop_directory), (nautilus_file_can_rename),
	(prepend_automatic_emblem_names):
	* libnautilus-private/nautilus-file.h:
	* src/file-manager/fm-directory-view.c:
	(desktop_or_home_dir_in_selection), (real_update_location_menu),
	(real_update_menus):
	Don't allow trashing or deleting the home or desktop folder within
	a selection or via the location button context menu. Fixes #310414.

	Based on a patch from Christian Neumair  <chris@gnome-de.org>

2005-08-22  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-mime-actions.c:
	(filter_nautilus_handler), (get_open_with_mime_applications),
	(nautilus_mime_get_open_with_applications_for_file),
	(nautilus_mime_get_applications_for_file),
	(nautilus_mime_has_any_applications_for_file):
	Don't show nautilus folder handler as application option
	for folders. Fixes #310382.

	Based on a patch from Christian Neumair  <chris@gnome-de.org>

2005-08-17  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-main.c: (main):
	Revert the GDK threading patch as it causes major
	freezage. Fixes #313588.

2005-08-12  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-properties-window.c: (create_image_widget),
	(create_basic_page): Don't make icon drop target for images if
	should_show_custom_icon_buttons is FALSE. Fixes #312967.

2005-08-12  Raffaele Sandrini  <rasa@gmx.ch>

	* src/nautilus-main.c:
	Initialize the GDK threading system. Fixes #312894.

2005-08-12  Kjartan Maraas  <kmaraas@gnome.org>

	Lots of cleanups. Closes bug #313094 and bug #149714

	* libnautilus-private/nautilus-directory-background.c:
	(nautilus_file_background_write_desktop_default_settings):
	ANSIfication
	* libnautilus-private/nautilus-file.c: Mark some variables
	static.
	* libnautilus-private/nautilus-icon-container.c: 
	(nautilus_icon_container_get_selection): Return NULL not
	FALSE.
	* libnautilus-private/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_thumbnail_factory): ANSIfication
	* libnautilus-private/nautilus-metafile.c: Static variables
	* libnautilus-private/nautilus-program-choosing.c:
	(slowly_and_stupidly_obtain_timestamp): Sparse fix
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_get_background_widget): FALSE vs NULL
	* src/file-manager/fm-list-view.c: (filename_cell_data_func):
	Plug a leak. Bug #313094.
	* src/file-manager/fm-tree-model.c: (fm_tree_model_iter_get_file):
	NULL vs 0.
	* src/nautilus-bookmark-list.c:
	(nautilus_bookmark_list_get_file_path),
	(nautilus_bookmark_list_load_file): ANSIfication
	* src/nautilus-bookmarks-window.c: (bookmarks_delete_bookmark):
	ANSIfication
	* src/nautilus-main.c: (slowly_and_stupidly_obtain_timestamp):
	NULL vs 0.
	* src/nautilus-self-check-functions.c: (nautilus_run_self_checks):
	ANSIfication

2005-08-09  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.11.91 ===

2005-08-09  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Require eel 2.11.91.

	* NEWS: 
	Update for release

2005-08-09  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file.c: (file_is_desktop),
	(nautilus_file_can_rename):
        Don't allow renaming of the desktop folder. Closes #125637.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-08  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-property-browser.c:
	(nautilus_property_browser_class_init),
	(nautilus_property_browser_drag_begin), (element_clicked_callback):
	Fix emblem drag icon in "Emblems & Background" dialog. (#311381)

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-08  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file-operations.c
	(nautilus_file_operations_copy_move):
	Allow moving files within the burn location. Fixes #312085.

	Patch from William Jon McCann <mccann@jhu.edu>

2005-08-05  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-bookmarks-window.c: (create_bookmarks_window),
	(open_selected_bookmark): Open the appropriate kind of window when 
	jumping to bookmark. Fixes #312160.

	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-08-05  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-property-browser.c: Adapt to eel wrap table changes.
	Fixes #308996.

2005-08-05  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-window.c: (nautilus_window_class_init):
	* src/nautilus-window.h:
	Add "reload" and "prompt-for-location" signals. Bind F5 to "reload"
	and Alt-d to "prompt-for-location". Fixes #305252, #312353.

2005-08-04  Sunil Mohan Adapa  <sunil@atc.tcs.co.in>

	* configure.in: Added "te" to ALL_LINGUAS.

2005-08-03  Joe Shaw  <joeshaw@novell.com>

	* libnautilus-private/nautilus-metafile.c
	(set_file_node_timestamp): Added, sets a timestamp property on a
	file node so that metadata changes can be tracked per file, rather
	than per directory.
	(set_metadata_string_in_metafile, set_metadata_list_in_metafile,
	copy_file_metadata): Set the timestamp on the node.

2005-08-03  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-list-view.c: (handle_typeahead): Be smarter
	about GtkTreeView-bound expand/collapse characters. Thanks to Wouter
	Bolsterlee <uws+gnome@xs4all.nl>. Fixes #312046.

	* src/nautilus-location-bar.c: (real_cancel),
	(nautilus_location_bar_class_init),
	(nautilus_location_bar_set_location)
	* src/nautilus-navigation-bar.c: (nautilus_navigation_bar_class_init):
	* src/nautilus-navigation-bar.h:
	* src/nautilus-navigation-window.c: (navigation_bar_cancel_callback),
	(navigation_bar_location_changed_callback): Hide temporary bars when
	pressing the escape key. Fixes #311652.

2005-08-03  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-sidebar-title.c: (nautilus_sidebar_title_init):
	Initialize best_icon_size when constructing sidebar.
	Fixes a critical librsvg warning.

	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-08-02  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-customization-data.c:
	(format_name_for_display):
	* src/nautilus-property-browser.c: (add_reset_property):
	Use "Reset" as reset emblem label. Fixes #311380.

2005-08-01  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (activate_check_mime_types):
	Use actual/guessed MIME type relation instead of relying on their
	default application information. Partially fixes #309862.

2005-07-28  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_new):
	Set type hint to GDK_WINDOW_TYPE_HINT_NORMAL so that progress dialog
	appears in tasklist and is minimizable. Fixes #310676.

2005-07-28  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-dnd.c:
	(nautilus_drag_default_drop_action_for_icons):
	Default to move action for locations on other file systems if they
	should be moved to their parent folder. Fixes #61269.

2005-07-26  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-pathbar.c: (get_display_name_for_folder):
	Use the display name of the file if the uri uses a method
	unknown to gnome-vfs (trash:). Fixes #310274.

2005-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.11.90 ===

2005-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Require eel 2.11.90 and bump version.

	* NEWS: 
	Update for release

2005-07-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	Don't use trash icon for location button delete action.
	Fixes #310414.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-desktop-window.c: (real_get_icon_name),
	(nautilus_desktop_window_class_init):
	* src/nautilus-navigation-window.c: (real_get_icon_name),
	(nautilus_navigation_window_class_init):
	* src/nautilus-spatial-window.c: (real_get_icon_name),
	(nautilus_spatial_window_class_init):
	* src/nautilus-window.c: (nautilus_window_update_icon):
	* src/nautilus-window.h:
	Use file-manager icon for browser windows. Fixes bug #166516.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-19  Mark McLoughlin  <mark@skynet.ie>

	* src/file-manager/fm-icon-view.c:
	(play_file), (preview_audio): track the pid of the currently
	running sound process using a static variable and kill it
	before starting any new process.
	(can_play_sound): copy from nautilus-sound.c
	
	* src/nautilus-application.c: (finish_startup): don't call
	nautilus_sound_init()

	* libnautilus-private/nautilus-sound.[ch]: remove old code
	to track the currently runing sound process using a GConf
	key.
	
	* libnautilus-private/Makefile.am: remove nautilus-sound.[ch]
	
2005-07-19  Mark McLoughlin  <mark@skynet.ie>

	* libnautilus-private/nautilus-global-preferences.c:
	(nautilus_global_preferences_init): remove code to import
	some preferences which were deprecated in GNOME 2.2.

2005-07-15  Vincent Noel  <vnoel@cox.net>

	* src/nautilus-information-panel.c: (make_button_box),
	(add_command_buttons):
	* src/nautilus-sidebar-title.c: (sidebar_title_create_title_label),
	(sidebar_title_create_more_info_label): Ellipsize everything in
	the information side pane, and make labels selectable. Fixes
	#310386, #80429 and #43858.

2005-07-14  Elijah Newren  <newren@gmail.com>

	* configure.in: Bump required startup-notification version up to
	0.8 (should have been done back in February with the updated
	startup-notification stuff, but better late than never)

2005-07-14  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Remove underlines from all lines in single click mode.
	Add hover underline and cursor. (#105521)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-13  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-desktop-link-monitor.c:
	(volume_delete_dialog): Refer to the volume context menu as "popup
	menu", and not as "right-click menu". Fixes #308248.

2005-07-13  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-navigation-window.c: (bookmark_list_get_uri_index,
	path_bar_location_changed_callback): Try to reload visited locations
	from history before doing a full location change. Fixes #310068.

	* src/nautilus-sidebar-title.c: (nautilus_sidebar_title_init): Track
	SHOW_DIRECTORY_ITEM_COUNTS preference and update label on change.
	Fixes #92862.

2005-07-13  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window.c:
	Pack main table with GTK_SHRINK (#16057)

2005-07-13  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (fm_list_view_start_renaming_file):
	Don't scroll to end of column on rename (#309964).

2005-07-13  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-utilities.c:
	Files with name "~" are not backups. (#170607)
	Patch from Christian Neumair <chris@gnome-de.org>

2005-07-13  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-dnd.c:
	Set dnd icon in drag_begin (#307943)
	patch from Matthias Clasen

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.11.4 ===

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require eel 2.11.4

	* NEWS: 
	Update for release
	
2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-image-properties-page.c: (load_finished):
	list width/height separately (#159851)

	Patch from Christian Neumair <chris@gnome-de.org>
	
2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-spatial-window.[ch]:
	* src/nautilus-window-private.h:
	* src/nautilus-window.c:
	Show busy cursor in browser mode too. (#97887)

	Patch from Christian Neumair <chris@gnome-de.org>
	
2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	* nautilus.desktop.in:
	* src/file-manager/fm-tree-view.c:
	* src/nautilus-places-sidebar.c:
	filesystem -> file system in strings

	Sebastien Bacher <seb128@debian.org>

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-dnd.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-properties-window.c:
	* src/nautilus-emblem-sidebar.c:
	Fix up some strings for the translators. (#309879)
	Patch from Christian Neumair <chris@gnome-de.org>

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-desktop-link-monitor.c:
	Handle volumes_visible changing from true to true.

	Patch from Benjamin Berg <benjamin@sipsolutions.net>

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	don't activate selection on expand in single click mode (#309389)
	
	Patch from chris@gnome-de.org
	
2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-places-sidebar.c:
	Remove gtk_range_get_adjustment assertion warnings.

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-global-preferences.[ch]:
	* src/nautilus-actions.h:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-navigation-window-ui.xml:
	* src/nautilus-navigation-window.c:
	Add toggle to hide/show main toolbar.

        Patch from Jamie McCracken <jamiemcc@blueyonder.co.uk>
	
2005-07-10  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-property-browser.c: (add_color_to_browser): Don't allow
	to add a color if another equally-named one already exists. Fixes
	#44867.

	Patch from Daniel Godas <siro.san@gmail.com>.

2005-07-09  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-pathbar.c:
	* src/nautilus-places-sidebar.c: (update_places):
	Use the same icon for filesystem as the gtk file chooser.
	Fixes #309825.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-09  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (nautilus_places_sidebar_init):
	Remove extra ScrolledWindow container. Fixes #309832.

2005-07-09  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-window-manage-views.c: (nautilus_window_reload):
	Preserve the selection when refreshing the view. Fixes #48383.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>

2005-07-08  Alexander Larsson  <alexl@redhat.com>

        Patch from Jamie McCracken <jamiemcc@blueyonder.co.uk>
	
	* src/Makefile.am:
	* src/nautilus-pathbar.[ch]:
	New pathbar widget. Based on code from gtk.
	
	* src/nautilus-navigation-window.[ch]:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window-private.h:
	Use pathbar in browser window.
	
	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	* libnautilus-private/nautilus-global-preferences.[ch]:
	Add always_use_location_entry prefs.
	
	* src/nautilus-navigation-window-menus.c:
	Whitespace fixup.

2005-07-07  Joe Shaw  <joeshaw@novell.com>

	* configure.in: Bump required gnome-vfs version up to
	2.11.1

2005-07-06  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-window.c: (add_view_as_menu_item):
	Connect accelerators with "View as" menu items. Fixes #139908.

	* libnautilus-private/nautilus-file-operations.c:
	(progress_dialog_set_to_from_item_text):
	When operating on remote locations, also display hostname in copy/move
	progress dialog.

2005-07-06  Kjartan Maraas  <kmaraas@gnome.org>

	* src/file-manager/fm-tree-view.c: (show_iter_for_file):
	Free the tree paths.
	* src/nautilus-notes-viewer.c: (get_property_pages): Close
	a tiny leak. (1 byte :-)
	* src/nautilus-property-browser.c: (emblem_dialog_clicked),
	(make_properties_from_directories): Unref pixbufs.
	* src/nautilus-spatial-window.c:
	(nautilus_spatial_window_set_location_button): Free icon name
	Closes bug #307291 and bug #308540.

2005-07-06  Danilo Šegan  <danilo@gnome.org>

	* src/file-manager/nautilus-directory-view-ui.xml: Add space
	before 'action="Rename"'.

2005-07-06  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-container.c:
	(nautilus_icon_container_get_selection):
	* src/file-manager/fm-directory-view.c: (delete_selected_files):
	Correctly sort files before operating on them. Fixes #308884.

	* libnautilus-private/nautilus-dnd.c: (nautilus_drag_init):
	* libnautilus-private/nautilus-dnd.h:
	* libnautilus-private/nautilus-icon-dnd.c:
	(get_data_on_first_target_we_support), (nautilus_icon_dnd_init):
	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	(nautilus_tree_view_drag_dest_new):
	* src/nautilus-spatial-window.c:
	(nautilus_spatial_window_instance_init):
	* src/file-manager/fm-list-model.c:
	(fm_list_model_multi_drag_data_get):
	Use GTK+ helpers for text D'n'D.

	* src/nautilus-shell-ui.xml:
	* src/nautilus-window-menus.c:
	Register control-+/- keys on keypad for zooming. Fixes #309018.

	* libnautilus-private/nautilus-file-operations.c:
	(new_file_transfer_callback):
	Fix template duplicate numbering. Fixes #307252.

2005-07-06  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-canvas-item.c:
	* libnautilus-private/nautilus-icon-container.c:
	* libnautilus-private/nautilus-icon-private.h:
	Add normal_alpha style property that is used when
	frame_text is on.
	
	Patch from Benjamin Berg <benjamin@sipsolutions.net>

2005-07-05  Joe Shaw  <joeshaw@novell.com>

	* nautilus-folder-handler.desktop.in: Add x-directory/normal
	and inode/directory to the list of mime types this desktop file
	can handle.

2005-07-05  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-dnd.h:
	Change NAUTILUS_ICON_DND_TEXT_TYPE to UTF-8 string.

	* libnautilus-private/nautilus-file-operations.[ch]:
	* libnautilus-private/nautilus-icon-container.[ch]:
	* libnautilus-private/nautilus-icon-dnd.c:
	* libnautilus-private/nautilus-marshal.list:
	* libnautilus-private/nautilus-tree-view-drag-dest.[ch]:
	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-tree-view.c:
	Enable dropping of text, which will create a new file containing the
	dropped text. Fix drop handle marshallers.

2005-07-02  Christian Kellner  <gicmo@gnome.org>

	* src/nautilus-location-entry.c:
	Replace eel_make_uri_from_input_with_trailing_ws with
	the gnome-vfs one.
	Fixes bug #165755.

2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.11.3 ===

2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c:
	Fix test

	* NEWS:
	Update for release

	* configure.in: 
	Require eel 2.11.3
	
2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-window-info.[ch]:
	* src/nautilus-window.c:
	Add nautilus_window_info_get_bookmark_list
	
	* src/Makefile.am:
	* src/nautilus-application.c:
	* src/nautilus-places-sidebar.[ch]:
	Add new places sidebar.

	Patch from Jamie McCracken <jamiemcc@blueyonder.co.uk>

	* src/file-manager/fm-tree-view.c:
	Fix runtime warnings.
	
2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	Add icon for empty file in create menu.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	Better strings for browser tooltips.
	Patch from Luca Ferretti <elle.uca@libero.it>
	
2005-06-03  Dinoop Thomas <dinoop.thomas@wipro.com>
	
	* libnautilus-private/nautilus-file-operations.c:
	(parse_previous_duplicate_name): Use strchr instead of strrchr to parse the
	base name from the file name. (Fixes #306341).

2005-06-28  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-sidebar.[ch]:
	Add get_tab_tooltop method.
	
	* src/nautilus-navigation-window.c:
	* src/nautilus-side-pane.[ch]:
	Use get_tab_tooltip.
	
	* src/nautilus-emblem-sidebar.c:
	* src/nautilus-history-sidebar.c:
	* src/nautilus-information-panel.c:
	* src/nautilus-notes-viewer.c:
	Implement get_tab_toolkit.

	Fixes bug #100268, patch from Michael Terry <mike@mterry.name>

2005-06-23  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-notes-viewer.c:
	(nautilus_notes_viewer_set_parent_window):
	Adapt to recent nautilus clipboard API changes.

2005-06-23  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-clipboard.c:
	(editable_connect_callbacks), (editable_disconnect_callbacks),
	(text_buffer_update_sensitivity), (text_buffer_delete_range),
	(text_buffer_mark_set), (text_view_connect_callbacks),
	(text_view_disconnect_callbacks), (merge_in_clipboard_menu_items),
	(initialize_clipboard_component_with_callback_data),
	(nautilus_clipboard_real_set_up),
	(nautilus_clipboard_set_up_text_view):
	* libnautilus-private/nautilus-clipboard.h:
	Properly set text view paste action sensitivity on clipboard changes.
	Fixes #306127.

2005-06-23  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-bookmark-list.c:
	Fix handling of notification of .gtk-bookmark file changes.
	
	* src/Makefile.am:
	* src/nautilus-window-bookmarks.[ch]: 
	* src/nautilus-application.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-navigation-window.[ch]:
	* src/nautilus-spatial-window-ui.xml:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-menus.c:
	* src/nautilus-window-private.h:
	* src/nautilus-window.[ch]:
	Move most bookmark stuff to nautilus-window-bookmarks and
	put bookmarks in spatial windows too.

2005-06-23  Alexander Larsson  <alexl@redhat.com>

        Patch from Jamie McCracken <jamiemcc@blueyonder.co.uk>
	
	* src/nautilus-bookmark-list.[ch]:
	Share bookmarks with gtk+.
	
	* libnautilus-private/nautilus-file-utilities.[ch]:
	* src/nautilus-window.c: (real_get_title):
	Move compute_default_title to nautilus_compute_title_for_uri.
	
	* libnautilus-private/nautilus-bookmark.[ch]:
	* src/nautilus-bookmarks-window.c: 
	Add has_custom_name boolean to NautilusBookmark
	
	* src/Makefile.am:
	* src/nautilus-bookmark-parsing.[ch]:
	* src/nautilus-navigation-window-menus.c:
	Remove no longer needed files nautilus-bookmark-parsing.[ch].
	
2005-06-20  Kjartan Maraas  <kmaraas@gnome.org>

	* src/file-manager/fm-directory-view.c: (reset_open_with_menu),
	(real_update_menus_volumes): Plug a couple leaks. Closes
	bug #307267

2005-06-20  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window-menus.c: 
	* src/nautilus-window-menus.c:
	* src/nautilus-window-private.h:
	Make bookmark menu item action names unique. (#161859)

2005-06-20  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (fm_list_view_did_not_drag):
	Fix ctrl-unselect in single click mode (#145331)

2005-06-20  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	Better font sizes for zooming. (#160080)

2005-06-20  Anders Carlsson  <andersca@imendio.com>

	* src/file-manager/fm-directory-view.c (process_old_files): 
	Plug leak by freeing the sorted list instead.

2005-06-20  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: (paste_clipboard_data):
	* src/file-manager/fm-tree-view.c: (paste_clipboard_data):
	Fix uninitialized variable warning.

2005-06-20  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-directory-async.c:
	(start_or_stop_io), (file_needs_high_priority_work_done),
	(file_needs_low_priority_work_done):
	Make mime sniffing a high priority job. Prevents activation
	from getting blocked by deep count I/O. (#145560)

2005-06-19  Anders Carlsson  <andersca@imendio.com>

	* src/nautilus-throbber.c (nautilus_throbber_finalize): 
	Free throbber->details after we're done using it.
	
2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c:
	Small delay before turning Loading... into (Empty) to
	avoid flicker.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_remove):
	Fix iter stamp handling.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c: (button_press_callback):
	Allow selection of the dummy node. Otherwise things
	got all strange: You could still select it using ranges, and
	if you double clicked on it you activated the old selection.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_remove):
	On remove, add dummy node before removing file so the
	row isn't collapsed.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_get_value),
	(fm_list_model_unload_subdirectory),
	(fm_list_model_subdirectory_done_loading):
	Keep track of done_loading in parent instead of in dummy node.
	That way it doesn't get lost when the dummy node is recreated.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c (fm_list_model_add_file):
	Handle moves between open subdirectories. We handle
	this in file adding when the file already exists in
	the tree, but in another place. This is sort of a hack,
	but is required due to how the list view merges the initial
	change being sent to the original directory and the add to the
	new directory.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move):
	Handle duplication of files in two subdirectories at
	the same time.

2005-06-16  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy):
	Remove subdirectories when destroying the view.

2005-06-16  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file.c (nautilus_file_get_display_name_collation_key):
	Conditionally use g_utf8_collate_key_for_filename for glib >= 2.7.0

2005-06-16  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	Slightly slower auto hover expand.
	
	* src/file-manager/fm-directory-view.c:
	Make add/remove_subdirectory more straightforward.
	Now remove just removes the NautilusDirectory passed in, and
	you're not allowed to add multiple times or remove non-added.
	
	* src/file-manager/fm-list-model.[ch]:
	Actually track the NautilusDirectories that are added to the
	FMDirectoryView so we can easily remove them when the files are
	removed. This was causing problem before where directories for
	removed files weren't removed.

	Emits the subdirectory_unloaded signal when subdirectories go away.

	Add support for unloading subdirectories.
	
	* src/file-manager/fm-list-view.c:
	Unload subdirectories in timeout on collapse.
	remove subdirectories when they get unloaded.

2005-06-16  Anders Carlsson  <andersca@imendio.com>

	* src/nautilus-navigation-window-menus.c 
	(append_dynamic_bookmarks): Unref the action group here too.

2005-06-16  Anders Carlsson  <andersca@imendio.com>

	* src/nautilus-navigation-window-menus.c: (refresh_go_menu):
	Unref the action group after inserting it. This makes
	a NautilusFile memory leak go away.

2005-06-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/fm-icon-view.c
	add fm_directory_view_get_selection_for_file_transfer and
	use it for all file transfers

	* src/file-manager/fm-list-view.c:
	Implement fm_directory_view_get_selection_for_file_transfer by
	filtering out all files there a parent is also in the selection.
	Do the same for the dnd source list.
	
	* src/file-manager/fm-list-model.c:
	Allow deletion of dummy node so that clearing the model
	doesn't loop forever.

2005-06-15  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (new_folder_done),
	(new_folder_data_new), (fm_directory_view_new_folder),
	(fm_directory_view_new_file):
	Don't try to setup renaming if the view was already destroyed.
	Fixes a crash when closing a window while creating files/folders.

2005-06-15  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-dnd.c:
	No dnd shadow on the desktop.
	Redraw less to get rid of the dnd shadow.
	
	Patch from Matthias Clasen (#307803)

2005-06-15  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	Add hover expansion
	
	* src/file-manager/fm-directory-view.[ch]:
	Add support for adding/removing subdirectories.
	
	* src/file-manager/fm-list-model.[ch]:
	Add support for subdirectories making this a tree view.
	
	* src/file-manager/fm-list-view.c:
	Turn listview into a treeview.

	Patch from Jürg Billeter <j@bitron.ch>
	
2005-06-15  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-spatial-window.c:
	Add icons for path menu.
	Patch from Vincent Noel <vincent.noel@gmail.com>

2005-06-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_handle_uri_list_drop):
	Check for n_uris instead of real_uri_list. Looks neater.

2005-06-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_handle_uri_list_drop):
	Don't try to start a file operation if there are no real uris
	left after sanitizing the list. Fixes #306246.

2005-06-11  Kjartan Maraas  <kmaraas@gnome.org>

	* libnautilus-private/nautilus-emblem-utils.c:
	(nautilus_emblem_install_custom_emblem): Free the path.
	* libnautilus-private/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_new),
	(nautilus_file_operations_progress_new_file): Free markup strings.
	Closes bug #307138.

2005-06-10  Kjartan Maraas  <kmaraas@gnome.org>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_confirm_deletion): Mark two strings for translation.

2005-06-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (convert_lines_to_str_list):
	* src/file-manager/fm-tree-view.c: (convert_lines_to_str_list):
	Always initialize cut.

	* configure.in:
	Add --Wno-pointer-sign

	Fix gcc4 compilation (#303491/#307038).
	Based on patches from James M. Cape <jcape@ignore-your.tv>
	and Kjartan Maraas <kmaraas@gnome.org>

2005-06-08  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.11.2 ===

2005-06-08  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require new eel.

	* NEWS:
	Update for release.

2005-06-06  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-tree-model.c: (fm_tree_model_get_value):
	Back out the "(Empty)" vs. "(No subfolders)" change. The string
	is too wide for the tree and gets even wider in some locales.

2005-06-06  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-column-chooser.c: (add_buttons):
	Fix conflicting mnemonics in the column chooser (#167475).
	
	Patch from Michael Terry <mike@mterry.name>

2005-06-06  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-tree-model.c: (fm_tree_model_get_value):
	Use "(No subfolders)" instead of misleading "(Empty)" label
	if files are not to be shown in the tree. Fixes #85141.

	Patch from Christian Neumair <chris@gnome-de.org>

2005-06-06  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-icon-container.c:
	(select_one_unselect_others):
	Reveal icon when selecting it. Fixes #121111.
	
	Based on a patch from Christian Neumair <chris@gnome-de.org>

2005-06-04  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-clipboard.c:
	(nautilus_clipboard_real_set_up):
	Don't setup clipboard twice for the same editing widget.

2005-06-04  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-window-manage-views.c: (load_new_location),
	(update_for_new_location):
	Set the displayed location when the location is really
	changed, not when we set out to do it. Fixes the
	"bookmark uri mismatch" warning.

2005-06-04  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	* src/nautilus-shell-ui.xml:
	* src/nautilus-window-menus.c:
	Fix critical warnings from the new accelerators
	by adding dummy labels.
	
2005-06-03  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-shell-ui.xml: Fix "Zoom In Accel" action.

2005-06-03  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-extension/nautilus-column.c:
	(nautilus_column_class_init):
	* libnautilus-extension/nautilus-menu-item.c:
	(nautilus_menu_item_class_init):
	* libnautilus-extension/nautilus-property-page.c:
	(nautilus_property_page_class_init):
	* libnautilus-private/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_class_init):
	* libnautilus-private/nautilus-icon-container.c:
	(nautilus_icon_container_class_init):
	* src/nautilus-window.c: (nautilus_window_class_init):
	Don't mark object property names/descriptions for translation. Fixes
	#135281.

2005-06-02  Sebastien Bacher  <seb128@debian.org>

	* libnautilus-private/nautilus-emblem-utils.c:
	(nautilus_emblem_install_custom_emblem),
	(nautilus_emblem_can_remove_emblem),
	(nautilus_emblem_can_rename_emblem),
	(nautilus_emblem_remove_emblem), (nautilus_emblem_rename_emblem):
	use "hicolor" instead of "gnome" for emblems (Closes: #164629).

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (real_action_rename):
	Always pre-select the whole name of a directory when renaming it.
	Fixes #306217.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file.c: (compare_by_emblems),
	(get_automatic_emblems_as_integer):
	* libnautilus-private/nautilus-file-private.h:
	Only take user-added emblems ("keywords") into account when sorting by
	emblems. Fixes #166376.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_scroll_event):
	Change scroll zoom modifier to control. Fixes #79352.

	* src/nautilus-shell-ui.xml:
	* src/nautilus-window-menus.c:
	Bind control-= to zoom-in. Fixes #306225.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-clipboard.c:
	* libnautilus-private/nautilus-icon-dnd.c:
	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-ditem-page.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-model.c:
	* src/file-manager/fm-list-model.h:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-properties-window.c:
	* src/nautilus-emblem-sidebar.c
	* src/nautilus-file-management-properties.c:
	* src/nautilus-information-panel.c:
	* src/nautilus-location-bar.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-zoom-controls.c:
	Also declare GtkToggleActionEntry, GtkRadioActionEntry and
	GtkTargetEntry as well as some char and int arrays const.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-menus.c:
	Declare GtkActionEntry arrays const. Thanks to Paolo Borelli for
	pointing this out.

2005-06-02  Rodrigo Moya <rodrigo@novell.com>

	* libnautilus-extension/libnautilus-extension.pc.in: added
	extensiondir variable so that extensions can find out via pkg-config
	the dir to install to.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-container.c:
	* libnautilus-private/nautilus-icon-container.h:
	(process_pending_icon_to_rename),
	(nautilus_icon_container_start_renaming_selected_item):
	* src/file-manager/fm-directory-view.c: (start_renaming_file),
	(real_action_rename), (action_rename_callback),
	(action_rename_select_all_callback):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c: (fm_icon_view_start_renaming_file):
	* src/file-manager/fm-list-view.c: (fm_list_view_start_renaming_file):
	* src/file-manager/nautilus-directory-view-ui.xml:
	Bind shift-f2 to rename whole file. Fixes #131467.

2005-05-27  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Don't display "Properties" background context menu item for Desktop.

2005-05-27  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-location-dialog.c: (nautilus_location_dialog_new):
	Only set dialog transient if a parent window was specified.
	Fixes #142814.

2005-05-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_handle_url_drop):
	Better handling of default action for mozilla dnd drops.

	Patch from Dave Ahlswede

2005-05-27  Christian Persch  <chpe@cvs.gnome.org>

	* src/nautilus-navigation-action.c: (set_tooltip_callback),
	(connect_proxy), (nautilus_navigation_action_finalize),
	(nautilus_navigation_action_set_property),
	(nautilus_navigation_action_get_property),
	(nautilus_navigation_action_class_init),
	(nautilus_navigation_action_init):
	* src/nautilus-navigation-window-menus.c:
	(nautilus_navigation_window_initialize_actions):
	Add specific tooltips to the drop-down arrow of Back/Forward
	toolbar items. Fixes bug #86569.

2005-05-18  Dinoop Thomas  <dinoop.thomas@wipro.com>
	
	* src/nautilus-connect-server-dialog.c:
	(connect_to_server), (nautilus_connect_server_dialog_finalize),
	(nautilus_connect_server_dialog_init), (setup_for_type):
	Added a domain field to enter domain name for Windows share in
	Connect to server dialog.
	Fixes bug #304760.

2005-05-26  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-clipboard.c:
	* src/file-manager/fm-directory-view.c:
	(copy_or_cut_files), (real_update_menus):
	* src/file-manager/fm-tree-view.c:
	(copy_or_cut_files), (create_popup_menu):
	Remove qualifiers from Cut/Copy/Paste, except for "Paste Into
	Folders". Fixes #95112.

2005-05-26  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Fix empty trash accelerator. Fixes #173059.

	* libnautilus-private/nautilus-clipboard.c: (cut_callback),
	(copy_callback), (paste_callback), (editable_select_all_callback),
	(text_view_select_all_callback), (action_cut_callback),
	(action_copy_callback), (action_paste_callback),
	(action_select_all_callback), (merge_in_clipboard_menu_items),
	(selection_changed_callback), (nautilus_clipboard_real_set_up),
	(nautilus_clipboard_set_up_editable),
	(nautilus_clipboard_set_up_text_view):
	* libnautilus-private/nautilus-clipboard.h:
	(nautilus_clipboard_set_up_text_view):
	* src/nautilus-notes-viewer.c:
	Add nautilus_clipboard_set_up_text_view, setup clipboard for
	notes text view.

	* src/nautilus-window-menus.c: (action_about_nautilus_callback):
	Fix two possible memory leaks. Kudos to Brian Pepple for tracking this
	issue down and providing a patch. Fixes #305551.

2005-05-25  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_scroll_event),
	(fm_directory_view_class_init):
	Bind shift+scroll to zoom in/out. Fixes #79352.

2005-05-23  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file.c (nautilus_file_get_string_attribute):
	Change sort order for size, count and time.
	See bug #88585

2005-05-22  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Nicer formatted PKG_CHECK_MODULES() output. (#148355)	

	Patch from Tomasz Kloczko <kloczek@pld.org.pl>

2005-05-22  Martin Wehner  <martin.wehner@gmail.com>

	* components/*
	* help/*
	* icons/*/*
	* libnautilus/*
	* libnautilus-adapter/*
	* omf-install/*
	* user-guide/*
	Remove old cruft, mostly .cvsignore files.

	* autogen.sh:
	Look for libnautilus-private instead of libnautilus.

2005-05-21  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-factory.c:
	* libnautilus-private/nautilus-icon-factory.h:
	(get_smaller_icon_size), (get_larger_icon_size),
	(nautilus_icon_factory_get_smaller_icon_size),
	(nautilus_icon_factory_get_larger_icon_size):
	Make get_(larger|smaller)_icon_size public.

	* src/nautilus-sidebar-title.c:
	(nautilus_sidebar_title_size_allocate),
	(get_best_icon_size):
	Use the best-fitting folder icon for the sidebar
	instead of hardcoding NAUTILUS_ICON_SIZE_LARGE.
	Fixes #48190.

2005-05-17  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.11.1 ===

2005-05-17  Alexander Larsson  <alexl@redhat.com>

	* icons/*/*:
	Remove old junk.
	
	* configure.in:
	Require eel 2.11.1
	Remove icons/*/Makefile
	
	* NEWS: 
	Update for 2.11.1
	
2005-05-17  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-view.[ch]:
	Add nautilus_view_pop_up_location_context_menu
	
	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/nautilus-location-bar.c:
	* src/nautilus-spatial-window.c:
	Add location context menu to location button/label.

	Patch from Christian Neumair

2005-05-17  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-spatial-window.c:
	(real_set_allow_up), (nautilus_spatial_window_class_init)
	* src/nautilus-window.c:
	* src/nautilus-window.h:
	(nautilus_window_allow_up), (real_set_allow_up),
	(nautilus_window_class_init):
	Add set_allow_up method to NautilusWindowClass,
	make "Close All Parents" in spatial windows insensitive
	if there are no parent folders.

2005-05-17  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file-operations.c:
	(handle_transfer_vfs_error):
	Offer "Skip", "Cancel", "Retry" in XFer Error prompt
	if more than one file is transferred. Otherwise, just
	offer "Cancel" and "Retry".

2005-05-17  Alexander Larsson  <alexl@redhat.com>

	* nautilus-folder-handler.desktop.in (Exec):
	Use --no-desktop for default folder handler

2005-05-16  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	(action_self_properties_callback), (real_update_menus):
	* src/file-manager/nautilus-directory-view-ui.xml:
	Add "Properties" item to background context menu which displays
	the properties of the currently displayed folder.

2005-05-16  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-bookmark.c:
	(bookmark_file_changed_callback):
	Don't loop when a bookmarked file is removed
	
	* src/file-manager/fm-directory-view.c: (process_new_files):
	Don't call get_file_info for files no longer in the directory
	(was caused by the ready_to_load call).

	This fixes #165530 and likely #170761

2005-05-12  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-clipboard.c:
	(merge_in_clipboard_menu_items), (merge_out_clipboard_menu_items):
	Don't merge UI twice. Fixes #301854.

2005-05-12  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-location-bar.c:
	(nautilus_location_bar_init):
	Make "Location:" label GDK_ACTION_COPY drag source.
	Fixes #115942.

2005-05-12  David Zeuthen  <david@fubar.dk>

	* libnautilus-private/apps_nautilus_preferences.schemas.in: 
	Change comment for translator note of default desktop font to
	say that Sans shouldn't never be changed. Fixes bug #138731.

2005-05-11  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file-utilities.c:
	(nautilus_get_vfs_method_display_name):
	* data/browser.xml:
	* src/file-manager/fm-directory-view.c:
	Add translator comments. Fixes #145304, #145305, #145307.
	Change "Show Hidden Files" tooltip to infinitive
	construction. Fixes #145306.

2005-05-11  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-directory-async.c:
	(should_look_for_dot_directory_file), (make_dot_directory_uri),
	(link_info_start), (lacks_link_info):
	Kill dotfile-related code. ".directory" supporting schemas have
	gone. Fixes #142343.

2005-05-10  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	Remove obsolete window_always_new option from schema.

	Patch from Michael Terry <mike@mterry.name>

2005-05-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Fix a string conflict between the c-format plural string and
	non-c-format strings. Fixes bug #167344.

	Patch from Changwoo Ryu <cwryu@debian.org>

2005-05-08  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-thumbnails.c:
	(thumbnail_thread_start):
	Don't try to thumbnail files which have been modified in the
	last few seconds to avoid constantly re-thumbnailing them.
	Current cool-off period is three seconds. Fixes bug #107418.

2005-05-03  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.[ch]:
	(display_pending_files), (fm_directory_view_freeze_updates),
	(fm_directory_view_unfreeze_updates), (queue_pending_files):
	Allow freeze of update processing inside a view.
	
	* src/file-manager/fm-list-view.c:
	(cell_renderer_editing_canceled), (cell_renderer_edited),
	(create_and_set_up_tree_view), (fm_list_view_start_renaming_file):
	Freeze and unfreeze the list view when renaming.

        Workaround for bug #87701: Updates to the list view are put on
	hold during rename to prevent losing editing focus. If too many
	changes are queued while being frozen, further changes are thrown
	away and the view is marked for reload.

2005-05-02  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-window-menus.c:
	Add Ctrl-0 keyboard shortcut to View->Normal Size as
	recommended by the HIG.
	
	Patch from Olav Vitters <olav@bkor.dhs.org>

2005-05-02  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-icon-container.c:
	(keyboard_space): Prevent nautilus from crashing on press of
	Ctrl+Space in an empty directory. Fixes bug #302018.

	Patch from Vinay M R  <vinay.mandyakoppal@wipro.com>
	
2005-05-02  Frederic Crozat  <fcrozat@mandriva.com>

	* libnautilus-private/nautilus-program-choosing.c:
	(nautilus_launch_desktop_file):
	* src/nautilus-application.c:
	(nautilus_application_present_spatial_window_with_selection),
	(nautilus_application_create_navigation_window):
	fix build when startup notification isn't installed.

2005-05-02  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	Remove the ui too.

2005-04-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c:
	Remove "Open New Terminal" from desktop menu.
	Patch from Luca Ferretti <elle.uca@libero.it>

	If you really need this, install the nautilus-open-terminal
	extension. It does this even better than the removed code.
	Also, in newer Metacity there is a a way to set a keybinding
	for "new terminal".
	
2005-04-19  Kjartan Maraas  <kmaraas@gnome.org>

	* src/nautilus-main.c: (main): Merge fix for leak
	Bug #172234.

2005-04-19  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-view-factory.h:
	* src/nautilus-navigation-window.c:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window-manage-views.h:
	* src/nautilus-window.c:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Improve NautilusViewInfo view factory labels marked for translation.

2005-04-19  Kjartan Maraas  <kmaraas@gnome.org>

	* libnautilus-private/nautilus-directory-async.c:
	(read_dot_hidden_file): Plug leaks here too. There
	were three actually :-)

2005-04-18  Dennis Cranston  <dennis_cranston at yahoo com>

	* src/nautilus-connect-server-dialog-main.c: (main)
	Set window icon.
	
2005-04-17  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-spatial-window.c:
	Add more drop targets to location button.

2005-04-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy), (rename_file):
	Remove delayed_rename timeout when registering a new one
	or destroying the view.

2005-04-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-list-view.c: (fm_list_view_remove_file):
	Free the stored selection path only when setting a new one.

2005-04-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(trash_or_delete_selected_files),
	(fm_directory_view_notify_selection_changed):
	Remember if the current selection was already removed
	and don't try to remove it again.
	
	* src/file-manager/fm-list-view.c: (fm_list_view_remove_file):
	Only set a new selection if the removal affects the current selection.
		
2005-04-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(trash_or_delete_selected_files):
	Unset selection so the same file won't be deleted twice via a binding.

	* src/file-manager/fm-list-view.c: (fm_list_view_end_file_changes),
	(fm_list_view_remove_file), (fm_list_view_finalize),
	(fm_list_view_class_init):
	Store the new selection and set it after a batch of changes,
	not on every removal. Speeds up deleting from the list view
	by preventing a redraw for each removed file.

2005-04-05  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Use label instead of entry if not editable.
	(#149201)
	
	Patch from Michael Terry

2005-04-04  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-notes-viewer.c:
	Fix missing include.

2005-04-04  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file.c: (nautilus_file_matches_uri):
	Don't leak file_uri.

2005-04-04  Diego Gonzalez  <diego@pemas.net>

	* libnautilus-private/Makefile.am: remove nautilus-theme.[c-h]
	  from the build process.
	* libnautilus-private/nautilus-icon-factory.c:
	  (load_thumbnail_frame) remove the need to use the deprecated
	  nautilus themes.
	* libnautilus-private/nautilus-icon-canvas-item.c:
	  (draw_strech_handles), (it_test_stretch_handle):
	  remove the need to use the deprecated nautilus themes.
	* libnautilus-private/nautilus-thumbnails.c:
	* libnautilus-private/nautilus-icon-factory.c:
	  remove nautilus-theme.h include

	* src/nautilus-navigation-window.c:
	* src/nautilus-property-browser.c:
	* src/nautilus-notes-viewer.c:
	* src/nautilus-sidebar-title.c:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window-toolbars.c:
	* src/nautilus-zoom-control.c:
	  remove nautilus-theme.h include

	* src/nautilus-sidebar-title:
	 (nautilus_sidebar_title_select_text_color): remove use of
	 old theme stuff and adapt the shadow offset, made it equal to 1,
	 which is the default.
	 (nautilus_sidebar_title_theme_changed): remove, as there will be
	 no sidebar theme changes.
	 (nautilus_sidebar_title_init): remove the theme_changed callback, as
	 there will not be sidebar theme changes anymore.

	 * src/nautilus-notes-viewer.c:
	 (nautilus_notes_viewer_init): remove use of old theme stuff.

	* icons/Makefile.am: don't install old theme stuff.

2005-03-31  Steve Murphy  <murf@e-tools.com>

        * configure.in: Added "rw" to ALL_LINGUAS.

2005-03-31  Kjartan Maraas  <kmaraas@gnome.org>

	* libnautilus-private/nautilus-file-utilities.c:
	(nautilus_get_uri_shortname_for_display): Plug the leak.

2005-03-31  Martin Wehner  <martin.wehner@gmail.com>

	* icons/audio.svg:
	New svg icon from Corey Woodworth <CoreyWoodworth@gmail.com>

	* icons/audio.png:
	Remove old file.	

	* icons/Makefile.am:
	Install new icon.

	* libnautilus-private/nautilus-icon-canvas-item.c:
	(real_map_pixbuf):
	Use svg instead of bitmap audio preview emblem.

	Patch from Jaap Haitsma <jaap@haitsma.org>
	
2005-03-30  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-spatial-window.c: (get_dnd_icon_size),
	(location_button_drag_begin_callback), (get_data_binder),
	(location_button_drag_data_get_callback),
	(nautilus_spatial_window_instance_init):
	Allow drag and drop operations with location bar icon.

	Patch from Christian Neumair <chris@gnome-de.org>

2005-03-30  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_update),
	(nautilus_file_operations_progress_destroy),
	(nautilus_file_operations_progress_init),
	(time_remaining_callback), (nautilus_file_operations_progress_new),
	(nautilus_file_operations_progress_set_operation_string),
	(nautilus_file_operations_progress_new_file):
	* libnautilus-private/nautilus-file-operations.c:
	(progress_dialog_set_to_from_item_text):
	Change layout of the progress dialog to be more HIG compliant.	

	Patch from Michiel Sikkes <michiel@eyesopened.nl>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	Add elipses to "Create Launcher" menu item. (#95113)
	
	Based on a patch from Christian Neumair <chris@gnome-de.org>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-desktop-link-monitor.c:
	(eject_for_type), (volume_delete_dialog),
	(nautilus_desktop_link_monitor_delete_link):
	Reference the proper context menu item in the volume
	delete dialog of network volumes. Fixes bug #152391.
	
	Patch from Dennis Cranston <dennis_cranston@yahoo.com>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (real_merge_menus):
	Remove hard coded script directory path from tooltip message.
	Fixes bug #161905.
	
	Patch from Michael Terry <mike@mterry.name>
	
2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-connect-server-dialog.c: (connect_to_server):
	* src/nautilus-location-bar.c:
	(nautilus_location_bar_get_location),
	(nautilus_location_bar_update_label):
	* src/nautilus-location-dialog.c: (open_current_location):
	Replace eel_make_uri_from_input with the gnome-vfs equivalent.
	Closes bug #165743.

	Patch from Christian Kellner <gicmo@gnome.org>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-bookmark.c:
	(nautilus_bookmark_compare_with), (nautilus_bookmark_compare_uris),
	(bookmark_file_changed_callback):
	* libnautilus-private/nautilus-file.c:
	(nautilus_file_get_internal):
	* src/file-manager/fm-properties-window.c:
	(is_merged_trash_directory):
	* src/nautilus-application.c:
	(nautilus_application_present_spatial_window_with_selection):
	* src/nautilus-location-bar.c:
	(nautilus_location_bar_update_label):
	* src/nautilus-window-manage-views.c: (set_displayed_location),
	(check_bookmark_location_matches), (handle_go_elsewhere),
	(got_file_info_for_view_selection_callback):
	Use gnome_vfs_uris_match instead of eel_uris_match. (#155852)

	Patch from Paolo Borelli <pborelli@katamail.com>

2005-03-23  Fernando Herrera  <fherrera onirica com>

	* src/nautilus-connect-server-dialog-main.c: (main): call
	gnome_authentication_manager_init to use gnome-vfs auth 
	callbacks.

2005-03-23  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-desktop-window.c:
	Remove unused code. We avoid flicker in other ways.
	
2005-03-22  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.11.1
	Gnome 2.10 versions are now on the gnome-2-10 branch.

2005-03-22  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-location-entry.c:
	Minor cleanup from Jaap Haitsma <jaap@haitsma.org>

2005-03-22  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-window-info.[ch]:
	Add nautilus_window_info_show_window call.
	
	* src/file-manager/fm-directory-view.c:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window.[ch]:
	Implement and call the new show_window call.
	This allows us to set up the EelBackground before
	showing the window, causing less flicker (#169347)

	Patch from Nickolay V. Shmyrev  
	
2005-03-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require eel 2.10.1 (for EelBackground changes)
	
	* libnautilus-private/nautilus-icon-dnd.c:
	* libnautilus-private/nautilus-directory-background.c:
	Use the background setting now in eel.
	Delay background setting slightly after gconf change to group
	together multiple changes. (#169347)

	Patch from Nickolay V. Shmyrev

2005-03-15  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require gtk 2.6.0

2005-03-12  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	Re-add keybinding to "Show Hidden Files".
	Patch from Dave Ahlswede <mightyquinn@letterboxes.org>

2005-03-12  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Disable "Select Pattern" for empty folders. (#169817)
	Patch from Raj <ringuva@novell.com>

2005-03-10  Vincent Noel  <vnoel@cox.net>

	* src/nautilus-spatial-window.c:
	(location_button_clicked_callback),
	(nautilus_spatial_window_instance_init): Use GTK_ICON_SIZE_MENU
	for the location button icon instead of GTK_ICON_SIZE_BUTTON
	(#169669).

2005-03-10  Adi Attar  <aattar@cvs.gnome.org>

	* configure.in: Added "xh" to ALL_LINGUAS.

2005-03-07  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.10.0 ===
	
2005-03-07  Martin Wehner  <martin.wehner@gmail.com>

	* THANKS:
	Update for release
	
	* check-THANKS.pl:
	Extract names from ChangeLog bodies too. (#43452)
	Patch from Richard Hoelscher <rah@rahga.com>

2005-03-07  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for 2.10.0
	
	* configure.in:
	Bump version to 2.10.0, require eel 2.10.0

2005-03-03  Elijah Newren  <newren@gmail.com>

	If launched without startup-notification, make an approximation to
	when the launch occurred so that focus-stealing-prevention will
	work better.

	* src/nautilus-main.c: (slowly_and_stupidly_obtain_timestamp): new
	function, (main): if no startup id provided, ping xserver for a
	timestamp and make a dummy startup_id with it.

	* src/nautilus-application.c: (end_startup_notification): don't
	set _NET_STARTUP_ID if given a fake startup_id, remove commented
	out warning that should now no longer be needed

2005-03-01  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-file-management-properties.glade:
	Center dialog. Patch from Christian Neumair <chris@gnome-de.org>.

2005-03-01  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.9.92 ===
	
2005-03-01  Alexander Larsson  <alexl@redhat.com>

	* data/applications.desktop.in:
	* data/favorites.desktop.in:
	Remove old files.
	
	* docs/Makefile.am (EXTRA_DIST):
	Remove nautilus-context-menus.txt from makefile

	* NEWS:
	Update for release

2005-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-list-view.c: (create_and_set_up_tree_view):
	Make the backspace key open the parent folder in the
	list view like it does in the icon view. (#142891)
	Patch from Christian Neumair <chris@gnome-de.org>

2005-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-desktop-link.c:
	(nautilus_desktop_link_can_rename):
	Make Computer icon renameable. (#154122)
	Patch from Tim Savannah <opticcow@linux-militia.net>

2005-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file-operations-progress.c:
	(time_remaining_callback):
	Don't show ETA if bytes_copied > bytes_total.
	Prevents miscalculated ETAs from being shown. (#158614)
	Based on a patch from John Spray <jcs116@york.ac.uk>

2005-02-24  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Make show_original work (had a typo)
	Make where use original file, not target.
	Fixes location display for desktop icons.
	
2005-02-24  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	deep count on target files, not original files.
	Fixes properties for e.g. home icon on desktop.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-02-23  Alexander Larsson  <alexl@redhat.com>

	* docs/nautilus-context-menus.txt:
	Remove old docs.

2005-02-22  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-desktop-icon-file.c:
	* libnautilus-private/nautilus-file-operations.c:
	(nautilus_file_operations_delete):
	* libnautilus-private/nautilus-file.c: (nautilus_file_can_rename),
	(rename_guts), (nautilus_file_get_drop_target_uri):
	* src/file-manager/fm-desktop-icon-view.c:
	(trash_link_is_selection):
	* src/file-manager/fm-icon-container.c: (get_sort_category):
	* src/file-manager/fm-properties-window.c:
	(get_target_file_for_original_file):
	Handle nautilus_desktop_icon_file_get_link() returning NULL.
	Likely fixes bug #145971

2005-02-22  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c: (should_show_mime_type):
	Remove stale comment.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-02-22  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-application.c: (end_startup_notification):
	Don't give critical warnings if we have no startup_id.
	
	* src/nautilus-window.c: (nautilus_window_update_icon):
	Use names and not pixbufs for the window icons.
	This means the icons of the best size are used.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-02-22  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-application.c: (create_window):
	* src/nautilus-window-private.h:
	* src/nautilus-window.c: (nautilus_window_init),
	(nautilus_window_finalize):
	Remove unneeded startup_id.

2005-02-22  Martin Wehner  <martin.wehner@gmail.com>

	* MAINTAINERS:
	Update my email address.

2005-02-21  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_supports_uri):
	Use EEL_DESKTOP_URI instead of "x-nautilus-desktop:".
	
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-02-18  Paolo Borelli  <pborelli@katamail.com>

	*  libnautilus-private/nautilus-icon-container.c (popup-menu):
	fix #136578 (Menu key should pop up context menu).

2005-02-18  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c (should_show_open_with):
	Don't show open with property page for desktop files and
	desktop special icons.

2005-02-17  Martin Wehner  <martin.wehner@epost.de>

	* src/nautilus-navigation-window-menus.c:
	(add_bookmark_for_current_location):
	Only add a bookmark once for a given location.
	Fixes #161862.
	
	Patch from egeetha@novell.com

2005-02-15  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-application.c:
	* src/nautilus-shell.c:
	Fixes to the startup notification stuff.
	Patch from Elijah Newren <newren@gmail.com>

2005-02-14  Alexander Larsson  <alexl@redhat.com>

	* data/applications.desktop.in:
	* data/favorites.desktop.in:
	* src/network-scheme.desktop.in:
	* nautilus-computer.desktop.in:
	* nautilus-folder-handler.desktop.in:
	* nautilus-home.desktop.in:
	* nautilus.desktop.in:
	Enable startup notification.
	
	* src/nautilus-application.c:
	* src/nautilus-application.h:
	* src/nautilus-bookmarks-window.c:
	* src/nautilus-connect-server-dialog-nonmain.c:
	* src/nautilus-location-bar.c:
	* src/nautilus-main.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-shell-interface.idl:
	* src/nautilus-shell.c:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window-private.h:
	* src/nautilus-window.c:
	Handle startup notification across corba activation.
	Patch from Elijah Newren <newren@gmail.com>

2005-02-11  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-model.c:
	Don't do any i/o on tree roots until they are opened.
	This means you don't get any auth dialogs.
	Removed the monitor on the root file totally, as that should
	not normally change/go away anyway (and it was doing i/o).
	
	This changes semantics in the file a bit, we now have a dummy
	row also if node->directory != NULL and node->parent == NULL.

2005-02-10  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.9.91 ===
	
2005-02-10  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump eel requires

	* NEWS:
	Update for release

2005-02-09  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	* nautilus-folder-handler.desktop.in:
	Add new default folder handler NoDisplay desktop file
	
	* nautilus.desktop.in:
	Add %U to exec line
	
	* src/Nautilus_shell.server.in:
	Remove all the bonobo components we no longer support
	
	* src/file-manager/fm-directory-view.c:
	Allow open with menu on folders (#151747)
	
2005-02-08  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-list-view.c: (cell_renderer_edited),
	(fm_list_view_start_renaming_file):
	Set original_name to the new name as cell_renderer_edited()
	might be called multiple times if the view looses focus.
	Fixes bug #166120.

2005-02-07  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-properties-window.c: (get_original_file),
	(name_field_done_editing), (update_properties_window_title):
	Handle disappearing original_files without crashing.
	Fixes bug #151024/158904.

2005-02-07  Martin Wehner  <martin.wehner@epost.de>

	* configure.in:
	Revert libexif change as it breaks the build with new libexif.
        
2005-02-06  Martin Wehner  <martin.wehner@epost.de>

	* libnautilus-private/nautilus-program-choosing.c:
	(slowly_and_stupidly_obtain_timestamp),
	(nautilus_launch_show_file), (nautilus_launch_application),
	(nautilus_launch_desktop_file):
	Use new gnome_desktop_item_set_launch_time() API. (#166334)

	* configure.in:
	Require gnome-desktop 2.9.91
		
	Patch from Elijah Newren <newren@gmail.com>

2005-02-06  Martin Wehner  <martin.wehner@epost.de>

	* configure.in:
	Make libexif dependency optional again. (#165773)

2005-02-05  Martin Wehner  <martin.wehner@epost.de>

	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	Make default desktop font localizable. (#138731)
	
	Patch from Takao Fujiwar <takao.fujiwara@sun.com>

2005-02-05  Martin Wehner  <martin.wehner@epost.de>

	* data/Makefile.am:
	* data/static_bookmarks.xml:
	Remove unused file.

2005-02-05  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-directory-view.c:
	(real_update_menus): Added mnemonic for Browse Folder option.
	* src/file-manager/fm-desktop-icon-view.c:
	(real_update_menus): Added mnemonic for Empty Trash option.
	Fixes #162307.
	
	Patch from Dinoop Thomas <dinoop.thomas@wipro.com>
	
2005-02-04  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c (net_workarea_changed):
	Fix workarea detection on 64bit machines.
	Patch from Ian Wienand <ianw@gelato.unsw.edu.au>

2005-02-01  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(clipboard_targets_received):
	Handle destroyed windows
	
	* src/nautilus-window.c: (nautilus_window_destroy):
	cancel outstanding view as callbacks

	Fixes #165938

2005-01-31  Kjartan Maraas  <kmaraas@gnome.org>

	* libnautilus-private/nautilus-directory-background.c:
	(image_loading_done_callback): Free the color string.
	Closes bug #154204.

2005-01-30  Sven Herzberg  <herzi@gnome-de.org>

	reviewed by: Martin Wehner  <martin.wehner@epost.de>

	* libnautilus-private/nautilus-file-operations.c:
	change the strings for move/copy/link/delete from "Files Moved:" to
	"Moving file:", fixes #154839

2005-01-28  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file.c:
	Fix leak

	* Makefile.am:
	Remove unnecessary stuff

2005-01-28  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-actions.h:
	* src/nautilus-desktop-window.c:
	(nautilus_desktop_window_instance_init):
	Disable close action on desktop window (#160100)

2005-01-27  Martin Wehner  <martin.wehner@epost.de>

	* src/nautilus-main.c: (register_icons):
	Don't try to free NULL icon info.

2005-01-27  Martin Wehner  <martin.wehner@epost.de>

	* libnautilus-private/nautilus-file.c:
	(nautilus_file_compare_for_sort_by_attribute):
	Don't compare NULL values from files we can't get permissions for.
	Fixes bug #153890.

2005-01-27  Chris Lahey  <clahey@ximian.com>

	* acconfig.h, configure.in, src/nautilus-image-properties-page.c:
	Support the API change in libexif > 0.5.12.

2005-01-27  Kjartan Maraas  <kmaraas@gnome.org>

	* src/nautilus-main.c: Don't leak the icon info

2005-01-27  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-spatial-window.c:
	Make path button more obvious. #145237
	Patch from  Michael Henson <mike@axl.net>

2005-01-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: (ask_link_action):
	Set focus_on_map for dnd ask dialog to avoid it ending
	up under the browser window.
	Patch from Jorn Baayen <jbaayen@gnome.org>

2005-01-27  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c:
	(confirm_empty_trash):
	No title on dialog.
	Patch from Dennis Cranston <dennis_cranston@yahoo.com>

2001-01-26  Ryan Lortie  <desrt@desrt.ca>
	* libnautilus-private/nautilus-file-operations.c:
	(handle_transfer_overwrite): Trivial string fix.

2005-01-25  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: (cancel_activate),
	(activate_weak_notify), (cancel_activate_callback):
	weak_unref the view if we cancel the activation.
	Might fix #145789

2005-01-25  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.9.90 ===
	
2005-01-25  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

	* MAINTAINERS:
	Add Martin, remove Darin.
	Update daves email address.

	* configure.in:
	Bump version to 2.9.90
	Require eel 2.9.90

2005-01-25  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c (confirm_empty_trash):
	Fix typo.

2005-01-25  Padraig O'Briain  <padraig.obriain@sun.com>

	* libnautilus-private/nautilus-icon-container.c: 
	(nautilus_icon_container_accessible_selection_changed_cb): Omit call
	to nautilus_icon_container_accessible_update_selection.
	(nautilus_icon_container_accessible_ref_selection):
	(nautilus_icon_container_accessible_get_selection):
	(nautilus_icon_container_accessible_remove_selection): All call
	to nautilus_icon_container_accessible_update_selection.

	Fixes bug #160087.
	 
2005-01-24  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window-menus.c (action_about_nautilus_callback):
	WE WANT THE CHEESEPUFF!!!

2005-01-24  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c:
	(confirm_empty_trash):
	Use warning icon instead of info one.
	Use GtkMessageDialog.
	Patch from Luca Ferretti <elle.uca@libero.it>

2005-01-23  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-desktop-icon-view.c: (real_merge_menus):
	* src/file-manager/fm-directory-view.c: (real_update_menus):
	* src/file-manager/nautilus-directory-view-ui.xml:
	Remove "Reset Background" entry from folder context menus.
	
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-01-21  Francisco Javier F. Serrador  <serrador@cvs.gnome.org>

	* src/nautilus-window-menus.c: Correct License (It said Evince).

2005-01-21  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window-menus.c: (action_about_nautilus_callback):
	Add license to about dialog.
	Change copyright statement.

	Patch from Luca Ferretti <elle.uca@libero.it>

2005-01-20  Martin Wehner  <martin.wehner@epost.de>

	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	Fix sidebar_width typo in gconf schema (#162204).

	Patch from J. Christopher Six <j.christopher.six@gmail.com>

2005-01-20  Martin Wehner  <martin.wehner@epost.de>

	* libnautilus-private/nautilus-column-chooser.c:
	(button_new_with_mnemonic), (add_buttons):
	Add stock arrow icons to "Move Up/Down" buttons.

	Patch from Michael Gossard <michael.gossard@free.fr>

2005-01-19  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window-menus.c: (action_about_nautilus_callback):
	Use GtkAboutDialog.

	Patch from Luca Ferretti <elle.uca@libero.it>

2005-01-19  Alexander Larsson  <alexl@redhat.com>

	* nautilus-home.desktop.in:
	Fix icon
	
	* nautilus.desktop.in:
	Put in menus.

	Patch from Luca Ferretti <elle.uca@libero.it>

2005-01-18  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-main.c: (main):
	* src/nautilus-window.c: (nautilus_window_class_init):
	Better default icon.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-01-17  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-connect-server-dialog.c: (connect_to_server):
	Don't use destroyed dialog.
	Patch from Vincent Untz <vincent@vuntz.net>.

2005-01-16  Francisco Javier F. Serrador  <serrador@cvs.gnome.org>

	* src/file-manager/fm-icon-view.c: Applied patch from Tierry
	Moisan that resolves trivial bug #159128.

2005-01-14  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	* src/.cvsignore:
	* src/Makefile.am:
	* src/nautilus-connect-server-dialog-main.c: (dialog_destroyed),
	(show_uri), (nautilus_connect_server_dialog_present_uri), (main):
	* src/nautilus-connect-server-dialog-nonmain.c:
	(nautilus_connect_server_dialog_present_uri):
	* src/nautilus-connect-server-dialog.c: (connect_to_server),
	(response_callback), (nautilus_connect_server_dialog_new):
	* src/nautilus-connect-server-dialog.h:
	Make connect to server dialog availible as separate application.

	Patch from Vincent Untz <vincent@vuntz.net>
	
2005-01-14  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-utilities.[ch]:
	New function nautilus_ensure_unique_file_name

	* libnautilus-private/nautilus-link.[ch]:
	* libnautilus-private/nautilus-link-desktop-file.[ch]:
	Uniquify name for nautilus_link_local_create if requested.
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_handle_url_drop):
	Uniquify desktop link name

	Patch from Jorn Baayen <jbaayen@gnome.org>

2005-01-13  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.[ch]:
	* libnautilus-private/nautilus-marshal.list:
	Add handle_url signal
	Fix argument list for handle_uri_list

	* libnautilus-private/nautilus-dnd.[ch]:
	Add nautilus_drag_default_drop_action_for_url
	
	* libnautilus-private/nautilus-icon-dnd.c: (receive_dropped_url),
	(nautilus_icon_container_get_drop_action),
	(drag_data_received_callback):
	Handle URL drops separately from URI_LIST
	Set different actions for URL drop
	
	* libnautilus-private/nautilus-tree-view-drag-dest.[ch]:
	(get_drop_action), (receive_dropped_uri_list),
	(receive_dropped_url), (drag_data_received_callback),
	(nautilus_tree_view_drag_dest_class_init):
	Add handle_url and handle_uri lists
	Set different actions for URL drop
	Fix bug that made url_list & url drops not work
	
	* src/file-manager/fm-directory-view.[ch]: (revert_slashes),
	(ask_link_action), (fm_directory_view_handle_url_drop),
	(fm_directory_view_handle_uri_list_drop):
	Move url and uri_list drop handling here. Make it handle
	url drops better.
	
	* src/file-manager/fm-icon-view.c: (icon_view_handle_url),
	(icon_view_handle_uri_list), (fm_icon_view_init):
	* src/file-manager/fm-list-view.c: (list_view_handle_url),
	(list_view_handle_uri_list), (create_and_set_up_tree_view):
	Call up to the drop code in directory view.

	The above is based on a patch from Jorn Baayen <jbaayen@gnome.org>

	* libnautilus-private/nautilus-directory.c:
	(nautilus_directory_schedule_metadata_copy):
	Handle source_directory being NULL. (happens on toplevel uri)

	* libnautilus-private/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move):
	Handle source_dir_uri being NULL. (happens on toplevel uri)

	* libnautilus-private/nautilus-link-desktop-file.c:
	(nautilus_link_desktop_file_local_create):
	Use right icon field
	
2005-01-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	(volume_or_drive_unmounted_callback),
	(volume_or_drive_ejected_callback),
	(action_unmount_volume_callback), (action_eject_volume_callback),
	(real_update_menus_volumes):
	* src/file-manager/nautilus-directory-view-ui.xml:
	Allow eject on unmounted devices.
	Patch from Magnus Damm <magnus.damm@gmail.com>

2005-01-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c: (icon_view_handle_uri_list):
	Don't user GNOME_DESKTOP_ITEM_LOAD_ONLY_IF_EXISTS, it doesn't mean
	what you think, it means don't load if the app the desktop file
	references doesn't exist.

2005-01-12  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-link-historical.c:
	* libnautilus-private/nautilus-link-historical.h:
	Remove historical link support.
	
	* libnautilus-private/nautilus-link-desktop-file.[ch]:
	* libnautilus-private/nautilus-link.[ch]:
	Remove historical link support and unused functions.
	
	* src/file-manager/fm-directory-view.h:
	Remove unused declaration.
	
	* src/file-manager/fm-icon-view.c:
	Fix up due to small api change for nautilus-link.
	
	* src/file-manager/fm-properties-window.c: (set_icon_callback):
	Fix icon change for desktop files that point to nonexisting binaries.

2005-01-12  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-main.c (register_icons):
	Remove debug spew

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_for_file):
	Special case icons for burn: and computer:
	
	* src/nautilus-main.c: (register_icons):
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-window-menus.c:
	Fix up icons and names in go/places menu.
	Fixes #162750 and #149941

	Based on patch from dennis_cranston@yahoo.com and Jaap A. Haitsma

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window.c (real_set_title):
	Make window title "location - File Browser", not "File Browser: location".
	Fixes #149008. Patch by Gustavo Carneiro.

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.9.2 ===
	
2004-01-11  James Henstridge  <james@jamesh.id.au>

	* test/Makefile.am: don't define GNOMELOCALEDIR in INCLUDES.

	* src/Makefile.am: remove desktop and server files on clean.
	Don't include GNOMELOCALEDIR in INCLUDES, since it is now defined
	in config.h.

	* Makefile.am: remove desktop files on clean, and intltool files
	on distclean.

	* acconfig.h: remove, since it isn't needed anymore.

	* configure.in: remove some macro calls not needed with newer
	automakes, and use newer versions of some macros.

	* autogen.sh: require Automake >= 1.7.

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

	* configure.in:
	Require eel 2.92.

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in (STARTUP_NOTIFICATION_PACKAGE):
	Add back mk.

2005-01-10  Alexander Larsson  <alexl@redhat.com>

	* configure.in (STARTUP_NOTIFICATION_PACKAGE):
	Remove mk for ALL_LINGUAS since it broke the build.

2004-12-17  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-factory.c: (load_icon_file):
	Don't use frames for images with alpha.

	Patch from Jaap Haitsma <jaap@haitsma.org>
	
2004-12-15  Vijaykumar Patwari <vijaykumar.patwari@wipro.com>

	* src/nautilus-bookmarks-window.[ch]:
	(open_selected_bookmark): New function, choose if to open in 
	parent or new window.
	(get_bookmark_nautilus_navigation_window_new): Get New window.
	(on_jump_button_clicked): Call open_selected_bookmark.
	(on_row_activated): Call open_selected_bookmark.
	* src/nautilus-navigation-window-menus.c: 
	(get_or_create_bookmarks_window): Reset signals for the 
	edit bookmark dialog.
	fixes bug #160224.
	
2004-12-15  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require glib 2.6.0
	
	* libnautilus-private/nautilus-file-utilities.c:
	(nautilus_get_uri_shortname_for_display):
	* libnautilus-private/nautilus-file.c:
	(nautilus_file_get_display_name_nocopy):
	Use g_filename_display_basename() for display names

2004-12-15  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c: (cell_renderer_edited),
	(fm_list_view_start_renaming_file):
	* src/file-manager/fm-properties-window.c:
	(name_field_done_editing):
	Make sure we don't rename files if the name was never
	changed from the original display name.

2004-12-15  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-location-dialog.c: (nautilus_location_dialog_new):
	Fill in ctrl-l dialog correctly for desktop.
	
	Patch from Matthew Gatto <poobar@nycap.rr.com>

2004-12-15  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	(nautilus_icon_container_update_icon):
	* libnautilus-private/nautilus-icon-factory.c: (load_icon_file):
	* libnautilus-private/nautilus-thumbnails.c:
	(nautilus_thumbnail_frame_image),
	(nautilus_thumbnail_load_framed_image):
	* libnautilus-private/nautilus-thumbnails.h:
	Better handling of icon sizes, including
	framing of large file-as-icon images.

	Patches from Jaap Haitsma <jaap@haitsma.org>

2004-12-13  Dwayne Bailey  <dwayne@translate.org.za>

	* configure.in: Added "zu" to ALL_LINGUAS.

2004-12-12  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-desktop-link-monitor.c:
	(destroy_desktop_link_monitor),
	(nautilus_desktop_link_monitor_get), (volume_file_name_used),
	(nautilus_desktop_link_monitor_make_filename_unique),
	(create_volume_link), (nautilus_desktop_link_monitor_init):
	* libnautilus-private/nautilus-desktop-link-monitor.h:
	* libnautilus-private/nautilus-desktop-link.c:
	(nautilus_desktop_link_new_from_volume):
	Make sure volume filenames are unique (#153888)

2004-12-12  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-clipboard.c (merge_out_clipboard_menu_items):
	Disconnect from right object.

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(add_application_to_open_with_menu), (real_update_menus):
	Fix underscore escaping in open with menu.

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-bookmark.c:
	(nautilus_bookmark_get_pixbuf):
	Force size for pixbufs.
	
	* libnautilus-private/nautilus-icon-factory.c: (load_icon_file):
	Load force-sized svgs right.
	(nautilus_icon_factory_get_pixbuf_from_name):
	Allow force-size loading
	
	* libnautilus-private/nautilus-icon-factory.h:
	Allow force-size loading in nautilus_icon_factory_get_pixbuf_from_name
	
	* libnautilus-private/nautilus-ui-utilities.c:
	(nautilus_action_from_menu_item),
	(nautilus_toolbar_action_from_menu_item):
	* src/nautilus-emblem-sidebar.c: (create_emblem_widget):
	* src/nautilus-property-browser.c: (make_drag_image),
	(make_properties_from_directories):
	* src/nautilus-sidebar-title.c: (update_icon):
	* src/file-manager/fm-directory-view.c:
	(add_extension_action_for_files):
	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	* src/file-manager/fm-tree-model.c:
	(tree_node_get_pixbuf_from_factory):
	
	Force-size load icons
	
	* src/nautilus-throbber.c: (nautilus_throbber_instance_init),
	(nautilus_throbber_finalize):
	Disconnect icon theme changed signal on finalize.

2004-11-29  Alexander Larsson  <alexl@redhat.com>
	
	* libnautilus-private/nautilus-file-dnd.c:
	(nautilus_drag_can_accept_item):
	Handle drags to desktop items.

2004-11-29  Dwayne Bailey  <dwayne@translate.org.za>

	* configure.in: Added "nso" to ALL_LINGUAS.

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	(canvas_position_to_grid_position):
	Fix positioning. Makes find_new_empty_spot tighter.
	Patch from Jimmy Do <crispyleaves@gmail.com>

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c: (snap_position),
	(find_empty_location):
	Fix a few typos in icon placement.
	Patch from Jimmy Do <crispyleaves@gmail.com>

2004-11-25  Marco Pesenti Gritti  <marco@gnome.org>

	* src/file-manager/Makefile.am:

	No need to define VERSION here, it's aleady in
	config.h. Fix the build.

2004-11-25  Marco Pesenti Gritti  <marco@gnome.org>

	reviewed by: Alexander Larsson  <alexl@redhat.com>

	* configure.in:

	Bump gnome-vfs required version

	* libnautilus-private/nautilus-mime-actions.c:
	(nautilus_mime_get_default_application_for_file),
	(application_equal), (get_open_with_mime_applications),
	(nautilus_mime_get_open_with_applications_for_file),
	(nautilus_mime_get_applications_for_file),
	(nautilus_mime_has_any_applications_for_file):
	* libnautilus-private/nautilus-mime-actions.h:
	* libnautilus-private/nautilus-program-choosing.c:
	(nautilus_launch_show_file), (nautilus_launch_application):
	* src/file-manager/fm-directory-view.c: (reset_open_with_menu),
	(activate_check_mime_types):
	* src/nautilus-information-panel.c: (command_button_callback),
	(add_command_buttons), (nautilus_information_panel_update_buttons):

	Remove all mime api deprecated calls and replace them with the
	new API. Fix bug #159435.

2004-11-24  Alexander Larsson  <alexl@redhat.com>

	* configure.in: 
	Post release version bump

=== nautilus 2.9.1 ===
	
2004-11-24  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

2004-11-22  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-undo-signal-handlers.c:
	Fix include.

2004-11-22  Alexander Larsson  <alexl@redhat.com>
        * Merge bonobo-slay-branch
	
2004-11-22  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window.c: (action_view_as_callback),
	(nautilus_window_synch_view_as_menus):
	Don't reenter action callback when switching views.

2004-11-19  Dave Camp  <dave@novell.com>

	* src/file-manager/fm-directory-view.c: (reset_open_with_menu),
	(can_show_default_app), (real_update_menus): Fix some jumping
	menus.
	* test/Makefile.am: Don't link to libnautilus

2004-11-19  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-mime-actions.c:
	removed unneeded includes
	
	* src/nautilus-application.c:
	* src/nautilus-desktop-window.c:
	Removed app_id property on NautilusWindow
	
	* src/nautilus-main.c: (main):
	Remove old code
	
	* src/nautilus-navigation-window.c:
	* src/nautilus-sidebar-title.c:
	* src/nautilus-window-menus.c:
	* src/file-manager/fm-ditem-page.c:
	Remove bonobo comments
	
	* src/nautilus-window.c:
	Remove app_id property
	fix last bonobo details
	
	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/nautilus-directory-view-ui.xml:
	remove edit launcher action

2004-11-19  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require new eel
	
	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/nautilus-actions.h:
	* src/nautilus-shell-ui.xml:
	* src/nautilus-spatial-window-ui.xml:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-menus.c:
	* src/nautilus-window.[ch]:
	Implement some accels as GtkBindings instead to avoid
	overriding widget-specific keybindings like "delete" and "backspace".

2004-11-19  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window.c:
	* src/nautilus-window-private.h:
	Put location entry etc in a toolbar.

2004-11-19  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file.c: (is_desktop_file),
	(nautilus_file_is_nautilus_link):
	Don't check for "application/x-gnome-app-info", as that is already
	handled by the alias system. This also avoids stating for a
	mimetype xml file.
	
	* src/nautilus-throbber.c:
	Don't create a new icon theme for each throbber.
	Use GtkIconTheme instead of GnomeIconTheme
	
	* libnautilus-private/nautilus-ui-utilities.[ch]:
	New function nautilus_ui_string_get to cache the loaded ui files.
	
	* src/nautilus-navigation-window.c:
	Remove old bonoboui stuff
	
	* src/nautilus-navigation-window-menus.c:
	Open New window is Ctrl-N.
	Use the new nautilus_ui_string_get call
	
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-menus.c: 
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Use the new nautilus_ui_string_get call
	
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/file-manager/nautilus-icon-view-ui.xml:
	Name separators to work around bug #158620
	
2004-11-18  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/file-manager/nautilus-icon-view-ui.xml:
	* src/file-manager/nautilus-list-view-ui.xml:
	* src/nautilus-actions.h:
	* src/nautilus-navigation-window-ui.xml:
	* src/nautilus-shell-ui.xml:
	* src/nautilus-spatial-window-ui.xml:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-menus.c:
	* src/nautilus-window.[ch]:
	Add all extra accellerators and clean up ui files.

2004-11-18  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window-menus.c:
	* src/nautilus-window-toolbars.c:
	* libnautilus-private/nautilus-ui-utilities.[ch]:
	(nautilus_action_from_menu_item), (nautilus_toolbar_action_from_menu_item):
	Move code to utility functions.

2004-11-18  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-utilities.[ch]:
	* src/nautilus-spatial-window.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-window-menus.c:
	Move some functions to nautilus-ui-utilities
	
	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-ui-utilities.[ch]:
	Various ui utility functions
	
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c: 
	* src/file-manager/fm-list-view.c:
	Unmerge everything on destroy
	
	* src/nautilus-shell-ui.xml:
	Remove unused stuff
	
2004-11-18  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-clipboard-monitor.c:
	Handle ownership changes from XFixes
	
	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-clipboard-ui.xml:
	Remove (is now inline)
	
	* libnautilus-private/nautilus-clipboard.[ch]:
	Convert to GtkUIManager
	
	* src/nautilus-location-bar.c:
	* src/nautilus-notes-viewer.c:
	Adapt to NautilusClipboard changes

	* src/nautilus-window-menus.c:
	Remove duplicated action

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/nautilus-directory-view-ui.xml:
	Adapt to NautilusClipboard changes
	Fix paste into folder to not use stock accelerator

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Remove references to throbber
	
	* src/Makefile.am:
	* src/nautilus-throbber.[ch]:
	Moved throbber here and made it not be a bonobo object
	
	* src/nautilus-window-private.h:
	* src/nautilus-window-toolbars.c:
	Work with the throbber

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-application.c:
	* src/nautilus-navigation-window.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-private.h:
	* src/nautilus-window.c:
	Make initial window geometry work.

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-image-properties-page.c: (get_property_pages):
	Only show for images.

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.h:
	Don't include libnautilus files.

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c:
	* src/nautilus-navigation-window.c:
	* src/nautilus-desktop-window.c:
	Remove old defines

	* src/file-manager/fm-directory-view.c:
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/nautilus-navigation-window-ui.xml:
	* src/nautilus-shell-ui.xml:
	Make the menus look like pre-bonobo-removal

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c: (real_merge_menus):
	Don't have use default background on desktop context menu.

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	Remove libnautilus-adapter subdir
	
	* components/Makefile.am:
	Don't build throbber atm
	
	* src/nautilus-navigation-action.c:
	Use GtkMenuToolButton instead of NautilusArrowToolbutton
	
	* src/Makefile.am:
	* src/nautilus-arrow-toolbutton.[ch]:
	Remove.

2004-11-16  Anders Carlsson  <andersca@gnome.org>

	* libnautilus-private/nautilus-window-info.c:
	(nautilus_window_info_get_ui_manager):
	It's NULL now, not CORBA_OBJECT_NIL.
	
2004-11-16  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-view.h:
	remove bonoboui inclide
	
	* src/nautilus-navigation-action.[ch]:
	Add navigation GtkAction, based on epi code
	
	* src/nautilus-window-menus.c:
	* src/nautilus-window-toolbars.c:
	Correctly handle toolbar icons for extensions

2004-11-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Remove bonoboui dependencies
	
	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-bonobo-extensions.[ch]:
	* libnautilus-private/nautilus-bonobo-ui.h:
	Remove unneeded files
	
	* libnautilus-private/nautilus-clipboard.c:
	Comment out for now.
	
	* libnautilus-private/nautilus-directory-metafile-monitor.c:
	* libnautilus-private/nautilus-metafile.c:
	* src/nautilus-application.c: 
	* src/nautilus-history-sidebar.c:
	* src/nautilus-information-panel.c:
	* src/nautilus-main.c: (main):
	* src/nautilus-notes-viewer.c:
	* src/nautilus-sidebar-title.c:
	* src/file-manager/fm-properties-window.c:
	Remove bonobo includes
	
	* libnautilus-private/nautilus-file-utilities.[ch]:
	(nautilus_get_ui_directory), (nautilus_ui_file):
	Util functions for ui files.
	
	* libnautilus-private/nautilus-view.[ch]:
	* libnautilus-private/nautilus-window-info.[ch]:
	Remove bonoboui methods
	
	* src/Makefile.am:
	Add new files, remove some old ones
	Move ui files to datadir/nautilus/ui
	
	* src/nautilus-actions.h:
	New file with action names
	
	* src/nautilus-arrow-toolbutton.[ch]:
	New widget for back/forward buttons.
	
	* src/nautilus-desktop-window.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-navigation-window-ui.xml:
	* src/nautilus-navigation-window.[ch]:
	* src/nautilus-shell-ui.xml:
	* src/nautilus-spatial-window-ui.xml:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-manage-views.[ch]: 
	* src/nautilus-window-menus.c:
	* src/nautilus-window-private.h:
	* src/nautilus-window-toolbars.c:
	* src/nautilus-window.[ch]:
	Initial port to GtkUIManager
	
	* src/nautilus-profiler.[ch]:
	Remove
	
	* src/file-manager/Makefile.am:
	* src/file-manager/fm-actions.h:
	New file with action names
	
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.[ch]: 
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/file-manager/nautilus-icon-view-ui.xml:
	* src/file-manager/nautilus-list-view-ui.xml:
	Initial port of views to GtkUIManager

2004-11-09  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-bonobo-extensions.[ch]:
	Remove some unused bonobo extensions.
	
	* libnautilus-private/Makefile.am:
	* src/nautilus-navigation-window.c:
	* src/nautilus-property-browser.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window.c:
	* libnautilus-private/nautilus-drag-window.[ch]:
	Remove NautilusDragWindow (not used anyway)

2004-11-09  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-directory-async.c:
	* libnautilus-private/nautilus-lib-self-check-functions.h:
	* libnautilus-private/nautilus-medusa-support.[ch]:
	* libnautilus-private/nautilus-metafile.c:
	* libnautilus-private/nautilus-search-uri.[ch]:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	* src/file-manager/fm-search-list-view.[ch]:
	* src/file-manager/nautilus-indexing-info.[ch]:
	* src/file-manager/nautilus-search-list-view-ui.xml:
	* src/nautilus-application.c:
	* src/nautilus-complex-search-bar.[ch]:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-navigation-window-ui.xml:
	* src/nautilus-navigation-window.[ch]:
	* src/nautilus-search-bar-criterion-private.h:
	* src/nautilus-search-bar-criterion.[ch]:
	* src/nautilus-search-bar-private.h:
	* src/nautilus-search-bar.[ch]:
	* src/nautilus-shell-ui.xml:
	* src/nautilus-sidebar-title.c:
	* src/nautilus-simple-search-bar.[ch]:
	* src/nautilus-spatial-window.c:
	* src/nautilus-switchable-navigation-bar.[ch]:
	* src/nautilus-switchable-search-bar.[ch]:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window-menus.c:
	* src/nautilus-window.c:
	Remove all traces of old medusa support.
	
2004-11-09  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-factory.[ch]:
	(nautilus_get_relative_icon_size_for_zoom_level):
	New function.
	
	* libnautilus-private/nautilus-view.[ch]:
	Redo the zooming interface
	
	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Implement the new interface for zooming and clean up.
	Remove the "default zoom affects fonts" behaviour.
	
	* src/nautilus-navigation-window.c: 
	* src/nautilus-zoom-control.[ch]:
	Use the new simplified zoom interfaces

2004-11-09  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-directory-async.c:
	(nautilus_async_destroying_file), (extension_info_cancel),
	(info_provider_idle_callback), (info_provider_callback):
	* libnautilus-private/nautilus-directory-private.h:
	Handle the case when the file we're getting extension info
	from goes away.

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window.c:
	(nautilus_navigation_window_set_up_sidebar):
	* src/nautilus-window-manage-views.c:
	(viewed_file_changed_callback):
	Remove some BONOBO TODOs

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Remove image_properties subdir
	
	* src/Makefile.am:
	* src/nautilus-application.c: (nautilus_application_instance_init):
	* src/nautilus-image-properties-page.[ch]:
	Image property page using new system
	
	* src/nautilus-notes-viewer.c:
	add static

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-sidebar-factory.c:
	* libnautilus-private/nautilus-sidebar-factory.h:
	Remove old sidebar-factory API
	
	* src/file-manager/fm-tree-view.c: 
	* src/nautilus-emblem-sidebar.c:
	* src/nautilus-history-sidebar.c:
	* src/nautilus-information-panel.c:
	* src/nautilus-navigation-window.c:
	Convert to new provider API.

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-sidebar-provider.[ch]:
	Add new extensions-style sidebar provider interface
	
	* src/nautilus-navigation-window.c:
	Use it.
	
	* src/nautilus-notes-viewer.[ch]:
	Convert notes viewer to new iface

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* src/Makefile.am:
	* src/nautilus-application.c: (nautilus_application_instance_init):
	* src/nautilus-notes-sidebar.[ch]:
	* src/nautilus-notes-viewer.[ch]:
	Turn NautilusNotesSidebar into NautilusNotesViewer that is also a
	property page

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Remove emblem subdir
	
	* libnautilus-private/nautilus-window-info.[ch]:
	* src/nautilus-window.c: (nautilus_window_set_hidden_files_mode):
	hidden_files_mode_changed signal

	* src/file-manager/Makefile.am:
	* src/file-manager/fm-tree-view.[ch]:
	* src/nautilus-application.c: (nautilus_application_instance_init):
	Make tree view work with new system.
	
	* src/nautilus-window-manage-views.c: (load_new_location),
	(location_has_really_changed):
	Only emit loading_uri after load_underway has been reported.

2004-11-05  Alexander Larsson  <alexl@redhat.com>

	* src/Makefile.am:
	* src/nautilus-emblem-sidebar.[ch]:
	* src/nautilus-application.c:
	Add emblem sidebar, based on old compontent
	now uses NautilusSignaller to detect/signal emblem changes
	
	* src/nautilus-property-browser.c:
	Catch the emblems_changed signal and refresh

2004-11-05  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Fix crash when switching view.

	* src/nautilus-history-sidebar.c:
	Some cleanups

	* src/nautilus-navigation-window.c:
	Fix unref-null warning
	
	* src/Makefile.am:
	* src/nautilus-application.c:
	* src/nautilus-notes-sidebar.[ch]:
	Add notes sidebar widget, based on old component

	* components/Makefile.am (SUBDIRS):
	Remove notes

2004-11-05  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Remove stuff that are now replaced or not needed anymore.
	
	* libnautilus-private/nautilus-window-info.[ch]:
	* src/nautilus-window.c:
	Add nautilus_window_info_get_history.
	
	* src/Makefile.am:
	* src/nautilus-history-sidebar.[ch]:
	* src/nautilus-application.c: (nautilus_application_instance_init):
	Add history sidebar widget, based on old component.
	
	* src/nautilus-information-panel.[ch]:
	Some fixes

2004-11-05  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-directory-background.c:
	Fix spew
	
	* libnautilus-private/nautilus-sidebar-factory.h:
	* libnautilus-private/nautilus-window-info.[ch]:
	* src/nautilus-application.c:
	* src/nautilus-information-panel.[ch]:
	* src/nautilus-navigation-window.c:
	* src/nautilus-side-pane.c:
	* src/nautilus-window.c:
	More work on sidebars. Now the information sidebar works.

2004-11-04  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	Don't build libnautilus subdir
	
	* libnautilus-private/Makefile.am:
	Don't link to libnautilus
	Add new files (some from libnautilus)
	Remove not used files
	
	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	Remove hide_built_in_bookmarks
	
	* libnautilus-private/nautilus-bonobo-ui.h:
	* libnautilus-private/nautilus-clipboard-ui.xml:
	* libnautilus-private/nautilus-clipboard.[ch]:
	* libnautilus-private/nautilus-idle-queue.[ch]:
	Move here from libnautilus
	
	* libnautilus-private/nautilus-desktop-link.c:
	* libnautilus-private/nautilus-global-preferences.[ch]:
	Remove WEB_NAVIGATION_ENABLED ifdef and HOME_URI/BUILT_IN_BOOKMARKS
	prefs
	
	* libnautilus-private/nautilus-directory-private.h:
	* libnautilus-private/nautilus-metafile-server.idl:
	* libnautilus-private/nautilus-program-choosing.h:
	Remove not needed header inclusions
	
	* libnautilus-private/nautilus-sidebar-factory.[ch]:
	NautilusSidebar registration and creation
	
	* libnautilus-private/nautilus-sidebar.[ch]:
	New NautilusSidebar interface
	
	* libnautilus-private/nautilus-sidebar-functions.[ch]:
	* libnautilus-private/nautilus-undo-context.[ch]:
	* libnautilus-private/nautilus-view-identifier.[ch]:
	* libnautilus-private/nautilus-view-query.[ch]:
	Remove not needed files
	
	* libnautilus-private/nautilus-undo-manager.[ch]:
	* libnautilus-private/nautilus-undo-private.h:
	* libnautilus-private/nautilus-undo-transaction.[ch]:
	* libnautilus-private/nautilus-undo.[ch]:
	Convert from bonobo. Some moved from libnautilus.

	* libnautilus-private/nautilus-view-factory.[ch]:
	NautilusView registration and creation
	
	* libnautilus-private/nautilus-view.[ch]:
	New NautilusView interface
	
	* libnautilus-private/nautilus-window-info.[ch]:
	New NautilusWindowInfo interface
	
	* src/Makefile.am:
	Don't link to libnautilus
	Remove not used files
	
	* src/nautilus-applicable-views.[ch]:
	* src/nautilus-component-adapter-factory.[ch]:
	* src/nautilus-view-frame-corba.[ch]:
	* src/nautilus-view-frame-private.h:
	* src/nautilus-view-frame.[ch]:
	Removed. Not needed anymore.
	
	* src/nautilus-bookmarks-window.c:
	* src/nautilus-complex-search-bar.c:
	* src/nautilus-information-panel.[ch]:
	* src/nautilus-location-bar.c:
	* src/nautilus-location-dialog.c:
	* src/nautilus-location-entry.c:
	* src/nautilus-shell-interface.idl:
	* src/nautilus-side-pane.h:
	* src/nautilus-sidebar-title.c:
	* src/nautilus-simple-search-bar.c:
	Minor changes to build.

	* src/nautilus-shell.c:
	Remove WEB_NAVIGATION_ENABLED
	
	* src/nautilus-application.c:
	* src/nautilus-desktop-window.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-navigation-window.[ch]:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-manage-views.[ch]:
	* src/nautilus-window-menus.c:
	* src/nautilus-window-private.h:
	* src/nautilus-window.[ch]:
	Initial conversion to new NautilusView interface.

	* src/file-manager/Makefile.am:
	* src/file-manager/fm-bonobo-provider.[ch]:
	Removed. Not needed anymore.
	Temporary commented out fm-tree-view.[ch]

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-desktop-icon-view.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-icon-view.h:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-list-view.h:
	* src/file-manager/fm-properties-window.c:
	* src/file-manager/fm-tree-view.h:
	Initial conversion to new NautilusView interface.
	
2004-11-09  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: install nautilus-file-management-properties.desktop
	in $(datadir)/applications

	* nautilus-file-management-properties.desktop.in:
	add OnlyShowIn=GNOME;

2004-10-29  Iain <iaingnome@gmail.com>

	* libnautilus-private/nautilus-icon-canvas-item.c 
	(compute_text_rectangle): Line up the text with the middle of the icon.

	* libnautilus-private/nautilus-icon-container.c 
	(lay_down_one_line): Take the max height of the row so that icons can
	be lined up.
	(lay_down_icons_horizontal): Calculate the grid_width depending on the
	max width of an icon.
	Line up icons on a vertical line set at the left of the text.

2004-10-29  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Update version to 2.9.1.
	Gnome 2.8 versions are now on the gnome-2-8 branch.

	* ChangeLog: rolled over to ChangeLog-20041029.

==== gnome-2-8 branched from here ===
	
# Local Variables:
# coding: utf-8
# End:
