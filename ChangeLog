2001-03-27  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-annotation-window.c:
	(fm_annotation_window_initialize), (real_destroy),
	(create_annotation_window), (fm_annotation_window_present):
	* src/file-manager/fm-annotation-window.h:

	some more work on the file annotation window; still have
	a lot more to go.
	
2001-03-27  Andy Hertzfeld  <andy@eazel.com>

	fixed problem with annotation canvas item not updating properly
	by changing how it manages its bounds.  Also, removed some
	debugging statements.
	
	* libnautilus-extensions/nautilus-canvas-note-item.c:
	(nautilus_canvas_note_item_init), (get_bounds),
	(nautilus_canvas_note_item_set_note_text),
	(nautilus_canvas_note_item_set_arg),
	(nautilus_canvas_note_item_get_arg),
	(nautilus_canvas_note_item_translate),
	(nautilus_canvas_note_item_bounds),
	(nautilus_canvas_note_item_render),
	(nautilus_canvas_note_item_draw),
	(nautilus_canvas_note_item_point),
	(nautilus_canvas_note_item_update):
	
	* libnautilus-extensions/nautilus-canvas-note-item.h:
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(create_annotation):

2001-03-27  Andy Hertzfeld  <andy@eazel.com>

	added fm-annotation-window class for adding and editing
	annotations; only partially implemented at this point.

	* src/file-manager/Makefile.am:
	* src/file-manager/fm-annotation-window.c:
	(fm_annotation_window_initialize_class),
	(fm_annotation_window_initialize),
	(update_annotation_window_title), (create_annotation_window),
	(fm_annotation_window_present), (real_destroy):
	* src/file-manager/fm-annotation-window.h:
	* src/file-manager/fm-icon-view.c: (annotate_callback):

2001-03-26  Andy Hertzfeld  <andy@eazel.com>

	added frame to rss-control, and made it periodically update,
	reflecting the last update time in the upper right corner.
	
	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize_class),
	(nautilus_rss_control_initialize), (nautilus_rss_control_destroy),
	(rss_read_done_callback), (check_for_update),
	(draw_rss_logo_image), (nautilus_rss_control_draw):

2001-03-26  Andy Hertzfeld  <andy@eazel.com>

	fix some miscellaneous glitches in the tab indicator stuff
	
	* src/nautilus-sidebar-tabs.c: (tab_item_destroy):
	make sure there still is a control before accessing it
	* src/nautilus-sidebar.c: (view_loaded_callback):
	disconnect the view_loaded signal, since it's a one-shot
	* components/notes/nautilus-notes.c: (do_destroy):
	don't release the property_bag on destroy, since apparently
	someone else is already doing it.
	
2001-03-26  Andy Hertzfeld  <andy@eazel.com>

	* components/notes/nautilus-notes.c: (finish_loading_note):
	removed a debug statement that I inadvertently left in.
	
2001-03-26  Andy Hertzfeld  <andy@eazel.com>

	completed indicator sidebar tab framework and notes indicator
	application by plotting the indicator better, resizing the
	tab appropriately, and updating the indicator when a tab closes.
	This work is now complete.
	
	* components/notes/nautilus-notes.c: (notes_get_indicator_image),
	(notes_save_metainfo):
	* src/nautilus-sidebar-tabs.c: (recalculate_size),
	(nautilus_sidebar_tabs_size_allocate), (pixbuf_composite),
	(draw_one_tab_themed), (get_tab_width),
	(nautilus_sidebar_tabs_update_tab_item),
	(nautilus_sidebar_tabs_select_tab):

2001-03-26  Andy Hertzfeld  <andy@eazel.com>

	implemented indicator in tab for whether notes are present or not by
	implementing a framework for sidebar views to specify an indicator
	tab image, using the bonobo property bag interface; not quite
	finished yet.
	
	* components/notes/nautilus-notes.c: (notes_get_indicator_image),
	(get_bonobo_properties), (set_bonobo_properties),
	(finish_loading_note), (notes_load_metainfo),
	(notes_save_metainfo), (do_destroy), (make_notes_view):
	* libnautilus-extensions/nautilus-canvas-note-item.c:
	(nautilus_canvas_note_item_render):
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(create_annotation):
	* src/nautilus-sidebar-tabs.c: (tab_item_destroy),
	(draw_one_tab_themed), (draw_or_layout_all_tabs),
	(nautilus_sidebar_tabs_expose),
	(nautilus_sidebar_tabs_update_tab_item), (get_tab_item_from_view),
	(nautilus_sidebar_tabs_update_all_indicators),
	(nautilus_sidebar_tabs_update_indicator),
	(tab_indicator_changed_callback),
	(nautilus_sidebar_tabs_connect_view),
	(nautilus_sidebar_tabs_add_view):
	* src/nautilus-sidebar-tabs.h:
	* src/nautilus-sidebar.c: (view_loaded_callback),
	(nautilus_sidebar_add_panel):
	* src/nautilus-view-frame.c: (nautilus_view_frame_get_view),
	(nautilus_view_frame_get_control):
	* src/nautilus-view-frame.h:

2001-03-23  Andy Hertzfeld  <andy@eazel.com>

	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize):
	* src/file-manager/fm-icon-view.c: (annotate_callback),
	(fm_icon_view_merge_menus), (fm_icon_view_update_menus):
	* src/file-manager/nautilus-icon-view-ui.xml:
	
	added stubbed "Add Annotation" command

2001-03-22  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-annotation.c:
	(calculate_checksum_callback), (process_digest_requests),
	(queue_file_digest_request):
	fixed race condition problem in the digest queuing
	
2001-03-22  Andy Hertzfeld  <andy@eazel.com>

	merged with head to create post-1_0_8 branch
	
	* Makefile.am:
	* components/Makefile.am:
	* components/rss-control/.cvsignore:
	* components/rss-control/Makefile.am:
	* components/rss-control/main.c: (rss_control_object_destroyed),
	(rss_control_make_object), (main):
	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_rss_control_initialize),
	(free_rss_data_item), (nautilus_rss_control_clear_items),
	(nautilus_rss_control_destroy), (nautilus_rss_control_get_control),
	(nautilus_rss_control_set_title), (rss_logo_callback),
	(extract_items), (rss_read_done_callback), (load_rss_file),
	(nautilus_rss_control_set_uri), (rss_control_pixbuf_composite),
	(draw_rss_logo_image), (draw_rss_title), (draw_blue_line),
	(draw_rss_items), (nautilus_rss_control_draw),
	(nautilus_rss_control_expose),
	(nautilus_rss_control_set_prelight_index),
	(nautilus_rss_control_motion_event),
	(nautilus_rss_control_leave_event),
	(nautilus_rss_control_size_request),
	(nautilus_rss_control_button_press_event):
	* components/rss-control/nautilus-rss-control.h:
	* components/rss-control/nautilus-rss-control.oafinfo:
	* components/throbber/nautilus-throbber.c: (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_throbber_initialize):
	* components/vcard/.cvsignore:
	* components/vcard/Makefile.am:
	* components/vcard/main.c: (vcard_object_destroyed),
	(vcard_make_object), (main):
	* components/vcard/nautilus-vcard.c:
	(nautilus_vcard_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_vcard_initialize),
	(nautilus_vcard_destroy), (nautilus_vcard_get_control),
	(vcard_logo_callback), (vcard_read_done_callback), (load_vcard),
	(nautilus_vcard_set_uri), (vcard_pixbuf_composite),
	(draw_vcard_logo_image), (draw_vcard_name_and_title),
	(draw_vcard_addresses), (nautilus_vcard_draw),
	(nautilus_vcard_expose), (nautilus_vcard_motion_event),
	(nautilus_vcard_size_request), (nautilus_vcard_leave_event),
	(nautilus_vcard_button_press_event):
	* components/vcard/nautilus-vcard.h:
	* components/vcard/nautilus-vcard.oaf:
	* components/vcard/vcard.c: (vcard_full_name), (vcard_title),
	(vcard_logo), (vcard_postal), (vcard_streetaddress),
	(vcard_city_state_zip), (vcard_company), (vcard_email),
	(vcard_fax), (vcard_web), (vcard_address_list):
	* components/vcard/vcard.h:
	* configure.in:
	* icons/Makefile.am:
	* icons/emblem-note.png:
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-annotation.c: (_byte_reverse),
	(md5_init), (md5_update), (md5_final), (md5_transform),
	(digest_file_close_callback), (digest_file_completed),
	(digest_file_failed), (calculate_checksum_callback),
	(read_file_open_callback), (calculate_file_digest),
	(process_digest_requests), (queue_file_digest_request),
	(get_file_from_digest), (get_annotation_path),
	(look_up_local_annotation), (has_local_annotation),
	(add_annotations_to_file), (remember_file), (forget_file),
	(got_annotations_callback), (fetch_annotations_from_server),
	(get_annotation_from_server), (got_file_digest),
	(nautilus_annotation_get_annotation),
	(nautilus_annotation_has_annotation),
	(nautilus_annotation_add_annotation),
	(nautilus_annotation_remove_annotation):
	* libnautilus-extensions/nautilus-annotation.h:
	* libnautilus-extensions/nautilus-canvas-note-item.c:
	(nautilus_canvas_note_item_get_type),
	(nautilus_canvas_note_item_class_init),
	(nautilus_canvas_note_item_init),
	(nautilus_canvas_note_item_destroy), (get_bounds),
	(set_gc_foreground), (set_stipple), (set_outline_gc_width),
	(nautilus_canvas_note_item_set_fill),
	(nautilus_canvas_note_item_set_outline),
	(nautilus_canvas_note_item_set_note_text),
	(nautilus_canvas_note_item_set_arg), (get_color_arg),
	(nautilus_canvas_note_item_get_arg),
	(nautilus_canvas_note_item_realize),
	(nautilus_canvas_note_item_unrealize),
	(nautilus_canvas_note_item_translate),
	(nautilus_canvas_note_item_bounds), (get_display_text),
	(draw_item_aa_text), (nautilus_canvas_note_item_render),
	(nautilus_canvas_note_item_draw),
	(nautilus_canvas_note_item_point),
	(nautilus_canvas_note_item_update):
	* libnautilus-extensions/nautilus-canvas-note-item.h:
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_user_main_directory):
	* libnautilus-extensions/nautilus-file.c:
	(prepend_automatic_emblem_names):
	* libnautilus-extensions/nautilus-file.h:
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_install_defaults),
	(global_preferences_create_dialog):
	* libnautilus-extensions/nautilus-global-preferences.h:
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_marshal_POINTER__POINTER_INT):
	* libnautilus-extensions/nautilus-gtk-extensions.h:
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_destroy),
	(nautilus_icon_canvas_item_get_icon_width),
	(nautilus_icon_canvas_item_get_icon_height),
	(nautilus_icon_canvas_item_set_arg), (do_control_destroy),
	(nautilus_icon_canvas_item_get_arg),
	(nautilus_icon_canvas_item_get_image), (recompute_bounding_box),
	(nautilus_icon_canvas_item_update_bounds),
	(draw_or_measure_label_text), (emblem_layout_next),
	(nautilus_icon_canvas_item_draw), (draw_or_measure_label_text_aa),
	(nautilus_icon_canvas_item_render), (create_annotation),
	(remove_annotation), (nautilus_icon_canvas_item_set_note_state),
	(nautilus_icon_canvas_item_event), (hit_test),
	(nautilus_icon_canvas_item_point),
	(nautilus_icon_canvas_item_bounds),
	(nautilus_icon_canvas_item_get_icon_rectangle),
	(get_icon_canvas_rectangle),
	(nautilus_icon_canvas_item_hit_test_rectangle),
	(nautilus_icon_canvas_item_set_smooth_font),
	(nautilus_icon_canvas_item_get_control),
	(nautilus_icon_canvas_item_set_control):
	* libnautilus-extensions/nautilus-icon-canvas-item.h:
	* libnautilus-extensions/nautilus-icon-container.c: (destroy),
	(nautilus_icon_container_initialize_class),
	(nautilus_icon_container_initialize),
	(nautilus_icon_container_update_icon),
	(nautilus_icon_container_annotation_changed),
	(nautilus_icon_container_get_note_text):
	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_dnd_begin_drag):
	* libnautilus-extensions/nautilus-icon-private.h:
	* libnautilus-extensions/nautilus-labeled-image.c:
	(nautilus_labeled_image_get_image_bounds):
	* libnautilus-extensions/nautilus-link.c:
	(nautilus_link_local_get_component_info):
	* libnautilus-extensions/nautilus-link.h:
	* libnautilus-extensions/nautilus-metadata.h:
	* nautilus-clean.sh:
	* src/file-manager/fm-icon-view.c: (get_icon_control_callback),
	(get_icon_text_callback), (get_icon_annotation_callback),
	(create_icon_container):
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_update_contents):
	* src/nautilus-sidebar-tabs.c: (nautilus_sidebar_tabs_hit_test),
	(nautilus_sidebar_tabs_select_tab):
	* src/nautilus-sidebar.c: (add_command_buttons),
	(nautilus_sidebar_update_buttons):

2001-03-22  John Harper  <jsh@eazel.com>

	reviewed by: Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in: require freetype version 2.0.1, library version
	6.1.0

2001-03-22  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	* src/nautilus-shell-ui.xml: Added underline accelerators 
	to items in Preferences menu; Changed "Preferences..." to
	"Edit Preferences..." so it has a different name than menu;
	improved tips for user level items.

2001-03-22  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 1853 (Want preference for always sorting folders first)

	For now, this is a global preference. Making it
	per-window later is a possibility. Arlo is working on
	a design for directory view defaults that may incorporate
	this.

	* libnautilus-extensions/nautilus-file.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_compare_for_sort_reversed): Eliminated this in
	favor of a parameter to nautilus_file_compare_for_sort.
	(nautilus_file_compare_for_sort): Add a parameter for reversed,
	and another for directories_first.
	(nautilus_file_compare_for_sort_internal): Former guts of
	nautilus_file_compare_for_sort moved here.
	(nautilus_self_check_file): Update compare_for_sort self-checks.

	* libnautilus-extensions/nautilus-global-preferences.h:
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_install_defaults),
	(global_preferences_install_visibility),
	(global_preferences_create_dialog): Install an "Always list
	folders before files" preference in the Icon and List Views
	section.
	
	* src/file-manager/fm-directory-view.h:
	(sort_directories_first_changed): New function pointer for
	subclasses to override.
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_should_sort_directories_first): New function 
	for subclasses to call.
	(sort_directories_first_changed_callback): Call virtual function
	when preference changes.
	(fm_directory_view_initialize): Store initial value of preference;
	install preference callback.
	(fm_directory_view_destroy): Remove preference callback.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(desktop_icons_compare_callback): Respect preference
	setting.

	* src/file-manager/fm-icon-view.c:
	(icon_container_compare_icons_callback): Update to respect
	directories_first setting.
	(icon_container_compare_icons_by_name_callback): Update for API
	change only.
	(fm_icon_view_sort_directories_first_changed): Override virtual
	function; re-sort icon container if in auto-layout mode.
	(fm_icon_view_initialize_class): Install virtual function override.
	
	* src/file-manager/fm-list-view.c: 
	(fm_list_view_initialize_class): Install virtual function override.
	(list_view_compare_files_for_sort): New function, broken out of
	fm_list_view_compare_rows, and changed to respect directories_first
	setting.
	(fm_list_view_compare_rows): Break out list_view_compare_files_for_sort.
	(compare_rows_by_name): Update for API change only.
	(real_sort_directories_first_changed): Override virtual function;
	re-sort list.
	(fm_list_view_display_pending_files): Update code that sorts
	pending items before adding them to list.
	(fm_list_view_sort_items): Add comment.

2001-03-22  Ramiro Estrugo  <ramiro@eazel.com>
=======
2001-03-21  Andy Hertzfeld  <andy@eazel.com>

	added queuing for` digest requests, so we can control the number
	of simultaneous requests, so we don't choke in large directories.
	
	also, removed some debug statements and clean-up
	
	* libnautilus-extensions/nautilus-annotation.c:
	(digest_file_completed), (digest_file_failed),
	(calculate_file_digest), (process_digest_requests),
	(queue_file_digest_request), (got_annotations_callback),
	(nautilus_annotation_get_annotation):
	* libnautilus-extensions/nautilus-canvas-note-item.c:
	(nautilus_canvas_note_item_set_note_text), (get_display_text):
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(create_annotation):

2001-03-20  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-canvas-note-item.c:
	(draw_item_aa_text), (nautilus_canvas_note_item_draw):
	made the annotations layout for multiple lines, for both
	the anti-aliased and non-aa cases.
	
	* libnautilus-extensions/nautilus-file.c:
	(prepend_automatic_emblem_names):
	removed debug statement
	
2001-03-20  Andy Hertzfeld  <andy@eazel.com>

	made annotation size itself to the text
	parse xml based annotations correctly
	
	* libnautilus-extensions/nautilus-annotation.c:
	(digest_file_completed), (digest_file_failed),
	(read_file_open_callback), (look_up_local_annotation),
	(got_annotations_callback):
	* libnautilus-extensions/nautilus-canvas-note-item.c:
	(nautilus_canvas_note_item_set_note_text),
	(nautilus_canvas_note_item_set_arg), (get_display_text),
	(nautilus_canvas_note_item_render),
	(nautilus_canvas_note_item_draw):
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(create_annotation):

2001-03-19  Andy Hertzfeld  <andy@eazel.com>

	made it draw annotation text in aa mode;
	made it parse non-emblem annotations
	
	* libnautilus-extensions/nautilus-canvas-note-item.c:
	(get_display_text), (draw_item_aa_text),
	(nautilus_canvas_note_item_render),
	(nautilus_canvas_note_item_draw):
	* src/file-manager/fm-icon-view.c: (get_icon_text_callback),
	(get_icon_annotation_callback):

2001-03-19  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-icon-view.c: (get_icon_annotation_callback):
	made it support intrinsic property emblems as well as keywords
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_update_contents):
	added margin to property browser like Arlo wants; this didn't
	quite make it into 1.0; I will also check this into 1.0.2
	
2001-03-18  Andy Hertzfeld  <andy@eazel.com>

	restructured annotation; made annotation for emblems work;
	started on annotation canvas item, based on rect item
	
	* components/rss-control/nautilus-rss-control.c:
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-canvas-note-item.c:
	(nautilus_canvas_note_item_get_type),
	(nautilus_canvas_note_item_class_init),
	(nautilus_canvas_note_item_init),
	(nautilus_canvas_note_item_destroy), (get_bounds),
	(set_gc_foreground), (set_stipple), (set_outline_gc_width),
	(nautilus_canvas_note_item_set_fill),
	(nautilus_canvas_note_item_set_outline),
	(nautilus_canvas_note_item_set_arg), (get_color_arg),
	(nautilus_canvas_note_item_get_arg),
	(nautilus_canvas_note_item_realize),
	(nautilus_canvas_note_item_unrealize),
	(nautilus_canvas_note_item_translate),
	(nautilus_canvas_note_item_bounds),
	(nautilus_canvas_note_item_render),
	(nautilus_canvas_note_item_draw),
	(nautilus_canvas_note_item_point),
	(nautilus_canvas_note_item_update):
	* libnautilus-extensions/nautilus-canvas-note-item.h:
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_marshal_POINTER__POINTER_INT):
	* libnautilus-extensions/nautilus-gtk-extensions.h:
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(create_annotation), (remove_annotation):
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize_class),
	(nautilus_icon_container_get_note_text):
	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-private.h:
	* src/file-manager/fm-icon-view.c: (get_icon_annotation_callback),
	(create_icon_container):

2001-03-14  Andy Hertzfeld  <andy@eazel.com>

	added preferences to control annotation fetching and display
	
	* libnautilus-extensions/nautilus-annotation.c:
	(digest_file_close_callback), (read_file_open_callback),
	(calculate_file_digest), (got_annotations_callback),
	(get_annotation_from_server), (nautilus_annotation_get_annotation),
	(nautilus_annotation_has_annotation):
	
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_install_defaults),
	(global_preferences_create_dialog):
	
	* libnautilus-extensions/nautilus-global-preferences.h:
	* libnautilus-extensions/nautilus-icon-container.c: (destroy),
	(nautilus_icon_container_initialize), (update_label_color),
	(nautilus_icon_container_annotation_changed):

2001-03-12  Andy Hertzfeld  <andy@eazel.com>

	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize), (extract_items),
	(rss_read_done_callback):
	fixed bug that would crash if the downloaded xml was not parsable;
	also, added support for rss files that keep their payload in the
	channel object instead of the root object (Wired, Salon, etc).
	
	* libnautilus-extensions/nautilus-annotation.c:
	(add_annotations_to_file), (got_annotations_callback),
	(nautilus_annotation_get_annotation):
	fiddled with some debugging stuff for annotations.
	
2001-03-11  Andy Hertzfeld  <andy@eazel.com>

	merged to create post-1_0_7 branch
	
	* Makefile.am:
	* applets/Makefile.am:
	* components/Makefile.am:
	* components/rss-control/.cvsignore:
	* components/rss-control/Makefile.am:
	* components/rss-control/main.c: (rss_control_object_destroyed),
	(rss_control_make_object), (main):
	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_rss_control_initialize),
	(free_rss_data_item), (nautilus_rss_control_clear_items),
	(nautilus_rss_control_destroy), (nautilus_rss_control_get_control),
	(nautilus_rss_control_set_title), (rss_logo_callback),
	(rss_read_done_callback), (load_rss_file),
	(nautilus_rss_control_set_uri), (rss_control_pixbuf_composite),
	(draw_rss_logo_image), (draw_rss_title), (draw_blue_line),
	(draw_rss_items), (nautilus_rss_control_draw),
	(nautilus_rss_control_expose),
	(nautilus_rss_control_set_prelight_index),
	(nautilus_rss_control_motion_event),
	(nautilus_rss_control_leave_event),
	(nautilus_rss_control_size_request),
	(nautilus_rss_control_button_press_event):
	* components/rss-control/nautilus-rss-control.h:
	* components/rss-control/nautilus-rss-control.oafinfo:
	* components/services/install-view/nautilus-service-install.c:
	(xnautilus_service_install_download_failed),
	(xnautilus_service_install_failed_helper),
	(xnautilus_service_install_failed),
	(xnautilus_service_install_dependency_check),
	(xnautilus_service_install_done),
	(xnautilus_service_install_view_install_package_callback),
	(xnautilus_service_install_view_uninstall_package_callback):
	* components/services/install-view/nautilus-service-install.h:
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_pre_install_packages), (ei_install_packages),
	(eazel_install_download_packages),
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_install_packages), (uninstall_all_packages),
	(ei_uninstall_packages), (ei_get_packages_with_mod_flag),
	(ei_check_uninst_vs_downgrade), (hest), (ei_revert_transaction),
	(eazel_install_do_transaction_add_to_transaction),
	(eazel_install_do_transaction_save_report_helper),
	(eazel_install_do_transaction_save_report),
	(eazel_install_do_transaction_all_files_check),
	(get_total_size_of_packages),
	(eazel_install_clean_name_to_package_hash),
	(eazel_install_start_transaction),
	(eazel_install_check_if_depends_on),
	(eazel_install_prune_packages_helper),
	(eazel_install_prune_packages),
	(eazel_install_add_to_extras_foreach),
	(eazel_install_check_if_related_package),
	(eazel_install_fetch_dependencies), (dump_one_package),
	(dump_packages_foreach), (dump_packages), (print_package_list),
	(eazel_install_do_file_conflict_check),
	(eazel_install_do_dependency_check), (eazel_install_ensure_deps),
	(eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse),
	(eazel_uninstall_check_for_install), (eazel_uninstall_globber):
	* components/services/install/lib/eazel-install-logic.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(packagedata_new_from_rpm_conflict),
	(packagedata_new_from_rpm_conflict_reversed),
	(eazel_install_add_to_rpm_set),
	(eazel_install_package_modifies_provides_compare),
	(eazel_install_rpm_create_requirement),
	(eazel_install_do_rpm_dependency_check):
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/nautilus-view/.cvsignore:
	* components/services/install/nautilus-view/Makefile.am:
	* components/services/install/nautilus-view/Nautilus_View_install.o
	af.in:
	* components/services/install/nautilus-view/callbacks.c:
	(reply_callback), (nautilus_service_install_dependency_check),
	(nautilus_service_install_conflict_check),
	(nautilus_service_install_preflight_check),
	(nautilus_service_install_download_progress),
	(nautilus_service_install_download_failed),
	(previous_install_finished), (nautilus_service_install_progress),
	(nautilus_service_install_failed),
	(nautilus_service_install_solve_cases),
	(nautilus_service_install_done):
	* components/services/install/nautilus-view/callbacks.h:
	* components/services/install/nautilus-view/forms.c:
	(add_padding_to_box), (line_expose), (horizontal_line_new),
	(install_message_destroy), (install_message_new),
	(generate_install_form), (show_overall_feedback),
	(update_package_info_display), (current_progress_bar_complete),
	(button_ok_clicked), (button_cancel_clicked), (make_query_box):
	* components/services/install/nautilus-view/forms.h:
	* components/services/install/nautilus-view/main.c: (quit_timer),
	(service_install_object_destroyed), (service_install_make_object),
	(main):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (deps_destroy_foreach),
	(nautilus_service_install_view_destroy),
	(nautilus_service_install_view_finalize),
	(nautilus_service_install_view_initialize_class),
	(nautilus_service_install_view_initialize),
	(nautilus_service_install_view_get_nautilus_view),
	(create_package), (nautilus_install_parse_uri),
	(nautilus_service_install_check_for_desktop_files),
	(nautilus_install_service_describe_menu_entry),
	(nautilus_install_service_locate_menu_entries),
	(nautilus_service_need_password), (nautilus_service_try_again),
	(set_root_client),
	(nautilus_service_install_view_update_from_uri_finish),
	(user_login_callback),
	(nautilus_service_install_view_update_from_uri),
	(nautilus_service_install_view_load_uri),
	(service_install_load_location_callback),
	(service_install_stop_loading_callback):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:
	* components/services/install/nautilus-view/nautilus-service-instal
	l.c: (xnautilus_service_install_download_failed),
	(xnautilus_service_install_failed_helper),
	(xnautilus_service_install_failed),
	(xnautilus_service_install_dependency_check),
	(xnautilus_service_install_done),
	(xnautilus_service_install_view_install_package_callback),
	(xnautilus_service_install_view_uninstall_package_callback):
	* components/services/install/nautilus-view/nautilus-service-instal
	l.h:
	* components/services/inventory-view/nautilus-inventory-config-page
	.h:
	* components/services/nautilus-dependent-shared/icons/eazel-cloud-l
	ogo.png:
	* components/services/nautilus-dependent-shared/icons/eazel-service
	s-logo.png:
	* components/services/nautilus-dependent-shared/icons/service-summa
	ry-logo-top.png:
	* components/services/nautilus-dependent-shared/icons/startup-logo.
	png:
	* components/services/summary/lib/.cvsignore:
	* components/services/summary/lib/Makefile.am:
	* components/services/summary/lib/eazel-summary-shared.c:
	(summary_data_new), (services_data_new), (eazel_news_data_new),
	(update_news_data_new), (parse_a_service),
	(parse_a_eazel_news_item), (parse_a_update_news_item),
	(build_services_glist_from_xml), (build_eazel_news_glist_from_xml),
	(build_update_news_glist_from_xml), (parse_summary_xml_file):
	* components/services/summary/lib/eazel-summary-shared.h:
	* components/services/summary/nautilus-view/.cvsignore:
	* components/services/summary/nautilus-view/Makefile.am:
	* components/services/summary/nautilus-view/Nautilus_View_services-
	summary.oaf.in:
	* components/services/summary/nautilus-view/icons/.cvsignore:
	* components/services/summary/nautilus-view/icons/Makefile.am:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/.
	cvsignore:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/M
	akefile.am:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/a
	ctive-fill.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/a
	ctive-inactive-bridge.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/a
	ctive-left-bumper.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/a
	ctive-prelight-bridge.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/a
	ctive-right-bumper.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/f
	ill-background.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/i
	nactive-active-bridge.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/i
	nactive-fill.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/i
	nactive-left-bumper.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/i
	nactive-right-bumper.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/p
	relight-active-bridge.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/p
	relight-fill.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/p
	relight-left-bumper.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/p
	relight-right-bumper.png:
	* components/services/summary/nautilus-view/main.c:
	(summary_object_destroyed), (summary_make_object), (main):
	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.c: (authn_cb_succeeded), (authn_cb_failed), (login_button_cb),
	(logout_button_cb), (logged_in_callback), (logged_out_callback),
	(preferences_button_cb), (forgot_password_button_cb),
	(register_button_cb):
	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.h:
	* components/services/summary/nautilus-view/nautilus-summary-dialog
	s.c: (nautilus_summary_login_failure_dialog),
	(generate_error_dialog), (generate_login_dialog),
	(widget_set_nautilus_background_color), (error_dialog_cancel_cb),
	(get_window_from_summary_view), (set_dialog_parent),
	(name_or_password_field_activated):
	* components/services/summary/nautilus-view/nautilus-summary-dialog
	s.h:
	* components/services/summary/nautilus-view/nautilus-summary-footer
	.c: (footer_item_clicked_callback):
	* components/services/summary/nautilus-view/nautilus-summary-footer
	.h:
	* components/services/summary/nautilus-view/nautilus-summary-menu-i
	tems.c: (update_menu_items), (merge_bonobo_menu_items),
	(bonobo_register_callback), (bonobo_login_callback),
	(bonobo_logout_callback), (bonobo_preferences_callback):
	* components/services/summary/nautilus-view/nautilus-summary-menu-i
	tems.h:
	* components/services/summary/nautilus-view/nautilus-summary-view-p
	rivate.h:
	* components/services/summary/nautilus-view/nautilus-summary-view-u
	i.xml:
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (update_header), (create_header), (update_footer),
	(create_footer), (summary_view_button_callback),
	(summary_view_button_new), (summary_view_item_label_new),
	(summary_view_item_large_header_label_new),
	(summary_view_item_header_label_new),
	(summary_view_item_body_label_new), (append_hseparator_to_vbox),
	(generate_eazel_news_entry_row), (summary_view_update_pane),
	(summary_view_create_pane), (update_news_pane), (create_news_pane),
	(generate_service_entry_row), (update_services_list_pane),
	(create_services_list_pane), (generate_update_news_entry_row),
	(update_featured_downloads_pane), (create_featured_downloads_pane),
	(generate_summary_form), (nautilus_summary_view_initialize_class),
	(nautilus_summary_view_initialize),
	(nautilus_summary_view_destroy),
	(nautilus_summary_view_get_nautilus_view),
	(nautilus_summary_view_load_uri), (summary_load_location_callback):
	* components/services/summary/nautilus-view/nautilus-summary-view.h
	:
	* components/services/summary/nautilus-view/tests/README:
	* components/services/summary/nautilus-view/tests/redirects.xml:
	* components/services/summary/nautilus-view/tests/services.xml:
	* components/services/vault/.cvsignore:
	* components/services/vault/Makefile.am:
	* components/services/vault/command-line/.cvsignore:
	* components/services/vault/command-line/Makefile.am:
	* components/services/vault/command-line/main.c: (valid_ops),
	(main):
	* components/services/vault/command-line/vault-operations.c:
	(vault_list), (make_local_uri), (make_remote_uri), (vault_upload),
	(vault_download), (vault_move), (vault_delete):
	* components/services/vault/command-line/vault-operations.h:
	* components/text/services/english_to_french.xml:
	* components/text/services/french_to_english.xml:
	* components/throbber/nautilus-throbber.c: (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_throbber_initialize):
	* components/vcard/.cvsignore:
	* components/vcard/Makefile.am:
	* components/vcard/main.c: (vcard_object_destroyed),
	(vcard_make_object), (main):
	* components/vcard/nautilus-vcard.c:
	(nautilus_vcard_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_vcard_initialize),
	(nautilus_vcard_destroy), (nautilus_vcard_get_control),
	(vcard_logo_callback), (vcard_read_done_callback), (load_vcard),
	(nautilus_vcard_set_uri), (vcard_pixbuf_composite),
	(draw_vcard_logo_image), (draw_vcard_name_and_title),
	(draw_vcard_addresses), (nautilus_vcard_draw),
	(nautilus_vcard_expose), (nautilus_vcard_motion_event),
	(nautilus_vcard_size_request), (nautilus_vcard_leave_event),
	(nautilus_vcard_button_press_event):
	* components/vcard/nautilus-vcard.h:
	* components/vcard/nautilus-vcard.oaf:
	* components/vcard/vcard.c: (vcard_full_name), (vcard_title),
	(vcard_logo), (vcard_postal), (vcard_streetaddress),
	(vcard_city_state_zip), (vcard_company), (vcard_email),
	(vcard_fax), (vcard_web), (vcard_address_list):
	* components/vcard/vcard.h:
	* configure.in:
	* data/emblems/secret.png:
	* data/emblems/shared.png:
	* data/top/.cvsignore:
	* data/top/.nautilus-metafile.xml:
	* data/top/Clock:
	* data/top/Computer:
	* data/top/Makefile.am:
	* data/top/Services:
	* data/top/Slashdot:
	* icons/Makefile.am:
	* icons/crux_eggplant/i-regular-192-aa.png:
	* icons/crux_eggplant/i-regular-192.png:
	* icons/crux_eggplant/i-regular-72-aa.png:
	* icons/crux_eggplant/i-regular-72.png:
	* icons/crux_eggplant/i-regular-96-aa.png:
	* icons/crux_eggplant/i-regular-96.png:
	* icons/crux_eggplant/i-regular-aa.png:
	* icons/crux_eggplant/i-regular.png:
	* icons/eazel-logo.gif:
	* icons/emblem-note.png:
	* icons/emblem-secret.svg:
	* icons/emblem-shared.svg:
	* icons/hand.svg:
	* icons/i-directory-192.png:
	* icons/nautilus-logo.png:
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/bug-5712-pr3-workaround--gdk-pixbuf-drawab
	le.c: (rgb1), (rgb1a), (rgb8), (rgb8a), (rgb565lsb), (rgb565msb),
	(rgb565alsb), (rgb565amsb), (rgb555lsb), (rgb555msb), (rgb555alsb),
	(rgb555amsb), (rgb888alsb), (rgb888lsb), (rgb888amsb), (rgb888msb),
	(convert_real_slow), (rgbconvert),
	(NAUTILUS_BUG_5712_PR3_WORKAROUND__gdk_pixbuf_get_from_drawable):
	* libnautilus-extensions/bug-5712-pr3-workaround--gdk-pixbuf-privat
	e.h:
	* libnautilus-extensions/bug-5712-pr3-workaround--gdkimage.c:
	(NAUTILUS_BUG_5712_PR3_WORKAROUND__gdk_image_get),
	(gdk_image_put_normal):
	* libnautilus-extensions/nautilus-annotation.c: (_byte_reverse),
	(md5_init), (md5_update), (md5_final), (md5_transform),
	(digest_file_close_callback), (digest_file_completed),
	(digest_file_failed), (calculate_checksum_callback),
	(read_file_open_callback), (calculate_file_digest),
	(get_file_from_digest), (get_annotation_path),
	(look_up_local_annotation), (has_local_annotation),
	(add_annotations_to_file), (remember_file), (forget_file),
	(got_annotations_callback), (fetch_annotations_from_server),
	(get_annotation_from_server), (got_file_digest),
	(nautilus_annotation_get_annotation),
	(nautilus_annotation_has_annotation),
	(nautilus_annotation_add_annotation),
	(nautilus_annotation_remove_annotation):
	* libnautilus-extensions/nautilus-annotation.h:
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_user_main_directory):
	* libnautilus-extensions/nautilus-file.c:
	(prepend_automatic_emblem_names):
	* libnautilus-extensions/nautilus-file.h:
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_destroy),
	(nautilus_icon_canvas_item_get_icon_width),
	(nautilus_icon_canvas_item_get_icon_height),
	(nautilus_icon_canvas_item_set_arg), (do_control_destroy),
	(nautilus_icon_canvas_item_get_arg),
	(nautilus_icon_canvas_item_get_image), (recompute_bounding_box),
	(nautilus_icon_canvas_item_update_bounds),
	(draw_or_measure_label_text), (emblem_layout_next),
	(nautilus_icon_canvas_item_draw), (draw_or_measure_label_text_aa),
	(nautilus_icon_canvas_item_render), (create_annotation),
	(remove_annotation), (nautilus_icon_canvas_item_set_note_state),
	(nautilus_icon_canvas_item_event), (hit_test),
	(nautilus_icon_canvas_item_point),
	(nautilus_icon_canvas_item_bounds),
	(nautilus_icon_canvas_item_get_icon_rectangle),
	(get_icon_canvas_rectangle),
	(nautilus_icon_canvas_item_hit_test_rectangle),
	(nautilus_icon_canvas_item_set_smooth_font),
	(nautilus_icon_canvas_item_get_control),
	(nautilus_icon_canvas_item_set_control):
	* libnautilus-extensions/nautilus-icon-canvas-item.h:
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize_class),
	(nautilus_icon_container_update_icon):
	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_dnd_begin_drag):
	* libnautilus-extensions/nautilus-labeled-image.c:
	(nautilus_labeled_image_get_image_bounds):
	* libnautilus-extensions/nautilus-link.c:
	(nautilus_link_local_get_component_info):
	* libnautilus-extensions/nautilus-link.h:
	* libnautilus-extensions/nautilus-metadata.h:
	* libnautilus-extensions/nautilus-text-layout.c:
	(text_layout_free_row), (nautilus_text_layout_free),
	(nautilus_text_layout_new), (nautilus_text_layout_paint):
	* libnautilus-extensions/nautilus-text-layout.h:
	* nautilus-clean.sh:
	* src/file-manager/fm-icon-view.c: (get_icon_control_callback),
	(get_icon_text_callback), (create_icon_container):
	* src/nautilus-property-browser.c:
	* src/nautilus-sidebar-tabs.c: (nautilus_sidebar_tabs_hit_test),
	(nautilus_sidebar_tabs_select_tab):
	* src/nautilus-sidebar.c: (add_command_buttons),
	(nautilus_sidebar_update_buttons):
	* user-guide/C/Makefile.am:
	* user-guide/C/html/.cvsignore:
	* user-guide/C/html/license.html:
	* user-guide/C/img/.cvsignore:
	* user-guide/C/img/ch1-README.png:
	* user-guide/C/img/ch1-cnn.png:
	* user-guide/C/img/ch1-complex-search.png:
	* user-guide/C/img/ch1-connect.png:
	* user-guide/C/img/ch1-duplicate.png:
	* user-guide/C/img/ch1-google.png:
	* user-guide/C/img/ch1-hardware.png:
	* user-guide/C/img/ch1-history.png:
	* user-guide/C/img/ch1-home-john.png:
	* user-guide/C/img/ch1-home.png:
	* user-guide/C/img/ch1-icon-view-150.png:
	* user-guide/C/img/ch1-icon-view-demo.png:
	* user-guide/C/img/ch1-inadequate-permissions.png:
	* user-guide/C/img/ch1-list-mydoc.png:
	* user-guide/C/img/ch1-music-control.png:
	* user-guide/C/img/ch1-nautiluslogo.png:
	* user-guide/C/img/ch1-new-window.png:
	* user-guide/C/img/ch1-open-with.png:
	* user-guide/C/img/ch1-panel.png:
	* user-guide/C/img/ch1-permissions.png:
	* user-guide/C/img/ch1-pluck.png:
	* user-guide/C/img/ch1-samba.png:
	* user-guide/C/img/ch1-slash.png:
	* user-guide/C/img/ch1-toolbar.png:
	* user-guide/C/img/ch1-toshiba.png:
	* user-guide/C/img/ch1-tree-demo.png:
	* user-guide/C/img/ch1-tree-doc-1.png:
	* user-guide/C/img/ch1-tree-doc.png:
	* user-guide/C/img/ch1-tree-etc.png:
	* user-guide/C/img/ch1-tree-slash.png:
	* user-guide/C/img/ch1-view-as.png:
	* user-guide/C/img/ch1-zoom-control.png:
	* user-guide/C/img/ch2-colors.png:
	* user-guide/C/img/ch2-edit-settings-folder.png:
	* user-guide/C/img/ch2-emblems.png:
	* user-guide/C/img/ch2-home-john-mydoc.png:
	* user-guide/C/img/ch2-icon-captions-alone.png:
	* user-guide/C/img/ch2-icon-captions.png:
	* user-guide/C/img/ch2-john.png:
	* user-guide/C/img/ch2-music.png:
	* user-guide/C/img/ch2-open-with-other.png:
	* user-guide/C/img/ch2-open-with.png:
	* user-guide/C/img/ch2-photos-john.png:
	* user-guide/C/img/ch2-right-click-open-with.png:
	* user-guide/C/img/ch2-search-settings.png:
	* user-guide/C/img/ch2-ski-intermediate-menu.png:
	* user-guide/C/img/ch2-theme-eazel.png:
	* user-guide/C/img/ch2-view-layout-menu.png:
	* user-guide/C/img/ch3-account-info.png:
	* user-guide/C/img/ch3-online-storage.png:
	* user-guide/C/img/ch3-package-titles.png:
	* user-guide/C/img/ch3-sign-up.png:
	* user-guide/C/img/ch3-welcome-screen.png:
	* user-guide/C/img/custicon.png:
	* user-guide/C/img/full.png:
	* user-guide/C/img/install-update.png:
	* user-guide/C/img/install-user-level.png:
	* user-guide/C/img/locbar.png:
	* user-guide/C/img/player.png:
	* user-guide/C/img/prefmenu.png:
	* user-guide/C/img/sidebar.png:
	* user-guide/C/img/viewmenu.png:
	* user-guide/C/nautilus-C.omf:
	* user-guide/C/sgml/.cvsignore:
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/fdl.sgml:
	* user-guide/C/sgml/install.sgml:
	* user-guide/C/sgml/intro.sgml:
	* user-guide/C/sgml/model.sgml:
	* user-guide/C/sgml/nautilus.sgml:

2001-03-08  Darin Adler  <darin@eazel.com>

	* configure.in: Make the configure report a little easier to read
	and modify.

2001-03-21  Rebecca Schulman  <rebecka@eazel.com>
	Commit patch from Gianni Tedesco <gianni@ecsc.co.uk>

	* libnautilus-extensions/nautilus-medusa-support.c:
	(nautilus_medusa_check_cron_is_enabled):
	Fix possible infinite loop in the case where
	parts of proc may not be readable.

2001-03-21  Eskil Heyn Olsen  <eskil@eazel.com>

	This implements feature for bug 6960 - queries to softcat are now
	done for a variable number of packages at a time, radically
	speeding up dependency resolution.
	
	Also did a s/DistributionInfo/TrilobiteDistributionInfo/ for the
	Less Namespace Pollution Compaign 2001.

	* components/services/install/command-line/eazel-test-softcat.c:
	(main):
	Added a --funk=<int> which uses the new get_info_plural methods.

	* components/services/install/lib/eazel-install-logic2.c:
	(prune_failed_packages_helper), (post_check), (get_package_info),
	(dedupe_foreach_depends), (check_tree_helper),
	(check_no_two_packages_has_same_file), (install_packages):
	Moved a lot of code around to use the new
	eazel_softcat_get_info_plural  feature.

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize):
	Set packages pr query to a sane value (50 pr query)

	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system-types.c:
	(eazel_install_package_provides_compare),
	(eazel_install_package_feature_compare),
	(eazel_install_package_name_compare),
	(eazel_install_package_id_compare):
	Added package_id_compare and package_feature_compare.
	Removed some debug output.
	
	* components/services/install/lib/eazel-softcat-private.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_initialize), (eazel_softcat_set_packages_pr_query),
	(get_search_url_for_package), (warn_about_packages_failing),
	(eazel_softcat_query), (eazel_softcat_get_info),
	(split_by_multiple), (eazel_softcat_get_info_plural_helper),
	(eazel_softcat_get_info_plural):
	Added a packages_pr_query field to softcat->private.
	Voodoo to do the multiple packages pr. query. Pseudokode and
	stuff in comments.

	* components/services/install/lib/eazel-softcat.h:
	* components/services/inventory/eazel-inventory-collect-software.c:
	(eazel_inventory_collect_software):
	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.c: (determine_turbolinux_version),
	(determine_mandrake_version), (determine_suse_version),
	(determine_debian_version), (determine_redhat_version),
	(trilobite_get_distribution), (trilobite_get_distribution_name),
	(trilobite_get_distribution_arch),
	(trilobite_distribution_compare):
	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_suggest_id):
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_fill_from_packagedata):
	s/DistributionInfo/TrilobiteDistributionInfo/	

2001-03-21  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 7506 (Font preference has silly, overly-specific
	label)

	Fixed bug 4049 ("Other Application" is bad terminology when
	there are no applications listed)
	
	Fixed bug 6193 (Users confused by lack of title on "ski" menu)

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions): Changed wording
	for font choices.	

	* src/file-manager/fm-directory-view.c:
	(reset_bonobo_open_with_menu): Changed "Other Application..."
	to "An Application..." if there aren't any listed.
	
	* src/nautilus-shell-ui.xml: Add "Preferences" title to Preferences
	menu.
	Adding Vera's new version of Nautilus User Manual text.
	- Remove mention of RPM view since it isn't in this release
	Bug #: 7442 

2001-03-04  Andy Hertzfeld  <andy@eazel.com>

	Other changes

	* src/file-manager/fm-directory-view.h: Moved some #defines
	only used in fm-directory-view.c into that file.
	
	* src/nautilus-first-time-druid.c: (set_up_cron_information_page):
	Removed obsolete comment.	

2001-03-20  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	* Makefile.am, configure.in, nautilus-config.in, nautilus.spec.in,
	nautilusConf.sh.in, .cvsignore: Add nautilus-config and
	nautilusConf.sh so other modules can sensibly depend on
	libnautilus (this fix should make it into 1.0.2, I guess I should
	file a bug at some point).

2001-03-20  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fix a bunch of font bugs that dropped of the 1.0 plate.
	
	7371 - Fonts in font pickers are in no particular order 
	7387 - Font selection defaults to bold for some fonts 
	7421 - Font option menu in "Appearances" too long for screen
	7473 - Switching off "smooth graphics" leaves font family grouping
	7486 - Font style menu disabled when it shouldn't be
	7487 - Would be nice if font styles were submenus 
	7718 - 'cursor' font doesn't display 
	
	* libnautilus-extensions/nautilus-art-gtk-extensions.h:
	* libnautilus-extensions/nautilus-art-gtk-extensions.c:
	(nautilus_screen_get_dimensions): Fix a really silly typo.
	(nautilus_gtk_widget_get_dimensions): Make the documentation a
	little better.
	(nautilus_gtk_widget_get_preferred_dimensions): New function to
	get a widget's preferred dimensions.

	* libnautilus-extensions/nautilus-font-manager.c:
	(font_description_new): Use consistent variable names.  Set a
	'is_ignored' flag if the font is ignored.
	(font_description_free): Use consistent variable names.
	(font_description_table_find): Ignore black listed fonts.
	(font_description_table_for_each): Ignore black listed fonts.
	(font_directory_is_ignored): Put constants on top of file.
	(font_foundry_is_ignored), (font_family_is_ignored): New functions
	to check for specific black listed font foundries and/or families.
	(ensure_local_font_table): Rename to 'local' from 'global' - this
	is something i need for a future change where the font manager
	will be able to handle both 'local' and 'server' fonts.
	Move the font ignoring code from nautilus-font-picker.c here so
	that it is in one place.

	* libnautilus-extensions/nautilus-font-picker.h:
	Subclass it from GtkHBox instead of GtkVBox now that it is not as
	wide.
	* libnautilus-extensions/nautilus-font-picker.c:
	(option_menu_button_press_event), (menu_deactivate),
	(nautilus_font_picker_initialize), (nautilus_font_picker_destroy),
	(style_menu_item_activate_callback),
	(style_menu_item_button_release_event), (font_picker_add_item),
	(font_picker_populate), (font_make_name), (font_make_style_name),
	(font_slant_string_to_enum), (font_set_width_string_to_enum),
	(font_style_entry_new), (font_style_entry_free),
	(compare_font_entry), (global_font_list_get), (compare_int),
	(compare_style), (global_font_list_populate_callback),
	(nautilus_gtk_menu_shell_get_num_items),
	(font_picker_get_selected_style_entry),
	(font_picker_find_entries_for_font),
	(font_picker_get_index_for_entry), (nautilus_font_picker_new),
	(nautilus_font_picker_get_selected_font),
	(nautilus_font_picker_set_selected_font):
	Move the black listed font code into the font manager.  Use option
	menus directly instead of NautilusStringPickers.  Put the style
	choices in cascading submenus.  Deal with the case when too many
	choices dont fit on the screen.

	* test/test-nautilus-font-manager.c:
	* test/test-nautilus-font-picker.c:
	Update for font picker changes.
	
2001-03-20  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/Makefile.am:
	Readded the rpmview
	
	* components/rpmview/Makefile.am:
	Added XML_LDFLAGS/CFLAGS
	
	
	* components/services/install/lib/eazel-install-logic2.c:
	(dump_tree), (prune_failed_packages_helper),
	(prune_failed_packages), (add_to_dedupe_hash),
	(post_get_softcat_info), (get_softcat_info),
	(get_package_info_foreach), (get_package_info),
	(dedupe_foreach_depends), (dedupe_foreach), (dedupe),
	(is_satisfied_from_package_list), (check_dependencies_foreach),
	(check_dependencies), (do_dep_check_internal),
	(check_if_related_package),
	(check_update_for_no_more_file_conflicts),
	(check_for_no_more_missing_features), (check_tree_helper),
	(clean_up_dedupe_hash), (get_packages_with_mod_flag):
	Made a lot of changes so the packageslists carried around can
	contain both PackageData and PackageDependencies mixed up. This
	makes the softcat queries have the version/sense flags that the
	packages require.

	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach):
	Ported some changes from the 1.0 branch
	
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedependency_finalize), (packagedependency_class_initialize),
	(packagedependency_initialize), (packagedependency_get_type),
	(packagedependency_new), (packagedependency_copy),
	(packagedata_finalize), (packagedata_fill_in_missing),
	(flatten_packagedata_dependency_tree):
	Turned PackageDependency into a proper gtk+ object

	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package):
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_packagedata_fill_from_header):
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_query), (eazel_softcat_get_info):
	(also imported the xml spam from 1.0)
	* components/services/install/lib/eazel-install-corba-types.c:
	(packagedata_tree_from_corba_packagedatastructlist):
	Changes to use PackageDependency as a gtk+ object

2001-03-20  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4355: Built-in bookmarks icons change after first view

	Also reduced the number of times that refresh_bookmarks_menu
	is called since it was showing up in some profiling.

	* libnautilus-extensions/nautilus-bookmark.h:
	* libnautilus-extensions/nautilus-bookmark.c:
	(nautilus_bookmark_initialize_class), (nautilus_bookmark_set_name),
	(bookmark_file_changed_callback): Split the "changed" signal into
	"appearance_changed" and "content_changed". "appearance_changed" is
	emitted only if the name or icon change. "content_changed" is emitted
	if the URI changes.

	* src/nautilus-bookmark-list.c: (insert_bookmark_internal):
	Connect to both appearance_changed and content_changed.
	
	* src/nautilus-window-menus.c: (bookmark_holder_new):
	Refresh menu only on appearance_changed, not content_changed.

	* data/static_bookmarks.xml: Added "i-web" as icon name for
	all the built-in bookmarks, since this is the icon they will
	end up with after being visited. (Now, visiting a built-in
	bookmark will not cause a refresh of the bookmarks menu.)
	
2001-03-20  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-directory-view.c: (run_script_callback):
	shell-quote the script name. Fixes bug Robin found where scripts
	with spaces in their names didn't work.

2001-03-20  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Finished bug 4875 (design for running arbitrary scripts on
	selected items)

	There are lots of ways this could be improved, but I've
	finished the first pass at this feature. We'll need to get
	feedback before deciding how to improve it later. Please
	play with it -- hopefully it is self-explanatory. Start by
	selecting Scripts > Open Scripts Folder.
=======
	partially implemented tooltips for emblems, as a stepping stone to
	showing the annotations.

	* libnautilus-extensions/nautilus-annotation.c:
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(emblem_layout_next), (create_annotation), (remove_annotation),
	(nautilus_icon_canvas_item_set_note_state),
	(nautilus_icon_canvas_item_event), (hit_test),
	(nautilus_icon_canvas_item_point),
	(nautilus_icon_canvas_item_hit_test_rectangle):

2001-03-01  Andy Hertzfeld  <andy@eazel.com>

	added "notes" emblem and made one show up if annotations are
	available
	
	* icons/Makefile.am:
	* icons/emblem-note.png:
	* libnautilus-extensions/nautilus-annotation.c:
	(got_annotations_callback), (nautilus_annotation_has_annotation):
	* libnautilus-extensions/nautilus-file.c:
	(prepend_automatic_emblem_names):
	* libnautilus-extensions/nautilus-file.h:

2001-02-27  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 7019, emblem names not vertically aligned
	
	* libnautilus-extensions/nautilus-labeled-image.c:
	(nautilus_labeled_image_initialize), (is_fixed_height),
	(labeled_image_get_image_dimensions),
	(nautilus_labeled_image_get_image_bounds),
	(nautilus_labeled_image_set_fixed_image_height):
	* libnautilus-extensions/nautilus-labeled-image.h:
	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	* src/nautilus-property-browser.c:
	(make_properties_from_directories),
	(property_browser_category_button_new):

2001-02-26  Andy Hertzfeld  <set EMAIL_ADDRESS environment variable>


	* libnautilus-extensions/nautilus-annotation.c:
	(nautilus_annotation_has_annotation):
	implemented the has_annotation function
	
	* src/nautilus-property-browser.c: (add_reset_property):
	fixed bug 7021 by adding a line to turn the reset image into a
	property chit
	
2001-02-25  Andy Hertzfeld  <andy@eazel.com>

	finished first pass at underlying annotation infrastructure:
		async md5 checksum calculation
		saving the checksum in the metadata
		batching multiple lookups into a single request
		posting the request to the server and parsing the response
		caching annotations locally, saving count in metadata
	
	* libnautilus-extensions/nautilus-annotation.c:
	(digest_file_completed), (digest_file_failed),
	(read_file_open_callback), (calculate_file_digest),
	(get_file_from_digest), (get_annotation_path),
	(has_local_annotation), (add_annotations_to_file), (remember_file),
	(forget_file), (got_annotations_callback),
	(fetch_annotations_from_server), (get_annotation_from_server),
	(got_file_digest), (nautilus_annotation_get_annotation):
	* libnautilus-extensions/nautilus-metadata.h:

2001-02-22  Andy Hertzfeld  <andy@eazel.com>

	post-1_0_6 branch with annotation stuff
	
	* Makefile.am:
	* applets/Makefile.am:
	* components/Makefile.am:
	* components/rss-control/.cvsignore:
	* components/rss-control/Makefile.am:
	* components/rss-control/main.c: (rss_control_object_destroyed),
	(rss_control_make_object), (main):
	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_rss_control_initialize),
	(free_rss_data_item), (nautilus_rss_control_clear_items),
	(nautilus_rss_control_destroy), (nautilus_rss_control_get_control),
	(nautilus_rss_control_set_title), (rss_logo_callback),
	(rss_read_done_callback), (load_rss_file),
	(nautilus_rss_control_set_uri), (rss_control_pixbuf_composite),
	(draw_rss_logo_image), (draw_rss_title), (draw_blue_line),
	(draw_rss_items), (nautilus_rss_control_draw),
	(nautilus_rss_control_expose),
	(nautilus_rss_control_set_prelight_index),
	(nautilus_rss_control_motion_event),
	(nautilus_rss_control_leave_event),
	(nautilus_rss_control_size_request),
	(nautilus_rss_control_button_press_event):
	* components/rss-control/nautilus-rss-control.h:
	* components/rss-control/nautilus-rss-control.oafinfo:
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_pre_install_packages), (ei_install_packages),
	(eazel_install_download_packages),
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_install_packages), (uninstall_all_packages),
	(ei_uninstall_packages), (ei_get_packages_with_mod_flag),
	(ei_check_uninst_vs_downgrade), (hest), (ei_revert_transaction),
	(eazel_install_do_transaction_add_to_transaction),
	(eazel_install_do_transaction_save_report_helper),
	(eazel_install_do_transaction_save_report),
	(eazel_install_do_transaction_all_files_check),
	(get_total_size_of_packages),
	(eazel_install_clean_name_to_package_hash),
	(eazel_install_start_transaction),
	(eazel_install_check_if_depends_on),
	(eazel_install_prune_packages_helper),
	(eazel_install_prune_packages),
	(eazel_install_add_to_extras_foreach),
	(eazel_install_check_if_related_package),
	(eazel_install_fetch_dependencies), (dump_one_package),
	(dump_packages_foreach), (dump_packages), (print_package_list),
	(eazel_install_do_file_conflict_check),
	(eazel_install_do_dependency_check), (eazel_install_ensure_deps),
	(eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse),
	(eazel_uninstall_check_for_install), (eazel_uninstall_globber):
	* components/services/install/lib/eazel-install-logic.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(packagedata_new_from_rpm_conflict),
	(packagedata_new_from_rpm_conflict_reversed),
	(eazel_install_add_to_rpm_set),
	(eazel_install_package_modifies_provides_compare),
	(eazel_install_rpm_create_requirement),
	(eazel_install_do_rpm_dependency_check):
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/summary/lib/.cvsignore:
	* components/services/summary/lib/Makefile.am:
	* components/services/summary/lib/eazel-summary-shared.c:
	(summary_data_new), (services_data_new), (eazel_news_data_new),
	(update_news_data_new), (parse_a_service),
	(parse_a_eazel_news_item), (parse_a_update_news_item),
	(build_services_glist_from_xml), (build_eazel_news_glist_from_xml),
	(build_update_news_glist_from_xml), (parse_summary_xml_file):
	* components/services/summary/lib/eazel-summary-shared.h:
	* components/services/summary/nautilus-view/.cvsignore:
	* components/services/summary/nautilus-view/Makefile.am:
	* components/services/summary/nautilus-view/Nautilus_View_services-
	summary.oaf.in:
	* components/services/summary/nautilus-view/icons/.cvsignore:
	* components/services/summary/nautilus-view/icons/Makefile.am:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/.
	cvsignore:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/M
	akefile.am:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/a
	ctive-fill.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/a
	ctive-inactive-bridge.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/a
	ctive-left-bumper.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/a
	ctive-prelight-bridge.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/a
	ctive-right-bumper.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/f
	ill-background.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/i
	nactive-active-bridge.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/i
	nactive-fill.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/i
	nactive-left-bumper.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/i
	nactive-right-bumper.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/p
	relight-active-bridge.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/p
	relight-fill.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/p
	relight-left-bumper.png:
	* components/services/summary/nautilus-view/icons/gray_tab_pieces/p
	relight-right-bumper.png:
	* components/services/summary/nautilus-view/main.c:
	(summary_object_destroyed), (summary_make_object), (main):
	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.c: (authn_cb_succeeded), (authn_cb_failed), (login_button_cb),
	(logout_button_cb), (logged_in_callback), (logged_out_callback),
	(preferences_button_cb), (forgot_password_button_cb),
	(register_button_cb):
	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.h:
	* components/services/summary/nautilus-view/nautilus-summary-dialog
	s.c: (nautilus_summary_login_failure_dialog),
	(generate_error_dialog), (generate_login_dialog),
	(widget_set_nautilus_background_color), (error_dialog_cancel_cb),
	(get_window_from_summary_view), (set_dialog_parent),
	(name_or_password_field_activated):
	* components/services/summary/nautilus-view/nautilus-summary-dialog
	s.h:
	* components/services/summary/nautilus-view/nautilus-summary-footer
	.c: (footer_item_clicked_callback):
	* components/services/summary/nautilus-view/nautilus-summary-footer
	.h:
	* components/services/summary/nautilus-view/nautilus-summary-menu-i
	tems.c: (update_menu_items), (merge_bonobo_menu_items),
	(bonobo_register_callback), (bonobo_login_callback),
	(bonobo_logout_callback), (bonobo_preferences_callback):
	* components/services/summary/nautilus-view/nautilus-summary-menu-i
	tems.h:
	* components/services/summary/nautilus-view/nautilus-summary-view-p
	rivate.h:
	* components/services/summary/nautilus-view/nautilus-summary-view-u
	i.xml:
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (update_header), (create_header), (update_footer),
	(create_footer), (summary_view_button_callback),
	(summary_view_button_new), (summary_view_item_label_new),
	(summary_view_item_large_header_label_new),
	(summary_view_item_header_label_new),
	(summary_view_item_body_label_new), (append_hseparator_to_vbox),
	(generate_eazel_news_entry_row), (summary_view_update_pane),
	(summary_view_create_pane), (update_news_pane), (create_news_pane),
	(generate_service_entry_row), (update_services_list_pane),
	(create_services_list_pane), (generate_update_news_entry_row),
	(update_featured_downloads_pane), (create_featured_downloads_pane),
	(generate_summary_form), (nautilus_summary_view_initialize_class),
	(nautilus_summary_view_initialize),
	(nautilus_summary_view_destroy),
	(nautilus_summary_view_get_nautilus_view),
	(nautilus_summary_view_load_uri), (summary_load_location_callback):
	* components/services/summary/nautilus-view/nautilus-summary-view.h
	:
	* components/services/summary/nautilus-view/tests/README:
	* components/services/summary/nautilus-view/tests/redirects.xml:
	* components/services/summary/nautilus-view/tests/services.xml:
	* components/text/services/english_to_french.xml:
	* components/text/services/french_to_english.xml:
	* components/throbber/nautilus-throbber.c: (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_throbber_initialize):
	* components/vcard/.cvsignore:
	* components/vcard/Makefile.am:
	* components/vcard/main.c: (vcard_object_destroyed),
	(vcard_make_object), (main):
	* components/vcard/nautilus-vcard.c:
	(nautilus_vcard_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_vcard_initialize),
	(nautilus_vcard_destroy), (nautilus_vcard_get_control),
	(vcard_logo_callback), (vcard_read_done_callback), (load_vcard),
	(nautilus_vcard_set_uri), (vcard_pixbuf_composite),
	(draw_vcard_logo_image), (draw_vcard_name_and_title),
	(draw_vcard_addresses), (nautilus_vcard_draw),
	(nautilus_vcard_expose), (nautilus_vcard_motion_event),
	(nautilus_vcard_size_request), (nautilus_vcard_leave_event),
	(nautilus_vcard_button_press_event):
	* components/vcard/nautilus-vcard.h:
	* components/vcard/nautilus-vcard.oaf:
	* components/vcard/vcard.c: (vcard_full_name), (vcard_title),
	(vcard_logo), (vcard_postal), (vcard_streetaddress),
	(vcard_city_state_zip), (vcard_company), (vcard_email),
	(vcard_fax), (vcard_web), (vcard_address_list):
	* components/vcard/vcard.h:
	* configure.in:
	* data/top/.cvsignore:
	* data/top/.nautilus-metafile.xml:
	* data/top/Clock:
	* data/top/Computer:
	* data/top/Makefile.am:
	* data/top/Services:
	* data/top/Slashdot:
	* icons/Makefile.am:
	* icons/i-directory-192.png:
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-annotation.c: (_byte_reverse),
	(md5_init), (md5_update), (md5_final), (md5_transform),
	(digest_file_close_callback), (digest_file_completed),
	(digest_file_failed), (calculate_checksum_callback),
	(read_file_open_callback), (calculate_file_digest),
	(get_annotation_path), (look_up_local_annotation),
	(has_local_annotation), (got_annotations_callback),
	(fetch_annotations_from_server), (get_annotation_from_server),
	(got_file_digest), (nautilus_annotation_get_annotation),
	(nautilus_annotation_has_annotation),
	(nautilus_annotation_add_annotation),
	(nautilus_annotation_remove_annotation):
	* libnautilus-extensions/nautilus-annotation.h:
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_user_main_directory):
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_destroy),
	(nautilus_icon_canvas_item_get_icon_width),
	(nautilus_icon_canvas_item_get_icon_height),
	(nautilus_icon_canvas_item_set_arg), (do_control_destroy),
	(nautilus_icon_canvas_item_get_arg),
	(nautilus_icon_canvas_item_get_image), (recompute_bounding_box),
	(nautilus_icon_canvas_item_update_bounds),
	(draw_or_measure_label_text), (emblem_layout_next),
	(nautilus_icon_canvas_item_draw), (draw_or_measure_label_text_aa),
	(nautilus_icon_canvas_item_render),
	(nautilus_icon_canvas_item_bounds),
	(nautilus_icon_canvas_item_get_icon_rectangle),
	(get_icon_canvas_rectangle),
	(nautilus_icon_canvas_item_set_smooth_font),
	(nautilus_icon_canvas_item_get_control),
	(nautilus_icon_canvas_item_set_control):
	* libnautilus-extensions/nautilus-icon-canvas-item.h:
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize_class),
	(nautilus_icon_container_update_icon):
	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_dnd_begin_drag):
	* libnautilus-extensions/nautilus-link.c:
	(nautilus_link_local_get_component_info):
	* libnautilus-extensions/nautilus-link.h:
	* libnautilus-extensions/nautilus-metadata.h:
	* nautilus-clean.sh:
	* src/file-manager/fm-icon-view.c: (get_icon_control_callback),
	(get_icon_text_callback), (create_icon_container):
	* src/nautilus-sidebar-tabs.c: (nautilus_sidebar_tabs_hit_test),
	(nautilus_sidebar_tabs_select_tab):
	* src/nautilus-sidebar.c: (add_command_buttons),
	(nautilus_sidebar_update_buttons):
	* user-guide/C/img/ch1-README.png:
	* user-guide/C/img/ch1-cnn.png:
	* user-guide/C/img/ch1-complex-search.png:
	* user-guide/C/img/ch1-connect.png:
	* user-guide/C/img/ch1-duplicate.png:
	* user-guide/C/img/ch1-google.png:
	* user-guide/C/img/ch1-hardware.png:
	* user-guide/C/img/ch1-history.png:
	* user-guide/C/img/ch1-home-john.png:
	* user-guide/C/img/ch1-home.png:
	* user-guide/C/img/ch1-icon-view-150.png:
	* user-guide/C/img/ch1-icon-view-demo.png:
	* user-guide/C/img/ch1-inadequate-permissions.png:
	* user-guide/C/img/ch1-list-mydoc.png:
	* user-guide/C/img/ch1-music-control.png:
	* user-guide/C/img/ch1-nautiluslogo.png:
	* user-guide/C/img/ch1-new-window.png:
	* user-guide/C/img/ch1-open-with.png:
	* user-guide/C/img/ch1-panel.png:
	* user-guide/C/img/ch1-permissions.png:
	* user-guide/C/img/ch1-pluck.png:
	* user-guide/C/img/ch1-samba.png:
	* user-guide/C/img/ch1-slash.png:
	* user-guide/C/img/ch1-toolbar.png:
	* user-guide/C/img/ch1-toshiba.png:
	* user-guide/C/img/ch1-tree-demo.png:
	* user-guide/C/img/ch1-tree-doc-1.png:
	* user-guide/C/img/ch1-tree-doc.png:
	* user-guide/C/img/ch1-tree-etc.png:
	* user-guide/C/img/ch1-tree-slash.png:
	* user-guide/C/img/ch1-view-as.png:
	* user-guide/C/img/ch1-zoom-control.png:
	* user-guide/C/img/ch2-colors.png:
	* user-guide/C/img/ch2-edit-settings-folder.png:
	* user-guide/C/img/ch2-emblems.png:
	* user-guide/C/img/ch2-home-john-mydoc.png:
	* user-guide/C/img/ch2-icon-captions-alone.png:
	* user-guide/C/img/ch2-icon-captions.png:
	* user-guide/C/img/ch2-john.png:
	* user-guide/C/img/ch2-music.png:
	* user-guide/C/img/ch2-open-with-other.png:
	* user-guide/C/img/ch2-open-with.png:
	* user-guide/C/img/ch2-photos-john.png:
	* user-guide/C/img/ch2-right-click-open-with.png:
	* user-guide/C/img/ch2-search-settings.png:
	* user-guide/C/img/ch2-ski-intermediate-menu.png:
	* user-guide/C/img/ch2-theme-eazel.png:
	* user-guide/C/img/ch2-view-layout-menu.png:
	* user-guide/C/img/ch3-account-info.png:
	* user-guide/C/img/ch3-online-storage.png:
	* user-guide/C/img/ch3-package-titles.png:
	* user-guide/C/img/ch3-sign-up.png:
	* user-guide/C/img/ch3-welcome-screen.png:
	* user-guide/C/img/install-update.png:
	* user-guide/C/img/install-user-level.png:
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/fdl.sgml:
	* user-guide/C/sgml/install.sgml:
	* user-guide/C/sgml/intro.sgml:
	* user-guide/C/sgml/model.sgml:
	* libnautilus-extensions/nautilus-file.h:
	* libnautilus-extensions/nautilus-file.c: 
	(compare_by_name_cover): Simple cover for compare_by_name
	that casts parameters.
	(nautilus_file_list_sort_by_name): New public function.

	* src/file-manager/nautilus-directory-view-ui.xml: Added name to
	separators before "Open Scripts Folder" so they can be referred
	to in code (shown/hidden)

	* src/file-manager/fm-directory-view.c: 
	(get_scripts_directory): Create Scripts directory if it doesn't 
	exist; mark name of scripts directory for localization.
	(add_numbered_menu_item): Add pixbuf parameter.
	(add_application_to_bonobo_menu),
	(add_component_to_bonobo_menu): pass NULL for pixbuf
	(get_file_names_as_parameter_string): Changed name from
	get_selected_file_names..., now takes file list as parameter.
	(get_file_paths_or_uris_as_newline_delimited_string): New function.
	(get_file_paths_as_newline_delimited_string),
	(get_file_uris_as_newline_delimited_string): New functions, simple
	covers for get_file_paths_or_uris...
	(set_script_environment_variables): New function, sets some environment
	variables up so scripts can use them.
	(unset_script_environment_variables): New function, unsets those same
	environment variables.
	(run_script_callback): set/unset environment variables around calling
	script.
	(add_script_to_menus): add pixbufs for files
	(reset_scripts_menu): sort scripts by name; hide separator after scripts
	if there are no scripts
	(notify_user_if_no_scripts_callback): Explain script behavior and
	special environment variables in Details part of dialog.
	(call_when_ready_on_scripts_directory): include attributes required to
	get icon for file.
	(open_scripts_folder_callback): Change error message for unexpected
	case where scripts folder is nonexistent.

2001-03-20  Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in: upped version 1.0.0 

2001-03-19  John Sullivan  <sullivan@eazel.com>
	
	More work on bug 4875 (design for running arbitrary
	scripts on selected items). 

	Mostly done with this first pass. I still need to 
	set a few environment variables for the scripts' sake, 
	and I still need to add	code to create the scripts folder 
	if it's missing. (To test at this point, create your own 
	directory named "scripts" in ~/Nautilus.)

	* src/file-manager/nautilus-directory-view-ui.xml: Renamed
	Run Script submenu to Scripts; added Open Scripts Folder to
	Scripts submenu.

	* src/file-manager/fm-directory-view.c:
	(get_scripts_directory): returns NULL if directory doesn't exist.
	(scripts_added_or_changed_callback): New function, marks
	scripts menu invalid and schedules menu update.
	(connect_script_handlers): new function, monitor scripts
	directory and connect to files_added and files_changed signals
	so we can notice when scripts have changed.
	(fm_directory_view_initialize): Call connect_script_handlers.
	(get_selected_file_names_as_parameter_string): New function,
	returns string of selected file names, each shell-quoted.
	(run_script_callback): Pass selected file names if directory
	is local (else pass nothing); add FIXMEs
	(reset_scripts_menu): Don't change sensitivity based on script
	non-zero count since there's always the Open Scripts Folder item.
	(any_valid_scripts): New helper routine to see if scripts folder
	contains any executables.
	(notify_user_if_no_scripts_callback): New function, puts up
	informative message if there are no executables in scripts folder.
	(call_when_ready_on_scripts_directory): New helper function,
	slightly generalized from schedule_reset_scripts_menu.
	(schedule_reset_scripts_menu): Now calls new helper function.
	(open_scripts_folder_callback): New function, displays the contents
	of the scripts folder and also presents informative message if
	it contains no executables.
	(real_merge_menus): Add open_scripts_folder_callback for verb; mark
	scripts submenu invalid rather than updating it here.
	(real_update_menus): reset scripts menu if it's marked invalid.
	(disconnect_scripts_directory_handler): New helper function to
	disconnect a signal handler on the scripts directory.
	(disconnect_script_handlers): disconnect all the stuff we connected.
	
2001-03-19  Pavel Cisler  <pavel@eazel.com>

2001-03-07  John Harper  <jsh@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	* libnautilus-extensions/nautilus-glyph.c:
	(nautilus_glyph_draw_to_pixbuf):
	Speed up drag-selection a whole bunch by making this call
	4 x faster in the anti-aliased mode.

2001-03-19  Robin * Slomkowski  <rslomkow@eazel.com>

	* components/music/Makefile.am: added non-i386 files
	  to EXTRA_DISTS

2001-03-19  John Sullivan  <sullivan@eazel.com>

	Fixed bug 7817 (Launching mp3 files with mpg123 fails)

	* libnautilus-extensions/nautilus-program-choosing.c:
	(nautilus_launch_application): Code was comparing the
	uri-scheme to "file:" instead of "file".

2001-03-16  Gene Z. Ragan  <gzr@eazel.com>

	* libnautilus-extensions/Makefile.am:
	One final tweak to get the cdparanoia checks right.
		
2001-03-16  Gene Z. Ragan  <gzr@eazel.com>

	* configure.in:	
	* libnautilus-extensions/Makefile.am:
	Add checks for cdparanoia to allow enabling of
	cd audio mounting on the desktop.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	* libnautilus-extensions/nautilus-volume-monitor.h:
	Clean up build conditional audio CD handling and
	centralize the allocation of NautilusVolume structures.

2001-03-16  Darin Adler  <darin@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fix bug 610, a small per-window storage leak.

	* src/nautilus-window.c: (unref_mini_icon): Free icon at quit
	time for leak checking purposes.
	(nautilus_window_initialize_class): Create the mini-icon here.
	(nautilus_window_realize): Use it here, instead of re-making
	it each time.

2001-03-16  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	First batch of work for bug 4875 (design for running arbitrary
	scripts on selected items). Only works locally, doesn't notice
	changes to scripts directory, doesn't pass selected items as
	parameters, many other details unfinished.

	* src/file-manager/nautilus-directory-view-ui.xml: Add "Run Script"
	submenus to File and context menus; add missing tip I happened to
	notice to Open With submenu.

	* src/file-manager/fm-directory-view.c:
	(script_launch_parameters_new), (script_launch_parameters_free):
	New helper functions to manage lifetime of parameters for script
	menu items.
	(get_scripts_directory): New function, returns NautilusDirectory
	object (or NULL) representing scripts directory.
	(fm_directory_view_initialize): Remember scripts directory in
	details struct.
	(fm_directory_view_destroy): clean up scripts directory stuff.
	(add_numbered_menu_item): renamed from add_open_with_program_menu_item
	with no other changes, since it was already exactly general enough
	for my new use.
	(add_application_to_bonobo_menu), (add_component_to_bonobo_menu):
	Update for name change.
	(change_to_view_directory): New function to change working
	directory to the one displayed.
	(run_script_callback): New function to actually execute the script;
	temporarily changes the working directory.
	(add_script_to_menus): New function, adds one script to the two
	Run Script menus.
	(reset_scripts_menu): New function, fills in the two Run Script
	menus from scratch.
	(reset_scripts_menu_callback): New call_when_ready callback, calls
	reset_scripts_menu.
	(disconnect_script_handlers): New function, cleans up pending callbacks.
	(schedule_reset_scripts_menu): New function, sets up a callback when
	the files in the scripts directory are sufficiently known.
	(real_merge_menus): Call schedule_reset_scripts_menu.
	

	Fixed bug 7232 (vague error message and console spam when
	refreshing a directory deleted outside of Nautilus)

	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_loading_directory): Handle the NOT_FOUND
	case explicitly.

2001-03-16  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 7778 (Trash directory state not saved properly).

	* libnautilus-extensions/nautilus-trash-file.c:
	(is_delegated_attribute): Function that returns TRUE if it's passed
	one of the attributes that needs to be delegated to the individual
	directories that make up the trash.
	(is_delegated_attribute_predicate): Cover to use partition call on.
	(partition_attributes): Helper that partitions a list into a list
	of the delegated and non-delegated attributes.
	(real_monitor_add), (real_monitor_remove),
	(real_call_when_ready), (real_cancel_call_when_ready),
	(real_check_if_ready): Calls to be used for the trash itself for
	the non-delegated attributes.
	(trash_callback_destroy): Destroy both attribute lists.
	(monitor_add_file): Only monitor delegated attributes here.
	(trash_file_call_when_ready): Wait for the delegated attributes
	on the other files, the non-delegated attributes on this file.
	(trash_file_cancel_call_when_ready): Cancel the wait for both
	the main file and the other files.
	(trash_file_check_if_ready): Check for the delegated attributes
	on the other files, the non-delegated attributes on this file.
	(trash_file_monitor_add): Monitor the delegated attributes
	on the other files, the non-delegated attributes on this file.
	(trash_file_monitor_remove): Remove the monitor from both the
	main file and the other files.
	
	* libnautilus-extensions/nautilus-vfs-file.c: Formatting tweaks.

2001-03-16  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 6495 (Emacs-style keybindings not working in location bar
	and other NautilusEntry fields) by adding an expert preference to
	control whether the Emacs shortcuts or the ones in the menu bar
	take precedence. I started with Maciej's patch and did many
	refinements.

	Fix bug 1788 ("Select All" needs to be implemented for text): I
	had to add Select All so it won't do the icon view's Select All
	when you do a select all with the location bar focused.

	Fix bug 5612 (clicking to deselect causes incorrect menu
	sensitivity) by adding another signal handler for button clicks.

	Fix bug 7581 (When trying to restart Nautilus after crash from bug
	7579 I get a Segmentation Fault). I was just lucky enough to run
	into the problem on my machine.

	* libnautilus-extensions/nautilus-global-preferences.h:
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_install_defaults),
	(global_preferences_install_visibility),
	(global_preferences_create_dialog): Added the new Emacs-shortcut
	preference with the wording requested in the bug report.
	
	* libnautilus-extensions/nautilus-entry.h:
	* libnautilus-extensions/nautilus-entry.c:
	(emacs_shortcuts_preference_changed_callback): Track the
	preference.
	(nautilus_entry_initialize): Set up the callback to track the
	preference.
	(nautilus_entry_destroy): Tear down the callback to track the
	preference.
	(nautilus_entry_key_press): Allow the emacs shortcuts built into
	GtkEntry to work if the preference is set that way. Also, only
	emit the selection_changed signal if the key is actually handled.
	(nautilus_entry_motion_notify): Simplify the logic, since it's
	OK to send the selection_changed signal a little too often.
	(select_all_at_idle): Handle the case where the object is
	destroyed.
	(nautilus_entry_select_all_at_idle): Ref the object to handle the
	case where the object is destroyed before the idle happens.
	(nautilus_entry_button_press): Send a selection_changed message,
	since pressing the button can cause a selection change.
	(nautilus_entry_button_release): Send a selection_changed message,
	since pressing the button can cause a selection change.
	(nautilus_entry_initialize_class): Add new default handlers. Also,
	move to bottom of file so we don't need so many forward
	declarations.

	* libnautilus/nautilus-clipboard-ui.xml: Add a Select All Text
	command.
	* libnautilus/nautilus-clipboard.c: (select_all): New function to
	select all the text in a GtkEditable. Sadly it needs a special
	case for GtkText.
	(select_all_idle_callback): Callback used to select the text from
	idle.
	(select_all_callback): Callback that sets up the idle. Called from
	the bonobo verb.
	(initialize_clipboard_component_with_callback_data): Add the
	callback for Select All.
	
	* librsvg/rsvg.c: (rsvg_state_init): Initialize more fields,
	including font_size.
	(rsvg_text_handler_characters): Don't try to draw if the font
	size is 0 or negative.
	* librsvg/art_render_mask.c: (art_render_mask_render): Handle
	cases where x1 < x0. The old code would seg. fault. This was the
	reason we got a crash in bug 7581.
	
	* configure.in: Upped the required version of gnome-vfs.

2001-03-16  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/main.c: (main):

	Fixed the old "--help" bug in the installer, finally.

2001-03-15  Darin Adler  <darin@eazel.com>

<<<<<<< ChangeLog
	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 7763 (Makefile.am used to install xml data is wrong):
	
	* data/Makefile.am: Integrate build fix from fcrozat. Don't use
	the magic "info" name since it is used for special purposes on
	Mandrake and other systems.

	Other strings:
	
	* THANKS: Added some people who made recent contributions.
	* check-THANKS.pl: Add some more alternate names.

	* components/help/hyperbola-filefmt.c: (locale_score): Fix legal
	code that doesn't compile with some versions of gcc by adding a
	cast.
	
	* help/nautilus-user-manual/es/.cvsignore: Add
	nautilus-user-manual.junk.
	
	* libnautilus-extensions/nautilus-directory-async.c:
	(metafile_read_check_for_directory_callback),
	(metafile_read_done_callback),
	(metafile_write_failure_close_callback),
	(metafile_write_success_close_callback),
	(metafile_write_create_callback), (directory_load_callback),
	(directory_count_callback), (new_files_callback), (has_problem),
	(deep_count_callback), (mime_list_callback),
	(top_left_read_callback), (get_info_callback),
	(activation_uri_nautilus_link_read_callback),
	(activation_uri_gmc_link_read_callback),
	(cancel_activation_uri_for_file): Add ref/unref pairs that we need
	in callbacks that use NautilusDirectory objects but that also send
	out signals which might end up unref'ing them.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(nautilus_self_check_file_operations): Add tests to demonstrate
	bug 7701.
	
	* libnautilus-extensions/nautilus-smooth-text-layout-cache.c:
	(nautilus_self_check_smooth_text_layout_cache): Fix some destroys
	that should have been unrefs.
	
	* libnautilus-extensions/nautilus-string.c:
	(nautilus_self_check_string): Added tests for
	nautilus_str_get_after_prefix.

2001-03-14  Gene Z. Ragan  <gzr@eazel.com>

	* libnautilus-extensions/nautilus-icon-dnd.c:
	(drag_data_received_callback):
	Handle a case where Netscape submits duplicate drag data
	before the first instance of the data has been freed.
		
2001-03-14  Gene Z. Ragan  <gzr@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c:
	(icon_set_position):
	Fixed a minor annoying layout bug on the desktop. When icons were placed
	near the bottom of the desktop, they would sometimes jump
	partially offscreen.
	
2001-03-14  John Sullivan  <sullivan@eazel.com>

	Fixed bug 7696 ("Find" does nothing if location bar hidden)

	* src/nautilus-window-menus.c:
	(file_menu_toggle_find_mode_callback): Show location bar
	if it had been hidden. This is used by both Find/Browse menu
	item and Find button.

2001-03-14  John Sullivan  <sullivan@eazel.com>

	Fixed bug 7597 (Cut Text's underline accelerator changes
	to conflict with Copy Text's when a text field is focussed)

	* libnautilus/nautilus-clipboard-ui.xml: Changed _Cut Text
	to Cut _Text here, to match what it is when no text field
	is focussed.

2001-03-14  Ramiro Estrugo  <ramiro@eazel.com>

	* helper-scripts/nautilus-restore-settings-to-default.sh:
	Dont clobber any fonts that the user might have installed in
	~/.nautilus.  This is a bit of hack, but its very inconvenient to
	have these fonts be trashed when testing Nautilus in a "from
	scratch" environment.
	
	* nautilus.spec.in:
	Add the "restore settings to default" script to the package.
	
2001-03-13  Gene Z. Ragan  <gzr@eazel.com>

	I have been itching to check some code in for 1.2,
	so now I am doing it!
	
	This will enable drag support from Netscape to Nautilus.
	Only the desktop handles the drags for now. When I complete
	the async calls in NautilusFile, it will be safe to have the signal
	handled by other views such as FMDirectoryView.
	
	* libnautilus-extensions/nautilus-icon-container.c:
	* libnautilus-extensions/nautilus-icon-container.h:
	(nautilus_icon_container_initialize_class):
	Change name of signal create_nautilus_links
	to handle_uri_list.
		
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(drag_data_received_callback), (receive_dropped_uri_list),
	(nautilus_icon_container_get_drop_action):
	Add more general logic to handle a drop of a list of URIs.
	Don't expect them to only contain only the paths to
	gmc desktop entries.
		
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_initialize):
	Connect to changed signal name handle_uri_list.
	
	(icon_view_handle_uri_list):
	Use more generalized logic to handle a drop of a URI list.
	Determine what the list element contains and either convert from
	a DesktopEntry or create a link that contains a URI.
=======
2001-02-19  Andy Hertzfeld  <andy@eazel.com>

	got basic annotation infrastructure working
	
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-annotation.c:
	(digest_file_completed), (digest_file_failed),
	(calculate_checksum_callback), (read_file_open_callback),
	(calculate_file_digest), (get_annotation_path),
	(look_up_local_annotation), (has_local_annotation),
	(got_annotations_callback), (fetch_annotations_from_server),
	(get_annotation_from_server), (got_file_digest),
	(nautilus_annotation_has_annotation):
	* libnautilus-extensions/nautilus-metadata.h:
	* src/file-manager/fm-icon-view.c: (get_icon_text_callback):

2001-02-13  Andy Hertzfeld  <andy@eazel.com>
	
	first very rough cut at annotation stuff, not even building yet

	* libnautilus-extensions/nautilus-annotation.c: (_byte_reverse),
	(md5_init), (md5_update), (md5_final), (md5_transform),
	(digest_file_close_callback), (read_file_succeeded),
	(read_file_failed), (calculate_checksum_callback),
	(read_file_open_callback), (calculate_file_digest),
	(look_up_local_annotation), (has_local_annotation),
	(get_annotation_from_server), (got_file_digest),
	(nautilus_annotation_get_annotation),
	(nautilus_annotation_has_annotation),
	(nautilus_annotation_add_annotation),
	(nautilus_annotation_remove_annotation):
	* libnautilus-extensions/nautilus-annotation.h:
	
	* Makefile.am:
	* applets/Makefile.am:
	had to remove this because it wasn't building for me
	
	* src/nautilus-sidebar.c: (add_command_buttons),
	(empty_trash_callback),
	(nautilus_sidebar_trash_state_changed_callback),
	(nautilus_sidebar_update_buttons):
	empty trash button
	
2001-02-09  Andy Hertzfeld  <andy@eazel.com>

	got rid of debug messages for demo

	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_set_control):
	* src/file-manager/fm-icon-view.c: (get_icon_control_callback):

2001-02-08  Andy Hertzfeld  <andy@eazel.com>

	created post-1_0_3 branch
	
	* components/Makefile.am:
	* components/rss-control/.cvsignore:
	* components/rss-control/Makefile.am:
	* components/rss-control/main.c: (rss_control_object_destroyed),
	(rss_control_make_object), (main):
	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_rss_control_initialize),
	(free_rss_data_item), (nautilus_rss_control_clear_items),
	(nautilus_rss_control_destroy), (nautilus_rss_control_get_control),
	(nautilus_rss_control_set_title), (rss_logo_callback),
	(rss_read_done_callback), (load_rss_file),
	(nautilus_rss_control_set_uri), (rss_control_pixbuf_composite),
	(draw_rss_logo_image), (draw_rss_title), (draw_blue_line),
	(draw_rss_items), (nautilus_rss_control_draw),
	(nautilus_rss_control_expose),
	(nautilus_rss_control_set_prelight_index),
	(nautilus_rss_control_motion_event),
	(nautilus_rss_control_leave_event),
	(nautilus_rss_control_size_request),
	(nautilus_rss_control_button_press_event):
	* components/rss-control/nautilus-rss-control.h:
	* components/rss-control/nautilus-rss-control.oafinfo:
	* components/throbber/nautilus-throbber.c: (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_throbber_initialize):
	* components/vcard/.cvsignore:
	* components/vcard/Makefile.am:
	* components/vcard/main.c: (vcard_object_destroyed),
	(vcard_make_object), (main):
	* components/vcard/nautilus-vcard.c:
	(nautilus_vcard_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_vcard_initialize),
	(nautilus_vcard_destroy), (nautilus_vcard_get_control),
	(vcard_logo_callback), (vcard_read_done_callback), (load_vcard),
	(nautilus_vcard_set_uri), (vcard_pixbuf_composite),
	(draw_vcard_logo_image), (draw_vcard_name_and_title),
	(draw_vcard_addresses), (nautilus_vcard_draw),
	(nautilus_vcard_expose), (nautilus_vcard_motion_event),
	(nautilus_vcard_size_request), (nautilus_vcard_leave_event),
	(nautilus_vcard_button_press_event):
	* components/vcard/nautilus-vcard.h:
	* components/vcard/nautilus-vcard.oaf:
	* components/vcard/vcard.c: (vcard_full_name), (vcard_title),
	(vcard_logo), (vcard_postal), (vcard_streetaddress),
	(vcard_city_state_zip), (vcard_company), (vcard_email),
	(vcard_fax), (vcard_web), (vcard_address_list):
	* components/vcard/vcard.h:
	* configure.in:
	* data/top/Clock:
	* data/top/Makefile.am:
	* data/top/Slashdot:
	* icons/Makefile.am:
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_user_main_directory):
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_destroy),
	(nautilus_icon_canvas_item_get_icon_width),
	(nautilus_icon_canvas_item_get_icon_height),
	(nautilus_icon_canvas_item_set_arg), (do_control_destroy),
	(nautilus_icon_canvas_item_get_arg),
	(nautilus_icon_canvas_item_get_image), (recompute_bounding_box),
	(nautilus_icon_canvas_item_update_bounds),
	(draw_or_measure_label_text), (emblem_layout_next),
	(nautilus_icon_canvas_item_draw), (draw_or_measure_label_text_aa),
	(nautilus_icon_canvas_item_render),
	(nautilus_icon_canvas_item_bounds),
	(nautilus_icon_canvas_item_get_icon_rectangle),
	(get_icon_canvas_rectangle),
	(nautilus_icon_canvas_item_set_smooth_font),
	(nautilus_icon_canvas_item_get_control),
	(nautilus_icon_canvas_item_set_control):
	* libnautilus-extensions/nautilus-icon-canvas-item.h:
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize_class),
	(nautilus_icon_container_update_icon):
	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_dnd_begin_drag):
	* libnautilus-extensions/nautilus-link.c:
	(nautilus_link_local_get_component_info):
	* libnautilus-extensions/nautilus-link.h:
	* libnautilus-extensions/nautilus-metadata.h:
	* nautilus-clean.sh:
	* src/file-manager/fm-icon-view.c: (get_icon_control_callback),
	(create_icon_container):
	* src/nautilus-sidebar-tabs.c: (nautilus_sidebar_tabs_hit_test),
	(nautilus_sidebar_tabs_select_tab):
	* src/nautilus-sidebar.c: (nautilus_sidebar_release_event):
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/fdl.sgml:
	* user-guide/C/sgml/install.sgml:
	* user-guide/C/sgml/intro.sgml:
	* user-guide/C/sgml/model.sgml:
	(finished_label, update_finished_label,
	nautilus_first_time_druid_show): since we only launch the
	services window when http requests are known to work, make the
	text in the `Finished' page be conditional on that

2001-03-13  Jason Leach  <jasonleach@usa.net>

	reviewed by: Darin Adler <darin@eazel.com>
	
	* libnautilus-extensions/nautilus-metafile-factory.h: builddir !=
	srcdir fix.

2001-03-12  Robey Pointer  <robey@eazel.com>

	reviewed by: Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus-installer/src/prescript:

	Tell RH70 users who don't have glibc 2.2 that they need to
	upgrade, and tell them a hacky way to do it.

2001-03-12  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen <eskil@eazel.com>

	* nautilus-installer/src/Makefile.am:
	* nautilus-installer/src/installer.c: (add_bullet_point_to_vbox),
	(is_toplevel_package), (report_unusual_errors), (install_failed):
	* nautilus-installer/src/main.c:

	Turn off the SEGV handlers, make --debug no longer the default,
	and point the installer at the production servers again.  Add a
	special-case error message to be displayed when Nautilus is
	already installed.

2001-03-12  Robin * Slomkowski  <rslomkow@eazel.com>

	* components/help/topleveldocs.xml: updated with 
	  changes from http://bugzilla/show_bug.cgi?id=7663

2001-03-12  Eric Fischer  <eric@eazel.com>

	Merge from 1.0 branch:

	reviewed by: Robin * Slomkowski <rslomkow@eazel.com>

	* configure.in:
	Change ammonite version checking to use the same logic as
	other version number checks, to fix the broken tinderbox

	* nautilus.spec.in:
	Inherit the required ammonite version number from configure.in

2001-03-12  John Sullivan  <sullivan@eazel.com>

	reviewed by: Ramiro Estrugo  <ramiro@eazel.com>

	Fixed bug 7666 (default user level should be Intermediate)

	* libnautilus-extensions/nautilus-preferences.c:
	(nautilus_preferences_get_user_level): Reworked function a
	little to support explicit default; made Intermediate the
	default.

2001-03-10  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(add_to_dedupe_hash), (post_get_softcat_info),
	(dedupe_foreach_depends), (check_if_related_package),
	(check_tree_helper), (clean_up_dedupe_hash):
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach):

	Backport Eskil's dedupe changes to head, so we can build the
	installer here.  This fixes the "softcat is updating" bug (which
	turned out to have nothing to do with softcat).

2001-03-10  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen <eskil@eazel.com>
	(implicitly)

	Backport a few patches that appear to have only made it to the 1.0
	branch, so we can start building the installer on CVS head.

	* components/services/install/lib/eazel-install-logic2.c:
	(prune_failed_packages_helper):	

	That cancelled vs. already-installed bug, plus the "not deduping
	myself" patch.
	
	* components/services/install-view/callbacks.c:
	(nautilus_service_install_done):

	Remove the spurious "panic" warning.

2001-03-09  Maciej Stachowiak  <mjs@eazel.com>
	* libnautilus-extensions/nautilus-trash-file.c:
	(trash_callback_check_done), (trash_file_call_when_ready):
	Fix tests now that gnome-vfs has a fix for bug 6798 (URI functions
	don't always treat domain names as case-insensitive) and fix bug
	6799 (nautilus_uris_match_ignore_fragments gives wrong result for
	URIs with trailing "/" characters).

	reviewed by: John Harper  <jsh@eazel.com>
	             Eskil Heyn Olsen  <eskil@eazel.com>
		     Robey Pointer  <robey@eazel.com>
	
	Fixed bugs 7411 (installer crashes, but successfully installs),
	7510 (tinderbox installer crashes 3 lines into gnome init) and
	7123 (Installer uses a question mark on black background in
	dialogs). These were all caused by the fact that Imlib is
	completely unusable linked statically. So to fix them I removed
	all dependency on imlib and gnome-libs from the bootstrap
	installer (since so many parts of gnome-libs, including
	gnome_init, make imlib calls).

	* components/services/install/lib/eazel-install-logic2.c:
	(get_softcat_info),
	(check_conflicts_against_already_installed_packages):
	* components/services/install/lib/eazel-install-metadata.c:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_is_dir), (eazel_install_save_transaction_report):
	* components/services/install/lib/eazel-install-problem.c:
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_file):
	* components/services/install/lib/eazel-install-tests.c:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(generate_xml_package_list):
	* components/services/install/lib/eazel-package-system-rpm3.c:
	* components/services/install/lib/eazel-package-system-rpm4.c:
	* components/services/install/lib/eazel-package-system-types.c:
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system.c:
	* components/services/install/lib/eazel-softcat.c:
	* components/services/trilobite/libtrilobite/Makefile.am:
	* components/services/trilobite/libtrilobite/trilobite-core-distribution.c: 
	(trilobite_get_distribution):
	* components/services/trilobite/libtrilobite/trilobite-core-distribution.h:
	* components/services/trilobite/libtrilobite/trilobite-core-network-slim.c:
	* components/services/trilobite/libtrilobite/trilobite-core-network.h:
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c:
	* components/services/trilobite/libtrilobite/trilobite-i18n.h:
	* nautilus-installer/install-lib/Makefile.am:
	* nautilus-installer/libtrilobite/Makefile.am:
	Avoid depending on libgnome or libgnomeui in libeazelinstall or
	libtrilobite when building in static minimal mode.
=======
	added better sizing of components by using size_request, and
	a vcard component that graphically renders vcards.
	
	* components/Makefile.am:
	added vcard component
	
	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize_class),
	(nautilus_rss_control_size_request):
	added size_request call to rss-control
	
	* components/vcard/.cvsignore:
	* components/vcard/Makefile.am:
	* components/vcard/main.c: (vcard_object_destroyed),
	(vcard_make_object), (main):
	* components/vcard/nautilus-vcard.c:
	(nautilus_vcard_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_vcard_initialize),
	(nautilus_vcard_destroy), (nautilus_vcard_get_control),
	(vcard_logo_callback), (vcard_read_done_callback), (load_vcard),
	(nautilus_vcard_set_uri), (vcard_pixbuf_composite),
	(draw_vcard_logo_image), (draw_vcard_name_and_title),
	(draw_vcard_addresses), (nautilus_vcard_draw),
	(nautilus_vcard_expose), (nautilus_vcard_motion_event),
	(nautilus_vcard_size_request), (nautilus_vcard_leave_event),
	(nautilus_vcard_button_press_event):
	* components/vcard/nautilus-vcard.h:
	* components/vcard/nautilus-vcard.oaf:
	* components/vcard/vcard.c: (vcard_full_name), (vcard_title),
	(vcard_logo), (vcard_postal), (vcard_streetaddress),
	(vcard_city_state_zip), (vcard_company), (vcard_email),
	(vcard_fax), (vcard_web), (vcard_address_list):
	* components/vcard/vcard.h:
	new vcard component for displaying graphical business cards, not
	finished yet
	
	* configure.in:
	
	added vcard component
	* nautilus-installer/src/Makefile.am: Don't link against gnome
	libraries or imlib.

	* nautilus-clean.sh:
	added vcard to nautilus-clean
		
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_get_icon_width),
	(nautilus_icon_canvas_item_get_icon_height),
	(nautilus_icon_canvas_item_update_bounds):
	better sizing of components
	
2001-01-24  Andy Hertzfeld  <andy@eazel.com>

	* nautilus-installer/src/callbacks.c,
	nautilus-installer/src/callbacks.h,
	nautilus-installer/src/installer.c,
	nautilus-installer/src/installer.h, nautilus-installer/src/main.c
	nautilus-installer/src/gtk-hackery.c: Minor tweaks to avoid GNOME
	and Imlib dependencies.

	* nautilus-installer/src/fake-stock.h,
	nautilus-installer/src/fake-stock.c:
	(fake_stock_pixmap_new_from_xpm_data, fake_stock_pixmap_button,
	fake_stock_or_ordinary_button): Some hacky code to allow replacing
	the real stock code.

	* nautilus-installer/src/gnome-dialog-util.c,
	nautilus-installer/src/gnome-dialog-util.h,
	nautilus-installer/src/gnome-dialog.c,
	nautilus-installer/src/gnome-dialog.h,
	nautilus-installer/src/gnome-druid-page.c,
	nautilus-installer/src/gnome-druid-page.h,
	nautilus-installer/src/gnome-druid.c,
	nautilus-installer/src/gnome-druid.h,
	nautilus-installer/src/gnome-messagebox.c,
	nautilus-installer/src/gnome-messagebox.h,
	nautilus-installer/src/gnome-types.h: Replace reliance on
	gnome-stock (and therefore imlib) with fake-stock calls.

	* nautilus-installer/src/nautilus-druid-page-eazel.h,
	nautilus-installer/src/nautilus-druid-page-eazel.c: Pruned and
	massively hacked to avoid depending on the canvas, etc.

	* nautilus-installer/src/package-tree.c, 
	nautilus-installer/src/nautilus-druid.c,
	nautilus-installer/src/nautilus-druid.h: Avoid GNOME and imlib
	dependencies.

2001-03-10  Mike Fleming  <mfleming@eazel.com>

	reviewed by: <rslomkow@eazel.com>

	Bug 6826: 
=======
	added missing files to post-1_0_1 branch, plus some more
	development
	
	* components/rss-control/.cvsignore:
	* components/rss-control/Makefile.am:
	* components/rss-control/main.c: (rss_control_object_destroyed),
	(rss_control_make_object), (main):
	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_rss_control_initialize),
	(free_rss_data_item), (nautilus_rss_control_clear_items),
	(nautilus_rss_control_destroy), (nautilus_rss_control_get_control),
	(nautilus_rss_control_set_title), (rss_logo_callback),
	(rss_read_done_callback), (load_rss_file),
	(nautilus_rss_control_set_uri), (rss_control_pixbuf_composite),
	(draw_rss_logo_image), (draw_rss_title), (draw_blue_line),
	(draw_rss_items), (nautilus_rss_control_draw),
	(nautilus_rss_control_expose),
	(nautilus_rss_control_set_prelight_index),
	(nautilus_rss_control_motion_event),
	(nautilus_rss_control_leave_event),
	(nautilus_rss_control_button_press_event):
	
	* components/rss-control/nautilus-rss-control.h:
	* components/rss-control/nautilus-rss-control.oafinfo:
	
	* components/throbber/nautilus-throbber.c: (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_throbber_initialize):
	
	* data/top/Clock:
	* data/top/Slashdot:

2001-03-06  Eric Fischer  <eric@eazel.com>

	reviewed by: Robin * Slomkowski <rslomkow@eazel.com>

	* nautilus-installer.spec.in:
	Also include uncompressed, unstripped eazel-installer.

	Added --with-build-message to ./configure.  A build message will
	display in the about box if no EAZEL_TIMESTAMP (used by hourly builds)
	has been set.

	The default build message for CVS builds "Development Version"

	* acconfig.h:
	* configure.in:
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_build_message):
	* libnautilus-extensions/nautilus-file-utilities.h:
	* src/nautilus-window-menus.c: (help_menu_about_nautilus_callback):

2001-03-09  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>
                     Pavel Cisler <pavel@eazel.com>

	Fix bug 7609 (closing Show Properties window when new name
	conflicts leads to crash):

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(nautilus_run_simple_dialog), (create_message_box): Don't use
	an already-destroyed window as a parent.

2001-03-09  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

<<<<<<< ChangeLog
	Fix bug 7587 (Copying text in Notes with menu item kills Notes
	[also Text viewer, etc]):

	* libnautilus/nautilus-clipboard.c: (do_with_fake_current_event):
	Function to set up a non-NULL event so the code in GtkEditable
	won't die.
	(cut_callback), (copy_callback), (paste_callback): Use the new
	function.

2001-03-09  John Sullivan  <sullivan@eazel.com>

	reviewed by: Rebecca Schulman  <rebecka@eazel.com>
	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 7615 (searching for "    " crashes)

	* src/nautilus-simple-search-bar.c:
	(nautilus_simple_search_criteria_to_search_uri):
	Change code that counts characters in search URI
	to use the same math as the code that appends
	to string.

2001-03-09  Dan Mueth  <dan@eazel.com>
=======
	* README: Note that we now use gnome-vfs HEAD, not a branch
	any more.
=======
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-directory-metafile-monitor.h:
	* libnautilus-extensions/nautilus-directory-metafile-monitor.c:
	(nautilus_metafile_monitor_initialize_class),
	(nautilus_metafile_monitor_get_epv),
	(nautilus_metafile_monitor_get_vepv),
	(nautilus_metafile_monitor_create_servant),
	(nautilus_metafile_monitor_initialize), (destroy),
	(nautilus_metafile_monitor_new), (corba_metafile_changed):
	Added implementation of monitors for directories to recieve
	notification when their metadata changes. This works across
	processes.
=======
2001-01-28  Andy Hertzfeld  <andy@eazel.com>

	added better sizing of components by using size_request, and
	a vcard component that graphically renders vcards.
	
	* components/Makefile.am:
	added vcard component
	
	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize_class),
	(nautilus_rss_control_size_request):
	added size_request call to rss-control
	
	* components/vcard/.cvsignore:
	* components/vcard/Makefile.am:
	* components/vcard/main.c: (vcard_object_destroyed),
	(vcard_make_object), (main):
	* components/vcard/nautilus-vcard.c:
	(nautilus_vcard_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_vcard_initialize),
	(nautilus_vcard_destroy), (nautilus_vcard_get_control),
	(vcard_logo_callback), (vcard_read_done_callback), (load_vcard),
	(nautilus_vcard_set_uri), (vcard_pixbuf_composite),
	(draw_vcard_logo_image), (draw_vcard_name_and_title),
	(draw_vcard_addresses), (nautilus_vcard_draw),
	(nautilus_vcard_expose), (nautilus_vcard_motion_event),
	(nautilus_vcard_size_request), (nautilus_vcard_leave_event),
	(nautilus_vcard_button_press_event):
	* components/vcard/nautilus-vcard.h:
	* components/vcard/nautilus-vcard.oaf:
	* components/vcard/vcard.c: (vcard_full_name), (vcard_title),
	(vcard_logo), (vcard_postal), (vcard_streetaddress),
	(vcard_city_state_zip), (vcard_company), (vcard_email),
	(vcard_fax), (vcard_web), (vcard_address_list):
	* components/vcard/vcard.h:
	new vcard component for displaying graphical business cards, not
	finished yet
	
	* configure.in:
	added vcard component

	* nautilus-clean.sh:
	added vcard to nautilus-clean
		
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_get_icon_width),
	(nautilus_icon_canvas_item_get_icon_height),
	(nautilus_icon_canvas_item_update_bounds):
	better sizing of components
	
2001-01-24  Andy Hertzfeld  <andy@eazel.com>

	added missing files to post-1_0_1 branch, plus some more
	development
	
	* components/rss-control/.cvsignore:
	* components/rss-control/Makefile.am:
	* components/rss-control/main.c: (rss_control_object_destroyed),
	(rss_control_make_object), (main):
	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_rss_control_initialize),
	(free_rss_data_item), (nautilus_rss_control_clear_items),
	(nautilus_rss_control_destroy), (nautilus_rss_control_get_control),
	(nautilus_rss_control_set_title), (rss_logo_callback),
	(rss_read_done_callback), (load_rss_file),
	(nautilus_rss_control_set_uri), (rss_control_pixbuf_composite),
	(draw_rss_logo_image), (draw_rss_title), (draw_blue_line),
	(draw_rss_items), (nautilus_rss_control_draw),
	(nautilus_rss_control_expose),
	(nautilus_rss_control_set_prelight_index),
	(nautilus_rss_control_motion_event),
	(nautilus_rss_control_leave_event),
	(nautilus_rss_control_button_press_event):
	
	* components/rss-control/nautilus-rss-control.h:
	* components/rss-control/nautilus-rss-control.oafinfo:
	
	* components/throbber/nautilus-throbber.c: (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_throbber_initialize):
	
	* data/top/Clock:
	* data/top/Slashdot:

2001-01-24  Andy Hertzfeld  <andy@eazel.com>

	merged the post-1_0 branch with HEAD 1/23/01 to get this,
	the post-1_0_1 branch
	
	* applets/launcher/nautilus-launcher-applet.c:
	* components/Makefile.am:
	* components/rss-control/.cvsignore:
	* components/rss-control/Makefile.am:
	* components/rss-control/main.c: (rss_control_object_destroyed),
	(rss_control_make_object), (main):
	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_rss_control_initialize),
	(free_rss_data_item), (nautilus_rss_control_clear_items),
	(nautilus_rss_control_destroy), (nautilus_rss_control_get_control),
	(nautilus_rss_control_set_title), (rss_logo_callback),
	(rss_read_done_callback), (load_rss_file),
	(nautilus_rss_control_set_uri), (rss_control_pixbuf_composite),
	(draw_rss_logo_image), (draw_rss_title), (draw_blue_line),
	(draw_rss_items), (nautilus_rss_control_draw),
	(nautilus_rss_control_expose),
	(nautilus_rss_control_set_prelight_index),
	(nautilus_rss_control_motion_event),
	(nautilus_rss_control_leave_event),
	(nautilus_rss_control_button_press_event):
	* components/rss-control/nautilus-rss-control.h:
	* components/rss-control/nautilus-rss-control.oafinfo:
	* configure.in:
	* data/top/Clock:
	* data/top/Makefile.am:
	* data/top/Slashdot:
	* icons/Makefile.am:
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_user_main_directory):
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_destroy),
	(nautilus_icon_canvas_item_get_icon_width),
	(nautilus_icon_canvas_item_get_icon_height),
	(nautilus_icon_canvas_item_set_arg), (do_control_destroy),
	(nautilus_icon_canvas_item_get_arg),
	(nautilus_icon_canvas_item_get_image), (recompute_bounding_box),
	(nautilus_icon_canvas_item_update_bounds),
	(draw_or_measure_label_text), (emblem_layout_next),
	(nautilus_icon_canvas_item_draw), (draw_or_measure_label_text_aa),
	(nautilus_icon_canvas_item_render),
	(nautilus_icon_canvas_item_bounds),
	(nautilus_icon_canvas_item_get_icon_rectangle),
	(get_icon_canvas_rectangle),
	(nautilus_icon_canvas_item_set_smooth_font),
	(nautilus_icon_canvas_item_get_control),
	(nautilus_icon_canvas_item_set_control):
	* libnautilus-extensions/nautilus-icon-canvas-item.h:
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize_class),
	(nautilus_icon_container_update_icon):
	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_dnd_begin_drag):
	* libnautilus-extensions/nautilus-link.c:
	(nautilus_link_local_get_component_info):
	* libnautilus-extensions/nautilus-link.h:
	* libnautilus-extensions/nautilus-metadata.h:
	* src/file-manager/fm-icon-view.c: (get_icon_control_callback),
	(create_icon_container):
	* src/nautilus-sidebar-tabs.c: (nautilus_sidebar_tabs_hit_test),
	(nautilus_sidebar_tabs_select_tab):
	* src/nautilus-sidebar.c: (nautilus_sidebar_release_event):
	
2001-01-23  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 6369, sluggish keyboard response in location bar. I improved
	this in two different ways: the expansion code is deferred to idle
	time now, so it doesn't get in the way of fast typing.  Also, the
	file info list is cached in memory, so it doesn't have to load it
	again for every keystroke.  I also made the instance variables
	private, instead of being exposed in the .h file.
	

2001-03-09  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: John Harper  <jsh@eazel.com>

	Fix bug 7547 - Multi byte locales should default to non smooth
	graphics mode
	
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_defaults):
	Make multi byte locales default to non smooth mode, so that it
	works for more Japanese user most of the time.  Japanese users can
	still select smooth mode if they have the right scalable font in
	their system.

2001-03-09  Dan Mueth  <dan@eazel.com>

	reviewed by: Don Melton <don@eazel.com>

	Putting in Vera's updated Release Notes.
	Bug #: 7559, 7588

	* help/nautilus-release-notes/C/nautilus-release-notes.sgml:

	Putting in Vera's updated User Manual. (See TRACKED_CHANGES
	for details on what has changed.)
	Bug #: 7559, 7589

	* help/nautilus-user-manual/C/nautilus-user-manual.sgml:
	* help/nautilus-user-manual/C/TRACKED_CHANGES:

2001-03-08  John Sullivan  <sullivan@eazel.com>

	fix by: Andy Hertzfeld <andy@eazel.com>
	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 7580 (Throbber flashing constantly when animating)

	* components/throbber/nautilus-throbber.c: (draw_throbber_image):
	Only clear the gdk window once per cycle, instead of for every frame.

2001-03-08  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen <eskil@eazel.com>

	* nautilus-installer/src/installer.c: (start_logging):

	Revert earlier logfile breakage by changing the perms check to
	match the perms mjs is using later on.

2001-03-08  John Harper  <jsh@eazel.com>

	reviewed by: Seth Nickell  <seth@eazel.com>

	Fixed bug 7557 (Nautilus does not automatically start on GNOME
	startup after installation):

	* src/nautilus-first-time-druid.c (set_up_gmc_transition_page):
	don't display the `add nautilus to session' option
	
2001-03-08  John Harper  <jsh@eazel.com>

	reviewed by: Robin * Slomkowski <rslomkow@eazel.com>

	Fixed bug 7550 (SOLARIS: text drawn incorrectly in anti-aliased
	mode): 

	* configure.in: added `AC_C_BIGENDIAN' check - this means that
	the WORDS_BIGENDIAN macro gets defined on big-endian systems.
	This is required by at least the librsvg/arg_rgba.c file

2001-03-08  Eric Fischer  <eric@eazel.com>

	reviewed by: Don Melton <don@eazel.com>

	* src/run-nautilus:
	Change ps options to something that should work on any POSIX system,
	and add workaround for 4.4BSD systems' incompatible ps.

2001-03-08  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed and checked in by: Darin Adler <darin@eazel.com>

	Fix bug 7549 - Should block bookman and symbols fonts in older
	RedHat systems
	
	* libnautilus-extensions/nautilus-font-picker.c:
	Add 2 more fonts to the black list.  There were already in the
	list, but older RedHat systems name these fonts differently.

2001-03-08  John Harper  <jsh@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Tried to fix bug 7018 (Irreproducible segfaults in
	nautilus_tree_node_get_file): 

	* components/tree/nautilus-tree-view.c: add a reference to each
	NautilusTreeNode while in the unparented_tree_nodes lists
	(nautilus_tree_view_should_skip_file): skip the file if
	nautilus_file_is_gone () returns true

2001-03-08  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed 7500 (Dragging WebDAV file to Trash has no effect.)
	
	* libnautilus-extensions/nautilus-file-operations.c:
	* libnautilus-extensions/nautilus-file-operations.h:
	(nautilus_file_operations_move_to_trash):
	Got rid of the call.	

	* src/file-manager/fm-directory-view.c: (trash_callback),
	(fm_directory_view_can_move_uri_to_trash),
	(trash_or_delete_files_common),
	(fm_directory_view_trash_or_delete_files),
	(report_broken_symbolic_link),
	Got rid of callers to the eliminated nautilus_file_operations_move_to_trash,
	Rework the trash and move calls to all operate on uri strings rather than
	NautilusFile objects.
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_move_copy_items):
	Detect a move to Trash, handle it with trash_or_delete_files_common.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move),
	Added a FIXME.

2001-03-08  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Adam Elman  <aelman@eazel.com>

	* nautilus-installer/package-list.xml.in: Put in some line breaks
	to fix bug 7543 (Text on installer does not wrap in completion
	window).

2001-03-08  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix another part of bug 7494 (History sidebar component spews
	assertions when closing nautilus window [and sometimes crashes]):
	
	* libnautilus/nautilus-idle-queue.c: (execute_queued_functions):
	Change logic so that queued functions no longer execute once the
	caller destroys the queue.

	Fix bug 7564 (opening and quickly closing window in list view
	leads to core dump):

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy): Remove code to empty lists now that
	stop handles that.
	(load_error_callback): Added a FIXME about the fact that we throw
	away some pending files on an error.
	(fm_directory_view_stop): Don't display pending files any more.
	This is a problem when trying to destroy, and also the old code
	displayed only one "batch" of pending files, so it wasn't really
	making sure all the files were displayed anyway. If we re-add the
	code to display pending files here, we'll have to make sure it
	doesn't do this for the destroy case.
	* src/file-manager/fm-list-view.c: Added FIXME asking why the "add
	100 items at a time" logic is only needed for list view, and not
	for icon view. If both kinds of views had it, it could be done
	more simply at the FMDirectoryView level.

	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_get_icon_size_for_zoom_level): Fix this code so that it
	doesn't do a core dump if it gets a bad size. This is not the
	cause of the problem, but it's good to fix this too, because a
	core dump is overreacting to a bad parameter.

2001-03-08  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	* nautilus-installer/src/installer.c (start_logging): After
	creating log file and verifying safety (to avoid /tmp races), make
	it world-readable to fix bug 7544 (eazel-install.log created with
	read-only perms for root).

2001-03-08  Dan Mueth  <dan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Updated required version of ScrollKeeper to 0.1.4

	* configure.in:

	Added Vera's new version of Nautilus Quick Reference doc text.
	- Updated info on fast searching
	- layout improvements	
	Bug #: 7532,7439 

	* help/nautilus-quick-reference/C/index.html:

	Added Vera's Nautilus 1.0 Release Notes document.
	Bug #: 6257, 5825

	* help/nautilus-release-notes/C/nautilus-release-notes.sgml:

	Adding Vera's new version of Nautilus User Manual text.
	- Remove mention of RPM view since it isn't in this release
	Bug #: 7442 

	* help/nautilus-user-manual/C/nautilus-user-manual.sgml:

2001-03-07  John Harper  <jsh@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 7511 (Nautilus sometimes uses wrong home directory
	after going through druid):

	* src/nautilus-first-time-druid.c (druid_finished): move the
	call to set the user level preference to before the call that
	asks for the user's home URI

2001-03-07  Ramiro Estrugo  <ramiro@eazel.com>
 
 	reviewed by: John Sullivan <sullivan@eazel.com>
 
 	Fix bugs:
 
 	7349 - Sidebar tabs no longer display in a bold font
 	7477 - Sidebar tab labels don't update to new font when font is
 	changed
 	7492 - Font style regression on Sidebar title
 	
 	* libnautilus-extensions/nautilus-global-preferences.h:
 	* libnautilus-extensions/nautilus-global-preferences.c:
 	(nautilus_global_preferences_get_smooth_font): Add documentation
 	to clarify the fact that the result needs to be unrefed.
 	(nautilus_global_preferences_get_smooth_bold_font): New function
 	that returns a bold version of the user's preferred font.
 
 	* src/nautilus-sidebar-tabs.c:
 	(nautilus_sidebar_tabs_load_theme_data): Use the user's bold
 	preffered font instead of the default font. (bug 7349)
 	(smooth_font_changed_callback), (nautilus_sidebar_tabs_initialize),
 	(nautilus_sidebar_tabs_destroy): Listen for changes in the user's
 	preferred font and update the tabs accordingly (bug 7477)
 
 	* src/nautilus-sidebar-title.c: (smooth_font_changed_callback):
 	Use the user's bold preferred font instead of the plain one.  Also
 	unref the font when done to plug a tiny leak. (bug 7492)

2001-03-07  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 7494 (History sidebar component spews assertions when
	closing nautilus window (and sometimes crashes)):

	* components/history/nautilus-history-view.c: (update_history):
	Don't try to update the history list widget if it's already
	destroyed. Also handle the case where it's destroyed by an unref
	call coming in through CORBA inside the nautilus_bookmark_new
	function. This is a larger design problem, but this handles the
	case that's actually occurring.
	(nautilus_history_view_initialize): Ref the history list widget.
	(nautilus_history_view_destroy): Set the "destroyed" boolean if
	someone has connected one. Unref the history list widget.  Also,
	don't bother clearing it since it is going to be destroyed anyway.

	Fix bug 7514 (Intel/AMD branding on Hardware View CPU picture is
	not something we're authorized to use):

	* components/hardware/icons/cpu.png: Updated with new image from
	Arlo.
	
2001-03-07  John Harper  <jsh@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 7479 (Text for Intro Panel must be updated for 1.0):

	* src/nautilus-first-time-druid.c
	(nautilus_first_time_druid_show): updated the text on the first
	page

2001-03-07  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	* components/services/summary/nautilus-summary-view.c:
	(update_header), (generate_eazel_news_entry_row): Update title
	from services page and remove date stamp and icon per marketing
	requirements (bug 7476).

2001-03-07  John Harper  <jsh@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 7472 (Nautilus behavior after leaving first run
	druid):

	* src/nautilus-first-time-druid.c (http_is_known_to_work): new
	global variable - only ever set true if we know for sure that
	http connections will work

	(finished_label, update_finished_label,
	nautilus_first_time_druid_show): since we only launch the
	services window when http requests are known to work, make the
	text in the `Finished' page be conditional on that

	(next_update_page_callback, download_callback): call update
	finished_label

	(download_callback): set http_is_known_to_work to true if the
	connection succeeded

2001-03-06  Ian McKellar  <ian@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com> 

	* components/services/install-view/nautilus-service-install-view.c:
	(nautilus_install_service_add_menu_launchers):
	Fix bug 7429 - don't try to print the menu path if one does not
	exist.

Wed Mar 07 00:35:04 2001  George Lebl <jirka@5z.com>

	Ramiro Estrugo <ramiro@eazel.com> said without this patch
	life as we know it will cease to exist.

	* libnautilus-extensions/nautilus-preferences-box.c
	  (category_list_select_row_callback):  When getting the
	  category name, get it out of the correct row.
	  Fixes #7482

2001-03-06  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: reviewed by: Darin Adler <darin@eazel.com>

	Workaround hack for the following bugs:

	7352 - Theme selector description labels missing in ja_JP locale.
	7354 - First time druid title doesnt properly display in the ja_JP
	locale.
	
	* libnautilus-extensions/nautilus-gdk-font-extensions.c:
	(nautilus_gdk_font_get_italic), (nautilus_gdk_font_get_bold),
	(nautilus_gdk_font_get_larger),
	(nautilus_gdk_font_get_largest_fitting):
	For multibyte locales, always return the source font.  This is a
	workaround for bug 7350.  We will fix 7350 properly in 1.2.

	* libnautilus-extensions/nautilus-glib-extensions.h:
	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_dumb_down_for_multi_byte_locale_hack):
	New function to determine if we need to dumb down some things for
	multi byte locales.  Currently this is only limited to bold text
	and possible larger text in the sidebar, first time wizard and
	theme selector.

	* src/nautilus-first-time-druid.c: (new_title_label):
	For multibyte locales, dont force the label to be smooth so that
	it works in more systems.

2001-03-06  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 7400 - Assertions in NON smooth font picker, and font
	doesn't change.
	
	* libnautilus-extensions/nautilus-preferences-item.c:
	(preferences_item_create_font_family),
	(font_family_item_changed_callback):
	Replace text_item_changed_callback with
	font_family_item_changed_callback and have the new callback deal
	with the string picker properly.  Im not sure where
	text_item_changed_callback came from, but it was assuming that the
	target was a NautilusCaption and not a NautilusStringPicker.

2001-03-06  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 7475 (No applications are offered in sidebar for local
	files):

	* libnautilus-extensions/nautilus-mime-actions.c:
	(application_supports_uri_scheme_strcmp_style): Renamed
	function so it's more clear how it relates to the existing
	one and share code with the existing one, because that
	one handles the "file" special case (and this one needs to).
	(nautilus_mime_has_any_applications_for_file): Change to
	use function by new name.
	(application_supports_uri_scheme): Use case-insensitive
	comparisons since URI schemes are case insensitive.

2001-03-06  John Harper  <jsh@eazel.com>

	Merged change from `nautilus-1' branch:

	reviewed by: Pavel Cisler <pavel@eazel.com>
	
	Fix 7455 (Intermittent crash when opening trash folder):

	* libnautilus-extensions/nautilus-trash-file.c:
	(trash_callback_check_done), (trash_file_call_when_ready):

	Added an "initializing" field to TrashCallback object. This
	is set while connecting the call_when_ready callbacks in
	trash_file_call_when_ready (). trash_callback_check_done ()
	checks this flag and only succeeds when it's false.

2001-03-06  Eric Fischer  <eric@eazel.com>

	reviewed by: Robin * Slomkowski <rslomkow@eazel.com>

	* nautilus-installer.spec.in:
	Also include uncompressed, unstripped eazel-installer.

	* nautilus-installer/src/Makefile.am:
	Install uncompressed, unstripped eazel-installer rather than
	discarding it.

	* nautilus-installer/src/create-eazel-installer.sh:
	Only strip the copy of the installer that is to be compressed.

2001-03-06  Pavel Cisler  <pavel@eazel.com>

	reviewed by: John Harper <jsh@eazel.com>

	Fix 7471 (Crash when drag selecting)
	* libnautilus-extensions/nautilus-icon-container.c:
	(rubberband_timeout_callback):
	Make the selection rectangle never be less than 1 pixel
	high and 1 pixel wide. This fixes the crash and looks better.

2001-03-06  Eskil Heyn Olsen  <eskil@eazel.com>	


	reviewed by: Robey Pointer <robey@eazel.com>

	Fixes 7215 (in the HEAD)
	
	* components/services/install/lib/eazel-install-logic2.c:
	(prune_failed_packages_helper):
	Fixed a logic error from yesterday (doh, need rest) that would
	cause unwanted pruning of packages. I should be spanked.
	
2001-03-06  Darin Adler  <darin@eazel.com>

	* README: Note that we now use gnome-vfs HEAD, not a branch
	any more.

2001-03-06  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 7328 (info pages no longer work):
	
	* components/help/converters/gnome-info2html2/main.c: (main):
	Fixed broken logic for handling both bzip and gzip.

	Fixed case when you change "View As" before the view change is
	complete.
	
	* src/nautilus-window-manage-views.c:
	(nautilus_window_set_content_view): Stop the view change if you
	make a change with the "View As" menu.

Tue Mar 06 12:24:24 2001  George Lebl <jirka@5z.com>

	Darin <darin@eazel.com> said that while this patch causes fungal
	growth between the toes, it is ok to apply.

	* components/tree/nautilus-tree-view-dnd.c (do_get_data)
	  (nautilus_tree_view_drag_drop)
	  (nautilus_tree_view_ensure_drag_data)
	  libnautilus-extensions/nautilus-icon-dnd.c (do_get_data)
	  (nautilus_icon_container_ensure_drag_data)
	  (drag_drop_callback)
	  libnautilus-extensions/nautilus-list.c (do_get_data)
	  (nautilus_list_ensure_drag_data)
	  (nautilus_list_drag_drop):
	  When doing gtk_drag_get_data, first find a target we support rather
	  then just grabbing the first one.  We need to make a target list
	  and do some gtk voodoo.  At some later date, this should be more
	  generalized and stuffed somewhere in libnautilus-extentions.
	  Fixes #7312

	* libnautilus-extensions/nautilus-file-operations.c
	  (parse_previous_duplicate_name):  s/strdup/g_strdup/ as the
	  string will be later g_free'd
	  Fixes #7440

2001-03-06  Eric Fischer  <eric@eazel.com>

	reviewed by: Christian Meyer <chrisime@gnome.org>

	(Bug 7315.  Thanks to Christian Meyer for tracking down
	places where this needed to be fixed.)

	* components/help/converters/gnome-db2html2/Makefile.am:
	* components/help/converters/gnome-info2html2/Makefile.am:
	* cut-n-paste-code/widgets/e-paned/Makefile.am:
	* cut-n-paste-code/widgets/gimphwrapbox/Makefile.am:
	* cut-n-paste-code/widgets/nautilusclist/Makefile.am:
	* libnautilus-extensions/Makefile.am:
	In all of these, change GNOME_CFLAGS to GNOMEUI_CFLAGS so that
	they get the correct #include path for the GTK headers.

2001-03-06  Michael Engber  <engber@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* libnautilus-extensions/nautilus-bonobo-extensions.h:
	Added NAUTILUS_BONOBO_X_BOILERPLATE.

	* libnautilus-extensions/nautilus-directory-metafile-monitor.c:
	(nautilus_metafile_monitor_class_init),
	(nautilus_metafile_monitor_init):
	* libnautilus-extensions/nautilus-directory-metafile-monitor.h:
	* libnautilus-extensions/nautilus-metafile-factory.c:
	(nautilus_metafile_factory_class_init),
	(nautilus_metafile_factory_init):
	* libnautilus-extensions/nautilus-metafile-factory.h:
	* libnautilus-extensions/nautilus-metafile.c:
	(nautilus_metafile_class_init), (nautilus_metafile_init):
	* libnautilus-extensions/nautilus-metafile.h:
	Switched NautilusMetafile, MetafileMonitor, and Metafile factory
	to be based on BonoboXObject - this causes our corba object to
	get freed properly - bug 7335.

2001-03-06  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 7435 (text view spews complaints whenever a text view is
	destroyed):

	* components/text/nautilus-text-view.c:
	(nautilus_text_view_initialize): Ref the widget that gets text so
	that we can notice if it's destroyed.
	(detach_file): Get rid of unneeded NULL check.
	(nautilus_text_view_destroy): Unref the widget.
	(file_read_callback): Don't insert any text if the widget is
	already destroyed. The widget can be destroyed before the
	NautilusView object is.
	(handle_service_menu_item): Add FIXME about sync. I/O.
	(nautilus_text_view_set_font): Add FIXME about strange font
	handling.

2001-03-06  Dan Mueth  <dan@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com> 

	Updating data file which determines which documents appear
	in the "Introductory Documents" section of the help sidebar.
	It now includes all locales of each doc.
	Bug#: 7267

	* components/help/topleveldocs.xml:

	Fixing font problem for titles.
	Bug#: 7210

	* help/nautilus-quick-reference/es/index.html:
	* help/nautilus-quick-reference/no/index.html:

	Fixing screenshots in Swedish version of Nautilus
	Quick Reference.  Now the links aren't broken at least.
	They still aren't localized though.
	Bug#: 7422

	* help/nautilus-quick-reference/sv/Makefile.am:
	* help/nautilus-quick-reference/sv/figures/colors_small.png:
	* help/nautilus-quick-reference/sv/figures/emblems.png:
	* help/nautilus-quick-reference/sv/figures/emblems_small.png:
	* help/nautilus-quick-reference/sv/figures/ff_small.png:
	* help/nautilus-quick-reference/sv/figures/find.png:
	* help/nautilus-quick-reference/sv/figures/find_small.png:
	* help/nautilus-quick-reference/sv/figures/full.png:
	* help/nautilus-quick-reference/sv/figures/full_small.png:
	* help/nautilus-quick-reference/sv/figures/locbar.png:
	* help/nautilus-quick-reference/sv/figures/locbar_small.png:
	* help/nautilus-quick-reference/sv/figures/menubar.png:
	* help/nautilus-quick-reference/sv/figures/menubar_small.png:
	* help/nautilus-quick-reference/sv/figures/music.png:
	* help/nautilus-quick-reference/sv/figures/music_small.png:
	* help/nautilus-quick-reference/sv/figures/navbar.png:
	* help/nautilus-quick-reference/sv/figures/navbar_small.png:
	* help/nautilus-quick-reference/sv/figures/patterns.png:
	* help/nautilus-quick-reference/sv/figures/sidebar.png:
	* help/nautilus-quick-reference/sv/figures/sidebar_small.png:
	* help/nautilus-quick-reference/sv/figures/themes.png:
	* help/nautilus-quick-reference/sv/figures/themes_small.png:
	* help/nautilus-quick-reference/sv/figures/viewmenu.png:

	--- end of what mjs reviewed

	Fixing these screenshots so they render correctly in some
	browsers.  Replacing a screenshot in a doc with another can't break
	Nautilus :)
	Bug#: 7434

	* help/nautilus-quick-reference/C/figures/music.png:
	* help/nautilus-quick-reference/C/figures/navbar.png:
	* help/nautilus-quick-reference/C/figures/softcat.png:
	* help/nautilus-quick-reference/C/figures/storage.png:

	Change one line of a doc to make it more correct.  Again,
	there is no way this can break anything, so I'm taking responsibility
	for this.

	* help/nautilus-quick-reference/sv/index.html:


2001-03-06  Darin Adler  <darin@eazel.com>

	* nautilus.spec.in: RPM view also has to be removed from the RPM
	spec file.

2001-03-06  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	* po/POTFILES.in:
	Woops, forgot to remove the rpmview from potfiles.

2001-03-05  Ian McKellar  <ian@eazel.com>

	* components/services/inventory/eazel-inventory-collect-software.c:
	(eazel_inventory_collect_software):
	Use shorter distribution name. (Fixing urgent stuff for the update
	service)

2001-03-05  Ian McKellar  <ian@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com> who isn't even here or
	online...

	* components/services/inventory/eazel-inventory-utils.c:
	(eazel_create_configuration_metafile):
	Disable hardware inventory collection for 1.0. This fixes bug 7305.

2001-03-05  George Lebl <jirka@5z.com>

	Ian McKellar <ian@eazel.com> said this patch will end global
	hunger and bring about world peace.

	* components/help/hyperbola-filefmt.c (fmt_toplevel_add_doc):
	  g_strdup and not strdup if we're going to g_free.
	  Fixes #7414 

	* components/help/hyperbola-filefmt.c (locale_score)
	  (is_new_locale_better) (fmt_toplevel_parse_xml_tree)
	  (fmt_toplevel_populate_tree) (get_path_from_node):
	  When looking at the toplevels documents XML tree, score different
	  paths for a document according to the position of the locale in the
	  language list that was gotten from gnome_i18n_get_language_list.
	  fmt_toplevel_parse_xml_tree now returns TRUE/FALSE for better
	  detection of unparsable files then before.  Also check if the file
	  exists and is readable before adding it to the tree.
	  Fixes #7311, #7314

	* components/help/converters/gnome-info2html2/main.c (main):
	  the "bz" integer is only used when HAVE_LIBBZ2 is on, and it's
	  not for me, so put it into the HAVE_LIBBZ2 define protected code.
	  Fixes #7417

2001-03-05  Eskil Olsen  <eskil@eazel.com>

	reviewed by: Mike Fleming <mfleming@eazel.com> who almost feels
	bad about it...

	"Fixes" bug 7413
	
	* components/Makefile.am:
	Removed the rpmview from build.

2001-03-05  Eskil Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer <robey@eazel.com> who sez "yup".

	Fixed bug 7070.
	
	* components/rpmview/nautilus-rpm-view-install.c:
	(get_detailed_errors), 
	Flipped the meaning of the third argument.
	(nautilus_rpm_view_install_failed),
	s/TRUE/FALSE
	(nautilus_rpm_view_uninstall_failed),
	s/FALSE/TRUE
	(nautilus_rpm_view_dependency_check):
	use packagedata_get_readable_name instead of doing it myself.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(prune_failed_packages_helper):
	
	Ugh, I did not traverse down down into ALREADY_INSTALLED packages,
	and I had flipped the change of status for suite_ids. So I added
	some enum logic so ALREADY_INSTALLED (hence also suite_id's) get
	their dependencies pruned.

	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_uninstall_messages_foreach):
	I committed the sin of changing an i18n string..

2001-03-05  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Ramiro Estrugo  <ramiro@eazel.com>
	
	Fix 7404: Clicking on "Install" in Eazel services fails.

	* libnautilus-extensions/nautilus-font-manager.c:
	(gnome_vfs_init_if_needed), (nautilus_font_manager_for_each_font),
	(nautilus_font_manager_file_is_scalable_font):
	Add lazy GnomeVFS initialization because the nautilus font manager
	code now makes GnomeVFS calls.

2001-03-05  Brian Frank  <bfrank@eazel.com>

	* data/static_bookmarks.xml:

	Changed LWN.net bookmark to Linux Weekly News

2001-03-05  Andy Hertzfeld  <andy@eazel.com>

	* components/throbber/nautilus-throbber.c:
	(nautilus_throbber_initialize), (draw_throbber_image),
	(nautilus_throbber_size_allocate),
	(nautilus_throbber_size_request):

	fixed bug 5640, toolbar area below throbber drawn different from theme
	for some gtk themes.  Fixed by having the throbber clear its 
	entire gdk window to the background.
	
2001-03-05  Eric Fischer  <eric@eazel.com>

	reviewed by: Robin * Slomkowski <rslomkow@eazel.com>

	* configure.in:
	Explicitly run gtk-config to get GTK's cflags, because
	$GNOMEUI_CFLAGS aren't enough for people who've upgraded
	to GTK 1.2.9.  (Bug 7315)

2001-03-05  Rebecca Schulman  <rebecka@eazel.com>
	Complete work for 5520, that cron should be running
	for medusa to work.

	reviewed by: <delete if not using a buddy>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_use_fast_search_changed_callback):
	Change the text to Vera's final copy.
	* src/nautilus-first-time-druid.c: (druid_finished),
	(back_update_page_callback), (set_up_medusa_page),
	(next_medusa_page_callback), (set_up_cron_information_page),
	(nautilus_first_time_druid_show):
	Change the text to Vera's final copies, make medusa update
	correctly when medusa is turned on in the first time druid

2001-03-05  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: John Harper  <jsh@eazel.com>

	Fix bug 7391 (The logon dialog box for services has input boxes
	larger that the dialog can contain)

	* components/services/summary/nautilus-summary-dialogs.c
	(nautilus_summary_show_login_dialog): Remove the line that was
	setting a hardcoded width.

2001-03-05  Eric Fischer  <eric@eazel.com>

	reviewed by: Don Melton <don@eazel.com>

	* nautilus.spec.in:
	Add share/pixmaps/nautilus/crux_eggplant/throbber/*.png
	to the list of files to be put in the RPM (Bug 7383).

2001-03-05  John Harper  <jsh@eazel.com>

	Fixed bug 7402 (Fonts that don't define ` ' cause assertions
	and squash words together):

	* librsvg/rsvg-ft.c (rsvg_ft_measure_or_render_string): force
	the width of the returned glyph to be at least one pixel

	* librsvg/rsvg-ft.c (rsvg_ft_get_glyph_cached): added extra
	arg `cache_ix'. Used when accessing the glyph cache. The old
	`glyph_ix' arg is only used when accessing the physical font
	(this allows a cached glyph to be created from a different
	physical glyph)

	(rsvg_ft_measure_or_render_string): if the character is a ` '
	and has a glyph index but doesn't have an actual glyph
	definition, create one by caching the glyph for `-' as ` ' and
	zeroing its pixel buffer

2001-03-05  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>
	who said it was "most excellent"

	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_get_info):

	When parsing softcat responses, check if we were doing a suite
	lookup even if only one package was returned.  (Suites consisting
	of only one package were getting returned as if it was a toplevel
	package with both suite_id and rpm_id set.)

2001-03-05  Arik Devens  <arik@eazel.com>

	reviewed by: Ramiro Estrugo  <ramiro@eazel.com>

	Fixed bug 7377, Hit a g_return_val_if_fail when selecting "Marlet"
	font.
	
	* libnautilus-extensions/nautilus-font-picker.c: Added Marlett to
	the list of black listed font families.

2001-03-05  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 7363 (change to smooth font choice doesn't affect
	sidebar in currently open windows)

	* src/nautilus-sidebar-title.c: 
	(smooth_font_changed_callback): New callback, gets the smooth
	font preference and tells the two NautilusLabels to use it.
	(nautilus_sidebar_title_initialize): Register callbacks
	for the anti-aliased and non-anti-aliased fonts changing.
	(nautilus_sidebar_title_destroy): Remove new callbacks.
	(update_all_cover): Renamed from smooth_graphics_mode_changed_callback
	since it's now used for more than just that.

2001-03-05  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: John Harper  <jsh@eazel.com>

	* libnautilus-extensions/nautilus-font-picker.c:
	More black listed fonts.  Fixes bug 7384.
	
2001-03-05  John Harper  <jsh@eazel.com>

	reviewed by: Ramiro Estrugo <ramiro@eazel.com>

	Fixed bug 7380 (Nautilus crashes when I choose "Microsoft Sans
	Serif" font):

	* librsvg/rsvg-ft.c (rsvg_ft_measure_or_render_string):
	initialize y components of bbox. Don't call
	rsvg_ft_get_glyph_cached with a zero index (non-existent
	glyph). Use `n_glyphs' to index `glyph_xy' array instead of
	`i' (this is what fixes the bug - when one or more glyphs don't
	exist `i' points too far into the array)

2001-03-03  Rebecca Schulman  <rebecka@eazel.com>
	Complete most of bug 5520, that turning medusa on when cron
	isn't running should tell the user this, and, if possible,
	how to start cron.

	reviewed by: Mike Engber <engber@eazel.com>

	
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_use_fast_search_changed_callback):
	Add dialog that comes up if the fast search preference is 
	enabled in the preference dialog when cron is off.
	The dialog will tell the user about cron and how to
	turn it on on linux systems.

	* libnautilus-extensions/nautilus-medusa-support.c:
	(nautilus_medusa_add_system_state_changed_callback),
	(nautilus_medusa_check_cron_is_enabled):
	* libnautilus-extensions/nautilus-medusa-support.h:
	Add hack to check if cron is actually running using cron.
	* acconfig.h:
	* configure.in:
	Add HAVE_PROC_PROCESS_FILES, so we know whether we can
	check proc files for whether cron is running

	* src/nautilus-first-time-druid.c: (back_update_page_callback),
	(set_up_medusa_page), (next_medusa_page_callback),
	(set_up_cron_information_page), (nautilus_first_time_druid_show):
	Add cron interface to the first time druid that tells users how to
	turn on cron if necessary, as per Arlo's design.
	Final text still needs to be added here.


	* libnautilus-extensions/nautilus-mime-actions.c:
	(application_can_handle_uri),
	(nautilus_mime_has_any_applications_for_file),
	(nautilus_mime_has_any_applications_for_file_type):
	* libnautilus-extensions/nautilus-mime-actions.h:
	* libnautilus-extensions/nautilus-program-choosing.c:
	(choose_application_callback), (application_cannot_open_location):
	Old change that never got committed, reviewed by Darin Adler 
	<darin@eazel.com>
	

2001-03-05  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 7348 (duplicate styles in some fonts)

	* libnautilus-extensions/nautilus-font-picker.c:
	(font_style_entry_free): New function (extracted from
	global_font_list_free).
	(global_font_list_free): Use extracted function.
	(list_contains_style): New function, looks for matching
	font_file_name.
	(global_font_list_populate_callback): free style rather
	than appending to list if an equivalent is already in list.

2001-03-05  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fix for bugs 7375 and 7370.
	
	* libnautilus-extensions/nautilus-font-manager.c:
	(font_ignore_directory): Black list the ISO8859-2 and ISO8859-7
	encoded fonts which it turns out are missing all kinds of glyphs.
	Also add another instance of the same Abisource fonts, but from an
	older package that had a slightly different name.
	
	* libnautilus-extensions/nautilus-font-picker.c:
	Black list the Bookmark URW font which causes crashes on old
	version of the urw package.
	
2001-03-05  John Harper  <jsh@eazel.com>

	reviewed & checked in by: Darin Adler <darin@eazel.com>

	Fix bug 7389 (crash when starting nautilus):

	* libnautilus-extensions/nautilus-directory-background.c
	(nautilus_background_get_desktop_background_window): check if
	the `icon_container' object data (a GtkLayout widget) is
	non-null before dereferencing it

	(image_loading_done_callback): only pass result of
	nautilus_background_get_desktop_background_window to
	gdk_window_set_back_pixmap if it's non-null

2001-03-05  Arik Devens  <arik@eazel.com>

	reviewed by: Robin * Slomkowski  <rslomkow@eazel.com>

	Fixed bug 6616, foot menu icon does not launch nautilus on some
	users' systems.
	
	* nautilus.spec.in: Fix to the userid and groupid we install our
	help files as to cause --verify to stop failing.

2001-03-05  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 7381 (warning every time I start Nautilus because my
	/usr/share/fonts/default/Type1/fonts.dir has no fonts in it):
	
	* libnautilus-extensions/nautilus-font-manager.c:
	(font_description_table_new): Tolerate files with 0 fonts in them,
	but don't tolerate files where the count is > than the number of
	lines in the file.

	Fix bug 7362 (two font menus appear in preferences in non-smooth
	mode):
	
	* libnautilus-extensions/nautilus-global-preferences.c:
	(appearance_pane_update): Fix spelling error.
	(global_preferences_create_font_group): Fix wrong variable name
	and spelling error.
	
	* libnautilus-extensions/nautilus-string-list.c:
	Fix spelling error ("supress" -> "suppress").

2001-03-05  John Harper  <jsh@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fixed bug 7374 (Crash in font cache code after changing fonts
	many times):

	* librsvg/rsvg-ft.c (rsvg_ft_font_evict): check if victim->font
	is null before freeing it

2001-03-05  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 7303 (some menu items use duplicate, thus
	non-working, underline accelerators)

	* src/file-manager/nautilus-directory-view-ui.xml:
	New _Folder -> _New Folder to avoid conflict with _Find.
	_Open in New Window -> Open _in New Window to avoid conflict
	with _Open.
	Open With -> Open Wit_h
	_Select All Files -> Select _All Files to avoid conflict with
	_Stretch Icon
	
	* src/nautilus-shell-ui.xml:
	_New Window -> New _Window to avoid conflict with _New Folder.
	_Web Search -> We_b Search to avoid conflict with New _Window.
	_Select All -> Select _All to avoid conflict with _Stretch Icon
	Hide Sidebar -> Hide _Sidebar
	Hide Toolbar -> Hide _Toolbar
	Hide Location Bar -> Hide Location _Bar
	Hide Status Bar -> Hide St_atus Bar

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Open in <n> _New Window(s) -> Open _in <n> New Windows to match xml.
	
	* src/nautilus-window-menus.c:
	(nautilus_window_update_show_hide_menu_items):
	Add Show/Hide xxx accelerators to match xml.

2001-03-05  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-font-manager.c:
	(nautilus_self_check_font_manager):
	Comment out the font manager checks out again!  Tinderbox wins
	this round, but ill be back with a fix for bug 7343 and fix the
	problem properly once and for all.
	
2001-03-05  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Glynn Foster  <glynn.foster@ireland.sun.com>

	No significant code changes.  Just adding bug numbers to FIXMEs.
	The only real code change (which happens to be a commenting out of
	something) is a workaround for a tinderbox problem.
	
	* libnautilus-extensions/nautilus-font-factory.c:
	(nautilus_font_factory_get_font_by_family):
	Bug number for FIXME.
	
	* libnautilus-extensions/nautilus-font-manager.c:
	(nautilus_font_manager_get_default_font),
	(nautilus_font_manager_get_default_bold_font):
	Bug number for FIXME.
	Comment out the SOURCE_DATADIR font hack until it works better.
	Fixes broken tinderbox checks.  Checks will still run even if not
	with the optimal setup.  I have an idea how to fix this later
	using a configure.in hack.  Added FIXME and bug number for this
	issue.
	
	* libnautilus-extensions/nautilus-glyph.c:
	(nautilus_glyph_draw_to_pixbuf):
	Bug number for FIXME.

	* libnautilus-extensions/nautilus-icon-container.c:
	Bug number for FIXME and reworked FIXME blurb to match bug report.

	(nautilus_icon_container_initialize):
	* libnautilus-extensions/nautilus-scalable-font.c:
	(nautilus_scalable_font_get_default_font),
	(nautilus_scalable_font_get_default_bold_font):
	Bug number for FIXMEs.

2001-03-05  Dan Mueth  <dan@eazel.com>

	Removed Eazel logo from screenshot.

	* help/nautilus-quick-reference/C/figures/music.png:

2001-03-05  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fix bug 5813 - Remove workaround for bug 5712 when both GTK+ 1.2.9
	and the new gdk-pixbuf are released and required by configure.in
	and RPM spec file
	
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/bug-5712-pr3-workaround--gdk-pixbuf-drawable.c:
	* libnautilus-extensions/bug-5712-pr3-workaround--gdk-pixbuf-private.h:
	* libnautilus-extensions/bug-5712-pr3-workaround--gdkimage.c:
	Retire these workaround cut n pasted code.
	
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(nautilus_gdk_pixbuf_get_from_window_safe):
	Remove the workaround, we can safely call the gdk and gdk-pixbuf
	calls now that bugs in there have been fixed.
	
2001-03-04  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: George Lebl  <jirka@5z.com>
	             Ramiro Estrugo  <ramiro@eazel.com>

	Fixed bug 7336 ("View as Text" not a choice for remote web pages)

	* components/text/Nautilus_View_text.oaf.in: Removed attribute
	limiting this view's applicability to the "file:" URI scheme, thus
	fixing bug 7336.

	* components/text/nautilus-text-view.c (file_read_callback):
	Remove some incorrect checks that made this component only load
	the first chunk of text for remote files; this bug was uncovered
	in the process of fixing 7336.

2001-03-05  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>
		     Maciej Stachowiak  <mjs@eazel.com>

	Bugs:

	6368 - Multibyte font handling in non smooth mode.
	2673 - Need to hook up the new font picker to nautilus
	1274 - Add support for picking a custom font
	
	* components/history/Makefile.am:
	* components/history/nautilus-history-view.c: (main):
	Initialize gettext for the history component so it can display
	localized strings.

	* components/notes/nautilus-notes.c: (make_notes_view):
	Set the notes widget font from preferences so it can be properly
	localized.
	
	* components/text/nautilus-text-view.c:
	(nautilus_text_view_set_font):
	Use the localized font name to make this work in locales other
	than the default.
	
	* libnautilus-extensions/Makefile.am:
	Add a macro for finding data on the source tree for the situation
	when 'make install' has not be run.
	
	* libnautilus-extensions/nautilus-font-factory.c:
	(nautilus_font_factory_get_font_by_family): Workaround the problem
	that fully qualified localized fonts were being processed
	incorrectly.  We simply leave them alone now.
	(nautilus_font_factory_get_font_from_preferences): Use the
	localized font string to make this work on more locales.

	* libnautilus-extensions/nautilus-font-manager.h:
	* libnautilus-extensions/nautilus-font-manager.c:
	(font_description_table_find): New function to find a description
	in a table.
	(font_description_table_for_each): Change the return value to a
	boolean to indicate whether to stop the iteration or not.  Switch
	the order of an assert and assigned.
	(collect_fonts_from_directory): Use macros for the mime type
	strings.
	(font_ignore_directory): Add more directories to ignore.
	(font_manager_collect_font_tables): Change prepend to append to
	get fonts in a better order (fallback and user fonts first)
	, (font_table_list_find),
	(free_font_tables), (ensure_global_font_table),
	(nautilus_font_manager_for_each_font): Use just one global table
	for all fonts instead of 3.
	(nautilus_font_manager_get_default_font): Compute the default
	dynamically to take user choices into account.  Make it work on
	non installed nautilus builds.
	(nautilus_font_manager_get_default_bold_font): Same as above for a
	bold font.
	(nautilus_font_manager_file_is_scalable_font): New function to
	check that a file is really a scalable font:
	(font_list_find_bold_callback), (nautilus_font_manager_get_bold),
	(nautilus_font_manager_weight_is_bold): New functions to find a
	bold font in the global tables.
	(nautilus_self_check_font_manager): Make it work on not installed
	nautilus builds and remove the hack where checks would on run for
	the "ramiro" user.

	* libnautilus-extensions/nautilus-font-picker.c:
	(nautilus_font_picker_initialize), (font_list_find),
	(font_picker_update_styles), (font_picker_populate),
	(font_picker_font_changed_callback),
	(font_picker_style_changed_callback), (font_find_style),
	(ignore_font), (font_make_name), (font_make_style),
	(global_font_list_free), (font_list_count_families),
	(global_font_list_get), (global_font_list_populate_callback),
	(nautilus_font_picker_get_selected_font),
	(nautilus_font_picker_set_selected_font):
	Make the font list global and not per widget instance.  Use better
	labels for the font styles.  Use better labels for font names
	(foundry and family vs just family depending on how many families
	of the same font are found)

	* libnautilus-extensions/nautilus-global-preferences.h:
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_font_defaults): Add new smooth font
	preference for the icon container.
	(nautilus_global_preferences_get_smooth_font): New function to
	safely get a smooth font out of preferences.
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize): Use the localized version of
	the font strings and add a FIXME for the problem of checking these
	in many disparate places in nautilus.

	* libnautilus-extensions/nautilus-program-chooser.c:
	(program_file_pair_get_program_name_for_display): Use the
	localized version of the application name strings.

	* libnautilus-extensions/nautilus-scalable-font.h:
	* libnautilus-extensions/nautilus-scalable-font.c:
	(nautilus_scalable_font_initialize_class),
	(nautilus_scalable_font_initialize),
	(nautilus_scalable_font_destroy), (nautilus_scalable_font_new),
	(nautilus_scalable_font_make_bold),
	(nautilus_scalable_font_get_default_font),
	(nautilus_scalable_font_get_default_bold_font),
	(free_global_font_handle_table),
	(initialize_global_stuff_if_needed),
	(nautilus_scalable_font_get_rsvg_handle):
	Simplify this class a lot by using the font manager.  No longer
	need to manage font lookup and queries.
	
	* libnautilus-extensions/nautilus-smooth-text-layout-cache.c:
	(nautilus_self_check_smooth_text_layout_cache): Fix a comment.
	Dont hardcode the font family.  Use the default font.  Remove the
	#ifdef hacker for "before make install fonts broken" problem which
	is now fixed.

	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(directory_view_smooth_font_changed_callback),
	(fm_directory_view_initialize), (fm_directory_view_destroy):
	Add method for responding to changes in the smooth font for AA
	mode of the icon container.
	
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_smooth_font_changed),
	(fm_icon_view_initialize_class),
	(fm_icon_view_update_icon_container_smooth_font),
	(create_icon_container):
	Add support for responding to change in the smooth font.  Update
	the icon container's smooth font on such changes.
	
	* src/nautilus-about.c: (nautilus_about_draw_info):
	Change the offset of the "Nautilus" title which broken when jsh
	make glyphs render properly taking the baseline into account.
	
	* src/nautilus-sidebar-title.c: (update_font):
	Use the localized font name.
	
	* src/nautilus-sidebar.c: (nautilus_sidebar_add_panel),
	(nautilus_sidebar_remove_panel):
	Use the localized sidebar tabs descriptions.
	
	* src/nautilus-window.c: (create_view_as_menu_item):
	Use the localized "View as" labels.
	
	* test/test-nautilus-font-manager.c: (font_iterator_callback):
	* test/test-nautilus-font-picker.c: (update_font),
	(font_changed_update_label_callback),
	(font_changed_update_file_name_callback),
	(use_defalt_font_callback), (use_defalt_bold_font_callback),
	(use_defalt_font_update_picker_callback),
	(use_defalt_bold_font_update_picker_callback), (main):
	* test/test.c: (test_quit):
	Updates for changes in font manager and font picker.
	
2001-03-05  Dan Mueth  <dan@eazel.com>

	reviewed by: Ramiro Estrugo  <ramiro@eazel.com>

	Updating contents of "Introductory Documents" at top of
	help sidebar to include the GNOME User Guide.
	Bug#: 7267

	* components/help/topleveldocs.xml:

	Adding version 1.0 of Vera's Nautilus Quick Reference.
	Bug#: 7210

	* help/nautilus-quick-reference/C/Makefile.am:
	* help/nautilus-quick-reference/C/figures/colors_small.png:
	* help/nautilus-quick-reference/C/figures/emblems.png:
	* help/nautilus-quick-reference/C/figures/emblems_small.png:
	* help/nautilus-quick-reference/C/figures/ff_small.png:
	* help/nautilus-quick-reference/C/figures/find.png:
	* help/nautilus-quick-reference/C/figures/find_small.png:
	* help/nautilus-quick-reference/C/figures/full.png:
	* help/nautilus-quick-reference/C/figures/full_small.png:
	* help/nautilus-quick-reference/C/figures/locbar.png:
	* help/nautilus-quick-reference/C/figures/locbar_small.png:
	* help/nautilus-quick-reference/C/figures/menubar.png:
	* help/nautilus-quick-reference/C/figures/menubar_small.png:
	* help/nautilus-quick-reference/C/figures/music.png:
	* help/nautilus-quick-reference/C/figures/music_small.png:
	* help/nautilus-quick-reference/C/figures/navbar.png:
	* help/nautilus-quick-reference/C/figures/navbar_small.png:
	* help/nautilus-quick-reference/C/figures/patterns.png:
	* help/nautilus-quick-reference/C/figures/sidebar.png:
	* help/nautilus-quick-reference/C/figures/sidebar_small.png:
	* help/nautilus-quick-reference/C/figures/themes.png:
	* help/nautilus-quick-reference/C/figures/themes_small.png:
	* help/nautilus-quick-reference/C/figures/viewmenu.png:
	* help/nautilus-quick-reference/C/index.html:

	Changing so that ownership of $(prefix)/share/omf/nautilus
	is Nautilus - ie. it doesn't hang around after Nautilus
	is removed.

	* nautilus.spec.in:

2001-03-04  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(add_to_dedupe_hash), (post_get_softcat_info),
	(dedupe_foreach_depends), (check_if_modification_is_ok),
	(do_requirement_consistency_check_package),
	(do_requirement_consistency_check_internal),
	(check_if_related_package), (check_if_modified_related_package),
	(check_tree_helper), (add_file_conflict),
	(check_no_two_packages_has_same_file),
	(check_conflicts_against_already_installed_packages),
	(check_feature_consistency), (do_file_conflict_check),
	(eazel_uninstall_upward_traverse),
	(eazel_uninstall_check_for_install):

	Mark packages that have had check-existing done on them, so we can
	check them on each round and not miss any packages or check any
	twice.  Dedupe packages even if they don't have softcat info yet
	(their dupe might).  During consistency checking, don't bother to
	check packages that are elsewhere in the tree -- assume we handled
	them correctly already.  Split check_if_related_package into two
	pieces, so we can re-use the first half when adding file
	conflicts.  This way, we can avoid marking file conflicts between
	two related packages (rpm4 allows this, for better or worse).
	Prune dead packages after the file conflict checks.  Make a
	passing reference to an unused softcat flag just to annoy Robey.
	Automatically add related packages to the tree during uninstall.
	This fixes bug 7245 and at least one other bug.

2001-03-04  Dan Mueth  <dan@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Updated the Nautilus User Manual from v0.9 to v1.0.
	Note that the file TRACKED_CHANGES details the changes
	between the two versions, for use by translators.
	There are some new screenshots.

	Bug#:7271

	* help/nautilus-user-manual/C/Makefile.am:
	* help/nautilus-user-manual/C/TRACKED_CHANGES:
	* help/nautilus-user-manual/C/figures/custicon.png:
	* help/nautilus-user-manual/C/figures/full-1.png:
	* help/nautilus-user-manual/C/figures/full-2.png:
	* help/nautilus-user-manual/C/figures/full-3.png:
	* help/nautilus-user-manual/C/figures/full-4.png:
	* help/nautilus-user-manual/C/figures/full-5.png:
	* help/nautilus-user-manual/C/figures/full-6.png:
	* help/nautilus-user-manual/C/figures/full.png:
	* help/nautilus-user-manual/C/figures/locbar.png:
	* help/nautilus-user-manual/C/figures/part-1.png:
	* help/nautilus-user-manual/C/figures/part-2.png:
	* help/nautilus-user-manual/C/figures/part-3.png:
	* help/nautilus-user-manual/C/figures/part.png:
	* help/nautilus-user-manual/C/figures/player-1.png:
	* help/nautilus-user-manual/C/figures/player-2.png:
	* help/nautilus-user-manual/C/figures/player-3.png:
	* help/nautilus-user-manual/C/figures/player-4.png:
	* help/nautilus-user-manual/C/figures/player.png:
	* help/nautilus-user-manual/C/figures/prefmenu.png:
	* help/nautilus-user-manual/C/figures/sidebar.png:
	* help/nautilus-user-manual/C/figures/viewmenu.png:
	* help/nautilus-user-manual/C/nautilus-user-manual.sgml:

	Suppressed terminal spew every time an info page is viewed
	and pretty'd up the error page when the info page does not
	exist.  Note - info page viewing is now broken completely.
	This is not due to this patch.  I wrote this patch on a 
	working build of Nautilus and somebody else has since
	broken it in Nautilus CVS.

	Bug#: 7299

	* components/help/converters/gnome-info2html2/main.c:
	(file_exists), (main):

2001-03-04  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fix bug 6967 (if you double click on a package in the icon view
	and the while it's loading double click on it again nautilus may
	segfault).

	* src/nautilus-view-frame.c
	(nautilus_view_frame_queue_incoming_call): If the destroy callback
	is NULL, do not attempt to call it. With this change, I can
	turbo-click an rpm and the package view will still come up cleanly
	without crashing Nautilus or itself.

2001-03-04  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-preferences.c:
	(preferences_key_make_for_visibility):

	Fix a leak by adding a missing g_free.
	
2001-03-02  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-font-manager.c:
	(nautilus_font_manager_get_fallback_font):
	Add workaround for tinderbox lack of 'make install' problem.  Ill
	fix this better tommorow.
	
2001-03-02  Seth Nickell  <seth@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-volume-monitor.c:

	Add UFS detection code to make Trash work on Solaris. Basically
	a cut and paste of the equivalent ReiserFS code added earlier.
	
2001-03-02  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Gene Z. Ragan <gzr@eazel.com>

	* libnautilus-extensions/nautilus-volume-monitor.c:
	Turn off spew about unknown file systems.

2001-03-02  Eskil Heyn Olsen  <eskil@eazel.com>

	written by: Robey Pointer  <robey@eazel.com>
	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	This is a patch to debug output only.
	
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_dump_tree_helper), (packagedata_dump_tree_int),
	(packagedata_dump_tree):
	Don't log dependencies for broken packages in debug output.

2001-03-02  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com> who sez "that's
	nice..."

	Fixed 7245.

	* components/rpmview/nautilus-rpm-view-install.c:
	(get_detailed_errors), (nautilus_rpm_view_install_failed),
	(nautilus_rpm_view_uninstall_failed),
	(nautilus_rpm_view_install_done),
	(nautilus_rpm_view_install_package_callback),
	(nautilus_rpm_view_uninstall_package_callback):
	Fixed 7245, install view uses EazelInstallProblem to generate
	error strings.
	No longer call load_failed when done.
	Do gnome_dialog_run instead of gnome_dialog_run_and_close and lets
	hope it's not fatal...
	
	* components/services/install/command-line/Makefile.am:
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_download_progress_signal),
	(eazel_install_progress_signal), (main):
	Fixed some math stuff that could cause arithmetic coredumps.
	Added i18n initialization code.

2001-03-02  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Bug 2673 - Need to hook up the new font picker to nautilus .
	
	* configure.in:
	Remove an old font setup hack that never really worked.

	* data/fonts/urw/fonts.dir:
	Rename the fonts to "Helvetica Default" in order not to clash with
	system fonts.

	* libnautilus-extensions/nautilus-font-manager.h:
	* libnautilus-extensions/nautilus-font-manager.c:
	(font_description_new): Add a font type parameter.
	(font_lists_total_num_fonts): New function to count the total
	number of scalable fonts detetected.
	(font_description_table_add): Pass in the detected font lists to
	do reality checks.
	(font_get_font_type): New function.
	(font_description_table_get_length),
	(font_description_table_peek_nth),
	(font_description_table_get_nth_file_name): Name the parameters
	more consistently.
	(font_description_table_for_each): Add font type parameter
	(font_description_table_new): Rework to not require storing the
	detected font list.  We now use that only for the duration of the
	constructor.  Lost the install_font_lists dumbness.
	(font_server_for_each_font_directory_internal): Use g_warning
	instead of g_print.
	(font_ignore_directory): New function to determine whether we
	should ignore a directory - makes things much faster. 
	(font_manager_collect_font_tables): New function to handle all the
	work of collecting font directories into tables.
	(font_server_for_each_callback), (font_table_list_free),
	(font_table_list_for_each), (free_font_tables),
	(ensure_at_exit_handler), (ensure_fallback_font_table),
	(ensure_user_font_table), (ensure_system_font_tables): Add 3
	tables for fallback, system and users fonts.  These are populated
	as needed.
	(nautilus_font_manager_for_each_font): Iterate the 3 font talbles.
	(nautilus_font_manager_get_fallback_font) : New function to obtain
	a fallback font quickly without having to check the system.
	(call_chop_off_comments), (nautilus_self_check_font_manager):
	Rework the checks to not create a temp directory.  Unfortunately
	they now only run for me.

	* libnautilus-extensions/nautilus-font-picker.h:
	* libnautilus-extensions/nautilus-font-picker.c:
	(nautilus_font_picker_initialize_class),
	(nautilus_font_picker_initialize), (nautilus_font_picker_destroy),
	(font_entry_list_find), (font_picker_update),
	(font_name_picker_changed_callback),
	(style_picker_changed_callback), (ignore_font),
	(font_manager_callback), (style_list_for_each_callback),
	(font_entry_list_for_each_callback),
	(nautilus_font_picker_get_selected_font),
	(nautilus_font_picker_set_selected_font),
	(nautilus_font_picker_set_title_label):
	Use the new font manager.

	* libnautilus-extensions/nautilus-global-preferences.h:
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_install_defaults),
	(global_preferences_create_dialog), (appearnace_pane_update),
	(global_preferences_create_font_group),
	(global_preferences_install_home_location_defaults),
	(global_preferences_install_font_defaults):
	Add a new preference for the smooth font.
	Factor our the default font code to its own function.  Setup the
	font pickers items to be mutually exclusive according to the
	smooth graphics mode preference value.
	
	* libnautilus-extensions/nautilus-gtk-extensions.h:
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_widget_set_shown):
	New function to show or hide a widget in one go.
	
	* libnautilus-extensions/nautilus-preferences-group.c:
	(nautilus_preferences_group_update):
	Dont show the widget if a controlling preference prevents it.
	
	* libnautilus-extensions/nautilus-preferences-item.h:
	* libnautilus-extensions/nautilus-preferences-item.c:
	(preferences_item_update_smooth_font),
	(preferences_smooth_font_changed_callback),
	(preferences_item_create_smooth_font): Add support for a smooth
	font picker.
	(preferences_item_destroy), (preferences_item_construct),
	(nautilus_preferences_item_set_control_preference),
	(nautilus_preferences_item_set_control_action),
	(nautilus_preferences_item_get_control_showing): Add support for
	using a controlling preference which can force the widget to be
	shown or hidden depending on its value.

	* libnautilus-extensions/nautilus-preferences-pane.c:
	(nautilus_preferences_pane_update):
	Use new gtk extension to show or hide the widget in one go.

	* libnautilus-extensions/nautilus-scalable-font.h:
	* libnautilus-extensions/nautilus-scalable-font.c:
	(font_family_string_map_new): Update fallback font name.
	(nautilus_scalable_font_new_from_file_name): New function to
	create a font directly from a font file name.
	(nautilus_scalable_font_get_default_font): Update fallback font name.
	(nautilus_scalable_font_get_default_bold_font): New function to
	get a fallback bold font.
	Remove some unsed functions.  Remove the font setup hack, the font
	manager takes care of that now.
	
	* libnautilus-extensions/nautilus-string-picker.h:
	* libnautilus-extensions/nautilus-string-picker.c:
	(nautilus_string_picker_clear):
	New function to clear the string picker.
	
	* libnautilus-extensions/nautilus-tabs.c:
	(nautilus_tabs_initialize):
	Fix the hard coded font name.

	* src/nautilus-first-time-druid.c: (new_title_label):
	Fix the hard coded font name.

	* src/nautilus-sidebar-tabs.c:
	(nautilus_sidebar_tabs_load_theme_data):
	Fix the hard coded font name.

	* test/Makefile.am:
	* test/test-nautilus-font-manager.c: (font_type_to_string),
	(font_iterator_callback), (font_table_for_each_callback), (main):
	* test/test-nautilus-font-picker.c: (font_picker_changed_callback),
	(main):
	* test/test-nautilus-glyph-simple.c: (main):
	* test/test-nautilus-label.c: (main):
	Update for new font picker and font manager changes.

2001-03-02  Darin Adler  <darin@eazel.com>

	reviewed by: Arik Devens <arik@eazel.com>

	Fix bug 7190 (Typing / in location moves cursor to end of line).

	* src/nautilus-location-bar.c: (try_to_expand_path): Fix a bunch
	of storage leaks, including calls to
	gnome_vfs_expand_initial_tilde that do nothing. Remove code to
	expand the initial tilde in here. That can all be handled below
	(and need not be deferred until idle time).
	(get_editable_length): New helper function.
	(has_exactly_one_slash): New helper function.
	(set_position_and_selection_to_end): New helper function.
	(position_and_selection_are_at_end): New helper function.
	(editable_key_press_callback): Fix logic so we only try to do
	completion of any kind when the user is typing at the end of the
	text. Also only do the tilde expansion when the path has exactly
	one slash, and do it right away rather than waiting for idle the
	way the file name expansion does. Finally, cancel the file name
	expansion if you are no longer at the end of the text.

	Other change.
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize),
	(nautilus_property_browser_update_contents):
	* src/nautilus-theme-selector.c:
	(nautilus_theme_selector_initialize):
	Add FIXMEs for uses of spaces to make buttons look right.

2001-03-02  Pavel Cisler  <pavel@eazel.com>

	reviewed by: John Harper  <jsh@eazel.com>

	Fix 7297: Segmentation fault when rapidly pressing refresh twice.
	
	* src/file-manager/fm-directory-view.c: (fm_directory_view_stop):
	Need to set pending_files_added and pending_files_changed to NULL
	after freeing them.

2001-03-02  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 7264 (Nautilus crashing regularly when browsing
	folders with .svg files with text in them):

	* librsvg/rsvg-ft.c (rsvg_ft_measure_or_render_string): in the
	returned `dimensions' array, return the actual height of the
	glyph buffer, not the height of the text bounding box. This
	appears to fix bug 7264

	* librsvg/rsvg-ft.c (rsvg_ft_measure_or_render_string):
	subtract the last element of the glyph affine transformation
	(the vertical offset) from the position at which it's rendered.
	This fixes the test-ft-gtk test program


	reviewed by: Pavel Cisler  <pavel@eazel.com>

	* src/nautilus-window.c (nautilus_window_realize): modified my
	last change to use gnome_pixmap_file () instead of
	nautilus_pixmap_file () (since the nautilus-launch-icon.png
	image gets installed in $prefix/share/pixmaps instead of
	$pixmap/share/nautilus/pixmaps, I had an old icon lying around
	which made me not see this..)

2001-03-02  John Harper  <jsh@eazel.com>

	* libnautilus-extensions/nautilus-smooth-text-layout-cache.c:
	disabled self check for now, since it won't work without make
	install having been run

2001-03-02  John Harper  <jsh@eazel.com>

	reviewed by: Gene Z. Ragan <gzr@eazel.com>

	Fixed bug 6740 (GNOME Panel mini-icon is used in Sawfish, large
	version needs to be there.):

	* src/nautilus-window.c (nautilus_window_realize): call
	gnome_window_icon_set_from_file () on the window, with the
	image file whose base is `nautilus-launch-icon.png'

2001-03-02  Pavel Cisler  <pavel@eazel.com>

	Fix 7225 (emblem sorting locks up entire system for extended
		  period of time)
		  
	reviewed by: Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-file-private.h:
	* libnautilus-extensions/nautilus-file.c: 
	(fill_emblem_cache_if_needed), (compare_by_emblems):
	Implement a simple cache for automatic and keyword emblems.

	* libnautilus-extensions/nautilus-file.c:
	(destroy), (nautilus_file_set_keywords),
	(nautilus_file_emit_changed):
	Nuke the cache when keywords change.

2001-03-02  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 558, Items don't show up in trash: when dropped.
		
	* libnautilus-extensions/nautilus-volume-monitor.c:
	* libnautilus-extensions/nautilus-volume-monitor.h:
	Added detection for ReiserFS.  ReiserFS is now a
	supported type for the trash folder creation and
	detection code.
	
2001-03-02  Frederic Crozat <fcrozat@mandrakesoft.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>
	
	Fixed bug 7276, No support for bzipped man and info pages
	-- problem for Mandrake
	
	Note that the coding style of these files is not the same
	as the rest of the Nautilus source code.
		
	* components/help/converters/gnome-info2html2/Makefile.am:
	* components/help/converters/gnome-info2html2/main.c: (main):
	* components/help/converters/gnome-man2html2/Makefile.am:
	* components/help/converters/gnome-man2html2/gnome-man2html.c:
	(read_man_page):
	* components/help/hyperbola-filefmt.c:
	(extract_secnum_from_filename), (man_name_without_suffix),
	(fmt_man_populate_tree_for_subdir):
			
2001-03-02  Ian McKellar  <ian@eazel.com>

	reviewed by: <robey@eazel.com>

	* components/services/install-view/callbacks.c:
	(nautilus_service_install_done):
	* components/services/install-view/nautilus-service-install-view.c:
	(nautilus_install_service_describe_menu_entry), (describe_dentry),
	(drag_data_get), (drag_data_delete), (launcher_clicked_callback),
	(make_dragable_icon_well),
	(nautilus_install_service_add_menu_launchers):
	* components/services/install-view/nautilus-service-install-view.h:
	Added launchers to the congratulations page.
	This fixes 5513.

	* components/services/inventory/eazel-inventory-utils.c:
	(eazel_inventory_clear_md5):
	Fixed a crasher in the inventory upload.

	* libnautilus-extensions/nautilus-clickable-image.c:
	(ancestor_button_release_event):
	Fixed NautilusClickableImage so that it doesn't generate click events
	when you d-n-d from it.

2001-03-02  Eric Fischer  <eric@eazel.com>

	reviewed by: Robin * Slomkowski <rslomkow@eazel.com>

	(Fixes Bug 6927)

	* Makefile.am:
	Add eazel-logos installation and distribution rules, conditional
	upon the presence of the eazel-logos directory.  Remove eazel-logos
	from SUBDIRS.

	* configure.in:
	Add check for presence of eazel-logos directory.  Remove eazel-logos
	Makefiles from list of files to be generated.

	* eazel-logos/Makefile.am:
	* eazel-logos/throbber/Makefile.am:
	Removed.  Now takes place in main Makefile.am.

	* nautilus.spec.in:
	Only install eazel-logos files if the eazel-logos directory was
	present at build time.

2001-03-03  Kjartan Maraas  <kmaraas@gnome.org>

	* help/nautilus-quick-reference/no/index.html: Tweaks.
	
2001-03-02  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Work to cache smooth-text-layout objects. This increases the
	speed of aa rendering so that there's no noticeable difference
	when compared with non-aa mode (e.g. when dragging windows over
	the top of the nautilus window)

	* libnautilus-extensions/nautilus-smooth-text-layout-cache.c,
	libnautilus-extensions/nautilus-smooth-text-layout-cache.h: new
	class, a cache for the NautilusSmoothTextLayout objects

	* libnautilus-extensions/nautilus-icon-canvas-item.c
	(nautilus_icon_canvas_item_initialize_class): allocate a
	NautilusSmoothTextLayoutCache for all canvas items. It will be
	freed on program exit

	(draw_or_measure_label_text_aa): use the layout cache when
	rendering text

	* libnautilus-extensions/Makefile.am: added layout cache files

	* libnautilus-extensions/nautilus-glyph.c,
	libnautilus-extensions/nautilus-glyph.c,
	libnautilus-extensions/nautilus-smooth-text-layout.c,
	libnautilus-extensions/nautilus-smooth-text-layout.c
	(nautilus_glyph_compare, nautilus_smooth_text_layout_compare):
	new functions, only defined when NAUTILUS_OMIT_SELF_CHECK isn't
	#define'd. Used by the cache's self test code

	* libnautilus-extensions/nautilus-lib-self-check-functions.h:
	added nautilus_self_check_smooth_text_layout_cache to the list

2001-03-02  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 7247, Web Search and Services toolbar icons missing in
	GNOME theme; fixed by tweaking the toolbar theming logic to
	deal with icons that don't have stock equivalents, and adding images
	for the gnome theme to use
	
	* icons/gnome/Makefile.am:
	* icons/gnome/SearchWeb.png:
	* icons/gnome/Services.png:	
	* src/nautilus-window-toolbars.c: (get_file_name_from_icon_name),
	(set_up_standard_bonobo_button), (set_up_special_bonobo_button),
	(set_up_toolbar_images):

	* icons/Services.png:
	stopgap fix for bug 7289, services toolbar icon in default theme
	doesn't fit in the rest of the toolbar icons.  I replaced it with
	an earlier one that is still consistent with the other services icons,
	but it's still not good enough; Arlo will keep working on a better
	one.
	
2001-03-02  Dan Mueth  <dan@eazel.com>

	reviewed by: John Fleck <jfleck@inkstain.net> 

	(Patch was written by Laszlo Kovacs  <laszlo.kovacs@sun.com>)
	
	Fix problem where use of <anchor> messes up entire document
	rendering.

	Bug #:6827

	* components/help/converters/gnome-db2html2/gdb3html.c:
	(start_element):

2001-03-02  Dan Mueth  <dan@eazel.com>

	reviewed by: Don Melton <don@eazel.com>

	Doing build stuff so that new files regarding
	the distribution license of the Eazel trademarks 
	contained in eazel-logos/ are properly included
	in tarballs and RPM's.

	Bug #: 7275 and 7274

	* Makefile.am: Added TRADEMARK_NOTICE to EXTRA_DIST
	* eazel-logos/Makefile.am: Added LICENSE to icon_DATA
	* nautilus.spec.in: Added eazel-logos/LICENSE and 
	  TRADEMARK_NOTICE

	Fixed a small problem for "es_ES" locale missing
	a doc.

	* components/help/topleveldocs.xml:

2001-03-02  Michael Engber  <engber@eazel.com>

	reviewed by: George Lebl <jirka@5z.org>

	* components/help/hyperbola-filefmt.c:
	(fmt_scrollkeeper_populate_tree), (fmt_toplevel_populate_tree):
	Switch to using gnome_i18n_get_language_list instead of grabbing
	the language straight from the "LANG" environment variable - 7109.

2001-03-02  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c:
	(nautilus_property_browser_update_contents):
	fixed bug 7283, wrong pattern dragged when property browser is
	scrolled, by revert yesterday's border box change that caused it.
	
2001-03-02  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Refixed bug 5863 (Opening folder triggers recalculation
	of deep count in Properties window)

	The deep count was being invalidated by the directory
	loading mechanism, which is legal and should be
	harmless. Taught the properties window not to do the
	visible recount whenever deep count is invalidated.

	* src/file-manager/fm-properties-window.c:
	(directory_contents_value_field_update): Set new
	deep_count_finished variable when the deep count is
	done. Afterwards, only update the display if a new
	deep count is completed (don't show future count-ups).

2001-03-01  Eric Fischer  <eric@eazel.com>

	reviewed by: Michael Engber <engber@eazel.com>

	* configure.in:
	Fix tinderbox breakage by adding missing AC_SUBST lines for
	version number dependencies that got moved from the spec file
	to the configure file.

2001-03-01  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 7156 (Opening multiple folders with tree view on causes
	timed wait dialogs for all but the first (folders never open)):

	* libnautilus-extensions/nautilus-directory-async.c:
	(async_job_start), (async_job_end): Added some debug code (turned
	off).
	(dequeue_pending_idle_callback): Fix problem where in the cancel
	case we did not do a nautilus_directory_async_state_changed. This
	didn't actually cause the bug.
	(nautilus_directory_stop_monitoring_file_list): The actual bug
	fix. Use the correct cancel function here. The old one didn't do
	all the cancelling work.
	(cancel_loading_attributes),
	(nautilus_directory_cancel_loading_file_attributes): Two more
	cases where we needed a call to
	nautilus_directory_async_state_changed. These didn't actually
	cause the bug.

2001-03-02  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Seth Nickell  <seth@eazel.com>

	* components/services/inventory-view/Makefile.am: Add missing file
	to sources to fix tinderbox.

2001-03-02  Laszlo Kovacs  <laszlo.kovacs@sun.com>

	reviewed by Seth Nickell:

	* components/help/hyperbola-filefmt.c:
	fixed bug 7248, two warnings commented out

2001-03-01  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Eskil Heinous Olsen <eskil@eazel.com>

	* libnautilus-extensions/nautilus-string-list.h:
	* libnautilus-extensions/nautilus-string-list.c:
	(nautilus_string_list_nth_as_integer),
	(nautilus_self_check_string_list):
	New function to get the nth string as an integer - and checks.

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-font-manager.h:
	* libnautilus-extensions/nautilus-font-manager.c:
	* libnautilus-extensions/nautilus-lib-self-check-functions.h:
	New files.  Support for collecting information about the scalable
	fonts installed on the system.  Parts written by Pavel Cisler.
	
	* components/text/nautilus-text-view.c:
	(nautilus_text_view_initialize):
	Mark a string for translation.

	* libnautilus-extensions/nautilus-font-factory.c:
	(nautilus_font_factory_get_font_by_family):
	Take fontsets into account.  Patch submitted by
	eungkyu@sparcs.kaist.ac.kr.

	* libnautilus-extensions/nautilus-preferences-item.h:
	* libnautilus-extensions/nautilus-preferences-item.c:
	(nautilus_preferences_item_initialize_class),
	(nautilus_preferences_item_initialize), (preferences_item_destroy),
	(preferences_item_construct), (preferences_item_update_enum),
	(preferences_item_create_enum),
	(preferences_item_update_short_enum),
	(preferences_item_create_short_enum),
	(preferences_item_update_boolean),
	(preferences_item_create_boolean),
	(preferences_item_update_editable_string),
	(preferences_item_create_editable_string),
	(preferences_item_update_integer),
	(preferences_item_create_integer),
	(preferences_item_update_font_family),
	(preferences_item_create_font_family),
	(nautilus_preferences_item_new),
	(enum_radio_group_changed_callback),
	(nautilus_preferences_item_update_displayed_value),
	(update_text_settings_at_idle):
	Clean this up a bit.  Follow nautilus coding conventions more.
	Remove long unused theme picker.
	Remove unused GtkArg stuff.

	* libnautilus-extensions/nautilus-preferences-pane.c:
	(nautilus_preferences_pane_new):
	* libnautilus-extensions/nautilus-preferences-pane.h:
	Remove unused pane description.

	* libnautilus-extensions/nautilus-preferences-box.c:
	(nautilus_preferences_box_add_pane):
	* libnautilus-extensions/nautilus-preferences-box.h:
	Remove unused pane description.

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_defaults): Mark font name for
	translation.
	(global_preferences_create_dialog),
	(global_preferences_create_search_pane): Remove unused pane
	description.

	* test/.cvsignore:
	* test/Makefile.am:
	* test/test-nautilus-glyph-simple.c: (main):
	* test/test-nautilus-glyph.c: (main):
	* test/test-nautilus-labeled-image.c: (main):
	* test/test-nautilus-smooth-text-layout.c: (main):
	* test/test-nautilus-font-manager.c: (main):
	* test/test.c: (test_quit):
	* test/test.h:
	Some minor changes.  New test for font manager.

2001-03-02  Arlo Rose  <arlo@eazel.com>

	reviewed by: Josh Barrow <josh@eazel.com>

	* icons/ardmore/theme_preview.png:
	* icons/arlo/theme_preview.png:
	* icons/crux_eggplant/backgrounds/window_pattern.png:
	* icons/crux_eggplant/theme_preview.png:
	* icons/gnome/theme_preview.png:
	* icons/nautilus-mini-logo.png:
	* icons/theme_preview.png:
	* icons/villanova/theme_preview.png:
	New theme previews for the smaller size, and 1bit alpha.
	Also, a couple of other tweaks.

2001-03-02  Arlo Rose  <arlo@eazel.com>

	* icons/gnome/gnome.xml:
	* icons/gnome/throbber/008.png:
	Fixed an old bug in the GNOME throbber (frame 8) that was 
	reintroduced at some point

2001-03-02  Arlo Rose  <arlo@eazel.com>

	reviewed by: Josh Barrow <josh@eazel.com>

	* configure.in:
	* icons/arlo/arlo.xml:
	* icons/arlo/throbber/001.png:
	* icons/arlo/throbber/002.png:
	* icons/arlo/throbber/003.png:
	* icons/arlo/throbber/004.png:
	* icons/arlo/throbber/005.png:
	* icons/arlo/throbber/006.png:
	* icons/arlo/throbber/007.png:
	* icons/arlo/throbber/008.png:
	* icons/arlo/throbber/009.png:
	* icons/arlo/throbber/010.png:
	* icons/arlo/throbber/011.png:
	* icons/arlo/throbber/012.png:
	* icons/arlo/throbber/013.png:
	* icons/arlo/throbber/014.png:
	* icons/arlo/throbber/015.png:
	* icons/arlo/throbber/016.png:
	* icons/arlo/throbber/017.png:
	* icons/arlo/throbber/018.png:
	* icons/arlo/throbber/019.png:
	* icons/arlo/throbber/020.png:
	* icons/arlo/throbber/021.png:
	* icons/arlo/throbber/022.png:
	* icons/arlo/throbber/023.png:
	* icons/arlo/throbber/024.png:
	* icons/arlo/throbber/025.png:
	* icons/arlo/throbber/026.png:
	* icons/arlo/throbber/027.png:
	* icons/arlo/throbber/028.png:
	* icons/arlo/throbber/029.png:
	* icons/arlo/throbber/030.png:
	* icons/arlo/throbber/Makefile.am:
	* icons/arlo/throbber/rest.png:
	* icons/crux_eggplant/Makefile.am:
	* icons/crux_eggplant/crux_eggplant.xml:
	* icons/crux_eggplant/throbber/001.png:
	* icons/crux_eggplant/throbber/002.png:
	* icons/crux_eggplant/throbber/003.png:
	* icons/crux_eggplant/throbber/004.png:
	* icons/crux_eggplant/throbber/005.png:
	* icons/crux_eggplant/throbber/006.png:
	* icons/crux_eggplant/throbber/007.png:
	* icons/crux_eggplant/throbber/008.png:
	* icons/crux_eggplant/throbber/009.png:
	* icons/crux_eggplant/throbber/010.png:
	* icons/crux_eggplant/throbber/011.png:
	* icons/crux_eggplant/throbber/012.png:
	* icons/crux_eggplant/throbber/013.png:
	* icons/crux_eggplant/throbber/014.png:
	* icons/crux_eggplant/throbber/015.png:
	* icons/crux_eggplant/throbber/016.png:
	* icons/crux_eggplant/throbber/017.png:
	* icons/crux_eggplant/throbber/018.png:
	* icons/crux_eggplant/throbber/019.png:
	* icons/crux_eggplant/throbber/020.png:
	* icons/crux_eggplant/throbber/021.png:
	* icons/crux_eggplant/throbber/022.png:
	* icons/crux_eggplant/throbber/023.png:
	* icons/crux_eggplant/throbber/024.png:
	* icons/crux_eggplant/throbber/025.png:
	* icons/crux_eggplant/throbber/026.png:
	* icons/crux_eggplant/throbber/027.png:
	* icons/crux_eggplant/throbber/028.png:
	* icons/crux_eggplant/throbber/029.png:
	* icons/crux_eggplant/throbber/030.png:
	* icons/crux_eggplant/throbber/Makefile.am:
	* icons/crux_eggplant/throbber/rest.png:
	Yee Ha!  New throbbers for everyone!
	Added new throbbers for Crux Teal and Eggplant.

2001-03-01  Ian McKellar <ian@eazel.com>

	reviewed by: John "I'll review that" Harper.

	* components/services/inventory-view/nautilus-inventory-view-private.h:
	Added file that Mike forgot.

2001-03-01  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	Fixed bug 7254 (Remove Featured Downloads tab from svcs summary
	page)

	* components/services/summary/nautilus-summary-view.c:
	(append_hseparator_to_vbox), (generate_eazel_news_entry_row),
	(summary_view_update_pane), (generate_service_entry_row): Minor
	spacing tweaks to match Arlo's screenshot.
	(create_summary_form): ifdef out the code that shows the featured
	donwloads pane. Don't entirely remove it for now to avoid major
	code changes this late in the game.
 
2001-03-01  John Harper  <jsh@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 7238 ("View as EOG Image" adds toolbar icons that
	don't go away):

	* components/adapter/nautilus-adapter.c
	(nautilus_adapter_destroy): when the adapter has a non-null
	embedding strategy, deactivate it before destroying

	I think there may be a refcounting problem in EOG that caused
	the original problem, but the above should always be safe, and
	will protect nautilus from misbehaving components

2001-03-01  Mike Fleming  <mfleming@eazel.com>

	reviewed by: <ian@eazel.com>

	Part of bug 5575: Polish up inventory view.

	Makes "enable" and "disable" views look reasonable and 
	adds a optional ? arg for the next URI.

	* components/services/inventory-view/nautilus-inventory-disable-page.c:
	(disable_inventory_callback),
	(nautilus_inventory_disable_page_initialize),
	(nautilus_inventory_disable_page_new),
	(nautilus_inventory_disable_page_destroy),
	(nautilus_inventory_disable_page_run):
	* components/services/inventory-view/nautilus-inventory-disable-page.h:
	* components/services/inventory-view/nautilus-inventory-enable-page.c:
	(callback_progress_update),
	(nautilus_inventory_enable_page_initialize),
	(nautilus_inventory_enable_page_new),
	(callback_timeout_error_navigate), (callback_eazel_inventory),
	(nautilus_inventory_enable_page_run),
	(nautilus_inventory_enable_page_destroy):
	* components/services/inventory-view/nautilus-inventory-enable-page.h:
	* components/services/inventory-view/nautilus-inventory-view.c:
	(nautilus_inventory_view_initialize), (get_finish_uri),
	(inventory_load_location_callback):
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_self_check_file_utilities):

2001-03-01  Arlo Rose  <arlo@eazel.com>

	* icons/crux_eggplant/crux_eggplant.xml:
	List view color tweak.

2001-03-01  Rebecca Schulman  <rebecka@eazel.com>

	Some leak checks that showed up on the top of the
	leak checker profile. (bugzilla.eazel.com 7253)
	These changes reduce leakage in a short session
	by 100,000 bytes

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-preferences.c:
	(nautilus_preferences_get_user_level):
	Remove leak of a string every time we checked user level
	* libnautilus-extensions/nautilus-smooth-text-layout.c:
	(nautilus_smooth_text_layout_destroy),
	(smooth_text_layout_clear_lines):
	Remove a leak of the text and some other characters every time
	we created and used a text layout object, which was about 6000
	times for a short run for me
	* libnautilus-extensions/nautilus-volume-monitor.c:
	Stop strdup'ing a string where we would have leaked the original.

2001-03-01  Arik Devens  <arik@eazel.com>

	reviewed by: Robin * Slomkowski  <rslomkow@eazel.com>
	
	* configure.in: Changing our dependency on control center back to
	1.2.3 after being browbeaten on irc by people who know more than
	me.

2001-03-01  Eric Fischer  <eric@eazel.com>

	reviewed by: Arik Devens <arik@eazel.com>

	* configure.in:
	Remove -F- flag to awk in control-center check, since gnomecc
	separates name from version with spaces, not dashes.

2001-03-01  Arlo Rose  <arlo@eazel.com>

	* icons/Services.png:
	Made the toolbar icon match the rest of the services icons.

2001-03-01  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen <eskil@eazel.com>

	* nautilus-installer/src/installer.c: (install_failed):

	No longer need to throw away install_failed signals since we'll
	only get them for the toplevel package now.  Need to report this
	error so that redundant installs won't be reported as servers
	being down.

2001-03-01  Michael Engber  <engber@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	* components/services/nautilus-dependent-shared/icons/eazel-logo-right-side-logo.png:
	* icons/about_background.png:
	* icons/druid_header.png:
	* icons/throbber/001.png:
	* icons/throbber/002.png:
	* icons/throbber/003.png:
	* icons/throbber/004.png:
	* icons/throbber/005.png:
	* icons/throbber/006.png:
	* icons/throbber/007.png:
	* icons/throbber/008.png:
	* icons/throbber/009.png:
	* icons/throbber/010.png:
	* icons/throbber/011.png:
	* icons/throbber/012.png:
	* icons/throbber/013.png:
	* icons/throbber/014.png:
	* icons/throbber/015.png:
	* icons/throbber/016.png:
	* icons/throbber/017.png:
	* icons/throbber/018.png:
	* icons/throbber/019.png:
	* icons/throbber/020.png:
	* icons/throbber/021.png:
	* icons/throbber/022.png:
	* icons/throbber/023.png:
	* icons/throbber/024.png:
	* icons/throbber/025.png:
	* icons/throbber/026.png:
	* icons/throbber/027.png:
	* icons/throbber/028.png:
	* icons/throbber/029.png:
	* icons/throbber/030.png:
	* icons/throbber/rest.png:
	Checked in uncorrupted png files.

2001-03-01  Arik Devens  <arik@eazel.com>

	reviewed by: Robin * Slomkowski  <rslomkow@eazel.com>

	Fixed bug 7032, File Types & Programs capplet not installed on
	GNOME 1.2.
	Fixed bug 7240, require the new version of gtk-pixbuf in both
	configure.in and spec.in.
	
	* configure.in: Added requirements for both the new control center
	and the new gdk-pixbuf, both using eric's new macros.
	* nautilus.spec.in: Moved everything over to the new macros.

2001-03-01  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com> who sighed heavily
	and went back to today batch of installer bugs...

	This fixes bug 7196.
	
	* components/rpmview/nautilus-rpm-view-install.c:
	(save_transaction), (nautilus_rpm_view_install_package_callback),
	(nautilus_rpm_view_uninstall_package_callback):
	Added a save_transaction callback that returns FALSE.
	Setup the save_transaction callback signals.
	
	* components/services/install-view/callbacks.h:
	* components/services/install-view/callbacks.c:
	(nautilus_service_install_save_transaction):
	Added a save_transaction callback that returns FALSE.
	
	* components/services/install-view/nautilus-service-install-view.c:
	(nautilus_service_install_view_update_from_uri_finish):
	Setup the save_transaction callback signals.

	* components/services/install-view/forms.c:
	Reverted the " " to "" since bug 7198 was fixed.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_save_transaction_signal), (main):
	Added a save_transaction callback that asks the user y/n.
	Fixed I18N comment
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	Added the save_transaction callback.
	
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_save_transaction), (eazel_install_callback_get_epv),
	(eazel_install_callback_class_initialize):
	Added the save_transaction callback.
	Added missing g_list_free's

	* components/services/install/lib/eazel-install-logic2.c:
	(is_satisfied_features), (execute), (get_packages_with_mod_flag):
	Changed a comment.
	Call emit_save_transaction prior to saving transaction.
	
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_class_initialize), (eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_revert_transaction_from_xmlstring),
	(eazel_install_emit_preflight_check_default),
	(eazel_install_emit_save_transaction),
	(eazel_install_emit_save_transaction_default):
	All the insane code to setup the save_transaction thingy.
	
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system-types.c:
	(eazel_install_gtk_marshal_BOOL__ENUM_POINTER):
	And a special handcarved from a raw metal ore gtk marshal function
	for the save_transaction signal.
	
2001-03-01  Eric Fischer  <eric@eazel.com>

	reviewed by: Arik Devens <arik@eazel.com>

	* configure.in:
	Improve the process of checking for required versions of other
	software by moving the version numbers out of the spec file and
	the body of the configure script and into their own section of
	the script.

	Also add a couple of autoconf macros that will reduce the amount
	of boilerplate that needs to get written for each version check.

	* nautilus.spec.in:
	Change some of the requirements to get their version numbers from
	the configure script rather than hardwiring them here.

	(Bug 7229)

2001-03-01  Arlo Rose  <arlo@eazel.com>

	* icons/About_Image.png:
	Added the non-Eazel version; it looks pretty cool.


2001-03-01  Dan Mueth  <dan@eazel.com>

	reviewed by: Eric Fischer <eric@eazel.com>

	Adding Swedish translation of Nautilus Quick Reference:

	* configure.in:
	* help/nautilus-quick-reference/Makefile.am:
	* help/nautilus-quick-reference/sv/.cvsignore:
	* help/nautilus-quick-reference/sv/Makefile.am:
	* help/nautilus-quick-reference/sv/figures/colors_small.png:
	* help/nautilus-quick-reference/sv/figures/emblems_small.png:
	* help/nautilus-quick-reference/sv/figures/ff_small.png:
	* help/nautilus-quick-reference/sv/figures/find_small.png:
	* help/nautilus-quick-reference/sv/figures/full_small.png:
	* help/nautilus-quick-reference/sv/figures/locbar_small.png:
	* help/nautilus-quick-reference/sv/figures/menubar_small.png:
	* help/nautilus-quick-reference/sv/figures/music_small.png:
	* help/nautilus-quick-reference/sv/figures/navbar_small.png:
	* help/nautilus-quick-reference/sv/figures/sidebar_small.png:
	* help/nautilus-quick-reference/sv/figures/softcat.png:
	* help/nautilus-quick-reference/sv/figures/storage.png:
	* help/nautilus-quick-reference/sv/figures/themes_small.png:
	* help/nautilus-quick-reference/sv/index.html:
	* help/nautilus-quick-reference/sv/nautilus-quick-reference-sv.omf:

	Updating a .cvsignore file:

	* help/nautilus-quick-reference/no/.cvsignore:

	Fixing l10n of About dialog... Returns are hard coded into the
	po file and were placed such that text on left side collided
	with names on the right side.  I reformatted the text for locales
	which were translated and appeared correctly in the locale for me.
	Bug #: 7117

	* po/de.po:
	* po/fr.po:
	* po/no.po:
	* po/pt_BR.po:
	* po/sk.po:
	* po/sl.po:
	* po/tr.po:

2001-03-01  Arik Devens  <arik@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 7190, Typing / in location moves cursor to end of line.
	
	* src/nautilus-location-bar.c: (editable_key_press_callback): Made
	the location bar check to see if the entry has changed on a slash
	so that we aren't expanding stuff that doesn't need to be
	expanded.

2001-03-01  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c:
	(nautilus_property_browser_update_contents):
	fixed bug 7143, increased borders in property browser to Arlo's
	taste; fixed by adding a box with an 8 pixel border width.
	
	* src/nautilus-sidebar-tabs.c:
	fixed bug 7226, sidebar tabs are too small in Sierra theme; fixed by
	increasing the tab height constant by three pixels.
	
2001-03-01  Mike Fleming  <mfleming@eazel.com>

	reviewed by: <rslomkow@eazel.com>

	Bug 2926: Improve check for ammonite with --enable-eazel-services
	
	* configure.in:

2001-03-01  Michael Engber  <engber@eazel.com>

	reviewed by: George Lebl <jirka@5z.org>

	* components/help/hyperbola-nav-tree.c:
	* components/help/hyperbola-types.h:
	Included the appropriate headers to define the
	internationalization string macros.

2001-03-01  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 7164 (infinite redrawing in particular layout case)

	* libnautilus-extensions/nautilus-icon-container.c:
	(lay_down_icons_horizontal): Fixed the math for determining
	whether the current icon fits on the current row; added a
	FIXME about a questionable design choice.
	(size_allocate): Added a FIXME.

2001-03-01  Arik Devens  <arik@eazel.com>

	reviewed by: Mike Fleming  <mfleming@eazel.com>

	Fixed bug 6756, Clicking on anchor links in info: pages causes
	page to reload.
	
	* components/help/converters/gnome-info2html2/html.c:
	(form_info_tag_href): Changed so that info anchor tag uri's are
	always local.

2001-03-01  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 7168, change name of first time druid flag so 1.0 users
	will get to see the new options in the druid.

	reviewed by: Michael Engber <engber@eazel.com>
	
	* src/nautilus-application.c: (need_to_show_first_time_druid):
	* src/nautilus-first-time-druid.c:
	(druid_set_first_time_file_flag):

2001-03-01  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 7208 (History and Notes panels intermittently die at
	startup or window launch). The bug turned out to be a logic error
	at the shell level, not a panel crashing as I had been assuming.
	
	* src/nautilus-view-frame.c: (nautilus_view_frame_stop),
	(nautilus_view_frame_selection_changed),
	(nautilus_view_frame_title_changed), (send_history): Check whether
	the CORBA view object is NIL instead of looking at state. The view
	will be NIL at all the right times, and it's a simpler and more
	reliable check. In particular, it's correct during the early
	loading stage, when the state does not reflect whether the view is
	present yet or not.

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_new_free_at_exit): Only complain on systems
	where NAUTILUS_DEBUG is set, because this could confuse real users
	(the message doesn't really represent a bug).

2001-03-01  Eric Fischer  <eric@eazel.com>

	reviewed by: Robin * Slomkowski <rslomkow@eazel.com>

	* nautilus.spec.in:
	Add dependency for libpng (fixed Bug 7162)
	Also change dependency for gnome-libs to 1.2.11, because
	Robin says anything built against that version (as on the
	build servers) will break if run with an older release.

2001-03-01  Eric Fischer  <eric@eazel.com>

	reviewed by: Laszlo Kovacs <laszlo.kovacs@sun.com>

	Fixes Bug 7128 (Organization of "Manual" in Help sidebar is bizarre)

	* components/help/hyperbola-filefmt.c:
	(fmt_man_populate_tree_for_dir):
	Put man pages in sections corresponding more closely to traditional
	Unix manual organization.

	(fmt_man_populate_tree):
	Add translate_array() and make_treesection() calls for the added
	manual sections.

2001-03-01  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fix bug 7155 - Nautilus dies trying to get bold font at startup if
	using Finish locale. 
	
	Many bulletproofing fixes to make sure Nautilus doesnt crash in
	systems with broken or limited font setups.
	
	* libnautilus-extensions/nautilus-gdk-font-extensions.c:
	(nautilus_gdk_font_get_italic): Use the cached font list as we do
	for bold fonts.  Make sure the slant_pattern is valid.  If its
	not, then return the source font.  Remove some not needed casts.
	(font_scalable_get_by_size): Bulletproof.  Dont assert that the
	font load always works - it doesnt.  
	(font_bitmap_get_by_size): Bulletproof.  Dont do any work if a
	valid larger_font pattern cant be determined - simply return NULL
	in this case, the callers should deal with that case.  Make sure
	we actually found a matching (or close) font size.  Before we were
	assuming that there would be at least one match.  Not so for
	really broken font setups.
	(nautilus_gdk_font_get_larger): Remove some not needed casts.
	(nautilus_gdk_font_get_largest_fitting): Check that the candidate
	font is not NULL before proceeding to check that it matches.
	(font_get_bold): Use the cached font lists to make bold font
	queries.  Remove some not needed casts.
	(font_get_size_in_pixels):  Check for invalid XLFD names and
	return 0 (not found indicator) for such cases.

	Also added a FIXME for an improvement for the fallback font
	strategy.

	Fix two tiny regressions:

	7206 - Sidebar title does not properly center justify
	7198 - Zero length NautilusLabel doens't draw background tile

	* libnautilus-extensions/nautilus-label.c: 
	(paint_label_smooth): We need to draw the background tile even if
	the string has zero length.
	(label_force_cached_requisition_flush): Remove the broken "phony
	justification" hack.  Replace it with a simpler "phony pattern"
	hack that works.
	
2001-03-01  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen <eskil@eazel.com>
	who pronounced it his 2nd favorite patch, ever.

	* components/services/install-view/callbacks.c:
	(inventory_service_callback):

	Remove mispelled spam that crept back in during Ian's checkin.

	* nautilus-installer/src/gtk-hackery.c: (gtk_label_new_with_font):
	* nautilus-installer/src/main.c: (main):

	Don't explode if the font we want isn't available.  Don't try to
	localize text in the bootstrap installer because it just leads to
	trouble.

2001-03-01  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>
	who hummed the twilight zone theme while reviewing...

	Fixes bug 7197 "install view's ``messages'' 
	header doesn't reach across the window"

	* components/services/install-view/forms.c:
	(generate_install_form):
	s/""/" "/ in eazel_services_header_middle_new,
	fixes bug 7197

2001-03-01  Dan Mueth  <dan@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Added Spanish version of Nautilus Quick Reference:

	* configure.in:
	* help/Makefile.am:
	* help/nautilus-quick-reference/Makefile.am:
	* help/nautilus-quick-reference/es/.cvsignore:
	* help/nautilus-quick-reference/es/Makefile.am:
	* help/nautilus-quick-reference/es/figures/colors_small.png:
	* help/nautilus-quick-reference/es/figures/emblems_small.png:
	* help/nautilus-quick-reference/es/figures/ff_small.png:
	* help/nautilus-quick-reference/es/figures/find_small.png:
	* help/nautilus-quick-reference/es/figures/full_small.png:
	* help/nautilus-quick-reference/es/figures/locbar_small.png:
	* help/nautilus-quick-reference/es/figures/menubar_small.png:
	* help/nautilus-quick-reference/es/figures/music_small.png:
	* help/nautilus-quick-reference/es/figures/navbar_small.png:
	* help/nautilus-quick-reference/es/figures/sidebar_small.png:
	* help/nautilus-quick-reference/es/figures/softcat.png:
	* help/nautilus-quick-reference/es/figures/storage.png:
	* help/nautilus-quick-reference/es/figures/themes_small.png:
	* help/nautilus-quick-reference/es/index.html:
	* help/nautilus-quick-reference/es/nautilus-quick-reference-es.omf:

	Added placeholder for Nautilus Release Notes, to be filled in
	by Vera later:
	Bug #: 6969

	* help/nautilus-release-notes/.cvsignore:
	* help/nautilus-release-notes/C/.cvsignore:
	* help/nautilus-release-notes/C/Makefile.am:
	* help/nautilus-release-notes/C/nautilus-release-notes-C.omf:
	* help/nautilus-release-notes/C/nautilus-release-notes.sgml:
	* help/nautilus-release-notes/Makefile.am:

	Fixed Nautilus spec file w/r/t documentation.  It is now simpler,
	gives the right permissions to figures, and doesn't need to be
	updated every time somebody adds a new doc or translation.
	Bug #: 7002

	* nautilus.spec.in:

2001-02-28  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen <eskil@eazel.com>
	"the most beautiful patch I've ever seen"

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (something_failed), (eazel_preflight_check_signal):
	* components/services/install/lib/eazel-install-logic2.c:
	(dump_tree):
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_dump_tree_helper), (packagedata_dump_tree_int),
	(packagedata_dump_tree), (dump_package_deplist):

	Move the package-tree dumper from the command-line util into the
	install lib, and remove the redundant copies.  This cleans up the
	debug output to fix bug 7127.
	
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_packagedata_fill_from_header):
	* components/services/install/lib/eazel-package-system-types.h:

	Someone mispelled PACKAGE as PACAKGE fairly consistently.  It was
	probably me.
	
	* components/services/trilobite/libtrilobite/trilobite-core-messagi
	ng.c: (trilobite_add_log):

	Handle multi-line debug output without spazzing.

2001-02-28  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	This patch fixes bug 7122 and reduces flicker in the install-view.
	
	* components/services/docs/installer-rpm-cases:
	Corrected the description of a case.
	
	* components/services/install-view/forms.c: (install_message_new):
	Reduced flicker by no longer forcing a redraw.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c:
	Disabled force since it doesn't work (and really shouldn't).
	
	* components/services/install/lib/eazel-install-corba-callback.c:
	(eazel_install_callback_initialize),
	(eazel_install_callback_get_type):
	Removed commented out debug stuff.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(prune_failed_packages_helper), 
	Added more spam to the debug output.
	(post_get_softcat_info),
	Moved code from get_softcat_info here
	(get_softcat_info), (check_tree_helper):
	Call post_get_softcat_info, this fixes bug 7122.
	
	* components/services/install/lib/eazel-softcat.c:
	(get_search_url_for_package), (eazel_softcat_query):
	s/provides/features/
	
	* components/services/install/server/main.c: (main):
	Spellfix.

2001-02-28  Brian Frank  <bfrank@eazel.com>

	Added MandrakeSoft to bookmarks, and fixed Sun Wah link to default to "non-flash" page.
	
	* data/static_bookmarks.xml

2001-02-28  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-directory-metafile-monitor.c:
	(corba_metafile_ready):
	Add newline at end of file to make redhat7 compiler happy.  Fix
	emacs header blurb.
	
2001-02-28  Arik Devens  <arik@eazel.com>

	reviewed by: Robin * Slomkowski  <rslomkow@rslomkow.org>

	Fixed bug 6836, Add scrollkeeper as a dependency of Nautilus in
	configure.in.
	
	* configure.in: Added checking for scrollkeeper install.
	* ChangeLog: Forgot to commit ChangeLog for last checkin. Sorry to
	all about that.

2001-02-28  Arik Devens  <arik@eazel.com>

	reviewed by: Robin * Slomkowski  <rslomkow@rslomkow.org>

	Fixed bug 7161, change both configure.in and RPM to require gtk
	1.2.9 or newer.
	
	* configure.in: Updated our GTK+ dep to 1.2.9.
	* nautilus.spec.in: Updated our GTK+ dep to 1.2.9.

2001-02-28  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Found and fixed as many untranslated things as possible. John
	Sullivan found them and I fixed them. This takes care of much of
	bug 6977.

	* check-strings-functions:
	* check-strings-patterns:
	More things to ignore and fixes to bad patterns done while John
	and I did our pass over all the code.
	
	* check-strings.pl: Fix comment.

	* applets/preferences-applet/nautilus-preferences-applet.c: (main):
	* components/hardware/nautilus-hardware-view.c: (setup_CPU_form),
	(setup_RAM_form), (setup_IDE_form):
	* components/rpmview/nautilus-rpm-verify-window.c:
	(nautilus_rpm_verify_window_initialize):
	* components/services/inventory-view/nautilus-inventory-config-page.c:
	(nautilus_inventory_config_page_initialize),
	(nautilus_inventory_config_page_destroy):
	* components/services/inventory-view/nautilus-inventory-disable-page.c:
	(nautilus_inventory_disable_page_initialize):
	* helper-utilities/authenticate/nautilus-authenticate.c: (main):
	* libnautilus-extensions/nautilus-password-dialog.c:
	(nautilus_password_dialog_new):
	* libnautilus-extensions/nautilus-program-chooser.c:
	(nautilus_program_chooser_show_no_choices_message):
	Mark additional strings for translation.
	
	* components/adapter/nautilus-adapter-embed-strategy.c:
	(nautilus_adapter_embed_strategy_initialize_class): Fix misspelling
	of signal names.
	
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(rpmmonitorpiggybag_new): Fix a typo.
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_error_string): Write comment about why these strings
	don't need translation.
	
	* libnautilus-extensions/nautilus-gtk-extensions.c: Tweak formatting.
	
	* libnautilus-extensions/nautilus-preferences-dialog.c:
	(nautilus_preferences_dialog_construct): Use stock button instead of
	hard-coded OK for translation purposes.

2001-02-28  Michael Engber  <engber@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(metafile_read_mark_done):
	* libnautilus-extensions/nautilus-directory-metafile-monitor.c:
	(nautilus_metafile_monitor_get_epv), (corba_metafile_changed),
	(corba_metafile_ready):
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_find_file_by_relative_uri),
	(nautilus_directory_find_file_by_internal_uri):
	* libnautilus-extensions/nautilus-metafile-server.idl:
	* libnautilus-extensions/nautilus-metafile.c: (corba_set),
	(corba_set_list),
	(nautilus_metafile_notify_metafile_ready),
	(call_metafile_changed),
	(call_metafile_changed_for_all_files_mentioned_in_metafile),
	(call_metafile_changed_for_one_file):
	* libnautilus-extensions/nautilus-metafile.h:
	When a metafile is read in - change signals are sent to all
	files rather than just the ones with metadata. Also fixed
	it so change notifications to the "." file will happen. Bug 7044.

2001-02-28  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 7138, non-ASCII characters in author's names causes
	the Japanese version to crash.  Fixed by removing the accented
	'i' from Pavel's name
	
	* src/nautilus-window-menus.c: (help_menu_about_nautilus_callback):
	replaced the accented 'i' in Pavel's name with a plain one
	* check-THANKS.pl:
	fixed mapping in check-THANKS.pl as requested by Darin
	* AUTHORS:
	removed from AUTHORS, too, for consistency

2001-02-28  Mike Fleming  <mfleming@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Bug 7157: Reloads can cause crash; reloads to redirected URI's can
	cause error dialog to appear
	
	* src/nautilus-window-manage-views.c: (nautilus_window_reload):

2001-02-28  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fix bug 6368 - Multibyte font handling.
	
	* librsvg/rsvg-ft.c: (rsvg_ft_get_glyph),
	(rsvg_ft_measure_or_render_string):
	Tell freetype to never load bitmaps when loading glyphs.  We only
	use the outlines of scalable fonts.  This means our code will work
	even for glyphs that have embedded bitmaps.

	Add support for multi byte characters.  We do this by allocate a
	wide character array and converting the source string to wide
	chars.  If no wide characters are found in the source string, then
	we fill in the wide char array with the regular single byte chars.

	This changes are based on a patch contributed by Yukihiro Nakai
	<nakai@gnome.gr.jp> - thanks much.


	Unrelated change.
	
	* libnautilus-extensions/nautilus-labeled-image.c:
	(nautilus_labeled_image_initialize):
	Remove a extraneous '+' that sneaked in here.

2001-03-01  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Added Makefile generation for the below.
	* help/nautilus-quick-reference/Makefile.am: Added no subdir
	* help/nautilus-quick-reference/no/*: Added Norwegian translation.
	
2001-02-28  Darin Adler  <darin@eazel.com>

	* check-strings.pl: Fixed error in script that John noticed
	when he tried it. The regular expression for matching
	function names was matching way too many.

2001-02-28  Darin Adler  <darin@eazel.com>

	* check-strings-functions:
	* check-strings.pl: Tweaks to just-checked-in stuff.

	* src/nautilus-first-time-druid.c: Fix build by
	getting rid of incorrect use of stringize macro.

2001-02-28  John Harper  <jsh@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6988 (Nautilus consumes CPU for 5 mins on startup) by
	reverting my fix to bug 6820 (directory sort order is different
	in tree view):

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_initialize): commented out the call to
	gtk_clist_set_compare_func - revert to using the default clist
	comparison function (basically strcmp)

	(ctree_compare_rows): commented out this function

2001-02-28  Fatih Demir	<kabalak@gtranslator.org>

	* THANKS: Corrected the translator entry from me to
	Grkem Cetin who translated Nautilus now.

2001-02-28  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* check-strings.pl:
	* check-strings-functions:
	* check-strings-patterns:
	New script and correspoinding config files to help us find
	untranslated strings. It's going to take some effort to make
	this an easy-to-use tool.
	
	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_initialize): Fixed string that would not
	get translated properly since it was using N_ and nothing
	was going to use _() on it.
	(nautilus_rpm_view_update_from_uri): Marked strings for
	translation as requested in bug report 7149.
	(nautilus_rpm_view_verify_files): Format tweak.
	(nautilus_rpm_view_drag_data_received): Remove old dead code.
	
	* libnautilus-extensions/nautilus-tabs.c: (draw_tab_piece_aa):
	Change to use C-style comments, not C++.
	
	* src/nautilus-application.c: (check_required_directories): Mark
	strings for translation that we had missed before.
	* src/nautilus-first-time-druid.c: Fix port string define so it
	doesn't have to be repeated twice (and doesn't show up as an
	"untranslated string").

	* src/nautilus-about.c: Formatting tweak.
	* src/nautilus-location-bar.c: Fix typo.

2001-02-28  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 7141, gconf entry "show_directory_item_counts"
	stored in "preferencees" directory
	
	* libnautilus-extensions/nautilus-global-preferences.h:
	Corrected a typographical error.
	
2001-02-28  Kjartan Maraas  <kmaraas@gnome.org>

	* components/services/install/command-line/eazel-alt-install-corba.c:
	Fix typo Unnstalling -> Uninstalling
	
2001-02-28  John Harper  <jsh@eazel.com>

	reviewed by Ramiro Estrugo <ramiro@eazel.com>

	Fixed bug 7111 (Icons appear in formation, then shift, when
	page first loads). This also fixed bugs 4174 (NautilusLabel
	needs to handle text with descenders better.) and 2865 (Text
	underlining should honor the rendered string's baseline):

	* librsvg/rsvg-ft.c (rsvg_ft_measure_or_render_string): don't
	use the union of the bounding boxes of the glyphs to find the
	overall bounding box, for the vertical component use the actual
	font metrics. Also set the underline_position and
	underline_thickness fields of the returned glyph structure

	* librsvg/rsvg-ft.h (struct _RsvgFTGlyph): added two new
	fields: underline_position and underline_thickness

	* libnautilus-extensions/nautilus-smooth-text-layout.c
	(smooth_text_layout_line_list_draw_to_pixbuf): don't just draw
	the underline under the glyph's rectangle, draw it where the
	glyph object wants it to be (using
	nautilus_glyph_get_underline_rectangle (), which for text uses
	the actual underline information from the font)

	* libnautilus-extensions/nautilus-glyph.h,
	libnautilus-extensions/nautilus-glyph.c
	(nautilus_glyph_get_underline_rectangle): new function, fills
	in an ArtIRect corresponding to the underline of the given
	glyph object

	* components/services/nautilus-dependent-shared/eazel-services-header.c: 
	* libnautilus-extensions/nautilus-tabs.c,
	libnautilus-extensions/nautilus-smooth-text-layout.c,
	libnautilus-extensions/nautilus-icon-canvas-item.c
	* src/nautilus-sidebar-title.c, src/nautilus-sidebar-tabs.c

	Tweaked a few hardcoded constants to fix minor changes in font
	layout (this part was checked by Arlo)

2001-02-27  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Oslen <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(dump_tree_helper):

	Added debug info of packages modifies list, so the logging on
	upgrading packages isn't so confusing.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(eazel_install_packagelist_parse):

	Force the XML parser to ignore any <xmp> .. </xmp> tags, which may
	or may not fix some people's issues with the installer not being
	able to parse the server XML sometimes.
	
	* components/services/install/lib/eazel-package-system-types.h:

	Fix old reference to soft_depends.
	
	* components/services/install-view/Makefile.am:
	* components/services/install-view/nautilus-service-install.c:
	* components/services/install-view/nautilus-service-install.h:

	These files are useless.
	
	* nautilus-installer/src/installer.c: (collect_failure_info),
	(eazel_install_get_depends), (eazel_installer_initialize):

	Use the new path to the package-list.xml file.
	
	* nautilus-installer/src/main.c: (segv_handler):

	Spelling fix.

2001-02-27  Arlo Rose  <arlo@eazel.com>

	* icons/default.xml:
	Tiny tweak.

2001-02-27  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/arlo.xml:
	* icons/crux_eggplant/crux_eggplant.xml:
	* icons/default.xml:
	Changed the default background color so that the list
	view looks better.

2001-02-27  Pavel  <pavel@eazel.com>

	reviewed by: Arlo Rose <arlo@eazel.com>

	Fix 1509: List view draws using incorrect design specification
	
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_setup_style_colors):
	Tweak color shifting values with Arlo to get better color ranges
	for the list view grid.

2001-02-27  Mike Fleming  <mfleming@eazel.com>

	Bug 6965 -- move to using report_redirect.
	Commited so Darin can debug report_redirect.

	* components/mozilla/nautilus-mozilla-content-view.c:
	(view_load_location_callback), (mozilla_realize_callback),
	(mozilla_title_changed_callback), (mozilla_location_callback),
	(mozilla_net_start_callback), (mozilla_net_stop_callback),
	(mozilla_progress_callback), (mozilla_dom_mouse_click_callback),
	(vfs_open_callback), (navigate_mozilla_to_nautilus_uri),
	(update_nautilus_uri):


2001-02-27  Pavel Cisler  <pavel@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix 7116: (Location bar grows taller causing a re-layout
		   of the icon view)
	
	* src/nautilus-window.c: (set_dummy_initial_view_as_menu),
	(nautilus_window_constructed):
	Populate the "View as" menu the first time it is created with
	a dummy "View as ..." menu item to prevent it from comming up in
	a shrunken state that gets resized later and re-shuffles the window.

2001-02-26  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer <robey@eazel.com> sez "Looks
	good... Wow, I wonder how long the softcat lookup-by-feature thing
	was broken before? (doh!)"

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (something_failed):
	Moved a duplicate fprintf that caused problems to be printed
	twice.
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	Added a string sequence of features. Need this so the clients can
	print "package foo needs file libfoo.so" instead of "package foo
	needs another package".
	
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_string_sequence_to_glist),
	(g_list_to_corba_string_sequence),
	(corba_packagedatastruct_fill_from_packagedata),
	(corba_packagedatastruct_fill_deps),
	(packagedata_tree_from_corba_packagedatastructlist):
	Fill in and copy and convert and stuff the new features list.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(eazel_install_check_existing_packages), 
	Don't set force when epochs are involved, but set a majick
	datafield in the packsys object.
	(check_tree_helper), 
	After handling packagebreaks for package P, don't set P->status to
	partly resolved unless all the breaks have been fixed.
	(check_no_two_packages_has_same_file),
	Don't let force disable file conflict check, only
	ignore-file-conflicts.
	(check_conflicts_against_already_installed_packages),
	Removed the comments for bug 5720.
	(check_feature_consistency):
	Added package pointer and name to some debug output.

	* components/services/install/lib/eazel-package-system-rpm3.c:
	(make_rpm_argument_list), 
	Check the majick epoch flag, and add --force if set.	
	(check_require_is_not_a_feature),
	Wrote a function that checks to see if a package requirement is
	also a provides of the same package.
	(eazel_package_system_rpm3_packagedata_fill_from_header):
	Use forementioned function (solves problem for badly made rpms)
	
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_get_readable_name):
	Changed to use ->features instead of ->provides
	
	* components/services/install/lib/eazel-softcat.c:
	(get_search_url_for_package):
	When querying for a feature, use ->features instead of ->provides.

2001-02-27  Ramiro Estrugo  <ramiro@eazel.com>

	* test/test-nautilus-label-flavorful.c:
	(increasing_label_window_new), (decreasing_label_window_new):
	Fix this so I can debug a font problem somewhere else.
	
2001-02-27  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* configure.in: added rule for package-list.xml.in
	* nautilus-installer/package-list.xml.in: added file
	  to keep text for the installer.  This gets served by
	  the server but it is needed to provide text for the
	  installer. http://bugzilla.eazel.com/show_bug.cgi?id=3448

2001-02-27  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.h:
	Fix incorrect class name in the GTK_CHECK_CLASS_CAST
	macro. We were using NautilusIconListView instead of
	NautilusIconContainerClass.
	
2001-02-27  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Finished bug 6950 (need new report_redirect call in addition to
	report_location_change).

	* src/nautilus-window-manage-views.c: (update_history): Split
	out this part of update_for_new_location, since it really was
	begging for a case statement. Added a redirect case, which does
	nothing (just like reload, but it needs a separate case to make
	sense anyway).
	(update_for_new_location): Use the new update_history.
	(report_redirect_callback): Do nothing if we are no longer at the
	"from" location of the redirect. In the case where we do redirect,
	make sure we update history properly, but don't update the back
	and forward lists at all.

	* src/nautilus-window-private.h:
	* src/nautilus-window.c: (remove_from_history_list): New function
	shared by the normal add case and the new remove call.
	(add_to_history_list): New name for nautilus_add_to_history_list
	to help emphasize it's a private function. Change to use
	remove_from_history_list.
	(nautilus_remove_from_history_list_no_notify): New call for use by
	the redirect code.
	(real_add_current_location_to_history_list),
	(nautilus_window_add_current_location_to_history_list): Moved
	these functions down to avoid adding a prototype for
	add_to_history_list.

2001-02-27  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Fixed 6959: (Drag local items into Trash -> "You cannot copy items
		    into the Trash" error)

	* libnautilus-extensions/nautilus-drag.c:
	(nautilus_drag_default_drop_action_for_icons):
	Add a missing setup of the correct default and non-default drag&drop
	action when the target is "trash:".

2001-02-27  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 7096 ("Open with Other" dialog doesn't truncate
	really long file names)

	Fixed bug 7108 (icon in sidebar vanishes & reappears at load time)

	* libnautilus-extensions/nautilus-program-chooser.c:
	(get_file_name_for_display): New function, returns a truncated
	copy of the file name.
	(program_file_pair_get_long_status_text),
	(run_program_configurator_callback),
	(nautilus_program_chooser_new),
	(nautilus_program_chooser_show_no_choices_message):
	Use truncated file name whenever file name is displayed.
	
	* src/nautilus-sidebar-title.c: 
	Added "determined_icon" boolean to Details struct.
	(nautilus_sidebar_title_set_file): set determined_icon to
	FALSE when new file comes along.
	(update_icon): set determined_icon to TRUE when any non-NULL
	pixbuf is determined for this file. Only check
	nautilus_icon_factory_icon_is_ready_for_file () if 
	determined_icon is FALSE, to avoid the icon vanishing
	temporarily because someone invalidated some NautilusFile
	attributes.

2001-02-27  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Did most of the work for bug 5779, separating out the Eazel logos
	so they won't be used by non-Eazel folks making changes to
	Nautilus if they choose to do "non-approved" changes (allowed by
	GPL of course).
	
	* nautilus.spec.in: Add new logos.
	* configure.in: Add eazel-logos and eazel-logos/throbber.
	* Makefile.am: Add the eazel-logos subdirectory.
	* eazel-logos/Makefile.am: Created.
	* eazel-logos/throbber/Makefile.am: Created.
	
	* components/services/nautilus-dependent-shared/icons/eazel-logo-right-side-logo.png:
	* icons/About_Image.png:
	* icons/about_background.png:
	* icons/default.xml:
	* icons/druid_header.png:
	* icons/throbber/001.png:
	* icons/throbber/002.png:
	* icons/throbber/003.png:
	* icons/throbber/004.png:
	* icons/throbber/005.png:
	* icons/throbber/006.png:
	* icons/throbber/007.png:
	* icons/throbber/008.png:
	* icons/throbber/009.png:
	* icons/throbber/010.png:
	* icons/throbber/011.png:
	* icons/throbber/012.png:
	* icons/throbber/013.png:
	* icons/throbber/014.png:
	* icons/throbber/015.png:
	* icons/throbber/016.png:
	* icons/throbber/017.png:
	* icons/throbber/018.png:
	* icons/throbber/019.png:
	* icons/throbber/020.png:
	* icons/throbber/021.png:
	* icons/throbber/022.png:
	* icons/throbber/023.png:
	* icons/throbber/024.png:
	* icons/throbber/025.png:
	* icons/throbber/026.png:
	* icons/throbber/027.png:
	* icons/throbber/028.png:
	* icons/throbber/029.png:
	* icons/throbber/030.png:
	* icons/throbber/Makefile.am:
	* icons/throbber/rest.png:
	Updated with non-logo versions.

	Did 90% of the work for bug 6950 (need new report_redirect call in
	addition to report_location_change). While working on that, I also
	moved the deferral of outgoing calls that is done in the Mozilla
	component so that it is done by the NautilusView class instead.

	* libnautilus/nautilus-view-component.idl: Added report_redirect.
	* libnautilus/nautilus-view.h: Added report_redirect.
	* libnautilus/nautilus-view.c: (queue_outgoing_call): Added
	queing for the outgoing side.
	(nautilus_view_initialize): Allocate queue.
	(nautilus_view_destroy): Deallocate queue.
	(str_list_copy): Utility needed here because we can't use
	libnautilus-extensions.
	(list_free_deep_callback): New. Used in queuing code.
	(free_location_plus_callback): New. Used in queueing code.
	(call_open_location_in_this_window),
	(call_open_location_prefer_existing_window),
	(call_open_location_force_new_window),
	(call_report_location_change), (call_report_redirect),
	(call_report_selection_change), (call_report_status),
	(call_report_load_underway), (call_report_load_progress),
	(call_report_load_complete), (call_report_load_failed),
	(call_set_title), (call_go_back): Functions that get queued.
	These have the bulk of the code to do work.
	(nautilus_view_open_location_in_this_window),
	(nautilus_view_open_location_prefer_existing_window),
	(nautilus_view_open_location_force_new_window),
	(nautilus_view_report_location_change),
	(nautilus_view_report_redirect),
	(nautilus_view_report_selection_change),
	(nautilus_view_report_status),
	(nautilus_view_report_load_underway),
	(nautilus_view_report_load_progress),
	(nautilus_view_report_load_complete),
	(nautilus_view_report_load_failed), (nautilus_view_set_title),
	(nautilus_view_go_back): These functions now simply queue the work
	that needs to be done.
	
	* src/nautilus-view-frame-corba.c: (free_location_plus_callback):
	Add a new field for the "from_location" needed for redirect.
	(report_redirect): The actual function to do the work.
	(impl_Nautilus_ViewFrame_report_redirect): Queue function.
	* src/nautilus-view-frame.h:
	* src/nautilus-view-frame-private.h:
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_initialize_class): Create report_redirect
	signal.
	(nautilus_view_frame_report_redirect): Emit the signal.
	* src/nautilus-window-manage-views.c: (report_redirect_callback):
	Code to implement the redirect. For now this does the exact same
	thing as report_location_change. This is where all the remaining
	work to fix the bug goes.

	* components/mozilla/nautilus-mozilla-content-view.c:
	(view_load_location_callback), (mozilla_title_changed_callback),
	(mozilla_net_start_callback), (mozilla_net_stop_callback),
	(mozilla_link_message_callback), (mozilla_progress_callback),
	(mozilla_dom_mouse_click_callback),
	(navigate_mozilla_to_nautilus_uri), (update_nautilus_uri),
	(eazel_services_scheme_from_http): Remove the "async" calls that
	defer calls until timeout time now that NautilusView itself does
	that for all components.

	* libnautilus-extensions/nautilus-gtk-extensions.h:
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_marshal_NONE__POINTER_POINTER_POINTER_POINTER):
	Added new marshal function needed for report_redirect.
	
	Other changes.
	
	* THANKS: Add some more contributors, after running the script
	to detect new ChangeLog entries.
	
2001-02-27  John Harper  <jsh@eazel.com>

	* cut-n-paste-code/widgets/e-paned/README.changes: updated this
	file to list previous changes to e-paned, as well as the fix I
	just made

2001-02-27  John Harper  <jsh@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 6294 (Sidebar gets smaller each time you open a new
	Window) and probably 6499 (Sidebar grows each time a window is
	opened):

	* cut-n-paste-code/widgets/e-paned/e-paned.c
	(e_paned_compute_position): fixed a bug in when it stores the
	last allocation of the widget. This in turn causes the widget
	not to do the annoying scaled resizing if the position of the
	splitter was set before the first size_allocate invocation

	* cut-n-paste-code/widgets/e-paned/README.changes: added this
	file describing the changes I had to make to the widget

	I'm also going to submit this patch to the gal maintainers

2001-02-27  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 7019, emblem names are not aligned vertically in
	show properties or the property browser.  Fixed by adding
	a "fixed image height" attribute to nautilus-labeled-image, and
	set it in the properties window and properties browser.
	
	* libnautilus-extensions/nautilus-labeled-image.c:
	(nautilus_labeled_image_initialize), (is_fixed_height),
	(labeled_image_get_image_dimensions),
	(nautilus_labeled_image_get_image_bounds),
	(nautilus_labeled_image_get_show_image),
	(nautilus_labeled_image_set_fixed_image_height):
	added a fixed_image_height instance variable, and used it
	when appropriate
	* libnautilus-extensions/nautilus-labeled-image.h:
	added setter for the fixed image height attribute
	
	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	set the fixed image height attribute on the emblems
	* src/nautilus-property-browser.c:
	(make_properties_from_directories),
	(property_browser_category_button_new):
	set the fixed image height attribute for the emblems and also
	the category buttons
	
	fixed bug 7022, users are confused by the "shared" and "secret"
	emblems; fixed by removing them.

	* data/browser.xml:
	removed secret and shared emblem references
	* data/emblems/Makefile.am:
	removed the emblem .pngs from the makefile
	* data/emblems/secret.png:
	* data/emblems/shared.png:
	removed the emblem .pngs
	* icons/Makefile.am:
	removed the emblem .svgs from the makefile
	* icons/emblem-secret.svg:
	* icons/emblem-shared.svg:
	removed the .svgs

2001-02-27  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* nautilus.spec.in: bug 7106, updated mozilla to
		            require to 0.8 version or higher.  and
			    added conflicts for old M releases

2001-02-27  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 7086 (Hitting cntl - F will switch to search, then
	back to location bar.):

	* src/nautilus-window.c (ui_idle_handler,
	nautilu_window_ui_update): set the updating_bonobo_state flag
	in the window details structure while sync'ing the UI

2001-02-27  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 6725 (Crash on Refresh if viewed file/folder is deleted
	outside of Nautilus):

	* src/nautilus-window-manage-views.c: (free_location_change):
	Reorder so we cancel the callbacks before more I/O has the chance
	to happen.
	* libnautilus-extensions/nautilus-directory-async.c:
	(nautilus_directory_async_state_changed): Don't do any I/O for a
	NautilusDirectory object once it's destroyed. Unfortunately, it's
	still possible for destroying one NautilusDirectory object to
	cause I/O to happen on another, so this doesn't fix the bug (which
	is why we also need the change above).

	Fixed bug 7080 (Nautilus build failure on Red Hat 7.)

	* libnautilus-extensions/nautilus-medusa-support.c: Fixed the bad
	#endif with non-comment text after it.

	Worked on bug 6928 (create fallback mechanism so eazel-logos
	version of each graphic is found if present). We still need a
	separate fallback mechanism for the theme XML file, since the
	throbber has a different number of frames.

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_pixmap_directory): Simplify.
	(nautilus_pixmap_file): Look in eazel-logos directory first, so we
	will pick up logo graphics if there, and non-logo graphics otherwise.
	* test/test-nautilus-image-simple.c: (main): Remove a reference to
	a logo graphic.

	* eazel-logos/.cvsignore:
	* eazel-logos/About_Image.png:
	* eazel-logos/about_background.png:
	* eazel-logos/druid_header.png:
	* eazel-logos/eazel-logo-right-side-logo.png:
	* eazel-logos/throbber/.cvsignore:
	* eazel-logos/throbber/001.png:
	* eazel-logos/throbber/002.png:
	* eazel-logos/throbber/003.png:
	* eazel-logos/throbber/004.png:
	* eazel-logos/throbber/005.png:
	* eazel-logos/throbber/006.png:
	* eazel-logos/throbber/007.png:
	* eazel-logos/throbber/008.png:
	* eazel-logos/throbber/009.png:
	* eazel-logos/throbber/010.png:
	* eazel-logos/throbber/011.png:
	* eazel-logos/throbber/012.png:
	* eazel-logos/throbber/013.png:
	* eazel-logos/throbber/014.png:
	* eazel-logos/throbber/015.png:
	* eazel-logos/throbber/rest.png:
	* eazel-logos/default.xml:
	Added a new directory with copies of all graphics with the Eazel
	logo in them. Next we have to make this directory actually build
	and install these logos. Then Non-Eazel-logo'd graphics suitable
	for GPL will replace the original copies and these will keep the
	Eazel logo versions. The directory also contains the XML file for
	the default theme, since we need to change the throbber frames for
	the logo vs. non-logo version of the throbber.
	
	* components/services/nautilus-dependent-shared/icons/Makefile.am:
	* components/services/nautilus-dependent-shared/icons/eazel-cloud-logo.png:
	* components/services/nautilus-dependent-shared/icons/eazel-services-logo.png:
	* components/services/nautilus-dependent-shared/icons/service-summary-logo-top.png:
	* components/services/nautilus-dependent-shared/icons/startup-logo.png:
	* icons/Makefile.am:
	* icons/eazel-logo.gif:
	* icons/nautilus-logo.png:
	Removed unused graphics with the Eazel logo in them. There are a
	lot more unused graphics and someone should go through and remove
	them. I'm thinking of writing a script to do it.
	
	Other changes.

	* components/services/install/nautilus-view/.cvsignore:
	* components/services/vault/.cvsignore:
	* components/services/vault/command-line/.cvsignore:
	* data/top/.cvsignore:
	Re-removed .cvsignore files for empty directories.

	* THANKS: Corrected one email address.
	* check-THANKS.pl: Updated for the latest ChangeLog typos.
	
2001-02-27  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 7068 (Icon View lags behind changes to
	Icon Captions window)

	The correct behavior depended on the order in which
	preferences callbacks were processed, which is not
	something upon which one should rely.

	* src/file-manager/fm-icon-text-window.h:
	* src/file-manager/fm-icon-text-window.c:
	(icon_captions_changed_callback): Removed this function.
	(fm_get_text_attribute_names_preference): Changed name
	from fm_get_text_attribute_names_preference_or_default;
	now reads preference as well as returning latest well-formed
	version of preference (formerly the preference-reading code
	and preference-returning code were separated, with tragic
	consequences).
	(synch_menus_with_preference): Updated for name change.

	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_get_icon_text_attribute_names): Updated
	for name change.

2001-02-27  Eric Fischer <eric@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* nautilus.spec.in:
	Fix mozilla dependency to want version >= 0.7 instead of
	exactly 0.7.

2001-02-27  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Seth Nickell  <snickell@stanford.edu>

	Fix bug 7012 - Space underneath some text lines shrunk.  This was
	an unfortunate regression due to smooth text rendering
	optimizations.
	
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(draw_or_measure_label_text_aa): Restore the 2 pixel line spacing
	in icon text.

	* src/nautilus-sidebar-title.c:
	(nautilus_sidebar_title_initialize): Add a 2 pixel line spacing
	offset between label widgets in the sidebar title.
	
2001-02-27  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fix bug 7001 - CRITICAL received when dragging icons to sidebar
	icon.  The problem was that the NautilusLabel text with a drop
	shadow offset (such that 2 labels draw) was being clipped as one
	single text layout.  So, some parts of the code assumed that the
	whole content area (the union of the 2 text layouts) was available
	for drawing and thus bad dimenstions were fed to the smooth text
	layout drawing functsions.

	* libnautilus-extensions/nautilus-smooth-text-layout.h:
	* libnautilus-extensions/nautilus-smooth-text-layout.c:
	(nautilus_smooth_text_layout_draw_to_pixbuf),
	(nautilus_smooth_text_layout_draw_to_pixbuf_shadow): New function
	to draw the layout text with a shadow.
	
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_size_request), (label_paint_pixbuf_callback): Pass
	in the dirty area instead of the event.  Do this to make it clear
	that the only thing we care about in this function is the dirty
	area and no other event attributes.
	change that I happened to make while fixing the bug.
	(label_composite_text_callback)
	(label_composite_text_and_shadow_callback): Factor out the code to
	draw text and "text and shadow" into 2 callbacks.  
	(label_composite_text_callback_cached): Factor out the code to
	draw the cached label (for the solid background case)
	(label_paint) (paint_label_smooth): Split up the expose event code
	into 2 pieces to make it easier to grok.
	(nautilus_label_expose_event): Split out the code from here into
	two functions.
	(label_get_text_dimensions): Return only the text dimensions
	without the drop shadow text offset.  (label_get_text_bounds):
	Return the bounds only for the text.
	(label_get_content_dimensions):  New function to get the full
	content dimension.  (label_get_content_bounds): New function to
	get the content bounds; the content bounds is the union of the
	text and drop shadow text bounds.

2001-02-27  Dan Mueth  <dan@eazel.com>

	reviewed by: Ramiro Estrugo  <ramiro@eazel.com>

	Bug #6908: Activating ScrollKeeper dependency and
	update of database upon installation

	* nautilus.spec.in:

2001-02-27  Dan Mueth  <dan@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Purpose: fix tinderbox death

	Commenting out scrollkeeper stuff until we get scrollkeeper
	> 0.1.0 on tinderbox.
	* nautilus.spec.in:

2001-02-26  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Rebecca Schulman <rebecka@eazel.com>

	Fix bug 7051 (Login dialog mis-capitalizes "Services")

	* components/services/summary/nautilus-summary-dialogs.c
	(nautilus_summary_show_login_dialog): Change "Eazel services" to
	"Eazel Services".

	* components/services/trilobite/helper/eazel-helper.c: *
	configure.in: * nautilus-installer/src/installer.c:
	(eazel_installer_setup_texts), (eazel_install_get_depends): *
	nautilus.spec.in: Fixed other references I found to "Eazel
	services" by grepping,

2001-02-27  Mike Fleming  <mfleming@eazel.com>

	reviewed by: Eskil Olsen <eskil@eazel.com>

	Bug 7008: Navigation to anchors inside a document opened through
	gnome-vfs does not work.

	Fixed by manually navigating to anchors inside those documents.

	Note that this means anchor links only work inside the same document;
	external anchor links to gnome-vfs pages still do not work.

	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/mozilla-events.h:
	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_dom_mouse_click_callback)

2001-02-26  Mike Fleming  <mfleming@eazel.com>

	reviewed by: Ramiro Estrugo  <ramiro@eazel.com>
	
	Bug 6958: Calling gtk_moz_embed_open_stream before control has realized
	will eventually cause crash, so all opens are postponed until after the
	stream has realized.

	Also changed "reload" code to eliminate case where the component and
	mozilla could get out of sync

	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(mozilla_realize_callback), (mozilla_dom_mouse_click_callback),
	(vfs_open_callback), (navigate_mozilla_to_nautilus_uri):

2001-02-26  Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in: upped version to 0.8.3 for development

2001-02-26  Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in: upped version to 0.8.2 for release

2001-02-26  John Harper  <jsh@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 7073 (Alt-vs-Control, Sawfish-vs-Nautilus, arrow key
	bindings problems.) - I also changed sawfish to use control by
	default again.

	* libnautilus-extensions/nautilus-list.c
	(nautilus_list_keyboard_move_to, nautilus_list_keyboard_space):
	changed GDK_CONTROL_MASK to GDK_MOD1_MASK to be consistent with
	the icon container

2001-02-26  John Harper  <jsh@eazel.com>

	* components/services/install/nautilus-view/.cvsignore: 
	* components/services/vault/.cvsignore: 
	* components/services/vault/command-line/.cvsignore: 
	* data/top/.cvsignore: 
	* help/nautilus-quick-reference/C/.cvsignore: 
	* help/nautilus-user-manual/C/.cvsignore: 
	* help/nautilus-user-manual/es/.cvsignore: 
	* helper-utilities/xml-migrate/.cvsignore:

	Added and updated .cvsignore files to shut up cvs update

2001-02-26  Eric Fischer <eric@eazel.com>

	reviewed by: Robin Slomkoswki <rslomkow@eazel.com>

	* nautilus.spec.in:
	Remove nautilus-xml-migrate.1 from list of files to include
	in RPM, because it's breaking the build and I'm too brain-dead
	right now to figure out what I did wrong.

2001-02-26  Eric Fischer <eric@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/installer.c: (eazel_install_progress),
	(eazel_install_preflight):
	Fix printf() format specifiers for installer->total_mb so
	gcc -Wall will stop complaning that a long int is being
	printed with a %d specifier.

2001-02-26  John Harper  <jsh@eazel.com>

	Fixed bug 6825 (nesting indent in tree panel too large,
	requires excessive scrolling):

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_initialize): call gtk_ctree_set_indent to
	set the indent size of the tree view to 12 pixels (instead of
	the default 20)

	Fixed a couple of memory leaks:

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_destroy): remember to free the
	unparented_tree_nodes list
	* components/tree/nautilus-tree-model.c
	(nautilus_tree_model_destroy, remove_all_nodes): remember to
	free the unparented_nodes list

	Try to find more information about bug 7018:

	* components/tree/nautilus-tree-view.c,
	components/tree/nautilus-tree-model.c,
	components/tree/nautilus-tree-node.c: added a lot of error
	checking (i.e. g_return_if_fail, etc)

2001-02-26  Dan Mueth  <dan@eazel.com>

	reviewed by: Eric Fischer <eric@eazel.com>

	Added a timestamp file so that OMF files only get
	built at build time and not at install time.
	* help/docs.make: 
	* help/htmldocs.make:

	Added explicit dependency on ScrollKeeper and added
	"make -k ; make test" in place of "make -k test".
	* nautilus.spec.in:

2001-02-26  Andy Hertzfeld  <andy@eazel.com>

	* data/linksets/home.xml:
	fixed bug 7067, on clean install, services icon is missing. Arlo
	recently removed the old services hand icon, but didn't update
	the image reference in the linkset; fixed by updating it.
	
2001-02-26  Ramiro Estrugo  <ramiro@eazel.com>

	* helper-utilities/xml-migrate/.cvsignore:
	Ignore generated files.

2001-02-26  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: John Harper  <jsh@eazel.com>

	* libnautilus-extensions/nautilus-gdk-font-extensions.c:
	(nautilus_gdk_font_get_italic), (bold_font_table_free_one_node),
	(bold_font_table_free), (nautilus_gdk_font_get_bold),
	(font_bitmap_get_by_size), (nautilus_gdk_font_get_larger),
	(nautilus_gdk_font_get_largest_fitting), (font_get_bold),
	(font_list_fonts), (font_list_table_free_one_node),
	(font_list_table_free), (font_list_fonts_cached), (font_get_name),
	(font_get_size_in_pixels),
	(xlfd_string_could_be_scalable_non_bitmap):
	Rename some private files (remove the nautilus_ prefix) to make it
	clear they are not public.
	Add caching of the expensive list_fonts () call.  Also cache the
	results of get_bold_font ().
	Always return a valid font for get_bold_font() even if a bold font
	is not found.
	
2001-02-26  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/i-directory-12-aa.png:
	* icons/arlo/i-directory-12.png:
	* icons/arlo/i-directory-192.png:
	* icons/arlo/i-directory-20-aa.png:
	* icons/arlo/i-directory-20.png:
	* icons/arlo/i-directory-24-aa.png:
	* icons/arlo/i-directory-24.png:
	* icons/arlo/i-directory-36-aa.png:
	* icons/arlo/i-directory-36.png:
	* icons/arlo/i-directory-96.png:
	* icons/arlo/i-directory.xml:
	* icons/crux_eggplant/Makefile.am:
	* icons/crux_eggplant/i-directory-12-aa.png:
	* icons/crux_eggplant/i-directory-12.png:
	* icons/crux_eggplant/i-directory-192.png:
	* icons/crux_eggplant/i-directory-20-aa.png:
	* icons/crux_eggplant/i-directory-20.png:
	* icons/crux_eggplant/i-directory-24-aa.png:
	* icons/crux_eggplant/i-directory-24.png:
	* icons/crux_eggplant/i-directory-36-aa.png:
	* icons/crux_eggplant/i-directory-36.png:
	* icons/crux_eggplant/i-directory-96.png:
	* icons/crux_eggplant/i-directory.xml:
	Lots of folder stuff...

2001-02-26  J Shane Culpepper  <pepper@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* README:
	Reflecting the need for minimum Mozilla version of 0.8

	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(mozilla_new_window_callback):

	Fixed spelling of Javascript to JavaScript.  Removed the
	js_status callback because it was only added for debugging
	and Ramiro found a bug in it.  Finish bug #6885.


	* configure.in: Nautilus mozilla component now requires
	0.8.  Fix for bug #7042.

2001-02-26  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 7023 (Multi-window mode opens second instance of same
	window.)

	* src/nautilus-window-manage-views.c:
	(open_location_prefer_existing_window_callback): For windows that
	are changing locations, we want to reuse them if the pending
	location is the one we are trying to open.

2001-02-26  John Harper  <jsh@eazel.com>

	reviewed by: Michael Engber <engber@eazel.com>

	Fixed bug 6898 (Tree view initialization may be slower than in
	PR3). Instead of instantiating and destroying Nautilus_Metafile
	bonobo objects each time metadata is queried, cache an object
	for each directory:

	* libnautilus-extensions/nautilus-directory-metafile.c
	(corba_object_is_local, corba_object_get_servant): new
	functions. These are ORBit dependent hacks

	(get_metafile): cache the Nautilus_Metafile object in the
	NautilusDirectory. Use the above ORBit hacks to break the
	circular reference when both client and servant are in the same
	process (the servant has always referenced the directory,
	caching the metafile in the directory introduces the cycle)

	* libnautilus-extensions/nautilus-directory-private.h
	(NautilusDirectoryDetails): added field metafile_corba_object

	* libnautilus-extensions/nautilus-directory.c
	(nautilus_directory_destroy): unref the cached
	Nautilus_Metafile object if its non-nil

	* libnautilus-extensions/nautilus-metafile.c,
	libnautilus-extensions/nautilus-metafile.h
	(NautilusMetafileDetails): temporarily moved to
	nautilus-metafile.h

	* libnautilus-extensions/nautilus-metafile.c (destroy): only
	unref the metafile's NautilusDirectory if the
	directory_ref_is_gone flag isn't set (set by the get_metafile
	method of nautilus-directory-metafile.c when it breaks the
	cycle)

2001-02-26  John Harper  <jsh@eazel.com>

	reviewed by Darin Adler <darin@eazel.com>

	Moved much of the BonoboUI overhead to the idle handler. This
	should decrease latency when opening new windows.

	* src/nautilus-window-private.h: added fields to
	NautilusWindowDetails structure: ui_change_depth, ui_idle_id,
	ui_is_frozen, ui_pending_menu_initialize

	* src/nautilus-window.c, src/nautilus-window.h
	(nautilus_window_ui_freeze, nautilus_window_ui_thaw): new
	functions. Used to intelligently freeze and thaw the
	BonoboUIEngine associated with the window's container. The
	thawing (and thus the updating) is done in an idle handler

	(nautilus_window_ui_update): used to defeat the UI deferral,
	and update immediately

	(nautilus_window_constructed): moved part of the menu bar
	initialization to the idle handler

	* src/nautilus-window-manage-views.c,
	src/nautilus-window-menus.c, src/nautilus-window-toolbar.c,
	src/nautilus-window.c: call nautilus_window_ui_freeze before
	doing any UI changes, and nautilus_window_ui_thaw afterwards

	* src/nautilus-window-menus.c
	(nautilus_window_initialize_menus): split into two functions:
	nautilus_window_initialize_menus_part_1 and _part_2. Part two
	populates the `Go' and `Bookmarks' menus (and is deferred until
	the idle loop)

2001-02-26  Eric Fischer <eric@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com> (code)
	reviewed by: Robin Slomkowski <rslomkow@eazel.com> (Makefile, etc.)

	Fix bug 6197 (write script to convert metafiles and links to
	ower-case XML):

	* configure.in:
	Add helper-utilities/xml-migrate/Makefile to the list of files to
	be created.

	* helper-utilities/Makefile.am:
	Add xml-migrate to the list of subdirectories to be built.

	* helper-utilities/xml-migrate/Makefile.am:
	New Makefile: compile nautilus-xml-migrate and install its manpage.

	* helper-utilities/xml-migrate/xml-migrate.c:
	New program: searches a directory for the old uppercase XML files
	and turns them into lowercase ones.

	* helper-utilities/xml-migrate/nautilus-xml-migrate.1:
	New manpage: for the aforementioned program.

	* nautilus.spec.in:
	Include nautilus-xml-migrate and its manpage in the RPMs.

2001-02-26  Michael Engber  <engber@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(activation_uri_done):
	activation_uri_done (nautilus-directory-async.c) was not
	calling nautilus_file_changed - bug 7044.

2001-02-26  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 7023 (Multi-window mode opens second instance of same
	window.)

	* src/nautilus-window-manage-views.c:
	(open_location_prefer_existing_window_callback): For windows that
	are changing locations, we want to reuse them if the pending
	location is the one we are trying to open.

2001-02-26  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 5812 (Some preferences widgets don't display correct
	values when Preferences dialog first displayed at Beginner level)

	The bug here was that all the widgets only had their state set
	when they were created. They are created when the Preferences
	dialog is first shown, even for the preferences that aren't
	displayed at this user level. So changing the user level to a
	higher one where there preference now appears but has a different
	value would leave the widget displaying the "hidden" value instead
	of the correct value. Fixed by making the code that updates the
	visibility also update the displayed values.

	* libnautilus-extensions/nautilus-preferences-item.h:
	Public prototype for nautilus_preferences_item_update_displayed_value.

	* libnautilus-extensions/nautilus-preferences-item.c:
	Added change_signal_ID to Details struct.
	
	(preferences_item_construct): Store the item type in the
	Details. Surprisingly, this wasn't being done before. Also,
	call nautilus_preferences_item_update_displayed_value after
	creating the item.

	(preferences_item_update_enum),
	(preferences_item_create_enum),
	(preferences_item_update_short_enum),
	(preferences_item_create_short_enum),
	(preferences_item_update_boolean),
	(preferences_item_create_boolean),
	(preferences_item_update_editable_string),
	(preferences_item_create_editable_string),
	(preferences_item_update_integer),
	(preferences_item_create_integer),
	(preferences_item_update_font_family),
	(preferences_item_create_font_family),
	(preferences_item_update_theme), 
	(preferences_item_create_theme): Extract the code that sets
	the displayed widget value from _create_ to new function
	_update_. It's now called at the end of preferences_item_construct
	instead of in each _create_ function. Also, store the ID for each
	signal handler that monitors widget changes in Details.
	
	(nautilus_preferences_item_update_displayed_value): Call appropriate
	update function for item type. Block "change" signal handler while
	updating widgetry to avoid redundant preference changed notices.

	* libnautilus-extensions/nautilus-preferences-group.c:
	(nautilus_preferences_group_update): Call
	nautilus_preferences_item_update_displayed_value


	Other changes:
	
	* src/nautilus-shell-ui.xml: Return of the ellipsis in "About Nautilus...",
	by popular demand.

2001-02-26  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: Laszlo Kovacs  <laszlo.kovacs@sun.com>

	* components/help/hyperbola-filefmt.c:
	(fmt_scrollkeeper_tree_empty):
	Fix missing braces that hid a bug which 
	was exposed by the "may be used uninitialized"
	error in C.  

2001-02-26  Laszlo Kovacs  <laszlo.kovacs@sun.com>

	reviewed by Ramiro Estrugo

	* components/help/hyperbola-filefmt.c:
	fixed bug 7030
	I added the fallback to the English (C) tree in the
	sidebar if the current locale tree is empty. This is 
	only about tree fallback, not document fallback, ie 
	the docs will not individually fallback to English 
	(this has to be implemented later on after Nautilus
	1.0).

2001-02-26  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c: (add_reset_property):
	fixed bug 7021, reset in colors pane messed up, by adding a call
	to turn the raw pixbuf into a property chit.
	
2001-02-26  Ramiro Estrugo  <ramiro@eazel.com>

	* .cvsignore:
	* help/nautilus-user-manual/es/.cvsignore:
	* omf-install/.cvsignore:
	* test/.cvsignore:
	* user-guide/C/.cvsignore:
	Ignore generated files.
	
2001-02-26  Eskil Heyn Olsen  <eskil@eazel.com>

	sleepy reviewer: Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(check_no_two_packages_has_same_file), (install_packages):
	when adding extrapackges to main packageslist, check that we're
	not adding duplicates.
	
	* components/services/install/lib/eazel-package-system-types.c:
	(eazel_install_package_compare):
	remopved debug outpu

2001-02-26  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen <eskil@eazel.com>

	* components/services/install-view/callbacks.c:
	(nautilus_service_install_preflight_check):
	* components/services/install-view/forms.c: (add_padding_to_box),
	(generate_install_form), (make_query_box):
	* components/services/install-view/nautilus-service-install-view.c:
	* components/services/install-view/nautilus-service-install-view.h:

	Put the preflight query into a pane so it can be made scrollable
	if the list of packages gets too long.
	
	* nautilus-installer/src/installer.c: (eazel_install_progress),
	(eazel_download_progress), (install_failed),
	(eazel_install_preflight):
	* nautilus-installer/src/installer.h:

	Fix the progress bars to make sense.  The fact that they even
	looked like they were 90% working before is just a bizarre
	coincidence.

2001-02-26  Arik Devens  <arik@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 7009, view as pkg lists inaccurate rpm filesize.
	
	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_initialize): Changed Size to Installed Size to
	more accurately reflect the information we are attempting to
	convey.

2001-02-26  Dan Mueth  <dan@eazel.com>

	reviewed by: Tux

	Fixing bug: 6983 by changing "help:nautilus" to
	"help:nautilus-user-manual".

	* src/nautilus-window-menus.c:

2001-02-25  Eskil Heyn Olsen  <eskil@eazel.com>

	glanced at by: Ian McKellar  <ian@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_download_progress_signal),
	(eazel_install_progress_signal):
	Fixed bug 6985, no mo're \r's in the translated strings
	Fixed bug 7003
	
	* components/services/install/lib/eazel-install-logic2.c:
	(check_tree_helper),

	(check_no_two_packages_has_same_file),
	indent fixed
	Nicer output in the non-debug output mode (use readable packagename)
	Removed call to add_file_conflict untill SoftCat db is rebuild.
	
	(check_conflicts_against_already_installed_packages),
	Test for file existance, if present, do the proper check.
	Nicer output in the non-debug ouptut mode (use readable packagename)

	(check_feature_consistency), 
	Set a integer datafield to not recheck consistency for packages
	when doing a revive cycle.
	Added check to avoid noting certain updates as breaks.
	Added check to avoid renoting revived breaks (fixes bug 6811)

	(do_file_conflict_check),
	Call check_tree_for_conflicts after feature_consistency_check to
	revive FeatureBreaks (fixes bug 6811)
	
	(eazel_uninstall_globber):
	Removed a c++ commented out debug call.

	Also added I18N tags to all g_message output and revamped some
	output to be more translator friendly. Ensured that debugless
	output still makes sense.

	Fixed a bug in uninstall where it would report too many packages.

	Removed add_to_breaks_if_new, replaced it with the "normal"
	g_list_find_custom call.
	
	* components/services/install/lib/eazel-package-system-types.h:
	Changed packagedata->obsolotes into a GList *

	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_finalize), (packagedata_copy),
	(packagedata_fill_in_missing), (packagedata_get_readable_name),
	(eazel_install_package_compare), (packagedata_dump_int):
	treat packagedata->obsolotes as a GList* and not a char*.

	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_packagedata_fill_from_header):
	Correctly read the RPMTAG_OBSOLETES and put into the packagedata object.
	
2001-02-26  Arik Devens  <arik@eazel.com>

	reviewed by: John Harper  <jsh@eazel.com

	Partial fix for bug 5701, Icon stretching is slow and
	CPU-intensive.
		
	* libnautilus-extensions/nautilus-icon-container.c:
	(update_stretch_at_idle), (continue_stretching): Moved the
	stretching code to an idle handler to speed it up and remove
	blocking.  
	* libnautilus-extensions/nautilus-icon-private.h: Added three new
	members to the IconContainerDetails struct for the idle handler.

2001-02-26  Dan Mueth  <dan@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* help/docs.make: Small fix.  Won't take effect until
	nautilus.spec.in stops explicitly setting $prefix to
	hold RPM_BUILD_ROOT.  When that is fixed, this will
	allow OMF files to hold the correct path to the docs.
	* nautilus.spec.in: Removed a line referring to an image
	which Arlo removed earlier.

2001-02-26  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/i-regular-20-aa.png:
	* icons/arlo/i-regular-20.png:
	Added a 20 pixel version for the Tree view and menus.

2001-02-26  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: John Harper <jsh@eazel.com>

	Fixed bug 3898, selection in icon view extremely slow
	
	I increased the performance of drag selection of icons in a few ways.
	First, I avoid unneeded, repeated transforms of coordinates from
	world coordinates to canvas coordinates.  I also cached three freqeuently
	calculated dimensions; the icons bounds in canvas coordinates, the icons
	text bounds and canvas coordinates and the bounding rect of all emblems
	in canvas coordinates.  Instead of repeatedly calculating these values,
	have functions refer to the cached values.  In hit_test, I then do a
	quick intersection check of the drag rect with the cached values before
	proceeding to the more expensive intersection detection routines.
	
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	* libnautilus-extensions/nautilus-icon-canvas-item.h:
	(nautilus_icon_canvas_item_set_image), (compute_text_rectangle),
	(nautilus_icon_canvas_item_draw),
	(nautilus_icon_canvas_item_render), 
	(nautilus_icon_canvas_item_bounds), (get_icon_canvas_rectangle),
	Set up the various places that we need to update our cached items.

	(nautilus_icon_canvas_item_update_bounds):
	Update our cached values.
	
	(hit_test), (hit_test_stretch_handle):
	Perform quick interesection checks before doing more expensive checks.
	
	(nautilus_icon_canvas_item_hit_test_rectangle):
	Change function to use canvas coordinates. The caller is responsible
	to do the conversion form world to canvas. This provides a large
	optimization if this routine is caled in a loop.	
	
	* libnautilus-extensions/nautilus-icon-container.c:
	* libnautilus-extensions/nautilus-icon-container.h:
	(rubberband_select):
	Do transform of drag rect from world coordiantes to canvas canvas
	coordinates onlty once. There is no need to do this for every canvas
	item that is visted during list traversal.
	
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_container_item_at):
	Call nautilus_icon_canvas_item_hit_test_rectangle() using coordinate
	converted to canvas coordinates.
	
Mon Feb 26 03:00:03 2001  George Lebl <jirka@5z.com>

	Gene Z. Ragan  <gzr@eazel.com> was subjected to this patch and
	survived.

	* components/help/hyperbola-nav-tree.c (set_node_style):  Also
	  set HYP_TREE_NODE_BOOK type nodes to italic, which should finally
	  completely fix #6911

2001-02-26  Arlo Rose  <arlo@eazel.com>

	* icons/crux_eggplant/crux_eggplant.xml:
	A mistake in the xml file (and ChangeLog!) oops.	


	* configure.in:
	* icons/arlo/Makefile.am:
	* icons/arlo/i-regular-12-aa.png:
	* icons/arlo/i-regular-12.png:
	* icons/arlo/i-regular-192-aa.png:
	* icons/arlo/i-regular-192.png:
	* icons/arlo/i-regular-24-aa.png:
	* icons/arlo/i-regular-24.png:
	* icons/arlo/i-regular-36-aa.png:
	* icons/arlo/i-regular-36.png:
	* icons/arlo/i-regular-72-aa.png:
	* icons/arlo/i-regular-72.png:
	* icons/arlo/i-regular-96-aa.png:
	* icons/arlo/i-regular-96.png:
	* icons/arlo/i-regular-aa.png:
	* icons/arlo/i-regular.png:
	* icons/arlo/i-regular.xml:
	Changed the design of the Crux documents to have 8.5 x 11
	aspect ratio, and removed the torn out of a sprial notebook
	visual appearance.

	I also added all the sizes that Nautilus needs in both 8 bit
	and 1 bit mask mode.

	* icons/crux_eggplant/Makefile.am:
	* icons/crux_eggplant/crux_eggplant.xml:
	* icons/crux_eggplant/i-regular-192-aa.png:
	* icons/crux_eggplant/i-regular-192.png:
	* icons/crux_eggplant/i-regular-72-aa.png:
	* icons/crux_eggplant/i-regular-72.png:
	* icons/crux_eggplant/i-regular-96-aa.png:
	* icons/crux_eggplant/i-regular-96.png:
	* icons/crux_eggplant/i-regular-aa.png:
	* icons/crux_eggplant/i-regular.png:
	* icons/crux_eggplant/i-regular.xml:
	Removed the throbber and the document icons out of Crux Eggplant
	and made them point to the ones in Crux teal.

2001-02-26 Dan Mueth  <dan@eazel.com>

	reviewed by: Seth Nickell  <snickell@stanford.edu>

	Updating spec file to fix breakage... mjs removed this program.

	* nautilus.spec.in: Removed %{prefix}/bin/eazel-vault

2001-02-25  Dan Mueth  <dan@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	* po/POTFILES.in: Fixed breakage caused by mjs moving some
	files around and forgetting to update this file.

2001-02-24  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(packagedata_add_to_breaks_if_new),
	(do_requirement_consistency_check_package),
	(do_requirement_consistency_check_internal),
	(do_requirement_consistency_check), (check_tree_helper):

	Trying to make the new consistency-check stuff work, so that the
	RH62 install will succeed.  This seems to do it for me.  First,
	flatten the dep-tree before doing consistency checks, to make sure
	everything gets checked.  Second, only add a package to the breaks
	list if that package isn't already there.
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_breaks_foreach):

	Clean up one of the messages a little bit so it's less
	nonsensical.
	
	* components/services/install/lib/eazel-package-system-types.c:
	(dump_package_break_list):

	The names of these (debug messages) appeared to be reversed, which
	might have caused someone unneeded heartbreak someday.
	
	* nautilus-installer/src/installer.c: (eazel_install_preflight):

	If any packages failed before the preflight, give up.

2001-02-25 John Fleck <jfleck@inkstain.net>

	reviewed by: George Lebl <jirka@5z.org>

	* components/help/converters/gnome-db2html2/toc-elements.c
	adding code to toc_glossterm_start_elemen and
	toc_glossterm_end_element to set and unset boolean
	variable in_printed_title that determines whether we're in a
	printed title in the table of contents

2001-02-25  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Michael K. Fleming  <mfleming@eazel.com>

	* components/services/install/nautilus-view/.cvsignore:
	* components/services/install/nautilus-view/Makefile.am:
	* components/services/install/nautilus-view/Nautilus_View_install.oaf.in:
	* components/services/install/nautilus-view/callbacks.c:
	* components/services/install/nautilus-view/callbacks.h:
	* components/services/install/nautilus-view/forms.c:
	* components/services/install/nautilus-view/forms.h:
	* components/services/install/nautilus-view/main.c:
	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	* components/services/install/nautilus-view/nautilus-service-install-view.h:
	* components/services/install/nautilus-view/nautilus-service-install.c:
	* components/services/install/nautilus-view/nautilus-service-install.h:
	Move it all to components/services/install-view

	* components/services/install
	/Makefile.am: Don't build nautilus-view subdir.

	* components/services/Makefile.am: Build insall-view subdir.
	
	* components/services/install-view/Makefile.am: Don't do evil hack
	to build inventory dir.

	* components/services/vault/.cvsignore:
	* components/services/vault/Makefile.am:
	* components/services/vault/command-line/.cvsignore:
	* components/services/vault/command-line/Makefile.am:
	* components/services/vault/command-line/main.c:
	* components/services/vault/command-line/vault-operations.c:
	* components/services/vault/command-line/vault-operations.h:
	Remove old cruft.

	* configure.in: Adjust for above changes.

2001-02-25  arik devens  <arik@eazel.com

	reviewed by: John Harper  <jsh@eazel.com>

	* src/nautilus-first-time-druid.c: (download_callback): Moving the
	rest of the gtk_widget_set_sensitive calls to
	gnome_druid_set_buttons_sensitive so our choices don't get
	clobered.

2001-02-25  Michael K. Fleming  <mfleming@eazel.com>

	Bug 3887: Mozilla view only recognizes first change to proxy setting.
	Oops: the wrong integer for "network.proxy.type" being "disabled" was being
	used.
 
	* components/mozilla/main.c:
	* components/mozilla/mozilla-preferences.cpp:

Sun Feb 25 17:58:57 2001  George Lebl <jirka@5z.com>

	bored by this patch: Mike Fleming  <mfleming@eazel.com>

	Fixes #6973

	* components/help/converters/gnome-db2html2/Makefile.am: define
	  GNOMELOCALEDIR

	* components/help/converters/gnome-db2html2/gdb3html.c (main):
	  do the gettext dance as jfleck so rightly pointed out

2001-02-25  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.c: 
	(set_parameters_from_command_line): Fixed bug 7000.

	* components/services/summary/nautilus-summary-view-private.h,
	components/services/summary/nautilus-summary-view.c: changed
	things to properly internationalize strings in #defines to fix bug
	6997 (Defined "More Info" message does not end up in translation).

2001-02-25  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Seth Nickell  <snickell@stanford.edu>

	Fixed bug 6822 (Need to be able to support services that run a
	program instead of launching a URI).

	* components/services/summary/nautilus-summary-view.c:
	(summary_view_button_callback, summary_view_update_pane,
	program_uri_for_nonexistent_program, generate_service_entry_row):
	Add support for special "command:" URIs in the summary view. If
	the program specified does not exist, leave the service out of the
	listing.

2001-02-24  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Fix bug 5462 ("View as %s" and "%s Viewer" composed messages hard
	to translate) by making Nautilus view oafinfo files provide the
	full messages.

	* libnautilus-extensions/nautilus-view-identifier.h,
	libnautilus-extensions/nautilus-view-identifier.c:
	nautilus_view_identifier_new, nautilus_view_identifier_copy,
	nautilus_view_identifier_new_from_oaf_server_info,
	nautilus_view_identifier_free): Add `view_as_label' and
	`viewer_label' fields; determine them from either special new oaf
	attributes or compose them from `view_as_name'.

	* libnautilus-extensions/nautilus-program-chooser.c
	(program_file_pair_get_program_name_for_display): Use new
	identifier fields.
	* src/file-manager/fm-directory-view.c
	(add_component_to_bonobo_menu): Use new identifier fields.
	* src/nautilus-window.c (create_view_as_menu_item): Use new
	identifier fields.

	* components/hardware/Nautilus_View_hardware.oaf.in,
	components/image-viewer/Nautilus_View_image.oaf.in,
	components/loser/content/Nautilus_View_content-loser.oaf.in,
	components/mozilla/Nautilus_View_mozilla.oaf.in,
	components/music/Nautilus_View_music.oaf.in,
	components/rpmview/Nautilus_View_rpm.oaf.in,
	components/sample/Nautilus_View_sample.oaf.in,
	components/services/install/nautilus-view/Nautilus_View_install.oaf.in,
	components/services/inventory-view/Nautilus_View_inventory.oaf.in,
	components/services/login/nautilus-view/Nautilus_View_change-password.oaf.in,
	components/services/summary/Nautilus_View_services-summary.oaf.in,
	components/services/trilobite/sample/nautilus-view/Nautilus_View_service-sample.oaf.in,
	components/shell/Nautilus_View_shell.oaf.in,
	components/text/Nautilus_View_text.oaf.in,
	src/Nautilus_shell.oaf.in: Add `nautilus:view_as_label' and
	`nautilus:viewer_label' properties.

	* components/services/trilobite/libtrilobite/trilobite-file-utilities.c:
	Fix author line.

2001-02-24  Eskil Heyn Olsen  <eskil@eazel.com>

	Not reviewed, as this just contains some comments for translators.

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (delete_files):
	Added I18n comments about the (y/n) strings.

Sat Feb 24 19:50:16 2001  George Lebl <jirka@5z.com>

	Gene Z. Ragan <gzr@eazel.com> said "Groovy", so I suppose that means
	he approves of the patch.

	* components/help/hyperbola-nav-tree.c (set_node_style)
	  (ctree_populate_subnode) (reset_style_for_node) (reset_styles)
	  (hyperbola_navigation_tree_new):  Nodes of type HYP_TREE_NODE_PAGE
	  made italic to differentiate them from sections and categories,
	  fixes #6911.

	* libnautilus-extensions/nautilus-gdk-font-extensions.[ch]
	  (font_entry_has_italic_slant_test) (nautilus_gdk_font_get_italic):
	  Add a function for getting an italic font.  Mostly a cut and paste
	  the the _get_bold function.

2001-02-24  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: George Lebl <jirka@5z.com>

	Fixed bug 3546, Nautilus fails if MP3 previews in rapid succession
	
	Fixed bug 5105, Preview sound file during MP3 playback
	-> "/dev/dsp: Device or resource busy"
	
	* libnautilus-extensions/nautilus-global-preferences.h:
	Add a preference that that tracks the result of an intial
	audio output capability check during nautilus_sound_initialize().
	
	* libnautilus-extensions/nautilus-sound.c:
	(nautilus_sound_initialize):
	Check audio output capability and save the result of the check in
	a preference.
	
	(nautilus_sound_can_play_sound):
	Check saved preference instead of opening and closing esd as a
	way to check if sound output is available.  The constant opening
	and closing creating a latency problem withing esd and was
	affecting the audio preview mechanism.
	
2001-02-24  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Seth Nickell  <seth@eazel.com>
	
	Fixed bug 6944, "Move here"/"Copy here"/"Link here" popup
	menu is untranslated
	
	* libnautilus-extensions/nautilus-drag.c:
	Wrap text in N_ so that it will be properly
	localized.
	
	* po/ChangeLog:
	* po/POTFILES.in:
	Add libnautilus-extensions/nautilus-drag.c

Sat Feb 24 12:49:43 2001  George Lebl <jirka@5z.com>

	Gene Z. Ragan  <gzr@eazel.com> says it won't cause global warming if
	this is applied.

	* components/help/converters/gnome-db2html2/sect-elements.c
	  (sect_sect_start_element) (sect_sect_end_element)
	  (sect_legalnotice_start_element) (sect_legalnotice_end_element)
	  (sect_legalnotice_characters):
	  Use g_strcasecmp to compare "legalnotice" and section id's.  This
	  Fixes the bug where panel help would not be displayed at all.
	  Since the HTML sections have been converted to uppercase and thus
	  going back to sgml wouldn't work

2001-02-24  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	* po/POTFILES.in:
	removed components/music/configure.c and
	components/music/fileinfo.c to fix tinderkill.

2001-02-24  Ian McKellar  <ian@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* components/services/inventory/eazel-inventory-service.c:
	(http_post_simple), (http_post_simple_ammonite),
	(impl_Trilobite_Eazel_Inventory_upload):
	Moved the HTTP/ammonite code out into separate functions.

	(impl_Trilobite_Eazel_Inventory__set_enabled):
	Implemented the delete-inventory server call.
	This relates to bug 6184.

	* components/services/inventory/eazel-inventory-utils.c:
	(get_software_inventory), (get_digest_from_gconf),
	(update_gconf_inventory_digest), (eazel_inventory_update_md5):
	Cleanups.

	(eazel_inventory_clear_md5):
	* components/services/inventory/eazel-inventory-utils.h:
	Added function to clear the md5.

2001-02-24  Arik Devens  <arik@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Partially fixed bug 939, help URIs should display something nice
	for the "not found" case.
	Fixed bug 3112, Help URIs need design for "not found" case.
	
	* components/help/converters/gnome-info2html2/main.c:
	(file_exists), (main): Added default text to be printed out if the
	info page cannot be found.
	* components/help/converters/gnome-man2html2/gnome-man2html.c:
	(main): Added default text to be printed out if the man page
	cannot be found.

2001-02-24  Eskil Heyn Olsen  <eskil@eazel.com>

	tired reviewer was: Robey Pointer  <robey@eazel.com>

	Fixes bug 6903 6913 and 6972

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line),
	(eazel_file_conflict_check_signal),
	(eazel_file_uniqueness_check_signal),
	(eazel_feature_consistency_check_signal),
	(eazel_download_progress_signal):
	Marked strings for i18n.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(is_satisfied), (do_dep_check_internal), (do_dep_check),
	(check_if_modification_is_ok),
	(do_requirement_consistency_check_package),
	(do_requirement_consistency_check_internal),
	(do_requirement_consistency_check), (check_tree_helper),
	(check_conflicts_against_already_installed_packages),
	(do_file_conflict_check), (install_packages_helper),
	(install_packages):

	Swapped the check of a requirements features and if it's installed
	(in the case where there is no sense/version)

	Added a vast amount of logic to check if modification of packages
	(update/downgrade) breaks other packages. This also includes a
	move of a huge block of code.

	Try to revive on both FILE_CONFLICT and BREAKS_DEPENDENCY.

	Don't ignore file-conflicts on force (since we set it when epochs
	are involved)

	Do do_requirement_consistency_check before
	check_tree_for_conflicts, so we try and revive any upgrades that
	causes a BREAK_DEPENDENCY

	Large section of code moved  upwards...	

	* components/services/install/lib/eazel-package-system-rpm3.c:
	(make_rpm_argument_list):
	Use -U for both up and downgrade.
	Load obsoletes tag.

2001-02-24  Ian McKellar  <ian@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* components/services/inventory-view/Makefile.am:
	* components/services/inventory-view/nautilus-inventory-disable-pag
	e.c: (nautilus_inventory_disable_page_initialize_class),
	(yes_callback), (no_callback),
	(nautilus_inventory_disable_page_initialize),
	(nautilus_inventory_disable_page_new),
	(nautilus_inventory_disable_page_run),
	(nautilus_inventory_disable_page_destroy):
	* components/services/inventory-view/nautilus-inventory-disable-pag
	e.h:
	* components/services/inventory-view/nautilus-inventory-view.c:
	(nautilus_inventory_view_initialize),
	(inventory_load_location_callback):
	Added inventory disable page.

	* components/services/summary/nautilus-summary-view.c:
	(inventory_load_callback):
	Don't pop up a dialog if the inventory upload fails.

2001-02-04  Robey Pointer  <robey@eazel.com>
	
	reviewed by: Eskil Heyn Olsen <eskil@eazel.com>

	* nautilus/components/rpmview/nautilus-rpm-view-install.c:

	Fix Tinderbox bustage (oops).

2001-02-24  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (create_package):

	Add '--package-version' (-V) option for installing a specific
	version of a package (labs request).
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-logic2.c:
	(eazel_install_check_existing_packages), (download_packages):
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach),
	(get_detailed_uninstall_messages_foreach),
	(get_detailed_cases_foreach),
	(get_detailed_uninstall_cases_foreach):
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_status_enum_to_str), (packagedata_status_str_to_enum):
	* components/services/install/lib/eazel-package-system-types.h:

	Add PACKSYS_FAILURE error code for reporting the ominous "failed
	to lock rpmdb" errors.
	
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_fill_from_packagedata),
	(corba_packagedatastructlist_from_packagedata_tree),
	(packagedata_from_corba_packagedatastruct),
	(packagedata_tree_from_corba_packagedatastructlist):

	Fix corba package-tree flattening and inflating by leaving the
	toplevel field intact, and using a corba-only "anchor" field to
	mark which packages should be anchored to the top list of the
	package-tree after re-inflation.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(osd_parse_implementation), (osd_parse_softpkg):

	Check for the new ACTION="Unresolved" in softcat dependency
	responses, and (for now) treat packages with unresolved deps as if
	softcat didn't return that package at all.  Any packages that
	softcat doesn't have deps for are errors right now, anyway.
	
	* nautilus-installer/src/prescript:

	Fix the annoying "user is 8888" bug by working around a bug in
	popt and passing the --user flag with an "=" instead of a space.
	Very dumb but it works.

2001-02-24  Arik Devens  <arik@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	Fixed bug 6924, User level strings not properly translated in
	first time druid.
	
	* libnautilus-extensions/nautilus-preferences.c:
	(nautilus_preferences_get_user_level_name_for_display): Added a
	gettext call to translate the N_'d user level strings.

2001-02-24  Arik Devens  <arik@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 4567, Druid does not desensitize "next" button when
	checking the network connection.
	
	* src/nautilus-first-time-druid.c: (initiate_file_download):
	Changed to using gnome_druid_set_sensitive instead of
	gtk_widget_set_sensitive to stop the druid from clobering our
	sensitivity preference.

2001-02-24  Ian McKellar  <ian@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* components/rpmview/Makefile.am:
	* components/rpmview/nautilus-rpm-view-install.c:
	(inventory_service_callback), (nautilus_rpm_view_install_done):
	Added inventory hooks. Finishing bug 6186.

	* components/services/install/Makefile.am:
	* components/services/install/nautilus-view/Makefile.am:
	* components/services/install/nautilus-view/callbacks.c:
	(inventory_service_callback), (nautilus_service_install_done):
	Fixed an evil build problem and did some little code fixes.

2001-02-24  Arik Devens  <arik@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 6974, the verify button is currently non functional and
	should be disabled.
	
	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_initialize),
	(nautilus_rpm_view_update_from_uri): Removed the widget->show code
	for the verify button because it was deemed to buggy for 1.0.

2001-02-23  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	* src/nautilus-window-manage-views.c (cancel_location_change):
	Remove freshly unused variable to unbreak the build.

2001-02-24  Arik Devens  <arik@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 4853, in eazel-package-system-suggest-id ensure
	distro-to-system.
	
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_suggest_id): Added distro to package system
	mappings for the rest of the distro's trilobyte can detect.

2001-02-23  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Eskil Olsen  <eskil@eazel.com>

	Fix bug 6856 (if you click on the services button and then on the
	stop button nautilus crashes)
	
	* components/services/trilobite/libtrilobite/trilobite-file-utilities.c:
	(read_file_open_callback): If we get a callback on a cancelled
	open, ignore it rather than dieing on a failed assertion.

	* src/nautilus-window-manage-views.c (cancel_location_change):
	Instead of avoiding telling the old view of the location change
	back if it is the same as the new view, avoid telling the new view
	ever. Either it will be told through the old view pointer or it
	the very change we want to cancel.

2001-02-24  Dan Mueth  <dan@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	Added 1.0 version of Vera's Quick Reference document.
	Note that the screenshots are not finalized, but the text
	is.  Added Spanish version of Nautilus User Manual.
	Updated toplevel docs, removing Session Properties, and
	adding Spanish translation of NUM. Tried to remove most of
	the annoying warnings which show up in tinderbox due to
	silly Makefile problems. Updated spec for Spanish doc.

	* components/help/topleveldocs.xml:
	* configure.in:
	* help/docs.make:
	* help/nautilus-quick-reference/C/figures/full_small.png:
	* help/nautilus-quick-reference/C/figures/navbar_small.png:
	* help/nautilus-quick-reference/C/index.html:
	* help/nautilus-user-manual/Makefile.am:
	* help/nautilus-user-manual/es/Makefile.am:
	* help/nautilus-user-manual/es/figures/custicon.png:
	* help/nautilus-user-manual/es/figures/full.png:
	* help/nautilus-user-manual/es/figures/link.png:
	* help/nautilus-user-manual/es/figures/locbar.png:
	* help/nautilus-user-manual/es/figures/noread.png:
	* help/nautilus-user-manual/es/figures/nowrite.png:
	* help/nautilus-user-manual/es/figures/part.png:
	* help/nautilus-user-manual/es/figures/player.png:
	* help/nautilus-user-manual/es/figures/prefmenu.png:
	* help/nautilus-user-manual/es/figures/sidebar.png:
	* help/nautilus-user-manual/es/figures/viewmenu.png:
	* help/nautilus-user-manual/es/figures/viewmusic.png:
	* help/nautilus-user-manual/es/nautilus-user-manual-es.omf:
	* help/nautilus-user-manual/es/nautilus-user-manual.sgml:
	* nautilus.spec.in:

2001-02-24  Ian McKellar  <ian@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* components/services/install/nautilus-view/Makefile.am:
	* components/services/install/nautilus-view/callbacks.c:
	(inventory_service_callback), (nautilus_service_install_done):
	* components/services/summary/Makefile.am:
	* components/services/summary/nautilus-summary-view.c:
	(fetch_summary_data), (inventory_load_callback),
	(redirect_fetch_callback):

	Add rpm-dependant hooks into the inventory upload from the summary view
	and the install view. This fixes bug 6186.

2001-02-24  Eskil Heyn Olsen  <eskil@eazel.com>

	review wanker: Arik The Intern

	* helper-scripts/Makefile.am:
	This should be better, hope it works

2001-02-23  Mike Fleming  <mfleming@eazel.com>

	reviewed by: Eskil Olsen  <eskil@eazel.com>

	Bug 6480: extranous history items due to redirects
	Bug 6736: (as a side-effect) "throbber cuts out early because of redirects"

	I ifdef'd out the busy cursor stuff since it seems to interact
	poorly with Mozilla 0.8.  Actually, even when I took it out, I still
	saw a busy cursor at the wrong times.

	changed many gtk_signal_connect_while_alive's to gtk_signal_connect's
	per Darin feedback

	Made some URI scheme comparisons case-insensitive, added FIXME
	on remaining one

	* components/mozilla/mozilla-events.cpp:

	mozilla_events_get_href_for_event now gets href's from AREA tags
	and form submits.
	
	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(try_transform_nautilus_uri_to_file_scheme),
	(view_load_location_callback), (mozilla_location_callback),
	(mozilla_net_state_callback), (mozilla_link_message_callback),
	(mozilla_dom_mouse_click_callback), (is_uri_relative),
	(make_full_uri_from_relative), (uris_identical),
	(string_list_get_index_of_string):

2001-02-23  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: John Harper  <jsh@eazel.com>

	Fix bug 6881 (Non-translated strings in services).

	* components/services/summary/nautilus-summary-view.c:
	(localize_items), (update_header), (update_footer),
	(create_footer), (summary_load_location_callback): Call gettext on
	the strings marked with N_.

	* components/services/trilobite/libtrilobite/trilobite-file-utilities.c:
	(trilobite_read_entire_file, read_file_succeeded): Realloc to
	include an extra byte at the end to make it safe to NULL-terminate
	the file contents if desired.

2001-02-23  Dan Mueth  <dan@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	Applied several build system bug fixes and updated
	spec file.

	* help/Makefile.am: Fix bug with broken rpm install: Added 
	docs.make and htmldocs.make to EXTRA_DIST
	* help/docs.make: Have omf processed for install-data-am
	* help/htmldocs.make: Have omf processed for install-data-am
	* nautilus.spec.in: Added post install and post uninstall
	calls to scrollkeeper-update. Added scrollkeeper as a 
	requirement, but commented out because it isn't in the
	software map.  Uncommented OMF file b/c bug fixes above
	now install the OMF files properly.

2001-02-23  John Harper  <jsh@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* src/nautilus-first-time-druid.c: updated the text for the
	Medusa screen in the first time druid

2001-02-23  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:

	Close dangling parentheses.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(check_tree_helper), (check_feature_consistency):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_set_debug):
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(display_arguments):

	Remove excess logging from the install, but add a final
	package-tree dump at the end for double-checking logs.
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_breaks_foreach),
	(get_detailed_messages_foreach), (get_detailed_cases_foreach):

	Fix logging of file conflict problems.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(osd_parse_shared):

	Don't log softcat db revision when it's not given.
	
	* nautilus-installer/install-lib/Makefile.am:
	* nautilus-installer/libtrilobite/Makefile.am:
	* nautilus-installer/src/Makefile.am:

	Use softlinks in the bootstrap installer fake directories, so that
	coders can edit the files and still get clean builds.
	
	* nautilus-installer/src/installer.c: (add_bullet_point_to_vbox),
	(eazel_install_progress), (eazel_download_progress):

	More sanity checks in the download progress, and fix up more text
	to Vera standards.

2001-02-23  Arik Devens  <arik@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* helper-scripts/Makefile.am: Added installing of my new helper
	script to let users and testers restore their settings.

2001-02-23  John Harper  <jsh@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 6932 (Nautilus Crashes with 'intermittent tree view
	bug'):

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_insert_model_node): don't call
	nautilus_tree_view_find_parent_node () to find the parent view
	node.

	This can fail if the model has already removed the node we're
	trying to add giving the `intermittent' assertion (since we run
	in the idle handler, asynchronously to the model).

	Instead just try to grab the parent of the node and find it's
	view node directly. If either of these don't exist, the
	usual unparented node logic will handle it

	(nautilus_tree_view_find_parent_node): deleted this function

2001-02-23  Arik Devens  <arik@eazel.com>

	reviewed by: John Harper  <jsh@eazel.com>

	Fixed bug 6797, GConf errors after updating Nautilus, and removing
	.gconf and .gconfd directories.
	
	* helper-scripts/nautilus-restore-settings-to-default.sh: Initial
	version of a script to let testers reset their preferences. The
	script shutsdown nautilus and gconf then removes the .nautilus,
	.gconf, and .gconfd directories. There are various other features
	that can be added later.

2001-02-23  Arik Devens  <arik@eazel.com>

	reviewed by: John Harper  <jsh@eazel.com>

	Fixed bug 6847, if you delete the text in the homedir preference
	by holding down the backspace key nautilus freezes and eventually
	crashes.
	
	* libnautilus-extensions/nautilus-preferences-item.c:
	(text_item_changed_callback), (editable_string_changed_callback),
	(integer_changed_callback), (nautilus_preferences_item_get_name),
	(update_text_settings_at_idle),
	(preferences_item_update_text_settings_at_idle),
	(update_integer_settings_at_idle),
	(preferences_item_update_integer_settings_at_idle): Added using
	idle handlers to set preferences instead of setting the directly
	on changed.

	* libnautilus-extensions/nautilus-preferences.c:
	(nautilus_preferences_set_integer), (nautilus_preferences_set):
	Added checking whether the new value has changed from the current
	value before setting it.

2001-02-23  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	Ubnbrkeak the build.

	* components/services/inventory-view/nautilus-inventory-enable-page
	.c: (nautilus_inventory_enable_page_destroy):
	* components/services/inventory/eazel-inventory-upload-callback.c:
	(eazel_inventory_upload_callback_initialize_class),
	(eazel_inventory_upload_callback_initialize),
	(eazel_inventory_upload_callback_destroy),
	(eazel_inventory_upload_callback_new),
	(impl_Trilobite_Eazel_InventoryUploadCallback_done_uploading),
	(impl_Trilobite_Eazel_InventoryUploadCallback__destroy),
	(impl_Trilobite_Eazel_InventoryUploadCallback__create):
	* components/services/inventory/eazel-inventory-upload-callback.h:

2001-02-23  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	Fixed bug 6185 (Inventory collection and upload is slow, blocks UI)
	
	* components/services/inventory-view/Makefile.am,
	* components/services/inventory-view/nautilus-inventory-config-page.c,
	* components/services/inventory-view/nautilus-inventory-config-page.h:

	* components/services/inventory-view/nautilus-inventory-enable-page.c:
	(nautilus_inventory_enable_page_initialize_class,
	nautilus_inventory_enable_page_initialize,
	nautilus_inventory_enable_page_new, callback,
	nautilus_inventory_enable_page_run,
	nautilus_inventory_enable_page_destroy):

	* components/services/inventory-view/nautilus-inventory-enable-page.h:

	* components/services/inventory-view/nautilus-inventory-view.c:
	(nautilus_inventory_view_initialize,
	inventory_load_location_callback):

	* components/services/inventory/Makefile.am:
	* components/services/inventory/eazel-inventory-client.c:
	(callback, main):

	* components/services/inventory/eazel-inventory-collect-hardware.c:
	(eazel_inventory_collect_scsi):

	* components/services/inventory/eazel-inventory-service-interface.idl:

	* components/services/inventory/eazel-inventory-service.c:
	(impl_Trilobite_Eazel_Inventory__get_enabled,
	impl_Trilobite_Eazel_Inventory__set_enabled,
	impl_Trilobite_Eazel_Inventory__get_machine_id,
	impl_Trilobite_Eazel_Inventory_upload),
	eazel_inventory_service_get_epv):

	* libnautilus-extensions/nautilus-clickable-image.c: (label_enter),
	(nautilus_clickable_image_set_up_pixbufs):

2001-02-21  Maciej Stachowiak  <mjs@eazel.com>

	pair programmed with: Ian McKellar  <ian@eazel.com>
	
	* components/services/inventory-view/nautilus-inventory-config-page.c,
	components/services/inventory-view/nautilus-inventory-config-page.h:
	Removed.
	* components/services/inventory-view/nautilus-inventory-enable-page.h,
	components/services/inventory-view/nautilus-inventory-enable-page.c:
	This view will have enable and disable pages.
	* components/services/inventory-view/nautilus-inventory-view.c
	(nautilus_inventory_view_initialize,
	inventory_load_location_callback): Now there are enable and
	disable pages (the latter not yet implemented), no config page.
	* components/services/inventory-view/Makefile.am: Add new files,
	remove old files.

	* components/services/inventory/eazel-inventory-client.c (main):
	Adjust to new changes.

	* components/services/inventory/eazel-inventory-collect-hardware.c
	(eazel_inventory_collect_scsi): Fix for non-SCSI case. 
	
	* components/services/inventory/eazel-inventory-service-interface.idl:
	Remove warn_before_upload attribute, make machine ID readonly
	attribute (and rename from machine name).

	* components/services/inventory/eazel-inventory-service.c:
	(impl_Trilobite_Eazel_Inventory__get_machine_id,
	impl_Trilobite_Eazel_Inventory_upload,
	eazel_inventory_service_get_epv): get machine ID from ammonite;
	remove dead methods.

	* libnautilus-extensions/nautilus-clickable-image.c
	(nautilus_clickable_image_set_up_pixbufs): Don't die if pixbuf is
	NULL (which happens of a failed image load).

2001-02-23  Eric Fischer <eric@eazel.com>

	reviewed by: Robin Slomkowski <rslomkow@eazel.com>

	* configure.in:
	Create nautilus-installer.spec; remove gibberish that I had
	accidentally left in from testing.

	* nautilus-installer.spec.in:
	Create RPM of nautilus-installer separately from main nautilus RPM

	* nautilus.spec.in:
	Separate nautilus-installer from main nautilus build

2001-02-23  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 6933 (Assertions & crash after renaming
	open folder)

	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_moved): Added a missing
	nautilus_file_ref in the code that runs when a
	directory is renamed.

2001-02-23  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 6738 (View as Web Page window closes if user follows bad
	link). The shell was closing the window as part of its feature to
	close windows when the underlying item is deleted.

	* libnautilus-extensions/nautilus-file.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_is_not_yet_confirmed): Added new function so we can
	tell a file that's never been seen from one that we already have
	information about.
	
	* src/nautilus-window-private.h:
	* src/nautilus-window-manage-views.c:
	(viewed_file_changed_callback): Keep track of whether we have ever
	seen the file for real, and only close the window if it was here
	before and is now gone, rather than if it was never there. This is
	a roundabout way to fix the problem reported, but seems like a
	nice rule in any case. Also added FIXMEs to some questionable code
	I found here.
	(update_for_new_location): Set up the variable that is used to
	check if we have ever seen the file for real.

	* src/nautilus-about.c: Formatting tweaks.
	
2001-02-23  Eric Fischer <eric@eazel.com>

	reviewed by: Robin Slomkowski <rslomkow@eazel.com>

	* nautilus.spec.in:
	Spell out /usr/bin/*.sh (nautilus-clean.sh, nautilus-verify-rpm.sh)
	to keep eazel-installer.sh from ending up in the main nautilus RPM

2001-02-23  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Ramiro Estrugo <ramiro@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_move_copy_items):
	Special case activation of "command:" links, executing the
	command and passing it uris.
	
	* libnautilus-extensions/nautilus-drag.c:
	(nautilus_drag_default_drop_action_for_icons):
	Special case "command:" to always do a move.

2001-02-23  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	This patch removes the const on PackageData objects in the
	callbacks. The const was needed back when the objects were new'ed
	and deleted, but now that they're refcounted, the signalemitter in
	eazel-install-corba-callback.c can just unref and the signal
	handler can get a non-const object. And since the objects are
	created on the fly, the signal handler can cause any harm.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line), (tree_helper_helper),
	(tree_helper), (something_failed), (eazel_preflight_check_signal),
	(main):
	Removed const of packagedata objects in handlers.
	s/update/upgrade/
	Added a GList** param too tree_helper to check for recursiveness.
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	s/update/upgrade/
	
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install__set_upgrade),
	(impl_Eazel_Install__get_upgrade), (eazel_install_get_epv):
	s/update/upgrade/

	* components/services/install/lib/eazel-install-logic2.c:
	(eazel_install_check_existing_packages), (get_softcat_info),
	(check_tree_helper), (do_file_conflict_check), (execute),
	(install_packages), (revert_transaction):
	s/update/upgrade/
	Removed const of packagedata objects in handlers.
	If modifying a package which has an epoch set, set force to TRUE.
	Fixed a bad boolean bug in get_info, where I did a & comparsion
	and not a ==, which caused packages added due to conflicts to not
	get dependency checked.
	Correctly use service object upgrade/downgrade flags.
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_set_arg), (eazel_install_class_initialize),
	(eazel_install_new_with_config), (eazel_install_install_packages):
	s/update/upgrade/

	* components/services/install/lib/eazel-install-problem.h:
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_cases_foreach), (eazel_install_problem_tree_to_case),
	(eazel_install_problem_handle_cases):
	Fixed a g_message in the circular dep case.
	Fixed constness of PackageData objects

	* components/services/install/lib/eazel-install-public.h:
	s/update/upgrade/

	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_packagedata_fill_from_header),
	(display_arguments):
	One more time, the rpmlib(...) check
	Fixed display_arguments truncation
	
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_dump_int):
	Nicer output of Epoch
	
	* components/services/install/nautilus-view/callbacks.c:
	(nautilus_service_install_failed):
	* components/services/install/nautilus-view/callbacks.h:
	* nautilus-installer/src/installer.c: (collect_failure_info),
	(install_failed), (uninstall_failed), (eazel_installer_do_install),
	(eazel_installer_initialize):
	Removed const of packagedata objects in handlers.
	s/update/upgrade/

2001-02-23  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-smooth-text-layout.c:
	(nautilus_smooth_text_layout_draw_to_pixbuf):
	Ignore empty rectangles rather than asserting on them.
	FIxes bug 6945.
	
2001-02-23  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 6931, "floppy" and "cdrom" in Disks menu
	should be "Floppy" and "CD-ROM"
	
	Fixed bug 5600, Desktop context menu "Disks" options
	not translated
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	* libnautilus-extensions/nautilus-volume-monitor.h:
	(nautilus_volume_monitor_initialize),
	(nautilus_volume_monitor_destroy):
	Create a hash table of readable names to represent the
	less legible name that is present in /etc/fstab.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(update_disks_menu):
	Call new nautilus_volume_monitor_get_mount_name_for_display()
	function to get a legible name for placement in the mount menu.
	
2001-02-23  John Sullivan  <sullivan@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	More work on the never-ending 1 hour bug 3321
	(Finalize items in Help menu).

	* src/nautilus-shell-ui.xml:
	Changed underscore accelerator for Nautilus User
	Manual from N to M, since the N is needed for
	Nautilus Release Notes; add Nautilus Release Notes;
	add separator before Customer Support; remove all
	ellipses.
	* src/nautilus-window-menus.c:
	* src/nautilus-window-menus.c:
	(help_menu_nautilus_manual_callback),
	(help_menu_nautilus_quick_reference_callback),
	(help_menu_nautilus_release_notes_callback), (help_menu_support),
	(help_menu_nautilus_feedback_callback),
	(nautilus_window_initialize_menus): Add callback
	for Nautilus Release Notes item (which doesn't work yet;
	that's Dan's job). Also add #defines for the various help 
	menu URIs instead of hardcoding them in-line.

	Other text tweaks:

	* src/nautilus-property-browser.c:
	(nautilus_property_browser_update_contents):
	* src/nautilus-theme-selector.c:
	(nautilus_theme_selector_initialize): Use initial caps style
	on Add & Remove buttons here, per Vera.

2001-02-23  Arik Devens  <arik@eazel.com>

	reviewed by: John Sullivan  <sullivan@eazel.com>

	* src/nautilus-application.c: (nautilus_application_startup):
	Rewriting of the "Reboot" dialog so as to also suggest trying
	nautilus-clean.sh -x.

2001-02-23  Seth Nickell  <seth@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-volume-monitor.c:

	Fixed use of #if so constant is set not just defined.
	
2001-02-23  Josh Barrow  <josh@eazel.com>

	reviewed by: <kenny@whitecape.org>

	* src/nautilus-first-time-druid.c:
	(nautilus_first_time_druid_show):
	Change instance of "directory" to "folder".  This fixes bug
	6492.

2001-02-23  Darin Adler  <darin@eazel.com>

	reviewed by: J Shane Culpepper <pepper@eazel.com>

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_initialize): Fix some signal handlers that
	were persisting after the desktop view itself was gone by using
	gtk_signal_connect_while_alive.

2001-02-23  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Bug fixes for regression introduced in my last checkin.
	
	6926 - Line spacing of multi-line icon names is inconsistent & look 
	6923 - Underline of mouse over is to close to text on icons 

	* libnautilus-extensions/nautilus-smooth-text-layout.c:
	(smooth_text_layout_clear_lines): Clear the total line height.
	(smooth_text_layout_line_list_draw_to_pixbuf): Dont use the max
	line height to place the glyph vertically.  Use just the given y.
	(smooth_text_layout_line_list_new_wrapped): Replace a string split
	and strcpy operation with an iteration of the text.  We need to do
	this to catch empty lines.  The string split function was
	coalescing empty lines.
	(smooth_text_layout_get_total_line_height),
	(nautilus_smooth_text_layout_draw_to_pixbuf): Place the underline
	rect right at the bottom edge of the glyph.
	(nautilus_smooth_text_layout_get_dimensions): Add up the line
	heights for the layout height.  Dont use the max line height
	because that make the line spacing look strange.  If we had
	working baseline support then this would be better.  For now,
	space the glyph using their heights.
	Lose the max_line_height member and getter, no longer needed.

2001-02-23  Brian Frank  <bfrank@eazel.com>

	Updating default bookmarks for Nautilus 1.0.
	
	* data/static_bookmarks.xml
	
2001-02-23  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 6915 (installer no longer has text):

	* libnautilus-extensions/nautilus-druid-page-eazel.c
	(nautilus_druid_page_eazel_configure_size): if the embedded
	widget isn't a GtkEventBox, set the width and height of any
	widget item to the size of the canvas less the widget origin

	(This may be too restrictive, but I've verified that event
	boxes don't need the size set whereas at least some other
	widgets do - this may be related to whether they have their own
	window or not, but I'm not sure, so it seems better to be
	cautious. This at least lets both the first time druid and the
	installer work correctly, and these are currently the only
	users of this widget)

2001-02-23  Michael Engber  <engber@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c: (destroy),
	(nautilus_icon_container_start_renaming_selected_item),
	(end_renaming_mode):
	* libnautilus-extensions/nautilus-icon-text-item.c:
	(iti_stop_editing), (iti_start_editing), (iti_destroy):
	Keep the rename widget around so that it will continue to
	work with the clipboard after the rename is over - bug 690.

2001-02-23  J Shane Culpepper  <pepper@eazel.com>

	reviewed by: vera@eazel.com

	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_new_window_callback):
	Adding the new wording to the popup warning dialog.

2001-02-23  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* components/image-viewer/nautilus-image-view.c: (main):
	* components/music/main.c: (create_function), (main):
	* components/text/main.c: (create_function), (main):
	Fix bug 6922 - Make sure components setup gettext bindings.  These
	3 components had localized strings in them but did not setup
	gettext.
	
2001-02-23  Seth Nickell  <snickell@stanford.edu> 
	    
	reviewed by: Pavel Csler <pavel@eazel.com>

	patch from: Louise Miller <Louise.Miller@ireland.sun.com>
	
	* libnautilus-extensions/nautilus-volume-monitor.c:

	Use volrmmount on Solaris for dealing with such operations,
	to get ejecting and properly unmounting removable volumes.
	
2001-02-23  Seth Nickell  <snickell@stanford.edu>

	reviewed by: J Shane Culpepper <pepper@eazel.com>

	Fix problems with playing MP3s on Solaris due to our use of
	Linux/x86-only code pillaged from mpg123. Continue pillaging
	from mpg123 to grab their generic decoding code for use when
	we are on non x86/Linux platforms.
	
	* configure.in:
	* components/music/Makefile.am:

	Check if we are on x86 and only build x86 optimized music
	components if we are. Otherwise use source & binary compatible
	generic code.
	
	* components/music/decode.c: (mpg123_synth_1to1_8bit),
	(mpg123_synth_1to1_8bit_mono),
	(mpg123_synth_1to1_8bit_mono2stereo), (mpg123_synth_1to1_mono),
	(mpg123_synth_1to1_mono2stereo), (mpg123_synth_1to1):

	Add decode.c as a generic replacement for decode_i386.c when
	on non-x86 hardware (dct64.c was already there, just not used),
	filched from mpg123 same as decode_i386.c.
	
	* components/music/mpg123.h:

	Add one #define to make decode.c happy.

	Thanks to Niall for nailing this bug :-)
	
2001-02-23  Laszlo Kovacs  <laszlo.kovacs@sun.com>
	* components/help/hyperbola-filefmt.c
	fixed bug 6866 - crash if the locale is set to NULL

2001-02-23  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Seth Nickel <seth@eazel.com>

	* libnautilus-extensions/nautilus-labeled-image.c:
	(nautilus_labeled_image_destroy):
	Fix bug 6590 - Segmentation fault when enabling smooth graphics
	while displaying background color chooser or emblems chooser.
	The problem was that we were leaking the image and label widgets
	of a labeled image.  The leakage meant that the widgets were not
	unregistered from the smooth widget machinery.  This caused them
	to be in limbo.  Half dead, but still receiving smooth graphics
	changed callbacks.  They tried to respon to the callbacks, the
	poor things.
	
2001-02-23  Laszlo Kovacs  <laszlo.kovacs@sun.com>
	* components/help/topleveldocs.xml:
	Nautilus User's Guide added

2001-02-23  Laszlo Kovacs  <laszlo.kovacs@sun.com>
	* README:
	Description about Scrollkeeper added.
	* nautilus.spec.in:
	$prefix/share/nautilus/components/hyperbola/*.xml added

2001-02-23  Robey Pointer  <robey@eazel.com>

	reviewed by: Mathieu Lacage <mathieu@gnome.org>

	* components/rpmview/nautilus-rpm-view-private.h:
	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_initialize), (file_activation_callback),
	(fill_filename_tree_int), (fill_filename_tree):

	Use NautilusCTree instead of GtkCTree.  Get rid of the "go to"
	button and just make a double-click do that.  Get rid of the
	leading / in directory names because it looked ugly, and add a top
	"/" to match the tree view.
	
	* libnautilus-extensions/nautilus-ctree.c:
	(nautilus_ctree_class_init), (nautilus_ctree_button_press),
	(row_delete), (real_tree_activate_row):
	* libnautilus-extensions/nautilus-ctree.h:

	Add a signal to be thrown when an item is "activated" (gets a
	double-click).

2001-02-23  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Gene Z. Ragan <gzr@eazel.com>

	* libnautilus-extensions/nautilus-smooth-text-layout.c:
	(smooth_text_layout_line_list_draw_to_pixbuf):
	Restore the underlinig code missing from last checkin.

Fri Feb 23 04:09:54 2001  George Lebl <jirka@5z.com>

	Review sucker: Seth Nickel <seth@eazel.com>

	* src/nautilus-view-frame.c (nautilus_view_frame_destroy)
	  (view_frame_failed_callback) (queue_view_frame_failed)
	  (attach_view):  Avoid crashes by queueing the destruction of
	  the view into an idle from a "system_exception" signal, as 
	  the exception could have come in the middle of gtk voodoo, and
	  destroying the object then would be bad juju.

2001-02-23  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Gene Z. Ragan <gzr@eazel.com>

	* libnautilus-extensions/nautilus-icon-factory.c: (embed_text):
	Update for smooth text layout changes.
	
2001-02-22  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Gene Z. Ragan <gzr@eazel.com>

	Fix bugs:

	2784 - NautilusScalableFont text clipping is broken.
	2831 - Icon container redraw performance is poor in smooth mode.
	Optimized this case some.  Its still not as good as we
	would like it to be.  Thanks to the following changes, it
	is possible to optimize it even more - by caching the
	layouts of icons for example.  We need to profile with the
	new changes.
	
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(measure_label_text), (draw_or_measure_label_text_aa),
	(draw_label_text_aa):
	* libnautilus-extensions/nautilus-icon-factory.c: (embed_text):
	Use NautilusSmoothTextLayout instead of NautilusTextLayout.

	* libnautilus-extensions/nautilus-label.h:
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_initialize_class), (nautilus_label_initialize),
	(nautilus_label_destroy), (nautilus_label_set_arg),
	(nautilus_label_get_arg), (nautilus_label_size_allocate),
	(label_composite_pixbuf_callback), (label_get_text_dimensions),
	(label_smooth_text_ensure), (label_smooth_text_clear),
	(nautilus_label_set_smooth_font),
	(nautilus_label_set_smooth_font_size),
	(nautilus_label_set_is_smooth),
	(nautilus_label_set_smooth_line_wrap_width),
	(nautilus_label_set_smooth_drop_shadow_offset),
	(nautilus_label_set_text), (nautilus_label_set_wrap),
	(nautilus_label_new_solid), (nautilus_label_make_bold),
	(nautilus_label_make_larger), (nautilus_label_make_smaller),
	(nautilus_label_set_never_smooth):
	Simplified.  Use NautilusSmoothTextLayout to handle laying
	out the text.
	
	* libnautilus-extensions/nautilus-scalable-font.h:
	* libnautilus-extensions/nautilus-scalable-font.c:
	(nautilus_scalable_font_new),
	(nautilus_scalable_font_measure_text),
	(nautilus_scalable_font_draw_text),
	(initialize_global_stuff_if_needed),
	(nautilus_scalable_font_get_underline_height),
	(nautilus_scalable_font_get_baseline):
	Simplified.  Use NautilusSmoothTextLayout.  Remove no longer
	needed functions.

	* libnautilus-extensions/nautilus-smooth-text-layout.h:
	* libnautilus-extensions/nautilus-smooth-text-layout.c:
	New class to handle smooth text layout needs.  Layout details are
	private to make it easirt to fix bugs in the future.
	
	* libnautilus-extensions/nautilus-text-layout.c:
	* libnautilus-extensions/nautilus-text-layout.h:
	Retire.
	
	* test/.cvsignore:
	* test/Makefile.am:
	* test/test-nautilus-font-simple.c: (main):
	* test/test-nautilus-font.c: (main):
	* test/test-nautilus-glyph-simple.c: (glyph_new), (main):
	* test/test-nautilus-label-simple.c: (main):
	* test/test-nautilus-label-wrapped.c: (create_nautilus_label),
	(main):
	* test/test-nautilus-smooth-text-layout.c: (main):
	New smooth text layout test.  Update test for smooth layout changes.

2001-02-23  John Harper  <jsh@eazel.com>

	reviewed by: Arik Devens  <arik@eazel.com>

	More tweaks to fix bug 1796 (Design a better First Time
	Walkthrough):

	* src/nautilus-first-time-druid.c: don't update the user-level
	preferences until immediately before exiting the druid - avoids
	possibly making the anti-aliased titles non-anti-aliased

	(set_up_update_feedback_page): put labels in hboxes to make
	them flush with the left side of the container

	(nautilus_first_time_druid_show): rearranged line breaks in
	body text slightly. Changed icon packing parameters to put them
	nearer to their ideal positions

2001-02-22  Arik Devens  <arik@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* test/test-nautilus-viewport-constraint.c: (create_row), (main):
	Updated so that it uses to vbox's to test each of the constrain
	functions.

2001-02-22  Robey Pointer  <robey@eazel.com>

	reviewed by: Mike Fleming  <mfleming@eazel.com?

	* components/rpmview/nautilus-rpm-view-private.h:
	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_initialize), (file_selection_callback),
	(go_to_button_callback), (add_to_filename_tree),
	(fill_filename_tree_int), (fill_filename_tree),
	(filename_node_free), (nautilus_rpm_view_update_from_uri):

	Change the file list into an exploding tree.  Put the package
	description inside a viewport with opportunistic scrollbars, so
	that a long package description won't overwrite everything else.

	* components/services/install/nautilus-view/callbacks.c:
	(nautilus_service_install_done):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_service_describe_menu_entry):
	* nautilus-installer/src/installer.c:
	* nautilus-installer/src/prescript:

	Text changes from Vera.

	* nautilus-installer/src/bootstrap-background.xpm:
	* nautilus-installer/src/error-symbol.xpm:

	Fix names in Arlo's new icons.

2001-02-22  John Harper  <jsh@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 6764 (Double-clicking a folder with an already-open
	window on another virtual desktop seems to do nothing):

	* libnautilus-extensions/nautilus-gtk-extensions.c
	(nautilus_gtk_window_present): ensure that the window is on the
	current desktop

2001-02-22  Rebecca Schulman  <rebecka@eazel.com>
 	Fix bugzilla.eazel.com bug 6290, that loading
 	a large directory in the list view hangs nautilus.
 	I've improved this aspect of performance, by 
 	sending the files to the list view in small chunks,
 	rather than as a whole, so that the ui can
 	be responsive between the times we are updating the
 	entries, rather than having to wait for the whole thing
 	to load.  I've avoided the problem of entries moving during
 	loading, by giving the list view the first 100 entries to
 	appear in the list, so the list fills up from top to bottom.
 
 	reviewed by: Pavel Cisler <pavel@eazel.com>
 
 	* src/file-manager/fm-directory-view.c:
 	(fm_directory_view_initialize_class),
 	(finish_displaying_pending_files), (display_pending_files),
 	(real_display_pending_files), (display_pending_timeout_callback),
 	(fm_directory_view_get_directory):
 	* src/file-manager/fm-directory-view.h:
 	Add display_pending_files as a method to the directory view.
 	Call it the method, and so the list view can override the
 	basic "give me all the files you have at once method" being
 	used in the directory view.
 	* src/file-manager/fm-list-view.c: (fm_list_view_initialize_class),
 	(fm_list_view_compare_rows), (fm_list_view_reveal_selection),
 	(g_list_split_off_first_n),
 	(fm_list_view_display_pending_files):
 	Add a display pending files method here that only sends the
 	first 100 items, and sorts the larger list.
 	* libnautilus-extensions/nautilus-glib-extensions.c:
 	(nautilus_g_list_sort_merge), (nautilus_g_list_is_already_sorted),
 	(nautilus_g_list_sort_custom), (compare_pointers),
 	(nautilus_g_lists_sort_and_check_for_intersection):
 	* libnautilus-extensions/nautilus-glib-extensions.h:
 	Add new sorting functions used by my changes, include
 	nautilus_g_list_sort_custom, which sorts a list using
 	a compare function that can also take data. This sort also
 	checks whether the list is sorted before beginning a merge
 	sort, which is a win for cases where you expect the list will

2001-02-22  Arlo Rose  <arlo@eazel.com>

	* nautilus-installer/src/error-symbol.xpm:
	Last tweak... making the error symbol fit with
	the new blue shade.

2001-02-22  Arik Devens  <arik@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fixed 6131, new NautilusLabel does not support proper line wrap.
	
	* components/services/summary/nautilus-summary-view.c:
	(summary_view_create_pane): Add setting of
	nautilus_viewport_constrain_width to TRUE.
	* libnautilus-extensions/nautilus-viewport.c:
	(nautilus_viewport_initialize_class),
	(nautilus_viewport_size_allocate),
	(nautilus_viewport_get_is_smooth),
	(nautilus_viewport_set_constrain_width),
	(nautilus_viewport_get_constrain_width),
	(nautilus_viewport_set_constrain_height),
	(nautilus_viewport_get_constrain_height): Overrode the
	size_allocate method of GtkViewport to add the options of
	constraining the height or width of the viewports child to the
	same size as the viewport.
	* libnautilus-extensions/nautilus-viewport.h: Added function
	prototypes.
	* test/Makefile.am: Add building of a test case for the viewport
	constraining.

2001-02-22  Arlo Rose  <arlo@eazel.com>

	* nautilus-installer/src/bootstrap-background.xpm:
	Making the bootstrp installer look a little better.


2001-02-22  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_packagedata_fill_from_header):
	Long the epoch in the right way.
	
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_dump_int):
	Display the epoch in the right way.
	
	* nautilus-installer/src/installer.c: (collect_failure_info):
	Const abuse to fix tinderbox build.

2001-02-22  Mike Fleming  <mfleming@eazel.com>

	reviewed by: <pavel@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(view_load_location_callback), (eazel_services_scheme_to_http):

	Bug 6810 -- Throbber keeps spinning on gnome-help URI's
	The mozilla wrapper was confusing nautilus by trying to be too clever--
	redirecting nauitilus while loading in mozilla.  Now it just pumps
	a new open_location request through nautilus.

	Bug 6902 -- Ammonite URI's wouldn't work if you weren't logged in,
	even if the specified user was "anonymous".

	Rather than trying to use the real ammonite login stuff, which is async
	and would be hard to integerate, just force the ammonite login dialog
	to pop up by performing a gnome-vfs operation.
	
2001-02-22  Rebecca Schulman  <rebecka@eazel.com>
	Fix bug 6058, that opening a file with a default
	application that cannot access a location (in the specific
	case of the bug, eazel-services) should explain the problem,
	and offer another application, rather than simply failing.

	reviewed by: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-program-choosing.h:	
	* libnautilus-extensions/nautilus-program-choosing.c:
	(nautilus_choose_application_for_file),
	(application_can_handle_uri), (application_cannot_open_location),
	(nautilus_launch_application),	
	(launch_application_callback),
	(launch_parameters_new),
	(launch_parameters_free), (launch_application_callback):
	Change nautilus_launch_application to take a NautilusFile rather
	than a uri, so that we can find out whether other applications
	are available for the location, using the mime type as well
	as uri scheme.  Change the dialogs that come up when an application
	is not available for a particular location to explain more of what
	we know.  If another application is available to open the uri,
	open the program chooser dialog.

	* src/file-manager/fm-directory-view.c:
	(application_launch_parameters_new),
	(application_launch_parameters_free),
	(fm_directory_view_launch_application),
	(fm_directory_view_chose_application_callback), (choose_program),
	(bonobo_launch_application_callback),
	(add_application_to_bonobo_menu), (reset_bonobo_open_with_menu),
	(activate_callback):
	Change the parameters sent to nautilus_launch_application, and 
	so change data sent to callbacks used to later call 
	nautilus_launch_application
	
	* src/nautilus-sidebar.c: (command_button_callback),
	(nautilus_sidebar_chose_application_callback):
	Call nautilus_launch_application with the new arguments
	
2001-02-22  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 5729 ("Copying" label in progress dialog can be
	clipped if font is biggish)

	Fixed bug 5741 (File progress dialog uses fixed font for
	labels, slight clipping)

	* libnautilus-extensions/nautilus-file-operations-progress.c:
	Eliminated two hardwired widths; changed FIXME to comment for
	the third, legitimate, one.
	(set_text_unescaped_trimmed): Now uses nautilus_ellipsizing_label
	instead of a fixed width.
	(create_titled_label): Now use nautilus_ellipsizing_label and
	puts title & label in a table (with Clark Gable)
	(nautilus_file_operations_progress_initialize): Use table for
	titles & labels so they can line up without a hardwired width,
	set up spacings, change callers of create_titled_label.
	(nautilus_file_operations_progress_new_file): Change callers
	of set_text_unescaped_trimmed to not pass in a width.
	
	Fixed bug 6872 (Wording suggetions for preferences)

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_create_dialog),
	(global_preferences_create_search_pane): A few more
	wording tweaks in Preferences, some from Vera and some
	from this bug report and Vera-approved

	Fixed bug 6553 ("Where" in Properties Window is inconsistent)

	* src/file-manager/fm-properties-window.c: (create_basic_page):
	Changed "Where:" to "Location:" with Vera's approval.

2001-02-22  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Gene Z. Ragan <gzr@eazel.com>

	Fix 5540 Dragging a group of files in zoomed icon view has
		 strange effect
	Fix 6461 Dropped icons in manual layout land at the wrong
		 coordinates at high zoom levels
	Fix 6845 Dropping multiple icons from list view to icon view
		 piles them on top of each other
		 
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(create_selection_shadow),
	(icon_get_data_binder):
	Send outline rectangles for dragged icons off to a drag in a 100%
	zoom level scale.
	Scale outline rectangles in drag shadows using the scaling factor
	for the target view.
	
	* libnautilus-extensions/nautilus-list.h:
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_get_cell_rectangle),
	(draw_cell), (nautilus_list_clear_from_row),
	(nautilus_list_set_drag_prelight_row),
	Make the call public, change the callers to pass NautilusList.
	
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_each_selected_row):
	Add the row index parameter to the iteratee.
	
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_get_initial_drag_offset):
	Add a way to get the intial mouse drag offset.
	
	* src/file-manager/fm-list-view.c: (row_get_data_binder),
	(each_icon_get_data_binder):
	Calculate outline rectangles for icons and pass them to the
	drag&drop machinery.

	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_dnd_initialize):
	Tweaks.
	
	* libnautilus-extensions/nautilus-art-extensions.h:
	* libnautilus-extensions/nautilus-art-extensions.c:
	(nautilus_art_irect_offset_by), (nautilus_art_irect_offset_to),
	(nautilus_art_irect_scale_by), (nautilus_art_irect_inset),
	(nautilus_art_drect_offset_by), (nautilus_art_drect_offset_to),
	(nautilus_art_irect_offset_by_point),
	(nautilus_art_irect_offset_to_point),
	(nautilus_art_drect_scale_by), (nautilus_art_drect_inset):
	Add a few convenience calls.

2001-02-22  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (something_failed), (install_failed), (uninstall_failed):
	Fixed output of Problem/Actions.
	
	* components/services/install/command-line/eazel-test-packsys.c:
	(test_database_mtime), (test_package_load), (main):
	Fixed a fatal free in test_database_mtime.
	Output first package loaded.
	Set the package load to be the first test.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(prune_failed_packages_helper), (fail_modified_packages),
	(get_softcat_info), (is_satisfied_from_package_list),
	(check_dependencies_foreach), (check_for_no_more_missing_features),
	(check_tree_helper), (execute), (install_packages),
	(uninstall_packages):
	If a package has suite_id set and no dependencies during pruning,
	fail by setting to ALREADY_INSTALLED.
	If  a package update/downgrades and isn't allowed to, set modified
	packages->status top CANCELLED.
	Ifdeffed out some code to always fail gnome-libs (for testing)
	Commented out some crack debug output (\t\t-->checking)
	Changed a status = CANCELLED to CIRCULAR_DEPENDENCY.
	Fixed bug 6811, need to find a possible test case.
	Fixed indentation in a fucktion.
	Added comments to the code that sets the infoblock for the
	progress signals.
	No longer set FORCE under any condition.
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_progress_signal):
	Tried to fix the uninstall emits, but since bytesize is rarely
	set...
	
	* components/services/install/lib/eazel-install-private.h:
	Added a newline...

	* components/services/install/lib/eazel-install-problem.h:
	Removed some consts.
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_breaks_foreach),
	(get_detailed_messages_foreach),
	(get_detailed_uninstall_messages_foreach), (compare_problem_case),
	(add_force_install_both_case), (add_force_remove_case),
	(add_remove_case), (add_update_case), (add_cascade_remove),
	(get_detailed_cases_foreach),
	(get_detailed_uninstall_cases_foreach),
	(eazel_install_problem_case_to_string),
	(eazel_install_problem_tree_to_case),
	(eazel_install_problem_tree_to_string),
	(build_categories_from_problem_list):
	Eliminated the use of packagedata_copy
	Fixed generation of strings for errors, won't report bogus
	"already installed" cases.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_xfer_callback), (eazel_install_fetch_package):
	Fixed the extra download progress emission, which ocurred since
	the off-by-1k gnome-vfs bug has been fixed.
	Paranoia check to not download suite objects.

	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_packagedata_fill_from_header):
	Fixed the broken feature loading.
	Added code to load epoch *sigh*

	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_rpm4_query_foreach):
	Added handler for QUERY_REQUIRES_FEATURE query enum.

	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_finalize), (packagedata_initialize),
	(packagedata_list_copy), (packagedata_copy),
	(packagedata_fill_in_missing),
	(flatten_packagedata_dependency_tree), (packagedata_dump_int):
	copy avoid duplicated objects in the new tree, fixes redundant
	problemhandler output.
	Flatten tree doesn't add suites.
	Added obsoletes and epoch to packagedata

2001-02-22  John Harper  <jsh@eazel.com>

	reviewed by: George Lebl <jirka@5z.com>

	Mostly fixed bug 1796 (Design a better First Time Walkthrough)
	by implementing Arlo's new design:

	* libnautilus-extensions/nautilus-druid-page-eazel.c: changed a
	lot of the Druid text

	(new_title_label, new_body_label): functions for creating the
	two types of labels used in the druid. Title labels are always
	anti-aliased in a hardcoded font, while body labels use the
	user's font choice and are never anti-aliased

	(set_up_service_signup_page): this page has been removed

	(make_title_page_icon_box): function to create an hbox
	containing the four icons displayed on the start page


	Fixed bugs 5625 (Bottom line of "Select User Level" dialog is
	out of view), 5901 (First-Time Druid dimensions hard-coded,
	text can be truncated) and 6496 (First-time Druid window clips
	some contents (with 100 dpi fonts)):

	* libnautilus-extensions/nautilus-druid-page-eazel.c: hacked
	this widget to scale correctly, the main change is _not_
	setting the width and height of the canvas widget item, to
	allow the normal size allocation mechanisms to work properly

	[ there are still a few minor things to tweak, but this is the
	bulk of the redesign done ]


	Fixed bug 6412 (Add option to disable medusa in the first time
	druid)
	
	* src/nautilus-first-time-druid.c: added `Launch Medusa' page,
	which is only displayed if the NAUTILUS_PREFERENCES_MEDUSA_BLOCKED
	option isn't set.


	Fix bug 6379 (Nautilus assumes http proxy is needed if
	updates.tgz doesn't exist)

	* src/nautilus-first-time-druid.c (download_callback): if
	result is GNOME_VFS_ERROR_NOT_FOUND, just print a message that
	there are no updates available, then continue as normal

	(instead of assuming a proxy error, and going into the proxy
	setup pane)


	Fixed bug 6528 (More explanation needed for GMC transistion
	stuff in the druid):

	* src/nautilus-first-time-druid.c (set_up_gmc_transition_page):
	added Vera's new text for this page of the druid


	Fixed illogical behaviour of show-desktop option in druid (the
	user's choice wasn't actually being applied, the saved value
	was always being used):

	* src/nautilus-first-time-druid.c (druid_finished): set
	NAUTILUS_PREFERENCE_SHOW_DESKTOP from the `draw_desktop'
	variable, not from `save_manage_desktop'

	* src/nautilus-first-time-druid.c (set_up_gmc_transition_page):
	don't default the `draw desktop' setting to true; instead set
	it to the `save_manage_desktop' value. Also, only display the
	`draw desktop' option when not in `beginner' mode


	Fixed bug 3060 (Font names marked for translation need
	comments):

	* libnautilus-extensions/nautilus-icon-factory.c,
	libnautilus-extensions/nautilus-gdk-font-extensions.c,
	libnautilus-extensions/nautilus-druid-page-eazel.c,
	src/nautilus-zoom-control.c, src/nautilus-first-time-druid.c:
	added comments before localized fonts and font components

2001-02-22  Andy Hertzfeld  <andy@eazel.com>

	* components/text/services/google.xml:
	* components/text/services/webster.xml:
	fixed bug 6889, add eazel redirect to the text services.
	
Thu Feb 22 21:22:58 2001  George Lebl <jirka@5z.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/nautilus-window-manage-views.c (change_selection)
	  (update_title) (load_new_location_in_sidebar_panels) 
	  (stop_loading_cover):  When traversing sidebar_panels and doing
	  things that could result in a sidebar_panels removal (failure),
	  copy the list first and then traverse the copy to avoid free list
	  corruption.

2001-02-22  John Harper  <jsh@eazel.com>

	reviewed by: Ramiro Estrugo <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-gtk-extensions.c
	(nautilus_gtk_label_make_bold, nautilus_gtk_label_make_larger,
	nautilus_gtk_label_make_smaller): call gtk_widget_ensure_style
	() before trying to fetch the style

2001-02-22  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 6859 (GTK signal macros don't work in non-GCC compilers
	for void return types).

	* libnautilus-extensions/nautilus-gtk-macros.h:
	Replaced old macros that accidentally relied on gccisms with
	new ones that are portable to other compilers.

		NAUTILUS_CALL_PARENT_CLASS is replaced by
			NAUTILUS_CALL_PARENT
		    and NAUTILUS_CALL_PARENT_WITH_RETURN_VALUE.

		NAUTILUS_CALL_VIRTUAL is replaced by
			NAUTILUS_CALL_METHOD
		    and NAUTILUS_CALL_METHOD_WITH_RETURN_VALUE

	* components/adapter/nautilus-adapter-control-embed-strategy.c:
	(nautilus_adapter_control_embed_strategy_destroy):
	* components/adapter/nautilus-adapter-embed-strategy.c:
	(nautilus_adapter_embed_strategy_destroy),
	(nautilus_adapter_embed_strategy_get_widget),
	(nautilus_adapter_embed_strategy_get_zoomable):
	* components/adapter/nautilus-adapter-embeddable-embed-strategy.c:
	(nautilus_adapter_embeddable_embed_strategy_destroy):
	* components/adapter/nautilus-adapter-factory-server.c:
	(nautilus_adapter_factory_server_destroy):
	* components/adapter/nautilus-adapter-file-load-strategy.c:
	(nautilus_adapter_file_load_strategy_destroy):
	* components/adapter/nautilus-adapter-load-strategy.c:
	(nautilus_adapter_load_strategy_destroy),
	(nautilus_adapter_load_strategy_load_location),
	(nautilus_adapter_load_strategy_stop_loading):
	* components/adapter/nautilus-adapter-progressive-load-strategy.c:
	(nautilus_adapter_progressive_load_strategy_destroy):
	* components/adapter/nautilus-adapter-stream-load-strategy.c:
	(nautilus_adapter_stream_load_strategy_destroy):
	* components/adapter/nautilus-adapter.c:
	(nautilus_adapter_destroy):
	* components/hardware/nautilus-hardware-view.c:
	(nautilus_hardware_view_destroy):
	* components/history/nautilus-history-view.c:
	(nautilus_history_view_destroy):
	* components/loser/content/nautilus-content-loser.c:
	(nautilus_content_loser_destroy):
	* components/loser/sidebar/nautilus-sidebar-loser.c:
	(nautilus_sidebar_loser_destroy):
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_destroy):
	* components/rpmview/nautilus-rpm-verify-window.c:
	(nautilus_rpm_verify_window_destroy):
	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_destroy):
	* components/sample/nautilus-sample-content-view.c:
	(nautilus_sample_content_view_destroy):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_view_destroy),
	(nautilus_service_install_view_finalize):
	* components/services/inventory-view/nautilus-inventory-config-page
	.c: (nautilus_inventory_config_page_destroy):
	* components/services/inventory-view/nautilus-inventory-view.c:
	(nautilus_inventory_view_destroy):
	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (nautilus_change_password_view_destroy):
	* components/services/nautilus-dependent-shared/eazel-services-foot
	er.c: (footer_destroy):
	* components/services/nautilus-dependent-shared/eazel-services-head
	er.c: (header_destroy):
	* components/services/summary/nautilus-summary-view.c:
	(nautilus_summary_view_destroy):
	* components/services/time/nautilus-view/trilobite-eazel-time-view.
	c: (trilobite_eazel_time_view_destroy):
	* components/text/nautilus-text-view.c:
	(nautilus_text_view_destroy):
	* components/throbber/nautilus-throbber.c:
	(nautilus_throbber_destroy), (nautilus_throbber_map),
	(nautilus_throbber_size_allocate):
	* components/tree/nautilus-tree-change-queue.c:
	(nautilus_tree_change_queue_destroy):
	* components/tree/nautilus-tree-expansion-state.c:
	(nautilus_tree_expansion_state_destroy):
	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_destroy):
	* components/tree/nautilus-tree-node.c:
	(nautilus_tree_node_destroy):
	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_destroy):
	* help/nautilus-quick-reference/.cvsignore:
	* help/nautilus-quick-reference/C/.cvsignore:
	* libnautilus-extensions/nautilus-background-canvas-group.c:
	(nautilus_background_canvas_group_update),
	(nautilus_background_canvas_group_draw),
	(nautilus_background_canvas_group_render):
	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_destroy):
	* libnautilus-extensions/nautilus-bookmark.c:
	(nautilus_bookmark_destroy):
	* libnautilus-extensions/nautilus-caption.c:
	(nautilus_caption_destroy), (nautilus_font_picker_show_all):
	* libnautilus-extensions/nautilus-clickable-image.c:
	(nautilus_clickable_image_destroy),
	(nautilus_clickable_image_realize),
	(nautilus_clickable_image_expose_event):
	* libnautilus-extensions/nautilus-debug-drawing.c:
	(debug_pixbuf_viewer_destroy):
	* libnautilus-extensions/nautilus-directory-metafile-monitor.c:
	(destroy):
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_destroy),
	(nautilus_directory_get_name_for_self_as_new_file),
	(nautilus_directory_are_all_files_seen),
	(nautilus_directory_contains_file),
	(nautilus_directory_call_when_ready),
	(nautilus_directory_cancel_callback),
	(nautilus_directory_file_monitor_add),
	(nautilus_directory_file_monitor_remove),
	(nautilus_directory_force_reload),
	(nautilus_directory_is_not_empty):
	* libnautilus-extensions/nautilus-druid-page-eazel.c:
	(nautilus_druid_page_eazel_destroy),
	(nautilus_druid_page_eazel_finalize),
	(nautilus_druid_page_eazel_size_allocate),
	(nautilus_druid_page_eazel_size_request):
	* libnautilus-extensions/nautilus-ellipsizing-label.c:
	(real_size_request), (real_size_allocate), (real_style_set):
	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_destroy), (nautilus_entry_key_press),
	(nautilus_entry_motion_notify), (nautilus_entry_set_selection),
	(nautilus_entry_insert_text), (nautilus_entry_delete_text),
	(nautilus_entry_selection_clear):
	* libnautilus-extensions/nautilus-file.c: (destroy),
	(nautilus_file_monitor_add), (nautilus_file_monitor_remove),
	(nautilus_file_get_date), (nautilus_file_get_where_string),
	(nautilus_file_get_directory_item_count),
	(nautilus_file_get_deep_counts), (nautilus_file_get_file_type),
	(nautilus_file_check_if_ready), (nautilus_file_call_when_ready),
	(nautilus_file_cancel_call_when_ready):
	* libnautilus-extensions/nautilus-font-factory.c: (destroy):
	* libnautilus-extensions/nautilus-font-picker.c:
	(nautilus_font_picker_destroy):
	* libnautilus-extensions/nautilus-horizontal-splitter.c:
	(nautilus_horizontal_splitter_destroy),
	(nautilus_horizontal_splitter_button_press):
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_destroy),
	(nautilus_icon_canvas_item_update):
	* libnautilus-extensions/nautilus-icon-container.c: (destroy),
	(size_allocate), (realize), (unrealize), (button_press_event),
	(button_release_event), (motion_notify_event), (key_press_event):
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_destroy):
	* libnautilus-extensions/nautilus-image-table.c:
	(nautilus_image_table_destroy),
	(nautilus_image_table_expose_event),
	(nautilus_image_table_realize), (nautilus_image_table_unrealize),
	(nautilus_image_table_remove):
	* libnautilus-extensions/nautilus-image.c:
	(nautilus_image_destroy):
	* libnautilus-extensions/nautilus-keep-last-vertical-box.c:
	(nautilus_keep_last_vertical_box_size_allocate):
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_destroy), (nautilus_label_size_request),
	(nautilus_label_size_allocate), (label_paint_pixbuf_callback):
	* libnautilus-extensions/nautilus-labeled-image.c:
	(nautilus_labeled_image_destroy):
	* libnautilus-extensions/nautilus-list-column-title.c:
	(nautilus_list_column_title_finalize):
	* libnautilus-extensions/nautilus-list.c: (nautilus_list_destroy),
	(nautilus_list_button_press), (nautilus_list_button_release),
	(nautilus_list_key_press), (nautilus_list_style_set),
	(nautilus_list_realize), (nautilus_list_unrealize), (draw_rows),
	(draw_all), (nautilus_list_draw), (nautilus_list_expose),
	(nautilus_list_resize_column), (nautilus_list_set_cell_contents),
	(set_list_cell), (nautilus_list_track_new_column_width),
	(nautilus_list_motion), (nautilus_list_clear), (insert_row):
	* libnautilus-extensions/nautilus-merged-directory.c:
	(merged_destroy):
	* libnautilus-extensions/nautilus-metafile-factory.c: (destroy):
	* libnautilus-extensions/nautilus-metafile.c: (destroy):
	* libnautilus-extensions/nautilus-preferences-box.c:
	(nautilus_preferences_box_destroy):
	* libnautilus-extensions/nautilus-preferences-pane.c:
	(nautilus_preferences_pane_destroy):
	* libnautilus-extensions/nautilus-scalable-font.c:
	(nautilus_scalable_font_destroy):
	* libnautilus-extensions/nautilus-string-picker.c:
	(nautilus_string_picker_destroy):
	* libnautilus-extensions/nautilus-tabs.c: (nautilus_tabs_destroy):
	* libnautilus-extensions/nautilus-text-caption.c:
	(nautilus_text_caption_destroy):
	* libnautilus-extensions/nautilus-trash-directory.c:
	(trash_destroy):
	* libnautilus-extensions/nautilus-trash-file.c: (trash_destroy):
	* libnautilus-extensions/nautilus-undo-context.c: (destroy):
	* libnautilus-extensions/nautilus-undo-manager.c: (destroy):
	* libnautilus-extensions/nautilus-vfs-directory.c: (vfs_destroy):
	* libnautilus-extensions/nautilus-vfs-file.c: (vfs_destroy):
	* libnautilus-extensions/nautilus-viewport.c:
	(nautilus_viewport_destroy), (nautilus_viewport_realize):
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_destroy):
	* libnautilus-extensions/nautilus-wrap-table.c:
	(nautilus_wrap_table_destroy):
	* libnautilus/nautilus-undo-transaction.c:
	(nautilus_undo_transaction_destroy):
	* libnautilus/nautilus-view.c: (nautilus_view_destroy):
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_destroy), (real_update_menus),
	(real_merge_menus):
	* src/file-manager/fm-directory-view.c:
	(text_attribute_names_changed_callback),
	(image_display_policy_changed_callback),
	(directory_view_font_family_changed_callback),
	(click_policy_changed_callback),
	(smooth_graphics_mode_changed_callback),
	(fm_directory_view_destroy),
	(fm_directory_view_file_limit_reached),
	(fm_directory_view_bump_zoom_level),
	(fm_directory_view_zoom_to_level),
	(fm_directory_view_restore_default_zoom_level),
	(fm_directory_view_can_zoom_in), (fm_directory_view_can_zoom_out),
	(fm_directory_view_get_background_widget),
	(fm_directory_view_get_selection), (reveal_newly_added_folder),
	(fm_directory_view_get_emblem_names_to_exclude),
	(fm_directory_view_merge_menus), (fm_directory_view_select_all),
	(fm_directory_view_set_selection),
	(fm_directory_get_selected_icon_locations),
	(fm_directory_view_reveal_selection),
	(fm_directory_view_is_read_only), (fm_directory_view_is_empty),
	(fm_directory_view_supports_creating_files),
	(fm_directory_view_accepts_dragged_files),
	(fm_directory_view_supports_properties),
	(fm_directory_view_supports_zooming),
	(fm_directory_view_update_menus):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_destroy),
	(fm_icon_view_clean_up), (fm_icon_view_get_directory_sort_by),
	(fm_icon_view_set_directory_sort_by),
	(fm_icon_view_get_directory_sort_reversed),
	(fm_icon_view_set_directory_sort_reversed),
	(fm_icon_view_get_directory_auto_layout),
	(fm_icon_view_set_directory_auto_layout),
	(fm_icon_view_get_directory_tighter_layout),
	(fm_icon_view_set_directory_tighter_layout),
	(fm_icon_view_supports_auto_layout),
	(fm_icon_view_start_renaming_item), (fm_icon_view_merge_menus),
	(fm_icon_view_update_menus):
	* src/file-manager/fm-list-view.c: (fm_list_view_adding_file),
	(fm_list_view_removing_file), (fm_list_view_file_still_belongs),
	(get_number_of_columns), (get_link_column),
	(get_default_sort_attribute), (get_column_specification):
	* src/file-manager/fm-properties-window.c: (real_shutdown),
	(real_destroy), (real_finalize):
	* src/file-manager/fm-search-list-view.c: (real_destroy),
	(real_add_file), (real_adding_file), (real_removing_file),
	(real_merge_menus), (real_update_menus):
	* src/nautilus-about.c: (nautilus_about_destroy):
	* src/nautilus-application.c: (nautilus_application_destroy),
	(nautilus_application_startup):
	* src/nautilus-complex-search-bar.c:
	(nautilus_complex_search_bar_destroy):
	* src/nautilus-desktop-window.c: (destroy), (realize):
	* src/nautilus-location-bar.c: (destroy):
	* src/nautilus-navigation-bar.c:
	(nautilus_navigation_bar_get_location),
	(nautilus_navigation_bar_set_location):
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_destroy):
	* src/nautilus-search-bar-criterion.c:
	(nautilus_search_bar_criterion_destroy):
	* src/nautilus-shell.c: (destroy):
	* src/nautilus-sidebar-tabs.c: (nautilus_sidebar_tabs_destroy),
	(nautilus_sidebar_tabs_size_allocate):
	* src/nautilus-sidebar-title.c: (nautilus_sidebar_title_destroy),
	(nautilus_sidebar_title_size_allocate):
	* src/nautilus-sidebar.c: (nautilus_sidebar_destroy),
	(nautilus_sidebar_size_allocate), (nautilus_sidebar_realize):
	* src/nautilus-simple-search-bar.c:
	(nautilus_simple_search_bar_destroy):
	* src/nautilus-switchable-navigation-bar.c:
	(nautilus_switchable_navigation_bar_destroy):
	* src/nautilus-switchable-search-bar.c:
	(nautilus_switchable_search_bar_destroy):
	* src/nautilus-theme-selector.c: (nautilus_theme_selector_destroy):
	* src/nautilus-view-frame.c: (nautilus_view_frame_destroy),
	(nautilus_view_frame_finalize), (nautilus_view_frame_map):
	* src/nautilus-window.c: (nautilus_window_destroy),
	(nautilus_window_realize), (nautilus_window_size_request),
	(nautilus_window_add_current_location_to_history_list),
	(nautilus_window_show):
	* src/nautilus-zoom-control.c: (nautilus_zoom_control_destroy),
	(nautilus_zoom_control_size_allocate):
	Use the macros by their new names.
<<<<<<< ChangeLog
	
	* RENAMING: Updated for some name changes and name change ideas.
	
	* user-guide/C/.cvsignore:
	* user-guide/C/html/.cvsignore:
	* user-guide/C/img/.cvsignore:
	* user-guide/C/sgml/.cvsignore:
	Added missing cvsignores.

2001-02-22  J Shane Culpepper  <pepper@eazel.com>

	* components/help/test-help-method.c: (main):

	Adding newline to make my compiler happy.

2001-02-22  Arik Devens  <arik@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 6391, nautilus crashes on certain strings set as home
	dir preference. This is actually only half the fix, for the "\"
	char i am waiting on pavel's input.
	
	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_initialize), (nautilus_entry_key_press): Removed
	tilde expand code.
	* libnautilus-extensions/nautilus-entry.h: Removed tilde_expand
	gboolean.
	* libnautilus-extensions/nautilus-preferences-item.c:
	(preferences_item_create_editable_string): Cleanup to use
	NAUTILUS_PREFERENCES_HOME_URI instead of "preferences/home_uri" as
	per ramiro's advice.
	* libnautilus-extensions/nautilus-text-caption.c:
	(nautilus_text_caption_initialize), (entry_key_press_callback),
	(nautilus_text_caption_set_expand_tilde): Added tilde_expand code
	to the text-caption for use in the preferences dialog. Much
	smarter tilde code, should handle any corner case (at least any i
	could think of).
	* src/nautilus-location-bar.c: (try_to_expand_path),
	(editable_key_press_callback), (nautilus_location_bar_initialize):
	Added handling of the ~/ case directly to the location bar instead
	of going through the NautilusEntry.

2001-02-22  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Partially fixed bug 6863 (tree view slow to load):

	* libnautilus-extensions/nautilus-ctree.c (set_node_info):
	don't sort each node in auto-sort mode
	(nautilus_ctree_set_node_info): sort each node in auto-sort
	mode, but use the function that only sorts a single node, not
	the entire branch

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_insert_model_node): temporarily turn off
	auto-sort mode while inserting nodes (do this by twiddling the
	bit by hand, since the function to set this flag automatically
	sorts the tree)

2001-02-22  Mike Fleming  <mfleming@eazel.com>

	Bug 6761: promote html help uris in the {gnome-,g,}help
	uri scheme to point to sgml files if they exist 

	* components/help/Makefile.am:
	* components/help/help-method.c: (string_ends_in),
	(strdup_string_to_substring_end), (check_sgml_promotion),
	(help_name_to_local_path), (transform_file), (help_do_transform):
	* components/help/test-help-method.c: (test_failed),
	(strcmp_tolerate_nulls), (test_uri_transform), (main):

2001-02-22  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_install_failed), (impl_uninstall_failed):

	Change direct casts to GtkObject-style casts.

	* components/services/install/nautilus-view/forms.c:
	(make_query_box):

	Vera'fy the installer text.
	
	* nautilus-installer/install-lib/Makefile.am:
	* nautilus-installer/src/Makefile.am:
	* nautilus-installer/src/create-eazel-installer.sh:

	Cause installer to be built with -g -O2, and to notice a debug
	build and not strip the binary.

	* nautilus-installer/src/installer.c: (report_unusual_errors),
	(install_failed), (uninstall_failed), (download_failed),
	(install_done):
	* nautilus-installer/src/installer.h:

	Remove crufted error-tree parsing code (install lib does this for
	us now).  Notice when any install or download fails, and treat
	that as an overall failure, even if install_done is called with
	success = TRUE.

	* nautilus-installer/src/main.c: (segv_handler), (main):

	Catch more signals, but only in debug mode.

	* nautilus-installer/src/package-tree.c:

	Remove references to nonexistent icons.
	
2001-02-22  Ian McKellar  <ian@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-test-packsys.c:
	(test_database_mtime), (main):
	* components/services/install/lib/eazel-package-system-dpkg.c:
	(load_package_callback), (query_callback),
	(eazel_package_system_dpkg_query),
	(eazel_package_system_dpkg_install),
	(eazel_package_system_dpkg_compare_version),
	(eazel_package_system_dpkg_database_mtime),
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-private.h:
	* components/services/install/lib/eazel-package-system-rpm3-private
	.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_database_mtime),
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-skeleton.c:
	(eazel_package_system_skeleton_compare_version):
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_database_mtime):
	* components/services/install/lib/eazel-package-system.h:
	Added a function to retrieve the package database modification time.

	* components/services/inventory/eazel-inventory-collect-hardware.c:
	(eazel_inventory_collect_scsi), (eazel_inventory_collect_hardware):
	Cleanups, fixes...

	* components/services/inventory/eazel-inventory-utils.c:
	(get_software_inventory), (eazel_create_configuration_metafile):
	Cache the software inventory (because the RPM query is slow).

	* user-guide/C/Makefile.am:
	Build fix for systems without scrollkeeper.

2001-02-22  Mike Fleming  <mfleming@eazel.com>

	Embedded Mozilla User Agent string "Nautilus/1.0PR3" -> "Nautilus/1.0Final"
	Trilobite version "0.2.0" -> "0.3.0" (so Trilobite user agent string
	is now "Trilobite/0.3.0" 

	* components/mozilla/nautilus-mozilla-content-view.c:
	(post_widget_initialize):
	* components/services/trilobite/libtrilobite/Makefile.am:

2001-02-22  J Shane Culpepper  <pepper@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* components/mozilla/Makefile.am:
	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(mozilla_title_changed_callback), (mozilla_js_status_callback),
	(mozilla_get_containing_window), (mozilla_new_window_callback):

	Catch mozilla or javascript trying to open a new window and
	post a nautilus warning dialog that they are not supported.
	Fix for bug #3058.  Still needs better a  worded warning message.

2001-02-22  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 6312, information about translation in the about box,
	by adding a localizable string that is displayed in the lower
	left of the about box if it's changed from the default.
	
	fixed bug 6708, support link in help menu, by changing the uri to
	the real one we want to ship with, that currently points to a
	placeholder page.  Also, due to popular demand, renamed it back
	to "Support".
	
	* src/nautilus-about.c: (nautilus_about_new),
	(nautilus_about_draw_info):
	added a translators parameter, and used it to draw the translators
	credits if present.
	* src/nautilus-about.h:
	added translator parameter to nautilus_about_new
	* src/nautilus-shell-ui.xml:
	changed menu name to "support"
	* src/nautilus-window-menus.c: (help_menu_about_nautilus_callback),
	(help_menu_support), (nautilus_window_initialize_menus):
	renamed verb to support, changed link to point to intended support site.
	
2001-02-22  Michael Engber  <engber@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* components/notes/nautilus-notes.c:
	(on_text_field_focus_out_event), (make_notes_view):
	Save notes on focus out - bug 6851.

2001-02-22  Robin * Slomkowski  <rslomkow@eazel.com>

	reviewed by: Eric Fischer <eric@eazel.com>

	* nautilus.spec.in: updated text in refrence to BUG 6853

2001-02-22  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 3321 (Finalize contents of Help menu for 1.0).
	Actually there's still an open issue about the Customer
	Service item, which I've left in for now.

	* src/nautilus-shell-ui.xml: Added Quick Reference, removed
	License, put About last after a separator.

	* src/nautilus-window-menus.c:
	(help_menu_nautilus_quick_reference_callback): New callback.
	(help_menu_nautilus_license_callback): Removed this.
	(nautilus_window_initialize_menus): Install callback for
	Quick Reference, remove for License.


	Also removed the space from "tool bar" everywhere, per the
	final decision of Vera & Rhoda. I grepped and replaced
	everywhere for "tool bar", "Tool Bar", "TOOL_BAR", and
	"tool_bar".

	* components/loser/content/nautilus-content-loser-ui.xml:
	* components/loser/sidebar/nautilus-sidebar-loser-ui.xml:
	* components/mozilla/bonobo-extensions.c:
	* components/sample/nautilus-sample-content-view-ui.xml:
	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_install_defaults),
	(global_preferences_install_visibility),
	(global_preferences_create_dialog):
	* libnautilus-extensions/nautilus-global-preferences.h:
	* src/nautilus-service-ui.xml:
	* src/nautilus-shell-ui.xml:
	* src/nautilus-window-menus.c:
	(view_menu_show_hide_toolbar_callback),
	(nautilus_window_update_show_hide_menu_items),
	(help_menu_nautilus_quick_reference_callback),
	(nautilus_window_initialize_menus):
	* src/nautilus-window-toolbars.c: (set_up_special_bonobo_button),
	(set_up_toolbar_images), (theme_changed_callback),
	(set_up_back_or_forward_toolbar_item),
	(nautilus_window_initialize_toolbars):
	* src/nautilus-window.c: (nautilus_window_constructed),
	(nautilus_window_hide_toolbar), (nautilus_window_show_toolbar),
	(nautilus_window_toolbar_showing), (nautilus_window_show):
	* src/nautilus-window.h:
	Made toolbar one word.

2001-02-22  Seth Nickell  <seth@eazel.com>

	reviewed by: Ramiro Estrugo <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-volume-monitor.c:

	Fix performance issue on Solaris by not rescanning through the
	mounttable to discover if a volume is removable, etc, but 
	rather extracting all relevant attributes in a single pass.
	
2001-02-22  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* components/mozilla/nautilus-mozilla-encoding-tables.c:
	No need to have 2 strings.  Use an array of just one string.

	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_view_create_charset_encoding_submenu):
	Replace assertion with a more robust check for NULL.

	
	reviewed by: Seth Nickell <seth@eazel.com>

	* applets/preferences-applet/nautilus-preferences-applet.c:
	(quit_nautilus_button_clicked_callback),
	(start_nautilus_button_clicked_callback),
	(restart_nautilus_button_clicked_callback),
	(exit_button_clicked_callback), (main):
	Add a exit button for the applet itself.  Renamed nautilus remote
	callbacks to be clearer.
	
	* libnautilus-extensions/nautilus-art-extensions.h:
	* libnautilus-extensions/nautilus-art-extensions.c:
	(nautilus_art_irect_is_valid),
	(nautilus_self_check_art_extensions): New functions and tests for
	checking whether a rectangle is valid.

	* libnautilus-extensions/nautilus-glyph.h: Use int instead
	of guint everywhere.
	* libnautilus-extensions/nautilus-glyph.c: (nautilus_glyph_new),
	(nautilus_glyph_free), (glyph_get_width_space_safe): New functions
	to get dimensions that work with glyphs that are just empty space.
	(glyph_get_height_space_safe), (nautilus_glyph_get_width),
	(nautilus_glyph_get_height), (nautilus_glyph_get_dimensions): Make
	these work with empty spaces.
	(glyph_is_valid), (nautilus_glyph_draw_to_pixbuf): Use libart rgba
	functions instead of doing our own alpha blending.  Allow for
	rendering glyphs with just blank spaces (noop).  Remove debug code.
	(nautilus_glyph_intersect): New function to intersect a glyph at
	some coordinates with a rectangle.

	* test/test-nautilus-glyph-simple.c: (main):
	* test/test-nautilus-glyph.c: (glyph_new), (main):
	* test/test.c: (test_pixbuf_draw_rectangle_tiled):
	More glyph tests.

2001-02-22  Dan Mueth  <dan@eazel.com>

	reviewed by: Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus.spec.in: Commenting out offensive line.
	I'm not sure where the breakage is now.  Hopefully
	I can track it down tomorrow and uncomment this.

2001-02-22  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com> (Post Mortem)

	Fix bug 6824 - Mozilla component charset encodings are not translated.
	
	* components/mozilla/Makefile.am:
	Add new encoding tables sources.  Add GNOMELOCALEDIR define to
	make gettext happy.
	* components/mozilla/main.c: (main):
	Add gettext binding setup.
	
	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_view_create_charset_encoding_submenu):
	Use the translated strings for menu labels.

	* components/mozilla/nautilus-mozilla-embed-extensions.h:
	* components/mozilla/nautilus-mozilla-embed-extensions.cpp:
	Simplified by using an stl vector instead of a GList.  Moved the
	encoding tables to their own place.   Added functions for
	obtaining the encoding titles and encoding groups as translated
	strings.
	
	* components/mozilla/nautilus-mozilla-encoding-tables.h:
	* components/mozilla/nautilus-mozilla-encoding-tables.c:
	Moved the encoding tables to their own place.

2001-02-22  Seth Nickell  <seth@eazel.com>
 
 	reviewed by: Gene Z. Ragan <gzr@eazel.com>
 
 	* acconfig.h:
 	* configure.in:
 
 	Add various mount system checks.
 	
 	* libnautilus-extensions/nautilus-cdrom-extensions.h:
 
 	Only do particular #defines for ioctl stuff if the system
 	doesn't already define them.
 	
 	* libnautilus-extensions/nautilus-volume-monitor.c:
 
 	Add Solaris compatible changes to the volume monitor, making
 	it build and function properly on Solaris.
 		
2001-02-22  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>
	
	Fixed bug 5681, Services icon on desktop may need
	better icon and text
	
	* src/nautilus-first-time-druid.c: (druid_finished):
	Change link icon to display hand.png

2001-02-22  Dan Mueth  <dan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Generally, I removed old cruft, added COPYING-DOCS, added
	a new HTML doc (nautilus-quick-reference), and updated
	the build stuff and spec file as necessary.

	* COPYING-DOCS: This is the GNU FDL, similar to COPYING.  It
	  should be installed with all modules with FDL'd docs.
	* Makefile.am: Added COPYING-DOCS to EXTRA_DIST
	* configure.in: Added nautilus-quick-reference 
	* help/Makefile.am: Added nautilus-quick-reference
	* help/htmldocs.make: Created this file.  This is the makefile
	  to suck in for html docs.  Be sure to use index.html as
	  your primary HTML file and put PNG images into figures/

	This stuff is Vera's new Nautilus Quick Reference doc in HTML
	format. <vera@eazel.com>  I purposefully left out two screenshots
	with the Eazel logo in them.
	* help/nautilus-quick-reference/C/Makefile.am: added
	* help/nautilus-quick-reference/C/figures/colors_small.png: added
	* help/nautilus-quick-reference/C/figures/emblems_small.png: added
	* help/nautilus-quick-reference/C/figures/ff_small.png:
	* help/nautilus-quick-reference/C/figures/find_small.png:
	* help/nautilus-quick-reference/C/figures/locbar_small.png:
	* help/nautilus-quick-reference/C/figures/menubar_small.png:
	* help/nautilus-quick-reference/C/figures/music_small.png:
	* help/nautilus-quick-reference/C/figures/sidebar_small.png:
	* help/nautilus-quick-reference/C/figures/softcat.png:
	* help/nautilus-quick-reference/C/figures/storage.png:
	* help/nautilus-quick-reference/C/figures/themes_small.png:
	* help/nautilus-quick-reference/C/index.html:
	* help/nautilus-quick-reference/C/nautilus-quick-reference-C.omf:
	* help/nautilus-quick-reference/Makefile.am:
	* help/nautilus-user-manual/C/nautilus-user-manual-C.omf: Updated
	* nautilus.spec.in: Added OMF files, Quick Ref, and COPYING-DOCS

	Removed this old stuff:
	* user-guide/C/Makefile.am: 
	* user-guide/C/html/license.html:
	* user-guide/C/img/custicon.png:
	* user-guide/C/img/full.png: removed
	* user-guide/C/img/locbar.png: 
	* user-guide/C/img/player.png:
	* user-guide/C/img/prefmenu.png:
	* user-guide/C/img/sidebar.png:
	* user-guide/C/img/viewmenu.png:
	* user-guide/C/nautilus-C.omf:
	* user-guide/C/sgml/nautilus.sgml:

	Added this notice so people don't add stuff in user-guide/
	* user-guide/NOTICE:

2001-02-22  Gene Z. Ragan  <gzr@eazel.com>
 
 	reviewed by: Pavel Cisler <pavel@eazel.com>
 
 	Fixed bug 4907, Can't drag from Nautilus to Netscape
 	
 	Fixed bug 5334, Can't drag file from Nautilus into
 	Netscape's attachment window
 	
 	Fixed bug 6563, Drag & Drop of files with non-alphanumeric
 	characters broken
 	
 	* libnautilus-extensions/nautilus-drag.c:
 	(add_one_netscape_url_list):
 	Make sure that only one item is added to the return
 	value. Netscape is only expecting one item and fails
 	if more than one item is in the list.
 	
 	(nautilus_drag_drag_data_get):
 	Rename add_one_url_list to add_one_netscape_url_list
 
 	(add_one_path_list):
 	Return a path, not a URI.
 	
2001-02-22  Arlo Rose  <arlo@eazel.com>

	* icons/hand.png:
	* icons/hand.svg:
	Added hand.png, deleted hand.svg

Thu Feb 22 04:13:13 2001  George Lebl <jirka@5z.com>

	Approval sucker: Maciej <mjs@eazel.com>

	* components/help/converters/gnome-man2html2/gnome-man2html.c
	  (scan_request): Fix bug #3334, by handling the ".' " troff request.

	* libnautilus-extensions/nautilus-directory-async.c
	  (nautilus_directory_async_state_changed): the unref could be
	  the last one, so don't access the directory afterwards.

2001-02-22  Arlo Rose  <arlo@eazel.com>

	* icons/Makefile.am:
	* icons/hand-72.png:
	* icons/hand-96.png:
	Trying to make the service icons consistent in Nautilus.
	Next stop, toolbar!

2001-02-22  Robey Pointer  <robey@eazel.com>

	reviewed by: Stephane Miller  <stephane@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line), (main):

	Remove eazel-install's restrictions on doing an upgrade and
	downgrade at the same time, since it's perfectly capable of doing
	that (covering all bases) and it's useful to labs.

2001-02-22  Arlo Rose  <arlo@eazel.com>

	* icons/druid_header.png:
	* icons/druid_header_stretch.png:
	* icons/druid_sidebar.png:
	Tweaked images in druid to use my 3D logo, and
	blue shades rather than teal.

2001-02-21  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Rebecca Schulman  <rebecka@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_medusa_blocked_changed_callback),
	(global_preferences_create_search_pane),
	(global_preferences_medusa_state_changed_callback),
	(global_preferences_install_medusa_defaults):
	Fix bug 6415 - Change what appears in the medusa preference when
	medusa becomes blocked.
	Also made the default and actual value of the MEDUSA_BLOCKED be
	correct.  The boolean value was inverted.
	
	* libnautilus-extensions/nautilus-medusa-support.c:
	(nautilus_medusa_blocked): Call medusa to find out if its blocked.
	
2001-02-21  Darin Adler  <darin@eazel.com>

	reviewed by: Mike Engber <engber@eazel.com>

	Fixed bug 6839 (Nautilus crashes with a segmentation fault when
	clicking Edit->Nautilus Themes).
	
	* src/nautilus-theme-selector.c:
	(get_theme_description_and_display_name): Make a bad URI be
	non-fatal (not really needed for bug fix).
	(populate_list_with_themes): Pass the URI for the URI parameter,
	not the local path.

	Other stuff.

	* src/nautilus-sidebar.c: (nautilus_sidebar_update_buttons): Added
	a FIXME to some questionable code.

2001-02-21  John Harper  <jsh@eazel.com>

	* src/file-manager/fm-directory-view.c (activate_callback):
	deleted unused action_type variable

2001-02-21  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug I introduced in my last sorting change (sort order
	was incorrect when nodes are first inserted):

	* components/tree/nautilus-tree-view-private.h: added an
	`inserting_node' flag field to the view details. This is used
	to tell the sorting comparison function when the nodes it's
	trying to sort haven't yet been fully initialized

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_insert_model_node): set the inserting_node
	flag around the call to nautilus_ctree_insert_node (). After
	the node is fully initialized, call
	nautilus_ctree_sort_single_node ()

	(ctree_compare_rows): when `inserting_node' is set, bail out
	with a nonsense value

	* libnautilus-extensions/nautilus-ctree.h,
	libnautilus-extensions/nautilus-ctree.c: reverted the change to
	insert_node
	(nautilus_ctree_sort_single_node): new function, reorders a
	given node, but no others

2001-02-21  Darin Adler  <darin@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fix bug 6286 (get 3 directory loads instead of 1 when you activate
	file in directory view [as opposed to typing location]). This is
	mostly right, but there's still a relatively common case where we
	get a 2nd directory load. I'll have to write a bug report about
	that case, but it's no worse than before and quite a bit better.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy): Stop monitoring. Also change the old
	monitoring code to use different "client" pointers so multiple
	monitors don't interfere with each other.
	(activate_callback): Stop monitoring when we get to the point of
	actually activating (unless we are opening through the shell).
	Also do some small cleanup to "command:" handling code and fix
	minor storage leak.
	(cancel_activate_callback): Stop monitoring if we cancel.
	(fm_directory_view_activate_file): Start monitoring so the load
	can be shared between all who need it. This is the same
	optimization done at the shell level.
	(load_directory): Use the new client pointer approach so multiple
	monitors don't interfere with each other.
	(finish_loading): Use the new client pointer approach so multiple
	monitors don't interfere with each other.
	(disconnect_model_handlers): Use the new client pointer approach
	so multiple monitors don't interfere with each other.
	(monitor_file_for_open_with): Use the new client pointer approach
	so multiple monitors don't interfere with each other.
	(monitor_file_for_activation): New function that monitors the
	file list so we don't get multiple directory loads.

	Fix tests now that gnome-vfs has a fix for bug 6798 (URI functions
	don't always treat domain names as case-insensitive) and fix bug
	6799 (nautilus_uris_match_ignore_fragments gives wrong result for
	URIs with trailing "/" characters).

	* libnautilus-extensions/nautilus-file-utilities.h:
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical_strip_fragment): New function.
	(uris_match): Use new function to handle fragments better.
	(nautilus_self_check_file_utilities): Update checks to
	expect fixes in gnome-vfs and here. Note that both bugs
	6798 and 6799 are now fixed.
	
	* help/.cvsignore:
	* help/nautilus-user-manual/.cvsignore:
	* help/nautilus-user-manual/C/.cvsignore:
	* omf-install/.cvsignore:
	Ignore generated files in some new directories.
	
2001-02-21  Michael Engber  <engber@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/file-manager/fm-properties-window.c: (set_icon_callback):
	Property window now stores a uri (as opposed to a path) in
	metadata for custom icons - bug 6841.

2001-02-21  Michael Engber  <engber@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>
	             John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-directory-metafile-monitor.h:
	* libnautilus-extensions/nautilus-directory-metafile-monitor.c:
	(nautilus_metafile_monitor_initialize_class),
	(nautilus_metafile_monitor_get_epv),
	(nautilus_metafile_monitor_get_vepv),
	(nautilus_metafile_monitor_create_servant),
	(nautilus_metafile_monitor_initialize), (destroy),
	(nautilus_metafile_monitor_new), (corba_metafile_changed):
	Added implementation of monitors for directories to recieve
	notification when their metadata changes. This works across
	processes.

	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_destroy),
	(nautilus_directory_emit_change_signals):
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory-async.c:
	(metafile_read_mark_done), (metafile_read_start),
	(nautilus_directory_monitor_add_internal),
	(update_metadata_monitors),
	(nautilus_directory_monitor_remove_internal),
	(nautilus_directory_call_when_ready_internal),
	(nautilus_directory_cancel_callback_internal),
	(nautilus_async_destroying_file), (request_is_satisfied),
	(call_ready_callbacks):
	The state machine now uses monitors in the metadata server
	process.

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(get_metafile), (nautilus_directory_is_metadata_read),
	(nautilus_directory_get_file_metadata),
	(nautilus_directory_get_file_metadata_list),
	(nautilus_directory_set_file_metadata),
	(nautilus_directory_set_file_metadata_list),
	(nautilus_directory_set_boolean_file_metadata),
	(nautilus_directory_set_integer_file_metadata),
	(nautilus_directory_copy_file_metadata),
	(nautilus_directory_remove_file_metadata),
	(nautilus_directory_rename_file_metadata),
	(nautilus_directory_register_metadata_monitor),
	(nautilus_directory_unregister_metadata_monitor):
	* libnautilus-extensions/nautilus-directory-metafile.h:
	-new calls for registering/unregistering monitors 
	-Metadata setters no longer return booleans.
	-misc cleanup of CORBA exception code (or lack thereof)

	* libnautilus-extensions/nautilus-file-private.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_is_self_owned), (destroy),
	(nautilus_file_get_parent_uri), (get_file_for_parent_directory),
	(nautilus_file_can_rename), (nautilus_file_get_gnome_vfs_uri),
	(rename_callback), (nautilus_file_rename),
	(nautilus_file_set_directory), (get_metadata_name),
	(nautilus_file_set_metadata), (nautilus_file_set_metadata_list),
	(nautilus_file_set_boolean_metadata),
	(nautilus_file_set_integer_metadata), (nautilus_file_get_uri),
	(nautilus_file_mark_gone), (nautilus_file_changed):
	-exposed (& renamed) is_self_owned in the private header.
	-metadata setters no longer emit changes (it's done by the server)

	* libnautilus-extensions/nautilus-metafile-server.idl:
	-metafile_changed now is passed a list of file names

	* libnautilus-extensions/nautilus-metafile.c:
	(nautilus_metafile_get_epv), (destroy), (corba_is_read),
	(corba_get), (corba_get_list), (corba_set), (corba_set_list),
	(corba_copy), (corba_remove), (corba_rename), (find_monitor_node),
	(corba_register_monitor), (corba_unregister_monitor),
	(call_metatfile_changed), (file_list_filler_ghfunc),
	(call_metafile_changed_for_all_files_mentioned_in_metafile),
	(call_metatfile_changed_for_one_file):
	* libnautilus-extensions/nautilus-metafile.h:
	- metafile setters now emit changes and do not return boolean values
	- added call_metafile_changed_for_all_files_mentioned_in_metafile

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_callback):
	Un-canelable timed wait dialogs now have an ok button
	which dismisses them.

	* libnautilus-extensions/nautilus-trash-directory.c:
	(find_directory_start):
	Slightly clarified the text in the infamous searching for text dialog.

2001-02-21  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 6828 (Moving directories in tree view makes contents
	become top-level nodes):

	* components/tree/nautilus-tree-node.h,
	components/tree/nautilus-tree-node.c,
	components/tree/nautilus-tree-node-private.h

	(nautilus_tree_node_update_uri): new private function, updates
	the node's cached URI from its NautilusFile and updates the new
	is_toplevel flag

	(nautilus_tree_node_is_toplevel): new function, returns true if
	the node shouldn't have a parent node

	* components/tree/nautilus-tree-model.c: track nodes that have
	no parent but aren't top-level nodes. If suitable parents later
	appear the unparented nodes will be connected to them

	* components/tree/nautilus-tree-view.c,
	components/tree/nautilus-tree-view-private.h: do similar
	tracking of unparented nodes (but from the point of view of the
	view, not the model)

	[ Having both modules duplicate this similar functionality
	isn't ideal, but I don't see how to unify it ]


	Fixed bug 6820 (directory sort order is different in tree
	view):

	* components/tree/nautilus-tree-view.c (ctree_compare_rows):
	new function, set as the comparison function for tree views.
	It calls nautilus_file_compare_for_sort () on the files
	associated with the tree rows (with hardcoded type
	NAUTILUS_FILE_SORT_BY_NAME for now)

	* libnautilus-extensions/nautilus-ctree.c
	(nautilus_ctree_insert_node): for sorted insertions, link the
	inserted node into the tree before finding the correct place,
	then move it afterwards. This ensures that the comparison
	function is able to find the node pointers from the row
	pointers that it's given

2001-02-21  Rebecca Schulman  <rebecka@eazel.com>
	Remove the "backup unindexed search" preference for 1.0, which is
	bugzilla.eazel.com bug 6775.  We will not be doing backup
	searches, and with Ramiro's help redo preference changes more
	cleanly, and to be more compatible with his preference changes.

	reviewed by: Ramiro Estrugo <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_install_defaults),
	(global_preferences_install_visibility),
	(global_preferences_create_dialog),
	(global_preferences_install_home_location_defaults),
	(global_preferences_use_fast_search_changed_callback),
	(global_preferences_medusa_state_changed_callback),
	(global_preferences_install_medusa_defaults):
	* libnautilus-extensions/nautilus-global-preferences.h:
	Remove the old BACKUP_SEARCH preference, and add functions
	to install medusa preference defaults, and to synchronize
	the gconf value of the preference with the system configuration
	file used by medusa.
	
	* libnautilus-extensions/nautilus-preferences.c:
	(nautilus_preferences_set_boolean),
	(nautilus_preferences_get_boolean):
	Remove old system preferences calls

	* libnautilus-extensions/Makefile.am:	
	* libnautilus-extensions/nautilus-system-preferences.c:
	* libnautilus-extensions/nautilus-system-preferences.h:
	Remove these
	* libnautilus-extensions/nautilus-medusa-support.c:
	(nautilus_medusa_services_have_been_enabled_by_user),
	(nautilus_medusa_blocked), (nautilus_medusa_enable_services),
	(nautilus_medusa_add_system_state_changed_callback):
	* libnautilus-extensions/nautilus-medusa-support.h:
	Add this file to hide potentially ifdef'd out medusa 
	code.
	
	* src/file-manager/fm-search-list-view.c: (load_location_callback):
	* src/nautilus-complex-search-bar.c:
	(nautilus_complex_search_bar_get_location):
	Remove logic related to the BACKUP_SEARCH feature.

2001-02-21  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: moved documentation to
	%{prefix}/share/gnome/help/nautilus-user-manual/C/*
	and added gnugpl dir BUG 6837 

2001-02-21  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>
	
	Fixed bug 6465, Music view buttons stretch for songs
	with very long titles.
	
	* components/music/nautilus-music-view.c: (add_play_controls),
	(nautilus_music_view_set_album_image):
	Change the way that the play controls are added to the pack box
	so that they do not expand in strange ways or change their position
	when a custom image is added.
		
2001-02-21  Darin Adler  <darin@eazel.com>

	reviewed by: Mike Fleming <mfleming@eazel.com>

	Busted the Tinderbox again! (Another attempt to fix it.)

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_self_check_file_utilities): Changed the tests
	to match reality.

	* configure.in:
	* user-guide/Makefile.am:
	Turned the user guide off again. Dan explained that this
	is what he meant to do (I got it wrong).

2001-02-21  Eric Fischer <eric@eazel.com>

	* nautilus-installer/install-lib/Makefile.am:
	Use ln to make links into the real install/lib directory;
	add header file prerequisites

	* nautilus-installer/libtrilobite/Makefile.am:
	Use ln to make links into the real libtrilobite directory;
	fix header file prerequisites

	* nautilus.spec.in:
	Again, try to build the installer in tinderbox.  With luck,
	it'll actually work this time.

2001-02-21  Darin Adler  <darin@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	An attempt to fix the Tinderbox.

	* user-guide/Makefile.am: Add C subdir.

	Other changes.

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_format_uri_for_display): Simplify to take advantage of
	the new gnome_vfs_get_local_path_from_uri, which rejects paths
	that have "#" characters in them.
	(nautilus_self_check_file_utilities): Add more test cases for
	host names that are case sensitive.

	* omf-install/.cvsignore: Ignore generated files in this new
	directory.

2001-02-21  Laszlo Kovacs <laszlo.kovacs@sun.com>
	* components/help/Makefile.am
	enabling Scrollkeeper to be the default help system

2001-02-21  Ramiro Estrugo  <ramiro@eazel.com>

	* README: Clarify the Mozilla version requirements.

2001-02-21 John Fleck <jfleck@inkstain.net>

	* components/help/converters/gnome-db2html2/sect-preparse.c
	add a test to gloss_term_append - if a glossentry has not id (a
	special case, but one that does on occasion occur) bail out of the
	function without trying to add it to the hash of glossentries
	fixes bug #6511
	
2001-02-20  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	* components/services/summary/eazel-summary-shared.c
	(parse_service), (parse_eazel_news_item),
	(parse_update_news_item),
	(build_services_glist_from_xml),
	(build_eazel_news_glist_from_xml),
	(build_update_news_glist_from_xml): Make this more robust against
	unusual data from the server. In particular, if the SERVICES list
	or other lists are emtpy, do not crash.

2001-02-21  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 5939, margins in text icons are weirdly proportioned.
	Fixed by distinguishing the rectangles for the anti-aliased and
	non-aa icon types
	
	* icons/i-regular.xml:
	added and tweaked both aa and non-aa text rectangles
	* libnautilus-extensions/nautilus-icon-factory.c:
	(get_themed_icon_file_path):
	get a separate text rectangle for anti-aliased mode if present
	
	fixed bug 6708, Change "support" link in menus, by moving and
	renamed the "support" item from the services menu to the help menu.
	This bug isn't finished yet, since we still have to rename the
	support uri, but it isn't ready on the service yet.
	
	* src/nautilus-service-ui.xml:
	removed support item
	* src/nautilus-shell-ui.xml:
	added customer service item
	* src/nautilus-window-menus.c: (help_menu_customer_service),
	(nautilus_window_initialize_menus):
	added code to handle the customer service command
	* src/nautilus-window-service-ui.c:
	(nautilus_window_install_service_ui):
	removed callback for the support command

2001-02-21  Dan Mueth  <dan@eazel.com>

	reviewed by: Mike Fleming  <mfleming@eazel.com>

	The old help tree, "user-guide/*", was broken in several ways.
	It assumed there was only one doc, called "user-guide", whereas
	we have multiple docs.  Plus it had odd subdirectories which
	are unusual and we don't want to use.  Plus the convention is
	to put all docs in a directory called "help" (modelled after
	$prefix/gnome/help) and figures in a subdir called "figures".
	So, I'm creating a new tree for this called "help" and installing
	the latest version of Vera's Nautilus User Manual with
	screenshots.  I also added a nifty makefile, help/docs.make,
	which we will use for all the SGML docs and translations
	to keep things tidy and working with low maintenance.

	* Makefile.am: Including help/
	* configure.in: Including help/ and subdirs
	* help/Makefile.am: added
	* help/docs.make: added nifty makefile to be used by all
	  SGML docs and translations of SGML docs
	* help/nautilus-user-manual/C/Makefile.am: added
	* help/nautilus-user-manual/C/figures/custicon.png: added
	* help/nautilus-user-manual/C/figures/full.png: added
	* help/nautilus-user-manual/C/figures/link.png: added
	* help/nautilus-user-manual/C/figures/locbar.png: added
	* help/nautilus-user-manual/C/figures/noread.png: added
	* help/nautilus-user-manual/C/figures/nowrite.png: added
	* help/nautilus-user-manual/C/figures/part.png: added
	* help/nautilus-user-manual/C/figures/player.png: added
	* help/nautilus-user-manual/C/figures/prefmenu.png: added
	* help/nautilus-user-manual/C/figures/sidebar.png: added
	* help/nautilus-user-manual/C/figures/viewmenu.png: added
	* help/nautilus-user-manual/C/figures/viewmusic.png: added 
	* help/nautilus-user-manual/C/nautilus-user-manual-C.omf: added
	* help/nautilus-user-manual/C/nautilus-user-manual.sgml: added
	* help/nautilus-user-manual/Makefile.am: added
	* user-guide/Makefile.am: turned off old user guide installation

2001-02-21  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/callbacks.c:
	(nautilus_service_install_download_progress):

	Workaround possible redundant 100% progress callback.

2001-02-21  Pavel Cisler <pavel@eazel.com>

	* components/help/help-method.c:

	Fix broken build - add the right includes that got dropped by
	GnomeVFS header file shuffle.

2001-02-20  John Harper  <jsh@eazel.com>

	reviewed by Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug where a renamed node in the tree view doesn't get
	resorted:

	* libnautilus-extensions/nautilus-ctree.c (set_node_info): if
	the ctree is in auto-sort mode, sort the branch containing the
	changed node


	Fixed a crash in the tree view when expanding nodes that have
	been moved across directories:

	* components/tree/nautilus-tree-node.c
	(nautilus_tree_node_remove_children): new function, unparents
	all children of the given node

	(nautilus_tree_node_destroy): emit a warning if the list of
	children is non-null (then call remove_children). Ideally the
	remove_children function should get called before the final
	unref of a directory node

	* components/tree/nautilus-tree-model.c
	(report_node_removed_internal): call
	nautilus_tree_node_remove_children before unref'ing the node


	Mostly fixed bug where expansion state hash table accumulates
	cruft over time (e.g. directories that no longer exist or got
	moved to locations where they can never be displayed):

	* components/tree/nautilus-tree-view.h
	(NautilusTreeViewDetails): added `view_node_to_uri_map' hash
	table. This is used to map view nodes to the URIs we believe
	they are displaying. This is necessary since by the time we
	find out about changes to nodes, the names of the underlying
	NautilusFile objects have often already been changed

	* components/tree/nautilus-tree-view.c
	(unlink_view_node_from_uri, link_view_node_with_uri,
	map_view_node_to_uri): functions accessing the new hash table

	(nautilus_tree_view_would_include_file): new function, returns
	true iff the given file may possibly appear in the tree view.
	Climbs through all parents of the file to do this

	(nautilus_tree_view_model_node_renamed_callback): only
	propagates the expansion state if the would_include function
	indicates that the new URI of the file would be included in the
	tree view

	* components/tree/nautilus-tree-model.c (report_node_changed):
	no need to suppress the `node_removed' signal when renaming the
	node (now that the view always deletes the expansion state of
	the correct URI)

	* libnautilus-extensions/nautilus-file.c,
	libnautilus-extensions/nautilus-file-private.h, 
	libnautilus-extensions/nautilus-file-utilities.c, 
	libnautilus-extensions/nautilus-file-utilities.h
	(nautilus_file_name_matches_hidden_pattern,
	nautilus_file_name_matches_backup_pattern): moved these
	functions from being private in nautilus-file to being public
	in nautilus-file-utilities


	Fixed tree view bug where moving nodes across directories still
	loses the expansion state: 

	* components/tree/nautilus-tree-model.c
	(nautilus_tree_model_directory_files_changed_callback):
	separated the cases of the file being deleted and it being
	moved across directories. In the move case emit the
	`being_renamed' signal so the expansion state gets propagated

	(nautilus_tree_view_remove_model_node, forget_view_node): moved
	the code to delete the expansion state from forget_view_node to
	nautilus_tree_view_remove_model_node - avoids deleting
	expansion state of nodes that will later be renamed. It may
	leave non-existent directories in the expansion state, but this
	is a lesser bug than losing the expansion state totally. Also,
	use the map_view_node_to_uri function to find the URI whose
	expansion state needs to be removed


	Fixed the bug where tree view icons often got chopped at top
	and bottom when they're drawn (if the icon height is greater
	than the font height). This means that fewer rows may fit in
	the same vertical space, but visually it's (imho) a huge
	improvement (I think this is bug 6085):

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_initialize): call gtk_clist_set_row_height
	with the maximum of the font height and the icon height

	* libnautilus-extensions/nautilus-ctree.c (draw_row): always
	calculate row_center_offset locally, and do it in such a way
	that the text really is in the center of the row!


	Fixed bug 5165 - repeatedly expanding and collapsing an empty
	directory doesn't change how the node's icon is drawn after the
	first expansion:

	* libnautilus-extensions/nautilus-ctree.c (real_tree_expand,
	real_tree_collapse): before returning, call tree_draw_node on
	the node that changed state

2001-02-20  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/Makefile.am:
	* components/services/install/nautilus-view/callbacks.c:
	* components/services/install/nautilus-view/callbacks.h:
	* components/services/install/nautilus-view/forms.c:
	* components/services/install/nautilus-view/forms.h:

	Added callbacks.[ch] and forms.[ch] to split the ridiculously huge
	install view into smaller, more managable chunks.
	
	* components/services/install/nautilus-view/main.c: (quit_timer),
	(service_install_object_destroyed):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (deps_destroy_foreach),
	(nautilus_service_install_view_destroy),
	(nautilus_service_install_view_finalize),
	(nautilus_service_install_view_initialize_class),
	(nautilus_service_install_view_initialize),
	(nautilus_service_install_view_update_from_uri_finish),
	(service_install_stop_loading_callback):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:

	Turn the preflight dialog into a question asked inline.  Do some
	wacky hoop-jumping so that we do the right thing if the user
	leaves our view while we're waiting for a button press.  Turn off
	some of the distractions (progress bar, etc) while waiting for
	info and feedback.

2001-02-20  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-tabs.c: (draw_tab_label):
	fixed bug 6804, resizing sidebar crashes summary view.  Fixed by
	adding a check to not draw the label when it's position is past
	the right edge of the pixbuf.
		
2001-02-20  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed in part by: Robey Pointer  <robey@eazel.com>

	This patch fixes bug 6458, 5722, 6602, 6788 and 5826.
	Removed soft_depends from PacakgeData.

	This has some major changes in the logic, and (taaadaa) is fairly
	untestet because of the sorry state of the testservers these
	days. This will most likely no longer work with
	services.eazel.com, but only with the newest server code.
	
	* components/rpmview/nautilus-rpm-view-install.c:
	(get_detailed_errors_foreach), (get_detailed_errors):
	Fixed to parse PackageBreaks objects.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(dump_tree_helper), (prune_failed_packages_helper),
	(eazel_install_check_existing_packages), (get_softcat_info),
	(is_satisfied), (is_satisfied_from_package_list),
	(is_satisfied_features), (check_dependencies_foreach),
	(check_dependencies), (check_tree_helper),
	(check_no_two_packages_has_same_file),
	(check_conflicts_against_already_installed_packages),
	(check_feature_consistency), (do_file_conflict_check),
	(do_dep_check_internal), (download_packages),
	(get_packages_with_mod_flag), (eazel_uninstall_upward_traverse),
	(eazel_uninstall_check_for_install), (eazel_uninstall_globber),
	(install_packages), (uninstall_packages):
	Ouput status in the tree dump.
	Improved the way I fail ALREADY_INSTALLED packages.
	Check the new package system error field in check_existing.
	Get_info don't check for fillflag to decide if softcat success was
	ok, since suites don't get the fillflag.
	Don't try and dedupe suite objects.
	Mark packages already installed with same version as CANCELLED.
	If a ALREADYINSTALLED package is cancelled due to install options
	(upgrade/downgrade), set a data field called "cancelled" to
	represent.
	Added a (currently not fully functional) check to see if a
	dependency is solved by the current work set (bug 6809).
	is_satisfied now uses is_satisfied_from_packages before checking
	if dependency is installed.
	Modified check_dependencies_foreach to pass around the package
	list.
	No longer do dependency check on cancelled packages (bug 6485).
	Don't package depcheck packages with suite_id, treat it's contents
	at comming toplevel packages.
	Output crack sentence when trying to revice PackageFeatureMissing
	breaks (file bug 6811)
	Don't file uniqueness or file conflict check suites.
	Fixed a bug in the feature_consistency, required a new query enum
	in eazelpackagesystem query call.
	Spewed out some comments.
	Always add children of a suite to K.
	Check download status (bug 5722)
	Commented out expand_package_suites.
	get_packages_with_mod_flag can now parse down into ->depends.
	Nicyfied debug output.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_xfer_callback), (gnome_vfs_fetch_remote_file),
	(eazel_install_fetch_package):
	No longer use rpmvercmp.
	Define flag to make all downloads fail (to test failed downloads).
	Note when VFS is lying about bytes_copied.
	Removed some ancient code.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (eazel_install_packagedata_to_xml_int):
	Removed soft_depends.
	
	* components/services/install/lib/eazel-package-system-rpm3-private
	.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_db_locked),
	(eazel_package_system_rpm3_dbs_locked),
	(eazel_package_system_rpm3_open_dbs),
	(eazel_package_system_rpm3_packagedata_fill_from_header),
	(eazel_package_system_rpm3_query_foreach),
	(eazel_package_system_rpm3_query_requires_feature),
	(eazel_package_system_rpm3_query),
	(eazel_package_system_rpm3_verify):
	Did the db lock check voodoo.
	Added REQUIRES_FEATURE query enum.
	Loads features from a given file (bug 5826)
	
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_finalize), (packagedata_initialize),
	(packagedata_copy), (packagedata_fill_in_missing),
	(packagedata_remove_soft_dep), (packagedata_add_pack_to_depends),
	(eazel_install_package_name_compare), (packagedata_dump_int):
	Good bye soft_depends.
	
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_load_implementation),
	(eazel_package_system_load_package), (eazel_package_system_query),
	(eazel_package_system_fail_all_packages),
	(eazel_package_system_install), (eazel_package_system_uninstall),
	(eazel_package_system_verify), (eazel_package_system_initialize),
	(eazel_package_system_new_with_id):
	Fixed 6788.
	Added REQUIRES_FEATURE query enum.

	* components/services/install/lib/eazel-package-system.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_get_info):
	Fixed some suite_id majick.

2001-02-20  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6029, No option to mount zip drive in desktop menu.
	Fixed bug 6751, Nautilus does not detect all of my removable disks.
	Fixed bug 6194, SCSI CD-ROM drives are not displayed on desktop.
	Fixed bug 6396, cd-rom not detected
	
	Special thanks to liblit@acm.org for persisting and looking at the
	code. The check permissions code is an artifact from when we were
	considering having a mount daemon.  I don't think it is needed at all
	because the volume monitor is not running as root.  I wil mark
	the bugs fixed and wait for status but I think this will work.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(mount_volume_ext2_add), (mount_volume_udf_add),
	(mount_volume_vfat_add), (mount_volume_msdos_add):
	Remove old check_permissions code.

2001-02-20  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6785 ("Trash" should be capitalized)

	I grepped Nautilus sources for "the trash" and replaced
	it with "the Trash". Let me know if you can think of
	any references to the Trash that don't start with "the".

	* libnautilus-extensions/nautilus-file-operations.c:
	(build_error_string), (confirm_empty_trash):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_confirm_deletion), (confirm_delete_from_trash),
	(report_broken_symbolic_link):
	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	* src/file-manager/nautilus-directory-view-ui.xml:

2001-02-20  Dan Mueth  <dan@eazel.com>

	* user-guide/C/Makefile.am: Changed so only a warning is
	given if ScrollKeeper is not installed.

2001-02-20  Mike Fleming  <mfleming@eazel.com>

	reviewed by: <ian@eazel.com>

	Added "x-directory/webdav-prefer-directory" for bug 5325

	* components/mozilla/Nautilus_View_mozilla.oaf.in:
	* src/Nautilus_shell.oaf.in:

2001-02-15  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: <darin@eazel.com>

	Part of 2057: URI's with fragments behave oddly

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_format_uri_for_display), (uris_match),
	(nautilus_uris_match), (nautilus_uris_match_ignore_fragments),
	(nautilus_self_check_file_utilities):
	* libnautilus-extensions/nautilus-file-utilities.h:

	nautilus_format_uri_for_display returns "file:" URI's if the URI
	in question has a fragment, other file: URI's get translated into paths
	Also no longer calls the evil gnome_vfs_unescape_string_for_display (see
	bug 6694)

	Also fixes bug 6722: re-entering search query results in location bar
	results in error dialog

	Added nautilus_uris_match_ignore_fragments function which strips
	fragments before comparing.  Also added test cases.

	* components/tree/nautilus-tree-view.c:
	(got_activation_uri_callback):
	* src/nautilus-window-manage-views.c:
	(viewed_file_changed_callback):

	Fixed two locations that made the implicit assumption that
	nautilus_file_get_uri should return a URI that's directly comparable
	to the current navigation location.  Other cases may still lurk.

	* src/nautilus-window-menus.c:

	A few calls to gnome_vfs_get_local_path_from_uri that should have
	been gnome_vfs_get_uri_from_local_path.  Eliminating dumb behaviour
	in gnome_vfs_get_local_path_from_uri exposed them.

2001-02-20  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Fixed bug 5676 (Moving a directory with multiple nested
	directories causes improper locations to be displayed):

	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_moved_internal): Made this build a list of the
	affected files.
	(nautilus_directory_moved): Send a changed notice to each affected
	file.
	(nautilus_directory_notify_files_moved): Send a changed notice to
	each affected file, but share code to avoid sending changed
	notices twice for any directory.
	
	Fixed some callers that were assuming a
	gnome_vfs_get_local_path_from_uri would return a non-NULL
	value. This is not safe to assume just because
	gnome_vfs_uri_get_local returns true.

	* components/music/nautilus-music-view.c: (read_id_tag): Use
	gnome_vfs_get_local_path_from_uri to define what a local path is.
	The old code used a mix.
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_can_rename): Simplified code to use
	gnome_vfs_get_local_path_from_uri to define what a local path
	is. The old code used a mix.
	* libnautilus-extensions/nautilus-thumbnails.c: (make_thumbnails):
	Added NULL checks after calls to
	gnome_vfs_get_local_path_from_uri.
	* src/nautilus-sidebar.c: (uri_is_local_image): Took out redundant
	check. The definition of local image we want here is: "uses a
	standard file: URI".
	* src/file-manager/fm-directory-view.c:
	(fm_directory_link_type_in_selection): Fixed bug where it would
	only look at the first item in the selection. Simplified logic.
	(is_link_type_special): Added a new function.
	(special_link_in_selection): Instead of calling
	fm_directory_link_type_in_selection, copied it. The problem with
	the other approach is that it was reading each link file three
	time to rule out each of the three special link types.

	Other changes.

	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_get_volume_name),
	(modify_volume_name_for_display): Marked "Unknown" for
	localization.
	
	* libnautilus-extensions/nautilus-file-utilities.c:
	* libnautilus-extensions/nautilus-icon-factory.c:
	* src/file-manager/fm-icon-view.c:
	Added 2001 to the copyright since we modified these recently.

2001-02-20  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file): Middle-truncate
	really long file names to avoid an error dialog
	that is much wider than the screen.

2001-02-20  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-location-bar.c: (try_to_expand_path):
	fixed bug 6717, problem editing a uri with a '#' in the middle,
	by adding a check to the auto-complete code to not substitute
	zero length strings.
	
2001-02-20  Andy Hertzfeld  <andy@eazel.com>

	* components/text/nautilus-text-view.c: (file_close_callback),
	(done_file_read):
	fixed bug 6732, can't unmount volumes after viewing text files;
	fixed by closing the file in done_file_read.
	
2001-02-20  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* src/file-manager/nautilus-indexing-info.c:
	(show_indexing_info_dialog):
	Complete fix for 6417, by swapping Vera's text into the
	new index status dialog

2001-02-20  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6384, Nautilus program chooser uses
	"nautilus-mime-type-capplet" to launch capplet
	
	* libnautilus-extensions/nautilus-program-chooser.c:
	(launch_mime_capplet):
	Rename capplet to "file-types-capplet"

2001-02-20  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Fixed bug 5482 (If you've esc'd out of an icon stretch, change
	directories, then come back, the icon is the pre-esc'd stretched
	size)

	* libnautilus-extensions/nautilus-icon-container.c:
	(undo_stretching): Pass TRUE instead of FALSE so the "undone" size
	gets stored in metadata. Without this, we end up with the icon at
	the stretched size.

2001-02-20  Richard Boulton <richard@tartarus.org>

	reviewed by: Ali Abdin <aliabdin@aucegypt.edu>

	* components/help/converters/gnome-db2html2/*
	Fix to bug 6700; doesn't include config.h unless HAVE_CONFIG_H
	is defined, and has correct instructions for compiling standalone.

2001-02-20  Kjartan Maraas  <kmaraas@gnome.org>

	* components/services/summary/nautilus-summary-view.c: Fix some
	typos in strings.
	
2001-02-20  Maciej Stachowiak  <mjs@eazel.com>

	Assorted build twiddling.
	
	* components/services/install/command-line/Makefile.am: Remove
	-I/usr/include/rpm

	* components/services/install/nautilus-view/Makefile.am: Likewise.
	
	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	Remove gratuitous include of rpm header.

	* components/services/inventory/Makefile.am: Formatting tweaks.
	
	* components/services/summary/*: flatten this whole directory:
	summary/lib => summary
	summary/nautilus-view => summary
	summary/nautilus-view/test => summary
	summary/nautilus-view/icons/gray_tab_pieces =>summary/nautilus-view/icons
	
	* configure.in: Adjust for flattening of
	components/services/summary
	
	* libnautilus-extensions/nautilus-clickable-image.c
	(adjust_coordinates_for_window): Formatting tweak.

	* user-guide/gnugpl/.cvsignore: Silence cvs.

2001-02-20  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/server/Makefile.am: Remove
	-I/usr/include/rpm

2001-02-19  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (install_message_new), (generate_install_form),
	(nautilus_service_install_preflight_check),
	(nautilus_service_install_done):

	Hide the install view's progress header until downloading begins.
	Try to use nautilus_view_go_back, though it appears to not be
	functional yet.
	
2001-02-20  Rebecca Schulman  <rebecka@eazel.com>
	Complete bug 6416, to add dialogs to explain
	that searches will be slow when medusa is disabled or 
	blocked.  The work was previously complete, but 
	I've swapped in Vera's text, and added an 
	info_dialog_with_details to the stock dialogs.

	reviewed by: Gene Ragan <gzr@eazel.com>

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(details_dialog_clicked_callback),
	(nautilus_show_info_dialog_with_details),
	(nautilus_show_error_dialog_with_details):
	* libnautilus-extensions/nautilus-stock-dialogs.h:
	* src/file-manager/fm-search-list-view.c:
	(display_system_services_are_blocked_dialog),
	(display_system_services_are_disabled_dialog):

2001-02-20  Rebecca Schulman  <rebecka@eazel.com>
	Fix bugzilla.eazel.com 6414 to add prefence to nautilus
	to enable/disable medusa

	* libnautilus-extensions/nautilus-global-preferences.h:	
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_install_defaults),
	(global_preferences_install_visibility),
	(global_preferences_create_dialog):
	Add the fast search preference pane, visibility level,
	change SEARCH_METHOD -> BACKUP_SEARCH

	* libnautilus-extensions/nautilus-system-preferences.c:	
	* libnautilus-extensions/nautilus-system-preferences.h:
	* libnautilus-extensions/Makefile.am:
	(nautilus_is_system_preference),
	(nautilus_system_preference_get_boolean),
	(nautilus_system_preference_set_boolean):
	Add setters and getters for system preferences that are not
	managed by gconf.  The current set and get functions
	turn on and off medusa services

	* libnautilus-extensions/nautilus-preferences.c:
	(nautilus_preferences_set_boolean),
	(nautilus_preferences_get_boolean):
	Use the new system preference setters and getters instead of the standard
	ones if the preference is not managed by gconf
	
	* src/file-manager/fm-search-list-view.c: (load_location_callback),
	(display_system_services_are_blocked_dialog):
	* src/nautilus-complex-search-bar.c:
	(nautilus_complex_search_bar_get_location):
	change SEARCH_METHOD -> BACKUP_SEARCH

2001-02-19  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: John Harper  <jsh@eazel.com> 

	Fixed bugs 3743 (Summary view gives the same vague error message
	for many different causes), 3972 (If user can't connect to
	service, they end up with gray content view), 5973 (blank summary
	view after install view finishes) and 6166 (Summary Login dialog
	does not have initial focus) and 6018 (Nautilus returns to wrong
	directory if services are unavailable). Also did much code
	cleanup, and made the service and featured download icons in the
	summary view prelighting and clickable. Fixed many other nits as
	well.

	* components/services/nautilus-dependent-shared/eazel-services-extensions.h,
	components/services/nautilus-dependent-shared/eazel-services-extensions.c
	(eazel_services_clickable_image_new_from_uri): Convenience wrapper
	to make a new clickable image from a URI.
	* components/services/nautilus-dependent-shared/eazel-services-footer.c
	(eazel_services_footer_update): Clear the footer before updating,
	instead of just dumping the new items in along with the old ones.

	* components/services/trilobite/libtrilobite/trilobite-core-network.h,
	components/services/trilobite/libtrilobite/trilobite-core-network.c:
	Adjusted formatting, fixed headers.

	* components/services/trilobite/libtrilobite/trilobite-file-utilities.h,
	components/services/trilobite/libtrilobite/trilobite-file-utilities.c:
	Cut 'n' pasted some useful code from libnautilus-extensions to
	avoid depending on it, whee.
	* components/services/trilobite/libtrilobite/Makefile.am: Added
	above to the build.

	* components/services/trilobite/libtrilobite/trilobite-redirect.h,
	components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(trilobite_redirect_fetch_table_async,
	trilobite_redirect_fetch_table_cancel): Asynchronous version of
	redirect fetching code.
	(redirect_fetch_callback): Helper function.
	(trilobite_redirect_parse_xml): Null terminate buffer properly or
	XML parsing code will get confused.
	(trilobite_redirect_fetch_table): Removed the old synchronous code
	since now no one is using it.

	* components/services/summary/lib/eazel-summary-shared.h,
	components/services/summary/lib/eazel-summary-shared.c:
	(eazel_summary_fetch_data_cancel, eazel_summary_fetch_data_async):
	Asynchronous version of summary fetching code.
	(summary_data_fetch_callback): Helper function.
	(eazel_summary_data_parse_xml): Same null termination trick as for
	redirects.
	(parse_summary_xml_file): Removed old synchronous code since now
	no one is unsing it.

	* components/services/summary/nautilus-view/main.c (main): Set
	user agent to trilobite user agent; intialize gnome-vfs.
	
	* components/services/summary/nautilus-view/nautilus-summary-dialogs.h,
	components/services/summary/nautilus-view/nautilus-summary-dialogs.c 
	(nautilus_summary_show_login_failure_dialog): Renamed from
	`nautilus_summary_login_failure_dialog'
	(nautilus_summary_show_error_dialog): Renamed from
	`generate_error_dialog'.
	(nautilus_summary_show_login_dialog): Renamed from
	`generate_login_dialog'.
	(error_dialog_cancel_cb): Go back instead of (incorrectly) trying
	to go back to the user's homedir.
	(set_dialog_parent): Do the magic coordinate adjustment like
	gnome_dialog_set_parent, but do not set it transient, or it will
	not get focus in click to focus mode.

	* components/services/summary/nautilus-view/nautilus-summary-callbacks.c:
	(authn_cb_failed): Adjust to above renaming.
	* components/services/summary/nautilus-view/nautilus-summary-footer.c 
	(footer_item_clicked_callback): Ditto.
	* components/services/summary/nautilus-view/nautilus-summary-menu-items.c: 
	(bonobo_login_callback): Ditto.

	* components/services/summary/nautilus-view/nautilus-summary-view-private.h:
	Removed unused fields. Added async handles for redirect and summary XML 
	fetch.

	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	(services_button_callback_data_free, summary_view_button_callback,
	goto_uri_on_clicked, summary_view_button_new,
	summary_view_link_image_new): Cleaned up summary view button code,
	added code for the clickable icons and refactored a bit.
	(create_header): Start out saying "Connecting to Eazel
	Services..." instead of blank, and don't call `update_header' from
	here.
	(update_footer): fix incorrect polarity of offline and online.
	(create_footer): remove call to update_footer; leave offline items
	in place until connected.
	(create_news_pane, create_services_list_pane,
	create_featured_downloads_pane): Do not call corresponding update
	func, updating is now separate from creating.
	(generate_service_entry_row, generate_update_news_entry_row): Make
	icons clickable.
	(update_summary_form): New function to update the existing summary
	view with new data, to avoid recreating even the fixed widgets
	from scratch all the time.
	(create_summary_form): Do not destroy all widgets at the
	beginning. Remove some useless widgetry.
	(nautilus_summary_view_initialize): Create the widgetry but do not
	fill it with data.
	(nautilus_summary_view_destroy, summary_fetch_callback,
	redirect_fetch_callback, cancel_load_in_progress),
	nautilus_summary_view_load_uri, summary_load_location_callback):
	Change things around so loading of the summary data is
	asynchronous.
	(summary_stop_loading_callback): Handle "stop_loading".

2001-02-19  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Added auto-prelighting feature to NautilusClickableImage, and
	fixed a major bug that occurs for clickable images in scrolled
	areas.
	
	* libnautilus-extensions/nautilus-clickable-image.h,
	libnautilus-extensions/nautilus-clickable-image.c: 
	(nautilus_clickable_image_set_prelight): New public API call that
	allows for automatic prelight handling direct in
	NautilusClickableImage; made it settable because some users of
	this code want to manually prelight with an alternate image.
	(nautilus_clickable_image_set_up_pixbufs): helper function for the
	above that keeps track of the normal and prelit buffers.
	(label_enter, label_leave): When in prelight mode, switch images
	on enter and leave. Also, remove unnecessary queue_draw calls.

	(adjust_coordinates_for_window, ancestor_enter_notify_event,
	ancestor_leave_notify_event, ancestor_motion_notify_event): Do
	some coordinate adjustments so that if the NautilusClickableImage
	is in a scrolled area with NO_WINDOW widgets all the way in
	between, we do an appropriate coordinate adjustment. This should
	also handle other containers that put their children in a
	different window than their own. This was breaking for the summary
	view when I set it to use clickable images for the service icons.
	
	* libnautilus/nautilus-view-standard-main.c
	(nautilus_view_standard_main_multi): Do a g_thread_init to make
	views that use gnome-vfs happy.

2001-02-18  Ian McKellar  <ian@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	* libnautilus-extensions/nautilus-mime-actions.h:
	* src/nautilus-window.c: (load_view_as_menu_callback):
	Removed all the code related to Gnome-VFS sub-methods in Nautilus.
	(Bug 5086)

2001-02-18  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	Fixed bug 6681 ; make eazel-install output more machine parseable
	by adding option and always return !0 on any failure.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_file_conflict_check_signal),
	(eazel_file_uniqueness_check_signal),
	(eazel_feature_consistency_check_signal),
	(eazel_download_progress_signal), (eazel_install_progress_signal),
	(download_failed), (something_failed),
	(eazel_preflight_check_signal), (dep_check), (md5_check_failed),

2001-02-19  Simos Xenitellis  <simos@hellug.gr>

	* configure.in: Added el to ALL_LINGUAS.

2001-02-18  Michael K. Fleming  <mfleming@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(try_transform_nautilus_uri_to_file_scheme),
	(view_load_location_callback),
	(should_uri_navigate_bypass_nautilus):

	Bug 4302: links in HTML help don't work.

	Now they do.  Since the "gnome-help:" scheme stuff doesn't know
	how to deal with files below the root and its to convoluted to fix,
	the Mozilla component discovers if a gnome-help scheme isgoing to be
	transformed into a file scheme and then redirects nautilus to that
	URI.  This means the full path to the HTML file appears in the location
	bar, just like in the old gnome help browser

2001-02-18  Darin Adler  <darin@eazel.com>

	* components/mozilla/nautilus-mozilla-embed-extensions.cpp:
	Get rid of initialization of nsString object to NULL
	to fix Tinderbox.

2001-02-17  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: <ramiro@eazel.com>

	Misc Mozilla changes.

	Bug 6542 -- Throbber keeps spinning
	Pages without network activity would never report_load_complete.  Switched
	to using net_start and net_stop to control throbber like galeon (didn't
	I do this before?).  Note that bug 6736 means the throbber might
	cut out early.  Oh well, the stop button isn't really hooked up anyway.

	Bug 6544 -- Crash while navigating help

	Caused by make_full_uri_from_relative going beyond a buffer.  Also added
	test case.

	Also fixed up logic in mozilla_dom_mouse_click_callback related to
	translating URI's that we know how to handle ourself but can't
	be handled by mozilla directly without intervention (eg, eazel-services,
	help URI's)

	Also removed mistaken cancel_pending_vfs_operation in update_nautilus_uri

	Also did some cleanup/rearranging of the async nautilus_view wrappers

	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(mozilla_location_callback), (mozilla_net_start_callback),
	(mozilla_net_stop_callback), (mozilla_dom_mouse_click_callback),
	(vfs_open_callback), (update_nautilus_uri),
	(make_full_uri_from_relative), (test_make_full_uri_from_relative),
	(dispatch_report_location_change):

	* src/nautilus-sidebar.c: (add_command_buttons):
	Fixed improper assumption that nautilus_file_is_local being TRUE
	means gnome_vfs_get_local_path will return a file path.  The "local"
	concept seems to apply to expected latancy, not URI schemes.  This
	was causing assertion failures when browsing to help: schemes (as
	noted in the comments to bug 6544)
	

2001-02-17  Richard Boulton <richard@tartarus.org>

	reviewed by: Ali Abdin <aliabdin@aucegypt.edu>

	* components/help/converters/gnome-db2html2/gdb3html.c
	* components/help/converters/gnome-db2html2/sect-elements.c
	* components/help/converters/gnome-db2html2/toc-elements.c
	Fix format string vulnerabilities, see bug 6702.  Fixes
	segfault when % character occurs in input files.

2001-02-17  Dan Mueth  <dan@eazel.com>

	reviewed by: Eskil

	Updated toplevel docs data file. Updated and added FDL/GPL
	licenses. Added OMF file for Nautilus User Guide.

	* Makefile.am:  Adding omf-install/
	* components/help/topleveldocs.xml: Updated toplevel docs
	* configure.in: Adding omf-install and user-guide/gnugpl
	* omf-install/Makefile.am: Added for OMF files
	* user-guide/C/Makefile.am: Updated for OMF file
	* user-guide/C/nautilus-C.omf: Added this OMF file
	* user-guide/Makefile.am: Added gnufdl/
	* user-guide/gnufdl/gnufdl.sgml: Updated
	* user-guide/gnugpl/Makefile.am: Added this file
	* user-guide/gnugpl/gnugpl.sgml: Added this file, GPL

2001-02-17  Kjartan Maraas  <kmaraas@gnome.org>

	* src/file-manager/fm-search-list-view.c: Fix typo.
	
2001-02-16  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 6689, Segmentation fault from volume_in_black_list after
	the death of the desktop.

	* src/file-manager/fm-desktop-icon-view.c: (volume_in_black_list):
	Add an assert to catch a NULL icon view being passed in.  We need to
	find out why this happens if it ever does.
	
	* src/nautilus-application.c: (window_can_be_closed),
	(is_last_closable_window), (volume_unmounted_callback):	
	Handle single window case in the code where we close the windows
	the are displaying the contents of the unmounted volume.  In the case
	of a single window, direct it back to the default home directory.

2001-02-16  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar-tabs.c: (draw_one_tab_themed),
	(draw_or_layout_all_tabs):
	fixed bug where the left edge of a sidebar tab wasn't
	prelighting correctly when the one before it was active.
	
2001-02-16  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Fix bug 4070 (Repeated clicks of BACK cause core dump):
	
	* src/nautilus-window-manage-views.c:
	(viewed_file_changed_callback): Use end_location_change instead,
	since cancel_location_change just does extra "go back to old view"
	that we don't need.
	(cancel_location_change): A little more sanity checking. Not sure
	if it really helps. The other changes should fix the bug.
	(begin_location_change): Use end_location_change to get rid of any
	previous change in progress since cancel_location_change just does
	extra "go back to old view" that we don't need.
	(report_location_change_callback): Use end_location_change to get
	rid of any previous change in progress since
	cancel_location_change just does extra "go back to old view" that
	we don't need.

	* src/file-manager/fm-list-view.c: (get_list_if_exists),
	(fm_list_view_clear): Don't create a list just to clear it.
	Crashed here while I was trying to work on the other bug.
	
2001-02-16  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 6724 (implement Vera's new text &
	organization for Preferences)

	There are a few open issues still, but they can be
	handled one at a time.

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_create_dialog),
	(global_preferences_install_sidebar_panel_descriptions):
	Tweak text, rework some comments, reorganize.

	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list): Reinstated a one-line fix
	that was accidentally merged away earlier.

2001-02-16  Robey Pointer  <robey@eazel.com>

	* nautilus.spec.in:

	Don't reference the three files that used to be in top/.

2001-02-16  Andy Hertzfeld  <andy@eazel.com>

	* components/image-viewer/nautilus-image-view.c:
	(zoomable_zoom_to_fit_callback), (rezoom_control),
	(control_size_allocate_callback), (image_fits_in_container),
	(scrolled_window_size_allocate_callback),
	(scrollable_control_factory):
	fixed a bunch of problems in the image view, including making
	the initial shrink-to-fit feature work again, made unneccessary
	scroll bars go away by using GTK_POLICY_AUTOMATIC, improved the
	scaling to Arlo's taste by using GDK_INTERP_BILINEAR, and tweaked
	the scale factors, plus other clean-ups.
	
	* src/nautilus-zoom-control.c: (create_zoom_menu_item):
	fixed bug 6288, bogus zoom levels displayed in zoom control, by making
	the rounding algorithm used in the menu consistent with the one
	used in the control.
	
2001-02-16  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 6477 (no way for intall view to send user "back where
	they came from") by adding a "go back" command for views.
	
	* libnautilus/nautilus-view-component.idl: Add "go back".
	* libnautilus/nautilus-view.h:
	* libnautilus/nautilus-view.c: (nautilus_view_go_back): Add "go
	back".
	* src/nautilus-view-frame-private.h:
	* src/nautilus-view-frame-corba.c: (go_back),
	(impl_Nautilus_ViewFrame_go_back): Add "go back".
	* src/nautilus-view-frame.h:
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_initialize_class),
	(nautilus_view_frame_go_back): Add "go back".
	* src/nautilus-window-manage-views.c: (go_back_callback): Add code
	to either go back or go home.
	
	* src/nautilus-window-toolbars.c:
	(back_or_forward_button_pressed_callback): Formatting tweak.

2001-02-16  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Mike Engber <engber@eazel.com>

	* libnautilus-extensions/nautilus-wrap-table.c:
	(wrap_table_get_content_dimensions):
	Fix bug 6683.  Bottom row is cut off in backgrounds/emblems dialog.
	
2001-02-16  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(check_no_two_packages_has_same_file):
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(osd_parse_file_list):
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_initialize),
	(remove_directories_from_provides_list), (eazel_softcat_get_info):

	Nobody wants to review my patch because everyone hates me.  This
	fixes the weird file/directory checks we were doing by using the
	new softcat fields to determine which ones are directories.  No
	more guesswork.  Also there's a softcat bug which causes the file
	list to sometimes contain repeated filenames, so this patch does a
	workaround for that too.

	* components/services/trilobite/doc/gconf.txt:

	Fix my dumb typo: jump-url is not a bool.
	
2001-02-16  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6606, only show user-mountable volumes in Disks menu
		
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(has_removable_mntent_options):
	Utility function to check the mntent structure for options
	that we have determined will do the best job of guessing that
	a volume is removable.
	
	(get_removable_volumes),
	(volume_is_removable), (get_current_mount_list),
	(mount_volume_add_filesystem), (open_cdda_device):
	Did some code cleanup.

2001-02-16  Darin Adler  <darin@eazel.com>

	Fix bug 6435 (report_location_change does not record in history).
	
	* src/nautilus-window-manage-views.c:
	(report_location_change_callback): Use change type of STANDARD
	instead of RELOAD.
	
2001-02-16  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-embed-extensions.cpp:
	Restore the original cast and lose the const.  Remove an unused
	variable.
	
2001-02-16  Andy Hertzfeld  <andy@eazel.com>

	removed the translation text services from the build, since
	they are not ready for commercial release.  Also, made the
	google and webster services localizable.  This also fixes
	bug 6704, translation doesn't work with large files.

	* components/text/nautilus-text-view.c: (add_one_service):
	made it use the localization framework for the menu label and
	tooltip
	
	* components/text/services/Makefile.am:
	* components/text/services/english_to_french.xml:
	* components/text/services/french_to_english.xml:
	removed the translation services
	
	* components/text/services/google.xml:
	* components/text/services/webster.xml:
	made the selection-based services localizable
	
	* po/POTFILES.in:
	added the selection-based services
	
2001-02-16  Robey Pointer  <robey@eazel.com>

	* components/mozilla/nautilus-mozilla-embed-extensions.cpp:

	Fix build bustage by breaking cast into two pieces (weird C++ism).

2001-02-16  Josh Barrow  <josh@eazel.com>

	* docs/smoketests.html:
	Made a few corrections

2001-02-16  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Finish fixing bug 6286 (need to re-apply optimization where we do
	a single directory load):

	* src/nautilus-window-manage-views.c: (begin_location_change): Do
	the force_reload work in here. We want it on all 4 kinds of
	location change (forward, back, new location, reload). Other
	browsers don't do reload on back, so we may want to change this at
	some point.
	(nautilus_window_reload): Remove the old code to invalidate from
	here now that it's done in begin_location_change.

	* src/file-manager/fm-directory-view.c: (load_location_callback),
	(load_directory), (finish_loading), (filtering_changed_callback):
	Remove the old code to do force_reload. The NautilusDirectory part
	of triggering a reload is now handled by the shell.

	* libnautilus-extensions/nautilus-directory.h:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_file_monitor_add): No force_reload parameter
	any more.
	(nautilus_directory_force_reload): New separate call used to force
	a reload. A method call so subclasses can implement.
	(nautilus_self_check_directory): Removed the FALSE force_reload
	argument to file_monitor_add.
	* libnautilus-extensions/nautilus-vfs-directory.c:
	(vfs_file_monitor_add): No force_reload parameter any more.
	(vfs_force_reload): Call through to
	nautilus_directory_force_reload_internal to do the real work.
	(nautilus_vfs_directory_initialize_class): Install the new
	force_reload function.
	* libnautilus-extensions/nautilus-merged-directory.c:
	(merged_file_monitor_add): No force_reload parameter any more.
	(merged_force_reload): Tell all of the real directories to force a
	reload.
	(monitor_add_directory): No force_reload to track any more.
	(nautilus_merged_directory_initialize_class): Install the new
	force_reload function.
	
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory-async.c:
	(nautilus_directory_force_reload_internal): Change the name of
	this function, since there's now a public function that is named
	nautilus_directory_force_reload.
	
	* libnautilus-extensions/nautilus-file-private.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_all_attributes): Made a separate call so other
	parts of the framework can use it.
	(nautilus_file_invalidate_all_attributes): Use the new call.
	
	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_monitor_add),
	(nautilus_tree_model_node_begin_monitoring_no_connect): Use the
	new force_reload call. The old one had more granularity and thus
	forced less to be reloaded, but it's OK to do a little more here.
	
	* libnautilus-extensions/nautilus-trash-monitor.c:
	(nautilus_trash_monitor_initialize): Removed the FALSE
	force_reload argument to file_monitor_add.

	Other stuff:
	
	* libnautilus-extensions/nautilus-directory-metafile.c:
	(get_metafile), (nautilus_directory_get_file_metadata),
	(nautilus_directory_get_file_metadata_list),
	(nautilus_directory_set_file_metadata),
	(nautilus_directory_set_file_metadata_list),
	(nautilus_directory_copy_file_metadata),
	(nautilus_directory_remove_file_metadata),
	(nautilus_directory_rename_file_metadata): Moved FIXMEs around.
	Pass NULL instead of &ev when calling bonobo_object_release_unref
	since we don't really want to do anything different if there's
	some kind of error.
	
	* nautilus-installer/install-lib/.cvsignore:
	* nautilus-installer/libtrilobite/.cvsignore:
	Gotta create these files when you make new directories.

	* README: Change xml-i18n-tools to mention the correct branch.

2001-02-16  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/Makefile.am:
	* components/mozilla/bonobo-extensions.c:
	* components/mozilla/bonobo-extensions.h:
	New files.  Cut and paste from nautilus-extensions to workaround
	licensing issues.
	
	* components/mozilla/main.c: (mozilla_object_destroyed):
	Mike Fleming added a nice feature that caches the mozilla process
	by delaying exit.  This makes jumping from web page to web page
	much faster.  However, it makes it harder to debug the mozilla
	component because it sticks around for a while and killing it by
	hand doesnt allow for clean shutdown.  So I added an debug
	environment variable that can be set to turn the delayed exit off.
	
	* components/mozilla/mozilla-events.cpp: Include the mozembed
	private header.  Im not quite sure why we were declaring the
	prototype found thre ourselves.
	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(charset_encoding_changed_callback),
	(encoding_menu_data_free_cover),
	(mozilla_view_create_charset_encoding_submenu),
	(mozilla_view_merge_menus), (bonobo_control_activate_callback),
	(mozilla_title_changed_callback), (mozilla_location_callback),
	(mozilla_net_state_callback), (mozilla_net_stop_callback),
	(mozilla_link_message_callback), (mozilla_progress_callback),
	(mozilla_dom_mouse_click_callback), (vfs_open_callback),
	(vfs_read_callback), (cancel_pending_vfs_operation),
	(navigate_mozilla_to_nautilus_uri):
	Add a charset encoding menu.  Also, changed the type of the
	mozilla member to be GtkMozEmbed instead of GtkWidget to reduce
	the amount of casting we did.

	* components/mozilla/nautilus-mozilla-embed-extensions.cpp:
	* components/mozilla/nautilus-mozilla-embed-extensions.h:
	New files.  Start of mozilla embed extensions.  Right now only
	charset encoding stuff.  Inspired somewhat by Galeon.
	* components/mozilla/nautilus-mozilla-ui.xml:
	Update for charset encoding menu support.

2001-02-16  Josh Barrow  <josh@eazel.com>

	* README:
	Added some text to explain the freetype fiasco.

2001-02-16  Ramiro Estrugo  <ramiro@eazel.com>

	* README: Clarify the fact that Mozilla M18 no longer works.
	* components/mozilla/mozilla-components.cpp: Remove obsolete
	Mozilla M18 support.  M18 no longer works.

2001-02-16  Ramiro Estrugo  <ramiro@eazel.com>

	* README: Update Mozilla requirements.
	* configure.in: Update the Mozilla milestone names to match the
	current Mozilla naming scheme.  Add a flag indicating whether the
	version of Mozilla we use has profiles support.
	* components/mozilla/Makefile.am:
	* components/mozilla/nautilus-mozilla-content-view.c:
	(pre_widget_initialize): 
	Add better profile support ifdef hackery.

2001-02-15  Robey Pointer  <robey@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_fill_from_packagedata),
	(corba_packagedatastruct_fill_deps),
	(packagedata_tree_from_corba_packagedatastructlist):

	Re-add 'provides' to the IDL so the install view can poke around
	for .desktop files.

	* nautilus-installer/src/installer.c:
	(get_detailed_errors_foreach), (get_detailed_errors):

	Speed up error checking by avoiding pieces of the graph we've
	already visited.

2001-02-15  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(check_dependencies_foreach),
	(check_no_two_packages_has_same_file),
	(check_conflicts_against_already_installed_packages):

	Remove errant unref during dupe-file check.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_parse_uri),
	(nautilus_service_install_done), (nautilus_service_install_failed),
	(nautilus_service_need_password),
	(nautilus_service_install_view_update_from_uri_finish),
	(nautilus_service_install_view_load_uri):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:

	Set password prompt to something semi-reasonable.  Fix up a few
	wrong behaviors in the case of having multiple toplevel packages.
	This still isn't working very well.
	
2001-02-15  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 5599, make objects in $USER/Nautilus localizable.  Fixed
	by creating a linkset to instead the Computer and Services icons,
	and removing the top directory and associated code, since it's no
	longer needed.
	
	* configure.in:
	removed data/top
	* data/Makefile.am:
	removed top directory
	* data/linksets/Makefile.am:
	* data/linksets/home.xml:
	added new home linkset
	
	* data/top/.cvsignore:
	* data/top/.nautilus-metafile.xml:
	* data/top/Computer:
	* data/top/Makefile.am:
	* data/top/Services:
	removed files from top
	
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_user_main_directory):
	changed it to no longer copy the top directory; instead,
	install the new linkset
	
	* po/POTFILES.in:
	added home.xml to the files to be localized
	
2001-02-15  Eric Fischer  <eric@eazel.com>

	* nautilus.spec.in:
	Building the installer into RPMs doesn't work, because I got
	something in the Makefiles wrong.  Revert the changes to the
	spec file so tinderbox comes back to life.  Will try again
	once I think I have it right.

2001-02-15  Robey Pointer  <robey@eazel.com>

	reviewed by: Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus-installer/src/installer.c:

	For now, make the bootstrap installer always run in debug mode
	and point to checkpoint:8888.

2001-02-15  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-root-helper.
	c: (discard_line), (eazel_helper_start):

	Add debug info to the roothelper so that we can debug failures
	better.

2001-02-15  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(dump_tree_helper), (dump_tree):

	Made dump_tree dump less redundant info (tries not to repeat
	sections of the graph it's already visited).
	
	* nautilus-installer/install-lib/Makefile.am:
	* nautilus-installer/libtrilobite/Makefile.am:

	Set LOG_DOMAIN to G_LOG_DOMAIN so our log catcher will actually
	work. :)

	* nautilus-installer/src/Makefile.am:

	Remove redundant object file.

	* nautilus-installer/src/create-eazel-installer.sh:

	By default, strip the installer binary before gzexe'ing it (this
	makes it much much smaller).  Eventually we'll want to add some
	sort of command-line option for deciding which kind to build.

	* nautilus-installer/src/installer.c: (conflict_check),
	(eazel_installer_initialize):

	Remember to nudge GTK+ after updating labels so they'll actually
	refresh.

	* nautilus-installer/src/link.sh:
	* nautilus-installer/src/main.c: (main):
	* nautilus-installer/src/prescript:

	Fix the prescript to work around a sad popt bug.

2001-02-15  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Mike Engber <engber@eazel.com>

	Fixed bug 6670, Segmentation fault when trying to access mounted
	removable volume with no media.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(create_unique_volume_name):
	Use the accessor function to access the volume name instead
	of accessing the structure directly.  The accessor protects
	us against NULL data.

2001-02-15  Eric Fischer  <eric@eazel.com>

	* nautilus.spec.in:
	Start building the eazel installer, and put it into its own RPM.
	(This should eventually be separate from building nautilus)

	* nautilus-installer/libtrilobite/Makefile.am:
	Add a dependency to create the .h files, since gmake complains
	otherwise.

2001-02-15  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 6589, nautilus crashes if a moderate sized text block
	is used for dictionary lookup.  Fixed by imposing sanity limits
	on both the selection size passed to services and the sidebar
	title.
	
	* components/text/nautilus-text-view.c: (handle_service_menu_item):
	truncate the selection if it's greater than a reasonable size.
	
	* src/nautilus-sidebar-title.c:
	(nautilus_sidebar_title_initialize),
	(nautilus_sidebar_title_set_text):
	truncate the sidebar title if it's longer than a reasonable limit.
	
2001-02-15  Michael Engber  <engber@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	* src/file-manager/fm-icon-view.c: (fm_icon_view_bump_zoom_level):
	Change fm_icon_view_bump_zoom_level to ignore bumps to out
	of bounds values - bug 6347.

2001-02-15  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(get_metafile), (nautilus_directory_get_file_metadata),
	(nautilus_directory_get_file_metadata_list),
	(nautilus_directory_set_file_metadata),
	(nautilus_directory_set_file_metadata_list),
	(nautilus_directory_copy_file_metadata),
	(nautilus_directory_remove_file_metadata),
	(nautilus_directory_rename_file_metadata):
	Added FIXMEs.

2001-02-15  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-image-table.h:
	* libnautilus-extensions/nautilus-image-table.c:
	(nautilus_image_table_add_empty_image): New function to add an
	empty space into the table.

	* libnautilus-extensions/nautilus-wrap-table.h:
	* libnautilus-extensions/nautilus-wrap-table.c:
	(nautilus_wrap_table_destroy), (nautilus_wrap_table_expose_event),
	(nautilus_wrap_table_map), (nautilus_wrap_table_unmap),
	(nautilus_wrap_table_add), (nautilus_wrap_table_remove),
	(nautilus_wrap_table_forall), (wrap_table_layout),
	(wrap_table_get_max_child_dimensions),
	(wrap_table_get_content_dimensions),
	(wrap_table_find_child_at_point),
	(nautilus_wrap_table_reorder_child): Change 'items' to 'childern'
	(nautilus_wrap_table_get_num_children): New function to get the
	number of chilren.

	* src/nautilus-property-browser.c: (labeled_image_configure),
	(labeled_image_new), (make_properties_from_directories),
	(add_reset_property), (make_properties_from_xml_node),
	(nautilus_property_browser_update_contents):
	Modify some constants and add new ones for the image table
	layout.  Andy is going to tweak these later.
	Move the erase object back to the end of the table.

2001-02-15  J Shane Culpepper  <pepper@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_transfer_ok):

	Fix for Bug #1505, Cancelled copy operations leave partial
	files.  Nautilus now catches cancel and deletes the partial
	file.

2001-02-15  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>
                     Except for the self checks code.
	
	Change code that used a ArtIRect as a "frame" to use
	NautilusDimensions instead.  Change all foo_frame functions to
	foo_dimensions.

	* libnautilus-extensions/nautilus-art-extensions.h:
	Add a new structure to represent dimensions using signed integers.
	Retire nautilus_art_ipoint_assign.
	* libnautilus-extensions/nautilus-art-extensions.c:
	(nautilus_dimensions_empty): New function to check for empty
	dimensions.
	(nautilus_art_irect_assign_dimensions): New function to assign
	dimensions to a rectangle.
	(nautilus_self_check_art_extensions): New self checks.

	* libnautilus-extensions/nautilus-art-gtk-extensions.h:
	* libnautilus-extensions/nautilus-art-gtk-extensions.c:
	(nautilus_gdk_rectangle_to_art_irect),
	(nautilus_screen_get_dimensions), (nautilus_gdk_window_get_bounds),
	(nautilus_gdk_window_get_screen_relative_bounds),
	(nautilus_gtk_widget_get_bounds),
	(nautilus_gtk_widget_get_dimensions),
	(nautilus_gdk_window_clip_dirty_area_to_screen),
	(nautilus_art_irect_to_gdk_rectangle),
	(nautilus_gdk_window_get_dimensions): New function to get
	the dimensions of a GdkWindow.
	Update for frame to dimensions changes.  Change functions names to
	lose the "irect" sub-prefix.

	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.h:
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(nautilus_gdk_pixbuf_get_dimensions),
	(nautilus_gdk_pixbuf_fill_rectangle_with_color),
	(nautilus_gdk_pixbuf_draw_to_drawable),
	(nautilus_gdk_pixbuf_draw_to_pixbuf),
	(nautilus_gdk_pixbuf_draw_to_pixbuf_alpha),
	(nautilus_gdk_pixbuf_new_from_pixbuf_sub_area),
	(pixbuf_draw_tiled), (nautilus_gdk_pixbuf_draw_to_pixbuf_tiled),
	(nautilus_gdk_pixbuf_draw_to_drawable_tiled),
	(nautilus_gdk_pixbuf_intersect): New functions 
	(nautilus_self_check_gdk_pixbuf_extensions): New self checks.
	Update for frame vs dimenensions changes.  Simplify clipping code
	by using nautilus_gdk_pixbuf_intersect.  Move
	nautilus_gdk_window_get_dimensions to
	nautilus_gdk_window_get_dimensions in art-gtk-extensions.

	* libnautilus-extensions/nautilus-debug-drawing.c:
	(debug_pixbuf_viewer_size_request),
	(nautilus_debug_pixbuf_draw_point),
	(nautilus_debug_pixbuf_draw_rectangle),
	(nautilus_debug_pixbuf_draw_rectangle_inset):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-clickable-image.c:
	(label_handle_motion):
	Update for art-gtk extensions changes.
	
	* libnautilus-extensions/nautilus-glyph.h:
	* libnautilus-extensions/nautilus-glyph.c: (nautilus_glyph_new):
	Change order of parameters to match NautilusScalalbleFont.
	(nautilus_glyph_get_dimensions), (nautilus_glyph_draw_to_pixbuf):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-lib-self-check-functions.h:
	New declaration for art_extensions and gdk_pixbuf_extensions.
	
	* libnautilus-extensions/nautilus-self-checks.c:
	(nautilus_check_rectangle_result),
	(nautilus_check_dimensions_result):
	* libnautilus-extensions/nautilus-self-checks.h:
	Add support for checking functions that return rectangles and
	dimensions.
	
	* libnautilus-extensions/nautilus-scalable-font.h:
	* libnautilus-extensions/nautilus-scalable-font.c:
	(nautilus_scalable_font_measure_text): Return
	NautilusDimensions instead of using pointer parameters.
	(nautilus_scalable_font_text_width): Simplify by calling
	scalable_font_measure_text.
	(nautilus_scalable_font_draw_text),
	(nautilus_scalable_font_measure_text_lines),
	(nautilus_scalable_font_draw_text_lines_with_dimensions),
	(nautilus_scalable_font_draw_text_lines):
	Update for frame vs dimenensions changes.  Use NautilusDimensions
	arrays instead of individial width and height arrays.  Change all
	function signatures to pass in only a font_size instead of both
	font_width and font_height.  Simplifies using these a bit.
	(nautilus_scalable_font_largest_fitting_font_size): Fix bug where
	we were always using the wrong font size to compute the largest
	fitting font.
	
	* libnautilus-extensions/nautilus-icon-factory.c: (embed_text):
	Update for scalable font font_size api changes.
	
	* libnautilus-extensions/nautilus-image-table.c:
	(image_table_clear_dirty_areas):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-image.c:
	(nautilus_image_size_request), (image_get_pixbuf_dimensions),
	(image_get_pixbuf_bounds), (image_get_tile_dimensions):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-label.h:
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_initialize_class), (nautilus_label_set_arg),
	(nautilus_label_get_arg), (nautilus_label_size_request),
	(nautilus_label_size_allocate), (label_composite_pixbuf_callback),
	(label_draw_text_to_pixbuf): Fix a type.  Was using [x,x] instead
	of [x,y] to render the string.
	(label_get_text_dimensions), (label_get_text_bounds),
	(label_get_tile_dimensions), (label_line_geometries_clear),
	(label_line_geometries_recompute),
	Update for frame vs dimenensions changes.  Make the
	'smooth_line_wrap' attribute an int instead of a guint.  Use an
	array of NautilusDimensions to store text lines geometries instead
	of separete width and height arrays.
	(label_get_default_line_wrap_width),
	(nautilus_label_set_smooth_line_wrap_width),
	(nautilus_label_get_smooth_line_wrap_width):
	Change signature to return an int instead of a guint.
	
	* libnautilus-extensions/nautilus-labeled-image.c:
	(nautilus_labeled_image_size_request),
	(labeled_image_get_image_dimensions),
	(labeled_image_get_label_dimensions),
	(labeled_image_get_image_bounds_fill),
	(nautilus_labeled_image_get_image_bounds),
	(labeled_image_get_label_bounds_fill),
	(nautilus_labeled_image_get_label_bounds),
	(labeled_image_get_content_dimensions),
	(labeled_image_get_content_bounds):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-smooth-widget.h:
	* libnautilus-extensions/nautilus-smooth-widget.c:
	(smooth_widget_paint_tile_transparent),
	(nautilus_smooth_widget_get_preferred_dimensions):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-tabs.c: (measure_tab_name),
	(draw_tab_label):
	Update for font api changes.
	
	* libnautilus-extensions/nautilus-text-layout.c:
	(nautilus_text_layout_new), (nautilus_text_layout_paint):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-wrap-table.c:
	(nautilus_wrap_table_size_request), (wrap_table_layout),
	(wrap_table_art_irect_max_dimensions),
	(wrap_table_get_max_child_dimensions),
	(wrap_table_get_content_dimensions):
	Update for frame vs dimenensions changes.

	* src/nautilus-about.c: (draw_aa_string):
	Update for frame vs dimenensions changes.

	* src/nautilus-sidebar-tabs.c: (draw_one_tab_plain),
	(draw_one_tab_themed), (get_tab_width):
	Update for frame vs dimenensions changes.

	* test/test-nautilus-font-simple.c: (main):
	* test/test-nautilus-font.c: (main):
	* test/test-nautilus-glyph-simple.c: (glyph_new):
	* test/test-nautilus-glyph.c: (glyph_new), (main):
	* test/test-nautilus-pixbuf-tile.c:
	* test/test.c: (test_pixbuf_draw_rectangle_tiled):
	Update test for frame vs dimenensions changes and font api
	changes.

2001-02-14  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/mozilla-preferences.cpp:

	Bug 6592 -- Embedded Mozilla defaults to port 8080 when HTTP
	proxy is enabled like everything else

2001-02-14  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-xml-package-list.c:
	(osd_parse_shared), (eazel_install_packagelist_parse):
	* components/services/install/lib/eazel-install-xml-package-list.h:
	* components/services/install/lib/eazel-softcat-private.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_finalize), (eazel_softcat_initialize),
	(eazel_softcat_reset_server_update_flag), (eazel_softcat_query):

	Return the softcat DB revision with the parsed package list, and
	use that info to hook into Eskil's error trap.  Also free up the
	softcat private data when the object goes away.

2001-02-14  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6653, throwing away something with the desktop not on will
	bring up an empty trash if the desktop is later turned on
	
	* src/file-manager/fm-desktop-icon-view.c:
	(update_trash_link_and_delete_copies):
	Preflight state of trash icon when we are doing all of the other
	icon state validity checks.

2001-02-14  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-factory.c:
	(is_supported_mime_type),
	(nautilus_icon_factory_get_icon_for_file):
	fixed bug 6623, .fig files cause warnings to spew, by checking for
	types that we don't support and excluding them from thumbnailing.
	
2001-02-14 John Fleck <jfleck@inkstain.net>

	reviewed by: Ali Abdin <aliabdin@aucegypt.edu>
	* components/help/converters/gnome-db2html2/toc-elements.c
	fix bug # 6551 - add test to see if article header has already
	been printed and don't print it a second time

2001-02-14  Rebecca Schulman  <rebecka@eazel.com>
	Fix bugzilla.eazel.com bug 6416, that the search results view
	needs to inform the user if indexing is disabled or blocked
	on their system.  I haven't added the final text yet, since
	it is not complete.  The final text will be swapped in.

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* src/file-manager/fm-search-list-view.c:
	(load_location_callback),
	(real_load_error), (display_indexed_search_problems_dialog),
	(display_system_services_are_blocked_dialog),
	(display_system_services_are_disabled_dialog): Add the dialogs for
	the cases when searches are enabled and disabled in the right
	cases.  Stop displaying an error dialog about a problem loading
	the location in the case where the directory load is cancelled.

	* src/file-manager/nautilus-indexing-info.c:
	(show_index_progress_dialog), (show_reindex_request_dialog),
	(show_indexing_info_dialog):
	Fix an obscure bug introduced in my last checkin by
	removing a reference to the index status that was kept by the
	medusa system state poller on destroy. If this reference was left around,
	enabling or disabling indexing could crash nautilus.

2001-02-14  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	* src/nautilus-applicable-views.c:
	(got_minimum_file_info_callback),
	(nautilus_determine_initial_view),
	(nautilus_determine_initial_view_cancel): Get rid of the code to
	monitor the directory. It's now moved up one level to the
	manage-views.c code.
	* src/nautilus-window-private.h:
	* src/nautilus-window-manage-views.c: (free_location_change),
	(begin_location_change): Move the code that starts monitoring the
	directory up here instead.

	* src/nautilus-application.c: (volume_unmounted_callback): Rewrote
	this code to not use the viewed_file private field. There's a
	public call to get the current location that should work just as
	well. Also fix bug where it would ignore the scheme and just look
	at the path part.
	
	* libnautilus-extensions/nautilus-directory-metafile.c:
	(nautilus_directory_use_self_contained_metafile_factory): Added
	check to detect if this is called after using the factory.
	(free_factory): Simplified.
	(get_factory): New function to simplify get_metafile.
	(get_metafile): Simplified.

	* src/nautilus-location-bar.c: (try_to_expand_path): Fix storage
	leak.

	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_key_press): Added FIXME after noticing a
	particularly lame version of tilde expansion in here. I'm not sure
	this is even used to good effect, since the location bar now does
	its own tidle expansion.

	* README: Fixed many inaccuracies.
	
	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_free): Formatting tweaks.
	* src/nautilus-theme-selector.c:
	(get_theme_description_and_display_name): Formatting tweaks.

2001-02-14  Michael Engber  <engber@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_delayed_close_destroy_dialog_callback),
	(timed_wait_delayed_close_timeout_callback), (timed_wait_free),
	(timed_wait_dialog_destroy_callback), (timed_wait_callback),
	(nautilus_timed_wait_start_with_duration),
	(nautilus_timed_wait_stop):
	Non-cancellable timed wait dialogs do not free the timed wait
	when the dialog is dismissed - instead they wait for the call to
	timed_wait_stop to do it - otherwise the call to timed_wait_stop
	asserts. Removed superfluous argument in timed_wait_callback.
	When timed wait dialog remaining up due to minimum uptime feature
	are closed by the user, we now cancel the pending timeout that
	would close them without user intervention.

2001-02-14  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(eazel_install_check_existing_packages), 
	Final fix for 3511, if multiple packages with same name are
	already installed, and more than one passes verify, fail
	operation.
	(install_packages),
	(uninstall_packages):
	call softcat reset db update mjick.
	
	* components/services/install/lib/eazel-softcat.h:
	* components/services/install/lib/eazel-softcat-private.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_initialize),
	(eazel_softcat_reset_server_update_flag),
	(eazel_softcat_error_string), (eazel_softcat_query):
	Code to make get_info return a enum indicating that the db was
	updated since last time.
	Also a code to reset the flag.

2001-02-14  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: added support for scrollkeeper
	this also requires having the scrollkeeper package
	to run, have not added that dependancy as it is not
	easily available.

2001-02-14  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Mike Engber <engber@eazel.com>

	Fixed bug 6606, only show user-mountable volumes in Disks menu.
	
	Look for options "user" or "owner" instead of "noauto"
	to determine if volume if removable.

	* libnautilus-extensions/nautilus-volume-monitor.c:
	(volume_is_removable), (close_error_pipe):
		
2001-02-14  Eric Fischer <eric@eazel.com>

	* nautilus-installer/install-lib/Makefile.am:
	Gmake seems to have trouble recognizing .c -> .o dependencies
	when the .c files don't appear until after the make has begun,
	so explicitly add the rpm3 and rpm4 dependencies.

2001-02-13  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_file_conflict_check_signal),
	(eazel_file_uniqueness_check_signal),
	(eazel_feature_consistency_check_signal), (something_failed),
	(eazel_preflight_check_signal), (dep_check), (md5_check_failed),
	(delete_files):
	Added --silent, suppresses random spewage.
	Added autocont, so if there was multiple problems, answering y to
	first "continue y/n ?" will answer y to all.
	Fixed for the modified preflight signal.
	
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_fill_from_packagedata),
	(packagedata_from_corba_packagedatastruct):
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_preflight_check), (eazel_install_callback_class_initialize):
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/idl/trilobite-eazel-install.idl:
	Changed preflight to take the operation type as argument.
	Added modification status to the corba version of package data.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(prune_failed_packages_helper),
	(eazel_install_check_existing_packages), (get_softcat_info),
	(is_satisfied), (check_dependencies_foreach),
	(do_file_conflict_check), (execute),
	(eazel_uninstall_upward_traverse), (install_packages):
	Fixed bug 3511, 4502 (libeazelinstall part, view still needs
	stuff).
	
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_install_packages), (eazel_install_init_transaction),
	(eazel_install_emit_preflight_check_default):
	More debug spewage.
	Fixed cut'n'paste bug in init_transaction.
	Updated preflight signal.
	
	* components/rpmview/nautilus-rpm-view-install.c
	* components/services/install/nautilus-view/nautilus-service-install-view.c
	Updated preflight signal.

	* components/services/install/lib/eazel-install-problem.h:
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_breaks_foreach),
	(get_detailed_messages_foreach), (compare_problem_case),
	(add_continue_with_flag_case), (add_force_install_both_case),
	(add_force_remove_case), (get_detailed_cases_foreach),
	(eazel_install_problem_case_to_string),
	(eazel_install_problem_case_foreach_destroy),
	(build_categories_from_problem_list),
	(eazel_install_problem_step_problem), (eazel_install_problem_done),
	(eazel_install_problem_wait_for_completion),
	(eazel_install_problem_handle_cases):
	s/Fuckup/Feature dependency/
	Lots of improvement.
	Change some cases.
	Did stuff...
	Added cases of "cancelling package", "continue with flag",
	"invalid".
	Made EazelInstallProblem wait for the operation to complete, as
	not to confuse the service object by starting it and resetting
	values.
	
	
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_is_installed), (eazel_package_system_verify):
	* components/services/install/lib/eazel-package-system.h:
	* components/services/install/lib/eazel-package-system-private.h:
	* components/services/install/lib/eazel-package-system-rpm3-private
	.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(rpmmonitorpiggybag_new), (eazel_package_system_rpm3_verify_impl),
	(eazel_package_system_rpm3_verify):
	* components/services/install/lib/eazel-package-system-skeleton.c:
	(eazel_package_system_skeleton_verify):
	Fixed 6494, also made verify return boolean, propageted change
	down throughout the hierachy.
	
	* components/services/install/lib/eazel-package-system-types.c:
	(eazel_install_gtk_marshal_BOOL__ENUM_POINTER_INT_INT):
	New signal for preflight.

2001-02-14  Eric Fischer <eric@eazel.com>

	This is a bunch of changes leading up to Bug 6515, so
	the installer can get built by just an extra flag to
	configure rather than its own script.

	* Makefile.am:
	Add nautilus-installer to SUBDIRS

	* acconfig.h:
	Add ENABLE_INSTALLER to things that can be configured

	* configure.in:
	Add --enable-installer command line flag.  Set PACKAGE_SYSTEM_OBJECT
	and PACKAGE_SYSTEM_SOURCE based on whether rpm 3 or 4 is installed.
	Create nautilus-installer Makefiles

	* nautilus-installer/Makefile.am:
	Remove things that Robey said were no longer used.  Add libtrilobite
	and install-lib to SUBDIRS that need to be built.

	* nautilus-installer/install-lib/Makefile.am:
	New Makefile that builds a second copy of the installer libraries
	with weird flags as needed by the installer.

	* nautilus-installer/libtrilobite/Makefile.am:
	New Makefile that builds a second copy of the trilobite libraries
	with weird flags as needed by the installer.
	
	* nautilus-installer/src/Makefile.am:
	Do in the Makefile what formerly had been done in link.sh (build
	the installer, and create a self-extracting version of it).

	* nautilus-installer/src/create-eazel-installer.sh:
	Script, adapted from what's in link.sh, to create a self-extracting
	installer.

2001-02-14  Josh Barrow  <josh@eazel.com>

	* README:
	Made a few changes to URLs and a couple of places where things wer
	worded in odd ways.

2001-02-14  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2917 (Wrong capitalization in "Lay Out" menu)

	* src/file-manager/nautilus-icon-view-ui.xml:
	Verafied the capitalization.

2001-02-14  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6465, Music view buttons stretch for songs with
	very long titles.
	
	* components/music/nautilus-music-view.c: (add_play_controls):
	Set the pack box flag so that the buttons don't expand.
	
2001-02-14  Laszlo Kovacs <laszlo.kovacs@sun.com>
	* components/help/hyperbola_top_doc_tree_populate.h:
	  components/help/hyperbola-filefmt.c:
	  components/help/hyperbola-nav-tree.c:
	  (ctree_populate_subnode, ctree_populate,
	   hyperbola_navigation_tree_new,
	   hyperbola_navigation_tree_load_location,
	   hyperbola_navigation_tree_select_row):
	Toplevel docs put into a separate ctree in
	the GUI of the help sidebar if Scrollkeeper
	is enabled.
	Note that this is not the final GUI, only the widget
	layout is right, the look will be changed by somebody
	who knows more gtk than me. Dan Mueth tries to find the
	right person.

2001-02-14  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am: Move $(FREETYPE2_CFLAGS) all the way to the
	top of $(INCLUDES), so that if there are multiple versions of
	freetype installed in the build machine, then we will catch only
	the one we are interested in.

2001-02-14  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Added Norwegian (nynorsk) to ALL_LINGUAS.
	
2001-02-14  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-viewport.c:
	(nautilus_viewport_set_never_smooth):
	Fix a very dumb typo with the last commit.  Thanks for 
	JP Rosevear <jpr@ximian.com> for spotting this.
	
2001-02-14  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus.spec.in:
	Require 'freetype >= 2.0' not 'freetype2 >= 2.0'
	
2001-02-14  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: JP Rosevear <jpr@ximian.com>

	* libnautilus-extensions/nautilus-viewport.c:
	(nautilus_viewport_initialize), (nautilus_viewport_realize),
	(nautilus_viewport_set_is_smooth),
	(nautilus_viewport_get_is_smooth),
	(nautilus_viewport_set_never_smooth):
	Make sure the "never_smooth" and "is_smooth" attributes work as
	advertised.  Make the "never_smooth" attribute default to TRUE,
	since that makes it work with more gtk widgets.
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize),
	(nautilus_property_browser_update_contents):
	Set the "never_smooth" attribute of the viewports to FALSE so that
	the can be smooth.

2001-02-13  Ramiro Estrugo  <ramiro@eazel.com>

	* test/test-nautilus-glyph.c: (main):
	* test/test-nautilus-label-simple.c: (main):
	Two very tiny tweaks to help debug clipping bugs.
	
2001-02-13  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Rebecca Schulman  <rebecka@eazel.com>

	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(nautilus_gdk_pixbuf_new_from_pixbuf_sub_area),
	(nautilus_gdk_pixbuf_new_from_existing_buffer):
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.h:
	New function to create a pixbuf from an existing buffer and clip
	area.
	
2001-02-13  Robey Pointer  <robey@eazel.com>

	* Makefile.am:

	Add nautilus-installer to EXTRA_DIST to fix tinderbox breakage.
	
2001-02-13  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: Seth Nickell <seth@eazel.com>

	Fix bugzilla.eazel.com bug 6417, that the indexing
	information dialog should not be shown if indexing is
	disabled or blocked.

	* src/file-manager/nautilus-indexing-info.c: (dialog_close_cover),
	(show_index_progress_dialog), (show_reindex_request_dialog),
	(show_indexing_info_dialog):
	Add new dialogs for the case when indexing is off,
	and close each dialog in the case where the status of indexing
	changes.

2001-02-13  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Arik Devens  <arik@eazel.com>

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-label.c:
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	* libnautilus-extensions/nautilus-scalable-font.c:
	* libnautilus-extensions/nautilus-scalable-font.h:
	* libnautilus-extensions/nautilus-text-layout.c:
	* libnautilus-extensions/nautilus-text-layout.h:
	* test/test-nautilus-font.c:
	Move the text layout code to its own place.  No real code changes.

2001-02-13  Andy Hertzfeld  <andy@eazel.com>

	reviewed by: Arik Devens  <arik@eazel.com>

	* src/nautilus-property-browser.c: (add_pattern_to_browser):
	fixed bug 6554, typing random text into the background selector
	crashes, by adding a check for a valid path and displaying an
	error dialog if the path isn't valid.

2001-02-13  Arik Devens  <arik@eazel.com>

	reviewed by: Andy Hertzfeld  <andy@eazel.com>

	Fixed bug 6582, Editing location bar crashes Nautilus, leaves
	spurious text.
	Fixed duplicate bug 6585, Nautilus crashed if type "~/asdfasdf" in
	location bar.
	
	* src/nautilus-location-bar.c: (try_to_expand_path): Removed
	spurious g_free that was causing massive breakage.
	
2001-02-13  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 6385 (Properties window doesn't set/display
	icon correctly for Nautilus link files)

	Now the Properties window keeps around an "original
	file" and a "target file", which are currently the
	same for all files except Nautilus links. The original
	file is used to display/set the icon & name. (So you
	can edit the name of your Home icon in the properties
	window now also.)

	* src/file-manager/fm-properties-window.c:
	Renamed details->file to details->target_file. Added
	details->original_file. Removed two details fields
	that were unused.
	
	(directory_contents_value_field_update),
	(attach_directory_contents_value_field),
	(update_visibility_of_item_count_fields),
	(should_show_custom_icon_buttons), (should_show_file_type),
	(should_show_accessed_date), (should_show_mime_type),
	(create_emblems_page),
	(append_special_execution_checkbox), (create_permissions_page),
	(should_show_emblems), (should_show_permissions),
	(real_shutdown):
	Updated for name change only.
	
	(create_basic_page): Use original file for icon & name widgetry.

	(startup_data_new), (startup_data_free): New functions used to
	manipulate the data needed before a Properties window object
	exists for a given file.

	(create_properties_window): Reworked to use StartupData and set up
	both target_file and original_file.

	(get_target_file): Renamed from get_and_ref_file_to_display.

	(create_properties_window_callback): Reworked to use StartupData;
	slight reordering due to object lifetime issues.
	
	(cancel_create_properties_window_callback),
	(directory_view_destroyed_callback), (remove_pending_file),
	(fm_properties_window_present):
	Reworked to use StartupData.
	
	(real_destroy): clean up after original_file and target_file.
	
	(set_icon_callback): Use original_file.
	(select_image_button_callback),
	(remove_image_button_callback): Changed signatures to take
	FMPropertiesWindows instead of NautilusFiles; use original_file.

2001-02-13  Michael Engber  <engber@eazel.com>

	reviewed by: John Sullivan

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(nautilus_directory_set_file_metadata_list):
	Fix call to CORBA_sequence_set_release on the wrong
	(non-CORBA) list - bug 6575.

2001-02-13  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 6408 (nautilus_view_report_load_failed causes Nautilus to
	segfault in an idle callback):

	* libnautilus/nautilus-idle-queue.c: (execute_queued_functions),
	(nautilus_idle_queue_destroy): Changed the idle queue so it can
	handle being destroyed while inside one of the queued functions.

	Fix bug 6402 (Click desktop icon -> Nautilus window not moved to
	front):
	
	* src/nautilus-window-manage-views.c: (open_location): Bring the
	existing window up when it's reused in the "open icon on desktop"
	in single-window mode.

	Other changes:

	* libnautilus-extensions/nautilus-icon-factory.c:
	(is_theme_in_user_directory): Rename from "check_local_theme"
	and changed it to use a normal function result instead of taking
	a gboolean pointer.
	(set_theme): Use new function and booleans by their new names.
	"in_user_directory" instead of "local".
	(make_full_icon_path): Just the name change.
	(get_themed_icon_file_path): Take a boolean parameter instead of
	trying to figure out if the theme is in the user directory, because
	the old way would get it wrong for the default theme.
	(get_icon_file_path): Pass in the boolean to say if the theme is
	in the user directory or not.

	* libnautilus-extensions/nautilus-string.h: Remove repeated
	declaration for nautilus_str_get_prefix.

	(These not reviewed:)
	
	* librsvg/rsvg-ft.c: (rsvg_ft_glyph_evict): Fix code that was
	looking at the "prev" pointer of a victim after freeing it. Also
	made some other code simplifications.

	* src/nautilus-theme-selector.c:
	(render_theme_name_and_description): Added an explicit call to
	gtk_widget_realize before grabbing the style field and expecting
	it to have gc's in it. Not sure why no one ran into this before.

2001-02-13  Eric Fischer <eric@eazel.com>

	* configure.in:
	Allow RPM 4.* instead of only 4.0

2001-02-13  Andy Hertzfeld  <andy@eazel.com>

	* components/text/nautilus-text-view.c: (add_services_to_menu),
	(nautilus_text_view_build_service_menu):
	made the text view look for services in the updates folder, so we
	can add new services in the same fashion as bookmarks.  Also,
	keep a list of the added service filenames so if the same service
	is present in multiple directories, it only gets added once.
	
2001-02-13  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* nautilus.spec.in: enabled make -k check

2001-02-13  Michael Engber  <engber@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(nautilus_directory_use_self_contained_metatfile_factory),
	(get_metafile), (nautilus_directory_set_file_metadata_list):
	* libnautilus-extensions/nautilus-directory-metafile.h:
	* libnautilus-extensions/nautilus-metafile.c: (destroy),
	(corba_get_list):
	* src/nautilus-main.c: (main):
	The metafile code now circumvents oaf when nautilus is performing
	a self check - bug 6552.

2001-02-13  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* nautilus.spec.in: re-enabled building...

2001-02-13  John Sullivan  <sullivan@eazel.com>

	Fixed bug 5647 (Control-left/right for keyboard focus
	movement conflicts with Sawfish keyboard shortcuts)

	* libnautilus-extensions/nautilus-icon-container.c:
	(keyboard_move_to), (keyboard_space): Use Alt instead
	of Control for keyboard focus movement and selection
	toggling, per Don.

2001-02-13  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* nautilus.spec.in: took make check out of here
	* src/Makefile.am: re-enabled test target

2001-02-13  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-glyph.h:
	* libnautilus-extensions/nautilus-glyph.c:
	New class.  A wrapper on RsvgGlyph that makes it simple and fast
	to draw smooth text on pixbufs
	
	* libnautilus-extensions/nautilus-clickable-image.c:
	(nautilus_clickable_image_initialize_class),
	(nautilus_clickable_image_realize):
	Remove unrealize() method that was a noop.
	
	* libnautilus-extensions/nautilus-debug-drawing.c:
	(nautilus_debug_pixbuf_draw_point),
	(nautilus_debug_pixbuf_draw_rectangle),
	(nautilus_debug_pixbuf_draw_rectangle_inset):
	* libnautilus-extensions/nautilus-debug-drawing.h:
	Add some pixbuf drawing functions to debug clip areas in pixbufs.

	* libnautilus-extensions/nautilus-image-table.c:
	(nautilus_image_table_initialize_class),
	(nautilus_image_table_remove):
	Remove add() method that was a noop. 

	* test/.cvsignore:
	* test/Makefile.am:
	* test/test-nautilus-font-simple.c: (main):
	* test/test-nautilus-font.c: (main):
	* test/test-nautilus-glyph-simple.c: (glyph_new), (main):
	* test/test-nautilus-glyph.c: (glyph_new), (main):
	* test/test.c: (test_window_set_title_with_pid),
	(test_pixbuf_draw_rectangle_tiled):
	* test/test.h:
	New NautilusGlyph tests.  Also remove the broken pixbuf drawing
	debug code.  Use the debugging code in nautilus-debug-drawing.[ch]
	instead.
	
2001-02-13  Arik Devens  <arik@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 5837, 'Home Location' preference should accept ~.
	Fixed bug 6463, GNOME-VFS spews critical errors as you type an
	incomplete path in the location bar. 
	Fixed bug 6478, nautilus crashes on ~somedir/ if that dir
	doesn't exist.
	Fixed bug 6506, Entering "~" in Add New Background Dialogue box
	causes Nautilus to crash.

	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_initialize), (nautilus_entry_key_press): Added
	setting of expand_tilde to FALSE. Added a slash case so that ~/
	gets expanded to $(HOMEDIR).
	* libnautilus-extensions/nautilus-entry.h: Added gboolean
	expand_tilde to the NautilusEntry struct.
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_from_input): Added falling into default case
	on ~'s if the dir doesn't exist so they end up at http://'s.
	* libnautilus-extensions/nautilus-preferences-item.c:
	(preferences_item_create_editable_string): Added special case
	setting of expand_tilde to TRUE on the home dir preference box.
	As well as a FIXME saying this should be dealt with later on.
	* libnautilus-extensions/nautilus-text-caption.c:
	(nautilus_text_caption_initialize), (entry_changed_callback),
	(nautilus_text_caption_set_editable),
	(nautilus_text_caption_set_expand_tilde): Changed
	NautilusTextCaption to use NautilusEntry instead of GtkEntry.
	Added function to set expand tilde on NautilusText Caption.
	Updated set_editable to work with NautilusEntry.
	* libnautilus-extensions/nautilus-text-caption.h: Added
	nautilus_text_caption_set_expand_tilde function prototype.
	* src/nautilus-location-bar.c: (try_to_expand_path),
	(nautilus_location_bar_initialize): Added expanding of ~'s at
	the beginning of the location to full path. Added setting of
	expand_tilde to TRUE.
	* src/nautilus-property-browser.c: (add_pattern_to_browser):
	Added if statement to not attempt to do anything if the dir
	chosen uses ~ do to gtk brokenness. Also added error dialog
	that explains what happened to the user.

2001-02-13  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-theme-selector.c:
	(nautilus_theme_selector_initialize), (theme_style_set_callback),
	(render_theme_name_and_description), (add_pixbuf_to_theme_list),
	(add_theme):
	fixed bug 5951, hard-coded geometry in the theme selector, by
	implementing the design that Arlo wanted, with the theme name
	above the theme description instead of in separate columns.
	
2001-02-12  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:

	Move -lrpmio earlier in the RPM_LIBS line, because the bootstrap
	installer is picky about it.  Also, generate the installer's
	Makefile during the 'configure' stage.
	
	* nautilus-installer/src/Makefile.am:

	Use predefined macros for most libraries (still keeping them to
	the mininum) and get libtool/automake to do the heavy lifting part
	of making a static binary.
	
	* nautilus-installer/src/callbacks.c: (druid_cancel),
	(druid_finish):

	Try to avoid unref'ing or using the installer object during button
	callbacks if it hasn't been created yet.

	* nautilus-installer/src/installer.c: (eazel_installer_finalize):

	Don't unref the service object, it causes assertions.
	
	* nautilus-installer/src/link.sh:

	Make it so that (at least for me) the bootstrap installer will
	build on a RH70 system now.

2001-02-12  Robin * Slomkowski  <rslomkow@eazel.com>

	* src/Makefile.am: disabled "make check" by commenting
	out the TEST directive

2001-02-12  John Harper  <jsh@eazel.com>

	reviewed by Michael Engber  <engber@eazel.com>

	Fix bug 6383 (Esc-cancel from icon stretching doesn't work on
	desktop):

	* libnautilus-extensions/nautilus-icon-container.c
	(start_stretching): call nautilus_gdk_window_focus on the
	toplevel widget of the icon container

2001-02-12  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* src/nautilus-application.c: (nautilus_application_startup):

	Follow --quit's lead and avoid unref'ing to avoid hanging.
	
	* src/nautilus-shell.c: (restore_window_states):

	Don't double-free the list elements in the restored window list
	after restart.

2001-02-12  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_fetch_remote_file):

	Erase the package if it didn't finish downloading.
	
	* components/services/trilobite/libtrilobite/trilobite-core-messagi
	ng.c:

	Add <string.h> header for RH7.
	
	* nautilus-installer/src/callbacks.c: (druid_cancel),
	(druid_delete), (druid_finish):
	* nautilus-installer/src/main.c: (main):

	Clean up object unref'ing to quiet up the install lib's memory
	checker.  Don't hook up with the session manager.
	
	* nautilus-installer/src/installer.c: (eazel_download_progress),
	(eazel_install_preflight), (check_system),
	(eazel_installer_finalize), (eazel_installer_set_default_texts),
	(eazel_installer_initialize):
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/link.sh:

	Change the no-RH7 message into RH6 and RH7 specific messages, so
	we can build one installer for each platform.  Don't ask to delete
	files if none were downloaded.
	
2001-02-12  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-gtk-extensions.h:
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(while_realized_disconnecter),
	(nautilus_gtk_signal_connect_while_realized):
	New function to connect to a signal of an object while a widget is
	realized.
	(while_realized_disconnecter): Changed signature to be void - no
	need to return a value here.  As such, the GTK_SIGNAL_FUNC casts
	are no longer needed.
	
	* libnautilus-extensions/nautilus-clickable-image.c:
	(nautilus_clickable_image_realize),
	(nautilus_clickable_image_unrealize):
	Use nautilus_gtk_signal_connect_while_realized so that we dont
	have to keep track of the signal ids and ancestor widget.
	
	* libnautilus-extensions/nautilus-image-table.c:
	(nautilus_image_table_realize), (nautilus_image_table_unrealize):
	Use nautilus_gtk_signal_connect_while_realized so that we dont
	have to keep track of the signal ids and ancestor widget.

	* test/test-nautilus-clickable-image.c: (main):
	Add a windowed ancestor inbetween in order to test
	nautilus_gtk_signal_connect_while_realized.
	
2001-02-12  Mike Fleming  <mfleming@eazel.com>

	reviewed by: <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(view_load_location_callback), (mozilla_net_stop_callback),
	(mozilla_link_message_callback), (mozilla_progress_callback),
	(mozilla_dom_mouse_click_callback), (vfs_read_callback),
	(update_nautilus_uri), (dispatch_report_location_change),
	(dispatch_report_load_complete):

	Bug 6436: Throbber wasn't thobbing on mozilla-to-mozilla navigation.

	Confirmed with Darin: call report_load_underway and report_load_complete
	in case where report_location_changed is used.

2001-02-12  John Harper  <jsh@eazel.com>

	* src/nautilus-application.c (set_session_restart): set the
	restart command to be `nautilus --no-default-window'

2001-02-12  Ian McKellar  <ian@eazel.com>

	* configure.in:
	Updated the check to check for RPM 3.0.5 not 3.0.4.

2001-02-12  Gene Z. Ragan  <gzr@eazel.com>

	Turn off repawn behavior in debug mode at request of Andy.
	
	* src/nautilus-application.c: (set_session_restart):
	Check for debug environment variable.
	
2001-02-12  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: merged changes from branch into
	head BUG 6067

2001-02-11  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: <sullivan@eazel.com>

	Bug 5961: Starting nautilus with path to local HTML file
	causes images not to load.

	The problem here was that any argument specified on the commandline
	was being passed directly into Nautilus and its components as a
	valid URI.  Added pre-processing to commandline arguments, including
	ability to handle relative file pathnames. (so you can do "nautilus ."
	to open a window on the current directory)

	* libnautilus-extensions/nautilus-file-utilities.c:
	(file_uri_from_local_relative_path),
	(nautilus_make_uri_from_shell_arg), (is_uri_partial),
	(remove_internal_relative_components),
	(nautilus_uri_make_full_from_relative),
	(nautilus_self_check_file_utilities):
	* libnautilus-extensions/nautilus-file-utilities.h:
	* src/nautilus-application.c:
	(nautilus_make_uri_list_from_shell_strv),
	(nautilus_application_startup):


2001-02-12  Rebecca Schulman  <rebecka@eazel.com>
	Fix bugzilla.eazel.com bug 4962 that open with
	mpg123 fails.  The problem was a check for 
	a file uri that had its logic backwards

	reviewed by: Mike Engber <engber@eazel.com>

	* libnautilus-extensions/nautilus-program-choosing.c:
	(nautilus_launch_application):
	Change if (file_uri) to if (!file_uri)

2001-02-12  Michael Engber  <engber@eazel.com>

	reviewed by: John Sullivan

	* libnautilus-extensions/nautilus-directory-async.c:
	(metafile_read_mark_done), (metafile_read_done_callback):
	* libnautilus-extensions/nautilus-directory-metafile.c:
	(free_factory), (get_metafile),
	(nautilus_directory_get_file_metadata),
	(nautilus_directory_get_file_metadata_list),
	(nautilus_directory_set_file_metadata),
	(nautilus_directory_set_file_metadata_list),
	(nautilus_directory_copy_file_metadata),
	(nautilus_directory_remove_file_metadata),
	(nautilus_directory_rename_file_metadata):
	* libnautilus-extensions/nautilus-directory-metafile.h:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_destroy):
	* libnautilus-extensions/nautilus-metafile-factory.c:
	(free_factory_instance):
	* libnautilus-extensions/nautilus-metafile-factory.h:
	* libnautilus-extensions/nautilus-metafile-server.idl:
	* libnautilus-extensions/nautilus-metafile.c: (destroy),
	(corba_get), (corba_get_list), (corba_set), (corba_set_list),
	(corba_copy), (corba_remove), (corba_rename),
	(get_or_add_directory_monitor_list_entry),
	(remove_directory_monitor_list_entry), (find_monitor_link),
	(corba_register_monitor), (corba_unregister_monitor),
	(get_metadata_from_node), (get_metadata_list_from_node),
	(create_metafile_root), (get_file_node),
	(get_metadata_string_from_metafile),
	(get_metadata_list_from_metafile),
	(set_metadata_string_in_metafile), (set_metadata_list_in_metafile),
	(metadata_value_new), (metadata_value_new_list),
	(metadata_value_destroy), (metadata_value_equal),
	(set_metadata_in_metafile), (get_metadata_string_from_table),
	(get_metadata_list_from_table), (str_or_null_hash),
	(str_or_null_equal), (set_metadata_eat_value),
	(free_file_table_entry), (free_directory_table_entry),
	(destroy_metadata_changes_hash_table), (destroy_xml_string_key),
	(nautilus_metafile_destroy), (get_file_metadata),
	(get_file_metadata_list), (set_file_metadata),
	(set_file_metadata_list), (rename_file_metadata),
	(apply_one_change), (apply_file_changes), (apply_one_file_changes),
	(nautilus_metafile_apply_pending_changes), (copy_file_metadata),
	(remove_file_metadata), (nautilus_metafile_set_metafile_contents):
	* libnautilus-extensions/nautilus-metafile.h:
	* src/nautilus-application.h:

	Metadata setting/getting is now done via CORBA so that
	out of process components stay in sync. bug 5958

2001-02-12  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* src/nautilus-property-browser.c:
	(make_properties_from_directories):
	Dont free the object name so soon.  Its needed to determine where
	to put the reset and erase objects.
	
2001-02-12  Rebecca Schulman  <rebecka@eazel.com>
	Fix bug 6333, that a warning about not finding
	unindexed files should not be displayed if the
	backup search is turned on.

	reviewed by: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.h:
	Leave a note that we should change the SEARCH_METHOD
	name to be more clear about what the preference is for
	(whether or not we  do a slow background search)
	* src/file-manager/fm-search-list-view.c: (load_location_callback):
	Check the SEARCH_METHOD preference 

	
2001-02-12  John Sullivan  <sullivan@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6500 (tighter layout option not saved).

	It actually was being saved, it was just being clobbered back to
	off every time a directory was loaded.

	* src/file-manager/fm-icon-view.c: (fm_icon_view_begin_loading):
	Moved the tighter-layout setting code up one line and refined
	comments to explain why.

2001-02-12  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(do_dep_check_internal), (install_packages_helper):

	Make the dep-check logic bail out early if the user has cancelled
	the install.  (It's possible to get the async "stop" callback
	during a package info fetch, I found out the hard way...)
	
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file):

	Make get_failed into an official bool, since it acts like one
	already.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_dependency_check),
	(nautilus_service_need_password),
	(service_install_stop_loading_callback):

	Treat aborted password dialog as a cancel, not a failure.  Fix
	abort callback so it doesn't loop endlessly in a GTK event
	handling cycle on fast downloads.

2001-02-11  Ramiro Estrugo  <ramiro@eazel.com>

	* test/.cvsignore:
	* test/Makefile.am:
	* test/test-nautilus-wrap-table.c: (main):
	New NautilusWrapTable test.
	
2001-02-11  Ramiro Estrugo  <ramiro@eazel.com>

	* test/test-nautilus-clickable-image.c: (main):
	* test/test-nautilus-labeled-image.c: (button_callback),
	(labeled_image_button_window_new):
	A tiny bit more debug code.
	
2001-02-11  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/preferences-applet/nautilus-preferences-applet.c:
	(user_level_changed_callback), (main):
	Make toggle buttons insensitive on novice user level.

2001-02-11  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-viewport.h:
	* libnautilus-extensions/nautilus-viewport.c:
	(nautilus_viewport_draw), (nautilus_viewport_expose_event),
	(nautilus_viewport_realize), (nautilus_viewport_set_is_smooth),
	(nautilus_viewport_get_is_smooth): Add public is_smooth getter.
	(nautilus_viewport_set_never_smooth): Add a 'never_smooth'
	attribute.

2001-02-11  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-customization-data.h:
	Add comment clarifying API changes I made in my last checkin.
	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	Remove some left over code from when the emblems table was hard
	coded to 2 columns.
	* src/nautilus-property-browser.c:
	(make_properties_from_directories):
	Fix a small memory leak.

2001-02-11 John Fleck <jfleck@inkstain.net>

	reviewed by: Ali Abdin <aliabdin@aucegypt.edu>

	* components/help/converters/gnome-db2html2/gdb3html.h
	* components/help/converters/gnome-db2html2/sect-elements.c
	* components/help/converters/gnome-db2html2/sect-elements.h
	* components/help/converters/gnome-db2html2/sect-preparse.c
	* components/help/converters/gnome-db2html2/toc-elements.c
	add support for <bridgehead> tag in DocBook, fix bug #6492

2001-02-11  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: Mathieu Lacage <mathieu@gnome.org>

	* cut-n-paste-code/widgets/nautilusclist/nautilusclist.c: Use
	binary instead of linear search to find the right insert new row
	into a sorted clist. This is part of addressing bug 6290

2001-02-10  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar.c: (add_command_buttons),
	(empty_trash_callback),
	(nautilus_sidebar_trash_state_changed_callback),
	(nautilus_sidebar_update_buttons):
	fixed bug 6052, sidebar needs empty trash button when showing
	trash: directory
	
2001-02-09  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* libnautilus-extensions/nautilus-image-table.c:
	(image_table_handle_motion), (ancestor_button_press_event),
	(ancestor_button_release_event):
	Ignore insensitive widgets when doing the event thing.
	
	* src/nautilus-property-browser.c:
	(make_properties_from_directories):
	Add an extra empty space between the erase emblem and the next to
	make it stand out more.  Cleanup property image creation a tiny bit.

2001-02-09  Robey Pointer  <robey@eazel.com>

	* po/POTFILES.in:

	Fix build bustage by removing the two missing install-lib files
	from POTFILES.in.

2001-02-09  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-region.c:
	* libnautilus-extensions/nautilus-region.h:
	New class for super easy region management using rectangle.

	* libnautilus-extensions/nautilus-art-gtk-extensions.h:
	* libnautilus-extensions/nautilus-art-gtk-extensions.c:
	(nautilus_gdk_rectangle_assign_irect):
	New function to convert ArtIRect to GdkRectangles.

	* libnautilus-extensions/nautilus-customization-data.h:
	* libnautilus-extensions/nautilus-customization-data.c:
	(nautilus_customization_data_get_next_element_for_display):
	Return pixbufs and labels for the object instead of widgets.  This
	is so that the caller can use the widget that best suits its
	display needs.

	* libnautilus-extensions/nautilus-image-table.h:
	* libnautilus-extensions/nautilus-image-table.c:
	(nautilus_image_table_initialize_class),
	(nautilus_image_table_initialize),
	(nautilus_image_table_expose_event),
	(nautilus_image_table_realize), (nautilus_image_table_unrealize),
	(nautilus_image_table_set_is_smooth_signal),
	(image_table_foreach_child_subtract_content),
	(image_table_clear_dirty_areas), (image_table_peek_clear_gc),
	(image_table_emit_signal), (image_table_handle_motion),
	(ancestor_button_press_event), (ancestor_button_release_event),
	(nautilus_image_table_new), (nautilus_image_table_set_is_smooth),
	(nautilus_image_table_set_smooth_background_color):
	Add support for smoothnes.  Register widget as a possible smooth
	widget.  When smoothness changes, we modify our background drawing
	behavior such that in smooth mode we dont flicker at all.

	Remove grab/ungrab pair that could screw up operations.  Turns out
	these are not needed.

	Change event signal emissions to include more data from the raw
	gdk events without exposing these.

	* libnautilus-extensions/nautilus-image.c:
	(nautilus_image_initialize_class):
	Update for new smooth widget class registration scheme.

	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_initialize_class):
	Update for new smooth widget class registration scheme.

	* libnautilus-extensions/nautilus-labeled-image.h:
	* libnautilus-extensions/nautilus-labeled-image.c:
	(nautilus_labeled_image_size_allocate),
	(nautilus_labeled_image_get_image_bounds),
	(nautilus_labeled_image_get_label_bounds):
	Make these two functions public.
	
	* libnautilus-extensions/nautilus-smooth-widget.h:
	* libnautilus-extensions/nautilus-smooth-widget.c:
	(smooth_widget_type_list_free), (smooth_widget_list_free),
	(widget_is_smooth), (nautilus_smooth_widget_register),
	(nautilus_smooth_widget_register_type):
	Add mechanism for registering types that are meant to be smooth.
	That way we dont need to hardcode the list of smooth widget
	classes.  Also made sure to free the static lists at exit time.
	
	* libnautilus-extensions/nautilus-viewport.h:
	* libnautilus-extensions/nautilus-viewport.c:
	(nautilus_viewport_initialize_class),
	(nautilus_viewport_initialize), (nautilus_viewport_destroy),
	(nautilus_viewport_draw), (nautilus_viewport_expose_event),
	(nautilus_viewport_realize), (nautilus_viewport_paint),
	(nautilus_viewport_set_is_smooth_signal), (nautilus_viewport_new),
	(nautilus_viewport_set_is_smooth),
	(nautilus_viewport_get_scroll_offset):
	Add support for smoothness.  When the is_smooth attribute changes,
	the viewport will not clear the background on resize - and so its
	content will not flicker.

	Add function for querying the scroll offset.
	
	* libnautilus-extensions/nautilus-wrap-table.h:
	* libnautilus-extensions/nautilus-wrap-table.c:
	(wrap_table_get_content_frame), (wrap_table_get_scroll_offset),
	(nautilus_wrap_table_get_homogeneous),
	(nautilus_wrap_table_reorder_child):
	Fix a mod by zero error.
	Add support for reordering children.
	
	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	Simplify a bit by using NautilusWrapTable instead of a GtkTable
	with a hard coded number of columns.  The emblems now wrap to fit
	the available space.  Also use NautilusLabeledImages instead of
	boxes.  Update for changes in customization data api.
	Remove check box painting workaround.  Its taken care of in
	NautilusLabeledImage now.
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize_class),
	(nautilus_property_browser_initialize), (element_clicked_callback),
	(nautilus_property_browser_preferences_changed),
	(make_property_tile), (make_properties_from_directories),
	(add_reset_property), (make_properties_from_xml_node),
	(property_browser_category_button_new), (make_category_link),
	(nautilus_property_browser_update_contents),
	(emit_emblems_changed_signal):
	Use a NautilusImageTable instead of a GtkTable to make things wrap
	propertly and thus not have to recreate the whole property box
	each time its resized.  Remove a lot of hard coded dimensions.
	Simplified a bit by using NautilusLabeledImages.
	
	* src/nautilus-search-bar-criterion.c: (make_emblem_value_menu):
	Update for changes in customization data api.
	
	* test/test-nautilus-image-table.c: (labeled_image_new),
	(foo_timeout), (image_table_size_allocate),
	(image_table_new_scrolled):
	Update for new image table features.

2001-02-09  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar.c:
	(nautilus_sidebar_active_panel_matches_id),
	(nautilus_sidebar_remove_panel):
	fixed bug 6005, help tab still left on sidebar after view is hidden,
	by decrementing the active tab index when an earlier one is deleted,
	and checking for NULL in active_panel_matches_id.

	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_initialize),
	(nautilus_rpm_view_update_from_uri):
	made it use nautilus_image so the package image is anti-aliased

2001-02-09  John Sullivan  <sullivan@eazel.com>

	Fixed bug 5903 ("Tighter Layout" can't be changed in
	manual layout, but affects Clean Up by Name)

	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_set_tighter_layout): When in
	manual layout mode, invalidate label sizes and update
	all items so the smaller caption width used for
	tighter layout can take effect immediately.
	
	* src/file-manager/fm-icon-view.c: 
	(update_layout_menus): Remove the code that was making
	this item insensitive in manual layout.

2001-02-09  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(eazel_install_callback_get_epv):
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_fill_from_packagedata),
	(packagedata_from_corba_packagedatastruct):

	Remove some cruft from the IDL that's not implemented anymore or
	isn't being used by any of the clients.
	
	* components/services/install/lib/eazel-install-metadata.c:
	(eazel_install_configure_use_local_db):
	* components/services/install/lib/eazel-install-metadata.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize):
	* components/services/trilobite/doc/gconf.txt:

	Make an opt-out for people who don't want the "can't get shared
	lock" spam message scrolling endlessly on every install just
	because RPM can't deal with NFS directories well.
	
	* components/services/install/lib/makefile.staticlib.in:

	Remove dead files from the bootstrap installer's makefile, and
	make the package-system object be a var to be filled in later.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_conflict_check),
	(nautilus_service_install_downloading),
	(nautilus_service_install_view_update_from_uri_finish),
	(user_login_callback),
	(nautilus_service_install_view_update_from_uri),
	(nautilus_service_install_view_load_uri):

	General cleanup, and the addition of the conflict_check signal
	handler.

	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/installer.c: (eazel_install_progress),
	(conflict_check), (eazel_install_preflight),
	(eazel_installer_initialize):

	Add conflict check handler; fix 50% bug prior to downloading.

2001-02-09  John Sullivan  <sullivan@eazel.com>

	Fixed problems I ran into while trying to fix bug 5903,
	which is about making "Tighter Layout" sensitive even
	in manual layout, since it affects "Clean Up by Name"

	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_set_tighter_layout): Don't
	re-sort when tighter layout setting changes if not
	in auto_layout mode.
	
	* src/file-manager/fm-icon-view.c: 
	(handle_radio_item): Don't assume that every id passed
	to this routine is a sort ID; it might be a toggle
	button's id. Use get_sort_criterion_by_id to distinguish.
	(update_layout_menus): Added FIXME comment explaining
	why "tighter layout" is insensitive in manual layout.
	(set_sort_criterion_by_id): Check whether passed id is
	a valid sort criterion; don't try to sort if not.

2001-02-09  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	Fix for 6190, reuse check_if_related. If a package being revived
	is related to the broken (related by name and version diff), don't
	ask softcat for an update, but ask for an exact version.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-logic.c:
	* components/services/install/lib/eazel-install-logic.h:
	* components/services/install/lib/Makefile.am:
	Removed rpm-glue and logic.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(is_satisfied), (check_if_related_package), (check_tree_helper),
	(download_packages):
	is_satisfied checks name!=null before doing is_installed.
	check_tree_helper now uses check_if_related before doing the
	softcat_available_update. If the packages are related, use
	get_info to get an exacat version (sense=EQ).
	Moved check_if_related here
	Output tuning...
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_emit_download_progress):
	Woops, undid a comment about bug 6425
	
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_available_update):
	Indention...

2001-02-08  John Harper  <jsh@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	Fix bug 4423 (when a folder that is expanded in the tree view
	is renamed, it collapses)

	* components/tree/nautilus-tree-model.h,
	components/tree/nautilus-tree-model.c: added a new signal
	`node_being_renamed'. Has two arguments, the old and new URIs

	(report_node_changed): when the node is being renamed, use
	report_node_removed_internal instead of report_node_removed so
	we can avoid emitting the `node_removed' signal. Before doing
	this, emit the new `node_being_renamed' signal

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_insert_model_node): if the node is already
	inserted in the tree, call nautilus_tree_view_update_model_node

	(nautilus_tree_view_model_node_renamed_callback): connected to
	the `node_being_renamed' signal, propagates the expansion state
	from the old URI to the new one

	Fix bug 4421 (Delete file while folder collapsed -> not
	reflected in Tree View)

	* components/tree/nautilus-tree-model.c
	(nautilus_tree_model_monitor_node): if the node being monitored
	is a directory, check if any of the files we think it contains
	got moved away (e.g. while the node was collapsed)

2001-02-09  Andy Hertzfeld  <andy@eazel.com>

	* icons/i-directory-12.png:
	* icons/i-directory-accept-12.png:
	fixed bug 6338, folder moves to the right when highlighted,
	by tweaking the associated images
	
	* src/nautilus-sidebar-tabs.c: (nautilus_sidebar_tabs_hit_test):
	consider the tab for hit-testing even if invisible
	* src/nautilus-sidebar.c: (nautilus_sidebar_release_event):
	fixed 3538, easier way to minimize active sidebar view, by
	making it close the active view when you click on the space
	its tab formerly occupied.

2001-02-09  Arlo Rose  <arlo@eazel.com>

	* icons/Makefile.am:
	* icons/emblem-symbolic-link-12.png:
	* icons/emblem-symbolic-link-24.png:
	* icons/emblem-symbolic-link-36.png:
	Made more link icons that will work at smaller zoom levels.
	Fixes bug number 5988.

2001-02-09  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6473 (counting deep contents of folder in Properties
	window takes tons of CPU)

	Fixed by deploying a timeout, so that the displayed numbers
	only update periodically, instead of with every item count
	increment. The interval is 200 milliseconds. This makes the
	count faster as well as greatly reducing CPU thrashage by
	not pounding on the poor widdle widgets so often.

	* src/file-manager/fm-properties-window.c:
	(directory_contents_value_field_update): Changed signature
	to just take an FMPropertiesWindow, and get the other
	relevant objects from the Details struct.
	(update_directory_contents_callback): New function, updates
	field and clears timeout ID.
	(schedule_directory_contents_update): Schedules update if
	not already pending.
	(attach_directory_contents_value_field): Removed old hack
	to store the title_field in the object data of the value
	field; store value_field after creation in Details struct.
	(append_directory_contents_fields): Store title_field after
	creation in Details struct.
	(real_destroy): Remove timeout if still pending.

2001-02-09  John Sullivan  <sullivan@eazel.com>

	Fixed part of bug 6462 (two error messages after doing search
	in Red Hat 7). Now you should only get one error message.
	Rebecca gets to figure out that one.

	* src/file-manager/fm-search-list-view.c: (real_load_error),
	(fm_search_list_view_initialize_class),
	(fm_search_list_view_initialize): Now replaces function
	pointer for load_error instead of attaching to signal, to
	avoid triggering fm-directory-view's error-handling code
	(which I recently added).

2001-02-09  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6343 (timed-wait dialog is too narrow, often
	clipping dialog title)

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_callback): Enforced a minimum width for timed-wait
	windows. They look better now, and don't clip the titles
	except with extremely long titles, for which the title-writer
	should be flogged.

2001-02-09  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6453, Gnome VFS_CRITICAL received when dragging
	nautilus link icons over each other.
	
	* libnautilus-extensions/nautilus-drag.c:
	(nautilus_drag_default_drop_action_for_icons):
	
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_container_dropped_icon_feedback),
	(nautilus_icon_dnd_end_drag):

2001-02-08  Robey Pointer  <robey@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(pre_widget_initialize):

	Fix build bustage in Mozilla content view: profile_name ->
	profile_directory_name.

2001-02-08  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	This commit fixed bugs:
	5723 ei2: check that install_failed_signal was not called 
	5752 ei2: port the uninstall stuff to the new ei2 
	5753 ei2: port the revert stuff to ei2 
	5757 fix leaks in EazelProblemHander 
	5957 eazel-install cli tool no longer uninstalls nicely
	6100 RPM4: don't handle dependencies called "rpmlib(.*)"
	6173 ei2: finish conflict and feature breakage  
	6191 make revert work (ei2: resurrect transaction stuff) 
	
	* components/rpmview/nautilus-rpm-view-install.c:
	(get_detailed_errors_foreach):
	Updated for the CANCELLED status.
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_preflight_check_signal):
	Fixed an output string.
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	Added the CANCELLED status.
	uninstall_progress now has same signature as install_progress.
	
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_uninstall_progress),
	(eazel_install_callback_class_initialize):
	uninstall_progress now has same signature as install_progress.

	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_fill_from_packagedata),
	(traverse_packagetree_md5), (corba_packagedatastruct_fill_deps),
	(packagedata_from_corba_packagedatastruct),
	(packagedata_tree_from_corba_packagedatastructlist),
	(categorydata_list_from_corba_categorystructlist):
	Added the CANCELLED status.
	Commented out sending ->provides in signals.
	Added some g_asserts to find a bug.
	categorydata_list_from_corba_categorystructlist uses
	packagedata_list_from_corba_packagedatastructlist.
	
	* components/services/install/lib/eazel-install-logic.h:
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_start_transaction), (dump_one_package),
	(compare_break_to_package_by_name),
	(eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse):
	Threw out most of the old code. Keeping logic.c untill 6190 is
	closed.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(dump_tree_helper), (check_md5_on_files), (is_satisfied),
	(check_tree_helper), (execute), (set_toplevel),
	(get_packages_with_mod_flag), (check_uninst_vs_downgrade),
	(debug_revert), (compare_break_to_package_by_name),
	(eazel_uninstall_upward_traverse),
	(eazel_uninstall_check_for_install), (eazel_uninstall_globber),
	(install_packages), (uninstall_packages), (revert_transaction):
	Moved revert and uninstall into logic2.c and updated them
	appropriately.
	Added paranoia check in case bad xml dependency has a version but
	an senseless sense.
	When reviving, set parent->topleve to TRUE, not revived package.
	Revived the transaction stuff (for revert).
	Don't allow a package to depend on a package of the same name,
	this is often a problem during softcat updates.
	
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_finalize), (eazel_install_start_signal),
	(eazel_install_end_signal), (eazel_install_progress_signal),
	(eazel_install_failed_signal), (eazel_install_class_initialize),
	(eazel_install_initialize), (eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_revert_transaction_from_xmlstring),
	(eazel_install_do_transaction_save_report_helper),
	(eazel_install_save_transaction_report),
	(eazel_install_init_transaction),
	(eazel_install_emit_uninstall_progress),
	(eazel_install_emit_uninstall_progress_default),
	(eazel_install_emit_download_progress):
	uninstall_progress now has same signature as install_progress.
	Fixed some dumb bugs in install/uninstall progress emission.
	Added some lists to check on install status.
	Moved some of the transaction stuff from logic.c here.
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach),
	(get_detailed_uninstall_messages_foreach),
	(get_detailed_cases_foreach),
	(get_detailed_uninstall_cases_foreach),
	(eazel_install_problem_tree_to_case),
	(eazel_install_problem_tree_to_string),
	(build_categories_from_problem_list):
	Updated again for the new PackageBreaks objects.
	Fixed so cli uninstall works nice again.
	Added the CANCELLED status.
	The problem handler is deteriorating, either we use it or we scrap
	it.
	
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(rpmmonitorpiggybag_new),
	(eazel_package_system_rpm3_set_mod_status),
	(monitor_rpm_process_pipe_percent_output),
	(eazel_package_system_rpm3_packagedata_fill_from_header),
	(eazel_package_system_rpm3_set_state),
	(eazel_package_system_rpm3_execute), (check_if_all_packages_seen),
	(eazel_package_system_rpm3_install_uninstall):
	Don't spam about the locales decimal seperator.
	Set modification status after handling a package, so transaction
	logs make sense.
	Don't accept requirements of type "rpmlib(.*".
	Ability to set all packages to CANCELLED if root helper failed
	login.
	If TEST is set, fake success all the time.
	
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system-types.c:
	(categorydata_new), (categorydata_destroy_foreach),
	(packagedata_status_enum_to_str),
	(packagedata_status_str_to_enum):
	Added the CANCELLED status.
	Improved the debug strings for alloc/dealloc of category data
	structures.
	
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_install):
	If TEST, disable FORCE.

2001-02-08  John Harper  <jsh@eazel.com>

	Fixed bug 6044 (Druid should be clearer on what the right
	choice is for proxy users)

	* src/nautilus-first-time-druid.c (set_up_update_page): added
	the text `If you know your computer uses a proxy connection,
	click Yes and Nautilus will use it.' to the middle of the label

	Fixed bug 5656 (First time druid should bail out at startup if
	it cannot create .nautilus and Nautilus directories)

	* src/nautilus-application.c (nautilus_application_startup):
	moved the call to check_required_directories () before that to
	nautilus_first_time_druid_show ()

2001-02-08  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* components/mozilla/main.c: (mozilla_process_delayed_exit),
	(mozilla_object_destroyed), (mozilla_make_object), (main):

	Bug 6328 -- Mozilla processes are now kept around for 30
	minutes after last used, so that re-activation is much faster.
	Navigating to and from web pages in Nautilus is much less agonizing
	now.

2001-02-07  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Rebecca Schulman  <rebecka@eazel.com>

	This change is needed to enable the bonobo-level fix to Nautilus
	bug 6023 (throbber and proxy processes still around after Nautilus
	is quit). The throbber was unreffing itself on destroy, which is
	wrong. However, Bonobo was leaking a reference to any toolbar
	control item, so the two bugs were masking each other.
	
	* components/throbber/nautilus-throbber.c
	(nautilus_throbber_destroy): Remove incorrect unref.
	(nautilus_throbber_initialize): Formatting tweaks

2001-02-08  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-gnome-extensions.c:
	(widget_destroy_callback), (icon_selected_callback),
	(icon_cancel_pressed):
	fixed bug 6458, crash if you quickly press cancel after pressing
	OK in the icon picker; fixed by setting a boolean once the
	picker has been dismissed, and checking it so we don't do it twice.
	
2001-02-08  Andy Hertzfeld  <andy@eazel.com>
	
	* src/nautilus-location-bar.c,h: (get_file_info_list),
	(try_to_expand_path), (editable_key_press_callback),
	(real_activate), (destroy), (nautilus_location_bar_initialize),
	(nautilus_location_bar_new), (nautilus_location_bar_set_location),
	(nautilus_location_bar_get_location),
	(nautilus_location_bar_update_label):

	fixed bug 6369, sluggish keyboard response in location bar. I improved
	this in two different ways: the expansion code is deferred to idle
	time now, so it doesn't get in the way of fast typing.  Also, the
	file info list is cached in memory, so it doesn't have to load it
	again for every keystroke.  I also made the instance variables
	private, instead of being exposed in the .h file.
	
2001-02-08  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_downloading),
	(nautilus_service_install_preflight_check),
	(previous_install_finished), (nautilus_service_install_installing),
	(nautilus_service_install_done),
	(nautilus_service_install_view_update_from_uri_finish):

	Change texts to match Vera's refinements.

2001-02-08  Robey Pointer  <robey@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (generate_change_password_form),
	(change_password_button_cb):

	Stick the password panels in a viewport so they'll have
	opportunistic scrollbars.

2001-02-08  John Sullivan  <sullivan@eazel.com>

	Fixed bug 5946 (minimum Nautilus window size is too large)

	* src/nautilus-window-private.h: Made the minimum window
	size much much smaller. This exposes layout problems in
	some of the bars & such at very small sizes, but none of
	these layout problems seem like 1.0 show-stoppers. Better to
	allow the user who wants to use a stripped-down window at
	minimum size do so than to prevent this because it looks bad
	with some bars showing. Note that other Linux apps don't stop
	you from reducing the window down to nothing at all (the
	Nautilus limit is somewhat larger than "nothing at all").

	* src/nautilus-switchable-search-bar.c:
	(nautilus_switchable_search_bar_new): With Rebecca's OK,
	changed "Search For:" to "Find:" in order to save precious
	horizontal screen real estate.

2001-02-08  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Mike Engber <angber@eazel.com>

	Fixed bug 3087, gmc to Nautilus transition tool
	
	Added all features except removing gmc from session. Will
	need some additional help to add that feature.
	
	* libnautilus-extensions/nautilus-global-preferences.h:
	Add a preferences constant to indicate if Nautilus should
	respawn in the Gnome session.
	
	* src/nautilus-application.c: (nautilus_application_startup),
	(volume_unmounted_callback), (removed_from_session),
	(save_session), (set_session_restart), (init_session):
	Check preferences add add ourselves to session with a respawn
	setting if the user has specified that they wish such behavior.
	
	* src/nautilus-first-time-druid.c: (druid_finished),
	(set_up_gmc_transition_page):
	Save gmc to nautilus transition values in nautilus preferences.

2001-02-08  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: <ramiro@eazel.com>

	Significant rework of nautilus-mozilla-content-view to use
	report_location_change and to do general house-cleaning.

	Fixes following bugs:

	Bug 3547  POSTs in the mozilla component don't update the URI 
	Bug 4682, 6142  Frame sets have difficulty in Nautilus
	Bug 5461  "http://localhost:xxxx" instead of "eazel-services:" on location bar
	
	Will fix following bugs when I talk with Darin about problems
	with report_location_change:

	5592  nautilus / mozilla back button goes back 2 pages

	Also removes all module-global and static variables, making gnome-vfs
	and general state-tracking per-instance, thus eliminating latent
	bugs related to using two browsers simultainously

	Removes all special-casing for form POST's and for iframes

	Removes usage of the mozilla "open_uri" signal, which was no longer really
	being used for anything (interruption of eazel-specific schemes is done
	at the DOM event level, notification to Nautilus of navigation is done
	as a result of the "location" signal

	Introduces/aggravates these bugs:

	6435	No history recorded when using report_location_change
	6436	Throbber doesn't throb when using report_location_change

	I'll wait until Darin returns to figure out solutions to this.

	* components/mozilla/Makefile.am:
	* components/mozilla/main.c: (main):
	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/mozilla-events.h:
	* components/mozilla/nautilus-mozilla-content-view.c:
	* components/mozilla/nautilus-mozilla-content-view.h:

2001-02-08  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-gnome-extensions.c:
	(icon_selected_callback), (nautilus_gnome_icon_selector_new):
	fixed bugs 6437 and 6438 by testing for a directory selected
	instead of a file in the icon selector, and putting up an error
	dialog in that case instead of invoking the callback with the
	directory path.
	
2001-02-08  Pavel Cisler  <pavel@eazel.com>
	
	Fix 6401 (Create Link yields "You cannot link a file to itself"
		  error)
	* libnautilus-extensions/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move):
	Remove a confused link to self check.
	Pass the GNOME_VFS_XFER_USE_UNIQUE_NAMES option to xfer.

2001-02-08  Fatih Demir	<kabalak@kabalak.net>

	* components/services/install/lib/eazel-package-system-rpm3.c:
	Include locale.h as you use localeconv() without including
	it -- bad on debian...

2001-02-08  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* src/nautilus-sidebar-title.c:
	(nautilus_sidebar_title_size_allocate): Found useful
	optimization while investigating sidebar flashiness:
	now it only recomputes the sidebar font in
	size_allocate if the width actually changed.

2001-02-08  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: updated to note that
	/usr/share/hyperbola/maps/*.map have moved to
	/usr/share/nautilus/components/hyperbola/maps/*.map

2001-02-08  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6421 (Labels for permissions should look insensitive
	when permissions are not settable)

	* src/file-manager/fm-properties-window.c:
	(add_permissions_column_label), (create_permissions_page):
	Pass file parameter into add_permissions_column_label,
	set insensitive if can't set permissions.

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_string_attribute_with_default):
	Use "--" as item count string instead of "..." when
	the preference is set to not display the item counts.
	("..." implied that it would show up eventually, not 
	true in this case.)
	
2001-02-08  Laszlo Kovacs  <laszlo.kovacs@sun.com>

	* components/help/Makefile.am:
	Man page map file moved to new hyperbola data
	directory.

	* components/help/hyperbola-filefmt.c:
	Compiler warnings fixed

2001-02-08  Laszlo Kovacs  <laszlo.kovacs@sun.com>

	* components/help/hyperbola-filefmt.c:
	Toplevel document support added. Docs specified in
	$(prefix)/share/nautilus/components/hyperbola/topleveldocs.xml
	will be added to the toplevel section of the help tree if
	Scrollkeeper is enabled
	
	* components/help/Makefile.am:
	topleveldocs.xml installed and hyperbola data directory
	changed to $(prefix)/share/nautilus/components/hyperbola

	* components/help/topleveldocs.xml:
	new xml file holding the docs that go into the toplevel
	section of the help tree

2001-02-07  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(expand_package_suites), (install_packages):

	Do a softcat query for any suite ids in the initial package list,
	so they're expanded first and then all future queries will return
	single packages.
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_emit_preflight_check):

	Don't restrict the preflight signal to toplevel packages anymore:
	we send the whole package tree now so no editing is necessary.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(osd_parse_provides), (osd_parse_shared):

	Softcat server has started filling in the sense flag differently
	(without notice, I might grumpily add), so handle both types now
	and whine if we can't figure out how to decode it.  Log the
	softcat DB version now (eventually should store it somewhere).
	
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_error_string), (eazel_softcat_query),
	(eazel_softcat_get_info), (eazel_softcat_available_update):
	* components/services/install/lib/eazel-softcat.h:

	Split up the handling for single-package softcat queries and
	multi-package suite queries.
	
	* components/services/install/nautilus-view/main.c:
	(service_install_make_object), (main):

	Remove redundant 2nd ammonite_init call and a long-since useless
	printf from object creation.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_downloading),
	(flatten_package_tree_foreach), (nautilus_service_install_done),
	(nautilus_service_install_failed):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:

	Clean up final dialog text generation, and only ask about deleting
	RPMs if the user level is "advanced".  Also don't ask if no files
	were even downloaded.
	
2001-02-07  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Mike Fleming <mfleming@eazel.com>
	Minus the 2 new widgets.
		
	* libnautilus-extensions/Makefile.am:
	New files.

	* libnautilus-extensions/nautilus-labeled-image.h:
	* libnautilus-extensions/nautilus-labeled-image.c:
	(button_leave_callback), (button_focus_out_event_callback),
	(nautilus_labeled_image_check_button_new): Add workaround for
	rendering problems with GtkCheckButton.
	(nautilus_labeled_image_set_label_never_smooth): New function to
	make the label part possibly never smooth.

	* libnautilus-extensions/nautilus-clickable-image.h:
	* libnautilus-extensions/nautilus-clickable-image.c:
	(ancestor_button_press_event), (ancestor_button_release_event),
	(nautilus_clickable_image_new),
	(nautilus_clickable_image_new_from_file_name): New function to
	create clickable images from image files.  Add grab/ungrab calls
	to match the logic in GtkButton.

	* libnautilus-extensions/nautilus-wrap-table.h:
	* libnautilus-extensions/nautilus-wrap-table.c:
	New class.
	
	* libnautilus-extensions/nautilus-image-table.c:
	* libnautilus-extensions/nautilus-image-table.h:
	New class.

	* test/test-nautilus-image-table.c:
	* test/.cvsignore:
	* test/Makefile.am:
	Image table test.
	
2001-02-07  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_start_signal):

	Remove break that caused 0% signals to never get sent on install.

	* components/services/install/lib/eazel-package-system-rpm3.c:
	(rpmmonitorpiggybag_new), (make_rpm_argument_list),
	(monitor_rpm_process_pipe_percent_output),
	(monitor_rpm_process_pipe), (monitor_subcommand_pipe),
	(manual_rpm_command), (eazel_package_system_rpm3_execute):

	Make percent a float for more accurate byte counts.  Give the IO
	channel a lower priority than normal, so that it doesn't outrank X
	refresh events (though this doesn't help much).  Reinsert the
	manual RPM execute from the old logic.c code.
	
	* nautilus-installer/src/installer.c: (insert_info_page),
	(eazel_install_progress), (eazel_download_progress),
	(get_detailed_errors_foreach_dep), (get_detailed_errors_foreach),
	(get_detailed_errors), (collect_failure_info),
	(eazel_install_preflight):
	* nautilus-installer/src/installer.h:

	Remove fixed "max assumed download" size and try to set it to the
	total bytes expected.  For some reason this still fails sometimes
	but at least it's on the right track.  Stop calling
	gtk_main_iteration from inside the install progress callback since
	that interacts horribly with the IO channel crap.  Getting
	detailed errors should avoid recursing, and should follow the
	depends struct instead of the old soft_depends one.
	
	* nautilus-installer/src/link.sh:

	Test for RPM4 build (should build now, but still not work due to
	lingering code that refuses to try under RPM4).
	
	* nautilus-installer/src/package-tree.c: (get_errant_children_int),
	(get_errant_children), (package_customizer_fill):

	Fix up tree tracing routines to avoid recursing and to use the new
	struct members instead of the old (now empty) ones.
	
2001-02-07  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 6405 (seg fault right-double-clicking when context
	menu is already showing)

	* libnautilus-extensions/nautilus-icon-container.c:
	(handle_icon_button_press): Don't create context-menu callback
	if one is already pending; don't let right-double-click activate.
	
	* src/file-manager/nautilus-directory-view-ui.xml: Added underscore
	accelerator for Show Trash, which didn't have one.

2001-02-07  Ian McKellar  <ian@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_update_from_uri), (nautilus_rpm_view_load_uri),
	(rpm_view_load_location_callback):
	* components/rpmview/nautilus-rpm-view.h:
	If an RPM load fails then report it to Nautilus with:
	nautilus_view_report_load_failed,

	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_packagedata_fill_from_header),
	(rpm_packagedata_fill_from_file):
	If an RPM load fails then report it to the caller.

	* components/services/trilobite/libtrilobite/trilobite-core-network
	.c: (trilobite_open_uri):
	Changed the unsafe `setenv' call to the safer `trilobite_setenv'.

2001-02-07  Ian McKellar  <ian@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* components/services/inventory/eazel-inventory-collect-hardware.c:
	(add_device_property), (eazel_inventory_collect_pci),
	(remove_trailing_whitespace), (ide_get_value),
	Separated whitespace removal into a separate function.

	(eazel_inventory_collect_usb), (eazel_inventory_collect_scsi),
	(eazel_inventory_collect_hardware):
	Added USB and SCSI bus scanning. Bugs: 5094, 6285.

2001-02-07  Pavel Cisler  <pavel@eazel.com>

	reviewed by: John Sullivan  <sullivan@eazel.com>

	Fix 6380 (** ERROR ** in trash_callback_destroy when
	          navigating to trash)
	* libnautilus-extensions/nautilus-trash-file.c:
	(trash_callback_destroy), (trash_file_call_when_ready):
	Add a missing ref and unref.

2001-02-07  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5967, Music View slider is narrow in Eazel GTK theme
	
	Attempt to layout using Arlo's design.
	
	* components/music/nautilus-music-view.c:
	(music_view_set_selected_song_title), (add_play_controls),
	(nautilus_music_view_update),
	(music_view_background_appearance_changed_callback):

2001-02-07  Robin * Slomkowski  <rslomkow@eazel.com>

	* README: updated to note using the gnome-vfs-1 branch

2001-02-07  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 6281, property browser should user gnome icon
	selection UI for adding patterns and emblems instead of
	generic file browsing
	
	* libnautilus-extensions/nautilus-gnome-extensions.c,h:
	(nautilus_gnome_open_terminal), (widget_destroy_callback),
	(icon_selected_callback), (icon_cancel_pressed),
	(list_icon_selected_callback), (entry_activated),
	(nautilus_gnome_icon_selector_new):
	moved code to integrate icon picking UI from the properties
	window into gnome-extensions, so other parts of nautilus can
	use it.
	
	* src/file-manager/fm-properties-window.c: (set_icon_callback),
	(select_image_button_callback):
	moved icon picking code out of properties window, but call it
	from here instead.
	
	* src/nautilus-property-browser.c: (nautilus_emblem_dialog_new),
	(add_pattern_to_browser), (add_new_pattern),
	(emblem_dialog_clicked):
	use icon picking code in property browser to pick patterns, and
	rework the emblem dialog to use gnome-icon-entry.
	
2001-02-07  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Robin Slomkowski <robin@eazel.com>
	
	Fixed bug 6389, Extremely poor performance when
	autodir automounter is present
	
	Detect special NFS autofs directories and filter them out
	of the mount list.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(get_removable_volumes), (mount_volume_activate_nfs),
	(mount_volume_activate), (get_current_mount_list),
	(mount_volume_nfs_add), (mount_volume_add_filesystem):

	Worked on cleaning up placement of icons on the edges
	of the desktop based on input from Arlo.
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(icon_set_position):
		
2001-02-07  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6363, "Set Cover Image" button assumes
	fixed font height.
	
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize):
	Remove call to get_widget_set_usize
	
2001-02-07  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(show_hidden_files_changed_callback),
	(show_backup_files_changed_callback),
	(get_filter_options_for_directory_count):
	* libnautilus-extensions/nautilus-file.c:
	(show_text_in_icons_changed_callback),
	(show_directory_item_count_changed_callback),
	(get_speed_tradeoff_preference_for_file),
	(nautilus_file_should_show_directory_item_count),
	(nautilus_file_should_get_top_left_text):
	* libnautilus-extensions/nautilus-theme.c:
	(theme_changed_callback), (nautilus_theme_get_theme),
	(nautilus_theme_get_theme_data), (nautilus_theme_get_image_path):
	* src/file-manager/fm-directory-view.c:
	(confirm_trash_changed_callback), (real_update_menus):
	* src/file-manager/fm-icon-text-window.c:
	(icon_captions_changed_callback),
	(fm_get_text_attribute_names_preference_or_default):
	Use calllbacks for some preferences values instead of peeking
	diectly.  The preferences in question here are peeked a lot during
	large directory loads, even though they hardly ever change.  This
	should get preferences stuff mostly out of Pavel's profiles.  Now,
	im still working on bug 6054 which is about making peeking
	preferences in general faster.

2001-02-06  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Mike Fleming <mfleming@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(dequeue_pending_idle_callback), (mime_list_one):
	Handle the case where mime types don't get returned.

	* libnautilus-extensions/nautilus-file.c:
	Fix a comment.

2001-02-06  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_do_component_query):
	fixed bug 5479, two "View as Text" items in "View as Other"
	dialog list, by special casing the sample text component so
	it doesn't get added to the list.
	
2001-02-06  Arik Devens  <arik@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	Fixed bug 5919, Preferences dialog jumps around the screen.
	
	* libnautilus-extensions/nautilus-preferences-dialog.c:
	(nautilus_preferences_dialog_construct): Removed the center
	positioning so that the dialog stays where the user put it.

2001-02-06  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 1736, if icons on desktop are offscreen, need to
	move them somewhre on screen.
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(icon_set_position), (nautilus_icon_container_move_icon):
	icon_set_position may modify the x and y location of the
	icon.  nautilus_icon_container_move_icon should use the
	modified position instead of the original x and y postion
	when writing the position out into the metafile.

2001-02-06  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-properties-window.c:
	(widget_destroy_callback), (icon_selected_callback),
	(icon_cancel_pressed), (list_icon_selected_callback),
	(entry_activated), (select_image_button_callback):
	fixed bug 6280, custom icon selection should use gnome-icon-sel
	instead of the generic file browser, so now it does.
	 
2001-02-06  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Michael Engber  <engber@eazel.com>

	* src/nautilus-sidebar.c: (nautilus_sidebar_initialize_class),
	(nautilus_sidebar_size_allocate), (nautilus_sidebar_realize):
	Tell X not to clear the window contents when the sidebar is
	resized.  Since we double buffer its contents, this will reduce
	(but not eliminate) flicker in the sidebar.
	
2001-02-06  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Laszlo Kovacs  <laszlo.kovacs@sun.com>

	Fixed bug 795 (help component installs files in nautilus prefix,
	but uses gnome-libs prefix to find them later) by expanding the
	set of places Nautilus looks for help files.

	* components/help/hyperbola-filefmt.c:
	(fmt_man_populate_tree_for_subdir): Changed to look in more places
	for help files: the help directory in the gnome prefix, the help
	directory in the nautilus prefix, and directories in GNOME_PATH.
	(fmt_help_populate_tree): New helper function.
	(append_help_dir_if_exists): New helper function.

	* components/help/Makefile.am: Define DATADIR in compile flags.

	* components/help/hyperbola-main.c: Add copyright notice.

	This part not reviewed:

	* .cvsignore, libnautilus-extensions/.cvsignore: gnore more
	things.

	* Makefile.am: distribute .in versions of xml-i18n-tools.
	
2001-02-06  John Sullivan  <sullivan@eazel.com>

	Fixed bug 5157 (Nautilus won't display directories for
	which it thinks it doesn't have permissions)

	I removed the code that prevented Nautilus from even
	trying to load a location for which the perceived
	permissions didn't allow reading (because the perceived
	permissions can be wrong with some file systems). Now
	it always tries, and puts up an error dialog only if
	it gets an error while actually loading the directory.

	* src/file-manager/fm-error-reporting.h:
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_loading_directory): New function, currently
	only handles GNOME_VFS_ERROR_ACCESS_DENIED and a fallback
	default case.
	(fm_report_error_renaming_file), (fm_report_error_setting_group),
	(fm_report_error_setting_owner),
	(fm_report_error_setting_permissions), (rename_callback):
	All the report_error functions now take a parent-window
	parameter (which is often NULL). Also, they now all use
	gnome_vfs_error_result_to_string when whining about
	unhandled cases.

	* src/file-manager/fm-directory-view.h: Changed comments
	and copyright notice only.
	* src/file-manager/fm-directory-view.c:
	(real_load_error): New function, calls 
	fm_report_error_loading_directory unless an error has already
	been reported for the current directory load operation.
	(fm_directory_view_initialize_class): Wire up real_load_error
	as default handler for LOAD_ERROR signal.
	(activate_callback): Pass parent window to error-reporting call.
	(load_directory): Reset the reported_load_error boolean since
	we're about to load anew.
	
	* src/file-manager/fm-properties-window.c: (rename_callback),
	(group_change_callback), (owner_change_callback),
	(permission_change_callback):
	Pass parent window to error-reporting-calls. I just passed NULL
	if it was not trivial to pass a good window.

	* src/nautilus-window-manage-views.c: 
	(handle_unreadable_location), (open_location): Remove code that
	was preventing "unreadable" locations from being loaded.

2001-02-06  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6375, Certain menu shortcuts don't work when
	insertion point is in location bar.
	
	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_key_press):
	Filter out alt and control keyboard events and don't
	allow them to be passed to the parent GtkEntry.
	
2001-02-06  John Sullivan  <sullivan@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Fixed bug 6365 (Crash at boot if invalid file name given)

	* src/nautilus-window-manage-views.c:
	(load_new_location_in_all_views): Added some parameter checking
	to make future bugs like this even easier to find.
	(cancel_location_change): Don't reset to old location when old
	location is NULL.

2001-02-05  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Seth Nickel <seth@eazel.com>

	Fix 5930 (Copy dialog often shows "1" as total number of
		  fields in operation)

	* libnautilus-extensions/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_update),
	(nautilus_file_operations_progress_new_file):
	* libnautilus-extensions/nautilus-file-operations.c:
	(create_transfer_dialog):
	Special case the preparing to copy/move phase -- when the
	bytes_total is 0, don't display the count.
	
	* libnautilus-extensions/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_thaw):
	Formatting.

	* HACKING:
	Tiny tweak.

2001-02-05  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_file_conflict_check_signal),
	(eazel_file_uniqueness_check_signal),
	(eazel_feature_consistency_check_signal), (main):
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_file_conflict_check), (impl_file_uniqueness_check),
	(impl_feature_consistency_check), (eazel_install_callback_get_epv),
	(eazel_install_callback_class_initialize):
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-logic2.c:
	(check_no_two_packages_has_same_file),
	(check_conflicts_against_already_installed_packages),
	(check_feature_consistency):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_class_initialize),
	(eazel_install_emit_file_conflict_check),
	(eazel_install_emit_file_conflict_check_default),
	(eazel_install_emit_file_uniqueness_check),
	(eazel_install_emit_file_uniqueness_check_default),
	(eazel_install_emit_feature_consistency_check),
	(eazel_install_emit_feature_consistency_check_default):
	Fixed bug 3459 (emit signals when doing file-conflict,
	feature-consistency and file-uniqueness checks).
	
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_get_readable_name):
	Nyll poynter checking.

2001-02-05  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6359 (Choosing current view from "View as" menu crashes)

	* src/nautilus-window-manage-views.c:
	(nautilus_window_content_view_matches_iid): New function, extracted
	from load_content_view, checks whether passed iid is the one in
	use by this window.
	(load_content_view): Now calls extracted function.
	(nautilus_window_set_content_view): Bail out early if the
	new content view is the old one. This avoids unpleasant crashing
	later on.

2001-02-05  Gene Z. Ragan  <gzr@eazel.com>

	Add code to send the mime type of the file being examined to the
	mime type capplet so that the capplet can scroll to the mime type
	being examined.
	
	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list), (launch_mime_capplet),
	(launch_mime_capplet_and_close_dialog),
	(nautilus_program_chooser_show_no_choices_message):

2001-02-05  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed part of bug 6329 (entering "gconf://" as location
	crashes Nautilus). After this fix, it still crashes Nautilus,
	but in a gconf-specific way.

	* src/nautilus-window-manage-views.c:
	(load_new_location_in_all_views): Don't try to load
	a location in new_content_view if it's NULL.

2001-02-05  John Sullivan  <sullivan@eazel.com>

	reviewed by: Mike Fleming <mfleming@eazel.com>

	Fixed bug 6324 (Switching views crashes every time)
	
	* src/nautilus-window-manage-views.c:
	(set_to_pending_location_and_selection): Added assert
	to make future similar bugs even easier to catch.
	(view_loaded_callback): Don't call set_to_pending_location_and_selection
	when the content view is changing without the location & selection 
	changing; just update the one view instead.

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	Reduced the timed-wait timeout from 3 seconds to 2 after
	more investigation of timed-wait-related bugs. 3 seconds
	just felt a little too long.

2001-02-05  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-metafile-factory.c:
	(nautilus_metafile_factory_new), (free_factory_instance),
	(nautilus_metafile_factory_get_instance):
	* libnautilus-extensions/nautilus-metafile-factory.h:
	* src/Nautilus_shell.oaf.in:
	* src/nautilus-application.c: (manufactures), (create_object),
	(nautilus_application_startup):
	* src/nautilus-application.h:
	Add the MetafileFactory to the main object factory.

2001-02-05  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_get_default_component_sort_conditions),
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_components_for_file):
	Changes to make sure the short list is sorted 
	correctly, so the correct default application is chosen.

2001-02-05  Andy Hertzfeld  <andy@eazel.com>

	* librsvg/rsvg.c: (rsvg_render_svp):
	fixed bug 6301, bad svg crashes Nautilus, by adding a check
	in rsvg_render_svp to make sure a pixbuf has been allocated; if
	not, don't try to render.
	
2001-02-05  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6321 (Apparently arbitrary item initially selected
	in "Open with Other" dialog)

	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list): Select first item in list after sorting.

2001-02-04  Ian McKellar  <ian@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>	

	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-package-system-dpkg.c:
	(debpackage_free), (debpackage_fill_packagedata),
	(strip_trailing_whitespace), (parse_packages),
	(load_package_callback), (eazel_package_system_dpkg_load_package),
	(query_callback), (eazel_package_system_dpkg_query),
	(eazel_package_system_dpkg_install),
	(eazel_package_system_dpkg_uninstall),
	(eazel_package_system_dpkg_verify),
	(eazel_package_system_dpkg_compare_version),
	(eazel_package_system_dpkg_finalize),
	(eazel_package_system_dpkg_class_initialize),
	(eazel_package_system_dpkg_initialize),
	(eazel_package_system_dpkg_get_type),
	(eazel_package_system_dpkg_new),
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-dpkg.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_suggest_id),
	(eazel_package_system_load_implementation):
	Created a minimal, sub-functional Debian package backend for 
	libeazelinstall - essentially only enough to allow me to test my
	software inventory work on my Debian machines.

	* components/services/inventory/Makefile.am:
	* components/services/inventory/eazel-inventory-collect-hardware.c:
	(add_device_property), (eazel_inventory_collect_pci),
	(ide_get_value), (eazel_inventory_collect_ide), (str_has_prefix),
	(add_info), (read_proc_info), (eazel_inventory_collect_memory),
	(eazel_inventory_collect_cpu), (eazel_inventory_collect_hardware):
	* components/services/inventory/eazel-inventory-collect-hardware.h:
	* components/services/inventory/eazel-inventory-collect-software.c:
	(str_has_prefix), (get_package_list),
	(eazel_inventory_collect_packages),
	(eazel_inventory_collect_software):
	* components/services/inventory/eazel-inventory-collect-software.h:
	* components/services/inventory/eazel-inventory-utils.c:
	(eazel_create_configuration_metafile):
	Moved software inventory code into eazel-inventory-collect-software.c
	and hardware inventory code into eazel-inventory-collect-hardware.c.
	Added coded to collect PCI and IDE bus information.

	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.c: (determine_suse_version), (determine_debian_version):
	Added version check code for SuSE and Debian.

2001-02-04  Jason Leach  <jasonleach@usa.net>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>	
	
	* nautilus-clean.sh: Update to work with Solaris.

2001-02-04  Maciej Stachowiak  <mjs@eazel.com>

	* indent.sh: Script that calls indent with the right parameters to
	get a GNOME coding style (Nautilus subvariant).

	* components/help/hyperbola-filefmt.c,
	components/help/hyperbola-filefmt.h,
	components/help/hyperbola-main.c,
	components/help/hyperbola-nav-index.c,
	components/help/hyperbola-nav-search.c,
	components/help/hyperbola-nav-tree.c,
	components/help/hyperbola-nav.h,
	components/help/hyperbola-types.h: Run indent.sh on these.

2001-02-03  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6254 ("Display" name for grouping in "Folder Views"
	category is poor)

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_create_dialog): Verafied a little text.

2001-02-03  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/throbber/Makefile.am:
	Added the oaf.in files to EXTRA_DIST (tinderbox fix)

2001-02-03  Gene Z. Ragan  <gzr@eazel.com>

	Do a simple check for NULL instead of using
	g_return_if_fail.  We don't need the error
	reported to the terminal.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(get_removable_volumes), (volume_is_removable),
	(volume_is_read_only):

2001-02-02  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (tree_helper_helper), (tree_helper):
	Added check for PackageBreaks iterators.
	
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_install_failed):
	Leakfix, freeing the list given to the signal handler after
	handling.
	
	* components/services/install/lib/eazel-install-corba-types.c:
	(empty_hash_table),
	(packagedata_tree_from_corba_packagedatastructlist):
	Leakfix, now correctly frees the contents of the md5_hashtable and
	unrefs the proper objects.

	* components/services/install/lib/eazel-install-logic2.c:
	(eazel_install_check_existing_packages), (get_softcat_info),
	(is_satisfied), (is_satisfied_features),	
	(check_dependencies_foreach), (check_tree_helper),
	(add_file_conflict),
	(check_conflicts_against_already_installed_packages),
	(check_feature_consistency):
	Proper fillflags for some EazelPackageSystem calls.
	Nicer log-output when debug is off.
	Leak fix, the PackageBreaks "objects".
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_breaks_foreach),
	(get_detailed_messages_foreach),
	(get_detailed_cases_breaks_foreach), (get_detailed_cases_foreach):
	Updated for the new PackageBreaks "objects".
	
	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_rpm4_query_impl):
	s/packagedata_destroy/gtk_object_unref/
	
	* components/services/install/lib/eazel-package-system-types.c:
	(at_exit_package_data_info), (categorydata_new),
	(categorydata_destroy_foreach), (packagedata_finalize),
	(packagedata_class_initialize), (packagedata_initialize),
	(packagedata_get_readable_name), (packagebreaks_finalize),
	(packagebreaks_class_initialize), (packagebreaks_initialize),
	(packagefileconflict_finalize),
	(packagefileconflict_class_initialize),
	(packagefeaturemissing_finalize),
	(packagefeaturemissing_class_initialize):
	Finally got the destroy crap working for the PackageBreak
	"objects".
	More leakcheck stuff for various structures.
	Again, fixed get_reabable_name.
	
	* components/services/install/lib/eazel-package-system-types.h:
	Added finalizes to the "objects".
	Removed packagedata_destroy prototype.
	
	* components/services/trilobite/libtrilobite/Makefile.am:
	Cleanup and possible tinderbox fix.
	
2001-02-02  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-corba-types.c:
	(packagedata_tree_from_corba_packagedatastructlist):

	Fix small bug in the package tree inflater that caused break
	structs to be messed up.
	
	* components/services/install/lib/eazel-softcat.c:
	(get_search_url_for_package):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (create_package),
	(nautilus_service_install_view_update_from_uri_finish):

	Encode and decode suite_id/suite_name/product_id/product_name from
	eazel-install: urls and pass through to softcat queries.  They are
	all treated like variant flavors of suite_id internally (group of
	packages with a single id).
	
	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/installer.c:
	(get_detailed_errors_foreach), (get_detailed_errors),
	(eazel_install_preflight), (eazel_installer_set_default_texts),
	(eazel_installer_initialize):

	Remove eazel-hacking uninstall, since experts claim we no longer
	need it.  Some changes to sync up with the new world order where
	PackageData is now a GTK object.
	
	* nautilus-installer/src/package-tree.c:
	(find_package_parents_int), (find_package_parents),
	(get_errant_children_int), (get_errant_children),
	(package_customizer_fill_dep), (package_customizer_fill),
	(jump_to_package_tree_page):

	Fix the package customizer to cope with the new world order, where
	the package tree is sent across as a directed graph (instead of
	tree) and the deps are in 'depends' not 'soft_depends'.
	
	* nautilus-installer/src/prescript:

	Up version to 1.0.

2001-02-02  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 6163 (Need NautilusViewFrame ::
	report_location_changed). This is re-adding a feature we also had
	long ago, where a view reports a location change, but does not
	want the location change to come back to it in the form of a
	load_location call.

	* src/nautilus-applicable-views.h:
	* src/nautilus-applicable-views.c:
	(get_view_result_from_gnome_vfs_result), (got_file_info_callback),
	(got_minimum_file_info_callback),
	(nautilus_determine_initial_view),
	(nautilus_determine_initial_view_cancel): Changed this entire file
	to have a much easier-to-understand API.
	
	* src/nautilus-view-frame-private.h:
	* src/nautilus-view-frame-corba.c: (free_location_plus_callback):
	Change existing structure so it can be used for the location-change
	case, which includes a title too.
	(open_force_new_window): Use new structure.
	(report_location_change): Implement new call.
	(impl_Nautilus_ViewFrame_open_location_force_new_window): Use new
	structure.
	(impl_Nautilus_ViewFrame_report_location_change): Implement new
	call.
	
	* libnautilus/nautilus-view-component.idl: Add the new call.
	* libnautilus/nautilus-view.h:
	* libnautilus/nautilus-view.c:
	(nautilus_view_report_location_change): Add the new call.

	* src/nautilus-view-frame.h:
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_initialize_class): Add new signal.
	(nautilus_view_frame_report_location_change): Implement new call.
	
	* src/nautilus-window-private.h:
	* src/nautilus-window-manage-views.h:
	* src/nautilus-window-manage-views.c: (update_for_new_location):
	Got rid of obsolete assert. Also, no longer clear the selection.
	The selection is set properly earlier, and clearing it at this
	point serves no purpose.
	(location_has_really_changed): Call free_location_change to share
	more code. Also no reason to free "pending_ni" any more, because
	we don't keep it around in the success case.
	(load_new_location_in_one_view): New name.
	(load_new_location_in_sidebar_panels): New name. Also take a
	parameter of a view to skip.
	(load_new_location_in_all_views): New function.
	(set_to_pending_location_and_selection): New name, and removed
	code to handle the case where there is no pending location, since
	that doesn't happen. Also take a parameter of a view to skip. Also
	broke out the guts into load_new_location_in_all_views.
	(free_location_change): Free things by their new names. There's
	also less to free now.
	(cancel_location_change): Key off pending_location instead of
	pending_ni. Also save code by using new function that skips a
	view.
	(determined_initial_view_callback): Changed name, and use new
	interface. No longer need "end_reached" trick, because the new
	interface handles that.
	(begin_location_change): Made a static after moving all the
	functions that use it in here. Also moved some of the reload
	code out into nautilus_window_reload.
	(report_location_change_callback): New function. Does all the
	steps neede for a location change in place.
	(nautilus_window_back_or_forward), (nautilus_window_reload): Moved
	these two functions in here from nautilus-window.c so we could
	make begin_location_change more private.
	
	* src/nautilus-window.h:
	* src/nautilus-window.c: (nautilus_window_go_to): Changed the name.
	(nautilus_window_get_location): New function for callers that used
	to get the location field directly.
	(go_to_callback): Changed name.

	* src/nautilus-desktop-window.c: (nautilus_desktop_window_new):
	* src/nautilus-location-bar.c: (drag_data_received_callback):
	* src/nautilus-shell.c: (open_window), (save_window_states),
	(restore_window_states):
	* src/nautilus-window-menus.c: (services_button_callback),
	(help_menu_nautilus_manual_callback),
	(help_menu_nautilus_license_callback),
	(help_menu_nautilus_feedback_callback),
	(activate_bookmark_in_menu_item):
	* src/nautilus-window-service-ui.c: (goto_services_summary),
	(goto_online_storage), (goto_software_catalog),
	(goto_services_support):
	* src/nautilus-window.c: (location_change_at_idle_callback),
	(nautilus_window_constructed), (view_as_menu_vfs_method_callback),
	(nautilus_window_go_web_search), (nautilus_window_go_home):
	Use nautilus_go_to under its new name.
	
	* src/nautilus-shell.c: (restore_window_states): Use
	nautilus_istr_has_prefix instead of g_strncasecmp. Also did other
	code cleanup.
	
	* libnautilus-extensions/nautilus-gtk-extensions.h: Added a new
	marshal function that I needed.
	
	* libnautilus-extensions/nautilus-thumbnails.c: Added a FIXME.
	
	* libnautilus-extensions/nautilus-view-identifier.h:
	* libnautilus-extensions/nautilus-view-identifier.c:
	(nautilus_view_identifier_copy),
	(nautilus_view_identifier_compare): Use const.
	
	* src/nautilus-application.c: (nautilus_application_startup): Only
	check for root if we are actually running nautilus, not if we are
	just killing off an existing copy.
	(confirm_ok_to_run_as_root): Changed name of the function and
	improved the wording of the message and button. Also added an
	environment variable you can set to get rid of this. (Probably
	should have been a preference instead, but I am officially being
	lazy about this.)

	Fixed bug that was revealed by the change in the loading sequence
	I made. John didn't review this part:
	
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory-async.c:
	(load_directory_state_destroy), (load_directory_done):
	Separate out code to free the partly-done state so it can
	be used in the cancel case.
	(dequeue_pending_idle_callback): Ref the directory object
	so that we won't get messed up if the callback destroys it.
	(directory_load_cancel): Separated out the old part of
	file_list_cancel so that we can cancel the idle part too
	when we want to.
	(file_list_cancel): Use the new calls to cancel the idle
	part of directory loading.
	(directory_load_done): Use directory_load_cancel instead of
	file_list_cancel.
	(nautilus_directory_stop_monitoring_file_list): Use
	directory_load_cancel instead of file_list_cancel.
	(nautilus_directory_async_state_changed): Added state variables to
	protect cases where we re-enter this function.

2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Michael Engber  <engber@eazel.com>

	* applets/preferences-applet/nautilus-preferences-applet.c:
	(restart_button_clicked_callback), (main):
	Add a restart button.
	
2001-02-02  Gene Z. Ragan  <gzr@eazel.com>

	Fixed a small bug where I was assuming a value would be valid
	when it could be NULL. Now I check for NULL.
	
	* src/nautilus-application.c: (volume_unmounted_callback):

2001-02-02  Brett Neely  <brett@eazel.com>

	reviewed by: Eric Fischer  <eric@eazel.com>

	* nautilus-clean.sh:
	Kill oafd last so nautilus-clean.sh -x only needs to be run once.

2001-02-02  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>
	
	Fixed bug 5222,
	Nautilus allows users to rename .Trash (but not copy or link)
	
	* libnautilus-extensions/nautilus-file-utilities.c:
	* libnautilus-extensions/nautilus-file-utilities.h:
	(nautilus_uri_is_trash_folder):
	Utility function to indentify if the folder is trash based
	on a text uri.
	
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_can_rename):
	Call nautilus_uri_is_trash_folder to identify a trash
	folder and disallow renaming.
	
2001-02-02  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 5749 (bookmarks are untranslated)

	* data/static_bookmarks.xml:
	An earlier checkin to update the bookmarks stripped off
	all the underscores from "_name=" strings, which was what
	was causing them to be translated. Fixed by returning the
	underscores.

2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/preferences-applet/nautilus-preferences-applet.c:
	(boolean_toggle_button_new), (start_button_clicked_callback),
	(main):
	Add a Nautilus start button.  Also make the fonts smaller to
	conserver panel space.
	
2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fix bug 6131 - NautilusLabel does not support proper line wrap.
	Its fixed for smooth mode.  Theres a bug (6243) for the more
	complicated issue of wrapping in non smooth mode.

	* libnautilus-extensions/nautilus-label.h:
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_initialize_class), (nautilus_label_set_arg),
	(nautilus_label_get_arg), (nautilus_label_size_allocate),
	(nautilus_label_set_never_smooth),
	(nautilus_label_set_adjust_wrap_on_resize),
	(nautilus_label_get_adjust_wrap_on_resize):
	Add a boolean attribute 'adjust_wrap_on_resize' that controls
	whether the label will automatically update its line wrap width
	when its resized.

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (summary_view_item_label_new), (summary_load_location_callback):
	No longer need size_allocate hack.  Use NautilusLabel's
	'adjust_wrap_on_resize' attribute instead.
	
	* test/test-nautilus-label-wrapped.c: (create_nautilus_label),
	(create_gtk_label_window), (create_nautilus_label_window), (main):
	Update for 'adjust_wrap_on_resize'.
	
2001-02-01  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fix bug 4678 (Clicking on a Nautilus link file in tree view causes
	Nautilus cannot handle item type error box).
	
	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_destroy), (got_activation_uri_callback),
	(cancel_possible_activation), (tree_select_row_callback): Activate
	activation URI instead of file URI to support Nautilus links
	properly. If the link resolves to a "command:" URI, however,
	silently ignore it to avoid giving an ugly error message because
	per John Sullivan, selecting things in the tree view should not
	launch apps.

	* components/tree/nautilus-tree-view-private.h: Added
	activation_uri_wait_file field to details struct.

	* data/top/Computer, data/top/Services: Updated to new nautilus
	link format.

2001-02-02  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (flatten_package_tree_foreach):

	Fix build breakage caused by my previous checkin.

2001-02-02  Robey Pointer  <robey@eazel.com>

=======
	
	* RENAMING: Updated for some name changes and name change ideas.
	
	* user-guide/C/.cvsignore:
	* user-guide/C/html/.cvsignore:
	* user-guide/C/img/.cvsignore:
	* user-guide/C/sgml/.cvsignore:
	Added missing cvsignores.

2001-02-22  J Shane Culpepper  <pepper@eazel.com>

	* components/help/test-help-method.c: (main):

	Adding newline to make my compiler happy.

2001-02-22  Arik Devens  <arik@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 6391, nautilus crashes on certain strings set as home
	dir preference. This is actually only half the fix, for the "\"
	char i am waiting on pavel's input.
	
	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_initialize), (nautilus_entry_key_press): Removed
	tilde expand code.
	* libnautilus-extensions/nautilus-entry.h: Removed tilde_expand
	gboolean.
	* libnautilus-extensions/nautilus-preferences-item.c:
	(preferences_item_create_editable_string): Cleanup to use
	NAUTILUS_PREFERENCES_HOME_URI instead of "preferences/home_uri" as
	per ramiro's advice.
	* libnautilus-extensions/nautilus-text-caption.c:
	(nautilus_text_caption_initialize), (entry_key_press_callback),
	(nautilus_text_caption_set_expand_tilde): Added tilde_expand code
	to the text-caption for use in the preferences dialog. Much
	smarter tilde code, should handle any corner case (at least any i
	could think of).
	* src/nautilus-location-bar.c: (try_to_expand_path),
	(editable_key_press_callback), (nautilus_location_bar_initialize):
	Added handling of the ~/ case directly to the location bar instead
	of going through the NautilusEntry.

2001-02-22  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Partially fixed bug 6863 (tree view slow to load):

	* libnautilus-extensions/nautilus-ctree.c (set_node_info):
	don't sort each node in auto-sort mode
	(nautilus_ctree_set_node_info): sort each node in auto-sort
	mode, but use the function that only sorts a single node, not
	the entire branch

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_insert_model_node): temporarily turn off
	auto-sort mode while inserting nodes (do this by twiddling the
	bit by hand, since the function to set this flag automatically
	sorts the tree)

2001-02-22  Mike Fleming  <mfleming@eazel.com>

	Bug 6761: promote html help uris in the {gnome-,g,}help
	uri scheme to point to sgml files if they exist 

	* components/help/Makefile.am:
	* components/help/help-method.c: (string_ends_in),
	(strdup_string_to_substring_end), (check_sgml_promotion),
	(help_name_to_local_path), (transform_file), (help_do_transform):
	* components/help/test-help-method.c: (test_failed),
	(strcmp_tolerate_nulls), (test_uri_transform), (main):

2001-02-22  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_install_failed), (impl_uninstall_failed):

	Change direct casts to GtkObject-style casts.

	* components/services/install/nautilus-view/forms.c:
	(make_query_box):

	Vera'fy the installer text.
	
	* nautilus-installer/install-lib/Makefile.am:
	* nautilus-installer/src/Makefile.am:
	* nautilus-installer/src/create-eazel-installer.sh:

	Cause installer to be built with -g -O2, and to notice a debug
	build and not strip the binary.

	* nautilus-installer/src/installer.c: (report_unusual_errors),
	(install_failed), (uninstall_failed), (download_failed),
	(install_done):
	* nautilus-installer/src/installer.h:

	Remove crufted error-tree parsing code (install lib does this for
	us now).  Notice when any install or download fails, and treat
	that as an overall failure, even if install_done is called with
	success = TRUE.

	* nautilus-installer/src/main.c: (segv_handler), (main):

	Catch more signals, but only in debug mode.

	* nautilus-installer/src/package-tree.c:

	Remove references to nonexistent icons.
	
2001-02-22  Ian McKellar  <ian@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-test-packsys.c:
	(test_database_mtime), (main):
	* components/services/install/lib/eazel-package-system-dpkg.c:
	(load_package_callback), (query_callback),
	(eazel_package_system_dpkg_query),
	(eazel_package_system_dpkg_install),
	(eazel_package_system_dpkg_compare_version),
	(eazel_package_system_dpkg_database_mtime),
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-private.h:
	* components/services/install/lib/eazel-package-system-rpm3-private
	.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_database_mtime),
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-skeleton.c:
	(eazel_package_system_skeleton_compare_version):
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_database_mtime):
	* components/services/install/lib/eazel-package-system.h:
	Added a function to retrieve the package database modification time.

	* components/services/inventory/eazel-inventory-collect-hardware.c:
	(eazel_inventory_collect_scsi), (eazel_inventory_collect_hardware):
	Cleanups, fixes...

	* components/services/inventory/eazel-inventory-utils.c:
	(get_software_inventory), (eazel_create_configuration_metafile):
	Cache the software inventory (because the RPM query is slow).

	* user-guide/C/Makefile.am:
	Build fix for systems without scrollkeeper.

2001-02-22  Mike Fleming  <mfleming@eazel.com>

	Embedded Mozilla User Agent string "Nautilus/1.0PR3" -> "Nautilus/1.0Final"
	Trilobite version "0.2.0" -> "0.3.0" (so Trilobite user agent string
	is now "Trilobite/0.3.0" 

	* components/mozilla/nautilus-mozilla-content-view.c:
	(post_widget_initialize):
	* components/services/trilobite/libtrilobite/Makefile.am:

2001-02-22  J Shane Culpepper  <pepper@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* components/mozilla/Makefile.am:
	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(mozilla_title_changed_callback), (mozilla_js_status_callback),
	(mozilla_get_containing_window), (mozilla_new_window_callback):

	Catch mozilla or javascript trying to open a new window and
	post a nautilus warning dialog that they are not supported.
	Fix for bug #3058.  Still needs better a  worded warning message.

2001-02-22  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 6312, information about translation in the about box,
	by adding a localizable string that is displayed in the lower
	left of the about box if it's changed from the default.
	
	fixed bug 6708, support link in help menu, by changing the uri to
	the real one we want to ship with, that currently points to a
	placeholder page.  Also, due to popular demand, renamed it back
	to "Support".
	
	* src/nautilus-about.c: (nautilus_about_new),
	(nautilus_about_draw_info):
	added a translators parameter, and used it to draw the translators
	credits if present.
	* src/nautilus-about.h:
	added translator parameter to nautilus_about_new
	* src/nautilus-shell-ui.xml:
	changed menu name to "support"
	* src/nautilus-window-menus.c: (help_menu_about_nautilus_callback),
	(help_menu_support), (nautilus_window_initialize_menus):
	renamed verb to support, changed link to point to intended support site.
	
2001-02-22  Michael Engber  <engber@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* components/notes/nautilus-notes.c:
	(on_text_field_focus_out_event), (make_notes_view):
	Save notes on focus out - bug 6851.

2001-02-22  Robin * Slomkowski  <rslomkow@eazel.com>

	reviewed by: Eric Fischer <eric@eazel.com>

	* nautilus.spec.in: updated text in refrence to BUG 6853

2001-02-22  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 3321 (Finalize contents of Help menu for 1.0).
	Actually there's still an open issue about the Customer
	Service item, which I've left in for now.

	* src/nautilus-shell-ui.xml: Added Quick Reference, removed
	License, put About last after a separator.

	* src/nautilus-window-menus.c:
	(help_menu_nautilus_quick_reference_callback): New callback.
	(help_menu_nautilus_license_callback): Removed this.
	(nautilus_window_initialize_menus): Install callback for
	Quick Reference, remove for License.


	Also removed the space from "tool bar" everywhere, per the
	final decision of Vera & Rhoda. I grepped and replaced
	everywhere for "tool bar", "Tool Bar", "TOOL_BAR", and
	"tool_bar".

	* components/loser/content/nautilus-content-loser-ui.xml:
	* components/loser/sidebar/nautilus-sidebar-loser-ui.xml:
	* components/mozilla/bonobo-extensions.c:
	* components/sample/nautilus-sample-content-view-ui.xml:
	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_install_defaults),
	(global_preferences_install_visibility),
	(global_preferences_create_dialog):
	* libnautilus-extensions/nautilus-global-preferences.h:
	* src/nautilus-service-ui.xml:
	* src/nautilus-shell-ui.xml:
	* src/nautilus-window-menus.c:
	(view_menu_show_hide_toolbar_callback),
	(nautilus_window_update_show_hide_menu_items),
	(help_menu_nautilus_quick_reference_callback),
	(nautilus_window_initialize_menus):
	* src/nautilus-window-toolbars.c: (set_up_special_bonobo_button),
	(set_up_toolbar_images), (theme_changed_callback),
	(set_up_back_or_forward_toolbar_item),
	(nautilus_window_initialize_toolbars):
	* src/nautilus-window.c: (nautilus_window_constructed),
	(nautilus_window_hide_toolbar), (nautilus_window_show_toolbar),
	(nautilus_window_toolbar_showing), (nautilus_window_show):
	* src/nautilus-window.h:
	Made toolbar one word.

2001-02-22  Seth Nickell  <seth@eazel.com>

	reviewed by: Ramiro Estrugo <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-volume-monitor.c:

	Fix performance issue on Solaris by not rescanning through the
	mounttable to discover if a volume is removable, etc, but 
	rather extracting all relevant attributes in a single pass.
	
2001-02-22  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* components/mozilla/nautilus-mozilla-encoding-tables.c:
	No need to have 2 strings.  Use an array of just one string.

	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_view_create_charset_encoding_submenu):
	Replace assertion with a more robust check for NULL.

	
	reviewed by: Seth Nickell <seth@eazel.com>

	* applets/preferences-applet/nautilus-preferences-applet.c:
	(quit_nautilus_button_clicked_callback),
	(start_nautilus_button_clicked_callback),
	(restart_nautilus_button_clicked_callback),
	(exit_button_clicked_callback), (main):
	Add a exit button for the applet itself.  Renamed nautilus remote
	callbacks to be clearer.
	
	* libnautilus-extensions/nautilus-art-extensions.h:
	* libnautilus-extensions/nautilus-art-extensions.c:
	(nautilus_art_irect_is_valid),
	(nautilus_self_check_art_extensions): New functions and tests for
	checking whether a rectangle is valid.

	* libnautilus-extensions/nautilus-glyph.h: Use int instead
	of guint everywhere.
	* libnautilus-extensions/nautilus-glyph.c: (nautilus_glyph_new),
	(nautilus_glyph_free), (glyph_get_width_space_safe): New functions
	to get dimensions that work with glyphs that are just empty space.
	(glyph_get_height_space_safe), (nautilus_glyph_get_width),
	(nautilus_glyph_get_height), (nautilus_glyph_get_dimensions): Make
	these work with empty spaces.
	(glyph_is_valid), (nautilus_glyph_draw_to_pixbuf): Use libart rgba
	functions instead of doing our own alpha blending.  Allow for
	rendering glyphs with just blank spaces (noop).  Remove debug code.
	(nautilus_glyph_intersect): New function to intersect a glyph at
	some coordinates with a rectangle.

	* test/test-nautilus-glyph-simple.c: (main):
	* test/test-nautilus-glyph.c: (glyph_new), (main):
	* test/test.c: (test_pixbuf_draw_rectangle_tiled):
	More glyph tests.

2001-02-22  Dan Mueth  <dan@eazel.com>

	reviewed by: Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus.spec.in: Commenting out offensive line.
	I'm not sure where the breakage is now.  Hopefully
	I can track it down tomorrow and uncomment this.

2001-02-22  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com> (Post Mortem)

	Fix bug 6824 - Mozilla component charset encodings are not translated.
	
	* components/mozilla/Makefile.am:
	Add new encoding tables sources.  Add GNOMELOCALEDIR define to
	make gettext happy.
	* components/mozilla/main.c: (main):
	Add gettext binding setup.
	
	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_view_create_charset_encoding_submenu):
	Use the translated strings for menu labels.

	* components/mozilla/nautilus-mozilla-embed-extensions.h:
	* components/mozilla/nautilus-mozilla-embed-extensions.cpp:
	Simplified by using an stl vector instead of a GList.  Moved the
	encoding tables to their own place.   Added functions for
	obtaining the encoding titles and encoding groups as translated
	strings.
	
	* components/mozilla/nautilus-mozilla-encoding-tables.h:
	* components/mozilla/nautilus-mozilla-encoding-tables.c:
	Moved the encoding tables to their own place.

2001-02-22  Seth Nickell  <seth@eazel.com>
 
 	reviewed by: Gene Z. Ragan <gzr@eazel.com>
 
 	* acconfig.h:
 	* configure.in:
 
 	Add various mount system checks.
 	
 	* libnautilus-extensions/nautilus-cdrom-extensions.h:
 
 	Only do particular #defines for ioctl stuff if the system
 	doesn't already define them.
 	
 	* libnautilus-extensions/nautilus-volume-monitor.c:
 
 	Add Solaris compatible changes to the volume monitor, making
 	it build and function properly on Solaris.
 		
2001-02-22  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>
	
	Fixed bug 5681, Services icon on desktop may need
	better icon and text
	
	* src/nautilus-first-time-druid.c: (druid_finished):
	Change link icon to display hand.png

2001-02-22  Dan Mueth  <dan@eazel.com>

        reviewed by: Pavel Cisler <pavel@eazel.com>

	Generally, I removed old cruft, added COPYING-DOCS, added
	a new HTML doc (nautilus-quick-reference), and updated
	the build stuff and spec file as necessary.

        * COPYING-DOCS: This is the GNU FDL, similar to COPYING.  It
          should be installed with all modules with FDL'd docs.
        * Makefile.am: Added COPYING-DOCS to EXTRA_DIST
        * configure.in: Added nautilus-quick-reference 
        * help/Makefile.am: Added nautilus-quick-reference
        * help/htmldocs.make: Created this file.  This is the makefile
	  to suck in for html docs.  Be sure to use index.html as
	  your primary HTML file and put PNG images into figures/

	This stuff is Vera's new Nautilus Quick Reference doc in HTML
	format. <vera@eazel.com>  I purposefully left out two screenshots
	with the Eazel logo in them.
        * help/nautilus-quick-reference/C/Makefile.am: added
        * help/nautilus-quick-reference/C/figures/colors_small.png: added
        * help/nautilus-quick-reference/C/figures/emblems_small.png: added
        * help/nautilus-quick-reference/C/figures/ff_small.png:
        * help/nautilus-quick-reference/C/figures/find_small.png:
        * help/nautilus-quick-reference/C/figures/locbar_small.png:
        * help/nautilus-quick-reference/C/figures/menubar_small.png:
        * help/nautilus-quick-reference/C/figures/music_small.png:
        * help/nautilus-quick-reference/C/figures/sidebar_small.png:
        * help/nautilus-quick-reference/C/figures/softcat.png:
        * help/nautilus-quick-reference/C/figures/storage.png:
        * help/nautilus-quick-reference/C/figures/themes_small.png:
        * help/nautilus-quick-reference/C/index.html:
        * help/nautilus-quick-reference/C/nautilus-quick-reference-C.omf:
        * help/nautilus-quick-reference/Makefile.am:
        * help/nautilus-user-manual/C/nautilus-user-manual-C.omf: Updated
        * nautilus.spec.in: Added OMF files, Quick Ref, and COPYING-DOCS

	Removed this old stuff:
        * user-guide/C/Makefile.am: 
        * user-guide/C/html/license.html:
        * user-guide/C/img/custicon.png:
        * user-guide/C/img/full.png: removed
        * user-guide/C/img/locbar.png: 
        * user-guide/C/img/player.png:
        * user-guide/C/img/prefmenu.png:
        * user-guide/C/img/sidebar.png:
        * user-guide/C/img/viewmenu.png:
        * user-guide/C/nautilus-C.omf:
        * user-guide/C/sgml/nautilus.sgml:

	Added this notice so people don't add stuff in user-guide/
        * user-guide/NOTICE:

2001-02-22  Gene Z. Ragan  <gzr@eazel.com>
 
 	reviewed by: Pavel Cisler <pavel@eazel.com>
 
 	Fixed bug 4907, Can't drag from Nautilus to Netscape
 	
 	Fixed bug 5334, Can't drag file from Nautilus into
 	Netscape's attachment window
 	
 	Fixed bug 6563, Drag & Drop of files with non-alphanumeric
 	characters broken
 	
 	* libnautilus-extensions/nautilus-drag.c:
 	(add_one_netscape_url_list):
 	Make sure that only one item is added to the return
 	value. Netscape is only expecting one item and fails
 	if more than one item is in the list.
 	
 	(nautilus_drag_drag_data_get):
 	Rename add_one_url_list to add_one_netscape_url_list
 
 	(add_one_path_list):
 	Return a path, not a URI.
 	
2001-02-22  Arlo Rose  <arlo@eazel.com>

	* icons/hand.png:
	* icons/hand.svg:
	Added hand.png, deleted hand.svg

Thu Feb 22 04:13:13 2001  George Lebl <jirka@5z.com>

	Approval sucker: Maciej <mjs@eazel.com>

	* components/help/converters/gnome-man2html2/gnome-man2html.c
	  (scan_request): Fix bug #3334, by handling the ".' " troff request.

	* libnautilus-extensions/nautilus-directory-async.c
	  (nautilus_directory_async_state_changed): the unref could be
	  the last one, so don't access the directory afterwards.

2001-02-22  Arlo Rose  <arlo@eazel.com>

	* icons/Makefile.am:
	* icons/hand-72.png:
	* icons/hand-96.png:
	Trying to make the service icons consistent in Nautilus.
	Next stop, toolbar!

2001-02-22  Robey Pointer  <robey@eazel.com>

	reviewed by: Stephane Miller  <stephane@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line), (main):

	Remove eazel-install's restrictions on doing an upgrade and
	downgrade at the same time, since it's perfectly capable of doing
	that (covering all bases) and it's useful to labs.

2001-02-22  Arlo Rose  <arlo@eazel.com>

	* icons/druid_header.png:
	* icons/druid_header_stretch.png:
	* icons/druid_sidebar.png:
	Tweaked images in druid to use my 3D logo, and
	blue shades rather than teal.

2001-02-21  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Rebecca Schulman  <rebecka@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_medusa_blocked_changed_callback),
	(global_preferences_create_search_pane),
	(global_preferences_medusa_state_changed_callback),
	(global_preferences_install_medusa_defaults):
	Fix bug 6415 - Change what appears in the medusa preference when
	medusa becomes blocked.
	Also made the default and actual value of the MEDUSA_BLOCKED be
	correct.  The boolean value was inverted.
	
	* libnautilus-extensions/nautilus-medusa-support.c:
	(nautilus_medusa_blocked): Call medusa to find out if its blocked.
	
2001-02-21  Darin Adler  <darin@eazel.com>

	reviewed by: Mike Engber <engber@eazel.com>

	Fixed bug 6839 (Nautilus crashes with a segmentation fault when
	clicking Edit->Nautilus Themes).
	
	* src/nautilus-theme-selector.c:
	(get_theme_description_and_display_name): Make a bad URI be
	non-fatal (not really needed for bug fix).
	(populate_list_with_themes): Pass the URI for the URI parameter,
	not the local path.

	Other stuff.

	* src/nautilus-sidebar.c: (nautilus_sidebar_update_buttons): Added
	a FIXME to some questionable code.

2001-02-21  John Harper  <jsh@eazel.com>

	* src/file-manager/fm-directory-view.c (activate_callback):
	deleted unused action_type variable

2001-02-21  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug I introduced in my last sorting change (sort order
	was incorrect when nodes are first inserted):

	* components/tree/nautilus-tree-view-private.h: added an
	`inserting_node' flag field to the view details. This is used
	to tell the sorting comparison function when the nodes it's
	trying to sort haven't yet been fully initialized

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_insert_model_node): set the inserting_node
	flag around the call to nautilus_ctree_insert_node (). After
	the node is fully initialized, call
	nautilus_ctree_sort_single_node ()

	(ctree_compare_rows): when `inserting_node' is set, bail out
	with a nonsense value

	* libnautilus-extensions/nautilus-ctree.h,
	libnautilus-extensions/nautilus-ctree.c: reverted the change to
	insert_node
	(nautilus_ctree_sort_single_node): new function, reorders a
	given node, but no others

2001-02-21  Darin Adler  <darin@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fix bug 6286 (get 3 directory loads instead of 1 when you activate
	file in directory view [as opposed to typing location]). This is
	mostly right, but there's still a relatively common case where we
	get a 2nd directory load. I'll have to write a bug report about
	that case, but it's no worse than before and quite a bit better.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy): Stop monitoring. Also change the old
	monitoring code to use different "client" pointers so multiple
	monitors don't interfere with each other.
	(activate_callback): Stop monitoring when we get to the point of
	actually activating (unless we are opening through the shell).
	Also do some small cleanup to "command:" handling code and fix
	minor storage leak.
	(cancel_activate_callback): Stop monitoring if we cancel.
	(fm_directory_view_activate_file): Start monitoring so the load
	can be shared between all who need it. This is the same
	optimization done at the shell level.
	(load_directory): Use the new client pointer approach so multiple
	monitors don't interfere with each other.
	(finish_loading): Use the new client pointer approach so multiple
	monitors don't interfere with each other.
	(disconnect_model_handlers): Use the new client pointer approach
	so multiple monitors don't interfere with each other.
	(monitor_file_for_open_with): Use the new client pointer approach
	so multiple monitors don't interfere with each other.
	(monitor_file_for_activation): New function that monitors the
	file list so we don't get multiple directory loads.

	Fix tests now that gnome-vfs has a fix for bug 6798 (URI functions
	don't always treat domain names as case-insensitive) and fix bug
	6799 (nautilus_uris_match_ignore_fragments gives wrong result for
	URIs with trailing "/" characters).

	* libnautilus-extensions/nautilus-file-utilities.h:
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical_strip_fragment): New function.
	(uris_match): Use new function to handle fragments better.
	(nautilus_self_check_file_utilities): Update checks to
	expect fixes in gnome-vfs and here. Note that both bugs
	6798 and 6799 are now fixed.
	
	* help/.cvsignore:
	* help/nautilus-user-manual/.cvsignore:
	* help/nautilus-user-manual/C/.cvsignore:
	* omf-install/.cvsignore:
	Ignore generated files in some new directories.
	
2001-02-21  Michael Engber  <engber@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/file-manager/fm-properties-window.c: (set_icon_callback):
	Property window now stores a uri (as opposed to a path) in
	metadata for custom icons - bug 6841.

2001-02-21  Michael Engber  <engber@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>
	             John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-directory-metafile-monitor.h:
	* libnautilus-extensions/nautilus-directory-metafile-monitor.c:
	(nautilus_metafile_monitor_initialize_class),
	(nautilus_metafile_monitor_get_epv),
	(nautilus_metafile_monitor_get_vepv),
	(nautilus_metafile_monitor_create_servant),
	(nautilus_metafile_monitor_initialize), (destroy),
	(nautilus_metafile_monitor_new), (corba_metafile_changed):
	Added implementation of monitors for directories to recieve
	notification when their metadata changes. This works across
	processes.

	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_destroy),
	(nautilus_directory_emit_change_signals):
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory-async.c:
	(metafile_read_mark_done), (metafile_read_start),
	(nautilus_directory_monitor_add_internal),
	(update_metadata_monitors),
	(nautilus_directory_monitor_remove_internal),
	(nautilus_directory_call_when_ready_internal),
	(nautilus_directory_cancel_callback_internal),
	(nautilus_async_destroying_file), (request_is_satisfied),
	(call_ready_callbacks):
	The state machine now uses monitors in the metadata server
	process.

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(get_metafile), (nautilus_directory_is_metadata_read),
	(nautilus_directory_get_file_metadata),
	(nautilus_directory_get_file_metadata_list),
	(nautilus_directory_set_file_metadata),
	(nautilus_directory_set_file_metadata_list),
	(nautilus_directory_set_boolean_file_metadata),
	(nautilus_directory_set_integer_file_metadata),
	(nautilus_directory_copy_file_metadata),
	(nautilus_directory_remove_file_metadata),
	(nautilus_directory_rename_file_metadata),
	(nautilus_directory_register_metadata_monitor),
	(nautilus_directory_unregister_metadata_monitor):
	* libnautilus-extensions/nautilus-directory-metafile.h:
	-new calls for registering/unregistering monitors 
	-Metadata setters no longer return booleans.
	-misc cleanup of CORBA exception code (or lack thereof)

	* libnautilus-extensions/nautilus-file-private.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_is_self_owned), (destroy),
	(nautilus_file_get_parent_uri), (get_file_for_parent_directory),
	(nautilus_file_can_rename), (nautilus_file_get_gnome_vfs_uri),
	(rename_callback), (nautilus_file_rename),
	(nautilus_file_set_directory), (get_metadata_name),
	(nautilus_file_set_metadata), (nautilus_file_set_metadata_list),
	(nautilus_file_set_boolean_metadata),
	(nautilus_file_set_integer_metadata), (nautilus_file_get_uri),
	(nautilus_file_mark_gone), (nautilus_file_changed):
	-exposed (& renamed) is_self_owned in the private header.
	-metadata setters no longer emit changes (it's done by the server)

	* libnautilus-extensions/nautilus-metafile-server.idl:
	-metafile_changed now is passed a list of file names

	* libnautilus-extensions/nautilus-metafile.c:
	(nautilus_metafile_get_epv), (destroy), (corba_is_read),
	(corba_get), (corba_get_list), (corba_set), (corba_set_list),
	(corba_copy), (corba_remove), (corba_rename), (find_monitor_node),
	(corba_register_monitor), (corba_unregister_monitor),
	(call_metatfile_changed), (file_list_filler_ghfunc),
	(call_metafile_changed_for_all_files_mentioned_in_metafile),
	(call_metatfile_changed_for_one_file):
	* libnautilus-extensions/nautilus-metafile.h:
	- metafile setters now emit changes and do not return boolean values
	- added call_metafile_changed_for_all_files_mentioned_in_metafile

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_callback):
	Un-canelable timed wait dialogs now have an ok button
	which dismisses them.

	* libnautilus-extensions/nautilus-trash-directory.c:
	(find_directory_start):
	Slightly clarified the text in the infamous searching for text dialog.

2001-02-21  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 6828 (Moving directories in tree view makes contents
	become top-level nodes):

	* components/tree/nautilus-tree-node.h,
	components/tree/nautilus-tree-node.c,
	components/tree/nautilus-tree-node-private.h

	(nautilus_tree_node_update_uri): new private function, updates
	the node's cached URI from its NautilusFile and updates the new
	is_toplevel flag

	(nautilus_tree_node_is_toplevel): new function, returns true if
	the node shouldn't have a parent node

	* components/tree/nautilus-tree-model.c: track nodes that have
	no parent but aren't top-level nodes. If suitable parents later
	appear the unparented nodes will be connected to them

	* components/tree/nautilus-tree-view.c,
	components/tree/nautilus-tree-view-private.h: do similar
	tracking of unparented nodes (but from the point of view of the
	view, not the model)

	[ Having both modules duplicate this similar functionality
	isn't ideal, but I don't see how to unify it ]


	Fixed bug 6820 (directory sort order is different in tree
	view):

	* components/tree/nautilus-tree-view.c (ctree_compare_rows):
	new function, set as the comparison function for tree views.
	It calls nautilus_file_compare_for_sort () on the files
	associated with the tree rows (with hardcoded type
	NAUTILUS_FILE_SORT_BY_NAME for now)

	* libnautilus-extensions/nautilus-ctree.c
	(nautilus_ctree_insert_node): for sorted insertions, link the
	inserted node into the tree before finding the correct place,
	then move it afterwards. This ensures that the comparison
	function is able to find the node pointers from the row
	pointers that it's given

2001-02-21  Rebecca Schulman  <rebecka@eazel.com>
	Remove the "backup unindexed search" preference for 1.0, which is
	bugzilla.eazel.com bug 6775.  We will not be doing backup
	searches, and with Ramiro's help redo preference changes more
	cleanly, and to be more compatible with his preference changes.

	reviewed by: Ramiro Estrugo <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_install_defaults),
	(global_preferences_install_visibility),
	(global_preferences_create_dialog),
	(global_preferences_install_home_location_defaults),
	(global_preferences_use_fast_search_changed_callback),
	(global_preferences_medusa_state_changed_callback),
	(global_preferences_install_medusa_defaults):
	* libnautilus-extensions/nautilus-global-preferences.h:
	Remove the old BACKUP_SEARCH preference, and add functions
	to install medusa preference defaults, and to synchronize
	the gconf value of the preference with the system configuration
	file used by medusa.
	
	* libnautilus-extensions/nautilus-preferences.c:
	(nautilus_preferences_set_boolean),
	(nautilus_preferences_get_boolean):
	Remove old system preferences calls

	* libnautilus-extensions/Makefile.am:	
	* libnautilus-extensions/nautilus-system-preferences.c:
	* libnautilus-extensions/nautilus-system-preferences.h:
	Remove these
	* libnautilus-extensions/nautilus-medusa-support.c:
	(nautilus_medusa_services_have_been_enabled_by_user),
	(nautilus_medusa_blocked), (nautilus_medusa_enable_services),
	(nautilus_medusa_add_system_state_changed_callback):
	* libnautilus-extensions/nautilus-medusa-support.h:
	Add this file to hide potentially ifdef'd out medusa 
	code.
	
	* src/file-manager/fm-search-list-view.c: (load_location_callback):
	* src/nautilus-complex-search-bar.c:
	(nautilus_complex_search_bar_get_location):
	Remove logic related to the BACKUP_SEARCH feature.

2001-02-21  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: moved documentation to
	%{prefix}/share/gnome/help/nautilus-user-manual/C/*
	and added gnugpl dir BUG 6837 

2001-02-21  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>
	
	Fixed bug 6465, Music view buttons stretch for songs
	with very long titles.
	
	* components/music/nautilus-music-view.c: (add_play_controls),
	(nautilus_music_view_set_album_image):
	Change the way that the play controls are added to the pack box
	so that they do not expand in strange ways or change their position
	when a custom image is added.
		
2001-02-21  Darin Adler  <darin@eazel.com>

	reviewed by: Mike Fleming <mfleming@eazel.com>

	Busted the Tinderbox again! (Another attempt to fix it.)

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_self_check_file_utilities): Changed the tests
	to match reality.

	* configure.in:
	* user-guide/Makefile.am:
	Turned the user guide off again. Dan explained that this
	is what he meant to do (I got it wrong).

2001-02-21  Eric Fischer <eric@eazel.com>

	* nautilus-installer/install-lib/Makefile.am:
	Use ln to make links into the real install/lib directory;
	add header file prerequisites

	* nautilus-installer/libtrilobite/Makefile.am:
	Use ln to make links into the real libtrilobite directory;
	fix header file prerequisites

	* nautilus.spec.in:
	Again, try to build the installer in tinderbox.  With luck,
	it'll actually work this time.

2001-02-21  Darin Adler  <darin@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	An attempt to fix the Tinderbox.

	* user-guide/Makefile.am: Add C subdir.

	Other changes.

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_format_uri_for_display): Simplify to take advantage of
	the new gnome_vfs_get_local_path_from_uri, which rejects paths
	that have "#" characters in them.
	(nautilus_self_check_file_utilities): Add more test cases for
	host names that are case sensitive.

	* omf-install/.cvsignore: Ignore generated files in this new
	directory.

2001-02-21  Laszlo Kovacs <laszlo.kovacs@sun.com>
	* components/help/Makefile.am
	enabling Scrollkeeper to be the default help system

2001-02-21  Ramiro Estrugo  <ramiro@eazel.com>

	* README: Clarify the Mozilla version requirements.

2001-02-21 John Fleck <jfleck@inkstain.net>

	* components/help/converters/gnome-db2html2/sect-preparse.c
	add a test to gloss_term_append - if a glossentry has not id (a
	special case, but one that does on occasion occur) bail out of the
	function without trying to add it to the hash of glossentries
	fixes bug #6511
	
2001-02-20  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	* components/services/summary/eazel-summary-shared.c
	(parse_service), (parse_eazel_news_item),
	(parse_update_news_item),
	(build_services_glist_from_xml),
	(build_eazel_news_glist_from_xml),
	(build_update_news_glist_from_xml): Make this more robust against
	unusual data from the server. In particular, if the SERVICES list
	or other lists are emtpy, do not crash.

2001-02-21  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 5939, margins in text icons are weirdly proportioned.
	Fixed by distinguishing the rectangles for the anti-aliased and
	non-aa icon types
	
	* icons/i-regular.xml:
	added and tweaked both aa and non-aa text rectangles
	* libnautilus-extensions/nautilus-icon-factory.c:
	(get_themed_icon_file_path):
	get a separate text rectangle for anti-aliased mode if present
	
	fixed bug 6708, Change "support" link in menus, by moving and
	renamed the "support" item from the services menu to the help menu.
	This bug isn't finished yet, since we still have to rename the
	support uri, but it isn't ready on the service yet.
	
	* src/nautilus-service-ui.xml:
	removed support item
	* src/nautilus-shell-ui.xml:
	added customer service item
	* src/nautilus-window-menus.c: (help_menu_customer_service),
	(nautilus_window_initialize_menus):
	added code to handle the customer service command
	* src/nautilus-window-service-ui.c:
	(nautilus_window_install_service_ui):
	removed callback for the support command

2001-02-21  Dan Mueth  <dan@eazel.com>

	reviewed by: Mike Fleming  <mfleming@eazel.com>

	The old help tree, "user-guide/*", was broken in several ways.
	It assumed there was only one doc, called "user-guide", whereas
	we have multiple docs.  Plus it had odd subdirectories which
	are unusual and we don't want to use.  Plus the convention is
	to put all docs in a directory called "help" (modelled after
	$prefix/gnome/help) and figures in a subdir called "figures".
	So, I'm creating a new tree for this called "help" and installing
	the latest version of Vera's Nautilus User Manual with
	screenshots.  I also added a nifty makefile, help/docs.make,
	which we will use for all the SGML docs and translations
	to keep things tidy and working with low maintenance.

	* Makefile.am: Including help/
	* configure.in: Including help/ and subdirs
	* help/Makefile.am: added
	* help/docs.make: added nifty makefile to be used by all
	  SGML docs and translations of SGML docs
	* help/nautilus-user-manual/C/Makefile.am: added
	* help/nautilus-user-manual/C/figures/custicon.png: added
	* help/nautilus-user-manual/C/figures/full.png: added
	* help/nautilus-user-manual/C/figures/link.png: added
	* help/nautilus-user-manual/C/figures/locbar.png: added
	* help/nautilus-user-manual/C/figures/noread.png: added
	* help/nautilus-user-manual/C/figures/nowrite.png: added
	* help/nautilus-user-manual/C/figures/part.png: added
	* help/nautilus-user-manual/C/figures/player.png: added
	* help/nautilus-user-manual/C/figures/prefmenu.png: added
	* help/nautilus-user-manual/C/figures/sidebar.png: added
	* help/nautilus-user-manual/C/figures/viewmenu.png: added
	* help/nautilus-user-manual/C/figures/viewmusic.png: added 
	* help/nautilus-user-manual/C/nautilus-user-manual-C.omf: added
	* help/nautilus-user-manual/C/nautilus-user-manual.sgml: added
	* help/nautilus-user-manual/Makefile.am: added
	* user-guide/Makefile.am: turned off old user guide installation

2001-02-21  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/callbacks.c:
	(nautilus_service_install_download_progress):

	Workaround possible redundant 100% progress callback.

2001-02-21  Pavel Cisler <pavel@eazel.com>

	* components/help/help-method.c:

	Fix broken build - add the right includes that got dropped by
	GnomeVFS header file shuffle.

2001-02-20  John Harper  <jsh@eazel.com>

	reviewed by Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug where a renamed node in the tree view doesn't get
	resorted:

	* libnautilus-extensions/nautilus-ctree.c (set_node_info): if
	the ctree is in auto-sort mode, sort the branch containing the
	changed node


	Fixed a crash in the tree view when expanding nodes that have
	been moved across directories:

	* components/tree/nautilus-tree-node.c
	(nautilus_tree_node_remove_children): new function, unparents
	all children of the given node

	(nautilus_tree_node_destroy): emit a warning if the list of
	children is non-null (then call remove_children). Ideally the
	remove_children function should get called before the final
	unref of a directory node

	* components/tree/nautilus-tree-model.c
	(report_node_removed_internal): call
	nautilus_tree_node_remove_children before unref'ing the node


	Mostly fixed bug where expansion state hash table accumulates
	cruft over time (e.g. directories that no longer exist or got
	moved to locations where they can never be displayed):

	* components/tree/nautilus-tree-view.h
	(NautilusTreeViewDetails): added `view_node_to_uri_map' hash
	table. This is used to map view nodes to the URIs we believe
	they are displaying. This is necessary since by the time we
	find out about changes to nodes, the names of the underlying
	NautilusFile objects have often already been changed

	* components/tree/nautilus-tree-view.c
	(unlink_view_node_from_uri, link_view_node_with_uri,
	map_view_node_to_uri): functions accessing the new hash table

	(nautilus_tree_view_would_include_file): new function, returns
	true iff the given file may possibly appear in the tree view.
	Climbs through all parents of the file to do this

	(nautilus_tree_view_model_node_renamed_callback): only
	propagates the expansion state if the would_include function
	indicates that the new URI of the file would be included in the
	tree view

	* components/tree/nautilus-tree-model.c (report_node_changed):
	no need to suppress the `node_removed' signal when renaming the
	node (now that the view always deletes the expansion state of
	the correct URI)

	* libnautilus-extensions/nautilus-file.c,
	libnautilus-extensions/nautilus-file-private.h, 
	libnautilus-extensions/nautilus-file-utilities.c, 
	libnautilus-extensions/nautilus-file-utilities.h
	(nautilus_file_name_matches_hidden_pattern,
	nautilus_file_name_matches_backup_pattern): moved these
	functions from being private in nautilus-file to being public
	in nautilus-file-utilities


	Fixed tree view bug where moving nodes across directories still
	loses the expansion state: 

	* components/tree/nautilus-tree-model.c
	(nautilus_tree_model_directory_files_changed_callback):
	separated the cases of the file being deleted and it being
	moved across directories. In the move case emit the
	`being_renamed' signal so the expansion state gets propagated

	(nautilus_tree_view_remove_model_node, forget_view_node): moved
	the code to delete the expansion state from forget_view_node to
	nautilus_tree_view_remove_model_node - avoids deleting
	expansion state of nodes that will later be renamed. It may
	leave non-existent directories in the expansion state, but this
	is a lesser bug than losing the expansion state totally. Also,
	use the map_view_node_to_uri function to find the URI whose
	expansion state needs to be removed


	Fixed the bug where tree view icons often got chopped at top
	and bottom when they're drawn (if the icon height is greater
	than the font height). This means that fewer rows may fit in
	the same vertical space, but visually it's (imho) a huge
	improvement (I think this is bug 6085):

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_initialize): call gtk_clist_set_row_height
	with the maximum of the font height and the icon height

	* libnautilus-extensions/nautilus-ctree.c (draw_row): always
	calculate row_center_offset locally, and do it in such a way
	that the text really is in the center of the row!


	Fixed bug 5165 - repeatedly expanding and collapsing an empty
	directory doesn't change how the node's icon is drawn after the
	first expansion:

	* libnautilus-extensions/nautilus-ctree.c (real_tree_expand,
	real_tree_collapse): before returning, call tree_draw_node on
	the node that changed state

2001-02-20  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/Makefile.am:
	* components/services/install/nautilus-view/callbacks.c:
	* components/services/install/nautilus-view/callbacks.h:
	* components/services/install/nautilus-view/forms.c:
	* components/services/install/nautilus-view/forms.h:

	Added callbacks.[ch] and forms.[ch] to split the ridiculously huge
	install view into smaller, more managable chunks.
	
	* components/services/install/nautilus-view/main.c: (quit_timer),
	(service_install_object_destroyed):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (deps_destroy_foreach),
	(nautilus_service_install_view_destroy),
	(nautilus_service_install_view_finalize),
	(nautilus_service_install_view_initialize_class),
	(nautilus_service_install_view_initialize),
	(nautilus_service_install_view_update_from_uri_finish),
	(service_install_stop_loading_callback):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:

	Turn the preflight dialog into a question asked inline.  Do some
	wacky hoop-jumping so that we do the right thing if the user
	leaves our view while we're waiting for a button press.  Turn off
	some of the distractions (progress bar, etc) while waiting for
	info and feedback.

2001-02-20  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-tabs.c: (draw_tab_label):
	fixed bug 6804, resizing sidebar crashes summary view.  Fixed by
	adding a check to not draw the label when it's position is past
	the right edge of the pixbuf.
		
2001-02-20  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed in part by: Robey Pointer  <robey@eazel.com>

	This patch fixes bug 6458, 5722, 6602, 6788 and 5826.
	Removed soft_depends from PacakgeData.

	This has some major changes in the logic, and (taaadaa) is fairly
	untestet because of the sorry state of the testservers these
	days. This will most likely no longer work with
	services.eazel.com, but only with the newest server code.
	
	* components/rpmview/nautilus-rpm-view-install.c:
	(get_detailed_errors_foreach), (get_detailed_errors):
	Fixed to parse PackageBreaks objects.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(dump_tree_helper), (prune_failed_packages_helper),
	(eazel_install_check_existing_packages), (get_softcat_info),
	(is_satisfied), (is_satisfied_from_package_list),
	(is_satisfied_features), (check_dependencies_foreach),
	(check_dependencies), (check_tree_helper),
	(check_no_two_packages_has_same_file),
	(check_conflicts_against_already_installed_packages),
	(check_feature_consistency), (do_file_conflict_check),
	(do_dep_check_internal), (download_packages),
	(get_packages_with_mod_flag), (eazel_uninstall_upward_traverse),
	(eazel_uninstall_check_for_install), (eazel_uninstall_globber),
	(install_packages), (uninstall_packages):
	Ouput status in the tree dump.
	Improved the way I fail ALREADY_INSTALLED packages.
	Check the new package system error field in check_existing.
	Get_info don't check for fillflag to decide if softcat success was
	ok, since suites don't get the fillflag.
	Don't try and dedupe suite objects.
	Mark packages already installed with same version as CANCELLED.
	If a ALREADYINSTALLED package is cancelled due to install options
	(upgrade/downgrade), set a data field called "cancelled" to
	represent.
	Added a (currently not fully functional) check to see if a
	dependency is solved by the current work set (bug 6809).
	is_satisfied now uses is_satisfied_from_packages before checking
	if dependency is installed.
	Modified check_dependencies_foreach to pass around the package
	list.
	No longer do dependency check on cancelled packages (bug 6485).
	Don't package depcheck packages with suite_id, treat it's contents
	at comming toplevel packages.
	Output crack sentence when trying to revice PackageFeatureMissing
	breaks (file bug 6811)
	Don't file uniqueness or file conflict check suites.
	Fixed a bug in the feature_consistency, required a new query enum
	in eazelpackagesystem query call.
	Spewed out some comments.
	Always add children of a suite to K.
	Check download status (bug 5722)
	Commented out expand_package_suites.
	get_packages_with_mod_flag can now parse down into ->depends.
	Nicyfied debug output.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_xfer_callback), (gnome_vfs_fetch_remote_file),
	(eazel_install_fetch_package):
	No longer use rpmvercmp.
	Define flag to make all downloads fail (to test failed downloads).
	Note when VFS is lying about bytes_copied.
	Removed some ancient code.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (eazel_install_packagedata_to_xml_int):
	Removed soft_depends.
	
	* components/services/install/lib/eazel-package-system-rpm3-private
	.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_db_locked),
	(eazel_package_system_rpm3_dbs_locked),
	(eazel_package_system_rpm3_open_dbs),
	(eazel_package_system_rpm3_packagedata_fill_from_header),
	(eazel_package_system_rpm3_query_foreach),
	(eazel_package_system_rpm3_query_requires_feature),
	(eazel_package_system_rpm3_query),
	(eazel_package_system_rpm3_verify):
	Did the db lock check voodoo.
	Added REQUIRES_FEATURE query enum.
	Loads features from a given file (bug 5826)
	
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_finalize), (packagedata_initialize),
	(packagedata_copy), (packagedata_fill_in_missing),
	(packagedata_remove_soft_dep), (packagedata_add_pack_to_depends),
	(eazel_install_package_name_compare), (packagedata_dump_int):
	Good bye soft_depends.
	
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_load_implementation),
	(eazel_package_system_load_package), (eazel_package_system_query),
	(eazel_package_system_fail_all_packages),
	(eazel_package_system_install), (eazel_package_system_uninstall),
	(eazel_package_system_verify), (eazel_package_system_initialize),
	(eazel_package_system_new_with_id):
	Fixed 6788.
	Added REQUIRES_FEATURE query enum.

	* components/services/install/lib/eazel-package-system.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_get_info):
	Fixed some suite_id majick.

2001-02-20  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6029, No option to mount zip drive in desktop menu.
	Fixed bug 6751, Nautilus does not detect all of my removable disks.
	Fixed bug 6194, SCSI CD-ROM drives are not displayed on desktop.
	Fixed bug 6396, cd-rom not detected
	
	Special thanks to liblit@acm.org for persisting and looking at the
	code. The check permissions code is an artifact from when we were
	considering having a mount daemon.  I don't think it is needed at all
	because the volume monitor is not running as root.  I wil mark
	the bugs fixed and wait for status but I think this will work.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(mount_volume_ext2_add), (mount_volume_udf_add),
	(mount_volume_vfat_add), (mount_volume_msdos_add):
	Remove old check_permissions code.

2001-02-20  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6785 ("Trash" should be capitalized)

	I grepped Nautilus sources for "the trash" and replaced
	it with "the Trash". Let me know if you can think of
	any references to the Trash that don't start with "the".

	* libnautilus-extensions/nautilus-file-operations.c:
	(build_error_string), (confirm_empty_trash):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_confirm_deletion), (confirm_delete_from_trash),
	(report_broken_symbolic_link):
	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	* src/file-manager/nautilus-directory-view-ui.xml:

2001-02-20  Dan Mueth  <dan@eazel.com>

	* user-guide/C/Makefile.am: Changed so only a warning is
	given if ScrollKeeper is not installed.

2001-02-20  Mike Fleming  <mfleming@eazel.com>

	reviewed by: <ian@eazel.com>

	Added "x-directory/webdav-prefer-directory" for bug 5325

	* components/mozilla/Nautilus_View_mozilla.oaf.in:
	* src/Nautilus_shell.oaf.in:

2001-02-15  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: <darin@eazel.com>

	Part of 2057: URI's with fragments behave oddly

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_format_uri_for_display), (uris_match),
	(nautilus_uris_match), (nautilus_uris_match_ignore_fragments),
	(nautilus_self_check_file_utilities):
	* libnautilus-extensions/nautilus-file-utilities.h:

	nautilus_format_uri_for_display returns "file:" URI's if the URI
	in question has a fragment, other file: URI's get translated into paths
	Also no longer calls the evil gnome_vfs_unescape_string_for_display (see
	bug 6694)

	Also fixes bug 6722: re-entering search query results in location bar
	results in error dialog

	Added nautilus_uris_match_ignore_fragments function which strips
	fragments before comparing.  Also added test cases.

	* components/tree/nautilus-tree-view.c:
	(got_activation_uri_callback):
	* src/nautilus-window-manage-views.c:
	(viewed_file_changed_callback):

	Fixed two locations that made the implicit assumption that
	nautilus_file_get_uri should return a URI that's directly comparable
	to the current navigation location.  Other cases may still lurk.

	* src/nautilus-window-menus.c:

	A few calls to gnome_vfs_get_local_path_from_uri that should have
	been gnome_vfs_get_uri_from_local_path.  Eliminating dumb behaviour
	in gnome_vfs_get_local_path_from_uri exposed them.

2001-02-20  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Fixed bug 5676 (Moving a directory with multiple nested
	directories causes improper locations to be displayed):

	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_moved_internal): Made this build a list of the
	affected files.
	(nautilus_directory_moved): Send a changed notice to each affected
	file.
	(nautilus_directory_notify_files_moved): Send a changed notice to
	each affected file, but share code to avoid sending changed
	notices twice for any directory.
	
	Fixed some callers that were assuming a
	gnome_vfs_get_local_path_from_uri would return a non-NULL
	value. This is not safe to assume just because
	gnome_vfs_uri_get_local returns true.

	* components/music/nautilus-music-view.c: (read_id_tag): Use
	gnome_vfs_get_local_path_from_uri to define what a local path is.
	The old code used a mix.
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_can_rename): Simplified code to use
	gnome_vfs_get_local_path_from_uri to define what a local path
	is. The old code used a mix.
	* libnautilus-extensions/nautilus-thumbnails.c: (make_thumbnails):
	Added NULL checks after calls to
	gnome_vfs_get_local_path_from_uri.
	* src/nautilus-sidebar.c: (uri_is_local_image): Took out redundant
	check. The definition of local image we want here is: "uses a
	standard file: URI".
	* src/file-manager/fm-directory-view.c:
	(fm_directory_link_type_in_selection): Fixed bug where it would
	only look at the first item in the selection. Simplified logic.
	(is_link_type_special): Added a new function.
	(special_link_in_selection): Instead of calling
	fm_directory_link_type_in_selection, copied it. The problem with
	the other approach is that it was reading each link file three
	time to rule out each of the three special link types.

	Other changes.

	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_get_volume_name),
	(modify_volume_name_for_display): Marked "Unknown" for
	localization.
	
	* libnautilus-extensions/nautilus-file-utilities.c:
	* libnautilus-extensions/nautilus-icon-factory.c:
	* src/file-manager/fm-icon-view.c:
	Added 2001 to the copyright since we modified these recently.

2001-02-20  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file): Middle-truncate
	really long file names to avoid an error dialog
	that is much wider than the screen.

2001-02-20  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-location-bar.c: (try_to_expand_path):
	fixed bug 6717, problem editing a uri with a '#' in the middle,
	by adding a check to the auto-complete code to not substitute
	zero length strings.
	
2001-02-20  Andy Hertzfeld  <andy@eazel.com>

	* components/text/nautilus-text-view.c: (file_close_callback),
	(done_file_read):
	fixed bug 6732, can't unmount volumes after viewing text files;
	fixed by closing the file in done_file_read.
	
2001-02-20  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* src/file-manager/nautilus-indexing-info.c:
	(show_indexing_info_dialog):
	Complete fix for 6417, by swapping Vera's text into the
	new index status dialog

2001-02-20  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6384, Nautilus program chooser uses
	"nautilus-mime-type-capplet" to launch capplet
	
	* libnautilus-extensions/nautilus-program-chooser.c:
	(launch_mime_capplet):
	Rename capplet to "file-types-capplet"

2001-02-20  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Fixed bug 5482 (If you've esc'd out of an icon stretch, change
	directories, then come back, the icon is the pre-esc'd stretched
	size)

	* libnautilus-extensions/nautilus-icon-container.c:
	(undo_stretching): Pass TRUE instead of FALSE so the "undone" size
	gets stored in metadata. Without this, we end up with the icon at
	the stretched size.

2001-02-20  Richard Boulton <richard@tartarus.org>

	reviewed by: Ali Abdin <aliabdin@aucegypt.edu>

	* components/help/converters/gnome-db2html2/*
	Fix to bug 6700; doesn't include config.h unless HAVE_CONFIG_H
	is defined, and has correct instructions for compiling standalone.

2001-02-20  Kjartan Maraas  <kmaraas@gnome.org>

	* components/services/summary/nautilus-summary-view.c: Fix some
	typos in strings.
	
2001-02-20  Maciej Stachowiak  <mjs@eazel.com>

	Assorted build twiddling.
	
	* components/services/install/command-line/Makefile.am: Remove
	-I/usr/include/rpm

	* components/services/install/nautilus-view/Makefile.am: Likewise.
	
	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	Remove gratuitous include of rpm header.

	* components/services/inventory/Makefile.am: Formatting tweaks.
	
	* components/services/summary/*: flatten this whole directory:
	summary/lib => summary
	summary/nautilus-view => summary
	summary/nautilus-view/test => summary
	summary/nautilus-view/icons/gray_tab_pieces =>summary/nautilus-view/icons
	
	* configure.in: Adjust for flattening of
	components/services/summary
	
	* libnautilus-extensions/nautilus-clickable-image.c
	(adjust_coordinates_for_window): Formatting tweak.

	* user-guide/gnugpl/.cvsignore: Silence cvs.

2001-02-20  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/server/Makefile.am: Remove
	-I/usr/include/rpm

2001-02-19  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (install_message_new), (generate_install_form),
	(nautilus_service_install_preflight_check),
	(nautilus_service_install_done):

	Hide the install view's progress header until downloading begins.
	Try to use nautilus_view_go_back, though it appears to not be
	functional yet.
	
2001-02-20  Rebecca Schulman  <rebecka@eazel.com>
	Complete bug 6416, to add dialogs to explain
	that searches will be slow when medusa is disabled or 
	blocked.  The work was previously complete, but 
	I've swapped in Vera's text, and added an 
	info_dialog_with_details to the stock dialogs.

	reviewed by: Gene Ragan <gzr@eazel.com>

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(details_dialog_clicked_callback),
	(nautilus_show_info_dialog_with_details),
	(nautilus_show_error_dialog_with_details):
	* libnautilus-extensions/nautilus-stock-dialogs.h:
	* src/file-manager/fm-search-list-view.c:
	(display_system_services_are_blocked_dialog),
	(display_system_services_are_disabled_dialog):

2001-02-20  Rebecca Schulman  <rebecka@eazel.com>
	Fix bugzilla.eazel.com 6414 to add prefence to nautilus
	to enable/disable medusa

	* libnautilus-extensions/nautilus-global-preferences.h:	
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_install_defaults),
	(global_preferences_install_visibility),
	(global_preferences_create_dialog):
	Add the fast search preference pane, visibility level,
	change SEARCH_METHOD -> BACKUP_SEARCH

	* libnautilus-extensions/nautilus-system-preferences.c:	
	* libnautilus-extensions/nautilus-system-preferences.h:
	* libnautilus-extensions/Makefile.am:
	(nautilus_is_system_preference),
	(nautilus_system_preference_get_boolean),
	(nautilus_system_preference_set_boolean):
	Add setters and getters for system preferences that are not
	managed by gconf.  The current set and get functions
	turn on and off medusa services

	* libnautilus-extensions/nautilus-preferences.c:
	(nautilus_preferences_set_boolean),
	(nautilus_preferences_get_boolean):
	Use the new system preference setters and getters instead of the standard
	ones if the preference is not managed by gconf
	
	* src/file-manager/fm-search-list-view.c: (load_location_callback),
	(display_system_services_are_blocked_dialog):
	* src/nautilus-complex-search-bar.c:
	(nautilus_complex_search_bar_get_location):
	change SEARCH_METHOD -> BACKUP_SEARCH

2001-02-19  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: John Harper  <jsh@eazel.com> 

	Fixed bugs 3743 (Summary view gives the same vague error message
	for many different causes), 3972 (If user can't connect to
	service, they end up with gray content view), 5973 (blank summary
	view after install view finishes) and 6166 (Summary Login dialog
	does not have initial focus) and 6018 (Nautilus returns to wrong
	directory if services are unavailable). Also did much code
	cleanup, and made the service and featured download icons in the
	summary view prelighting and clickable. Fixed many other nits as
	well.

	* components/services/nautilus-dependent-shared/eazel-services-extensions.h,
	components/services/nautilus-dependent-shared/eazel-services-extensions.c
	(eazel_services_clickable_image_new_from_uri): Convenience wrapper
	to make a new clickable image from a URI.
	* components/services/nautilus-dependent-shared/eazel-services-footer.c
	(eazel_services_footer_update): Clear the footer before updating,
	instead of just dumping the new items in along with the old ones.

	* components/services/trilobite/libtrilobite/trilobite-core-network.h,
	components/services/trilobite/libtrilobite/trilobite-core-network.c:
	Adjusted formatting, fixed headers.

	* components/services/trilobite/libtrilobite/trilobite-file-utilities.h,
	components/services/trilobite/libtrilobite/trilobite-file-utilities.c:
	Cut 'n' pasted some useful code from libnautilus-extensions to
	avoid depending on it, whee.
	* components/services/trilobite/libtrilobite/Makefile.am: Added
	above to the build.

	* components/services/trilobite/libtrilobite/trilobite-redirect.h,
	components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(trilobite_redirect_fetch_table_async,
	trilobite_redirect_fetch_table_cancel): Asynchronous version of
	redirect fetching code.
	(redirect_fetch_callback): Helper function.
	(trilobite_redirect_parse_xml): Null terminate buffer properly or
	XML parsing code will get confused.
	(trilobite_redirect_fetch_table): Removed the old synchronous code
	since now no one is using it.

	* components/services/summary/lib/eazel-summary-shared.h,
	components/services/summary/lib/eazel-summary-shared.c:
	(eazel_summary_fetch_data_cancel, eazel_summary_fetch_data_async):
	Asynchronous version of summary fetching code.
	(summary_data_fetch_callback): Helper function.
	(eazel_summary_data_parse_xml): Same null termination trick as for
	redirects.
	(parse_summary_xml_file): Removed old synchronous code since now
	no one is unsing it.

	* components/services/summary/nautilus-view/main.c (main): Set
	user agent to trilobite user agent; intialize gnome-vfs.
	
	* components/services/summary/nautilus-view/nautilus-summary-dialogs.h,
	components/services/summary/nautilus-view/nautilus-summary-dialogs.c 
	(nautilus_summary_show_login_failure_dialog): Renamed from
	`nautilus_summary_login_failure_dialog'
	(nautilus_summary_show_error_dialog): Renamed from
	`generate_error_dialog'.
	(nautilus_summary_show_login_dialog): Renamed from
	`generate_login_dialog'.
	(error_dialog_cancel_cb): Go back instead of (incorrectly) trying
	to go back to the user's homedir.
	(set_dialog_parent): Do the magic coordinate adjustment like
	gnome_dialog_set_parent, but do not set it transient, or it will
	not get focus in click to focus mode.

	* components/services/summary/nautilus-view/nautilus-summary-callbacks.c:
	(authn_cb_failed): Adjust to above renaming.
	* components/services/summary/nautilus-view/nautilus-summary-footer.c 
	(footer_item_clicked_callback): Ditto.
	* components/services/summary/nautilus-view/nautilus-summary-menu-items.c: 
	(bonobo_login_callback): Ditto.

	* components/services/summary/nautilus-view/nautilus-summary-view-private.h:
	Removed unused fields. Added async handles for redirect and summary XML 
	fetch.

	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	(services_button_callback_data_free, summary_view_button_callback,
	goto_uri_on_clicked, summary_view_button_new,
	summary_view_link_image_new): Cleaned up summary view button code,
	added code for the clickable icons and refactored a bit.
	(create_header): Start out saying "Connecting to Eazel
	Services..." instead of blank, and don't call `update_header' from
	here.
	(update_footer): fix incorrect polarity of offline and online.
	(create_footer): remove call to update_footer; leave offline items
	in place until connected.
	(create_news_pane, create_services_list_pane,
	create_featured_downloads_pane): Do not call corresponding update
	func, updating is now separate from creating.
	(generate_service_entry_row, generate_update_news_entry_row): Make
	icons clickable.
	(update_summary_form): New function to update the existing summary
	view with new data, to avoid recreating even the fixed widgets
	from scratch all the time.
	(create_summary_form): Do not destroy all widgets at the
	beginning. Remove some useless widgetry.
	(nautilus_summary_view_initialize): Create the widgetry but do not
	fill it with data.
	(nautilus_summary_view_destroy, summary_fetch_callback,
	redirect_fetch_callback, cancel_load_in_progress),
	nautilus_summary_view_load_uri, summary_load_location_callback):
	Change things around so loading of the summary data is
	asynchronous.
	(summary_stop_loading_callback): Handle "stop_loading".

2001-02-19  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Added auto-prelighting feature to NautilusClickableImage, and
	fixed a major bug that occurs for clickable images in scrolled
	areas.
	
	* libnautilus-extensions/nautilus-clickable-image.h,
	libnautilus-extensions/nautilus-clickable-image.c: 
	(nautilus_clickable_image_set_prelight): New public API call that
	allows for automatic prelight handling direct in
	NautilusClickableImage; made it settable because some users of
	this code want to manually prelight with an alternate image.
	(nautilus_clickable_image_set_up_pixbufs): helper function for the
	above that keeps track of the normal and prelit buffers.
	(label_enter, label_leave): When in prelight mode, switch images
	on enter and leave. Also, remove unnecessary queue_draw calls.

	(adjust_coordinates_for_window, ancestor_enter_notify_event,
	ancestor_leave_notify_event, ancestor_motion_notify_event): Do
	some coordinate adjustments so that if the NautilusClickableImage
	is in a scrolled area with NO_WINDOW widgets all the way in
	between, we do an appropriate coordinate adjustment. This should
	also handle other containers that put their children in a
	different window than their own. This was breaking for the summary
	view when I set it to use clickable images for the service icons.
	
	* libnautilus/nautilus-view-standard-main.c
	(nautilus_view_standard_main_multi): Do a g_thread_init to make
	views that use gnome-vfs happy.

2001-02-18  Ian McKellar  <ian@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	* libnautilus-extensions/nautilus-mime-actions.h:
	* src/nautilus-window.c: (load_view_as_menu_callback):
	Removed all the code related to Gnome-VFS sub-methods in Nautilus.
	(Bug 5086)

2001-02-18  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	Fixed bug 6681 ; make eazel-install output more machine parseable
	by adding option and always return !0 on any failure.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_file_conflict_check_signal),
	(eazel_file_uniqueness_check_signal),
	(eazel_feature_consistency_check_signal),
	(eazel_download_progress_signal), (eazel_install_progress_signal),
	(download_failed), (something_failed),
	(eazel_preflight_check_signal), (dep_check), (md5_check_failed),

2001-02-19  Simos Xenitellis  <simos@hellug.gr>

	* configure.in: Added el to ALL_LINGUAS.

2001-02-18  Michael K. Fleming  <mfleming@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(try_transform_nautilus_uri_to_file_scheme),
	(view_load_location_callback),
	(should_uri_navigate_bypass_nautilus):

	Bug 4302: links in HTML help don't work.

	Now they do.  Since the "gnome-help:" scheme stuff doesn't know
	how to deal with files below the root and its to convoluted to fix,
	the Mozilla component discovers if a gnome-help scheme isgoing to be
	transformed into a file scheme and then redirects nautilus to that
	URI.  This means the full path to the HTML file appears in the location
	bar, just like in the old gnome help browser

2001-02-18  Darin Adler  <darin@eazel.com>

	* components/mozilla/nautilus-mozilla-embed-extensions.cpp:
	Get rid of initialization of nsString object to NULL
	to fix Tinderbox.

2001-02-17  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: <ramiro@eazel.com>

	Misc Mozilla changes.

	Bug 6542 -- Throbber keeps spinning
	Pages without network activity would never report_load_complete.  Switched
	to using net_start and net_stop to control throbber like galeon (didn't
	I do this before?).  Note that bug 6736 means the throbber might
	cut out early.  Oh well, the stop button isn't really hooked up anyway.

	Bug 6544 -- Crash while navigating help

	Caused by make_full_uri_from_relative going beyond a buffer.  Also added
	test case.

	Also fixed up logic in mozilla_dom_mouse_click_callback related to
	translating URI's that we know how to handle ourself but can't
	be handled by mozilla directly without intervention (eg, eazel-services,
	help URI's)

	Also removed mistaken cancel_pending_vfs_operation in update_nautilus_uri

	Also did some cleanup/rearranging of the async nautilus_view wrappers

	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(mozilla_location_callback), (mozilla_net_start_callback),
	(mozilla_net_stop_callback), (mozilla_dom_mouse_click_callback),
	(vfs_open_callback), (update_nautilus_uri),
	(make_full_uri_from_relative), (test_make_full_uri_from_relative),
	(dispatch_report_location_change):

	* src/nautilus-sidebar.c: (add_command_buttons):
	Fixed improper assumption that nautilus_file_is_local being TRUE
	means gnome_vfs_get_local_path will return a file path.  The "local"
	concept seems to apply to expected latancy, not URI schemes.  This
	was causing assertion failures when browsing to help: schemes (as
	noted in the comments to bug 6544)
	

2001-02-17  Richard Boulton <richard@tartarus.org>

	reviewed by: Ali Abdin <aliabdin@aucegypt.edu>

	* components/help/converters/gnome-db2html2/gdb3html.c
	* components/help/converters/gnome-db2html2/sect-elements.c
	* components/help/converters/gnome-db2html2/toc-elements.c
	Fix format string vulnerabilities, see bug 6702.  Fixes
	segfault when % character occurs in input files.

2001-02-17  Dan Mueth  <dan@eazel.com>

	reviewed by: Eskil

	Updated toplevel docs data file. Updated and added FDL/GPL
	licenses. Added OMF file for Nautilus User Guide.

	* Makefile.am:  Adding omf-install/
	* components/help/topleveldocs.xml: Updated toplevel docs
	* configure.in: Adding omf-install and user-guide/gnugpl
	* omf-install/Makefile.am: Added for OMF files
	* user-guide/C/Makefile.am: Updated for OMF file
	* user-guide/C/nautilus-C.omf: Added this OMF file
	* user-guide/Makefile.am: Added gnufdl/
	* user-guide/gnufdl/gnufdl.sgml: Updated
	* user-guide/gnugpl/Makefile.am: Added this file
	* user-guide/gnugpl/gnugpl.sgml: Added this file, GPL

2001-02-17  Kjartan Maraas  <kmaraas@gnome.org>

	* src/file-manager/fm-search-list-view.c: Fix typo.
	
2001-02-16  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 6689, Segmentation fault from volume_in_black_list after
	the death of the desktop.

	* src/file-manager/fm-desktop-icon-view.c: (volume_in_black_list):
	Add an assert to catch a NULL icon view being passed in.  We need to
	find out why this happens if it ever does.
	
	* src/nautilus-application.c: (window_can_be_closed),
	(is_last_closable_window), (volume_unmounted_callback):	
	Handle single window case in the code where we close the windows
	the are displaying the contents of the unmounted volume.  In the case
	of a single window, direct it back to the default home directory.

2001-02-16  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar-tabs.c: (draw_one_tab_themed),
	(draw_or_layout_all_tabs):
	fixed bug where the left edge of a sidebar tab wasn't
	prelighting correctly when the one before it was active.
	
2001-02-16  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Fix bug 4070 (Repeated clicks of BACK cause core dump):
	
	* src/nautilus-window-manage-views.c:
	(viewed_file_changed_callback): Use end_location_change instead,
	since cancel_location_change just does extra "go back to old view"
	that we don't need.
	(cancel_location_change): A little more sanity checking. Not sure
	if it really helps. The other changes should fix the bug.
	(begin_location_change): Use end_location_change to get rid of any
	previous change in progress since cancel_location_change just does
	extra "go back to old view" that we don't need.
	(report_location_change_callback): Use end_location_change to get
	rid of any previous change in progress since
	cancel_location_change just does extra "go back to old view" that
	we don't need.

	* src/file-manager/fm-list-view.c: (get_list_if_exists),
	(fm_list_view_clear): Don't create a list just to clear it.
	Crashed here while I was trying to work on the other bug.
	
2001-02-16  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 6724 (implement Vera's new text &
	organization for Preferences)

	There are a few open issues still, but they can be
	handled one at a time.

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_create_dialog),
	(global_preferences_install_sidebar_panel_descriptions):
	Tweak text, rework some comments, reorganize.

	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list): Reinstated a one-line fix
	that was accidentally merged away earlier.

2001-02-16  Robey Pointer  <robey@eazel.com>

	* nautilus.spec.in:

	Don't reference the three files that used to be in top/.

2001-02-16  Andy Hertzfeld  <andy@eazel.com>

	* components/image-viewer/nautilus-image-view.c:
	(zoomable_zoom_to_fit_callback), (rezoom_control),
	(control_size_allocate_callback), (image_fits_in_container),
	(scrolled_window_size_allocate_callback),
	(scrollable_control_factory):
	fixed a bunch of problems in the image view, including making
	the initial shrink-to-fit feature work again, made unneccessary
	scroll bars go away by using GTK_POLICY_AUTOMATIC, improved the
	scaling to Arlo's taste by using GDK_INTERP_BILINEAR, and tweaked
	the scale factors, plus other clean-ups.
	
	* src/nautilus-zoom-control.c: (create_zoom_menu_item):
	fixed bug 6288, bogus zoom levels displayed in zoom control, by making
	the rounding algorithm used in the menu consistent with the one
	used in the control.
	
2001-02-16  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 6477 (no way for intall view to send user "back where
	they came from") by adding a "go back" command for views.
	
	* libnautilus/nautilus-view-component.idl: Add "go back".
	* libnautilus/nautilus-view.h:
	* libnautilus/nautilus-view.c: (nautilus_view_go_back): Add "go
	back".
	* src/nautilus-view-frame-private.h:
	* src/nautilus-view-frame-corba.c: (go_back),
	(impl_Nautilus_ViewFrame_go_back): Add "go back".
	* src/nautilus-view-frame.h:
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_initialize_class),
	(nautilus_view_frame_go_back): Add "go back".
	* src/nautilus-window-manage-views.c: (go_back_callback): Add code
	to either go back or go home.
	
	* src/nautilus-window-toolbars.c:
	(back_or_forward_button_pressed_callback): Formatting tweak.

2001-02-16  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Mike Engber <engber@eazel.com>

	* libnautilus-extensions/nautilus-wrap-table.c:
	(wrap_table_get_content_dimensions):
	Fix bug 6683.  Bottom row is cut off in backgrounds/emblems dialog.
	
2001-02-16  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(check_no_two_packages_has_same_file):
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(osd_parse_file_list):
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_initialize),
	(remove_directories_from_provides_list), (eazel_softcat_get_info):

	Nobody wants to review my patch because everyone hates me.  This
	fixes the weird file/directory checks we were doing by using the
	new softcat fields to determine which ones are directories.  No
	more guesswork.  Also there's a softcat bug which causes the file
	list to sometimes contain repeated filenames, so this patch does a
	workaround for that too.

	* components/services/trilobite/doc/gconf.txt:

	Fix my dumb typo: jump-url is not a bool.
	
2001-02-16  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6606, only show user-mountable volumes in Disks menu
		
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(has_removable_mntent_options):
	Utility function to check the mntent structure for options
	that we have determined will do the best job of guessing that
	a volume is removable.
	
	(get_removable_volumes),
	(volume_is_removable), (get_current_mount_list),
	(mount_volume_add_filesystem), (open_cdda_device):
	Did some code cleanup.

2001-02-16  Darin Adler  <darin@eazel.com>

	Fix bug 6435 (report_location_change does not record in history).
	
	* src/nautilus-window-manage-views.c:
	(report_location_change_callback): Use change type of STANDARD
	instead of RELOAD.
	
2001-02-16  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-embed-extensions.cpp:
	Restore the original cast and lose the const.  Remove an unused
	variable.
	
2001-02-16  Andy Hertzfeld  <andy@eazel.com>

	removed the translation text services from the build, since
	they are not ready for commercial release.  Also, made the
	google and webster services localizable.  This also fixes
	bug 6704, translation doesn't work with large files.

	* components/text/nautilus-text-view.c: (add_one_service):
	made it use the localization framework for the menu label and
	tooltip
	
	* components/text/services/Makefile.am:
	* components/text/services/english_to_french.xml:
	* components/text/services/french_to_english.xml:
	removed the translation services
	
	* components/text/services/google.xml:
	* components/text/services/webster.xml:
	made the selection-based services localizable
	
	* po/POTFILES.in:
	added the selection-based services
	
2001-02-16  Robey Pointer  <robey@eazel.com>

	* components/mozilla/nautilus-mozilla-embed-extensions.cpp:

	Fix build bustage by breaking cast into two pieces (weird C++ism).

2001-02-16  Josh Barrow  <josh@eazel.com>

	* docs/smoketests.html:
	Made a few corrections

2001-02-16  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Finish fixing bug 6286 (need to re-apply optimization where we do
	a single directory load):

	* src/nautilus-window-manage-views.c: (begin_location_change): Do
	the force_reload work in here. We want it on all 4 kinds of
	location change (forward, back, new location, reload). Other
	browsers don't do reload on back, so we may want to change this at
	some point.
	(nautilus_window_reload): Remove the old code to invalidate from
	here now that it's done in begin_location_change.

	* src/file-manager/fm-directory-view.c: (load_location_callback),
	(load_directory), (finish_loading), (filtering_changed_callback):
	Remove the old code to do force_reload. The NautilusDirectory part
	of triggering a reload is now handled by the shell.

	* libnautilus-extensions/nautilus-directory.h:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_file_monitor_add): No force_reload parameter
	any more.
	(nautilus_directory_force_reload): New separate call used to force
	a reload. A method call so subclasses can implement.
	(nautilus_self_check_directory): Removed the FALSE force_reload
	argument to file_monitor_add.
	* libnautilus-extensions/nautilus-vfs-directory.c:
	(vfs_file_monitor_add): No force_reload parameter any more.
	(vfs_force_reload): Call through to
	nautilus_directory_force_reload_internal to do the real work.
	(nautilus_vfs_directory_initialize_class): Install the new
	force_reload function.
	* libnautilus-extensions/nautilus-merged-directory.c:
	(merged_file_monitor_add): No force_reload parameter any more.
	(merged_force_reload): Tell all of the real directories to force a
	reload.
	(monitor_add_directory): No force_reload to track any more.
	(nautilus_merged_directory_initialize_class): Install the new
	force_reload function.
	
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory-async.c:
	(nautilus_directory_force_reload_internal): Change the name of
	this function, since there's now a public function that is named
	nautilus_directory_force_reload.
	
	* libnautilus-extensions/nautilus-file-private.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_all_attributes): Made a separate call so other
	parts of the framework can use it.
	(nautilus_file_invalidate_all_attributes): Use the new call.
	
	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_monitor_add),
	(nautilus_tree_model_node_begin_monitoring_no_connect): Use the
	new force_reload call. The old one had more granularity and thus
	forced less to be reloaded, but it's OK to do a little more here.
	
	* libnautilus-extensions/nautilus-trash-monitor.c:
	(nautilus_trash_monitor_initialize): Removed the FALSE
	force_reload argument to file_monitor_add.

	Other stuff:
	
	* libnautilus-extensions/nautilus-directory-metafile.c:
	(get_metafile), (nautilus_directory_get_file_metadata),
	(nautilus_directory_get_file_metadata_list),
	(nautilus_directory_set_file_metadata),
	(nautilus_directory_set_file_metadata_list),
	(nautilus_directory_copy_file_metadata),
	(nautilus_directory_remove_file_metadata),
	(nautilus_directory_rename_file_metadata): Moved FIXMEs around.
	Pass NULL instead of &ev when calling bonobo_object_release_unref
	since we don't really want to do anything different if there's
	some kind of error.
	
	* nautilus-installer/install-lib/.cvsignore:
	* nautilus-installer/libtrilobite/.cvsignore:
	Gotta create these files when you make new directories.

	* README: Change xml-i18n-tools to mention the correct branch.

2001-02-16  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/Makefile.am:
	* components/mozilla/bonobo-extensions.c:
	* components/mozilla/bonobo-extensions.h:
	New files.  Cut and paste from nautilus-extensions to workaround
	licensing issues.
	
	* components/mozilla/main.c: (mozilla_object_destroyed):
	Mike Fleming added a nice feature that caches the mozilla process
	by delaying exit.  This makes jumping from web page to web page
	much faster.  However, it makes it harder to debug the mozilla
	component because it sticks around for a while and killing it by
	hand doesnt allow for clean shutdown.  So I added an debug
	environment variable that can be set to turn the delayed exit off.
	
	* components/mozilla/mozilla-events.cpp: Include the mozembed
	private header.  Im not quite sure why we were declaring the
	prototype found thre ourselves.
	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(charset_encoding_changed_callback),
	(encoding_menu_data_free_cover),
	(mozilla_view_create_charset_encoding_submenu),
	(mozilla_view_merge_menus), (bonobo_control_activate_callback),
	(mozilla_title_changed_callback), (mozilla_location_callback),
	(mozilla_net_state_callback), (mozilla_net_stop_callback),
	(mozilla_link_message_callback), (mozilla_progress_callback),
	(mozilla_dom_mouse_click_callback), (vfs_open_callback),
	(vfs_read_callback), (cancel_pending_vfs_operation),
	(navigate_mozilla_to_nautilus_uri):
	Add a charset encoding menu.  Also, changed the type of the
	mozilla member to be GtkMozEmbed instead of GtkWidget to reduce
	the amount of casting we did.

	* components/mozilla/nautilus-mozilla-embed-extensions.cpp:
	* components/mozilla/nautilus-mozilla-embed-extensions.h:
	New files.  Start of mozilla embed extensions.  Right now only
	charset encoding stuff.  Inspired somewhat by Galeon.
	* components/mozilla/nautilus-mozilla-ui.xml:
	Update for charset encoding menu support.

2001-02-16  Josh Barrow  <josh@eazel.com>

	* README:
	Added some text to explain the freetype fiasco.

2001-02-16  Ramiro Estrugo  <ramiro@eazel.com>

	* README: Clarify the fact that Mozilla M18 no longer works.
	* components/mozilla/mozilla-components.cpp: Remove obsolete
	Mozilla M18 support.  M18 no longer works.

2001-02-16  Ramiro Estrugo  <ramiro@eazel.com>

	* README: Update Mozilla requirements.
	* configure.in: Update the Mozilla milestone names to match the
	current Mozilla naming scheme.  Add a flag indicating whether the
	version of Mozilla we use has profiles support.
	* components/mozilla/Makefile.am:
	* components/mozilla/nautilus-mozilla-content-view.c:
	(pre_widget_initialize): 
	Add better profile support ifdef hackery.

2001-02-15  Robey Pointer  <robey@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_fill_from_packagedata),
	(corba_packagedatastruct_fill_deps),
	(packagedata_tree_from_corba_packagedatastructlist):

	Re-add 'provides' to the IDL so the install view can poke around
	for .desktop files.

	* nautilus-installer/src/installer.c:
	(get_detailed_errors_foreach), (get_detailed_errors):

	Speed up error checking by avoiding pieces of the graph we've
	already visited.

2001-02-15  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(check_dependencies_foreach),
	(check_no_two_packages_has_same_file),
	(check_conflicts_against_already_installed_packages):

	Remove errant unref during dupe-file check.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_parse_uri),
	(nautilus_service_install_done), (nautilus_service_install_failed),
	(nautilus_service_need_password),
	(nautilus_service_install_view_update_from_uri_finish),
	(nautilus_service_install_view_load_uri):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:

	Set password prompt to something semi-reasonable.  Fix up a few
	wrong behaviors in the case of having multiple toplevel packages.
	This still isn't working very well.
	
2001-02-15  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 5599, make objects in $USER/Nautilus localizable.  Fixed
	by creating a linkset to instead the Computer and Services icons,
	and removing the top directory and associated code, since it's no
	longer needed.
	
	* configure.in:
	removed data/top
	* data/Makefile.am:
	removed top directory
	* data/linksets/Makefile.am:
	* data/linksets/home.xml:
	added new home linkset
	
	* data/top/.cvsignore:
	* data/top/.nautilus-metafile.xml:
	* data/top/Computer:
	* data/top/Makefile.am:
	* data/top/Services:
	removed files from top
	
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_user_main_directory):
	changed it to no longer copy the top directory; instead,
	install the new linkset
	
	* po/POTFILES.in:
	added home.xml to the files to be localized
	
2001-02-15  Eric Fischer  <eric@eazel.com>

	* nautilus.spec.in:
	Building the installer into RPMs doesn't work, because I got
	something in the Makefiles wrong.  Revert the changes to the
	spec file so tinderbox comes back to life.  Will try again
	once I think I have it right.

2001-02-15  Robey Pointer  <robey@eazel.com>

	reviewed by: Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus-installer/src/installer.c:

	For now, make the bootstrap installer always run in debug mode
	and point to checkpoint:8888.

2001-02-15  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-root-helper.
	c: (discard_line), (eazel_helper_start):

	Add debug info to the roothelper so that we can debug failures
	better.

2001-02-15  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(dump_tree_helper), (dump_tree):

	Made dump_tree dump less redundant info (tries not to repeat
	sections of the graph it's already visited).
	
	* nautilus-installer/install-lib/Makefile.am:
	* nautilus-installer/libtrilobite/Makefile.am:

	Set LOG_DOMAIN to G_LOG_DOMAIN so our log catcher will actually
	work. :)

	* nautilus-installer/src/Makefile.am:

	Remove redundant object file.

	* nautilus-installer/src/create-eazel-installer.sh:

	By default, strip the installer binary before gzexe'ing it (this
	makes it much much smaller).  Eventually we'll want to add some
	sort of command-line option for deciding which kind to build.

	* nautilus-installer/src/installer.c: (conflict_check),
	(eazel_installer_initialize):

	Remember to nudge GTK+ after updating labels so they'll actually
	refresh.

	* nautilus-installer/src/link.sh:
	* nautilus-installer/src/main.c: (main):
	* nautilus-installer/src/prescript:

	Fix the prescript to work around a sad popt bug.

2001-02-15  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Mike Engber <engber@eazel.com>

	Fixed bug 6670, Segmentation fault when trying to access mounted
	removable volume with no media.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(create_unique_volume_name):
	Use the accessor function to access the volume name instead
	of accessing the structure directly.  The accessor protects
	us against NULL data.

2001-02-15  Eric Fischer  <eric@eazel.com>

	* nautilus.spec.in:
	Start building the eazel installer, and put it into its own RPM.
	(This should eventually be separate from building nautilus)

	* nautilus-installer/libtrilobite/Makefile.am:
	Add a dependency to create the .h files, since gmake complains
	otherwise.

2001-02-15  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 6589, nautilus crashes if a moderate sized text block
	is used for dictionary lookup.  Fixed by imposing sanity limits
	on both the selection size passed to services and the sidebar
	title.
	
	* components/text/nautilus-text-view.c: (handle_service_menu_item):
	truncate the selection if it's greater than a reasonable size.
	
	* src/nautilus-sidebar-title.c:
	(nautilus_sidebar_title_initialize),
	(nautilus_sidebar_title_set_text):
	truncate the sidebar title if it's longer than a reasonable limit.
	
2001-02-15  Michael Engber  <engber@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	* src/file-manager/fm-icon-view.c: (fm_icon_view_bump_zoom_level):
	Change fm_icon_view_bump_zoom_level to ignore bumps to out
	of bounds values - bug 6347.

2001-02-15  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(get_metafile), (nautilus_directory_get_file_metadata),
	(nautilus_directory_get_file_metadata_list),
	(nautilus_directory_set_file_metadata),
	(nautilus_directory_set_file_metadata_list),
	(nautilus_directory_copy_file_metadata),
	(nautilus_directory_remove_file_metadata),
	(nautilus_directory_rename_file_metadata):
	Added FIXMEs.

2001-02-15  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-image-table.h:
	* libnautilus-extensions/nautilus-image-table.c:
	(nautilus_image_table_add_empty_image): New function to add an
	empty space into the table.

	* libnautilus-extensions/nautilus-wrap-table.h:
	* libnautilus-extensions/nautilus-wrap-table.c:
	(nautilus_wrap_table_destroy), (nautilus_wrap_table_expose_event),
	(nautilus_wrap_table_map), (nautilus_wrap_table_unmap),
	(nautilus_wrap_table_add), (nautilus_wrap_table_remove),
	(nautilus_wrap_table_forall), (wrap_table_layout),
	(wrap_table_get_max_child_dimensions),
	(wrap_table_get_content_dimensions),
	(wrap_table_find_child_at_point),
	(nautilus_wrap_table_reorder_child): Change 'items' to 'childern'
	(nautilus_wrap_table_get_num_children): New function to get the
	number of chilren.

	* src/nautilus-property-browser.c: (labeled_image_configure),
	(labeled_image_new), (make_properties_from_directories),
	(add_reset_property), (make_properties_from_xml_node),
	(nautilus_property_browser_update_contents):
	Modify some constants and add new ones for the image table
	layout.  Andy is going to tweak these later.
	Move the erase object back to the end of the table.

2001-02-15  J Shane Culpepper  <pepper@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_transfer_ok):

	Fix for Bug #1505, Cancelled copy operations leave partial
	files.  Nautilus now catches cancel and deletes the partial
	file.

2001-02-15  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>
                     Except for the self checks code.
	
	Change code that used a ArtIRect as a "frame" to use
	NautilusDimensions instead.  Change all foo_frame functions to
	foo_dimensions.

	* libnautilus-extensions/nautilus-art-extensions.h:
	Add a new structure to represent dimensions using signed integers.
	Retire nautilus_art_ipoint_assign.
	* libnautilus-extensions/nautilus-art-extensions.c:
	(nautilus_dimensions_empty): New function to check for empty
	dimensions.
	(nautilus_art_irect_assign_dimensions): New function to assign
	dimensions to a rectangle.
	(nautilus_self_check_art_extensions): New self checks.

	* libnautilus-extensions/nautilus-art-gtk-extensions.h:
	* libnautilus-extensions/nautilus-art-gtk-extensions.c:
	(nautilus_gdk_rectangle_to_art_irect),
	(nautilus_screen_get_dimensions), (nautilus_gdk_window_get_bounds),
	(nautilus_gdk_window_get_screen_relative_bounds),
	(nautilus_gtk_widget_get_bounds),
	(nautilus_gtk_widget_get_dimensions),
	(nautilus_gdk_window_clip_dirty_area_to_screen),
	(nautilus_art_irect_to_gdk_rectangle),
	(nautilus_gdk_window_get_dimensions): New function to get
	the dimensions of a GdkWindow.
	Update for frame to dimensions changes.  Change functions names to
	lose the "irect" sub-prefix.

	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.h:
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(nautilus_gdk_pixbuf_get_dimensions),
	(nautilus_gdk_pixbuf_fill_rectangle_with_color),
	(nautilus_gdk_pixbuf_draw_to_drawable),
	(nautilus_gdk_pixbuf_draw_to_pixbuf),
	(nautilus_gdk_pixbuf_draw_to_pixbuf_alpha),
	(nautilus_gdk_pixbuf_new_from_pixbuf_sub_area),
	(pixbuf_draw_tiled), (nautilus_gdk_pixbuf_draw_to_pixbuf_tiled),
	(nautilus_gdk_pixbuf_draw_to_drawable_tiled),
	(nautilus_gdk_pixbuf_intersect): New functions 
	(nautilus_self_check_gdk_pixbuf_extensions): New self checks.
	Update for frame vs dimenensions changes.  Simplify clipping code
	by using nautilus_gdk_pixbuf_intersect.  Move
	nautilus_gdk_window_get_dimensions to
	nautilus_gdk_window_get_dimensions in art-gtk-extensions.

	* libnautilus-extensions/nautilus-debug-drawing.c:
	(debug_pixbuf_viewer_size_request),
	(nautilus_debug_pixbuf_draw_point),
	(nautilus_debug_pixbuf_draw_rectangle),
	(nautilus_debug_pixbuf_draw_rectangle_inset):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-clickable-image.c:
	(label_handle_motion):
	Update for art-gtk extensions changes.
	
	* libnautilus-extensions/nautilus-glyph.h:
	* libnautilus-extensions/nautilus-glyph.c: (nautilus_glyph_new):
	Change order of parameters to match NautilusScalalbleFont.
	(nautilus_glyph_get_dimensions), (nautilus_glyph_draw_to_pixbuf):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-lib-self-check-functions.h:
	New declaration for art_extensions and gdk_pixbuf_extensions.
	
	* libnautilus-extensions/nautilus-self-checks.c:
	(nautilus_check_rectangle_result),
	(nautilus_check_dimensions_result):
	* libnautilus-extensions/nautilus-self-checks.h:
	Add support for checking functions that return rectangles and
	dimensions.
	
	* libnautilus-extensions/nautilus-scalable-font.h:
	* libnautilus-extensions/nautilus-scalable-font.c:
	(nautilus_scalable_font_measure_text): Return
	NautilusDimensions instead of using pointer parameters.
	(nautilus_scalable_font_text_width): Simplify by calling
	scalable_font_measure_text.
	(nautilus_scalable_font_draw_text),
	(nautilus_scalable_font_measure_text_lines),
	(nautilus_scalable_font_draw_text_lines_with_dimensions),
	(nautilus_scalable_font_draw_text_lines):
	Update for frame vs dimenensions changes.  Use NautilusDimensions
	arrays instead of individial width and height arrays.  Change all
	function signatures to pass in only a font_size instead of both
	font_width and font_height.  Simplifies using these a bit.
	(nautilus_scalable_font_largest_fitting_font_size): Fix bug where
	we were always using the wrong font size to compute the largest
	fitting font.
	
	* libnautilus-extensions/nautilus-icon-factory.c: (embed_text):
	Update for scalable font font_size api changes.
	
	* libnautilus-extensions/nautilus-image-table.c:
	(image_table_clear_dirty_areas):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-image.c:
	(nautilus_image_size_request), (image_get_pixbuf_dimensions),
	(image_get_pixbuf_bounds), (image_get_tile_dimensions):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-label.h:
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_initialize_class), (nautilus_label_set_arg),
	(nautilus_label_get_arg), (nautilus_label_size_request),
	(nautilus_label_size_allocate), (label_composite_pixbuf_callback),
	(label_draw_text_to_pixbuf): Fix a type.  Was using [x,x] instead
	of [x,y] to render the string.
	(label_get_text_dimensions), (label_get_text_bounds),
	(label_get_tile_dimensions), (label_line_geometries_clear),
	(label_line_geometries_recompute),
	Update for frame vs dimenensions changes.  Make the
	'smooth_line_wrap' attribute an int instead of a guint.  Use an
	array of NautilusDimensions to store text lines geometries instead
	of separete width and height arrays.
	(label_get_default_line_wrap_width),
	(nautilus_label_set_smooth_line_wrap_width),
	(nautilus_label_get_smooth_line_wrap_width):
	Change signature to return an int instead of a guint.
	
	* libnautilus-extensions/nautilus-labeled-image.c:
	(nautilus_labeled_image_size_request),
	(labeled_image_get_image_dimensions),
	(labeled_image_get_label_dimensions),
	(labeled_image_get_image_bounds_fill),
	(nautilus_labeled_image_get_image_bounds),
	(labeled_image_get_label_bounds_fill),
	(nautilus_labeled_image_get_label_bounds),
	(labeled_image_get_content_dimensions),
	(labeled_image_get_content_bounds):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-smooth-widget.h:
	* libnautilus-extensions/nautilus-smooth-widget.c:
	(smooth_widget_paint_tile_transparent),
	(nautilus_smooth_widget_get_preferred_dimensions):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-tabs.c: (measure_tab_name),
	(draw_tab_label):
	Update for font api changes.
	
	* libnautilus-extensions/nautilus-text-layout.c:
	(nautilus_text_layout_new), (nautilus_text_layout_paint):
	Update for frame vs dimenensions changes.

	* libnautilus-extensions/nautilus-wrap-table.c:
	(nautilus_wrap_table_size_request), (wrap_table_layout),
	(wrap_table_art_irect_max_dimensions),
	(wrap_table_get_max_child_dimensions),
	(wrap_table_get_content_dimensions):
	Update for frame vs dimenensions changes.

	* src/nautilus-about.c: (draw_aa_string):
	Update for frame vs dimenensions changes.

	* src/nautilus-sidebar-tabs.c: (draw_one_tab_plain),
	(draw_one_tab_themed), (get_tab_width):
	Update for frame vs dimenensions changes.

	* test/test-nautilus-font-simple.c: (main):
	* test/test-nautilus-font.c: (main):
	* test/test-nautilus-glyph-simple.c: (glyph_new):
	* test/test-nautilus-glyph.c: (glyph_new), (main):
	* test/test-nautilus-pixbuf-tile.c:
	* test/test.c: (test_pixbuf_draw_rectangle_tiled):
	Update test for frame vs dimenensions changes and font api
	changes.

2001-02-14  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/mozilla-preferences.cpp:

	Bug 6592 -- Embedded Mozilla defaults to port 8080 when HTTP
	proxy is enabled like everything else

2001-02-14  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-xml-package-list.c:
	(osd_parse_shared), (eazel_install_packagelist_parse):
	* components/services/install/lib/eazel-install-xml-package-list.h:
	* components/services/install/lib/eazel-softcat-private.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_finalize), (eazel_softcat_initialize),
	(eazel_softcat_reset_server_update_flag), (eazel_softcat_query):

	Return the softcat DB revision with the parsed package list, and
	use that info to hook into Eskil's error trap.  Also free up the
	softcat private data when the object goes away.

2001-02-14  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6653, throwing away something with the desktop not on will
	bring up an empty trash if the desktop is later turned on
	
	* src/file-manager/fm-desktop-icon-view.c:
	(update_trash_link_and_delete_copies):
	Preflight state of trash icon when we are doing all of the other
	icon state validity checks.

2001-02-14  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-factory.c:
	(is_supported_mime_type),
	(nautilus_icon_factory_get_icon_for_file):
	fixed bug 6623, .fig files cause warnings to spew, by checking for
	types that we don't support and excluding them from thumbnailing.
	
2001-02-14 John Fleck <jfleck@inkstain.net>

	reviewed by: Ali Abdin <aliabdin@aucegypt.edu>
	* components/help/converters/gnome-db2html2/toc-elements.c
	fix bug # 6551 - add test to see if article header has already
	been printed and don't print it a second time

2001-02-14  Rebecca Schulman  <rebecka@eazel.com>
	Fix bugzilla.eazel.com bug 6416, that the search results view
	needs to inform the user if indexing is disabled or blocked
	on their system.  I haven't added the final text yet, since
	it is not complete.  The final text will be swapped in.

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* src/file-manager/fm-search-list-view.c:
	(load_location_callback),
	(real_load_error), (display_indexed_search_problems_dialog),
	(display_system_services_are_blocked_dialog),
	(display_system_services_are_disabled_dialog): Add the dialogs for
	the cases when searches are enabled and disabled in the right
	cases.  Stop displaying an error dialog about a problem loading
	the location in the case where the directory load is cancelled.

	* src/file-manager/nautilus-indexing-info.c:
	(show_index_progress_dialog), (show_reindex_request_dialog),
	(show_indexing_info_dialog):
	Fix an obscure bug introduced in my last checkin by
	removing a reference to the index status that was kept by the
	medusa system state poller on destroy. If this reference was left around,
	enabling or disabling indexing could crash nautilus.

2001-02-14  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	* src/nautilus-applicable-views.c:
	(got_minimum_file_info_callback),
	(nautilus_determine_initial_view),
	(nautilus_determine_initial_view_cancel): Get rid of the code to
	monitor the directory. It's now moved up one level to the
	manage-views.c code.
	* src/nautilus-window-private.h:
	* src/nautilus-window-manage-views.c: (free_location_change),
	(begin_location_change): Move the code that starts monitoring the
	directory up here instead.

	* src/nautilus-application.c: (volume_unmounted_callback): Rewrote
	this code to not use the viewed_file private field. There's a
	public call to get the current location that should work just as
	well. Also fix bug where it would ignore the scheme and just look
	at the path part.
	
	* libnautilus-extensions/nautilus-directory-metafile.c:
	(nautilus_directory_use_self_contained_metafile_factory): Added
	check to detect if this is called after using the factory.
	(free_factory): Simplified.
	(get_factory): New function to simplify get_metafile.
	(get_metafile): Simplified.

	* src/nautilus-location-bar.c: (try_to_expand_path): Fix storage
	leak.

	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_key_press): Added FIXME after noticing a
	particularly lame version of tilde expansion in here. I'm not sure
	this is even used to good effect, since the location bar now does
	its own tidle expansion.

	* README: Fixed many inaccuracies.
	
	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_free): Formatting tweaks.
	* src/nautilus-theme-selector.c:
	(get_theme_description_and_display_name): Formatting tweaks.

2001-02-14  Michael Engber  <engber@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_delayed_close_destroy_dialog_callback),
	(timed_wait_delayed_close_timeout_callback), (timed_wait_free),
	(timed_wait_dialog_destroy_callback), (timed_wait_callback),
	(nautilus_timed_wait_start_with_duration),
	(nautilus_timed_wait_stop):
	Non-cancellable timed wait dialogs do not free the timed wait
	when the dialog is dismissed - instead they wait for the call to
	timed_wait_stop to do it - otherwise the call to timed_wait_stop
	asserts. Removed superfluous argument in timed_wait_callback.
	When timed wait dialog remaining up due to minimum uptime feature
	are closed by the user, we now cancel the pending timeout that
	would close them without user intervention.

2001-02-14  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(eazel_install_check_existing_packages), 
	Final fix for 3511, if multiple packages with same name are
	already installed, and more than one passes verify, fail
	operation.
	(install_packages),
	(uninstall_packages):
	call softcat reset db update mjick.
	
	* components/services/install/lib/eazel-softcat.h:
	* components/services/install/lib/eazel-softcat-private.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_initialize),
	(eazel_softcat_reset_server_update_flag),
	(eazel_softcat_error_string), (eazel_softcat_query):
	Code to make get_info return a enum indicating that the db was
	updated since last time.
	Also a code to reset the flag.

2001-02-14  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: added support for scrollkeeper
	this also requires having the scrollkeeper package
	to run, have not added that dependancy as it is not
	easily available.

2001-02-14  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Mike Engber <engber@eazel.com>

	Fixed bug 6606, only show user-mountable volumes in Disks menu.
	
	Look for options "user" or "owner" instead of "noauto"
	to determine if volume if removable.

	* libnautilus-extensions/nautilus-volume-monitor.c:
	(volume_is_removable), (close_error_pipe):
		
2001-02-14  Eric Fischer <eric@eazel.com>

	* nautilus-installer/install-lib/Makefile.am:
	Gmake seems to have trouble recognizing .c -> .o dependencies
	when the .c files don't appear until after the make has begun,
	so explicitly add the rpm3 and rpm4 dependencies.

2001-02-13  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_file_conflict_check_signal),
	(eazel_file_uniqueness_check_signal),
	(eazel_feature_consistency_check_signal), (something_failed),
	(eazel_preflight_check_signal), (dep_check), (md5_check_failed),
	(delete_files):
	Added --silent, suppresses random spewage.
	Added autocont, so if there was multiple problems, answering y to
	first "continue y/n ?" will answer y to all.
	Fixed for the modified preflight signal.
	
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_fill_from_packagedata),
	(packagedata_from_corba_packagedatastruct):
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_preflight_check), (eazel_install_callback_class_initialize):
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/idl/trilobite-eazel-install.idl:
	Changed preflight to take the operation type as argument.
	Added modification status to the corba version of package data.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(prune_failed_packages_helper),
	(eazel_install_check_existing_packages), (get_softcat_info),
	(is_satisfied), (check_dependencies_foreach),
	(do_file_conflict_check), (execute),
	(eazel_uninstall_upward_traverse), (install_packages):
	Fixed bug 3511, 4502 (libeazelinstall part, view still needs
	stuff).
	
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_install_packages), (eazel_install_init_transaction),
	(eazel_install_emit_preflight_check_default):
	More debug spewage.
	Fixed cut'n'paste bug in init_transaction.
	Updated preflight signal.
	
	* components/rpmview/nautilus-rpm-view-install.c
	* components/services/install/nautilus-view/nautilus-service-install-view.c
	Updated preflight signal.

	* components/services/install/lib/eazel-install-problem.h:
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_breaks_foreach),
	(get_detailed_messages_foreach), (compare_problem_case),
	(add_continue_with_flag_case), (add_force_install_both_case),
	(add_force_remove_case), (get_detailed_cases_foreach),
	(eazel_install_problem_case_to_string),
	(eazel_install_problem_case_foreach_destroy),
	(build_categories_from_problem_list),
	(eazel_install_problem_step_problem), (eazel_install_problem_done),
	(eazel_install_problem_wait_for_completion),
	(eazel_install_problem_handle_cases):
	s/Fuckup/Feature dependency/
	Lots of improvement.
	Change some cases.
	Did stuff...
	Added cases of "cancelling package", "continue with flag",
	"invalid".
	Made EazelInstallProblem wait for the operation to complete, as
	not to confuse the service object by starting it and resetting
	values.
	
	
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_is_installed), (eazel_package_system_verify):
	* components/services/install/lib/eazel-package-system.h:
	* components/services/install/lib/eazel-package-system-private.h:
	* components/services/install/lib/eazel-package-system-rpm3-private
	.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(rpmmonitorpiggybag_new), (eazel_package_system_rpm3_verify_impl),
	(eazel_package_system_rpm3_verify):
	* components/services/install/lib/eazel-package-system-skeleton.c:
	(eazel_package_system_skeleton_verify):
	Fixed 6494, also made verify return boolean, propageted change
	down throughout the hierachy.
	
	* components/services/install/lib/eazel-package-system-types.c:
	(eazel_install_gtk_marshal_BOOL__ENUM_POINTER_INT_INT):
	New signal for preflight.

2001-02-14  Eric Fischer <eric@eazel.com>

	This is a bunch of changes leading up to Bug 6515, so
	the installer can get built by just an extra flag to
	configure rather than its own script.

	* Makefile.am:
	Add nautilus-installer to SUBDIRS

	* acconfig.h:
	Add ENABLE_INSTALLER to things that can be configured

	* configure.in:
	Add --enable-installer command line flag.  Set PACKAGE_SYSTEM_OBJECT
	and PACKAGE_SYSTEM_SOURCE based on whether rpm 3 or 4 is installed.
	Create nautilus-installer Makefiles

	* nautilus-installer/Makefile.am:
	Remove things that Robey said were no longer used.  Add libtrilobite
	and install-lib to SUBDIRS that need to be built.

	* nautilus-installer/install-lib/Makefile.am:
	New Makefile that builds a second copy of the installer libraries
	with weird flags as needed by the installer.

	* nautilus-installer/libtrilobite/Makefile.am:
	New Makefile that builds a second copy of the trilobite libraries
	with weird flags as needed by the installer.
	
	* nautilus-installer/src/Makefile.am:
	Do in the Makefile what formerly had been done in link.sh (build
	the installer, and create a self-extracting version of it).

	* nautilus-installer/src/create-eazel-installer.sh:
	Script, adapted from what's in link.sh, to create a self-extracting
	installer.

2001-02-14  Josh Barrow  <josh@eazel.com>

	* README:
	Made a few changes to URLs and a couple of places where things wer
	worded in odd ways.

2001-02-14  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2917 (Wrong capitalization in "Lay Out" menu)

	* src/file-manager/nautilus-icon-view-ui.xml:
	Verafied the capitalization.

2001-02-14  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6465, Music view buttons stretch for songs with
	very long titles.
	
	* components/music/nautilus-music-view.c: (add_play_controls):
	Set the pack box flag so that the buttons don't expand.
	
2001-02-14  Laszlo Kovacs <laszlo.kovacs@sun.com>
	* components/help/hyperbola_top_doc_tree_populate.h:
          components/help/hyperbola-filefmt.c:
          components/help/hyperbola-nav-tree.c:
          (ctree_populate_subnode, ctree_populate,
           hyperbola_navigation_tree_new,
           hyperbola_navigation_tree_load_location,
           hyperbola_navigation_tree_select_row):
        Toplevel docs put into a separate ctree in
        the GUI of the help sidebar if Scrollkeeper
        is enabled.
        Note that this is not the final GUI, only the widget
        layout is right, the look will be changed by somebody
        who knows more gtk than me. Dan Mueth tries to find the
        right person.

2001-02-14  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am: Move $(FREETYPE2_CFLAGS) all the way to the
	top of $(INCLUDES), so that if there are multiple versions of
	freetype installed in the build machine, then we will catch only
	the one we are interested in.

2001-02-14  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Added Norwegian (nynorsk) to ALL_LINGUAS.
	
2001-02-14  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-viewport.c:
	(nautilus_viewport_set_never_smooth):
	Fix a very dumb typo with the last commit.  Thanks for 
	JP Rosevear <jpr@ximian.com> for spotting this.
	
2001-02-14  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus.spec.in:
	Require 'freetype >= 2.0' not 'freetype2 >= 2.0'
	
2001-02-14  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: JP Rosevear <jpr@ximian.com>

	* libnautilus-extensions/nautilus-viewport.c:
	(nautilus_viewport_initialize), (nautilus_viewport_realize),
	(nautilus_viewport_set_is_smooth),
	(nautilus_viewport_get_is_smooth),
	(nautilus_viewport_set_never_smooth):
	Make sure the "never_smooth" and "is_smooth" attributes work as
	advertised.  Make the "never_smooth" attribute default to TRUE,
	since that makes it work with more gtk widgets.
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize),
	(nautilus_property_browser_update_contents):
	Set the "never_smooth" attribute of the viewports to FALSE so that
	the can be smooth.

2001-02-13  Ramiro Estrugo  <ramiro@eazel.com>

	* test/test-nautilus-glyph.c: (main):
	* test/test-nautilus-label-simple.c: (main):
	Two very tiny tweaks to help debug clipping bugs.
	
2001-02-13  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Rebecca Schulman  <rebecka@eazel.com>

	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(nautilus_gdk_pixbuf_new_from_pixbuf_sub_area),
	(nautilus_gdk_pixbuf_new_from_existing_buffer):
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.h:
	New function to create a pixbuf from an existing buffer and clip
	area.
	
2001-02-13  Robey Pointer  <robey@eazel.com>

	* Makefile.am:

	Add nautilus-installer to EXTRA_DIST to fix tinderbox breakage.
	
2001-02-13  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: Seth Nickell <seth@eazel.com>

	Fix bugzilla.eazel.com bug 6417, that the indexing
	information dialog should not be shown if indexing is
	disabled or blocked.

	* src/file-manager/nautilus-indexing-info.c: (dialog_close_cover),
	(show_index_progress_dialog), (show_reindex_request_dialog),
	(show_indexing_info_dialog):
	Add new dialogs for the case when indexing is off,
	and close each dialog in the case where the status of indexing
	changes.

2001-02-13  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Arik Devens  <arik@eazel.com>

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-label.c:
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	* libnautilus-extensions/nautilus-scalable-font.c:
	* libnautilus-extensions/nautilus-scalable-font.h:
	* libnautilus-extensions/nautilus-text-layout.c:
	* libnautilus-extensions/nautilus-text-layout.h:
	* test/test-nautilus-font.c:
	Move the text layout code to its own place.  No real code changes.

2001-02-13  Andy Hertzfeld  <andy@eazel.com>

	reviewed by: Arik Devens  <arik@eazel.com>

	* src/nautilus-property-browser.c: (add_pattern_to_browser):
	fixed bug 6554, typing random text into the background selector
	crashes, by adding a check for a valid path and displaying an
	error dialog if the path isn't valid.

2001-02-13  Arik Devens  <arik@eazel.com>

	reviewed by: Andy Hertzfeld  <andy@eazel.com>

	Fixed bug 6582, Editing location bar crashes Nautilus, leaves
	spurious text.
	Fixed duplicate bug 6585, Nautilus crashed if type "~/asdfasdf" in
	location bar.
	
	* src/nautilus-location-bar.c: (try_to_expand_path): Removed
	spurious g_free that was causing massive breakage.
	
2001-02-13  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 6385 (Properties window doesn't set/display
	icon correctly for Nautilus link files)

	Now the Properties window keeps around an "original
	file" and a "target file", which are currently the
	same for all files except Nautilus links. The original
	file is used to display/set the icon & name. (So you
	can edit the name of your Home icon in the properties
	window now also.)

	* src/file-manager/fm-properties-window.c:
	Renamed details->file to details->target_file. Added
	details->original_file. Removed two details fields
	that were unused.
	
	(directory_contents_value_field_update),
	(attach_directory_contents_value_field),
	(update_visibility_of_item_count_fields),
	(should_show_custom_icon_buttons), (should_show_file_type),
	(should_show_accessed_date), (should_show_mime_type),
	(create_emblems_page),
	(append_special_execution_checkbox), (create_permissions_page),
	(should_show_emblems), (should_show_permissions),
	(real_shutdown):
	Updated for name change only.
	
	(create_basic_page): Use original file for icon & name widgetry.

	(startup_data_new), (startup_data_free): New functions used to
	manipulate the data needed before a Properties window object
	exists for a given file.

	(create_properties_window): Reworked to use StartupData and set up
	both target_file and original_file.

	(get_target_file): Renamed from get_and_ref_file_to_display.

	(create_properties_window_callback): Reworked to use StartupData;
	slight reordering due to object lifetime issues.
	
	(cancel_create_properties_window_callback),
	(directory_view_destroyed_callback), (remove_pending_file),
	(fm_properties_window_present):
	Reworked to use StartupData.
	
	(real_destroy): clean up after original_file and target_file.
	
	(set_icon_callback): Use original_file.
	(select_image_button_callback),
	(remove_image_button_callback): Changed signatures to take
	FMPropertiesWindows instead of NautilusFiles; use original_file.

2001-02-13  Michael Engber  <engber@eazel.com>

	reviewed by: John Sullivan

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(nautilus_directory_set_file_metadata_list):
	Fix call to CORBA_sequence_set_release on the wrong
	(non-CORBA) list - bug 6575.

2001-02-13  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 6408 (nautilus_view_report_load_failed causes Nautilus to
	segfault in an idle callback):

	* libnautilus/nautilus-idle-queue.c: (execute_queued_functions),
	(nautilus_idle_queue_destroy): Changed the idle queue so it can
	handle being destroyed while inside one of the queued functions.

	Fix bug 6402 (Click desktop icon -> Nautilus window not moved to
	front):
	
	* src/nautilus-window-manage-views.c: (open_location): Bring the
	existing window up when it's reused in the "open icon on desktop"
	in single-window mode.

	Other changes:

	* libnautilus-extensions/nautilus-icon-factory.c:
	(is_theme_in_user_directory): Rename from "check_local_theme"
	and changed it to use a normal function result instead of taking
	a gboolean pointer.
	(set_theme): Use new function and booleans by their new names.
	"in_user_directory" instead of "local".
	(make_full_icon_path): Just the name change.
	(get_themed_icon_file_path): Take a boolean parameter instead of
	trying to figure out if the theme is in the user directory, because
	the old way would get it wrong for the default theme.
	(get_icon_file_path): Pass in the boolean to say if the theme is
	in the user directory or not.

	* libnautilus-extensions/nautilus-string.h: Remove repeated
	declaration for nautilus_str_get_prefix.

	(These not reviewed:)
	
	* librsvg/rsvg-ft.c: (rsvg_ft_glyph_evict): Fix code that was
	looking at the "prev" pointer of a victim after freeing it. Also
	made some other code simplifications.

	* src/nautilus-theme-selector.c:
	(render_theme_name_and_description): Added an explicit call to
	gtk_widget_realize before grabbing the style field and expecting
	it to have gc's in it. Not sure why no one ran into this before.

2001-02-13  Eric Fischer <eric@eazel.com>

	* configure.in:
	Allow RPM 4.* instead of only 4.0

2001-02-13  Andy Hertzfeld  <andy@eazel.com>

	* components/text/nautilus-text-view.c: (add_services_to_menu),
	(nautilus_text_view_build_service_menu):
	made the text view look for services in the updates folder, so we
	can add new services in the same fashion as bookmarks.  Also,
	keep a list of the added service filenames so if the same service
	is present in multiple directories, it only gets added once.
	
2001-02-13  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* nautilus.spec.in: enabled make -k check

2001-02-13  Michael Engber  <engber@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(nautilus_directory_use_self_contained_metatfile_factory),
	(get_metafile), (nautilus_directory_set_file_metadata_list):
	* libnautilus-extensions/nautilus-directory-metafile.h:
	* libnautilus-extensions/nautilus-metafile.c: (destroy),
	(corba_get_list):
	* src/nautilus-main.c: (main):
	The metafile code now circumvents oaf when nautilus is performing
	a self check - bug 6552.

2001-02-13  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* nautilus.spec.in: re-enabled building...

2001-02-13  John Sullivan  <sullivan@eazel.com>

	Fixed bug 5647 (Control-left/right for keyboard focus
	movement conflicts with Sawfish keyboard shortcuts)

	* libnautilus-extensions/nautilus-icon-container.c:
	(keyboard_move_to), (keyboard_space): Use Alt instead
	of Control for keyboard focus movement and selection
	toggling, per Don.

2001-02-13  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* nautilus.spec.in: took make check out of here
	* src/Makefile.am: re-enabled test target

2001-02-13  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-glyph.h:
	* libnautilus-extensions/nautilus-glyph.c:
	New class.  A wrapper on RsvgGlyph that makes it simple and fast
	to draw smooth text on pixbufs
	
	* libnautilus-extensions/nautilus-clickable-image.c:
	(nautilus_clickable_image_initialize_class),
	(nautilus_clickable_image_realize):
	Remove unrealize() method that was a noop.
	
	* libnautilus-extensions/nautilus-debug-drawing.c:
	(nautilus_debug_pixbuf_draw_point),
	(nautilus_debug_pixbuf_draw_rectangle),
	(nautilus_debug_pixbuf_draw_rectangle_inset):
	* libnautilus-extensions/nautilus-debug-drawing.h:
	Add some pixbuf drawing functions to debug clip areas in pixbufs.

	* libnautilus-extensions/nautilus-image-table.c:
	(nautilus_image_table_initialize_class),
	(nautilus_image_table_remove):
	Remove add() method that was a noop. 

	* test/.cvsignore:
	* test/Makefile.am:
	* test/test-nautilus-font-simple.c: (main):
	* test/test-nautilus-font.c: (main):
	* test/test-nautilus-glyph-simple.c: (glyph_new), (main):
	* test/test-nautilus-glyph.c: (glyph_new), (main):
	* test/test.c: (test_window_set_title_with_pid),
	(test_pixbuf_draw_rectangle_tiled):
	* test/test.h:
	New NautilusGlyph tests.  Also remove the broken pixbuf drawing
	debug code.  Use the debugging code in nautilus-debug-drawing.[ch]
	instead.
	
2001-02-13  Arik Devens  <arik@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 5837, 'Home Location' preference should accept ~.
	Fixed bug 6463, GNOME-VFS spews critical errors as you type an
	incomplete path in the location bar. 
	Fixed bug 6478, nautilus crashes on ~somedir/ if that dir
	doesn't exist.
	Fixed bug 6506, Entering "~" in Add New Background Dialogue box
	causes Nautilus to crash.

	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_initialize), (nautilus_entry_key_press): Added
	setting of expand_tilde to FALSE. Added a slash case so that ~/
	gets expanded to $(HOMEDIR).
	* libnautilus-extensions/nautilus-entry.h: Added gboolean
	expand_tilde to the NautilusEntry struct.
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_from_input): Added falling into default case
	on ~'s if the dir doesn't exist so they end up at http://'s.
	* libnautilus-extensions/nautilus-preferences-item.c:
	(preferences_item_create_editable_string): Added special case
	setting of expand_tilde to TRUE on the home dir preference box.
	As well as a FIXME saying this should be dealt with later on.
	* libnautilus-extensions/nautilus-text-caption.c:
	(nautilus_text_caption_initialize), (entry_changed_callback),
	(nautilus_text_caption_set_editable),
	(nautilus_text_caption_set_expand_tilde): Changed
	NautilusTextCaption to use NautilusEntry instead of GtkEntry.
	Added function to set expand tilde on NautilusText Caption.
	Updated set_editable to work with NautilusEntry.
	* libnautilus-extensions/nautilus-text-caption.h: Added
	nautilus_text_caption_set_expand_tilde function prototype.
	* src/nautilus-location-bar.c: (try_to_expand_path),
	(nautilus_location_bar_initialize): Added expanding of ~'s at
	the beginning of the location to full path. Added setting of
	expand_tilde to TRUE.
	* src/nautilus-property-browser.c: (add_pattern_to_browser):
	Added if statement to not attempt to do anything if the dir
	chosen uses ~ do to gtk brokenness. Also added error dialog
	that explains what happened to the user.

2001-02-13  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-theme-selector.c:
	(nautilus_theme_selector_initialize), (theme_style_set_callback),
	(render_theme_name_and_description), (add_pixbuf_to_theme_list),
	(add_theme):
	fixed bug 5951, hard-coded geometry in the theme selector, by
	implementing the design that Arlo wanted, with the theme name
	above the theme description instead of in separate columns.
	
2001-02-12  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:

	Move -lrpmio earlier in the RPM_LIBS line, because the bootstrap
	installer is picky about it.  Also, generate the installer's
	Makefile during the 'configure' stage.
	
	* nautilus-installer/src/Makefile.am:

	Use predefined macros for most libraries (still keeping them to
	the mininum) and get libtool/automake to do the heavy lifting part
	of making a static binary.
	
	* nautilus-installer/src/callbacks.c: (druid_cancel),
	(druid_finish):

	Try to avoid unref'ing or using the installer object during button
	callbacks if it hasn't been created yet.

	* nautilus-installer/src/installer.c: (eazel_installer_finalize):

	Don't unref the service object, it causes assertions.
	
	* nautilus-installer/src/link.sh:

	Make it so that (at least for me) the bootstrap installer will
	build on a RH70 system now.

2001-02-12  Robin * Slomkowski  <rslomkow@eazel.com>

	* src/Makefile.am: disabled "make check" by commenting
	out the TEST directive

2001-02-12  John Harper  <jsh@eazel.com>

	reviewed by Michael Engber  <engber@eazel.com>

	Fix bug 6383 (Esc-cancel from icon stretching doesn't work on
	desktop):

	* libnautilus-extensions/nautilus-icon-container.c
	(start_stretching): call nautilus_gdk_window_focus on the
	toplevel widget of the icon container

2001-02-12  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* src/nautilus-application.c: (nautilus_application_startup):

	Follow --quit's lead and avoid unref'ing to avoid hanging.
	
	* src/nautilus-shell.c: (restore_window_states):

	Don't double-free the list elements in the restored window list
	after restart.

2001-02-12  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_fetch_remote_file):

	Erase the package if it didn't finish downloading.
	
	* components/services/trilobite/libtrilobite/trilobite-core-messagi
	ng.c:

	Add <string.h> header for RH7.
	
	* nautilus-installer/src/callbacks.c: (druid_cancel),
	(druid_delete), (druid_finish):
	* nautilus-installer/src/main.c: (main):

	Clean up object unref'ing to quiet up the install lib's memory
	checker.  Don't hook up with the session manager.
	
	* nautilus-installer/src/installer.c: (eazel_download_progress),
	(eazel_install_preflight), (check_system),
	(eazel_installer_finalize), (eazel_installer_set_default_texts),
	(eazel_installer_initialize):
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/link.sh:

	Change the no-RH7 message into RH6 and RH7 specific messages, so
	we can build one installer for each platform.  Don't ask to delete
	files if none were downloaded.
	
2001-02-12  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-gtk-extensions.h:
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(while_realized_disconnecter),
	(nautilus_gtk_signal_connect_while_realized):
	New function to connect to a signal of an object while a widget is
	realized.
	(while_realized_disconnecter): Changed signature to be void - no
	need to return a value here.  As such, the GTK_SIGNAL_FUNC casts
	are no longer needed.
	
	* libnautilus-extensions/nautilus-clickable-image.c:
	(nautilus_clickable_image_realize),
	(nautilus_clickable_image_unrealize):
	Use nautilus_gtk_signal_connect_while_realized so that we dont
	have to keep track of the signal ids and ancestor widget.
	
	* libnautilus-extensions/nautilus-image-table.c:
	(nautilus_image_table_realize), (nautilus_image_table_unrealize):
	Use nautilus_gtk_signal_connect_while_realized so that we dont
	have to keep track of the signal ids and ancestor widget.

	* test/test-nautilus-clickable-image.c: (main):
	Add a windowed ancestor inbetween in order to test
	nautilus_gtk_signal_connect_while_realized.
	
2001-02-12  Mike Fleming  <mfleming@eazel.com>

	reviewed by: <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(view_load_location_callback), (mozilla_net_stop_callback),
	(mozilla_link_message_callback), (mozilla_progress_callback),
	(mozilla_dom_mouse_click_callback), (vfs_read_callback),
	(update_nautilus_uri), (dispatch_report_location_change),
	(dispatch_report_load_complete):

	Bug 6436: Throbber wasn't thobbing on mozilla-to-mozilla navigation.

	Confirmed with Darin: call report_load_underway and report_load_complete
	in case where report_location_changed is used.

2001-02-12  John Harper  <jsh@eazel.com>

	* src/nautilus-application.c (set_session_restart): set the
	restart command to be `nautilus --no-default-window'

2001-02-12  Ian McKellar  <ian@eazel.com>

	* configure.in:
	Updated the check to check for RPM 3.0.5 not 3.0.4.

2001-02-12  Gene Z. Ragan  <gzr@eazel.com>

	Turn off repawn behavior in debug mode at request of Andy.
	
	* src/nautilus-application.c: (set_session_restart):
	Check for debug environment variable.
	
2001-02-12  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: merged changes from branch into
	head BUG 6067

2001-02-11  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: <sullivan@eazel.com>

	Bug 5961: Starting nautilus with path to local HTML file
	causes images not to load.

	The problem here was that any argument specified on the commandline
	was being passed directly into Nautilus and its components as a
	valid URI.  Added pre-processing to commandline arguments, including
	ability to handle relative file pathnames. (so you can do "nautilus ."
	to open a window on the current directory)

	* libnautilus-extensions/nautilus-file-utilities.c:
	(file_uri_from_local_relative_path),
	(nautilus_make_uri_from_shell_arg), (is_uri_partial),
	(remove_internal_relative_components),
	(nautilus_uri_make_full_from_relative),
	(nautilus_self_check_file_utilities):
	* libnautilus-extensions/nautilus-file-utilities.h:
	* src/nautilus-application.c:
	(nautilus_make_uri_list_from_shell_strv),
	(nautilus_application_startup):


2001-02-12  Rebecca Schulman  <rebecka@eazel.com>
	Fix bugzilla.eazel.com bug 4962 that open with
	mpg123 fails.  The problem was a check for 
	a file uri that had its logic backwards

	reviewed by: Mike Engber <engber@eazel.com>

	* libnautilus-extensions/nautilus-program-choosing.c:
	(nautilus_launch_application):
	Change if (file_uri) to if (!file_uri)

2001-02-12  Michael Engber  <engber@eazel.com>

	reviewed by: John Sullivan

	* libnautilus-extensions/nautilus-directory-async.c:
	(metafile_read_mark_done), (metafile_read_done_callback):
	* libnautilus-extensions/nautilus-directory-metafile.c:
	(free_factory), (get_metafile),
	(nautilus_directory_get_file_metadata),
	(nautilus_directory_get_file_metadata_list),
	(nautilus_directory_set_file_metadata),
	(nautilus_directory_set_file_metadata_list),
	(nautilus_directory_copy_file_metadata),
	(nautilus_directory_remove_file_metadata),
	(nautilus_directory_rename_file_metadata):
	* libnautilus-extensions/nautilus-directory-metafile.h:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_destroy):
	* libnautilus-extensions/nautilus-metafile-factory.c:
	(free_factory_instance):
	* libnautilus-extensions/nautilus-metafile-factory.h:
	* libnautilus-extensions/nautilus-metafile-server.idl:
	* libnautilus-extensions/nautilus-metafile.c: (destroy),
	(corba_get), (corba_get_list), (corba_set), (corba_set_list),
	(corba_copy), (corba_remove), (corba_rename),
	(get_or_add_directory_monitor_list_entry),
	(remove_directory_monitor_list_entry), (find_monitor_link),
	(corba_register_monitor), (corba_unregister_monitor),
	(get_metadata_from_node), (get_metadata_list_from_node),
	(create_metafile_root), (get_file_node),
	(get_metadata_string_from_metafile),
	(get_metadata_list_from_metafile),
	(set_metadata_string_in_metafile), (set_metadata_list_in_metafile),
	(metadata_value_new), (metadata_value_new_list),
	(metadata_value_destroy), (metadata_value_equal),
	(set_metadata_in_metafile), (get_metadata_string_from_table),
	(get_metadata_list_from_table), (str_or_null_hash),
	(str_or_null_equal), (set_metadata_eat_value),
	(free_file_table_entry), (free_directory_table_entry),
	(destroy_metadata_changes_hash_table), (destroy_xml_string_key),
	(nautilus_metafile_destroy), (get_file_metadata),
	(get_file_metadata_list), (set_file_metadata),
	(set_file_metadata_list), (rename_file_metadata),
	(apply_one_change), (apply_file_changes), (apply_one_file_changes),
	(nautilus_metafile_apply_pending_changes), (copy_file_metadata),
	(remove_file_metadata), (nautilus_metafile_set_metafile_contents):
	* libnautilus-extensions/nautilus-metafile.h:
	* src/nautilus-application.h:

	Metadata setting/getting is now done via CORBA so that
	out of process components stay in sync. bug 5958

2001-02-12  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* src/nautilus-property-browser.c:
	(make_properties_from_directories):
	Dont free the object name so soon.  Its needed to determine where
	to put the reset and erase objects.
	
2001-02-12  Rebecca Schulman  <rebecka@eazel.com>
	Fix bug 6333, that a warning about not finding
	unindexed files should not be displayed if the
	backup search is turned on.

	reviewed by: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.h:
	Leave a note that we should change the SEARCH_METHOD
	name to be more clear about what the preference is for
	(whether or not we  do a slow background search)
	* src/file-manager/fm-search-list-view.c: (load_location_callback):
	Check the SEARCH_METHOD preference 

	
2001-02-12  John Sullivan  <sullivan@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6500 (tighter layout option not saved).

	It actually was being saved, it was just being clobbered back to
	off every time a directory was loaded.

	* src/file-manager/fm-icon-view.c: (fm_icon_view_begin_loading):
	Moved the tighter-layout setting code up one line and refined
	comments to explain why.

2001-02-12  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(do_dep_check_internal), (install_packages_helper):

	Make the dep-check logic bail out early if the user has cancelled
	the install.  (It's possible to get the async "stop" callback
	during a package info fetch, I found out the hard way...)
	
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file):

	Make get_failed into an official bool, since it acts like one
	already.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_dependency_check),
	(nautilus_service_need_password),
	(service_install_stop_loading_callback):

	Treat aborted password dialog as a cancel, not a failure.  Fix
	abort callback so it doesn't loop endlessly in a GTK event
	handling cycle on fast downloads.

2001-02-11  Ramiro Estrugo  <ramiro@eazel.com>

	* test/.cvsignore:
	* test/Makefile.am:
	* test/test-nautilus-wrap-table.c: (main):
	New NautilusWrapTable test.
	
2001-02-11  Ramiro Estrugo  <ramiro@eazel.com>

	* test/test-nautilus-clickable-image.c: (main):
	* test/test-nautilus-labeled-image.c: (button_callback),
	(labeled_image_button_window_new):
	A tiny bit more debug code.
	
2001-02-11  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/preferences-applet/nautilus-preferences-applet.c:
	(user_level_changed_callback), (main):
	Make toggle buttons insensitive on novice user level.

2001-02-11  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-viewport.h:
	* libnautilus-extensions/nautilus-viewport.c:
	(nautilus_viewport_draw), (nautilus_viewport_expose_event),
	(nautilus_viewport_realize), (nautilus_viewport_set_is_smooth),
	(nautilus_viewport_get_is_smooth): Add public is_smooth getter.
	(nautilus_viewport_set_never_smooth): Add a 'never_smooth'
	attribute.

2001-02-11  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-customization-data.h:
	Add comment clarifying API changes I made in my last checkin.
	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	Remove some left over code from when the emblems table was hard
	coded to 2 columns.
	* src/nautilus-property-browser.c:
	(make_properties_from_directories):
	Fix a small memory leak.

2001-02-11 John Fleck <jfleck@inkstain.net>

	reviewed by: Ali Abdin <aliabdin@aucegypt.edu>

	* components/help/converters/gnome-db2html2/gdb3html.h
	* components/help/converters/gnome-db2html2/sect-elements.c
	* components/help/converters/gnome-db2html2/sect-elements.h
	* components/help/converters/gnome-db2html2/sect-preparse.c
	* components/help/converters/gnome-db2html2/toc-elements.c
	add support for <bridgehead> tag in DocBook, fix bug #6492

2001-02-11  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: Mathieu Lacage <mathieu@gnome.org>

	* cut-n-paste-code/widgets/nautilusclist/nautilusclist.c: Use
	binary instead of linear search to find the right insert new row
	into a sorted clist. This is part of addressing bug 6290

2001-02-10  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar.c: (add_command_buttons),
	(empty_trash_callback),
	(nautilus_sidebar_trash_state_changed_callback),
	(nautilus_sidebar_update_buttons):
	fixed bug 6052, sidebar needs empty trash button when showing
	trash: directory
	
2001-02-09  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* libnautilus-extensions/nautilus-image-table.c:
	(image_table_handle_motion), (ancestor_button_press_event),
	(ancestor_button_release_event):
	Ignore insensitive widgets when doing the event thing.
	
	* src/nautilus-property-browser.c:
	(make_properties_from_directories):
	Add an extra empty space between the erase emblem and the next to
	make it stand out more.  Cleanup property image creation a tiny bit.

2001-02-09  Robey Pointer  <robey@eazel.com>

	* po/POTFILES.in:

	Fix build bustage by removing the two missing install-lib files
	from POTFILES.in.

2001-02-09  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-region.c:
	* libnautilus-extensions/nautilus-region.h:
	New class for super easy region management using rectangle.

	* libnautilus-extensions/nautilus-art-gtk-extensions.h:
	* libnautilus-extensions/nautilus-art-gtk-extensions.c:
	(nautilus_gdk_rectangle_assign_irect):
	New function to convert ArtIRect to GdkRectangles.

	* libnautilus-extensions/nautilus-customization-data.h:
	* libnautilus-extensions/nautilus-customization-data.c:
	(nautilus_customization_data_get_next_element_for_display):
	Return pixbufs and labels for the object instead of widgets.  This
	is so that the caller can use the widget that best suits its
	display needs.

	* libnautilus-extensions/nautilus-image-table.h:
	* libnautilus-extensions/nautilus-image-table.c:
	(nautilus_image_table_initialize_class),
	(nautilus_image_table_initialize),
	(nautilus_image_table_expose_event),
	(nautilus_image_table_realize), (nautilus_image_table_unrealize),
	(nautilus_image_table_set_is_smooth_signal),
	(image_table_foreach_child_subtract_content),
	(image_table_clear_dirty_areas), (image_table_peek_clear_gc),
	(image_table_emit_signal), (image_table_handle_motion),
	(ancestor_button_press_event), (ancestor_button_release_event),
	(nautilus_image_table_new), (nautilus_image_table_set_is_smooth),
	(nautilus_image_table_set_smooth_background_color):
	Add support for smoothnes.  Register widget as a possible smooth
	widget.  When smoothness changes, we modify our background drawing
	behavior such that in smooth mode we dont flicker at all.

	Remove grab/ungrab pair that could screw up operations.  Turns out
	these are not needed.

	Change event signal emissions to include more data from the raw
	gdk events without exposing these.

	* libnautilus-extensions/nautilus-image.c:
	(nautilus_image_initialize_class):
	Update for new smooth widget class registration scheme.

	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_initialize_class):
	Update for new smooth widget class registration scheme.

	* libnautilus-extensions/nautilus-labeled-image.h:
	* libnautilus-extensions/nautilus-labeled-image.c:
	(nautilus_labeled_image_size_allocate),
	(nautilus_labeled_image_get_image_bounds),
	(nautilus_labeled_image_get_label_bounds):
	Make these two functions public.
	
	* libnautilus-extensions/nautilus-smooth-widget.h:
	* libnautilus-extensions/nautilus-smooth-widget.c:
	(smooth_widget_type_list_free), (smooth_widget_list_free),
	(widget_is_smooth), (nautilus_smooth_widget_register),
	(nautilus_smooth_widget_register_type):
	Add mechanism for registering types that are meant to be smooth.
	That way we dont need to hardcode the list of smooth widget
	classes.  Also made sure to free the static lists at exit time.
	
	* libnautilus-extensions/nautilus-viewport.h:
	* libnautilus-extensions/nautilus-viewport.c:
	(nautilus_viewport_initialize_class),
	(nautilus_viewport_initialize), (nautilus_viewport_destroy),
	(nautilus_viewport_draw), (nautilus_viewport_expose_event),
	(nautilus_viewport_realize), (nautilus_viewport_paint),
	(nautilus_viewport_set_is_smooth_signal), (nautilus_viewport_new),
	(nautilus_viewport_set_is_smooth),
	(nautilus_viewport_get_scroll_offset):
	Add support for smoothness.  When the is_smooth attribute changes,
	the viewport will not clear the background on resize - and so its
	content will not flicker.

	Add function for querying the scroll offset.
	
	* libnautilus-extensions/nautilus-wrap-table.h:
	* libnautilus-extensions/nautilus-wrap-table.c:
	(wrap_table_get_content_frame), (wrap_table_get_scroll_offset),
	(nautilus_wrap_table_get_homogeneous),
	(nautilus_wrap_table_reorder_child):
	Fix a mod by zero error.
	Add support for reordering children.
	
	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	Simplify a bit by using NautilusWrapTable instead of a GtkTable
	with a hard coded number of columns.  The emblems now wrap to fit
	the available space.  Also use NautilusLabeledImages instead of
	boxes.  Update for changes in customization data api.
	Remove check box painting workaround.  Its taken care of in
	NautilusLabeledImage now.
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize_class),
	(nautilus_property_browser_initialize), (element_clicked_callback),
	(nautilus_property_browser_preferences_changed),
	(make_property_tile), (make_properties_from_directories),
	(add_reset_property), (make_properties_from_xml_node),
	(property_browser_category_button_new), (make_category_link),
	(nautilus_property_browser_update_contents),
	(emit_emblems_changed_signal):
	Use a NautilusImageTable instead of a GtkTable to make things wrap
	propertly and thus not have to recreate the whole property box
	each time its resized.  Remove a lot of hard coded dimensions.
	Simplified a bit by using NautilusLabeledImages.
	
	* src/nautilus-search-bar-criterion.c: (make_emblem_value_menu):
	Update for changes in customization data api.
	
	* test/test-nautilus-image-table.c: (labeled_image_new),
	(foo_timeout), (image_table_size_allocate),
	(image_table_new_scrolled):
	Update for new image table features.

2001-02-09  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar.c:
	(nautilus_sidebar_active_panel_matches_id),
	(nautilus_sidebar_remove_panel):
	fixed bug 6005, help tab still left on sidebar after view is hidden,
	by decrementing the active tab index when an earlier one is deleted,
	and checking for NULL in active_panel_matches_id.

	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_initialize),
	(nautilus_rpm_view_update_from_uri):
	made it use nautilus_image so the package image is anti-aliased

2001-02-09  John Sullivan  <sullivan@eazel.com>

	Fixed bug 5903 ("Tighter Layout" can't be changed in
	manual layout, but affects Clean Up by Name)

	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_set_tighter_layout): When in
	manual layout mode, invalidate label sizes and update
	all items so the smaller caption width used for
	tighter layout can take effect immediately.
	
	* src/file-manager/fm-icon-view.c: 
	(update_layout_menus): Remove the code that was making
	this item insensitive in manual layout.

2001-02-09  Robey Pointer  <robey@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(eazel_install_callback_get_epv):
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_fill_from_packagedata),
	(packagedata_from_corba_packagedatastruct):

	Remove some cruft from the IDL that's not implemented anymore or
	isn't being used by any of the clients.
	
	* components/services/install/lib/eazel-install-metadata.c:
	(eazel_install_configure_use_local_db):
	* components/services/install/lib/eazel-install-metadata.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize):
	* components/services/trilobite/doc/gconf.txt:

	Make an opt-out for people who don't want the "can't get shared
	lock" spam message scrolling endlessly on every install just
	because RPM can't deal with NFS directories well.
	
	* components/services/install/lib/makefile.staticlib.in:

	Remove dead files from the bootstrap installer's makefile, and
	make the package-system object be a var to be filled in later.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_conflict_check),
	(nautilus_service_install_downloading),
	(nautilus_service_install_view_update_from_uri_finish),
	(user_login_callback),
	(nautilus_service_install_view_update_from_uri),
	(nautilus_service_install_view_load_uri):

	General cleanup, and the addition of the conflict_check signal
	handler.

	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/installer.c: (eazel_install_progress),
	(conflict_check), (eazel_install_preflight),
	(eazel_installer_initialize):

	Add conflict check handler; fix 50% bug prior to downloading.

2001-02-09  John Sullivan  <sullivan@eazel.com>

	Fixed problems I ran into while trying to fix bug 5903,
	which is about making "Tighter Layout" sensitive even
	in manual layout, since it affects "Clean Up by Name"

	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_set_tighter_layout): Don't
	re-sort when tighter layout setting changes if not
	in auto_layout mode.
	
	* src/file-manager/fm-icon-view.c: 
	(handle_radio_item): Don't assume that every id passed
	to this routine is a sort ID; it might be a toggle
	button's id. Use get_sort_criterion_by_id to distinguish.
	(update_layout_menus): Added FIXME comment explaining
	why "tighter layout" is insensitive in manual layout.
	(set_sort_criterion_by_id): Check whether passed id is
	a valid sort criterion; don't try to sort if not.

2001-02-09  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	Fix for 6190, reuse check_if_related. If a package being revived
	is related to the broken (related by name and version diff), don't
	ask softcat for an update, but ask for an exact version.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-logic.c:
	* components/services/install/lib/eazel-install-logic.h:
	* components/services/install/lib/Makefile.am:
	Removed rpm-glue and logic.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(is_satisfied), (check_if_related_package), (check_tree_helper),
	(download_packages):
	is_satisfied checks name!=null before doing is_installed.
	check_tree_helper now uses check_if_related before doing the
	softcat_available_update. If the packages are related, use
	get_info to get an exacat version (sense=EQ).
	Moved check_if_related here
	Output tuning...
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_emit_download_progress):
	Woops, undid a comment about bug 6425
	
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_available_update):
	Indention...

2001-02-08  John Harper  <jsh@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	Fix bug 4423 (when a folder that is expanded in the tree view
	is renamed, it collapses)

	* components/tree/nautilus-tree-model.h,
	components/tree/nautilus-tree-model.c: added a new signal
	`node_being_renamed'. Has two arguments, the old and new URIs

	(report_node_changed): when the node is being renamed, use
	report_node_removed_internal instead of report_node_removed so
	we can avoid emitting the `node_removed' signal. Before doing
	this, emit the new `node_being_renamed' signal

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_insert_model_node): if the node is already
	inserted in the tree, call nautilus_tree_view_update_model_node

	(nautilus_tree_view_model_node_renamed_callback): connected to
	the `node_being_renamed' signal, propagates the expansion state
	from the old URI to the new one

	Fix bug 4421 (Delete file while folder collapsed -> not
	reflected in Tree View)

	* components/tree/nautilus-tree-model.c
	(nautilus_tree_model_monitor_node): if the node being monitored
	is a directory, check if any of the files we think it contains
	got moved away (e.g. while the node was collapsed)

2001-02-09  Andy Hertzfeld  <andy@eazel.com>

	* icons/i-directory-12.png:
	* icons/i-directory-accept-12.png:
	fixed bug 6338, folder moves to the right when highlighted,
	by tweaking the associated images
	
	* src/nautilus-sidebar-tabs.c: (nautilus_sidebar_tabs_hit_test):
	consider the tab for hit-testing even if invisible
	* src/nautilus-sidebar.c: (nautilus_sidebar_release_event):
	fixed 3538, easier way to minimize active sidebar view, by
	making it close the active view when you click on the space
	its tab formerly occupied.

2001-02-09  Arlo Rose  <arlo@eazel.com>

	* icons/Makefile.am:
	* icons/emblem-symbolic-link-12.png:
	* icons/emblem-symbolic-link-24.png:
	* icons/emblem-symbolic-link-36.png:
	Made more link icons that will work at smaller zoom levels.
	Fixes bug number 5988.

2001-02-09  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6473 (counting deep contents of folder in Properties
	window takes tons of CPU)

	Fixed by deploying a timeout, so that the displayed numbers
	only update periodically, instead of with every item count
	increment. The interval is 200 milliseconds. This makes the
	count faster as well as greatly reducing CPU thrashage by
	not pounding on the poor widdle widgets so often.

	* src/file-manager/fm-properties-window.c:
	(directory_contents_value_field_update): Changed signature
	to just take an FMPropertiesWindow, and get the other
	relevant objects from the Details struct.
	(update_directory_contents_callback): New function, updates
	field and clears timeout ID.
	(schedule_directory_contents_update): Schedules update if
	not already pending.
	(attach_directory_contents_value_field): Removed old hack
	to store the title_field in the object data of the value
	field; store value_field after creation in Details struct.
	(append_directory_contents_fields): Store title_field after
	creation in Details struct.
	(real_destroy): Remove timeout if still pending.

2001-02-09  John Sullivan  <sullivan@eazel.com>

	Fixed part of bug 6462 (two error messages after doing search
	in Red Hat 7). Now you should only get one error message.
	Rebecca gets to figure out that one.

	* src/file-manager/fm-search-list-view.c: (real_load_error),
	(fm_search_list_view_initialize_class),
	(fm_search_list_view_initialize): Now replaces function
	pointer for load_error instead of attaching to signal, to
	avoid triggering fm-directory-view's error-handling code
	(which I recently added).

2001-02-09  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6343 (timed-wait dialog is too narrow, often
	clipping dialog title)

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_callback): Enforced a minimum width for timed-wait
	windows. They look better now, and don't clip the titles
	except with extremely long titles, for which the title-writer
	should be flogged.

2001-02-09  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6453, Gnome VFS_CRITICAL received when dragging
	nautilus link icons over each other.
	
	* libnautilus-extensions/nautilus-drag.c:
	(nautilus_drag_default_drop_action_for_icons):
	
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_container_dropped_icon_feedback),
	(nautilus_icon_dnd_end_drag):

2001-02-08  Robey Pointer  <robey@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(pre_widget_initialize):

	Fix build bustage in Mozilla content view: profile_name ->
	profile_directory_name.

2001-02-08  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>

	This commit fixed bugs:
	5723 ei2: check that install_failed_signal was not called 
	5752 ei2: port the uninstall stuff to the new ei2 
	5753 ei2: port the revert stuff to ei2 
	5757 fix leaks in EazelProblemHander 
	5957 eazel-install cli tool no longer uninstalls nicely
	6100 RPM4: don't handle dependencies called "rpmlib(.*)"
	6173 ei2: finish conflict and feature breakage  
	6191 make revert work (ei2: resurrect transaction stuff) 
	
	* components/rpmview/nautilus-rpm-view-install.c:
	(get_detailed_errors_foreach):
	Updated for the CANCELLED status.
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_preflight_check_signal):
	Fixed an output string.
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	Added the CANCELLED status.
	uninstall_progress now has same signature as install_progress.
	
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_uninstall_progress),
	(eazel_install_callback_class_initialize):
	uninstall_progress now has same signature as install_progress.

	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_fill_from_packagedata),
	(traverse_packagetree_md5), (corba_packagedatastruct_fill_deps),
	(packagedata_from_corba_packagedatastruct),
	(packagedata_tree_from_corba_packagedatastructlist),
	(categorydata_list_from_corba_categorystructlist):
	Added the CANCELLED status.
	Commented out sending ->provides in signals.
	Added some g_asserts to find a bug.
	categorydata_list_from_corba_categorystructlist uses
	packagedata_list_from_corba_packagedatastructlist.
	
	* components/services/install/lib/eazel-install-logic.h:
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_start_transaction), (dump_one_package),
	(compare_break_to_package_by_name),
	(eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse):
	Threw out most of the old code. Keeping logic.c untill 6190 is
	closed.
	
	* components/services/install/lib/eazel-install-logic2.c:
	(dump_tree_helper), (check_md5_on_files), (is_satisfied),
	(check_tree_helper), (execute), (set_toplevel),
	(get_packages_with_mod_flag), (check_uninst_vs_downgrade),
	(debug_revert), (compare_break_to_package_by_name),
	(eazel_uninstall_upward_traverse),
	(eazel_uninstall_check_for_install), (eazel_uninstall_globber),
	(install_packages), (uninstall_packages), (revert_transaction):
	Moved revert and uninstall into logic2.c and updated them
	appropriately.
	Added paranoia check in case bad xml dependency has a version but
	an senseless sense.
	When reviving, set parent->topleve to TRUE, not revived package.
	Revived the transaction stuff (for revert).
	Don't allow a package to depend on a package of the same name,
	this is often a problem during softcat updates.
	
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_finalize), (eazel_install_start_signal),
	(eazel_install_end_signal), (eazel_install_progress_signal),
	(eazel_install_failed_signal), (eazel_install_class_initialize),
	(eazel_install_initialize), (eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_revert_transaction_from_xmlstring),
	(eazel_install_do_transaction_save_report_helper),
	(eazel_install_save_transaction_report),
	(eazel_install_init_transaction),
	(eazel_install_emit_uninstall_progress),
	(eazel_install_emit_uninstall_progress_default),
	(eazel_install_emit_download_progress):
	uninstall_progress now has same signature as install_progress.
	Fixed some dumb bugs in install/uninstall progress emission.
	Added some lists to check on install status.
	Moved some of the transaction stuff from logic.c here.
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach),
	(get_detailed_uninstall_messages_foreach),
	(get_detailed_cases_foreach),
	(get_detailed_uninstall_cases_foreach),
	(eazel_install_problem_tree_to_case),
	(eazel_install_problem_tree_to_string),
	(build_categories_from_problem_list):
	Updated again for the new PackageBreaks objects.
	Fixed so cli uninstall works nice again.
	Added the CANCELLED status.
	The problem handler is deteriorating, either we use it or we scrap
	it.
	
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(rpmmonitorpiggybag_new),
	(eazel_package_system_rpm3_set_mod_status),
	(monitor_rpm_process_pipe_percent_output),
	(eazel_package_system_rpm3_packagedata_fill_from_header),
	(eazel_package_system_rpm3_set_state),
	(eazel_package_system_rpm3_execute), (check_if_all_packages_seen),
	(eazel_package_system_rpm3_install_uninstall):
	Don't spam about the locales decimal seperator.
	Set modification status after handling a package, so transaction
	logs make sense.
	Don't accept requirements of type "rpmlib(.*".
	Ability to set all packages to CANCELLED if root helper failed
	login.
	If TEST is set, fake success all the time.
	
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system-types.c:
	(categorydata_new), (categorydata_destroy_foreach),
	(packagedata_status_enum_to_str),
	(packagedata_status_str_to_enum):
	Added the CANCELLED status.
	Improved the debug strings for alloc/dealloc of category data
	structures.
	
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_install):
	If TEST, disable FORCE.

2001-02-08  John Harper  <jsh@eazel.com>

	Fixed bug 6044 (Druid should be clearer on what the right
	choice is for proxy users)

	* src/nautilus-first-time-druid.c (set_up_update_page): added
	the text `If you know your computer uses a proxy connection,
	click Yes and Nautilus will use it.' to the middle of the label

	Fixed bug 5656 (First time druid should bail out at startup if
	it cannot create .nautilus and Nautilus directories)

	* src/nautilus-application.c (nautilus_application_startup):
	moved the call to check_required_directories () before that to
	nautilus_first_time_druid_show ()

2001-02-08  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* components/mozilla/main.c: (mozilla_process_delayed_exit),
	(mozilla_object_destroyed), (mozilla_make_object), (main):

	Bug 6328 -- Mozilla processes are now kept around for 30
	minutes after last used, so that re-activation is much faster.
	Navigating to and from web pages in Nautilus is much less agonizing
	now.

2001-02-07  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Rebecca Schulman  <rebecka@eazel.com>

	This change is needed to enable the bonobo-level fix to Nautilus
	bug 6023 (throbber and proxy processes still around after Nautilus
	is quit). The throbber was unreffing itself on destroy, which is
	wrong. However, Bonobo was leaking a reference to any toolbar
	control item, so the two bugs were masking each other.
	
	* components/throbber/nautilus-throbber.c
	(nautilus_throbber_destroy): Remove incorrect unref.
	(nautilus_throbber_initialize): Formatting tweaks

2001-02-08  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-gnome-extensions.c:
	(widget_destroy_callback), (icon_selected_callback),
	(icon_cancel_pressed):
	fixed bug 6458, crash if you quickly press cancel after pressing
	OK in the icon picker; fixed by setting a boolean once the
	picker has been dismissed, and checking it so we don't do it twice.
	
2001-02-08  Andy Hertzfeld  <andy@eazel.com>
	
	* src/nautilus-location-bar.c,h: (get_file_info_list),
	(try_to_expand_path), (editable_key_press_callback),
	(real_activate), (destroy), (nautilus_location_bar_initialize),
	(nautilus_location_bar_new), (nautilus_location_bar_set_location),
	(nautilus_location_bar_get_location),
	(nautilus_location_bar_update_label):

	fixed bug 6369, sluggish keyboard response in location bar. I improved
	this in two different ways: the expansion code is deferred to idle
	time now, so it doesn't get in the way of fast typing.  Also, the
	file info list is cached in memory, so it doesn't have to load it
	again for every keystroke.  I also made the instance variables
	private, instead of being exposed in the .h file.
	
2001-02-08  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_downloading),
	(nautilus_service_install_preflight_check),
	(previous_install_finished), (nautilus_service_install_installing),
	(nautilus_service_install_done),
	(nautilus_service_install_view_update_from_uri_finish):

	Change texts to match Vera's refinements.

2001-02-08  Robey Pointer  <robey@eazel.com>

	reviewed by: Ian McKellar  <ian@eazel.com>

	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (generate_change_password_form),
	(change_password_button_cb):

	Stick the password panels in a viewport so they'll have
	opportunistic scrollbars.

2001-02-08  John Sullivan  <sullivan@eazel.com>

	Fixed bug 5946 (minimum Nautilus window size is too large)

	* src/nautilus-window-private.h: Made the minimum window
	size much much smaller. This exposes layout problems in
	some of the bars & such at very small sizes, but none of
	these layout problems seem like 1.0 show-stoppers. Better to
	allow the user who wants to use a stripped-down window at
	minimum size do so than to prevent this because it looks bad
	with some bars showing. Note that other Linux apps don't stop
	you from reducing the window down to nothing at all (the
	Nautilus limit is somewhat larger than "nothing at all").

	* src/nautilus-switchable-search-bar.c:
	(nautilus_switchable_search_bar_new): With Rebecca's OK,
	changed "Search For:" to "Find:" in order to save precious
	horizontal screen real estate.

2001-02-08  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Mike Engber <angber@eazel.com>

	Fixed bug 3087, gmc to Nautilus transition tool
	
	Added all features except removing gmc from session. Will
	need some additional help to add that feature.
	
	* libnautilus-extensions/nautilus-global-preferences.h:
	Add a preferences constant to indicate if Nautilus should
	respawn in the Gnome session.
	
	* src/nautilus-application.c: (nautilus_application_startup),
	(volume_unmounted_callback), (removed_from_session),
	(save_session), (set_session_restart), (init_session):
	Check preferences add add ourselves to session with a respawn
	setting if the user has specified that they wish such behavior.
	
	* src/nautilus-first-time-druid.c: (druid_finished),
	(set_up_gmc_transition_page):
	Save gmc to nautilus transition values in nautilus preferences.

2001-02-08  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: <ramiro@eazel.com>

	Significant rework of nautilus-mozilla-content-view to use
	report_location_change and to do general house-cleaning.

	Fixes following bugs:

	Bug 3547  POSTs in the mozilla component don't update the URI 
	Bug 4682, 6142  Frame sets have difficulty in Nautilus
	Bug 5461  "http://localhost:xxxx" instead of "eazel-services:" on location bar
	
	Will fix following bugs when I talk with Darin about problems
	with report_location_change:

	5592  nautilus / mozilla back button goes back 2 pages

	Also removes all module-global and static variables, making gnome-vfs
	and general state-tracking per-instance, thus eliminating latent
	bugs related to using two browsers simultainously

	Removes all special-casing for form POST's and for iframes

	Removes usage of the mozilla "open_uri" signal, which was no longer really
	being used for anything (interruption of eazel-specific schemes is done
	at the DOM event level, notification to Nautilus of navigation is done
	as a result of the "location" signal

	Introduces/aggravates these bugs:

	6435	No history recorded when using report_location_change
	6436	Throbber doesn't throb when using report_location_change

	I'll wait until Darin returns to figure out solutions to this.

	* components/mozilla/Makefile.am:
	* components/mozilla/main.c: (main):
	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/mozilla-events.h:
	* components/mozilla/nautilus-mozilla-content-view.c:
	* components/mozilla/nautilus-mozilla-content-view.h:

2001-02-08  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-gnome-extensions.c:
	(icon_selected_callback), (nautilus_gnome_icon_selector_new):
	fixed bugs 6437 and 6438 by testing for a directory selected
	instead of a file in the icon selector, and putting up an error
	dialog in that case instead of invoking the callback with the
	directory path.
	
2001-02-08  Pavel Cisler  <pavel@eazel.com>
	
	Fix 6401 (Create Link yields "You cannot link a file to itself"
		  error)
	* libnautilus-extensions/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move):
	Remove a confused link to self check.
	Pass the GNOME_VFS_XFER_USE_UNIQUE_NAMES option to xfer.

2001-02-08  Fatih Demir	<kabalak@kabalak.net>

	* components/services/install/lib/eazel-package-system-rpm3.c:
	Include locale.h as you use localeconv() without including
	it -- bad on debian...

2001-02-08  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* src/nautilus-sidebar-title.c:
	(nautilus_sidebar_title_size_allocate): Found useful
	optimization while investigating sidebar flashiness:
	now it only recomputes the sidebar font in
	size_allocate if the width actually changed.

2001-02-08  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: updated to note that
	/usr/share/hyperbola/maps/*.map have moved to
	/usr/share/nautilus/components/hyperbola/maps/*.map

2001-02-08  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6421 (Labels for permissions should look insensitive
	when permissions are not settable)

	* src/file-manager/fm-properties-window.c:
	(add_permissions_column_label), (create_permissions_page):
	Pass file parameter into add_permissions_column_label,
	set insensitive if can't set permissions.

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_string_attribute_with_default):
	Use "--" as item count string instead of "..." when
	the preference is set to not display the item counts.
	("..." implied that it would show up eventually, not 
	true in this case.)
	
2001-02-08  Laszlo Kovacs  <laszlo.kovacs@sun.com>

	* components/help/Makefile.am:
	Man page map file moved to new hyperbola data
	directory.

        * components/help/hyperbola-filefmt.c:
	Compiler warnings fixed

2001-02-08  Laszlo Kovacs  <laszlo.kovacs@sun.com>

	* components/help/hyperbola-filefmt.c:
	Toplevel document support added. Docs specified in
	$(prefix)/share/nautilus/components/hyperbola/topleveldocs.xml
	will be added to the toplevel section of the help tree if
	Scrollkeeper is enabled
	
	* components/help/Makefile.am:
	topleveldocs.xml installed and hyperbola data directory
	changed to $(prefix)/share/nautilus/components/hyperbola

	* components/help/topleveldocs.xml:
	new xml file holding the docs that go into the toplevel
	section of the help tree

2001-02-07  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(expand_package_suites), (install_packages):

	Do a softcat query for any suite ids in the initial package list,
	so they're expanded first and then all future queries will return
	single packages.
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_emit_preflight_check):

	Don't restrict the preflight signal to toplevel packages anymore:
	we send the whole package tree now so no editing is necessary.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(osd_parse_provides), (osd_parse_shared):

	Softcat server has started filling in the sense flag differently
	(without notice, I might grumpily add), so handle both types now
	and whine if we can't figure out how to decode it.  Log the
	softcat DB version now (eventually should store it somewhere).
	
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_error_string), (eazel_softcat_query),
	(eazel_softcat_get_info), (eazel_softcat_available_update):
	* components/services/install/lib/eazel-softcat.h:

	Split up the handling for single-package softcat queries and
	multi-package suite queries.
	
	* components/services/install/nautilus-view/main.c:
	(service_install_make_object), (main):

	Remove redundant 2nd ammonite_init call and a long-since useless
	printf from object creation.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_downloading),
	(flatten_package_tree_foreach), (nautilus_service_install_done),
	(nautilus_service_install_failed):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:

	Clean up final dialog text generation, and only ask about deleting
	RPMs if the user level is "advanced".  Also don't ask if no files
	were even downloaded.
	
2001-02-07  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Mike Fleming <mfleming@eazel.com>
	Minus the 2 new widgets.
		
	* libnautilus-extensions/Makefile.am:
	New files.

	* libnautilus-extensions/nautilus-labeled-image.h:
	* libnautilus-extensions/nautilus-labeled-image.c:
	(button_leave_callback), (button_focus_out_event_callback),
	(nautilus_labeled_image_check_button_new): Add workaround for
	rendering problems with GtkCheckButton.
	(nautilus_labeled_image_set_label_never_smooth): New function to
	make the label part possibly never smooth.

	* libnautilus-extensions/nautilus-clickable-image.h:
	* libnautilus-extensions/nautilus-clickable-image.c:
	(ancestor_button_press_event), (ancestor_button_release_event),
	(nautilus_clickable_image_new),
	(nautilus_clickable_image_new_from_file_name): New function to
	create clickable images from image files.  Add grab/ungrab calls
	to match the logic in GtkButton.

	* libnautilus-extensions/nautilus-wrap-table.h:
	* libnautilus-extensions/nautilus-wrap-table.c:
	New class.
	
	* libnautilus-extensions/nautilus-image-table.c:
	* libnautilus-extensions/nautilus-image-table.h:
	New class.

	* test/test-nautilus-image-table.c:
	* test/.cvsignore:
	* test/Makefile.am:
	Image table test.
	
2001-02-07  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_start_signal):

	Remove break that caused 0% signals to never get sent on install.

	* components/services/install/lib/eazel-package-system-rpm3.c:
	(rpmmonitorpiggybag_new), (make_rpm_argument_list),
	(monitor_rpm_process_pipe_percent_output),
	(monitor_rpm_process_pipe), (monitor_subcommand_pipe),
	(manual_rpm_command), (eazel_package_system_rpm3_execute):

	Make percent a float for more accurate byte counts.  Give the IO
	channel a lower priority than normal, so that it doesn't outrank X
	refresh events (though this doesn't help much).  Reinsert the
	manual RPM execute from the old logic.c code.
	
	* nautilus-installer/src/installer.c: (insert_info_page),
	(eazel_install_progress), (eazel_download_progress),
	(get_detailed_errors_foreach_dep), (get_detailed_errors_foreach),
	(get_detailed_errors), (collect_failure_info),
	(eazel_install_preflight):
	* nautilus-installer/src/installer.h:

	Remove fixed "max assumed download" size and try to set it to the
	total bytes expected.  For some reason this still fails sometimes
	but at least it's on the right track.  Stop calling
	gtk_main_iteration from inside the install progress callback since
	that interacts horribly with the IO channel crap.  Getting
	detailed errors should avoid recursing, and should follow the
	depends struct instead of the old soft_depends one.
	
	* nautilus-installer/src/link.sh:

	Test for RPM4 build (should build now, but still not work due to
	lingering code that refuses to try under RPM4).
	
	* nautilus-installer/src/package-tree.c: (get_errant_children_int),
	(get_errant_children), (package_customizer_fill):

	Fix up tree tracing routines to avoid recursing and to use the new
	struct members instead of the old (now empty) ones.
	
2001-02-07  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 6405 (seg fault right-double-clicking when context
	menu is already showing)

	* libnautilus-extensions/nautilus-icon-container.c:
	(handle_icon_button_press): Don't create context-menu callback
	if one is already pending; don't let right-double-click activate.
	
	* src/file-manager/nautilus-directory-view-ui.xml: Added underscore
	accelerator for Show Trash, which didn't have one.

2001-02-07  Ian McKellar  <ian@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_update_from_uri), (nautilus_rpm_view_load_uri),
	(rpm_view_load_location_callback):
	* components/rpmview/nautilus-rpm-view.h:
	If an RPM load fails then report it to Nautilus with:
	nautilus_view_report_load_failed,

	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_packagedata_fill_from_header),
	(rpm_packagedata_fill_from_file):
	If an RPM load fails then report it to the caller.

	* components/services/trilobite/libtrilobite/trilobite-core-network
	.c: (trilobite_open_uri):
	Changed the unsafe `setenv' call to the safer `trilobite_setenv'.

2001-02-07  Ian McKellar  <ian@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* components/services/inventory/eazel-inventory-collect-hardware.c:
	(add_device_property), (eazel_inventory_collect_pci),
	(remove_trailing_whitespace), (ide_get_value),
	Separated whitespace removal into a separate function.

	(eazel_inventory_collect_usb), (eazel_inventory_collect_scsi),
	(eazel_inventory_collect_hardware):
	Added USB and SCSI bus scanning. Bugs: 5094, 6285.

2001-02-07  Pavel Cisler  <pavel@eazel.com>

	reviewed by: John Sullivan  <sullivan@eazel.com>

	Fix 6380 (** ERROR ** in trash_callback_destroy when
	          navigating to trash)
	* libnautilus-extensions/nautilus-trash-file.c:
	(trash_callback_destroy), (trash_file_call_when_ready):
	Add a missing ref and unref.

2001-02-07  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5967, Music View slider is narrow in Eazel GTK theme
	
	Attempt to layout using Arlo's design.
	
	* components/music/nautilus-music-view.c:
	(music_view_set_selected_song_title), (add_play_controls),
	(nautilus_music_view_update),
	(music_view_background_appearance_changed_callback):

2001-02-07  Robin * Slomkowski  <rslomkow@eazel.com>

	* README: updated to note using the gnome-vfs-1 branch

2001-02-07  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 6281, property browser should user gnome icon
	selection UI for adding patterns and emblems instead of
	generic file browsing
	
	* libnautilus-extensions/nautilus-gnome-extensions.c,h:
	(nautilus_gnome_open_terminal), (widget_destroy_callback),
	(icon_selected_callback), (icon_cancel_pressed),
	(list_icon_selected_callback), (entry_activated),
	(nautilus_gnome_icon_selector_new):
	moved code to integrate icon picking UI from the properties
	window into gnome-extensions, so other parts of nautilus can
	use it.
	
	* src/file-manager/fm-properties-window.c: (set_icon_callback),
	(select_image_button_callback):
	moved icon picking code out of properties window, but call it
	from here instead.
	
	* src/nautilus-property-browser.c: (nautilus_emblem_dialog_new),
	(add_pattern_to_browser), (add_new_pattern),
	(emblem_dialog_clicked):
	use icon picking code in property browser to pick patterns, and
	rework the emblem dialog to use gnome-icon-entry.
	
2001-02-07  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Robin Slomkowski <robin@eazel.com>
	
	Fixed bug 6389, Extremely poor performance when
	autodir automounter is present
	
	Detect special NFS autofs directories and filter them out
	of the mount list.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(get_removable_volumes), (mount_volume_activate_nfs),
	(mount_volume_activate), (get_current_mount_list),
	(mount_volume_nfs_add), (mount_volume_add_filesystem):

	Worked on cleaning up placement of icons on the edges
	of the desktop based on input from Arlo.
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(icon_set_position):
		
2001-02-07  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6363, "Set Cover Image" button assumes
	fixed font height.
	
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize):
	Remove call to get_widget_set_usize
	
2001-02-07  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(show_hidden_files_changed_callback),
	(show_backup_files_changed_callback),
	(get_filter_options_for_directory_count):
	* libnautilus-extensions/nautilus-file.c:
	(show_text_in_icons_changed_callback),
	(show_directory_item_count_changed_callback),
	(get_speed_tradeoff_preference_for_file),
	(nautilus_file_should_show_directory_item_count),
	(nautilus_file_should_get_top_left_text):
	* libnautilus-extensions/nautilus-theme.c:
	(theme_changed_callback), (nautilus_theme_get_theme),
	(nautilus_theme_get_theme_data), (nautilus_theme_get_image_path):
	* src/file-manager/fm-directory-view.c:
	(confirm_trash_changed_callback), (real_update_menus):
	* src/file-manager/fm-icon-text-window.c:
	(icon_captions_changed_callback),
	(fm_get_text_attribute_names_preference_or_default):
	Use calllbacks for some preferences values instead of peeking
	diectly.  The preferences in question here are peeked a lot during
	large directory loads, even though they hardly ever change.  This
	should get preferences stuff mostly out of Pavel's profiles.  Now,
	im still working on bug 6054 which is about making peeking
	preferences in general faster.

2001-02-06  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Mike Fleming <mfleming@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(dequeue_pending_idle_callback), (mime_list_one):
	Handle the case where mime types don't get returned.

	* libnautilus-extensions/nautilus-file.c:
	Fix a comment.

2001-02-06  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_do_component_query):
	fixed bug 5479, two "View as Text" items in "View as Other"
	dialog list, by special casing the sample text component so
	it doesn't get added to the list.
	
2001-02-06  Arik Devens  <arik@eazel.com>

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	Fixed bug 5919, Preferences dialog jumps around the screen.
	
	* libnautilus-extensions/nautilus-preferences-dialog.c:
	(nautilus_preferences_dialog_construct): Removed the center
	positioning so that the dialog stays where the user put it.

2001-02-06  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 1736, if icons on desktop are offscreen, need to
	move them somewhre on screen.
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(icon_set_position), (nautilus_icon_container_move_icon):
	icon_set_position may modify the x and y location of the
	icon.  nautilus_icon_container_move_icon should use the
	modified position instead of the original x and y postion
	when writing the position out into the metafile.

2001-02-06  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-properties-window.c:
	(widget_destroy_callback), (icon_selected_callback),
	(icon_cancel_pressed), (list_icon_selected_callback),
	(entry_activated), (select_image_button_callback):
	fixed bug 6280, custom icon selection should use gnome-icon-sel
	instead of the generic file browser, so now it does.
	 
2001-02-06  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Michael Engber  <engber@eazel.com>

	* src/nautilus-sidebar.c: (nautilus_sidebar_initialize_class),
	(nautilus_sidebar_size_allocate), (nautilus_sidebar_realize):
	Tell X not to clear the window contents when the sidebar is
	resized.  Since we double buffer its contents, this will reduce
	(but not eliminate) flicker in the sidebar.
	
2001-02-06  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Laszlo Kovacs  <laszlo.kovacs@sun.com>

	Fixed bug 795 (help component installs files in nautilus prefix,
	but uses gnome-libs prefix to find them later) by expanding the
	set of places Nautilus looks for help files.

	* components/help/hyperbola-filefmt.c:
	(fmt_man_populate_tree_for_subdir): Changed to look in more places
	for help files: the help directory in the gnome prefix, the help
	directory in the nautilus prefix, and directories in GNOME_PATH.
	(fmt_help_populate_tree): New helper function.
	(append_help_dir_if_exists): New helper function.

	* components/help/Makefile.am: Define DATADIR in compile flags.

	* components/help/hyperbola-main.c: Add copyright notice.

	This part not reviewed:

	* .cvsignore, libnautilus-extensions/.cvsignore: gnore more
	things.

	* Makefile.am: distribute .in versions of xml-i18n-tools.
	
2001-02-06  John Sullivan  <sullivan@eazel.com>

	Fixed bug 5157 (Nautilus won't display directories for
	which it thinks it doesn't have permissions)

	I removed the code that prevented Nautilus from even
	trying to load a location for which the perceived
	permissions didn't allow reading (because the perceived
	permissions can be wrong with some file systems). Now
	it always tries, and puts up an error dialog only if
	it gets an error while actually loading the directory.

	* src/file-manager/fm-error-reporting.h:
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_loading_directory): New function, currently
	only handles GNOME_VFS_ERROR_ACCESS_DENIED and a fallback
	default case.
	(fm_report_error_renaming_file), (fm_report_error_setting_group),
	(fm_report_error_setting_owner),
	(fm_report_error_setting_permissions), (rename_callback):
	All the report_error functions now take a parent-window
	parameter (which is often NULL). Also, they now all use
	gnome_vfs_error_result_to_string when whining about
	unhandled cases.

	* src/file-manager/fm-directory-view.h: Changed comments
	and copyright notice only.
	* src/file-manager/fm-directory-view.c:
	(real_load_error): New function, calls 
	fm_report_error_loading_directory unless an error has already
	been reported for the current directory load operation.
	(fm_directory_view_initialize_class): Wire up real_load_error
	as default handler for LOAD_ERROR signal.
	(activate_callback): Pass parent window to error-reporting call.
	(load_directory): Reset the reported_load_error boolean since
	we're about to load anew.
	
	* src/file-manager/fm-properties-window.c: (rename_callback),
	(group_change_callback), (owner_change_callback),
	(permission_change_callback):
	Pass parent window to error-reporting-calls. I just passed NULL
	if it was not trivial to pass a good window.

	* src/nautilus-window-manage-views.c: 
	(handle_unreadable_location), (open_location): Remove code that
	was preventing "unreadable" locations from being loaded.

2001-02-06  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 6375, Certain menu shortcuts don't work when
	insertion point is in location bar.
	
	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_key_press):
	Filter out alt and control keyboard events and don't
	allow them to be passed to the parent GtkEntry.
	
2001-02-06  John Sullivan  <sullivan@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Fixed bug 6365 (Crash at boot if invalid file name given)

	* src/nautilus-window-manage-views.c:
	(load_new_location_in_all_views): Added some parameter checking
	to make future bugs like this even easier to find.
	(cancel_location_change): Don't reset to old location when old
	location is NULL.

2001-02-05  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Seth Nickel <seth@eazel.com>

	Fix 5930 (Copy dialog often shows "1" as total number of
		  fields in operation)

	* libnautilus-extensions/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_update),
	(nautilus_file_operations_progress_new_file):
	* libnautilus-extensions/nautilus-file-operations.c:
	(create_transfer_dialog):
	Special case the preparing to copy/move phase -- when the
	bytes_total is 0, don't display the count.
	
	* libnautilus-extensions/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_thaw):
	Formatting.

	* HACKING:
	Tiny tweak.

2001-02-05  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_file_conflict_check_signal),
	(eazel_file_uniqueness_check_signal),
	(eazel_feature_consistency_check_signal), (main):
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_file_conflict_check), (impl_file_uniqueness_check),
	(impl_feature_consistency_check), (eazel_install_callback_get_epv),
	(eazel_install_callback_class_initialize):
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-logic2.c:
	(check_no_two_packages_has_same_file),
	(check_conflicts_against_already_installed_packages),
	(check_feature_consistency):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_class_initialize),
	(eazel_install_emit_file_conflict_check),
	(eazel_install_emit_file_conflict_check_default),
	(eazel_install_emit_file_uniqueness_check),
	(eazel_install_emit_file_uniqueness_check_default),
	(eazel_install_emit_feature_consistency_check),
	(eazel_install_emit_feature_consistency_check_default):
	Fixed bug 3459 (emit signals when doing file-conflict,
	feature-consistency and file-uniqueness checks).
	
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_get_readable_name):
	Nyll poynter checking.

2001-02-05  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6359 (Choosing current view from "View as" menu crashes)

	* src/nautilus-window-manage-views.c:
	(nautilus_window_content_view_matches_iid): New function, extracted
	from load_content_view, checks whether passed iid is the one in
	use by this window.
	(load_content_view): Now calls extracted function.
	(nautilus_window_set_content_view): Bail out early if the
	new content view is the old one. This avoids unpleasant crashing
	later on.

2001-02-05  Gene Z. Ragan  <gzr@eazel.com>

	Add code to send the mime type of the file being examined to the
	mime type capplet so that the capplet can scroll to the mime type
	being examined.
	
	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list), (launch_mime_capplet),
	(launch_mime_capplet_and_close_dialog),
	(nautilus_program_chooser_show_no_choices_message):

2001-02-05  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed part of bug 6329 (entering "gconf://" as location
	crashes Nautilus). After this fix, it still crashes Nautilus,
	but in a gconf-specific way.

	* src/nautilus-window-manage-views.c:
	(load_new_location_in_all_views): Don't try to load
	a location in new_content_view if it's NULL.

2001-02-05  John Sullivan  <sullivan@eazel.com>

	reviewed by: Mike Fleming <mfleming@eazel.com>

	Fixed bug 6324 (Switching views crashes every time)
	
	* src/nautilus-window-manage-views.c:
	(set_to_pending_location_and_selection): Added assert
	to make future similar bugs even easier to catch.
	(view_loaded_callback): Don't call set_to_pending_location_and_selection
	when the content view is changing without the location & selection 
	changing; just update the one view instead.

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	Reduced the timed-wait timeout from 3 seconds to 2 after
	more investigation of timed-wait-related bugs. 3 seconds
	just felt a little too long.

2001-02-05  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-metafile-factory.c:
	(nautilus_metafile_factory_new), (free_factory_instance),
	(nautilus_metafile_factory_get_instance):
	* libnautilus-extensions/nautilus-metafile-factory.h:
	* src/Nautilus_shell.oaf.in:
	* src/nautilus-application.c: (manufactures), (create_object),
	(nautilus_application_startup):
	* src/nautilus-application.h:
	Add the MetafileFactory to the main object factory.

2001-02-05  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_get_default_component_sort_conditions),
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_components_for_file):
	Changes to make sure the short list is sorted 
	correctly, so the correct default application is chosen.

2001-02-05  Andy Hertzfeld  <andy@eazel.com>

	* librsvg/rsvg.c: (rsvg_render_svp):
	fixed bug 6301, bad svg crashes Nautilus, by adding a check
	in rsvg_render_svp to make sure a pixbuf has been allocated; if
	not, don't try to render.
	
2001-02-05  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6321 (Apparently arbitrary item initially selected
	in "Open with Other" dialog)

	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list): Select first item in list after sorting.

2001-02-04  Ian McKellar  <ian@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>	

	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-package-system-dpkg.c:
	(debpackage_free), (debpackage_fill_packagedata),
	(strip_trailing_whitespace), (parse_packages),
	(load_package_callback), (eazel_package_system_dpkg_load_package),
	(query_callback), (eazel_package_system_dpkg_query),
	(eazel_package_system_dpkg_install),
	(eazel_package_system_dpkg_uninstall),
	(eazel_package_system_dpkg_verify),
	(eazel_package_system_dpkg_compare_version),
	(eazel_package_system_dpkg_finalize),
	(eazel_package_system_dpkg_class_initialize),
	(eazel_package_system_dpkg_initialize),
	(eazel_package_system_dpkg_get_type),
	(eazel_package_system_dpkg_new),
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-dpkg.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_suggest_id),
	(eazel_package_system_load_implementation):
	Created a minimal, sub-functional Debian package backend for 
	libeazelinstall - essentially only enough to allow me to test my
	software inventory work on my Debian machines.

	* components/services/inventory/Makefile.am:
	* components/services/inventory/eazel-inventory-collect-hardware.c:
	(add_device_property), (eazel_inventory_collect_pci),
	(ide_get_value), (eazel_inventory_collect_ide), (str_has_prefix),
	(add_info), (read_proc_info), (eazel_inventory_collect_memory),
	(eazel_inventory_collect_cpu), (eazel_inventory_collect_hardware):
	* components/services/inventory/eazel-inventory-collect-hardware.h:
	* components/services/inventory/eazel-inventory-collect-software.c:
	(str_has_prefix), (get_package_list),
	(eazel_inventory_collect_packages),
	(eazel_inventory_collect_software):
	* components/services/inventory/eazel-inventory-collect-software.h:
	* components/services/inventory/eazel-inventory-utils.c:
	(eazel_create_configuration_metafile):
	Moved software inventory code into eazel-inventory-collect-software.c
	and hardware inventory code into eazel-inventory-collect-hardware.c.
	Added coded to collect PCI and IDE bus information.

	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.c: (determine_suse_version), (determine_debian_version):
	Added version check code for SuSE and Debian.

2001-02-04  Jason Leach  <jasonleach@usa.net>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>	
	
	* nautilus-clean.sh: Update to work with Solaris.

2001-02-04  Maciej Stachowiak  <mjs@eazel.com>

	* indent.sh: Script that calls indent with the right parameters to
	get a GNOME coding style (Nautilus subvariant).

	* components/help/hyperbola-filefmt.c,
	components/help/hyperbola-filefmt.h,
	components/help/hyperbola-main.c,
	components/help/hyperbola-nav-index.c,
	components/help/hyperbola-nav-search.c,
	components/help/hyperbola-nav-tree.c,
	components/help/hyperbola-nav.h,
	components/help/hyperbola-types.h: Run indent.sh on these.

2001-02-03  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6254 ("Display" name for grouping in "Folder Views"
	category is poor)

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_create_dialog): Verafied a little text.

2001-02-03  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/throbber/Makefile.am:
	Added the oaf.in files to EXTRA_DIST (tinderbox fix)

2001-02-03  Gene Z. Ragan  <gzr@eazel.com>

	Do a simple check for NULL instead of using
	g_return_if_fail.  We don't need the error
	reported to the terminal.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(get_removable_volumes), (volume_is_removable),
	(volume_is_read_only):

2001-02-02  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (tree_helper_helper), (tree_helper):
	Added check for PackageBreaks iterators.
	
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_install_failed):
	Leakfix, freeing the list given to the signal handler after
	handling.
	
	* components/services/install/lib/eazel-install-corba-types.c:
	(empty_hash_table),
	(packagedata_tree_from_corba_packagedatastructlist):
	Leakfix, now correctly frees the contents of the md5_hashtable and
	unrefs the proper objects.

	* components/services/install/lib/eazel-install-logic2.c:
	(eazel_install_check_existing_packages), (get_softcat_info),
	(is_satisfied), (is_satisfied_features),	
	(check_dependencies_foreach), (check_tree_helper),
	(add_file_conflict),
	(check_conflicts_against_already_installed_packages),
	(check_feature_consistency):
	Proper fillflags for some EazelPackageSystem calls.
	Nicer log-output when debug is off.
	Leak fix, the PackageBreaks "objects".
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_breaks_foreach),
	(get_detailed_messages_foreach),
	(get_detailed_cases_breaks_foreach), (get_detailed_cases_foreach):
	Updated for the new PackageBreaks "objects".
	
	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_rpm4_query_impl):
	s/packagedata_destroy/gtk_object_unref/
	
	* components/services/install/lib/eazel-package-system-types.c:
	(at_exit_package_data_info), (categorydata_new),
	(categorydata_destroy_foreach), (packagedata_finalize),
	(packagedata_class_initialize), (packagedata_initialize),
	(packagedata_get_readable_name), (packagebreaks_finalize),
	(packagebreaks_class_initialize), (packagebreaks_initialize),
	(packagefileconflict_finalize),
	(packagefileconflict_class_initialize),
	(packagefeaturemissing_finalize),
	(packagefeaturemissing_class_initialize):
	Finally got the destroy crap working for the PackageBreak
	"objects".
	More leakcheck stuff for various structures.
	Again, fixed get_reabable_name.
	
	* components/services/install/lib/eazel-package-system-types.h:
	Added finalizes to the "objects".
	Removed packagedata_destroy prototype.
	
	* components/services/trilobite/libtrilobite/Makefile.am:
	Cleanup and possible tinderbox fix.
	
2001-02-02  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-corba-types.c:
	(packagedata_tree_from_corba_packagedatastructlist):

	Fix small bug in the package tree inflater that caused break
	structs to be messed up.
	
	* components/services/install/lib/eazel-softcat.c:
	(get_search_url_for_package):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (create_package),
	(nautilus_service_install_view_update_from_uri_finish):

	Encode and decode suite_id/suite_name/product_id/product_name from
	eazel-install: urls and pass through to softcat queries.  They are
	all treated like variant flavors of suite_id internally (group of
	packages with a single id).
	
	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/installer.c:
	(get_detailed_errors_foreach), (get_detailed_errors),
	(eazel_install_preflight), (eazel_installer_set_default_texts),
	(eazel_installer_initialize):

	Remove eazel-hacking uninstall, since experts claim we no longer
	need it.  Some changes to sync up with the new world order where
	PackageData is now a GTK object.
	
	* nautilus-installer/src/package-tree.c:
	(find_package_parents_int), (find_package_parents),
	(get_errant_children_int), (get_errant_children),
	(package_customizer_fill_dep), (package_customizer_fill),
	(jump_to_package_tree_page):

	Fix the package customizer to cope with the new world order, where
	the package tree is sent across as a directed graph (instead of
	tree) and the deps are in 'depends' not 'soft_depends'.
	
	* nautilus-installer/src/prescript:

	Up version to 1.0.

2001-02-02  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 6163 (Need NautilusViewFrame ::
	report_location_changed). This is re-adding a feature we also had
	long ago, where a view reports a location change, but does not
	want the location change to come back to it in the form of a
	load_location call.

	* src/nautilus-applicable-views.h:
	* src/nautilus-applicable-views.c:
	(get_view_result_from_gnome_vfs_result), (got_file_info_callback),
	(got_minimum_file_info_callback),
	(nautilus_determine_initial_view),
	(nautilus_determine_initial_view_cancel): Changed this entire file
	to have a much easier-to-understand API.
	
	* src/nautilus-view-frame-private.h:
	* src/nautilus-view-frame-corba.c: (free_location_plus_callback):
	Change existing structure so it can be used for the location-change
	case, which includes a title too.
	(open_force_new_window): Use new structure.
	(report_location_change): Implement new call.
	(impl_Nautilus_ViewFrame_open_location_force_new_window): Use new
	structure.
	(impl_Nautilus_ViewFrame_report_location_change): Implement new
	call.
	
	* libnautilus/nautilus-view-component.idl: Add the new call.
	* libnautilus/nautilus-view.h:
	* libnautilus/nautilus-view.c:
	(nautilus_view_report_location_change): Add the new call.

	* src/nautilus-view-frame.h:
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_initialize_class): Add new signal.
	(nautilus_view_frame_report_location_change): Implement new call.
	
	* src/nautilus-window-private.h:
	* src/nautilus-window-manage-views.h:
	* src/nautilus-window-manage-views.c: (update_for_new_location):
	Got rid of obsolete assert. Also, no longer clear the selection.
	The selection is set properly earlier, and clearing it at this
	point serves no purpose.
	(location_has_really_changed): Call free_location_change to share
	more code. Also no reason to free "pending_ni" any more, because
	we don't keep it around in the success case.
	(load_new_location_in_one_view): New name.
	(load_new_location_in_sidebar_panels): New name. Also take a
	parameter of a view to skip.
	(load_new_location_in_all_views): New function.
	(set_to_pending_location_and_selection): New name, and removed
	code to handle the case where there is no pending location, since
	that doesn't happen. Also take a parameter of a view to skip. Also
	broke out the guts into load_new_location_in_all_views.
	(free_location_change): Free things by their new names. There's
	also less to free now.
	(cancel_location_change): Key off pending_location instead of
	pending_ni. Also save code by using new function that skips a
	view.
	(determined_initial_view_callback): Changed name, and use new
	interface. No longer need "end_reached" trick, because the new
	interface handles that.
	(begin_location_change): Made a static after moving all the
	functions that use it in here. Also moved some of the reload
	code out into nautilus_window_reload.
	(report_location_change_callback): New function. Does all the
	steps neede for a location change in place.
	(nautilus_window_back_or_forward), (nautilus_window_reload): Moved
	these two functions in here from nautilus-window.c so we could
	make begin_location_change more private.
	
	* src/nautilus-window.h:
	* src/nautilus-window.c: (nautilus_window_go_to): Changed the name.
	(nautilus_window_get_location): New function for callers that used
	to get the location field directly.
	(go_to_callback): Changed name.

	* src/nautilus-desktop-window.c: (nautilus_desktop_window_new):
	* src/nautilus-location-bar.c: (drag_data_received_callback):
	* src/nautilus-shell.c: (open_window), (save_window_states),
	(restore_window_states):
	* src/nautilus-window-menus.c: (services_button_callback),
	(help_menu_nautilus_manual_callback),
	(help_menu_nautilus_license_callback),
	(help_menu_nautilus_feedback_callback),
	(activate_bookmark_in_menu_item):
	* src/nautilus-window-service-ui.c: (goto_services_summary),
	(goto_online_storage), (goto_software_catalog),
	(goto_services_support):
	* src/nautilus-window.c: (location_change_at_idle_callback),
	(nautilus_window_constructed), (view_as_menu_vfs_method_callback),
	(nautilus_window_go_web_search), (nautilus_window_go_home):
	Use nautilus_go_to under its new name.
	
	* src/nautilus-shell.c: (restore_window_states): Use
	nautilus_istr_has_prefix instead of g_strncasecmp. Also did other
	code cleanup.
	
	* libnautilus-extensions/nautilus-gtk-extensions.h: Added a new
	marshal function that I needed.
	
	* libnautilus-extensions/nautilus-thumbnails.c: Added a FIXME.
	
	* libnautilus-extensions/nautilus-view-identifier.h:
	* libnautilus-extensions/nautilus-view-identifier.c:
	(nautilus_view_identifier_copy),
	(nautilus_view_identifier_compare): Use const.
	
	* src/nautilus-application.c: (nautilus_application_startup): Only
	check for root if we are actually running nautilus, not if we are
	just killing off an existing copy.
	(confirm_ok_to_run_as_root): Changed name of the function and
	improved the wording of the message and button. Also added an
	environment variable you can set to get rid of this. (Probably
	should have been a preference instead, but I am officially being
	lazy about this.)

	Fixed bug that was revealed by the change in the loading sequence
	I made. John didn't review this part:
	
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory-async.c:
	(load_directory_state_destroy), (load_directory_done):
	Separate out code to free the partly-done state so it can
	be used in the cancel case.
	(dequeue_pending_idle_callback): Ref the directory object
	so that we won't get messed up if the callback destroys it.
	(directory_load_cancel): Separated out the old part of
	file_list_cancel so that we can cancel the idle part too
	when we want to.
	(file_list_cancel): Use the new calls to cancel the idle
	part of directory loading.
	(directory_load_done): Use directory_load_cancel instead of
	file_list_cancel.
	(nautilus_directory_stop_monitoring_file_list): Use
	directory_load_cancel instead of file_list_cancel.
	(nautilus_directory_async_state_changed): Added state variables to
	protect cases where we re-enter this function.

2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Michael Engber  <engber@eazel.com>

	* applets/preferences-applet/nautilus-preferences-applet.c:
	(restart_button_clicked_callback), (main):
	Add a restart button.
	
2001-02-02  Gene Z. Ragan  <gzr@eazel.com>

	Fixed a small bug where I was assuming a value would be valid
	when it could be NULL. Now I check for NULL.
	
	* src/nautilus-application.c: (volume_unmounted_callback):

2001-02-02  Brett Neely  <brett@eazel.com>

	reviewed by: Eric Fischer  <eric@eazel.com>

	* nautilus-clean.sh:
	Kill oafd last so nautilus-clean.sh -x only needs to be run once.

2001-02-02  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>
	
	Fixed bug 5222,
	Nautilus allows users to rename .Trash (but not copy or link)
	
	* libnautilus-extensions/nautilus-file-utilities.c:
	* libnautilus-extensions/nautilus-file-utilities.h:
	(nautilus_uri_is_trash_folder):
	Utility function to indentify if the folder is trash based
	on a text uri.
	
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_can_rename):
	Call nautilus_uri_is_trash_folder to identify a trash
	folder and disallow renaming.
	
2001-02-02  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 5749 (bookmarks are untranslated)

	* data/static_bookmarks.xml:
	An earlier checkin to update the bookmarks stripped off
	all the underscores from "_name=" strings, which was what
	was causing them to be translated. Fixed by returning the
	underscores.

2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/preferences-applet/nautilus-preferences-applet.c:
	(boolean_toggle_button_new), (start_button_clicked_callback),
	(main):
	Add a Nautilus start button.  Also make the fonts smaller to
	conserver panel space.
	
2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fix bug 6131 - NautilusLabel does not support proper line wrap.
	Its fixed for smooth mode.  Theres a bug (6243) for the more
	complicated issue of wrapping in non smooth mode.

	* libnautilus-extensions/nautilus-label.h:
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_initialize_class), (nautilus_label_set_arg),
	(nautilus_label_get_arg), (nautilus_label_size_allocate),
	(nautilus_label_set_never_smooth),
	(nautilus_label_set_adjust_wrap_on_resize),
	(nautilus_label_get_adjust_wrap_on_resize):
	Add a boolean attribute 'adjust_wrap_on_resize' that controls
	whether the label will automatically update its line wrap width
	when its resized.

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (summary_view_item_label_new), (summary_load_location_callback):
	No longer need size_allocate hack.  Use NautilusLabel's
	'adjust_wrap_on_resize' attribute instead.
	
	* test/test-nautilus-label-wrapped.c: (create_nautilus_label),
	(create_gtk_label_window), (create_nautilus_label_window), (main):
	Update for 'adjust_wrap_on_resize'.
	
2001-02-01  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fix bug 4678 (Clicking on a Nautilus link file in tree view causes
	Nautilus cannot handle item type error box).
	
	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_destroy), (got_activation_uri_callback),
	(cancel_possible_activation), (tree_select_row_callback): Activate
	activation URI instead of file URI to support Nautilus links
	properly. If the link resolves to a "command:" URI, however,
	silently ignore it to avoid giving an ugly error message because
	per John Sullivan, selecting things in the tree view should not
	launch apps.

	* components/tree/nautilus-tree-view-private.h: Added
	activation_uri_wait_file field to details struct.

	* data/top/Computer, data/top/Services: Updated to new nautilus
	link format.

2001-02-02  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (flatten_package_tree_foreach):

	Fix build breakage caused by my previous checkin.

2001-02-02  Robey Pointer  <robey@eazel.com>

=======
	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-package-system-dpkg.c:
	(debpackage_free), (debpackage_fill_packagedata),
	(strip_trailing_whitespace), (parse_packages),
	(load_package_callback), (eazel_package_system_dpkg_load_package),
	(query_callback), (eazel_package_system_dpkg_query),
	(eazel_package_system_dpkg_install),
	(eazel_package_system_dpkg_uninstall),
	(eazel_package_system_dpkg_verify),
	(eazel_package_system_dpkg_compare_version),
	(eazel_package_system_dpkg_finalize),
	(eazel_package_system_dpkg_class_initialize),
	(eazel_package_system_dpkg_initialize),
	(eazel_package_system_dpkg_get_type),
	(eazel_package_system_dpkg_new),
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-dpkg.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_suggest_id),
	(eazel_package_system_load_implementation):
	Created a minimal, sub-functional Debian package backend for 
	libeazelinstall - essentially only enough to allow me to test my
	software inventory work on my Debian machines.

	* components/services/inventory/Makefile.am:
	* components/services/inventory/eazel-inventory-collect-hardware.c:
	(add_device_property), (eazel_inventory_collect_pci),
	(ide_get_value), (eazel_inventory_collect_ide), (str_has_prefix),
	(add_info), (read_proc_info), (eazel_inventory_collect_memory),
	(eazel_inventory_collect_cpu), (eazel_inventory_collect_hardware):
	* components/services/inventory/eazel-inventory-collect-hardware.h:
	* components/services/inventory/eazel-inventory-collect-software.c:
	(str_has_prefix), (get_package_list),
	(eazel_inventory_collect_packages),
	(eazel_inventory_collect_software):
	* components/services/inventory/eazel-inventory-collect-software.h:
	* components/services/inventory/eazel-inventory-utils.c:
	(eazel_create_configuration_metafile):
	Moved software inventory code into eazel-inventory-collect-software.c
	and hardware inventory code into eazel-inventory-collect-hardware.c.
	Added coded to collect PCI and IDE bus information.

	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.c: (determine_suse_version), (determine_debian_version):
	Added version check code for SuSE and Debian.

2001-02-04  Jason Leach  <jasonleach@usa.net>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>	
	
	* nautilus-clean.sh: Update to work with Solaris.

2001-02-04  Maciej Stachowiak  <mjs@eazel.com>

	* indent.sh: Script that calls indent with the right parameters to
	get a GNOME coding style (Nautilus subvariant).

	* components/help/hyperbola-filefmt.c,
	components/help/hyperbola-filefmt.h,
	components/help/hyperbola-main.c,
	components/help/hyperbola-nav-index.c,
	components/help/hyperbola-nav-search.c,
	components/help/hyperbola-nav-tree.c,
	components/help/hyperbola-nav.h,
	components/help/hyperbola-types.h: Run indent.sh on these.

2001-02-03  John Sullivan  <sullivan@eazel.com>

	Fixed bug 6254 ("Display" name for grouping in "Folder Views"
	category is poor)

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions),
	(global_preferences_create_dialog): Verafied a little text.

2001-02-03  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/throbber/Makefile.am:
	Added the oaf.in files to EXTRA_DIST (tinderbox fix)

2001-02-03  Gene Z. Ragan  <gzr@eazel.com>

	Do a simple check for NULL instead of using
	g_return_if_fail.  We don't need the error
	reported to the terminal.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(get_removable_volumes), (volume_is_removable),
	(volume_is_read_only):

2001-02-02  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (tree_helper_helper), (tree_helper):
	Added check for PackageBreaks iterators.
	
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_install_failed):
	Leakfix, freeing the list given to the signal handler after
	handling.
	
	* components/services/install/lib/eazel-install-corba-types.c:
	(empty_hash_table),
	(packagedata_tree_from_corba_packagedatastructlist):
	Leakfix, now correctly frees the contents of the md5_hashtable and
	unrefs the proper objects.

	* components/services/install/lib/eazel-install-logic2.c:
	(eazel_install_check_existing_packages), (get_softcat_info),
	(is_satisfied), (is_satisfied_features),	
	(check_dependencies_foreach), (check_tree_helper),
	(add_file_conflict),
	(check_conflicts_against_already_installed_packages),
	(check_feature_consistency):
	Proper fillflags for some EazelPackageSystem calls.
	Nicer log-output when debug is off.
	Leak fix, the PackageBreaks "objects".
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_breaks_foreach),
	(get_detailed_messages_foreach),
	(get_detailed_cases_breaks_foreach), (get_detailed_cases_foreach):
	Updated for the new PackageBreaks "objects".
	
	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_rpm4_query_impl):
	s/packagedata_destroy/gtk_object_unref/
	
	* components/services/install/lib/eazel-package-system-types.c:
	(at_exit_package_data_info), (categorydata_new),
	(categorydata_destroy_foreach), (packagedata_finalize),
	(packagedata_class_initialize), (packagedata_initialize),
	(packagedata_get_readable_name), (packagebreaks_finalize),
	(packagebreaks_class_initialize), (packagebreaks_initialize),
	(packagefileconflict_finalize),
	(packagefileconflict_class_initialize),
	(packagefeaturemissing_finalize),
	(packagefeaturemissing_class_initialize):
	Finally got the destroy crap working for the PackageBreak
	"objects".
	More leakcheck stuff for various structures.
	Again, fixed get_reabable_name.
	
	* components/services/install/lib/eazel-package-system-types.h:
	Added finalizes to the "objects".
	Removed packagedata_destroy prototype.
	
	* components/services/trilobite/libtrilobite/Makefile.am:
	Cleanup and possible tinderbox fix.
	
2001-02-02  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-corba-types.c:
	(packagedata_tree_from_corba_packagedatastructlist):

	Fix small bug in the package tree inflater that caused break
	structs to be messed up.
	
	* components/services/install/lib/eazel-softcat.c:
	(get_search_url_for_package):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (create_package),
	(nautilus_service_install_view_update_from_uri_finish):

	Encode and decode suite_id/suite_name/product_id/product_name from
	eazel-install: urls and pass through to softcat queries.  They are
	all treated like variant flavors of suite_id internally (group of
	packages with a single id).
	
	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/installer.c:
	(get_detailed_errors_foreach), (get_detailed_errors),
	(eazel_install_preflight), (eazel_installer_set_default_texts),
	(eazel_installer_initialize):

	Remove eazel-hacking uninstall, since experts claim we no longer
	need it.  Some changes to sync up with the new world order where
	PackageData is now a GTK object.
	
	* nautilus-installer/src/package-tree.c:
	(find_package_parents_int), (find_package_parents),
	(get_errant_children_int), (get_errant_children),
	(package_customizer_fill_dep), (package_customizer_fill),
	(jump_to_package_tree_page):

	Fix the package customizer to cope with the new world order, where
	the package tree is sent across as a directed graph (instead of
	tree) and the deps are in 'depends' not 'soft_depends'.
	
	* nautilus-installer/src/prescript:

	Up version to 1.0.

2001-02-02  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 6163 (Need NautilusViewFrame ::
	report_location_changed). This is re-adding a feature we also had
	long ago, where a view reports a location change, but does not
	want the location change to come back to it in the form of a
	load_location call.

	* src/nautilus-applicable-views.h:
	* src/nautilus-applicable-views.c:
	(get_view_result_from_gnome_vfs_result), (got_file_info_callback),
	(got_minimum_file_info_callback),
	(nautilus_determine_initial_view),
	(nautilus_determine_initial_view_cancel): Changed this entire file
	to have a much easier-to-understand API.
	
	* src/nautilus-view-frame-private.h:
	* src/nautilus-view-frame-corba.c: (free_location_plus_callback):
	Change existing structure so it can be used for the location-change
	case, which includes a title too.
	(open_force_new_window): Use new structure.
	(report_location_change): Implement new call.
	(impl_Nautilus_ViewFrame_open_location_force_new_window): Use new
	structure.
	(impl_Nautilus_ViewFrame_report_location_change): Implement new
	call.
	
	* libnautilus/nautilus-view-component.idl: Add the new call.
	* libnautilus/nautilus-view.h:
	* libnautilus/nautilus-view.c:
	(nautilus_view_report_location_change): Add the new call.

	* src/nautilus-view-frame.h:
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_initialize_class): Add new signal.
	(nautilus_view_frame_report_location_change): Implement new call.
	
	* src/nautilus-window-private.h:
	* src/nautilus-window-manage-views.h:
	* src/nautilus-window-manage-views.c: (update_for_new_location):
	Got rid of obsolete assert. Also, no longer clear the selection.
	The selection is set properly earlier, and clearing it at this
	point serves no purpose.
	(location_has_really_changed): Call free_location_change to share
	more code. Also no reason to free "pending_ni" any more, because
	we don't keep it around in the success case.
	(load_new_location_in_one_view): New name.
	(load_new_location_in_sidebar_panels): New name. Also take a
	parameter of a view to skip.
	(load_new_location_in_all_views): New function.
	(set_to_pending_location_and_selection): New name, and removed
	code to handle the case where there is no pending location, since
	that doesn't happen. Also take a parameter of a view to skip. Also
	broke out the guts into load_new_location_in_all_views.
	(free_location_change): Free things by their new names. There's
	also less to free now.
	(cancel_location_change): Key off pending_location instead of
	pending_ni. Also save code by using new function that skips a
	view.
	(determined_initial_view_callback): Changed name, and use new
	interface. No longer need "end_reached" trick, because the new
	interface handles that.
	(begin_location_change): Made a static after moving all the
	functions that use it in here. Also moved some of the reload
	code out into nautilus_window_reload.
	(report_location_change_callback): New function. Does all the
	steps neede for a location change in place.
	(nautilus_window_back_or_forward), (nautilus_window_reload): Moved
	these two functions in here from nautilus-window.c so we could
	make begin_location_change more private.
	
	* src/nautilus-window.h:
	* src/nautilus-window.c: (nautilus_window_go_to): Changed the name.
	(nautilus_window_get_location): New function for callers that used
	to get the location field directly.
	(go_to_callback): Changed name.

	* src/nautilus-desktop-window.c: (nautilus_desktop_window_new):
	* src/nautilus-location-bar.c: (drag_data_received_callback):
	* src/nautilus-shell.c: (open_window), (save_window_states),
	(restore_window_states):
	* src/nautilus-window-menus.c: (services_button_callback),
	(help_menu_nautilus_manual_callback),
	(help_menu_nautilus_license_callback),
	(help_menu_nautilus_feedback_callback),
	(activate_bookmark_in_menu_item):
	* src/nautilus-window-service-ui.c: (goto_services_summary),
	(goto_online_storage), (goto_software_catalog),
	(goto_services_support):
	* src/nautilus-window.c: (location_change_at_idle_callback),
	(nautilus_window_constructed), (view_as_menu_vfs_method_callback),
	(nautilus_window_go_web_search), (nautilus_window_go_home):
	Use nautilus_go_to under its new name.
	
	* src/nautilus-shell.c: (restore_window_states): Use
	nautilus_istr_has_prefix instead of g_strncasecmp. Also did other
	code cleanup.
	
	* libnautilus-extensions/nautilus-gtk-extensions.h: Added a new
	marshal function that I needed.
	
	* libnautilus-extensions/nautilus-thumbnails.c: Added a FIXME.
	
	* libnautilus-extensions/nautilus-view-identifier.h:
	* libnautilus-extensions/nautilus-view-identifier.c:
	(nautilus_view_identifier_copy),
	(nautilus_view_identifier_compare): Use const.
	
	* src/nautilus-application.c: (nautilus_application_startup): Only
	check for root if we are actually running nautilus, not if we are
	just killing off an existing copy.
	(confirm_ok_to_run_as_root): Changed name of the function and
	improved the wording of the message and button. Also added an
	environment variable you can set to get rid of this. (Probably
	should have been a preference instead, but I am officially being
	lazy about this.)

	Fixed bug that was revealed by the change in the loading sequence
	I made. John didn't review this part:
	
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory-async.c:
	(load_directory_state_destroy), (load_directory_done):
	Separate out code to free the partly-done state so it can
	be used in the cancel case.
	(dequeue_pending_idle_callback): Ref the directory object
	so that we won't get messed up if the callback destroys it.
	(directory_load_cancel): Separated out the old part of
	file_list_cancel so that we can cancel the idle part too
	when we want to.
	(file_list_cancel): Use the new calls to cancel the idle
	part of directory loading.
	(directory_load_done): Use directory_load_cancel instead of
	file_list_cancel.
	(nautilus_directory_stop_monitoring_file_list): Use
	directory_load_cancel instead of file_list_cancel.
	(nautilus_directory_async_state_changed): Added state variables to
	protect cases where we re-enter this function.

2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Michael Engber  <engber@eazel.com>

	* applets/preferences-applet/nautilus-preferences-applet.c:
	(restart_button_clicked_callback), (main):
	Add a restart button.
	
2001-02-02  Gene Z. Ragan  <gzr@eazel.com>

	Fixed a small bug where I was assuming a value would be valid
	when it could be NULL. Now I check for NULL.
	
	* src/nautilus-application.c: (volume_unmounted_callback):

2001-02-02  Brett Neely  <brett@eazel.com>

	reviewed by: Eric Fischer  <eric@eazel.com>

	* nautilus-clean.sh:
	Kill oafd last so nautilus-clean.sh -x only needs to be run once.

2001-02-02  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>
	
	Fixed bug 5222,
	Nautilus allows users to rename .Trash (but not copy or link)
	
	* libnautilus-extensions/nautilus-file-utilities.c:
	* libnautilus-extensions/nautilus-file-utilities.h:
	(nautilus_uri_is_trash_folder):
	Utility function to indentify if the folder is trash based
	on a text uri.
	
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_can_rename):
	Call nautilus_uri_is_trash_folder to identify a trash
	folder and disallow renaming.
	
2001-02-02  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 5749 (bookmarks are untranslated)

	* data/static_bookmarks.xml:
	An earlier checkin to update the bookmarks stripped off
	all the underscores from "_name=" strings, which was what
	was causing them to be translated. Fixed by returning the
	underscores.

2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/preferences-applet/nautilus-preferences-applet.c:
	(boolean_toggle_button_new), (start_button_clicked_callback),
	(main):
	Add a Nautilus start button.  Also make the fonts smaller to
	conserver panel space.
	
2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fix bug 6131 - NautilusLabel does not support proper line wrap.
	Its fixed for smooth mode.  Theres a bug (6243) for the more
	complicated issue of wrapping in non smooth mode.

	* libnautilus-extensions/nautilus-label.h:
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_initialize_class), (nautilus_label_set_arg),
	(nautilus_label_get_arg), (nautilus_label_size_allocate),
	(nautilus_label_set_never_smooth),
	(nautilus_label_set_adjust_wrap_on_resize),
	(nautilus_label_get_adjust_wrap_on_resize):
	Add a boolean attribute 'adjust_wrap_on_resize' that controls
	whether the label will automatically update its line wrap width
	when its resized.

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (summary_view_item_label_new), (summary_load_location_callback):
	No longer need size_allocate hack.  Use NautilusLabel's
	'adjust_wrap_on_resize' attribute instead.
	
	* test/test-nautilus-label-wrapped.c: (create_nautilus_label),
	(create_gtk_label_window), (create_nautilus_label_window), (main):
	Update for 'adjust_wrap_on_resize'.
	
2001-02-01  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fix bug 4678 (Clicking on a Nautilus link file in tree view causes
	Nautilus cannot handle item type error box).
	
	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_destroy), (got_activation_uri_callback),
	(cancel_possible_activation), (tree_select_row_callback): Activate
	activation URI instead of file URI to support Nautilus links
	properly. If the link resolves to a "command:" URI, however,
	silently ignore it to avoid giving an ugly error message because
	per John Sullivan, selecting things in the tree view should not
	launch apps.

	* components/tree/nautilus-tree-view-private.h: Added
	activation_uri_wait_file field to details struct.

	* data/top/Computer, data/top/Services: Updated to new nautilus
	link format.

2001-02-02  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (flatten_package_tree_foreach):

	Fix build breakage caused by my previous checkin.

2001-02-02  Robey Pointer  <robey@eazel.com>

=======
	(eazel_install_check_existing_packages), (get_softcat_info),
	(is_satisfied), (is_satisfied_features),	
	(check_dependencies_foreach), (check_tree_helper),
	(add_file_conflict),
	(check_conflicts_against_already_installed_packages),
	(check_feature_consistency):
	Proper fillflags for some EazelPackageSystem calls.
	Nicer log-output when debug is off.
	Leak fix, the PackageBreaks "objects".
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_breaks_foreach),
	(get_detailed_messages_foreach),
	(get_detailed_cases_breaks_foreach), (get_detailed_cases_foreach):
	Updated for the new PackageBreaks "objects".
	
	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_rpm4_query_impl):
	s/packagedata_destroy/gtk_object_unref/
	
	* components/services/install/lib/eazel-package-system-types.c:
	(at_exit_package_data_info), (categorydata_new),
	(categorydata_destroy_foreach), (packagedata_finalize),
	(packagedata_class_initialize), (packagedata_initialize),
	(packagedata_get_readable_name), (packagebreaks_finalize),
	(packagebreaks_class_initialize), (packagebreaks_initialize),
	(packagefileconflict_finalize),
	(packagefileconflict_class_initialize),
	(packagefeaturemissing_finalize),
	(packagefeaturemissing_class_initialize):
	Finally got the destroy crap working for the PackageBreak
	"objects".
	More leakcheck stuff for various structures.
	Again, fixed get_reabable_name.
	
	* components/services/install/lib/eazel-package-system-types.h:
	Added finalizes to the "objects".
	Removed packagedata_destroy prototype.
	
	* components/services/trilobite/libtrilobite/Makefile.am:
	Cleanup and possible tinderbox fix.
	
2001-02-02  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-corba-types.c:
	(packagedata_tree_from_corba_packagedatastructlist):

	Fix small bug in the package tree inflater that caused break
	structs to be messed up.
	
	* components/services/install/lib/eazel-softcat.c:
	(get_search_url_for_package):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (create_package),
	(nautilus_service_install_view_update_from_uri_finish):

	Encode and decode suite_id/suite_name/product_id/product_name from
	eazel-install: urls and pass through to softcat queries.  They are
	all treated like variant flavors of suite_id internally (group of
	packages with a single id).
	
	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/installer.c:
	(get_detailed_errors_foreach), (get_detailed_errors),
	(eazel_install_preflight), (eazel_installer_set_default_texts),
	(eazel_installer_initialize):

	Remove eazel-hacking uninstall, since experts claim we no longer
	need it.  Some changes to sync up with the new world order where
	PackageData is now a GTK object.
	
	* nautilus-installer/src/package-tree.c:
	(find_package_parents_int), (find_package_parents),
	(get_errant_children_int), (get_errant_children),
	(package_customizer_fill_dep), (package_customizer_fill),
	(jump_to_package_tree_page):

	Fix the package customizer to cope with the new world order, where
	the package tree is sent across as a directed graph (instead of
	tree) and the deps are in 'depends' not 'soft_depends'.
	
	* nautilus-installer/src/prescript:

	Up version to 1.0.

2001-02-02  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 6163 (Need NautilusViewFrame ::
	report_location_changed). This is re-adding a feature we also had
	long ago, where a view reports a location change, but does not
	want the location change to come back to it in the form of a
	load_location call.

	* src/nautilus-applicable-views.h:
	* src/nautilus-applicable-views.c:
	(get_view_result_from_gnome_vfs_result), (got_file_info_callback),
	(got_minimum_file_info_callback),
	(nautilus_determine_initial_view),
	(nautilus_determine_initial_view_cancel): Changed this entire file
	to have a much easier-to-understand API.
	
	* src/nautilus-view-frame-private.h:
	* src/nautilus-view-frame-corba.c: (free_location_plus_callback):
	Change existing structure so it can be used for the location-change
	case, which includes a title too.
	(open_force_new_window): Use new structure.
	(report_location_change): Implement new call.
	(impl_Nautilus_ViewFrame_open_location_force_new_window): Use new
	structure.
	(impl_Nautilus_ViewFrame_report_location_change): Implement new
	call.
	
	* libnautilus/nautilus-view-component.idl: Add the new call.
	* libnautilus/nautilus-view.h:
	* libnautilus/nautilus-view.c:
	(nautilus_view_report_location_change): Add the new call.

	* src/nautilus-view-frame.h:
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_initialize_class): Add new signal.
	(nautilus_view_frame_report_location_change): Implement new call.
	
	* src/nautilus-window-private.h:
	* src/nautilus-window-manage-views.h:
	* src/nautilus-window-manage-views.c: (update_for_new_location):
	Got rid of obsolete assert. Also, no longer clear the selection.
	The selection is set properly earlier, and clearing it at this
	point serves no purpose.
	(location_has_really_changed): Call free_location_change to share
	more code. Also no reason to free "pending_ni" any more, because
	we don't keep it around in the success case.
	(load_new_location_in_one_view): New name.
	(load_new_location_in_sidebar_panels): New name. Also take a
	parameter of a view to skip.
	(load_new_location_in_all_views): New function.
	(set_to_pending_location_and_selection): New name, and removed
	code to handle the case where there is no pending location, since
	that doesn't happen. Also take a parameter of a view to skip. Also
	broke out the guts into load_new_location_in_all_views.
	(free_location_change): Free things by their new names. There's
	also less to free now.
	(cancel_location_change): Key off pending_location instead of
	pending_ni. Also save code by using new function that skips a
	view.
	(determined_initial_view_callback): Changed name, and use new
	interface. No longer need "end_reached" trick, because the new
	interface handles that.
	(begin_location_change): Made a static after moving all the
	functions that use it in here. Also moved some of the reload
	code out into nautilus_window_reload.
	(report_location_change_callback): New function. Does all the
	steps neede for a location change in place.
	(nautilus_window_back_or_forward), (nautilus_window_reload): Moved
	these two functions in here from nautilus-window.c so we could
	make begin_location_change more private.
	
	* src/nautilus-window.h:
	* src/nautilus-window.c: (nautilus_window_go_to): Changed the name.
	(nautilus_window_get_location): New function for callers that used
	to get the location field directly.
	(go_to_callback): Changed name.

	* src/nautilus-desktop-window.c: (nautilus_desktop_window_new):
	* src/nautilus-location-bar.c: (drag_data_received_callback):
	* src/nautilus-shell.c: (open_window), (save_window_states),
	(restore_window_states):
	* src/nautilus-window-menus.c: (services_button_callback),
	(help_menu_nautilus_manual_callback),
	(help_menu_nautilus_license_callback),
	(help_menu_nautilus_feedback_callback),
	(activate_bookmark_in_menu_item):
	* src/nautilus-window-service-ui.c: (goto_services_summary),
	(goto_online_storage), (goto_software_catalog),
	(goto_services_support):
	* src/nautilus-window.c: (location_change_at_idle_callback),
	(nautilus_window_constructed), (view_as_menu_vfs_method_callback),
	(nautilus_window_go_web_search), (nautilus_window_go_home):
	Use nautilus_go_to under its new name.
	
	* src/nautilus-shell.c: (restore_window_states): Use
	nautilus_istr_has_prefix instead of g_strncasecmp. Also did other
	code cleanup.
	
	* libnautilus-extensions/nautilus-gtk-extensions.h: Added a new
	marshal function that I needed.
	
	* libnautilus-extensions/nautilus-thumbnails.c: Added a FIXME.
	
	* libnautilus-extensions/nautilus-view-identifier.h:
	* libnautilus-extensions/nautilus-view-identifier.c:
	(nautilus_view_identifier_copy),
	(nautilus_view_identifier_compare): Use const.
	
	* src/nautilus-application.c: (nautilus_application_startup): Only
	check for root if we are actually running nautilus, not if we are
	just killing off an existing copy.
	(confirm_ok_to_run_as_root): Changed name of the function and
	improved the wording of the message and button. Also added an
	environment variable you can set to get rid of this. (Probably
	should have been a preference instead, but I am officially being
	lazy about this.)

	Fixed bug that was revealed by the change in the loading sequence
	I made. John didn't review this part:
	
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory-async.c:
	(load_directory_state_destroy), (load_directory_done):
	Separate out code to free the partly-done state so it can
	be used in the cancel case.
	(dequeue_pending_idle_callback): Ref the directory object
	so that we won't get messed up if the callback destroys it.
	(directory_load_cancel): Separated out the old part of
	file_list_cancel so that we can cancel the idle part too
	when we want to.
	(file_list_cancel): Use the new calls to cancel the idle
	part of directory loading.
	(directory_load_done): Use directory_load_cancel instead of
	file_list_cancel.
	(nautilus_directory_stop_monitoring_file_list): Use
	directory_load_cancel instead of file_list_cancel.
	(nautilus_directory_async_state_changed): Added state variables to
	protect cases where we re-enter this function.

2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Michael Engber  <engber@eazel.com>

	* applets/preferences-applet/nautilus-preferences-applet.c:
	(restart_button_clicked_callback), (main):
	Add a restart button.
	
2001-02-02  Gene Z. Ragan  <gzr@eazel.com>

	Fixed a small bug where I was assuming a value would be valid
	when it could be NULL. Now I check for NULL.
	
	* src/nautilus-application.c: (volume_unmounted_callback):

2001-02-02  Brett Neely  <brett@eazel.com>

	reviewed by: Eric Fischer  <eric@eazel.com>

	* nautilus-clean.sh:
	Kill oafd last so nautilus-clean.sh -x only needs to be run once.

2001-02-02  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>
	
	Fixed bug 5222,
	Nautilus allows users to rename .Trash (but not copy or link)
	
	* libnautilus-extensions/nautilus-file-utilities.c:
	* libnautilus-extensions/nautilus-file-utilities.h:
	(nautilus_uri_is_trash_folder):
	Utility function to indentify if the folder is trash based
	on a text uri.
	
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_can_rename):
	Call nautilus_uri_is_trash_folder to identify a trash
	folder and disallow renaming.
	
2001-02-02  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 5749 (bookmarks are untranslated)

	* data/static_bookmarks.xml:
	An earlier checkin to update the bookmarks stripped off
	all the underscores from "_name=" strings, which was what
	was causing them to be translated. Fixed by returning the
	underscores.

2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/preferences-applet/nautilus-preferences-applet.c:
	(boolean_toggle_button_new), (start_button_clicked_callback),
	(main):
	Add a Nautilus start button.  Also make the fonts smaller to
	conserver panel space.
	
2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fix bug 6131 - NautilusLabel does not support proper line wrap.
	Its fixed for smooth mode.  Theres a bug (6243) for the more
	complicated issue of wrapping in non smooth mode.

	* libnautilus-extensions/nautilus-label.h:
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_initialize_class), (nautilus_label_set_arg),
	(nautilus_label_get_arg), (nautilus_label_size_allocate),
	(nautilus_label_set_never_smooth),
	(nautilus_label_set_adjust_wrap_on_resize),
	(nautilus_label_get_adjust_wrap_on_resize):
	Add a boolean attribute 'adjust_wrap_on_resize' that controls
	whether the label will automatically update its line wrap width
	when its resized.

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (summary_view_item_label_new), (summary_load_location_callback):
	No longer need size_allocate hack.  Use NautilusLabel's
	'adjust_wrap_on_resize' attribute instead.
	
	* test/test-nautilus-label-wrapped.c: (create_nautilus_label),
	(create_gtk_label_window), (create_nautilus_label_window), (main):
	Update for 'adjust_wrap_on_resize'.
	
2001-02-01  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fix bug 4678 (Clicking on a Nautilus link file in tree view causes
	Nautilus cannot handle item type error box).
	
	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_destroy), (got_activation_uri_callback),
	(cancel_possible_activation), (tree_select_row_callback): Activate
	activation URI instead of file URI to support Nautilus links
	properly. If the link resolves to a "command:" URI, however,
	silently ignore it to avoid giving an ugly error message because
	per John Sullivan, selecting things in the tree view should not
	launch apps.

	* components/tree/nautilus-tree-view-private.h: Added
	activation_uri_wait_file field to details struct.

	* data/top/Computer, data/top/Services: Updated to new nautilus
	link format.

2001-02-02  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (flatten_package_tree_foreach):

	Fix build breakage caused by my previous checkin.

2001-02-02  Robey Pointer  <robey@eazel.com>

	* src/file-manager/fm-desktop-icon-view.c:
	(update_home_link_and_delete_copies), (real_update_menus):
	* src/file-manager/fm-directory-view.c: (open_location),
	(confirm_delete_from_trash), (real_update_menus),
	(fm_directory_view_activate_files), (filtering_changed_callback):
	* src/file-manager/fm-icon-text-window.c:
	(changed_attributes_option_menu_callback),
	(fm_get_text_attribute_names_preference_or_default):
	* src/file-manager/fm-icon-view.c: (should_preview_sound),
	(fm_icon_view_update_click_mode),
	(fm_icon_view_update_smooth_graphics_mode):
	* src/file-manager/fm-list-view.c:
	(fm_list_view_update_click_mode):
	* src/file-manager/fm-properties-window.c:
	(create_permissions_page):
	* src/nautilus-application.c: (desktop_changed_callback):
	* src/nautilus-complex-search-bar.c:
	(nautilus_complex_search_bar_get_location):
	* src/nautilus-first-time-druid.c: (user_level_selection_changed),
	(make_hbox_user_level_radio_button), (set_up_user_level_page):
	* src/nautilus-main.c: (main):
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_update_contents):
	* src/nautilus-sidebar.c: (nautilus_sidebar_sidebar_panel_enabled),
	(toggle_sidebar_panel), (nautilus_sidebar_size_allocate):
	* src/nautilus-switchable-search-bar.c:
	(nautilus_switchable_search_bar_new),
	(nautilus_search_uri_to_search_bar_mode):
	Update for preferences api changes.

	* src/nautilus-window-manage-views.c:
	(position_and_show_window_callback),
	(nautilus_window_end_location_change_callback):
	Update for preferences api changes.  Also, no longer need to pass
	in a default location to the preferences getter.

	* src/nautilus-window-menus.c: (user_level_customize_callback),
	(switch_to_user_level), (refresh_bookmarks_menu),
	(user_level_changed_callback), (add_user_level_menu_item),
	(nautilus_window_initialize_menus), (update_user_level_menu_items),
	(convert_user_level_to_path):
	A lot of simplification.  The "Edit Settings..." menu item no
	longer changes it wording based on the user level.  We know allow
	it to edit settings on all user levels, since we have the ability
	to hide preferences at higher user levels.  No longer need to
	update the preferences dialog or its title.
	
	* src/nautilus-window.c: (nautilus_window_constructed),
	(nautilus_window_close), (nautilus_window_go_web_search),
	(nautilus_window_go_home), (nautilus_window_show):
	Update for preferences api changes.

	* libnautilus-extensions/nautilus-global-preferences.h:
	Update all the preferences defines to not include a full gconf
	path.  We dont need to do this anymore to get non user level
	coupled prefernces.

	* libnautilus-extensions/nautilus-global-preferences.c:
	(compare_view_identifiers), (global_preferences_create_dialog),
	(nautilus_global_preferences_get_enabled_sidebar_panel_view_identif
	iers), (global_preferences_install_sidebar_panel_defaults),
	(global_preferences_is_sidebar_panel_enabled),
	(global_preferences_install_speed_tradeoff_descriptions),
	(register_proxy_preferences), (global_preferences_register),
	(global_preferences_install_defaults),
	(nautilus_global_preferences_set_dialog_title):
	Lots of changes to support new preferences design.

	Set the WM_CLASS here once instead of everytime the dialog title
	is changed.  This was causing criticals.

	No longer need to create parallel proxy preferences and map them
	to the gconf ones.  We can use the gconf ones directly now.

	* test/.cvsignore:
	* test/Makefile.am:
	* test/test-nautilus-preferences-change.c:
	(user_level_changed_callback), (fruits_changed_callback),
	(int_picker_changed_callback),
	(user_level_picker_changed_callback), (picker_new),
	(user_level_picker_new), (main):
	* test/test-nautilus-preferences-display.c: (text_caption_update),
	(user_level_caption_update), (user_level_changed_callback),
	(green_changed_callback), (yellow_changed_callback),
	(red_changed_callback), (apple_changed_callback),
	(orange_changed_callback), (pear_changed_callback), (entry_new),
	(user_level_frame_new), (colors_frame_new), (fruits_frame_new),
	(main):
	* test/test.c: (test_pixbuf_draw_rectangle_tiled),
	(test_text_caption_set_text_for_int_preferences),
	(test_text_caption_set_text_for_string_preferences),
	(test_text_caption_set_text_for_default_int_preferences),
	(test_text_caption_set_text_for_default_string_preferences),
	(test_text_caption_get_text_as_int),
	(test_window_set_title_with_pid):
	* test/test.h:
	New tests for preferences changes.

	* test/test-nautilus-preferences.c:
	Retire old prefs test which didnt really work.
	
	* test/test-nautilus-smooth-graphics.c:
	(smooth_graphics_mode_changed_callback), (main):
	Update for preferences api changes.

2001-01-24  Andy Hertzfeld  <andy@eazel.com>

	merged the post-1_0 branch with HEAD 1/23/01 to get this,
	the post-1_0_1 branch
	
	* applets/launcher/nautilus-launcher-applet.c:
	* components/Makefile.am:
	* components/rss-control/.cvsignore:
	* components/rss-control/Makefile.am:
	* components/rss-control/main.c: (rss_control_object_destroyed),
	(rss_control_make_object), (main):
	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_rss_control_initialize),
	(free_rss_data_item), (nautilus_rss_control_clear_items),
	(nautilus_rss_control_destroy), (nautilus_rss_control_get_control),
	(nautilus_rss_control_set_title), (rss_logo_callback),
	(rss_read_done_callback), (load_rss_file),
	(nautilus_rss_control_set_uri), (rss_control_pixbuf_composite),
	(draw_rss_logo_image), (draw_rss_title), (draw_blue_line),
	(draw_rss_items), (nautilus_rss_control_draw),
	(nautilus_rss_control_expose),
	(nautilus_rss_control_set_prelight_index),
	(nautilus_rss_control_motion_event),
	(nautilus_rss_control_leave_event),
	(nautilus_rss_control_button_press_event):
	* components/rss-control/nautilus-rss-control.h:
	* components/rss-control/nautilus-rss-control.oafinfo:
	* configure.in:
	* data/top/Clock:
	* data/top/Makefile.am:
	* data/top/Slashdot:
	* icons/Makefile.am:
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_user_main_directory):
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_destroy),
	(nautilus_icon_canvas_item_get_icon_width),
	(nautilus_icon_canvas_item_get_icon_height),
	(nautilus_icon_canvas_item_set_arg), (do_control_destroy),
	(nautilus_icon_canvas_item_get_arg),
	(nautilus_icon_canvas_item_get_image), (recompute_bounding_box),
	(nautilus_icon_canvas_item_update_bounds),
	(draw_or_measure_label_text), (emblem_layout_next),
	(nautilus_icon_canvas_item_draw), (draw_or_measure_label_text_aa),
	(nautilus_icon_canvas_item_render),
	(nautilus_icon_canvas_item_bounds),
	(nautilus_icon_canvas_item_get_icon_rectangle),
	(get_icon_canvas_rectangle),
	(nautilus_icon_canvas_item_set_smooth_font),
	(nautilus_icon_canvas_item_get_control),
	(nautilus_icon_canvas_item_set_control):
	* libnautilus-extensions/nautilus-icon-canvas-item.h:
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize_class),
	(nautilus_icon_container_update_icon):
	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_dnd_begin_drag):
	* libnautilus-extensions/nautilus-link.c:
	(nautilus_link_local_get_component_info):
	* libnautilus-extensions/nautilus-link.h:
	* libnautilus-extensions/nautilus-metadata.h:
	* src/file-manager/fm-icon-view.c: (get_icon_control_callback),
	(create_icon_container):
	* src/nautilus-sidebar-tabs.c: (nautilus_sidebar_tabs_hit_test),
	(nautilus_sidebar_tabs_select_tab):
	* src/nautilus-sidebar.c: (nautilus_sidebar_release_event):
	
2001-01-23  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-theme-selector.c: (remove_button_callback),
	(exit_remove_mode):
	fixed recently introduced problem where it was still
	treating button labels as nautilus_labels instead of
	gtk_labels.
	
2001-01-23  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-theme-selector.c:
	(nautilus_theme_selector_initialize), (remove_button_callback),
	(exit_remove_mode):
	fixed bug 5972, remove theme button uses aa text, by using
	a gtk_label instead of a nautilus_label.
		
	* libnautilus-extensions/nautilus-theme.c:
	(nautilus_theme_make_selector):
	fixed a crash when an installed theme lacked a preview icon,
	cleaned up code and fixed a memory leak.

2001-01-17  Andy Hertzfeld  <andy@eazel.com>

	changed the throbber component to use the new translated oaf file
	scheme.  The throbber still doesn't show up, due to recent bonobo
	changes, which I'm looking into further.
	
	* components/throbber/.cvsignore:
	cvs should ignore the translated oaf file
	* components/throbber/Makefile.am:
	change use of oaf files
	* components/throbber/Nautilus_Control_throbber.oaf.in:
	added new style oaf file\
	* components/throbber/nautilus-throbber.oafinfo:
	removed the old file
	* src/nautilus-window-toolbars.c:
	(nautilus_window_initialize_toolbars):
	more descriptive message when we get an exception

2001-01-17  Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-self-checks.c:
	(nautilus_report_check_failure), (nautilus_before_check_function):
	Make make check results go to stderror.

2001-01-17  John Harper  <jsh@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Work to fix bugs 1939 and 4614 -- text in list view is hard to
	read when the foreground color specified by the gtk theme
	conflicts with the background colors:

	* libnautilus-extensions/nautilus-gdk-extensions.h,
	libnautilus-extensions/nautilus-gdk-extensions.c
	(nautilus_gdk_color_is_dark,
	nautilus_gdk_choose_foreground_color,
	nautilus_gdk_gc_choose_foreground_color): new functions, used
	for testing whether a foreground/background color pair is
	suitable for drawing text, and if not, choosing a new
	foreground color

	* libnautilus-extensions/nautilus-list.c (NautilusListDetails):
	added gc fields: text_color, selected_text_color, link_text_color
	(unref_gcs, make_gcs_and_colors): handle the new gcs

	(nautilus_list_setup_style_colors): use
	nautilus_gdk_gc_set_foreground_color () to create the gcs that
	will be used for drawing text

	(draw_cell): when drawing text cells, don't use the default
	foreground gc, use one of the specially chosen gcs

2001-01-17  Rebecca Schulman  <rebecka@eazel.com>

	* src/file-manager/nautilus-indexing-info.c:
	(update_file_index_callback), (show_indexing_info_dialog):
	Make changes necessary because of the slight change in the
	medusa_indexing_service api, and change "hide when closed"
	on the index status dialig to TRUE.  We still need to free
	the dialog when we exit nautilus (Added a fixme) but 
	setting this value to false caused us to reference
	 the freed dialog. 

2001-01-17  Andy Hertzfeld  <andy@eazel.com>

	fixed bugs 5674, 5697 and 5699, Nautilus shows a broken image
	icon instead of a mime-type icon for image types that it doesn't
	support.  Fixed by generating a zero-length placeholder thumbnail
	instead of the broken image icon; the icon factory tests for the
	placeholder and uses the proper mime-type icon when it's present.
	
	* libnautilus-extensions/nautilus-icon-factory.c:
	(should_display_image_file_as_itself),
	(nautilus_icon_factory_get_icon_for_file):
	made should_display_image_file_as_itself return FALSE when the
	placeholder is present.
	
	* libnautilus-extensions/nautilus-thumbnails.c:
	(make_invalid_thumbnail_uri),
	(nautilus_thumbnail_has_invalid_thumbnail), (check_for_thumbnails):
	added routine to test if a placeholder is present, and made it
	generate the placeholder when thumbnailing fails.
	
	* libnautilus-extensions/nautilus-thumbnails.h:
	added nautilus_thumbnail_has_invalid_thumbnail
	
2001-01-17  Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-self-checks.h:
	* libnautilus-extensions/nautilus-self-checks.c:
	(nautilus_before_check_function), (nautilus_after_check_function):
	Write the names of the self-check functions as we run them.
	Maybe this will help us figure out what's up with the Tinderbox.

2001-01-17  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* src/nautilus-complex-search-bar.c:
	(nautilus_complex_search_bar_initialize):
	Remove some spacing settings that caused the 
	"More Options", "Fewer Options" and "Find Them"
	buttons in the search bar too have way too much
	space beneath them, fixing bug 4917
	* src/nautilus-window-private.h:
	Up the minimum width of nautilus so that
	the search controls are always still
	readable (from 450 to 480). However,
	this does not guarantee that on all
	configurations you wil be able to see the
	controls, but it should for the default case.

2001-01-17  Ian McKellar  <ian@eazel.com>

	reviewed by: Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-dialog
	s.c: (generate_login_dialog):
	* components/services/summary/nautilus-view/nautilus-summary-view-p
	rivate.h:
	Keep track of the currently displayed login dialog (for each view).
	If a login dialog is open when a dialog open request is recieved,
	close the old one.

2001-01-17  Andy Hertzfeld  <andy@eazel.com>

	* components/throbber/main.c: (main):	
	* components/throbber/nautilus-throbber.c:
	(nautilus_throbber_destroy):
	fixed problem that Pavel pointed out where the throbber
	component is left around after Nautilus exists, by calling
	gnome_vfs_shutdown when we exit, and also unrefing the
	throbber's bonobo control when the widget is destroyed.
	
2001-01-17  Andy Hertzfeld  <andy@eazel.com>

	reviewed by: <darin@eazel.com>

	* src/nautilus-window-manage-views.c: (unref_callback),
	(ref_now_unref_at_idle_time), (location_has_really_changed),
	(load_underway_callback):
	this is actually Darin's change, checked in by Andy, that's a
	better fix for bug 5657, the "destroying components messes up
	idle routines" crash.  Instead of deferring the window state change
	to idle time, it does an extra ref of the view and unrefs it when
	idle rolls around.
	
2001-01-16  Eskil Olsen  <eskil@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-view-identifier.c:
	(get_lang_list):
	LANG might contain an underscore, so add both the la_LC var, 
	but also only the la to the list. This fixes the "View as xxx"
	translation issue.

2001-01-17  Pavel Cisler  <pavel@eazel.com>

	Fix 5188: Duplicate in list view -> Nautilus crashes.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_duplicate_selection):
	It was really only an inaccurate assert.

2001-01-16  Ian McKellar  <ian@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_preflight_check):
	Removed check that package has been installed in preflight check 
	because this will never occur.

	(nautilus_install_service_describe_menu_entry),
	Added this function which is used to generate a text description
	of a menu item.

	(nautilus_install_service_locate_menu_entries),
	Check for files in an /applnk/ directories as well as in /gnome/apps/
	directories. Closed GnomeDesktopEntry leak.

	(nautilus_service_install_done),
	Implement the equivalent of the preflight check that I removed,
	but at a point where we know whether the install has succeed, failed,
	been cancelled or been struck by lightning.

	(nautilus_service_install_view_load_uri):
	Reset some state variables, so that some weird random things 
	don't happen.

2001-01-16  Mike Fleming  <mfleming@eazel.com>

	Dialog re-wording suggested by Vera.

	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.c: (authn_cb_failed):

2001-01-16  Pavel Cisler  <pavel@eazel.com>

	Fix 5511: Dropping a file in same folder asks about replacing it.
	Fix 5606: Left drag into window where file exists deletes file.
	
	* src/file-manager/fm-list-view.c: (fm_list_receive_dropped_icons):
	During a file move, add a check to see if the dragged items are in the
	target directory.
	
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_get_drop_action):
	Tiny tweak.
	
2001-01-16  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-directory-background.c:
	Removed comment detailing differences with the background-capplet
	code since I just propagated the same fixes to the capplet.

2001-01-16  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-properties-window.c:
	(property_button_focused_out), (create_emblems_page):
	fixed bug 5572, black rectangle left behind after clicking
	on an emblem in Properties window, by attaching to the
	focus_out signal and redrawing
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize),
	(nautilus_property_browser_destroy),
	(nautilus_property_browser_theme_changed),
	(nautilus_property_browser_smooth_graphics_changed):
	fixed some of bug 5614, label text in property browser is
	corrupted when smooth text option changed, by monitoring the
	smooth_graphics preference and updating when it changes.  The
	rest of this bug will be fixed when Ramiro fixes the nautilus_label
	geometry problems as part of bug 5607
	
	* components/text/nautilus-text-view.c: (file_read_callback):
	corrected the name of the "file too big to load" dialog
	
2001-01-16  Michael Engber  <engber@eazel.com>

	reviewed by: Gene Z. Ragan

	* libnautilus-extensions/nautilus-directory-background.c:
	(nautilus_gnome_config_string_match_no_case_with_default),
	(nautilus_file_background_read_desktop_settings):
	Use theme defaults for desktop background when ~/.gnome/Background
	is missing.

2001-01-16  Seth Nickell  <seth@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(nautilus_directory_rename_file_metadata),
	(nautilus_directory_remove_file_metadata):
	* libnautilus-extensions/nautilus-file.c:
	(sort_keyword_list_and_remove_duplicates):

	Add casts to strcmp's performed on gpointers so they will
	not generate warnings.
	
2001-01-16  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	More work on bug 2146 (Properties window for desktop Trash icon
	should show Trash properties). Mostly this was clean-up of the
	properties window code to make future changes easier. The only
	substantive change is to remove the "Type" field for the trash.

	* src/file-manager/fm-properties-window.c: 
	Removed enums for basic page and permissions page row numbers.
	The rows are now added (and table sized) as needed.
	(append_row): New helper function, appends one row to a GtkTable
	and returns the index of the new last row.
	(append_title_field): New function, like attach_title_field
	but appends row instead of taking a row parameter.
	(append_separator), (append_directory_contents_fields),
	(append_title_value_pair), (append_special_execution_checkbox),
	(append_special_execution_flags): Renamed from attach_xxx, now 
	append a row instead of taking a row parameter.
	(create_page_with_table_in_vbox): Now returns GtkTable * instead
	of GtkWidget *, for callers' convenience.
	(get_adjusted_permissions_row): Removed this somewhat hacky function.
	(should_show_file_type): New function, returns FALSE for
	special trash location but TRUE for everything else.
	(create_basic_page): Check should_show_file_type; use new
	append_xxx calls instead of using predefined row numbers.
	(create_permissions_page): use new append_xxx calls instead of
	using predefined row numbers.

2001-01-16  Gene Z. Ragan  <gzr@eazel.com>

	Fixed mistake in asserting on a NULL value. Assert if the
	value is NULL, not non-NULL.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(extract_and_ellipsize_file_name_for_dialog):

2001-01-16  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(get_label_font): It's illegal to unref a new widget since you
	don't own a ref to it. Sink it instead.
	(ellipsize_string_for_dialog): New function.
	(format_and_ellipsize_uri_for_dialog): Rename this function and
	change it to use nautilus_format_uri_for_display. Also add FIXME
	about where the ellipsis goes.
	(extract_and_ellipsize_file_name_for_dialog): Added a seprate
	function for the case where we want to extract the file name
	part only. The old code mixed the URI and file name cases in a
	way that would lead to anomalies with unusual names.
	(handle_transfer_vfs_error): Fixed storage leak.
	(is_special_link): Rewrote this function and also made it take
	a URI in text form, not a GnomeVFSURI.
	(handle_transfer_overwrite): Use is_special_link instead of
	duplicate its test. Removed incorrect use of NautilusFile (without
	waiting for results). Added quotes around file name in
	message. Use extract_and_ellipsize_file_name_for_dialog instead of
	our own ad-hoc functions.
	(make_next_duplicate_name): Get rid of bizarre buffer/sprintf that
	was used by someone who didn't know you can use printf formatting
	with g_warning.
	(vfs_uri_is_special_link): Created cover for one remaining caller
	of is_special_link that needs to pass a GnomeVFSURI.
	(nautilus_file_operations_copy_move): Use the new is_special_link
	(nautilus_file_operations_move_to_trash): Use
	extract_and_ellipsize_file_name_for_dialog instead of an old
	strange combination of calls.
	
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_name_for_regular_file): Fix
	obsolete comment and rearrange code now that plain text special
	case is gone.

2001-01-16  Josh Barrow  <josh@eazel.com>

	* src/nautilus-first-time-druid.c: (druid_finished):
	Make the new services icon use big_services_icon.png.  This is a
	much better choice until we get something official.

2001-01-16  Gene Z. Ragan  <gzr@eazel.com>

	Checked in broken code before. Doh!
	
	* libnautilus-extensions/nautilus-link.c:
	* src/nautilus-first-time-druid.c: (druid_finished):

2001-01-16  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Mike Fleming <mfleming@eazel.com>

	Fixed bug 4358, Please put a services icon on the desktop
	
	* libnautilus-extensions/nautilus-link.c:
	(nautilus_link_local_create):
	Perform NULL checking on arguments
	
	* src/nautilus-first-time-druid.c: (druid_finished):
	Create a link to services on the desktop.

2001-01-16  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: <ramiro@eazel.com>

	Bug 4411 -- implement keypress hook for Mozilla so that URL navigation
	initiated by keypress are handled the same as mouse-initiated navigation
	events (eg, correctly have their schemes translated if necessary)

	* components/mozilla/main.c: (mozilla_object_destroyed),
	(mozilla_make_object), (main):
	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/mozilla-events.h:
	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(mozilla_open_uri_callback), (mozilla_dom_key_press_callback),
	(mozilla_dom_mouse_click_callback):

2001-01-16  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5677, Drag files w/names of Specials to desktop -> malloc crash
	Fixed bug 5673, Spaces are escaped in new "replace special desktop icon"
	dialog.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_transfer_overwrite):

2001-01-15  John Sullivan  <sullivan@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Removed stuff I added earlier as part of a failed fix
	for bug 2068, which I ended up fixing a different way.

	Fixed bug 5661 (Hardwired button sizes for custom icons
	in properties window)

	Fixed bug 1682 ("Go There" button taller than others
	in "Open with Other" dialog)

	* libnautilus-extensions/nautilus-scrolled-window.h:
	* libnautilus-extensions/nautilus-scrolled-window.c:
	Removed these files from cvs.

	* libnautilus-extensions/Makefile.am:
	Removed the removed files from the build.
	
	* libnautilus-extensions/nautilus-metadata.h:
	removed NAUTILUS_METADATA_KEY_ICON_VIEW_SCROLL_ORIGIN

	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize): Changed back to inheriting
	from GtkScrolledWindow instead of now non-existent
	NautilusScrolledWindow.

	* libnautilus-extensions/nautilus-gtk-extensions.h:
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_button_set_standard_padding): New function,
	wrapper for nautilus_gtk_button_set_padding that uses
	a standard amount of padding instead of taking a parameter.
	This is preferred so we can change a single number if we
	change our minds about what the standard padding should be.

	* libnautilus-extensions/nautilus-program-chooser.c:
	(nautilus_program_chooser_new): Use 
	nautilus_gtk_button_set_standard_padding. Also added a vbox
	so that "Go There" button doesn't grow taller to match the 
	height of the adjacent text. This fixed bug 1682.
	* src/nautilus-bookmarks-window.c: (create_bookmarks_window):
	Use nautilus_gtk_button_set_standard_padding.
	* src/file-manager/fm-properties-window.c: (create_basic_page):
	Use nautilus_gtk_button_set_standard_padding instead of
	hardwiring button sizes. This fixed bug 5661.

2001-01-16  Carlos Perell Marn <carlos@gnome-db.org>

        * configure.in: Added es to ALL_LINGUAS.

2001-01-16  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-string-list.c:
	(nautilus_string_list_get_length):
	Allow for NULL to be treated as a zero length string list.
	
	* libnautilus-extensions/nautilus-string-picker.h:
	* libnautilus-extensions/nautilus-string-picker.c:
	(nautilus_string_picker_set_selected_string_index),
	(nautilus_string_picker_get_index_for_string):
	Two new functions to manipulate the string picker using indeces.
	
	* libnautilus-extensions/nautilus-text-caption.h:
	* libnautilus-extensions/nautilus-text-caption.c:
	(nautilus_text_caption_get_text), (nautilus_text_caption_set_text):
	Make the signature of get_text() use a const object.
	
	(nautilus_text_caption_set_editable): New function to change
	whether the caption's text is editable.

2001-01-16  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-window-manage-views.c: (change_state_at_idle),
	(load_underway_callback):
	fixed bug 5657, crash during menu update when switching views.  This is
	also behind several other reported bugs.  Fixed it as Darin suggested,
	which is to defer the window state change associated with loading
	a new component until idle time, so it doesn't wreak havoc
	by interrupting other idle routines.
	
	* components/throbber/nautilus-throbber.c:
	(nautilus_throbber_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_throbber_destroy),
	(nautilus_throbber_initialize),
	(nautilus_throbber_button_press_event):
	added a location property and made it issue a notification when the
	throbber is clicked on.  Also, removed the no longer used
	"location_changed" signal and better memory management of the
	property bag.
		
	* src/nautilus-window.c: (throbber_location_changed_callback),
	(nautilus_window_constructed), (nautilus_window_destroy):
	make clicking on the throbber work by adding a listener for
	the throbber location property and changing the location
	accordingly when the event is posted.  Also, fixed a leak
	of the bonobo object.
	
	* src/nautilus-window-private.h:
	added a field to hold the event source listener ID.

2001-01-15  Andy Hertzfeld  <andy@eazel.com>

	* components/throbber/main.c: (main):
	fixed recently introduced bug where the throbber wasn't respecting
	the theme; I had forgotten to initialize global preferences in the
	throbber component.
	
2001-01-15  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 4369, throbber frozen during long refresh, by making the
	throbber a bonobo component so it's driven by its own thread.
	Note that clicking on the throbber is temporarily broken; I'll
	fix that soon.  Also, made the frame delay be specified by the
	theme and set the default to spin somewhat slower than before.
	
	* configure.in:
	* components/Makefile.am:
	* components/throbber/.cvsignore:
	* components/throbber/Makefile.am:
	* components/throbber/nautilus-throbber.oafinfo:
	added throbber component
	
	* components/throbber/main.c: (throbber_object_destroyed),
	(throbber_make_object), (main):
	factory for the throbber component
	
	* components/throbber/nautilus-throbber.c,h:
	(nautilus_throbber_initialize_class), (is_throbbing),
	(get_bonobo_properties), (set_bonobo_properties),
	(nautilus_throbber_destroy), (nautilus_throbber_get_control),
	(get_throbber_dimensions), (nautilus_throbber_initialize),
	(nautilus_throbber_new), (nautilus_throbber_theme_changed),
	(draw_pixbuf), (select_throbber_image), (draw_throbber_image),
	(nautilus_throbber_draw), (nautilus_throbber_expose),
	(nautilus_throbber_map), (bump_throbber_frame),
	(nautilus_throbber_start),
	(nautilus_throbber_remove_update_callback),
	(nautilus_throbber_stop), (nautilus_throbber_unload_images),
	(load_themed_image), (make_throbber_frame_name),
	(nautilus_throbber_load_images),
	(nautilus_throbber_button_press_event),
	(nautilus_throbber_set_small_mode),
	(nautilus_throbber_size_allocate),
	(nautilus_throbber_size_request):
	throbber widget for the bonobo component

	* src/nautilus-window-toolbars.c: (theme_changed_callback),
	(nautilus_window_initialize_toolbars):
	set up throbber component in the toolbar
	
	* src/nautilus-window.c,h: (nautilus_window_constructed),
	(nautilus_window_allow_stop):
	use property interface to start and stop the throbber
	
	* icons/default.xml:
	added delay specification to throbber in default theme
	
	* nautilus-clean.sh:
	clean throbber component as necessary
	
	* src/Makefile.am:
	* src/nautilus-throbber.c,h
	removed old throbber widget
	
	
2001-01-15  Michael Engber  <engber@eazel.com>

	reviewed by: John Sullivan

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(nautilus_timed_wait_start_with_duration),
	(nautilus_timed_wait_start):
	* libnautilus-extensions/nautilus-stock-dialogs.h:
	* libnautilus-extensions/nautilus-trash-directory.c:
	(find_directory_start):
	Increase delay before putting up "searching for trash dialog"

2001-01-15  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Arlo Rose <arlo@eazel.com>

	Fixed bug 1420, pane splitter drag outline edges are indistinct

	* libnautilus-extensions/nautilus-horizontal-splitter.c:
	(splitter_xor_line):
	Make line appears as single pixel on off dash.
	
2001-01-15  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Mike Engber <engber@eazel.com>

	Fixed bug 5651, Mounting write-protected disk gives Mount Error
	
	I examined the source code to mount. There is one case where
	an error message is returned but it is not an error.  I now
	check for that case in the error checking code.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(mount_volume_get_cdrom_name), (eject_cdrom), (close_error_pipe),
	(locate_audio_cd):
	Also remove some old debugging code and make sure audio cd
	mounting is ifdefed out.

2001-01-15  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_transfer_vfs_error):

	Fixed error message for the case where a file was moved to an unwritable
	target where permissions were not known in advance (eg, Eazel vault).

	Previously: "The file or its directory cannot be changed"
	Now: "You do not have permissions to write to this folder"

2001-01-15  Michael Engber  <engber@eazel.com>

	reviewed by: Gene Z. Ragan

	* libnautilus-extensions/nautilus-directory-background.c:
	(set_root_pixmap): Fixed leaking x-server memory.

2001-01-15  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Some work on bug 2146 (Properties window for desktop Trash icon
	should show Trash properties)

	* src/file-manager/fm-properties-window.c:
	(is_merged_trash_directory): New helper function, checks whether
	window is displaying special trash location.
	(should_show_custom_icon_buttons): New helper function, returns
	FALSE for special trash location since custom icons don't work
	with the trash (see bug 5642)
	(should_show_mime_type): New helper function, extracted for
	code clarity (returns FALSE for directories).
	(create_basic_page): Now takes only one parameter, gets file
	and notebook from details struct; uses should_show_mime_type
	and should_show_custom_icon_buttons.
	(create_emblems_page), (create_permissions_page): Now take only
	one parameter, get file and notebook from details struct.
	(should_show_emblems): New helper function, returns FALSE for
	special trash location since emblems don't work with the
	trash (see bug 5643)
	(should_show_permissions): New helper function, returns FALSE for
	special trash location since it's not really a file system object
	for which permissions make sense.
	(create_properties_window): Respect should_show_emblems and
	should_show_permissions.

	Eli ran into a case where the "can't set permissions" error message
	was the vague default case when the disk was locked. I added that
	case to the set of specifically handled cases.

	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file), (fm_report_error_setting_group),
	(fm_report_error_setting_owner),
	(fm_report_error_setting_permissions): Handle
	GNOME_VFS_ERROR_READ_ONLY_FILE_SYSTEM cases.

2001-01-15  Ian McKellar  <ian@eazel.com>

	* components/services/inventory/eazel-inventory-service.c:
	(impl_Trilobite_Eazel_Inventory__get_machine_name):
	The default hostname is now guessed if:
	It now guesses a default if:
	 - gethostname succeds; and
	 - the hostname doesn't start with "localhost."
	 - the hostname doesn't equal "localhost"
	The hostname stored is the name, up to but not including the 
	first "." in the name (if any).

2001-01-15  Darin Adler  <darin@eazel.com>

	Fix bug 5557 (Intermittent crash in
	Nautilus_View_history_changed):
	
	* src/nautilus-view-frame.c: (send_history): Added a check for
	NULL so we don't try to send a NULL history list through the
	history machinery.

	Fix bug 5360 ("menthos's Home" string is hard to translate):

	* src/file-manager/fm-desktop-icon-view.c:
	(update_home_link_and_delete_copies): Added comment to help
	translators understand what to do with "%s's Home".

	Fix bug 5641 ("xfree" does not work with newer versions of RPM 4
	headers):
	
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_packagedata_fill_from_header): Just
	use "free" instead of "xfree".

	Fix bug 5631 (Tear-offs of right-click menus don't work):
	
	* src/nautilus-shell-ui.xml:
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/file-manager/nautilus-icon-view-ui.xml:
	Mark popups and submenus of the popups with tearoff="0" so they
	don't have tear-off menu items.
	
	More work on bug 2147 (NautilusFile for trash needs non-empty
	values for more properties).
	
	* libnautilus-extensions/nautilus-file.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_new_from_relative_uri),
	(nautilus_file_new_from_info), (nautilus_file_monitor_add),
	(nautilus_file_monitor_remove),
	(nautilus_file_get_directory_item_count),
	(nautilus_file_get_deep_counts), (nautilus_file_check_if_ready),
	(nautilus_file_call_when_ready),
	(nautilus_file_cancel_call_when_ready):
	Put more of the machinery in place to make enough of NautilusFile
	virtual so that we can implement the trash case.
	
	* libnautilus-extensions/nautilus-merged-directory.h:
	* libnautilus-extensions/nautilus-merged-directory.c:
	(merged_add_real_directory),
	(nautilus_merged_directory_add_real_directory),
	(merged_remove_real_directory),
	(nautilus_merged_directory_remove_real_directory),
	(remove_all_real_directories),
	(nautilus_merged_directory_initialize_class):
	Make adding and removing directories use signals so we can share
	this list with the NautilusTrashFile.

	* libnautilus-extensions/nautilus-trash-file.c:
	(add_directory_callback), (remove_directory_callback),
	(nautilus_trash_file_initialize), (trash_destroy):
	Use a NautilusTrashDirectory object for the list of directories.
	
	* libnautilus-extensions/nautilus-vfs-file.c:
	(vfs_file_monitor_add), (vfs_file_monitor_remove),
	(vfs_file_call_when_ready), (vfs_file_cancel_call_when_ready),
	(vfs_file_check_if_ready), (vfs_file_get_item_count),
	(vfs_file_get_deep_counts), (nautilus_vfs_file_initialize_class):
	Move the guts of these functions into the "VFS" subclass.

	Other stuff:
	
	* libnautilus-extensions/nautilus-trash-directory.c:
	(find_directory_start), (find_directory_end),
	(find_directory_callback), (add_volume), (remove_trash_volume):
	Fix bug in the recently-added timed-wait, to handle the case where
	the call is cancelled as well as the case where it succeeds or
	fails.
	
	* src/file-manager/fm-directory-view.c:
	(zoomable_set_zoom_level_callback): Formatting tweak.
	
	* src/nautilus-main.c: (main): Fix the FIXME.

2001-01-15  Ian McKellar  <ian@eazel.com>

	* components/services/inventory-view/nautilus-inventory-config-page
	.c: (nautilus_inventory_config_page_initialize):
	Retreive the previously assigned machine name (if one exists).
	Retreive the previously set "warn before upload" setting.

	* components/services/inventory/eazel-inventory-client.c: (main):
	Added default values so that this actually works.

	* components/services/inventory/eazel-inventory-service.c:
	(impl_Trilobite_Eazel_Inventory__set_machine_name),
	(impl_Trilobite_Eazel_Inventory_upload):
	Added some temporary debugging code, and the beginnings of better
	error checking/reporting.
	Removed hardcoded filesystem paths.

	* components/services/inventory/eazel-inventory-utils.h:
	* components/services/inventory/eazel-inventory-utils.c:
	(eazel_gather_inventory), (eazel_inventory_local_path):
	Removed hardcoded filesystem paths.

2001-01-15  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5533, Need good dialog text for failed
	replace of special desktop icons.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_transfer_overwrite):

2001-01-15  J Shane Culpepper  <pepper@eazel.com>

	reviewed by: Michael Engber <engber@eazel.com>

	* src/nautilus-application.c: (nautilus_application_startup):
	* src/nautilus-application.h:
	* src/nautilus-first-time-druid.c: (druid_finished):
	* src/nautilus-main.c: (main):

	Fix for bug #1555.  There is already an error dialog but there
	was an infinite loop problem hiding it.  If the first time druid
	failed to create .nautilus, etc it would just run over and over
	again.

2001-01-15  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5635, RPM view crashed if click "Install"
	after unmounting volume containing RPM
	
	Fixed bug 5636, Unmounting a volume doesn't close
	it's associated windows.
		
	* src/nautilus-application.c: (nautilus_application_initialize),
	(volume_mounted_callback), (volume_unmounted_callback):
	Connect to volume monitor signals.  When a volume is unmounted,
	examine open window list and close any windows that originate
	from the volume being unmounted.
			
	Add code to mount audio cds on desktop. It is all
	ifdefed out right now.
	
	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link),
	(update_disks_menu):

	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_volume_is_removable),
	(nautilus_volume_monitor_get_removable_volumes),
	(nautilus_volume_monitor_get_target_uri),
	(mount_volume_get_cdda_name), (mount_volume_activate_cdda),
	(mount_volume_get_name), (mount_volume_activate),
	(get_current_mount_list), (mount_volumes_check_status),
	(mount_volume_cdda_add), (mount_volume_add_filesystem),
	(open_cdda_device), (locate_audio_cd):
	* libnautilus-extensions/nautilus-volume-monitor.h:

2001-01-14  J Shane Culpepper  <pepper@eazel.com>

	* src/nautilus-view-frame.c: (attach_client):

	Upped the timeout from 10 seconds to 12 seconds to be paranoid on
	really slow machines. I think this is really generous for bug #4757.
	In an attempt to reproduce the crash I started a build of mozilla
	and gcc "emulate" a slow machine since I don't have one.  Adding
	additional comments to bugzilla bug #4757.

2001-01-13  Jim Garrison <garrison@users.sourceforge.net>

	* nautilus.spec.in: package "extras" no longer depends on mpg123

2001-01-13  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5414, Don't create a link for launchers dragged onto desktop
	that require a terminal
	
	* src/file-manager/fm-desktop-icon-view.c: (create_link_callback),
	(icon_view_create_nautilus_links):
	Display a simple dialog telling user that we don't support htis feature yet.

2001-01-13  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-canvas-item.c: (hit_test):
	fixed bug 4731, expanding folders cause oscillation, by hit-testing
	to the bounding box instead of the pixmap when an icon is highlighted
	for dropping.
	
2001-01-12  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Arik Devens  <arik@gnome.org>

	* components/music/nautilus-music-view.c:
	(music_view_set_selected_song_title), (reset_playtime),
	(play_status_display), (slider_moved_callback),
	(add_play_controls):
	Fix bug 5617.  Playtime in music view keeps growing forever.
	
2001-01-12  John Sullivan  <sullivan@eazel.com>

	reviewed by: Rebecca Schulman  <rebecka@eazel.com>

	Fixed bug 5437 (date column is too wide for default nautilus width)

	* src/file-manager/fm-list-view.c: (real_get_column_specification):
	Tweaked the default column widths so they're more balanced in the
	default window width. The tradeoff is that you lose the date column
	more quickly if you resize the window thinner (but of course the
	user can stretch the columns to get it back). The column widths
	in the search results view already look decent, for slightly
	mysterious historical reasons.

2001-01-12  Michael Engber  <engber@eazel.com>

	reviewed by: Gene Z. Ragan

	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(draw_stretch_handles_aa), (draw_label_text_aa),
	(nautilus_icon_canvas_item_render):
	Removed last vestiges of affine/libart code which was
	slowing up icon drawing - bug 5381.

2001-01-12  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(nautilus_service_install_downloading):
	I meant to actually remove the code rather than comment it out.

2001-01-12  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Arik Devens  <arik@gnome.org>

	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_expose_event),
	(nautilus_label_set_background_mode), (nautilus_label_set_text),
	(nautilus_label_get_text):
	* libnautilus-extensions/nautilus-label.h:
	Change the get_text() prototype to use a const object.  Add a
	workaround for bug 5608 while I debug the problem.

	reviewed by: Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(nautilus_service_install_downloading):
	Remove queue_resize() workarounds for improperly displaying
	labels.  I checked in a workaround in NautilusLabel instead.
	
2001-01-12  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 5198, removing an active sidebar panel messes up the 
	remaining ones . I had already fixed this but missed the case
	when multiple windows were open. Fixed by adding a sidebar call to
	close the active panel if it matches a passed-in id, and used that in
	nautilus window to close the panel if necessary before destroying it.
	
	* src/nautilus-sidebar.c:
	(nautilus_sidebar_hide_active_panel_if_matches),
	(toggle_sidebar_panel):
	added routine to close the active panel if it matches a passed-in
	id.
	* src/nautilus-sidebar.h:
	added above mentioned routine
	
	* src/nautilus-window-manage-views.c: (handle_view_failure),
	(nautilus_window_set_sidebar_panels):
	close the active panel if necessary before destroying it.
	
2001-01-12  John Sullivan  <sullivan@eazel.com>

	Fixed the corner of bug 3405 that valiant bug verifier Brett
	discovered while verifying. Yay for bug verification!

	* src/file-manager/fm-icon-view.c: (switch_to_manual_layout):
	I had neglected to remove an extra call to
	nautilus_icon_container_reset_scroll_region here. It's already
	handled one level lower, where the empty directory case is
	taken into account.

2001-01-12  John Sullivan  <sullivan@eazel.com>

	reviewed by: Michael Engber  <engber@eazel.com>

	Fixed bug 2207 (Search needs to gracefully handle too
	many items found)

	* libnautilus-extensions/nautilus-directory-async.c:
	(directory_load_done): Don't treat GNOME_VFS_OK as an
	error case here. This was happening when the file limit
	was reached, and the resulting propogated error was making
	it to the search list view code, which was putting up
	an error dialog saying no error had occurred.
	
	* libnautilus-extensions/nautilus-directory.h:
	Added FIXME with bug number for new bug 5603, which complains
	that the file list limit isn't as hard as it claims.
	
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class),
	(fm_directory_view_file_limit_reached), (real_file_limit_reached),
	(check_for_directory_hard_limit): Broke out the code that handles
	the UI when the directory contains too many files such that
	subclasses can override the behavior.

	(fm_directory_view_get_containing_window): Renamed from
	"get_containing_window" and made public so subclasses don't have
	to reimplent.
	(fm_directory_view_confirm_multiple_windows),
	(fm_directory_view_launch_application), (choose_program),
	(fm_directory_view_confirm_deletion), (confirm_delete_from_trash),
	(report_broken_symbolic_link), (fm_directory_view_activate_file):
	Updated for function name change.
	
	* src/file-manager/fm-search-list-view.c: 
	(load_error_callback): Marked strings for localization; reworded to
	avoid use of "directory".
	(fm_search_list_view_initialize_class),	(real_file_limit_reached):
	Put up dialog that's been worded specifically for search results
	when too many items are found.

2001-01-12  Ramiro Estrugo  <ramiro@eazel.com>

	* test/.cvsignore:
	* test/Makefile.am:
	* test/test-nautilus-label-offset.c: (main):
	* test/test.h:

	Add a test for debugging bug 5608.
	
2001-01-12  Zbigniew Chyla  <cyba@gnome.pl>

	* libnautilus-extensions/nautilus-gtk-macros.h:
	Define empty NAUTILUS_ASSIGN_MUST_OVERRIDE_SIGNAL macro if
	G_DISABLE_ASSERT is defined.

2001-01-11  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_start_transaction):

	Reverse the package list just before installing, so that the
	install view gets info on toplevel packages before their
	dependencies (this keeps the user from being bored, since they'll
	see the package detailed info on toplevel packages while the
	others are installing).
	
	* components/services/install/lib/eazel-install-metadata.c:
	(init_default_install_configuration):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_uninstall_packages):

	Remove last vestigal uses of a literal "/var" path.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (install_message_new), (generate_install_form),
	(current_progress_bar_complete),
	(nautilus_service_install_downloading),
	(previous_install_finished), (nautilus_service_install_installing),
	(nautilus_service_install_done):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:

	Finish Arlo'ification of the install view: Pin the message box at
	a specific height, clean up lots of nastiness caused by the new
	font system, and fix up the text displayed per-package when the
	package is done being installed.  Also, fix a bug that caused a
	cancelled install to report that it was successful.
	
	* components/services/nautilus-dependent-shared/eazel-services-head
	er.c: (eazel_services_header_middle_new):

	Change positioning of the middle header so that it doesn't cause
	mondo amounts of empty space to appear beneath it.  (Not sure why;
	GTK magic.)

2001-01-11  John Harper  <jsh@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fixed bug 5589 (crash when dragging from list view), that I'd
	introduced when making list view icons anti-aliased

	* libnautilus-extensions/nautilus-list.h,
	libnautilus-extensions/nautilus-list.c
	(nautilus_list_get_pixbuf): new function, returns the GdkPixbuf
	stored in a cell, or a null pointer if there isn't one

	* src/file-manager/fm-list-view.c (fm_list_get_drag_pixmap):
	use nautilus_list_get_pixbuf to fetch the GdkPixbuf from the
	row, then gdk_pixbuf_render_pixmap_and_mask to turn it into the
	required format (instead of accessing the NautilusClist widget
	directly, assuming that a Pixmap is stored in the cell)

2001-01-12  Rebecca Schulman  <rebecka@eazel.com>

	* src/nautilus-complex-search-bar.c:
	(nautilus_complex_search_bar_get_location):
	Change "index-only" to "index-if-available"
	in search uris, to take advantage of the new
	option in medusa to perform a slow search
	only if an index is unavailable

2001-01-11  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fixed bug 2068 (Dragging icons adjusts scroll area in a way
	that causes immediate scrolling)

	Fixed bug 3402 (Dragging singleton icon to edge of window in
	manual layout mode puts it back at top-left)

	Fixed bug 3405 (Dropping an icon into empty manual-layout
	window always puts it at top-left)

	Fixed bug 3570 (Relayout glitch after removing an item from
	a view)

	I had earlier started to fix these by trying to save and
	restore the scroll position per directory. But this path
	turned evil, and I gave up on it. There is still some
	partly-implemented work from my start in the evil direction,
	which I will remove in my next checkin.

	The new fix was to always include the visible white space
	when recomputing the icon container's scroll region, unless
	a caller has specifically requested not to.

	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_reset_scroll_region): New function,
	sets a flag in the details struct that's respected in the
	next scroll region update.
	(reset_scroll_region_if_not_empty): New helper function,
	calls _reset_scroll_region unless container is empty.
	(nautilus_icon_container_update_scroll_region_include_visible_area):
	Removed this function; its equivalent is to call reset_scroll_region
	before calling update_scroll_region.
	(nautilus_icon_container_update_scroll_region): Now that the
	_include_visible_area variant is gone, merged the local function
	update_scroll_region with this public one. It decides whether to
	include the visible area or not based on the flag set by
	_reset_scroll_region (also, it never includes the visible area
	if the container is empty).
	(nautilus_icon_container_set_auto_layout): Reset the scroll region
	when changing the auto_layout state.
	(nautilus_icon_container_sort): reset the scroll region before
	sorting.

	* libnautilus-extensions/nautilus-icon-dnd.c: (handle_local_move):
	Call nautilus_icon_container_update_scroll_region instead of
	_update_scroll_region_include_visible_area, which no longer exists.
	
	* libnautilus-extensions/nautilus-icon-private.h: Store flag for
	resetting scroll region in details; eliminate prototype for
	nautilus_icon_container_update_scroll_region_include_visible_area.
	
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class), (done_loading),
	(fm_directory_view_begin_loading), (fm_directory_view_end_loading):
	Added end_loading signal that's sent when a directory is finished
	loading, parallel to existing begin_loading signal.

	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_add_file): Reset the scroll region for the first
	icon added when loading a directory.
	(fm_icon_view_begin_loading), (fm_icon_view_end_loading): 
	Remember that we're loading, so	fm_icon_view_add_file can test correctly.
	(set_sort_criterion_by_id): Bail out early if state hasn't changed.
	(switch_to_manual_layout): Bail out early if state hasn't changed.
	Also, reset scroll region before switching to manual layout.
	(fm_icon_view_initialize_class): Attach fm_icon_view_end_loading to
	virtual function slot.

2001-01-11  Ramiro Estrugo  <ramiro@eazel.com>

	* src/nautilus-property-browser.c: (make_category_link):
	Add a fixme for a problem i just spotted.
	
2001-01-11  Robin * Slomkowski  <rslomkow@eazel.com>

	* test/Makefile.am: added test/test.h to EXTRA_DIST

2001-01-11  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Mike Fleming  <mfleming@eazel.com>

	* libnautilus-extensions/nautilus-art-extensions.c:
	(nautilus_art_irect_align):
	* libnautilus-extensions/nautilus-art-extensions.h:
	New function to align a rectangle within another.
	
	* libnautilus-extensions/nautilus-image.c:
	(image_get_pixbuf_bounds):
	* libnautilus-extensions/nautilus-label.c: (label_get_text_bounds):
	Share more code between these two widgets by using a common
	alignment routine.
	
2001-01-11  Michael Meeks  <michael@helixcode.com>

	* components/adapter/nautilus-adapter-embeddable-embed-strategy.c
	(nautilus_adapter_embeddable_embed_strategy_new): remove redundant
	bonobo_item_container_add.

2001-01-11  Andy Hertzfeld  <andy@eazel>

	* src/nautilus-property-browser.c: (make_category_link):
	make the category links use nautilus-image for anti-aliased
	graphics like we intended, now that Ramiro has fixed the
	background problems.
	
	* icons/eazel/Back.png
	* icons/eazel/Forward.png
	* icons/eazel/Home.png
	* icons/eazel/Refresh.png
	* icons/eazel/Search.png
	* icons/eazel/SearchWeb.png
	* icons/eazel/Services.png
	* icons/eazel/Stop.png
	* icons/eazel/Up.png
	newer toolbar buttons from Susan
	
2001-01-11  Ramiro Estrugo  <ramiro@eazel.com>

	* src/nautilus-about.c: (nautilus_about_draw_info),
	(nautilus_about_update_authors):

	Fix bug 5056 - hard coded fonts in About dialog.
	
2001-01-11  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-preferences.c:
	(preferences_hash_node_check_changes_func):
	Yank FIXME for bug 1273 which no longer exists.
	
2001-01-11  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/launcher/nautilus-launcher-applet.c: (image_leave_event),
	(set_is_launching), (image_button_press_event),
	(image_button_release_event), (main):
	Fix imminent build bustage.  Updates for NautilusImage api changes.
	
2001-01-11  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-corba-callback.c:
	(eazel_install_callback_initialize), (eazel_install_callback_new):

	Turn g_error to g_warning in the EazelInstallCallback initializer,
	so that it doesn't kill off the view when the install service
	isn't around.  Instead, set some fields to NULL and return
	normally.  The *_new call then returns NULL on failure.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_installing),
	(nautilus_service_install_view_update_from_uri):

	Notice if the eazel_install_callback_new call returns NULL, and
	gracefully handle it by ceasing operations and popping up a dialog
	about the failure.  This solves the "don't crash if the install
	service is missing" bug.

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_add_repository):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(my_copy_file), (eazel_install_fetch_file):
	* components/services/install/lib/eazel-install-public.h:
	* nautilus-installer/src/installer.c: (get_candidate_dirs),
	(search_for_local_cds), (eazel_installer_initialize):
	* nautilus-installer/src/main.c:

	Retrofit the --cache-dir option and code to automatically add
	mounted CD packages to the repository, from the PR3 installer
	branch.
	
	* nautilus-installer/src/Makefile:

	Help me, Obi-wan, you're my only hope.

2001-01-11  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fix bugs 4711, 2322, 3778, 4989, 5044, 5166, 5408, 4418, 3779 (parts),
	5051, 2783 and maybe other relating to (ab)use of fonts,
	backgrounds and other sacred attrbiutes of Gtk themes.
	
	* components/hardware/nautilus-hardware-view.c: (setup_form_title),
	(setup_overview_form), (setup_CPU_form), (setup_RAM_form),
	(setup_IDE_form):
	Fix hard coded fonts.
	
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize),
	(music_view_set_selected_song_title), (reset_playtime),
	(play_status_display), (slider_moved_callback),
	(add_play_controls):
	Fix hard coded fonts.
	
	* components/rpmview/nautilus-rpm-verify-window.c:
	(nautilus_rpm_verify_window_initialize):
	Fix hard coded fonts.
	
	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_initialize):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (horizontal_line_new), (install_message_new),
	(generate_install_form),
	(nautilus_service_install_view_initialize),
	(current_progress_bar_complete),
	(nautilus_service_install_installing):
	Fix hard coded fonts.
	
	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (generate_change_password_form), (authn_succeeded),
	(authn_failed), (change_password_button_cb),
	(nautilus_change_password_view_initialize):
	Fix hard coded fonts.  Cleanup header inclusion a bit.
	
	* components/services/nautilus-dependent-shared/Makefile.am:
	Retire some crufty code.
	
	* components/services/nautilus-dependent-shared/eazel-services-exte
	nsions.c: (eazel_services_image_new),
	(eazel_services_image_new_from_uri):, (eazel_services_label_new):
	Update for label, image and hard coded font changes.
	
	* components/services/nautilus-dependent-shared/eazel-services-exte
	nsions.h:
	Make the colors opaque.  Remove a bunch of hard coded font stuff.
	Also remove a bunch of hard coded offsets.  We use alignments and
	paddings instead.

	* components/services/nautilus-dependent-shared/eazel-services-foot
	er.c: (label_enter_event), (label_leave_event),
	(image_enter_event), (footer_item_new),
	(eazel_services_footer_update):
	Update for label, image and hard coded font changes.

	* components/services/nautilus-dependent-shared/eazel-services-head
	er.c: (eazel_services_header_title_new),
	(eazel_services_header_middle_new):
	* components/services/nautilus-dependent-shared/shared-service-util
	ities.c:
	* components/services/nautilus-dependent-shared/shared-service-util
	ities.h:
	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.c:
	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.h:
	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.c:
	* components/services/summary/nautilus-view/nautilus-summary-dialog
	s.c: (generate_login_dialog):
	* components/services/summary/nautilus-view/nautilus-summary-footer
	.c:
	* components/services/summary/nautilus-view/nautilus-summary-menu-i
	tems.c:
	* components/services/summary/nautilus-view/nautilus-summary-view-p
	rivate.h:
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):
	Update for label, image and hard coded font changes.
	
	* libnautilus-extensions/Makefile.am:
	Add new smooth/label/image widget stuff.  Retire buffered widget.
	
	* libnautilus-extensions/nautilus-art-extensions.c:
	(nautilus_art_irect_get_width), (nautilus_art_irect_get_height):
	* libnautilus-extensions/nautilus-art-extensions.h:
	Two new very simple functions to get the width/height of an
	ArtIRect. 
	
	* libnautilus-extensions/nautilus-art-gtk-extensions.c:
	(nautilus_irect_gtk_widget_get_frame):
	* libnautilus-extensions/nautilus-art-gtk-extensions.h:
	New simple function to get the dimensions of a widget as an
	ArtIRect frame.

	* libnautilus-extensions/nautilus-buffered-widget.c:
	* libnautilus-extensions/nautilus-buffered-widget.h:
	Retire.  We dont use this no more.
	
	* libnautilus-extensions/nautilus-customization-data.c:
	(nautilus_customization_data_get_next_element_for_display):
	Update for image and hard coded font changes.

	* libnautilus-extensions/nautilus-debug-drawing.c:
	(debug_pixbuf_viewer_initialize_class),
	(debug_pixbuf_viewer_initialize), (debug_pixbuf_viewer_destroy),
	(debug_pixbuf_viewer_size_request),
	(debug_pixbuf_viewer_expose_event),
	(debug_pixbuf_viewer_set_pixbuf),
	(nautilus_debug_draw_rectangle_and_cross), (destroy_debug_window),
	(nautilus_debug_show_pixbuf):
	* libnautilus-extensions/nautilus-debug-drawing.h:
	Back to using a widget to display the debug pixbuf.  But since we
	cant use NautilusImage (because we want to use this debug stuff to
	debug NautilusImage itselft) we need something else.  Thus a new
	private and simple widget to display the debug pixbuf.
	
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(nautilus_gdk_pixbuf_draw_to_drawable),
	(nautilus_gdk_pixbuf_draw_to_pixbuf_alpha): Fix a very dumb typo.
	(draw_tile_to_pixbuf_callback),
	(nautilus_gdk_pixbuf_draw_to_pixbuf_tiled),
	(nautilus_gdk_pixbuf_draw_to_drawable_tiled),
	(nautilus_gdk_pixbuf_get_from_window_safe):
	Rename opacity macros to FULLY_OPAQUE and FULLY_TRANSPARENT for
	clarity. 

	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.h:
	Rename opacity macros to FULLY_OPAQUE and FULLY_TRANSPARENT for
	clarity. 
	
	* libnautilus-extensions/nautilus-icon-factory.c: (embed_text):
	Update opacity macros.  Tiny update for change in font constructor.

	* libnautilus-extensions/nautilus-image-with-background.h:
	* libnautilus-extensions/nautilus-image-with-background.c:
	(find_background_ancestor), (draw_background_callback),
	(nautilus_image_new_with_background):
	Create a NautilusImage that uses NautilusBackground to
	draw the background.  We put this in a separate file to avoid the
	ugly dependency chain in NautilusBackground so that NautilusImage
	can be used by standalone components in the future.

	* libnautilus-extensions/nautilus-image.h:
	* libnautilus-extensions/nautilus-image.c:
	(nautilus_image_initialize_class), (nautilus_image_initialize),
	(nautilus_image_destroy), (nautilus_image_set_arg),
	(nautilus_image_get_arg), (nautilus_image_size_request),
	(image_paint_pixbuf_callback), (image_composite_pixbuf_callback),
	(nautilus_image_expose_event),
	(nautilus_image_set_is_smooth_signal), (image_get_pixbuf_frame),
	(image_get_pixbuf_bounds), (image_get_tile_frame),
	(nautilus_image_new), (nautilus_image_set_is_smooth),
	(nautilus_image_get_is_smooth), (nautilus_image_set_tile_pixbuf),
	(nautilus_image_get_tile_pixbuf), (nautilus_image_set_pixbuf),
	(nautilus_image_set_pixbuf_from_file_name),
	(nautilus_image_get_pixbuf), (nautilus_image_set_pixbuf_opacity),
	(nautilus_image_get_pixbuf_opacity),
	(nautilus_image_set_tile_opacity),
	(nautilus_image_get_tile_opacity), (nautilus_image_set_tile_width),
	(nautilus_image_get_tile_width), (nautilus_image_set_tile_height),
	(nautilus_image_get_tile_height),
	(nautilus_image_set_tile_mode_vertical),
	(nautilus_image_get_tile_mode_vertical),
	(nautilus_image_set_tile_mode_horizontal),
	(nautilus_image_get_tile_mode_horizontal),
	(nautilus_image_set_tile_pixbuf_from_file_name),
	(nautilus_image_set_background_mode),
	(nautilus_image_get_background_mode),
	(nautilus_image_set_solid_background_color),
	(nautilus_image_get_solid_background_color),
	(nautilus_image_new_solid):
	Fixed many problems.  Properly handles rendering 
	on top of arbitrary Gtk backgrounds.  Does not allocate a buffer
	the size of the widget anymore.  All rendering occurs on exposure
	events.  Honrts the the GtkMisc superclass attrbutes for alignment
	and padding.  The widget is a lot simpler now.
	
	* libnautilus-extensions/nautilus-label-with-background.h:
	* libnautilus-extensions/nautilus-label-with-background.c:
	(find_background_ancestor), (draw_background_callback),
	(nautilus_label_new_with_background):
	Create a NautilusLabel that uses NautilusBackground to
	draw the background.  We put this in a separate file to avoid the
	ugly dependency chain in NautilusBackground so that NautilusLabel
	can be used by standalone components in the future.

	* libnautilus-extensions/nautilus-label.h:
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_initialize_class), (nautilus_label_initialize),
	(nautilus_label_destroy), (nautilus_label_set_arg),
	(nautilus_label_get_arg), (nautilus_label_size_request),
	(label_paint_pixbuf_callback), (label_composite_pixbuf_callback),
	(nautilus_label_expose_event),
	(nautilus_label_set_is_smooth_signal), (label_draw_text_to_pixbuf),
	(label_get_default_line_wrap_width), (label_get_text_frame),
	(label_get_text_bounds), (label_get_tile_frame), (label_peek_text),
	(label_get_empty_line_height),
	(label_get_total_text_and_line_offset_height),
	(label_line_geometries_clear), (label_line_geometries_recompute),
	(nautilus_label_new), (nautilus_label_set_smooth_font),
	(nautilus_label_get_smooth_font),
	(nautilus_label_set_smooth_font_size),
	(nautilus_label_get_smooth_font_size),
	(nautilus_label_set_is_smooth), (nautilus_label_get_is_smooth),
	(nautilus_label_set_tile_pixbuf), (nautilus_label_get_tile_pixbuf),
	(nautilus_label_set_text_opacity),
	(nautilus_label_get_text_opacity),
	(nautilus_label_set_tile_opacity),
	(nautilus_label_get_tile_opacity), (nautilus_label_set_tile_width),
	(nautilus_label_get_tile_width), (nautilus_label_set_tile_height),
	(nautilus_label_get_tile_height),
	(nautilus_label_set_tile_mode_vertical),
	(nautilus_label_get_tile_mode_vertical),
	(nautilus_label_set_tile_mode_horizontal),
	(nautilus_label_get_tile_mode_horizontal),
	(nautilus_label_set_tile_pixbuf_from_file_name),
	(nautilus_label_set_background_mode),
	(nautilus_label_get_background_mode),
	(nautilus_label_set_solid_background_color),
	(nautilus_label_get_solid_background_color),
	(nautilus_label_set_smooth_line_wrap_width),
	(nautilus_label_get_smooth_line_wrap_width),
	(nautilus_label_set_text_color), (nautilus_label_get_text_color),
	(nautilus_label_set_smooth_drop_shadow_offset),
	(nautilus_label_get_smooth_drop_shadow_offset),
	(nautilus_label_set_smooth_drop_shadow_color),
	(nautilus_label_get_smooth_drop_shadow_color),
	(nautilus_label_set_justify), (nautilus_label_get_text_justify),
	(nautilus_label_set_text), (nautilus_label_get_text),
	(nautilus_label_set_wrap), (nautilus_label_get_wrap),
	(nautilus_label_new_solid), (nautilus_label_make_bold),
	(nautilus_label_make_larger), (nautilus_label_make_smaller):
	Fixed many problems.  Properly handles rendering 
	on top of arbitrary Gtk backgrounds.  Does not allocate a buffer
	the size of the widget anymore.  All rendering occurs on exposure
	events.  Honors the the GtkMisc superclass attrbutes for alignment
	and padding.  NautilusLabel is now subclassed from GtkLabel
	itself.  That means that the is_smooth attribute can be toggled to
	make both religions happy.  Support for making the label larger,
	smaller and/or bold based on the current font.  Renamed a lot of
	methods to make it obvious that they apply only to the smooth case.
	Also made the api match GtkLabel more closely.  So many functions
	got renamed.
	
	* libnautilus-extensions/nautilus-radio-button-group.c:
	(nautilus_radio_button_group_set_entry_pixbuf):
	Tiny update for changes in the NautilusImage constructor.

	* libnautilus-extensions/nautilus-scalable-font-private.h:
	New file.  Some private font stuff lives here.  I need this
	changed for a checkin that I will make later regarding improvement
	of performance in the icon container smooth fonts.
	
	* libnautilus-extensions/nautilus-scalable-font.h:
	* libnautilus-extensions/nautilus-scalable-font.c:
	(nautilus_scalable_font_initialize), (font_entry_new),
	(font_entry_free), (nautilus_scalable_font_new),
	(nautilus_scalable_font_make_bold),
	(nautilus_scalable_font_draw_text),
	(nautilus_scalable_font_draw_text_lines_with_dimensions),
	(nautilus_scalable_font_draw_text_lines),
	(nautilus_scalable_font_get_default_font),
	(nautilus_scalable_font_get_rsvg_handle),
	(nautilus_scalable_font_get_rsvg_context),
	(nautilus_text_layout_paint):
	Change the constructor to return the type itself instead of
	GtkObject.  Some minor style tweaks.  Keep track of the font entry
	that was used to allocate the font.  New private functions for
	accessing the rsvg context and font handles.  Remove an unsed
	function. 
	
	* libnautilus-extensions/nautilus-smooth-widget.h:
	* libnautilus-extensions/nautilus-smooth-widget.c:
	(widget_is_smooth), (smooth_widget_set_is_smooth),
	(preferences_get_is_smooth), (smooth_widget_destroy),
	(smooth_graphics_mode_changed_callback),
	(nautilus_smooth_widget_register),
	(smooth_widget_get_tile_origin_point),
	(smooth_widget_get_gtk_background), (smooth_widget_get_background),
	(smooth_widget_paint_tile_opaque),
	(smooth_widget_paint_tile_transparent),
	(smooth_widget_paint_content_opaque),
	(smooth_widget_paint_content_transparent),
	(smooth_widget_paint_tile_and_content_transparent),
	(nautilus_smooth_widget_paint),
	(nautilus_smooth_widget_get_tile_bounds),
	(nautilus_smooth_widget_get_preferred_frame):
	Shared code between NautilusLabel and NautilusImage.  ALl the code
	to support smooth toggable widgets lives here.  Also, keep track
	of smooth widgets and toggle their is_smooth attribute in response
	to nautilus smooth graphics preferences changes.
	
	* libnautilus-extensions/nautilus-tabs.c:
	(nautilus_tabs_initialize), (draw_tab_label):
	Tiny update for change in font constructor.  Add a FIXME for a
	hard coded font issue im going to fix later.  Opacity macro
	update. 
	
	* src/file-manager/fm-properties-window.c:
	(create_image_widget_for_file):
	Using the new image widget makes this code a lot simpler.  No
	longer need to check smooth preference.  It all happens
	automatically. 
	
	* src/file-manager/nautilus-indexing-info.c:
	(update_progress_display), (show_reindex_request_information),
	(show_index_progress_bar), (show_indexing_info_dialog):
	Fix a bunch of hard coded font issues.
	
	* src/nautilus-about.c: (draw_aa_string),
	(nautilus_about_draw_info), (nautilus_about_update_authors):
	Tiny update for change in font constructor.  Opacity macro
	update. 
	
	* src/nautilus-first-time-druid.c: (label_new_left_justified),
	(make_hbox_user_level_radio_button), (set_up_user_level_page),
	(set_up_service_signup_page), (set_up_update_page),
	(set_up_proxy_config_page), (set_up_update_feedback_page),
	(nautilus_first_time_druid_show):
	Fix a bunch of hard coded font issues.  Also fix the rendering
	problems with image usage inside selectable buttons.
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize),
	(set_emblem_image_from_file), (make_property_tile),
	(make_properties_from_directories), (add_reset_property),
	(make_properties_from_xml_node),
	(nautilus_property_browser_update_contents):
	Fix hard coded fonts.  Update for NautilusImage and NautilusLabel
	changes. 
	
	* src/nautilus-search-bar-criterion.c:
	Remove unused #include.
	
	* src/nautilus-shell.c: (display_caveat):
	Fix hard coded fonts.
	
	* src/nautilus-sidebar-tabs.c:
	(nautilus_sidebar_tabs_load_theme_data), (draw_one_tab_plain),
	(draw_one_tab_themed):
	Fix hard coded fonts.  Opacity macros update.
	
	* src/nautilus-sidebar-title.c:
	(nautilus_sidebar_title_initialize),
	(nautilus_sidebar_title_select_text_color), (update_icon),
	(update_font), (update_title), (update_more_info), (add_emblem),
	(sidebar_title_create_title_label),
	(sidebar_title_create_more_info_label),
	(smooth_graphics_mode_changed_callback):
	Update for NautilusImage and NautilusLabel changes.  Made the
	widget a lot simpler.  

	We no longer need to keep track of smooth changes in the sidebar
	title.  They are taked care automatically by the widgets.  

	We no longer need to create 2 labels to honor smoothness.
	NautilusLabel does it all now.
	
	Removed a set_background() function that already
	exists in nautilus-extensions.

	* src/nautilus-theme-selector.c:
	(nautilus_theme_selector_initialize), (set_help_label),
	(exit_remove_mode):
	Fix hard coded fonts.
	
	* test/font-test.sh:
	Retire.  Not needed.

	* test/.cvsignore:
	* test/Makefile.am:
	Add a bunch of tests.

	* test/test.h:
	* test/test.c:
	Put shared test code here.
	
	* test/test-nautilus-font-simple.c:
	* test/test-nautilus-font.c:
	* test/test-nautilus-image-background.c:
	* test/test-nautilus-image-scrolled.c:
	* test/test-nautilus-image-simple.c:
	* test/test-nautilus-image-tile.c:
	* test/test-nautilus-image.c:
	* test/test-nautilus-label-background.c:
	* test/test-nautilus-label-flavorful.c:
	* test/test-nautilus-label-scrolled.c:
	* test/test-nautilus-label-simple.c:
	* test/test-nautilus-label-wrapped.c:
	* test/test-nautilus-label.c:
	* test/test-nautilus-pixbuf-tile.c:
	* test/test-nautilus-smooth-graphics.c:
	* test/test-nautilus-wrapped-label.c:
	Some new tests.  Many updates to old label and image tests.

2001-01-11  Robin * Slomkowski  <rslomkow@eazel.com>

	* components/services/inventory/Makefile.am: added $(IDL) to
	EXTRA_DISTS

2001-01-11  Ian McKellar  <ian@eazel.om>

	* components/services/install/command-line/Makefile.am:
	Don't build the inventory test code here as the inventory code has
	moved to the inventory component.

	* components/services/inventory/eazel-inventory-service-interface.i
	dl:
	This file was missing from mjs' checkin of the inventory upload code.

2001-01-11  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 5338, switching to and from "tighter layout" messes up
	icon labels, by adding a call to invalidate an item's cached label
	size, and making the icon canvas invalidate the items when appropriate.
	This also fixes a similar problem when the anti-aliased mode changes.
	
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_initialize),
	(nautilus_icon_canvas_item_invalidate_label_size),
	(nautilus_icon_canvas_item_set_arg):
	renamed internal invalidation routine to make it externally accessible
	
	* libnautilus-extensions/nautilus-icon-canvas-item.h:
	added nautilus_icon_canvas_item_invalidate_label_size
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(invalidate_label_sizes),
	(nautilus_icon_container_set_anti_aliased_mode),
	(nautilus_icon_container_set_tighter_layout):
	added an invalidate_label_sizes routine and called it when
	tighter layout or the anti-aliased mode changes.
	
2001-01-11  Robin * Slomkowski  <rslomkow@eazel.com>

	reviewed by: <Josh Barrow  <josh@eazel.com>

	* components/services/Makefile.am: fixed typo for
	variable INSTALL_SERVICES

2001-01-11  Michael Engber  <engber@eazel.com>

	reviewed by: John Sullivan

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_delayed_destroy_dialog_callback), (timed_wait_free),
	(timed_wait_cancel_callback), (timed_wait_callback),
	(nautilus_timed_wait_start), (nautilus_timed_wait_stop):
	* libnautilus-extensions/nautilus-trash-directory.c:
	(find_directory_callback), (add_volume):
	We now put up a dialog when searching for trash is slow - bug 3990.
	Also added a minimum time up to nautilus_timed_wait dialogs
	so they don't disappear before the user has a chance to read them.
	Also, nautilus_timed_wait_start will now accept NULL for the
	cancel_callback, resulting in a dialog without a cancel button.

2001-01-11  Michael Engber  <engber@eazel.com>

	* configure.in:
	Missed configure.in in prior check in.

2001-01-11  Josh Barrow  <josh@eazel.com>


	* components/services/Makefile.am:
	Fixed typo that said, "INSTALLS_SERVICE".  Changed it to
	"INSTALL_SERVICE"

2001-01-11  Maciej Stachowiak  <mjs@eazel.com>

	pair programmed with Ian McKellar <ian@eazel.com>

	Fix bugs 5100 ("First time dialog" for inventory preferences) and
	5099 (Need configuration preferences for inventory control). Ian
	and I did a first cut at a component for inventory gathering and
	upload, as well as a start on the client-side UI for this.

	* components/services/Makefile.am, configure.in: Add
	components/services/inventory and
	components/services/inventory-view directories to build.

	* components/services/install/lib/eazel-inventory-utils.c,
	components/services/install/lib/eazel-inventory-utils.h: Move
	these files to components/services/inventory.
	* components/services/install/lib/Makefile.am: Remove from build
	here.

	* components/services/inventory-view/.cvsignore:
	* components/services/inventory-view/Makefile.am:
	* components/services/inventory-view/Nautilus_View_inventory.oaf.in
	:
	* components/services/inventory-view/main.c: (main):
	* components/services/inventory-view/nautilus-inventory-config-page
	.c: (nautilus_inventory_config_page_initialize_class),
	(next_button_callback),
	(nautilus_inventory_config_page_initialize),
	(nautilus_inventory_config_page_new),
	(nautilus_inventory_config_page_destroy):
	* components/services/inventory-view/nautilus-inventory-config-page
	.h:
	* components/services/inventory-view/nautilus-inventory-view.c:
	(nautilus_inventory_view_initialize_class),
	(nautilus_inventory_view_initialize),
	(nautilus_inventory_view_destroy),
	(inventory_load_location_callback):
	* components/services/inventory-view/nautilus-inventory-view.h:

	First cut at the inventory view component. Right now it only
	provides a config page, over time it may also do inventory
	display.

	* components/services/inventory/.cvsignore:
	* components/services/inventory/Makefile.am:
	* components/services/inventory/Trilobite_Service_inventory.oaf.in:
	* components/services/inventory/eazel-inventory-client.c:
	(gboolean_to_yes_or_no), (main):
	* components/services/inventory/eazel-inventory-service.c:
	(get_enabled), (impl_Trilobite_Eazel_Inventory__get_enabled),
	(impl_Trilobite_Eazel_Inventory__set_enabled),
	(impl_Trilobite_Eazel_Inventory__get_machine_name),
	(impl_Trilobite_Eazel_Inventory__set_machine_name),
	(get_warn_before_upload),
	(impl_Trilobite_Eazel_Inventory__get_warn_before_upload),
	(impl_Trilobite_Eazel_Inventory__set_warn_before_upload),
	(impl_Trilobite_Eazel_Inventory_upload),
	(eazel_inventory_service_get_epv),
	(eazel_inventory_service_finalize),
	(eazel_inventory_service_unref),
	(eazel_inventory_service_class_initialize),
	(eazel_inventory_service_create_corba_object),
	(eazel_inventory_service_initialize),
	(eazel_inventory_service_get_type), (eazel_inventory_service_new):
	* components/services/inventory/eazel-inventory-service.h:
	* components/services/inventory/eazel-inventory-utils.c:
	(eazel_inventory_gconf_done), (check_gconf_init),
	(eazel_create_configuration_metafile), (eazel_gather_inventory):
	* components/services/inventory/main.c:
	(eazel_inventory_service_factory_destroy),
	(eazel_inventory_service_factory), (main):

	First cut at back end inventory gathering and upload
	component. Right now it uses libeazelinstall directly, it should
	probably be changed to use the install/package system CORBA
	component for package info.
	
2001-01-10  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.c: (authn_cb_failed):

	Dialog rewording.  Commented out the "Login failed" dialog that I had
	added.  The user keeps getting re-prompted for now.

2001-01-10  Andy Hertzfeld  <andy@eazel.com>

	* components/text/nautilus-text-view.c:
	(nautilus_text_view_initialize), (nautilus_text_view_destroy),
	(done_file_read), (file_read_callback), (file_opened_callback),
	(nautilus_text_view_update):
	fixed bug 3256, loading a huge text file crashes nautilus.  Now,
	if the file size exceeds a predetermined threshold, currently
	set at a megabyte, it truncates it to the threshold amount and
	warns the user with an error dialog.  As part of this, I made
	the text view load files asynchronously and progressively, as
	Maciej suggested; however, we won't see the benefit of this
	until Pavel checks in some gnome-vfs optimizations he's working
	on since currently gnome-vfs doesn't give the main loop much
	time to run if it has ongoing activity.
	
	* components/text/services/Makefile.am:
	* components/text/services/french_to_english.xml:
	at Bud's request, checked in the "frech to english" text service
	
	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	removed debug message that I accidentally checked in.
	
2001-01-10  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 5427, Right-click menu for disk should include
	a way to unmount it.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(unmount_volume_callback), (volume_link_is_selection),
	(real_update_menus), (real_merge_menus):
	Add a context sensitive menu to Nautilus volume links
	which allows the volume it represents to be unmounted.
	Only allow this if the volume is removable. Currently
	only removable volumes are shown on the desktop.
	
	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	Add command path for new unmount volume command
	
2001-01-10  Michael Engber  <engber@eazel.com>

	reviewed by: John Harper

	* configure.in:
	* libnautilus-extensions/nautilus-background-canvas-group.c:
	(nautilus_background_canvas_group_initialize_common),
	(nautilus_background_canvas_group_initialize),
	(nautilus_background_canvas_group_supplant_root_class):
	* libnautilus-extensions/nautilus-background-canvas-group.h:
	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_set_up_canvas):
	Turned on dithering for canvases (aa mode). We no longer expose
	NautilusBackgroundCanvasGroupClass, in nautilus-background-canvas-
	group.h. Now we just provide an API to do the class change.

2001-01-10  Pavel Cisler  <pavel@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(install_message_new):
	Fix a warning and the build.
	
2001-01-09  Mike Fleming  <mfleming@eazel.com>

	Added dialogs as specified in:

	3871 
		Logging in to account that has not been activated
		should produce activation instructions

	3399
		no bad passwd lockout dialog in Nautilus

	Also, changed the way the "max login retries" condition was handled
	(it previously wasn't) 

	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.c: (authn_cb_failed), (login_button_cb):
	* components/services/summary/nautilus-view/nautilus-summary-dialog
	s.c: (nautilus_summary_login_failure_dialog),
	(generate_login_dialog):
	* components/services/summary/nautilus-view/nautilus-summary-dialog
	s.h:
	* components/services/summary/nautilus-view/nautilus-summary-view-p
	rivate.h:

2001-01-09  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/Nautilus_View_install.o
	af.in:

	Give the install view a reasonable name that won't make people's
	heads explode.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (line_expose), (horizontal_line_new),
	(install_message_destroy), (install_message_new),
	(generate_install_form), (show_overall_feedback),
	(nautilus_service_install_view_initialize), (deps_destroy_foreach),
	(nautilus_service_install_view_destroy),
	(nautilus_service_install_view_get_nautilus_view),
	(nautilus_install_parse_uri), (current_progress_bar_complete),
	(nautilus_service_install_downloading),
	(nautilus_service_install_dependency_check),
	(nautilus_service_install_download_failed),
	(nautilus_service_install_installing),
	(nautilus_service_install_failed),
	(nautilus_service_install_view_update_from_uri),
	(nautilus_service_install_view_load_uri),
	(service_install_stop_loading_callback):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:
	* components/services/nautilus-dependent-shared/eazel-services-exte
	nsions.h:

	Many changes to make the install view prettier and less annoying
	-- mostly Arlo'ified now, with some tweaking left to do.

2001-01-09  John Harper  <jsh@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Work to make icons in list view draw anti-aliased in respect to
	the background. Fixes bug 1659

	* cut-n-paste-code/widgets/nautilusclist/nautilusclist.h
	(NautilusCellType): added new type NAUTILUS_CELL_PIXBUF at end
	of this enum

	* libnautilus-extensions/nautilus-list.c (NautilusListDetails):
	added fields for RGB values of all background colors

	(nautilus_gdk_set_shifted_foreground_gc_color): return the
	shifted RGB value

	(nautilus_list_setup_style_colors): save RGB values of all
	background colors into the details structure

	(get_cell_style): added another parameter: `bg_rgb', when a non
	null pointer it gets set to the RGB value of the chosen
	background color

	(draw_cell_pixbuf): added another parameter: `bg_rgb'.
	Composite the pixbuf onto a square of this color (using the
	full 8-bit alpha), then blit the entire square onto the
	drawable

	(draw_cell): added cases to handle NAUTILUS_CELL_PIXBUF type.
	Also pass the extra arg to draw_cell_pixbuf in
	NAUTILUS_CELL_PIXBUF_LIST case

	(nautilus_list_set_cell_contents): handle NAUTILUS_CELL_PIXBUF
	case

	(nautilus_list_set_pixbuf_list): broke out contents into the
	new function set_list_cell, parameterized by the
	NautilusCellType in addition
	(nautilus_list_set_pixbuf): new function, calls set_list_cell

	* src/file-manager/fm-list-view.c (install_row_images): get the
	file's icon as a pixbuf, not a pixmap/mask pair. Then use
	nautilus_list_set_pixbuf to install it in the list cell

2001-01-09  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Mike Engber <engber@eazel.com>

	Fixed bug 5220, Default desktop icon overwritten by dragging
	same-named file to Desktop

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_transfer_overwrite):
	We now check for special link files being overwritten and
	notify the user that such an action is not allowed.
	
2001-01-08  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-customization-data.c:
	(nautilus_customization_data_destroy):
	fixed recently introduced memory leak by calling
	nautilus_g_hash_table_destroy_deep instead of
	g_hash_table_destroy
	
	* src/nautilus-sidebar-title.c: (update_icon):
	fixed problem in the sidebar where web pages were getting the
	generic icon instead of the web icon. Fixed by adding
	"http:" to the protocols the sidebar special-cases.
	
2001-01-08  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	A cut at an ability to build without Medusa, starting with a patch
	that Eric Fischer wrote. This change is not fully tested.

	Fixed bug 5513 ("nautilus --help" displays "Help options" twice).

	* acconfig.h: Add HAVE_MEDUSA.
	* configure.in: Add code to detect HAVE_MEDUSA.
	
	* libnautilus-extensions/nautilus-customization-data.c:
	(nautilus_customization_data_destroy), (load_name_map_hash_table):
	Added a FIXME.
	
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-file.h:
	* libnautilus-extensions/nautilus-trash-file.h:
	* libnautilus-extensions/nautilus-trash-file.c:
	(nautilus_trash_file_initialize), (trash_destroy),
	(nautilus_trash_file_initialize_class):
	* libnautilus-extensions/nautilus-vfs-file.h:
	* libnautilus-extensions/nautilus-vfs-file.c:
	(nautilus_vfs_file_initialize), (vfs_destroy),
	(nautilus_vfs_file_initialize_class):
	Initial cut at breaking out the special trash version of
	NautilusFile. Sadly we need this as well as
	NautilusTrashDirectory.
	
	* src/file-manager/fm-search-list-view.c:
	(load_location_callback): Add _() so things get localized and put
	the code to compose the indexing message inside ifdef HAVE_MEDUSA.
	
	* src/file-manager/nautilus-indexing-info.h:
	* src/file-manager/nautilus-indexing-info.c:
	Put HAVE_MEDUSA ifdefs around most of this file.
	(get_text_for_progress_label): Mark string for translation.
	(update_progress_display): Remove code to "handle" timeout left
	around after dialog is destroyed.
	(update_file_index_callback): Change error messages to be more
	easily localizable. Use nautilus_error_dialog instead of
	gnome_error_dialog.
	(timeout_remove_callback): Get rid of the timeout when the object
	is destroyed.
	(show_index_progress_bar): Connect handler to get rid of the
	timeout when the object is destroyed.
	(show_indexing_info_dialog): Move code that puts up dialog into a
	new function. Also use nautilus_gtk_window_present to put up a
	window. Change the NautilusLabel to use line wrapping.
	(show_search_service_not_available_dialog): Put this dialog in its
	own function so you can use it multiple times.
	(nautilus_indexing_info_request_reindex): Put HAVE_MEDUSA around
	the content of this function.
	(nautilus_indexing_info_get_last_index_time): Put HAVE_MEDUSA
	around the function, with a small simple implementation for the
	other case.
	(nautilus_indexing_info_show_dialog): Put HAVE_MEDUSA around the
	function, with a small invocation of the "not available" dialog.
	
	* src/nautilus-main.c: (main): Remove redundant AUTOHELP.
	
	* src/nautilus-search-bar-criterion.c: (make_emblem_value_menu):
	Fix emblem_name storage lifetime problem.

	* src/file-manager/fm-icon-view.c: Whitespace tweak.

2001-01-08  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Some infrastructure for bug 2068 and related bugs.
	No actual user-visible changes yet.

	* libnautilus-extensions/nautilus-scrolled-window.h:
	* libnautilus-extensions/nautilus-scrolled-window.c:
	New files, implement a subclass of GtkScrolledWindow
	that sends a signal when the scroll position changes.
	This was tragically left out of GtkScrolledWindow.
	(nautilus_scrolled_window_initialize_class),
	(nautilus_scrolled_window_initialize): The usual stuff.
	(get_hadjustment), (get_vadjustment): Little helper
	functions to avoid repeating some casting.
	(adjustment_changed_callback): Callback that emits the
	scroll_changed signal when the scroll changes.
	(connect_adjustment): Helper function that disconnects
	old signals and sets up new ones when the adjustment
	objects change.
	(real_set_arg): virtual function overridden to connect
	up adjustment_changed_callback.
	(nautilus_scrolled_window_set_vadjustment),
	(nautilus_scrolled_window_set_hadjustment): New functions
	that call through to gtk_scrolled_window_xxx and connect
	up adjustment_changed_callback.
	
	* libnautilus-extensions/Makefile.am: Add the new
	files to the build.
	
	* libnautilus-extensions/nautilus-metadata.h:
	#define NAUTILUS_METADATA_KEY_ICON_VIEW_SCROLL_ORIGIN

	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize): Make FMDirectoryView inherit
	from NautilusScrolledWindow instead of GtkScrolledWindow so
	it can hook into the scroll_changed signal.

2001-01-08  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5507, nautilus crashes when you unmount a drive while a file is
	viewed in music viewer
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(close_error_pipe):
	In the case of a failed unmount, I was just assigning a string to memory
	that was later being freed, rather than allocating the memory and
	copying the string. I now allocate memory and copy the string.

2001-01-08  Eric Fischer  <eric@eazel.com>

	* configure.in:

	Add check for gnome-xml version; insist on version 1.x.
	(reviewed by robin@eazel.com)

2001-01-08  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(is_satisfied), (is_filename_probably_a_directory),
	(no_two_packages_with_same_file),
	(package_is_upgrading_and_doesnt_need_file),
	(check_conflicts_with_other):

	Rough drafts for 2 of the functions Eskil left in pseudocode form.

	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package):
	* components/services/trilobite/libtrilobite/trilobite-core-network
	.c: (trilobite_open_uri):

	Fix two typos (no code change).

2001-01-08  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_preflight_check),
	(nautilus_service_install_installing):

	Add gnome-vfs and oaf to the list of packages that trigger a
	Nautilus restart.
	
	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/gtk-hackery.c: (gtk_box_nth):
	* nautilus-installer/src/installer.c: (find_old_tmpdir):
	* nautilus-installer/src/package-tree.c:
	(package_customizer_set_package_list), (table_hbox_nth),
	(focus_next), (handle_focus), (jump_to_package_tree_page):

	Add mondo code to do keyboard focus management (as well as GTK
	will let us) in the package selector.

2001-01-08  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_draw),
	(nautilus_background_is_too_complex_for_gtk_style),
	(nautilus_background_is_dark):
	* src/nautilus-sidebar.c: (background_settings_changed_callback),
	(nautilus_sidebar_update_appearance):
	Draw sidebar gradients dithered to avoid striation - bug 5458.

2001-01-07  Andy Hertzfeld  <andy@eazel.com>

	fixed bugs 5189, 5190 and 5046, pattern and emblem names
	not translated, and upper-casing emblem names is bad for
	translation, by introducing a translatable display name
	specified in the browser xml file.
	
	* libnautilus-extensions/nautilus-customization-data.c:
	(nautilus_customization_data_new),
	(nautilus_customization_data_get_next_element_for_display),
	(nautilus_customization_data_destroy), (format_name_for_display),
	(load_name_map_hash_table):
	made it load a display name mapping from the browser xml file into
	a hash table when a nautilus customization is created; use the mapping
	to return a label with a translated name.
	
	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	rewrote the emblem code in the properties window to use
	nautilus_customization instead of ad hoc code, so it will use
	the translated names.
	
	* src/nautilus-property-browser.c: (get_color_category):
	replaced custom xml code with a standard routine from xml_extensions.
	
	* src/nautilus-search-bar-criterion.c: (make_emblem_value_menu):
	fixed a memory leak and tweaked the code a bit for translated names.
	
	* data/browser.xml:
	added display name mappings for patterns and emblems
	
2001-01-05  Gene Z. Ragan  <gzr@eazel.com>

	* components/music/nautilus-music-view.c: (selection_callback),
	(value_changed_callback), (nautilus_music_view_load_uri):
	Fixed a bug introduced when all widgets are being shown 
	when a URI is loaded.  This includes both the on and off
	states of the play and pause controls.  Update control
	state right after the control are shown to correct this.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	* libnautilus-extensions/nautilus-volume-monitor.h:
	(nautilus_volume_monitor_volume_is_removable):

	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link):
	More work on detecting is a volume is removable or not.
	
2001-01-05  Maciej Stachowiak  <mjs@eazel.com>

	* nautilus.spec.in: Correct names of .oaf files.

2001-01-05  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: removed time service refrences
	left the following renamed files for mjs to fix
	nautilus-service-install-view.oaf
	trilobite-eazel-install-service.oaf
	nautilus-change-password-view.oaf
	nautilus-summary-view.oaf
	nautilus-rpm-view.oaf

2001-01-05  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_shell_quote), (nautilus_g_round):
	* libnautilus-extensions/nautilus-glib-extensions.h:
	Added nautilus_g_round.

	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_start_renaming_selected_item):
	* libnautilus-extensions/nautilus-icon-text-item.c:
	(iti_stop_editing), (layout_text), (iti_edition_accept),
	(iti_entry_text_changed_by_clipboard), (iti_start_editing),
	(iti_destroy), (recompute_bounding_box), (iti_update), (iti_draw),
	(iti_render), (iti_point), (iti_start_selecting),
	(iti_stop_selecting), (iti_selection_motion), (iti_ensure_focus),
	(iti_event), (iti_bounds), (nautilus_icon_text_item_configure),
	(nautilus_icon_text_item_setxy), (nautilus_icon_text_item_select),
	(nautilus_icon_text_item_set_text),
	(nautilus_icon_text_item_get_type):
	* libnautilus-extensions/nautilus-icon-text-item.h:
	Overhauled nautilus-icon-text-item to be a more proper canvas
	item - mainly fixing it's use of coordinates.  Also simplified
	its configure api a bit. This fixed bug 4166. Also put in a
	workaround to fix bug 3973.
	

Fri Jan 05 20:28:43 2001  George Lebl <jirka@5z.com>

	Darin saw this patch and says it should not destroy the world
	if I apply it.

	Fixes: 3988

	* libnautilus-extensions/nautilus-background.c
	  (nautilus_background_draw_flat_box):  Unset the mask on the bg_gc
	  from the style, not to leave the gc in a bad state

	* libnautilus-extentions/nautilus-list.c (nautilus_list_style_set)
	  (unref_gcs) (unref_a_gc) (nautilus_list_initialize_class) 
	  (nautilus_list_destroy) (nautilus_gdk_gc_copy)
	  (nautilus_list_realize) (make_gcs_and_colors)
	  (nautilus_list_unrealize):  Follow the theme by recopying the gcs
	  after a theme was changed.  Also do more sanity setting
	  when copying the gcs, just to be on the very safe side.

	* src/nautilus-theme-selector.c (theme_style_set_callback)
	  (setup_font_sizes_for_row) (setup_font_sizes_for_all_rows)
	  (clear_style_for_all_rows) (nautilus_theme_selector_initialize)
	  (add_theme):  Follow the current theme by binding to the style_set
	  signal and redoing the style stuff so that we don't get garbage
	  and other fun on changing of gtk theme.

2001-01-05  Robin * Slomkowski  <rslomkow@eazel.com>

	* components/notes/Makefile.am:
		added Nautilus_View_notes.oaf.in
	* components/services/login/nautilus-view/Makefile.am:
		added Nautilus_View_change-password.oaf.in
	* po/POTFILES.in: removed references to 
		components/services/time/command-line/main.c
		components/services/time/nautilus-view/main.c
		components/services/time/nautilus-view/trilobite-eazel-time-view.c
		components/services/time/service/main.c
		components/services/time/service/trilobite-eazel-time-service.c
		components/shell/Nautilus_View_shell.oaf.in

2001-01-05  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 5410 ("Esc" cancelling of icon stretch doesn't
	update menus)

	* libnautilus-extensions/nautilus-icon-container.h:
	Defined signals icon_stretch_started and icon_stretch_ended.
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize_class): Set up new signals.
	(emit_stretch_started), (emit_stretch_ended): New convenience
	functions for emitting new signals.
	(icon_toggle_selected), (undo_stretching),
	(nautilus_icon_container_show_stretch_handles): Emit new signals.
	
	* src/file-manager/fm-icon-view.c: 
	(create_icon_container): Call fm_directory_view_update_menus
	when icon_stretch_begin/end signals are emitted.
	(show_stretch_handles_callback),
	(unstretch_icons_callback): Remove calls to update menus, since
	we'll now do it when we get the stretch-state-changed signals.

2001-01-05  Darin Adler  <darin@eazel.com>

	* Makefile.am: Fix for wrongly named ChangeLog-200001018.
	* components/Makefile.am: Removed obsolete comment.

2001-01-05  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize), (nautilus_music_view_load_uri):
	fixed bug 4045, unfinished widgets during load in music view, by
	not showing the widgets until the load is completed.
	
2001-01-05  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c: (ensure_uri_is_image),
	(add_pattern_to_browser):
	fixed bug 5265, you shouldn't be able to replace the reset image
	in the property browser, by testing for that case and putting up
	an error dialog instead.
	
2001-01-05  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: changed .oafinfo to .oaf

2001-01-05  Gene Z. Ragan  <gzr@eazel.com>
	
	My previous change dealing with desktop mounts was a bit too
	overzealous.  Removable volumes now appear on the desktop
	when mounted.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(mount_volume_floppy_add), (mount_volume_iso9660_add),
	(mount_volume_add_filesystem):
	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link):

2001-01-05  Maciej Stachowiak  <mjs@eazel.com>

	xml-i18n-toolized Nautilus (plus a bit of other cleanup) as part
	of resolving bug 2693 (I will consider my work done once I have
	also handled Bonobo).

	* autogen.sh, configure.in: xml-i18n-toolize
	* .cvsignore: ignore xml-i18n scripts
	* Makefile.am: distribute xml-i18n-scripts

	* components/adapter/Nautilus_ComponentAdapterFactory_std.oaf.in:
	Renamed from components/adapter/nautilus-adapter.oafinfo; mark
	translatable strings transalatable.
	* components/adapter/Makefile.am: Deal w/ oaf file rename, do
	merge.
	* components/adapter/.cvsignore: Ignore .oaf file.

	* components/hardware/.cvsignore, components/hardware/Makefile.am,
	components/hardware/Nautilus_View_hardware.oaf.in,
	components/hardware/nautilus-hardware-view.oafinfo: Ditto.
	* components/history/.cvsignore, components/history/Makefile.am,
	components/history/Nautilus_View_history.oaf.in,
	components/history/nautilus-history-view.oafinfo: Ditto.
	
	* components/image-viewer/.cvsignore,
	components/image-viewer/Makefile.am,
	components/image-viewer/Nautilus_View_image.oaf.in,
	components/image-viewer/nautilus-image-view.oafinfo: Ditto.

	* components/loser/content/.cvsignore,
	components/loser/content/Makefile.am,
	components/loser/content/Nautilus_View_content-loser.oaf.in,
	components/loser/content/nautilus-content-loser.oafinfo: Ditto.
	
	* components/loser/sidebar/.cvsignore,
	components/loser/sidebar/Makefile.am,
	components/loser/sidebar/Nautilus_View_sidebar-loser.oaf.in,
	components/loser/sidebar/nautilus-sidebar-loser.oafinfo: Ditto.
	* components/mozilla/.cvsignore, components/mozilla/Makefile.am,
	components/mozilla/Nautilus_View_mozilla.oaf.in,
	components/mozilla/nautilus-mozilla-content-view.oafinfo: Ditto.
	* components/music/.cvsignore, components/music/Makefile.am,
	components/music/Nautilus_View_music.oaf.in,
	components/music/nautilus-music-view.oafinfo: Ditto.
	* components/notes/.cvsignore, components/notes/Makefile.am,
	components/notes/Nautilus_View_notes.oaf.in,
	components/notes/nautilus-notes.oafinfo: Ditto.
	* components/rpmview/.cvsignore, components/rpmview/Makefile.am,
	components/rpmview/Nautilus_View_rpm.oaf.in,
	components/rpmview/nautilus-rpm-view.oafinfo: Ditto.
	* components/sample/.cvsignore, components/sample/Makefile.am,
	components/sample/Nautilus_View_sample.oaf.in,
	components/sample/nautilus-sample-content-view.oafinfo: Ditto.
	* components/services/install/nautilus-view/.cvsignore,
	components/services/install/nautilus-view/Makefile.am,
	components/services/install/nautilus-view/Nautilus_View_install.oaf.in,
	components/services/install/nautilus-view/nautilus-service-install-view.oafinfo:
	Ditto.
	* components/services/install/server/.cvsignore,
	components/services/install/server/Makefile.am,
	components/services/install/server/Trilobite_Service_install.oaf.in,
	components/services/install/server/trilobite-eazel-install-service.oafinfo:
	Ditto.
	* components/services/login/nautilus-view/.cvsignore,
	components/services/login/nautilus-view/Makefile.am,
	components/services/login/nautilus-view/Nautilus_View_change-password.oaf.in,
	components/services/login/nautilus-view/nautilus-change-password-view.oafinfo:
	Ditto.
	* components/services/summary/nautilus-view/.cvsignore,
	components/services/summary/nautilus-view/Makefile.am,
	components/services/summary/nautilus-view/Nautilus_View_services-summary.oaf.in,
	components/services/summary/nautilus-view/nautilus-summary-view.oafinfo: Ditto.
	* components/services/trilobite/sample/.cvsignore,
	components/services/trilobite/sample/nautilus-view/Makefile.am,
	components/services/trilobite/sample/nautilus-view/Nautilus_View_service-sample.oaf.in,
	components/services/trilobite/sample/nautilus-view/nautilus-sample-service-view.oafinfo:
	Ditto.
	* components/services/trilobite/sample/service/.cvsignore,
	components/services/trilobite/sample/service/Makefile.am,
	components/services/trilobite/sample/service/Trilobite_Service_sample.oaf.in,
	components/services/trilobite/sample/service/trilobite-eazel-sample-service.oafinfo:
	Ditto.
	* components/text/.cvsignore, components/text/Makefile.am,
	components/text/Nautilus_View_text.oaf.in,
	components/text/nautilus-text-view.oafinfo: Ditto.
	* src/.cvsignore, src/Makefile.am, src/Nautilus_shell.oaf.in,
	src/nautilus.oafinfo: Ditto.
	* components/tree/.cvsignore, components/tree/Makefile.am,
	components/tree/Nautilus_View_tree.oaf.in,
	components/tree/nautilus-tree-view.oafinfo.shlib: Ditto, and
	removed ability to build tree view as an exe component (no one was
	really using it anyway).
	* components/tree/nautilus-tree-view.oafinfo.exe: Removed.
	* components/help/.cvsignore, components/help/Makefile.am,
	components/help/Nautilus_View_help.oaf.in:
	components/help/help-contents.oafinfo: Ditto, and merged other
	oafinfo files into Nautilus_View_help.oaf.in, commented out.
	* components/help/help-factory.oafinfo,
	components/help/help-index.oafinfo,
	components/help/help-search.oafinfo: Removed.

	* po/POTFILES.in: Added .oaf.in files.
	* po/README.tools, po/ui-extract.pl, po/ui-testcases.glade,
	po/ui-testcases.xml, po/update.pl, po/update.sh: Removed these
	now-obsolete files.

	* components/services/Makefile.am: Removed time service from build.
	* components/html/*, components/websearch/*: cvs deleted these
	obsolete long since non-built components.
	* ChangeLog-200001018: Renamed to ChangeLog-20001018 (whoops)
	
2001-01-04  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-factory.c:
	(should_display_image_file_as_itself):
	fixed bug 5134, shouldn't display thumbnails for images that we
	don't have read permission by explicitly test for read permission
	in should_display_image_file_as_itself.
	
2001-01-04  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-icon-view.c: (should_preview_sound):
	fixed bug 5108, remote sounds get preview image, but don't actually
	preview.  Fixed by making can_preview_sound return FALSE for
	non-local sounds.
	
2001-01-04  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Rebecca Schulman  <rebecka@eazel.com>

	Fix 5451 - GnomeVFS-WARNING received at startup.

	* libnautilus/nautilus-view-standard-main.c:
	(nautilus_view_standard_main_multi):
	New standard module initialization call was not initializing
	or shutting down gnome_vfs.

	* components/adapter/main.c: (main):
	* components/hardware/main.c: (main):
	* components/html/ntl-web-browser.c: (main):
	* components/mozilla/main.c: (main):
	* components/music/main.c: (main):
	* components/notes/nautilus-notes.c: (main):
	* components/rpmview/main.c: (main):
	* components/text/main.c: (main):
	* components/tree/main.c: (main):
	All of the above modules were initializing gnome_vfs but never
	shutting it down. Add proper gnome_vfs_shutdown call.
	This very likely fixes a problem with the notes module, etc.
	sticking around after Nautilus quits.
	

2001-01-04  Darin Adler  <darin@eazel.com>

	Fix a screwup in my recent check-in that made hidden files
	show up on the desktop.

	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize): Don't try to special-case the
	desktop since it's too early to detect that case anyway.
	(fm_directory_view_destroy): Use the
	fm_directory_view_ignore_hidden_file_preferences call to
	disconnect the preferences callbacks. This prevents disconnecting
	them twice in case another caller makes that call.
	(fm_directory_view_ignore_hidden_file_preferences): Turn on the
	flag that says we're ignoring the preferences, disconnect the
	preference callbacks, and set the flags both to FALSE so we won't
	show hidden or backup files.

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_initialize): Call the new
	fm_directory_view_ignore_hidden_file_preference to make it never
	show hidden or backup files on the desktop.

2001-01-04  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c: (set_emblem_image_from_file),
	(make_properties_from_directories):
	fixed bug 5392, custom image causes distortion in emblems dialog,
	by setting the background mode of the nautilus_image used to display
	the emblems to solid, which also improves performance.  Also, use
	a nautilus image instead of a pixmap widget in the emblem image
	selection dialog to better display the image.
	
2001-01-04  Darin Adler  <darin@eazel.com>

	Some FIXME cleanup.
	
	* components/help/converters/gnome-db2html2/sect-elements.c:
	(sect_article_end_element), (sect_inlinegraphic_start_element):
	* components/help/converters/gnome-db2html2/toc-elements.c:
	(toc_sect_end_element):
	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/nautilus-mozilla-content-view.c:
	(make_full_uri_from_relative), (eazel_services_scheme_translate):
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize),
	(music_view_set_selected_song_title), (reset_playtime),
	(play_status_display), (slider_moved_callback),
	(add_play_controls):
	* components/notes/nautilus-notes.c: (notes_load_metainfo):
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_transaction_all_files_check),
	(eazel_install_prune_packages_helper),
	(eazel_install_check_existing_packages):
	* libnautilus-extensions/nautilus-string.c: (nautilus_strcmp),
	(nautilus_strcasecmp), (nautilus_strcmp_case_breaks_ties),
	(nautilus_strcoll), (nautilus_str_is_equal),
	(nautilus_istr_is_equal), (nautilus_strcmp_compare_func),
	(nautilus_strcoll_compare_func),
	(nautilus_strcasecmp_compare_func):
	* src/file-manager/fm-directory-view.c: (open_location):
	* src/nautilus-first-time-druid.c: (make_anti_aliased_label),
	(make_hbox_user_level_radio_button), (set_up_user_level_page):
	Added bug numbers to FIXMEs. At one point Josh made some bugs for
	FIXMEs but never got around to checking in the bug numbers in the
	source code. And I wrote one bug report.
	
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize): Removed a fixed FIXME. Also got
	rid of a hard-coded constant and took excess spaces out of some
	string constants.

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_emit_dependency_check_default): Changed a FIXME
	into a non-FIXME comment, now the the bug is fixed.
	
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(rpm_packagedata_fill_from_file): Removed an incorrect bug number
	from a FIXME.
	
	* components/services/install/nautilus-view/nautilus-service-install-view.h:
	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(nautilus_service_install_installing): Removed the FIXME from a
	comment that's about how a bug was fixed.
	
	* components/services/trilobite/libtrilobite/trilobite-md5-tools.h:
	* components/services/trilobite/libtrilobite/trilobite-md5-tools.c:
	* docs/style-guide.html:
	Removed FIXME and corrected misunderstanding about whether use of
	the guchar typedef is recommended in Nautilus coding style.

	* libnautilus-extensions/nautilus-gdk-font-extensions.h:
	* libnautilus-extensions/nautilus-gdk-font-extensions.c:
	Removed misguided use of const in here. Gdk and Gtk object types
	just aren't suitable for const, and you end up doing type casts
	that defeat the purpose.
	
	* src/nautilus-window-manage-views.c: (load_underway_callback):
	Remove a FIXME for a fixed bug.

2001-01-04  Robey Pointer  <robey@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (delete_files):

	Remove the restriction that files be physically downloaded before
	asking if the user would like to delete files.  That way all the
	packages could come from a previous cache and still be cleaned up
	afterwards.
	
	* components/services/install/lib/eazel-install-logic.c:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(rpm_open_db):
	* components/services/install/lib/eazel-package-system-types.c:
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_get_info):
	
	Fix up some documentation.
	
	* components/services/install/lib/eazel-install-object.c:
	(find_old_tmpdir), (create_temporary_directory),
	(eazel_install_delete_downloads),
	(eazel_install_install_packages):

	Clean up the tmpdir creation code: Make sure any new directory is
	created atomically.  If generating a new directory name,
	incorporate the username for uniqueness, and reuse any generated
	directory from a previous session.

2001-01-04  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 5435 (Irreproducible crash in nautilus_directory_destroy
	after copy/move operations).

	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_notify_files_moved): Removed an extra unref
	and slightly reordered the code to make it clearer why the rest of
	the ref count manipulation is correct.

2001-01-04  Darin Adler  <darin@eazel.com>

	reviewed by: Rebecca Schulman  <rebecka@eazel.com>

	Fixed bug 3811 (shallow file counts and top-left text are fetched
	even for non-displayed hidden/backup items).

	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory-async.c:
	(allow_metafile): Add "ghelp:" and "gnome-help:" to the
	unfortunate list of hard-coded schemes. If we hard-code "help:" we
	have to hard-code its synonyms too.
	(find_monitor): Use g_new0 so fields in the Monitor are not
	uninitialized in this case (the fields in question are ignored,
	but it's still nicer this way).
	(nautilus_directory_monitor_add_internal): Set up the "monitor
	hidden files" and "monitor backup files" in the Monitor structure
	based on new parameters.
	(should_display_file_name): Use
	nautilus_file_name_matches_hidden_pattern and
	nautilus_file_name_matches_backup_pattern.
	(monitor_includes_file): New function that encapsulates the rule
	about which monitor includes which file. Handles the new flags for
	not monitoring hidden or backup files.
	(is_needy): Call monitor_includes_file.
	(select_needy_file): Call monitor_includes_file.
	
	* libnautilus-extensions/nautilus-file-private.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_name_matches_hidden_pattern),
	(nautilus_file_name_matches_backup_pattern): New functions to
	share with the directory code.
	(nautilus_file_is_hidden_file), (nautilus_file_is_backup_file):
	Use the new functions and use the raw relative_uri -- no need to
	unescape to change to a file name since the "." and "~" characters
	are not encoded.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize): Share more code with the
	filtering_changed_callback. Handle the desktop view better by
	never setting the "show hidden" and "show backup" flags (so they
	are both FALSE) and not setting up the callbacks.
	(fm_directory_view_destroy): Since we don't set up the callbacks
	for desktop windows, don't remove them for desktop windows.
	(queue_pending_files): Remove the desktop special case from
	here. It was strange to set the flags up then wait until this
	moment to clear them both. It's better to keep them FALSE.
	(finish_loading): Renamed and changed to pass the appropriate
	values in to the nautilus_directory_file_monitor_add call -- this
	is the actual bug fix.
	(filtering_changed_callback): Remove the desktop special case,
	since this function will now never be called for the desktop.
	
	* libnautilus-extensions/nautilus-directory.h:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_file_monitor_add): Pass through the new
	"monitor hidden files" and "monitor backup files" parameters.
	(nautilus_self_check_directory): Pass TRUE for both.
	* libnautilus-extensions/nautilus-vfs-directory.c:
	(vfs_file_monitor_add): Pass through the new "monitor hidden
	files" and "monitor backup files" parameters.
	
	* libnautilus-extensions/nautilus-merged-directory.c:
	(merged_file_monitor_add), (monitor_add_directory): Store the
	"monitor hidden files" and "monitor backup files" and pass them
	through to the individual directory monitor calls.
	
	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_node_begin_monitoring_no_connect):
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_monitor_add):
	* libnautilus-extensions/nautilus-trash-monitor.c:
	(nautilus_trash_monitor_initialize):
	* src/nautilus-applicable-views.c:
	(got_minimum_file_info_callback):
	Pass in TRUE for "monitor hidden files" and "monitor backup files"
	to get the same behavior as before. (In some cases the booleans
	are just ignored, in other cases we just monitor all files as we
	used to.)
	
	* RENAMING: Remind myself to change the name of the
	NAUTILUS_CALL_VIRTUAL macro to NAUTILUS_CALL_METHOD some day.

2001-01-04  John Harper  <jsh@eazel.com>

	* libnautilus-extensions/nautilus-gdk-extensions.c,
	libnautilus-extensions/nautilus-gdk-extensions.h
	(nautilus_gdk_window_focus): added second argument,
	`timestamp', that's passed straight through to XSetInputFocus

	* libnautilus-extensions/nautilus-drag-window.c: save the
	timestamp in the WM_TAKE_FOCUS client message, and use it when
	eventually focusing the window (instead of implicitly using
	CurrentTime, which can lead to race conditions)

	* libnautilus-extensions/nautilus-icon-text-item.c
	(iti_ensure_focus): pass GDK_CURRENT_TIME as timestamp to
	nautilus_gdk_window_focus

2001-01-04  John Harper  <jsh@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	When renaming an icon, manually focus the associated top-level
	window. This fixes bug 5426 (can't rename icons in sloppy-focus
	mode)

	* libnautilus-extensions/nautilus-icon-text-item.c
	(iti_ensure_focus): new function, ensures that both the canvas
	item and the top-level window are focused
	(iti_event): call iti_ensure_focus in the button-press case
	(nautilus_icon_text_item_start_editing): call iti_ensure_focus
	instead of gnome_canvas_item_grab_focus to focus the item

2001-01-03  John Harper  <jsh@eazel.com>

	Small fix to the `drag doesn't focus' stuff I did earlier to
	work around button-release events not following button-press
	events. (E.g. this happens for some reason when clicking on the
	left hand pane of the property browser window)

	* libnautilus-extensions/nautilus-drag-window.c
	(wm_protocols_filter): don't only start the timeout when we
	don't think we're in the middle of a press-release sequence
	(button_press_emission_callback): if we already think we're in
	the middle of a press-release, commit any pending requests

2001-01-03  Darin Adler  <darin@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fix bug 5235 ("Forget History" eliminates history from Go menu,
	not History sidebar panel).

	* components/history/nautilus-history-view.c:
	(install_icons): Fix leak of pixmap and bitmap.
	(update_history): Replaced dual lock system with a single one.
	(button_press_callback): Only respect button 1, ignore others.
	(button_release_callback): Only respect button 1, ignore others,
	(history_changed_callback): A new single callback for when the
	history list changes to replace the multiple callbacks before.
	(nautilus_history_view_initialize_class),
	(nautilus_history_view_initialize),
	(nautilus_history_view_destroy), (main): Change the history view
	to use nautilus_view_standard_main which requires a subclass. This
	gets rid of a lot of boilerplate code.
	
	* libnautilus/nautilus-view-component.idl: Make every NautilusView
	get an explicit history_changed call instead of requiring them to
	guess when to get history. Removed the old get_history_list call
	and also renamed the HistoryList sequence to History.
	* libnautilus/nautilus-view.h:
	* libnautilus/nautilus-view.c:
	(impl_Nautilus_View_history_changed),
	(nautilus_view_initialize_class): Added the necessary stuff to
	cover the new history_changed call.
	
	* src/nautilus-view-frame.h:
	* src/nautilus-view-frame.c: (nautilus_view_frame_initialize):
	Connect handlers so we can send history_changed calls to the
	NautilusView when either the history or the icons change.
	(nautilus_view_frame_destroy): Change state to EMPTY so the
	history signal won't be sent once the frame is destroyed.
	(view_frame_activated): Send a history_changed to every
	newly-activated view.
	(get_CORBA_object): Helper function to make code that makes CORBA
	calls simpler.
	(check_if_view_is_gone): Use get_CORBA_object.
	(attach_client): Gave a nicer name, removed the code that makes
	the Nautilus_HistoryFrame interface.
	(nautilus_view_frame_load_client): Do the attach_client (formerly
	nautilus_view_frame_set_to_component) before calling
	view_frame_activated. This is needed since view_frame_activated
	now sends a history_changed to the view.
	(nautilus_view_frame_load_location),
	(nautilus_view_frame_stop_loading),
	(nautilus_view_frame_selection_changed),
	(nautilus_view_frame_title_changed): Use get_CORBA_object.
	(get_history_list): Made this private.
	(send_history): Helper function that sends history to the view if
	it's in the appropriate state.
	
	* src/Makefile.am:
	* src/nautilus-history-frame.c:
	* src/nautilus-history-frame.h:
	Removed the old NautilusHistoryFrame, which is no longer needed
	since we put the history call right in the NautilusView class.
	
	* src/nautilus-window-manage-views.c: (get_history_list_callback):
	Updated for Nautilus_HistoryList -> Nautilus_History change.
	
	Fix bug 5391 ("Esc" Canceling of an icon stretch doesn't restore
	icon position.).

	* libnautilus-extensions/nautilus-icon-private.h:
	* libnautilus-extensions/nautilus-icon-container.c:
	(clear_drag_state): Add a single bottleneck function to make sure
	the context menu timeout always gets canceled.
	(continue_stretching): Remove the unused "update_position" parameter.
	(undo_stretching): Consolidate the cancel_stretching function and
	restore the icon's position as well as its size. Also use the new
	bottleneck to clear the drag state.
	(button_release_event): Use the new bottleneck to clear the drag
	state.
	(show_context_menu_callback): Use the new bottleneck to clear the
	drag state.
	(nautilus_icon_container_set_selection),
	(nautilus_icon_container_select_list_unselect_others): Take
	advantage of the defaults in g_hash_table_new and use NULL, NULL
	instead of g_direct_hash, g_direct_equal.
	(nautilus_icon_container_show_stretch_handles): Save the position
	as well as the size.
	(compute_stretch): Add a FIXME with a bug number.
	
	Fix bug 5407 (Make "Hardware Overview" title translatable).

	* components/hardware/nautilus-hardware-view.c:
	(nautilus_hardware_view_destroy): Remove unused uri field.
	(extract_info): Fix storage leak.
	(get_RAM_description): Get rid of code that non-portably relies on
	long long. Mark strings for translation.
	(get_IDE_description): Get rid of code that non-portably relies on
	long long. Mark strings for translation.
	(setup_overview_form): Marked string for translation.
	(setup_CPU_form), (setup_RAM_form), (setup_IDE_form),
	(is_location), (nautilus_hardware_view_load_uri): Disable the
	views other than the overview for now since they are not ready to
	be seen.
	(nautilus_hardware_view_drag_data_received): Get rid of the code
	that makes the hardware view accept a URI list drag.

	Fix bug 5405 (nautilus --check fails when using LC_ALL=sv_SE due
	to missing entry in POTFILES.in).
	
	* po/POTFILES.in: Added nautilus-glib-extensions.c.

	Other changes.
	
	* src/nautilus-signaller.h:
	* src/nautilus-signaller.c: (nautilus_signaller_initialize_class),
	(nautilus_signaller_get_current):
	Change the NautilusSignaller class so that the interface calls the
	object a GtkObject * and the details of the class are hidden.

	* src/nautilus-property-browser.c: (emit_emblems_changed_signal):
	* src/nautilus-search-bar-criterion.c:
	(nautilus_search_bar_criterion_destroy),
	(nautilus_search_bar_criterion_new_from_values):
	* src/nautilus-window-menus.c:
	(nautilus_window_initialize_go_menu):
	* src/nautilus-window.c: (nautilus_send_history_list_changed):
	Now that nautilus_signaller_get_current returns a GtkObject,
	remove some unnecessary casts.
	
	* components/html/glibwww-callbacks.c: (get_sock_info),
	(glibwww_timer_register):
	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_initialize):
	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_initialize):
	* libnautilus-extensions/nautilus-directory-async.c:
	(async_job_start):
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_notify_files_added),
	(nautilus_directory_notify_files_removed),
	(nautilus_directory_notify_files_moved):
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_initialize):
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_set_selection):
	* libnautilus-extensions/nautilus-merged-directory.c:
	(nautilus_merged_directory_initialize):
	* libnautilus-extensions/nautilus-trash-directory.c:
	(nautilus_trash_directory_initialize):
	* src/file-manager/fm-properties-window.c:
	(fm_properties_window_present):
	Take advantage of the defaults in g_hash_table_new and use NULL,
	NULL instead of g_direct_hash, g_direct_equal.
	
2001-01-03  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 5313 (location bar gets partly inactive during
	auto-completion)

	This was a GTK bug involving event timing. The fix was to
	add a workaround in NautilusEntry.

	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_initialize_class): Wire up default handler
	for selection_clear_event.
	(nautilus_entry_selection_clear): Bail out without doing anything
	if we are still the selection owner.

2001-01-03  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Work to make clicking on an inactive window not focus it if the
	click subsequently starts a drag. Fixes bug 1681, and removes
	fixme bugs 5030, 5032, and 5033

	* libnautilus-extensions/nautilus-drag-window.c,
	libnautilus-extensions/nautilus-drag-window.h
	(nautilus_drag_window_register): new module, hooks into a
	GtkWindow to retrofit a focus policy that makes sense with drag
	and drop sources. When dragging from a window, a button press
	event that subsequently causes a drag to be started doesn't
	focus (or raise) the window

	This uses a sawfish-specific WM_PROTOCOL to handle the `don't
	raise' part (_SAWFISH_WM_RAISE_WINDOW), but everything else
	should work with any ICCCM-compliant wm. (The sawfish specific
	part will have zero effect with other wm's. It currently
	requires a cvs version of sawfish)

	* src/nautilus-window.c (nautilus_window_constructed): 
	* src/nautilus-property-browser.c
	(nautilus_property_browser_initialize): 
	Call nautilus_drag_window_register () on the window, since it
	may be used as a drag source

	* libnautilus-extensions/nautilus-gdk-extensions.c,
	libnautilus-extensions/nautilus-gdk-extensions.h
	(nautilus_gdk_window_focus,
	nautilus_gdk_window_set_wm_protocols): new functions

2001-01-04  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_get_default_component_for_file_internal):
	Remove fixme for bug 1264, which is no longer relevant.
	

2001-01-03  Gene Z. Ragan  <gzr@eazel.com>

	Only display removable volumes on desktop.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_volume_is_removable):
	* libnautilus-extensions/nautilus-volume-monitor.h:
	* src/file-manager/fm-desktop-icon-view.c: (volume_in_black_list),
	(create_mount_link):

2001-01-03  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/nautilus-view/main.c: (main):
	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.c: (login_button_cb):
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (nautilus_summary_view_destroy):

	Bug 5343 for real this time.

	My decision to move the ammonite_init call after the
	oaf_make_registration_id call was a poor one and caused another
	potential race.

2001-01-03  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5394, CRITICAL warning received when zooming a 1x1
	pixel image below 100%
	
	* components/image-viewer/nautilus-image-view.c: (rezoom_control),
	(control_size_allocate_callback):
	Don't allow a scale if the new width or height is less then 1.

2001-01-03  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(file_exists), (ensure_profile_dir), (ensure_cache_dir),
	(mozilla_content_view_one_time_happenings):
	Add support for using mozilla caching.
	
Wed Jan 03 04:11:01 2001  George Lebl <jirka@5z.com>

	Reviewed by Maciej, so if I broke something, blame him.

	Fixes #5356

	* libnautilus-extensions/nautilus-directory-background.c
	  (make_root_pixmap): Do what the comment says and actually open
	  a new display before setting the close down mode to RetainPermanent.
	  This made nautilus windows stay persistent after a crash or whatnot.
	  This bug was inherited from control-center.

2001-01-03  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fix bugs 4677, 3031.
	
	* configure.in:
	* components/mozilla/Makefile.am:
	Use the right RPATH flags depending on where mozilla was found.
	This fixed the problem of trying to use mozilla built by
	eazel-hacking instead of from RPMS.
	
	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize_class),
	(mozilla_content_view_one_time_happenings),
	(mozilla_content_view_setup_profile_directory):
	Add support for setting up a Mozilla profile so that cookies and
	cache work.

2001-01-02  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Add "detection" of M19.  Remove the pre M18 detections.
	
2001-01-02  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	* libnautilus-extensions/nautilus-art-extensions.c:
	(nautilus_art_irect_contains_point):
	* libnautilus-extensions/nautilus-art-extensions.h:
	New function to test whether a rectangle contains a point.
	
	* libnautilus-extensions/nautilus-gdk-extensions.c:
	(nautilus_self_check_gdk_extensions):
	* libnautilus-extensions/nautilus-gdk-extensions.h:
	* libnautilus-extensions/nautilus-gdk-font-extensions.c:
	(nautilus_gdk_font_get_bold), (font_scalable_get_by_size),
	(font_bitmap_get_by_size), (nautilus_gdk_font_get_larger),
	(nautilus_gdk_font_get_smaller), (nautilus_gdk_font_equal),
	(nautilus_get_largest_fitting_font),
	(nautilus_string_ellipsize_start), (nautilus_gdk_font_list_fonts),
	(nautilus_gdk_font_get_name), (xlfd_string_get_nth),
	(xlfd_string_replace_nth), (xlfd_string_get_nth_as_int),
	(xlfd_string_is_scalable_non_bitmap),
	(xlfd_string_could_be_scalable_non_bitmap),
	(font_entry_has_bold_weight_test),
	(font_entry_is_scalable_non_bitmap_test),
	(compare_xlfd_by_size_in_points), (compare_xlfd_by_size_in_pixels),
	(nautilus_self_check_ellipsize_start),
	(nautilus_self_check_gdk_font_extensions):
	* libnautilus-extensions/nautilus-gdk-font-extensions.h:
	Move GdkFont extensions to their own file.  Add new functions to
	find a larger/smaller find given an existing font.  Change the
	bold flavor font function to query the system for fonts, this
	makes it work regardless of the user's selected font.  Before it
	worked only for some fonts.

	* libnautilus-extensions/nautilus-file-operations-progress.c:
	* libnautilus-extensions/nautilus-file-operations.c:
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	* src/nautilus-sidebar-title.c:
	Include nautilus-gdk-font-extensions.h.
	
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_label_make_bold), (nautilus_gtk_label_make_larger),
	(nautilus_gtk_label_make_smaller):
	* libnautilus-extensions/nautilus-gtk-extensions.h:
	New functions to make a GtkLabel larger/smaller.
	
	* libnautilus-extensions/nautilus-lib-self-check-functions.h:
	Add entry for nautilus-gdk-font-extensions.
	
	* libnautilus-extensions/nautilus-string-list.c:
	(nautilus_string_list_modify_nth),
	(nautilus_string_list_remove_nth),
	(nautilus_string_list_find_by_function),
	(nautilus_string_list_sort),
	(nautilus_string_list_sort_with_function):
	* libnautilus-extensions/nautilus-string-list.h:
	New functions to modify, remove and find specific string entries.
	New function to sort the string list given a compare function.

2001-01-02  Robey Pointer  <robey@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (main):
	* components/services/install/server/main.c: (main):
	* components/services/time/service/main.c: (main):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_init):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.h
	:
	* components/services/trilobite/sample/command-line/main.c: (main):
	* components/services/trilobite/sample/service/main.c: (main):

	Add a parameter to trilobite_init to allow a service to pass its
	own popt options along (needed for the command-line installer).

2001-01-02  Andy Hertzfeld  <andy@eazel.com>

	* components/hardware/nautilus-hardware-view.c:
	(get_RAM_description), (get_IDE_description):
	Incorporated Bud's patch to the disk size calculation in the
	hardware view, which sidesteps integer overflow problems and makes
	it consistent with industry convention by using 1000 instead of
	1024 for the definition of a kbyte.  Also tweaked the RAM size
	calculation, but it's still not quite right yet.
	
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(draw_pixbuf_aa):
	improved performance by using nautilus_gnome_canvas_draw_pixbuf
	to draw on the aa canvas instead of libart.

=======
2001-01-09  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-throbber.c: (nautilus_throbber_initialize_class),
	(nautilus_throbber_initialize), (bump_throbber_frame),
	(nautilus_throbber_start), (nautilus_throbber_stop):

	made the throbber anti-aliased by using a nautilus_image widget
	to do the drawing.
	
2001-01-04  Andy Hertzfeld  <andy@eazel.com>

	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize_class),
	(nautilus_rss_control_initialize), (nautilus_rss_control_destroy),
	(rss_control_pixbuf_composite), (draw_rss_logo_image),
	(draw_rss_items), (nautilus_rss_control_draw),
	(nautilus_rss_control_expose),
	(nautilus_rss_control_set_prelight_index),
	(nautilus_rss_control_motion_event),
	(nautilus_rss_control_leave_event):
	
	fixed problem with critical errors in gdk_pixbuf by clipping to
	the destination pixbuf.
	
	added prelighting to the rss items by tracking mouse motion events
	to maintain a prelight index, which is used to draw an item
	in a different color.
	
2001-01-03  Andy Hertzfeld  <andy@eazel.com>

	* components/rss-control/main.c: (main):
	tweaked broken stop-on-criticals stuff
	
	* components/rss-control/nautilus-rss-control.c:
	(free_rss_data_item), (nautilus_rss_control_clear_items),
	(nautilus_rss_control_destroy), (rss_logo_callback),
	(rss_read_done_callback), (load_rss_file), (draw_rss_items),
	(nautilus_rss_control_button_press_event):
	made it extract urls for rss items and keep them in a structure,
	and then activate them when clicked.
	
	Also, keep around file handles in instance data so we can cancel
	any pending async I/O when the object is destroyed.
	
	* data/top/Makefile.am:
	add sample controls to novice home directory
	* data/top/Clock:
	sample control
	* data/top/Slashdot:
	sample control
	* src/file-manager/fm-icon-view.c: (get_icon_control_callback):
	added check for non-zero moniker length
	
2001-01-03  Andy Hertzfeld  <andy@eazel.com>

	* components/rss-control/nautilus-rss-control.c:
	(nautilus_rss_control_initialize), (nautilus_rss_control_destroy),
	(rss_read_done_callback), (nautilus_rss_control_draw),
	(nautilus_rss_control_button_press_event):
	captured the channel link from the xml file, added title and logo
	hit-testing, and made it launch a new window pointed at the
	channel link when the user clicks on the logo or title.
	
2001-01-02  Andy Hertzfeld  <andy@eazel.com>

	first check-in to post-1_0 branch.
	
	add ability to embed Bonobo controls in the icon view.
	created a new bonobo control that fetches and displays rss weblogs
	plus miscellaneous optimizations and improvements
	
	* components/Makefile.am:
	* configure.in:
	added new rss-control component
	
	* components/hardware/nautilus-hardware-view.c:
	(get_RAM_description), (get_IDE_description):
	incorporated Bud's disk size calculation, plus tweaked the
	RAM size calculation
	
	* components/rss-control/.cvsignore:
	* components/rss-control/Makefile.am:
	* components/rss-control/nautilus-rss-control.oafinfo:
	files for the new rss-control component
	
	* components/rss-control/main.c: (rss_control_object_destroyed),
	(rss_control_make_object), (main):
	factory for the rss-control Bonobo component
	
	* components/rss-control/nautilus-rss-control.c,h:
	(nautilus_rss_control_initialize_class), (get_bonobo_properties),
	(set_bonobo_properties), (nautilus_rss_control_initialize),
	(nautilus_rss_control_clear_items), (nautilus_rss_control_destroy),
	(nautilus_rss_control_get_control),
	(nautilus_rss_control_set_title), (rss_logo_callback),
	(rss_read_done_callback), (load_rss_file),
	(nautilus_rss_control_set_uri), (draw_rss_logo_image),
	(draw_rss_title), (draw_blue_line), (draw_rss_items),
	(nautilus_rss_control_draw), (nautilus_rss_control_expose),
	(nautilus_rss_control_button_press_event):
	new bonobo control to fetch an rss file and display it.
	
	* icons/Makefile.am:
	* icons/bullet.png:
	added a "bullet" image used in rss control, but it's generally
	useful enough that I added it to the main icons
	
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_user_main_directory):
	deleted some code that's no longer relevant
	
	* libnautilus-extensions/nautilus-icon-canvas-item.c,h:
	(nautilus_icon_canvas_item_destroy),
	(nautilus_icon_canvas_item_get_icon_width),
	(nautilus_icon_canvas_item_get_icon_height),
	(nautilus_icon_canvas_item_set_arg), (do_control_destroy),
	(nautilus_icon_canvas_item_get_arg),
	(nautilus_icon_canvas_item_get_image), (recompute_bounding_box),
	(nautilus_icon_canvas_item_update_bounds),
	(draw_or_measure_label_text), (emblem_layout_next),
	(draw_pixbuf_aa), (nautilus_icon_canvas_item_draw),
	(draw_or_measure_label_text_aa),
	(nautilus_icon_canvas_item_render),
	(nautilus_icon_canvas_item_bounds),
	(nautilus_icon_canvas_item_get_icon_rectangle),
	(get_icon_canvas_rectangle),
	(nautilus_icon_canvas_item_set_smooth_font),
	(nautilus_icon_canvas_item_get_control),
	(nautilus_icon_canvas_item_set_control):
	added support for widgets embedded in icon canvas items
	
	* libnautilus-extensions/nautilus-icon-container.c,h:
	(nautilus_icon_container_initialize_class),
	(nautilus_icon_container_update_icon):
	taught the icon container to ask for the control associated
	with a file, and configured the canvas item with it if there
	is one.
	
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_dnd_begin_drag):
	made it unref the image it fetches from the canvas item, so the
	canvas item can generate custom images for controls.
	
	* libnautilus-extensions/nautilus-link.c,h:
	(nautilus_link_local_get_component_info):
	fetch the activation and configuration strings associated with
	a link file for string embedding.
	
	* libnautilus-extensions/nautilus-metadata.h:
	added metadata types for the activation and configuration data
	
	* src/file-manager/fm-icon-view.c: (get_icon_control_callback),
	(create_icon_container):
	added signal to create a bonobo control associated with a file
	and configure it, if there is one
	
	* src/nautilus-sidebar-tabs.c: (nautilus_sidebar_tabs_hit_test),
	(nautilus_sidebar_tabs_select_tab):
	hit test invisible tabs to support the change below.
	* src/nautilus-sidebar.c: (nautilus_sidebar_release_event):
	implemented Bud's idea of toggling the visibility of the active
	view by clicking on the tab again.
	
2001-01-02  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

        Fixed bug 4344 (assertion if you view a directory without a
	metafile).
	
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_initialize), (nautilus_directory_destroy):
	Create and destroy the metafile hash table when the directory
	is created and destroyed instead of waiting until the metafile
	is read.

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(get_file_node): Get rid of code to handle NULL for hash table.
	(nautilus_directory_metafile_destroy): Just destroy the contents
	of the hash table (hash table itself is destroyed elsewhere now).
	(nautilus_directory_rename_file_metadata),
	(nautilus_directory_remove_file_metadata): Get rid of code to
	handle NULL for the hash table.
	(nautilus_directory_set_metafile_contents): Don't create the
	hash table any more, just populate it.

2001-01-02  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* src/nautilus-window-menus.c: (help_menu_about_nautilus_callback):
	Added the year 2001 to the user-visible copyright notice and made it
	use the standard format with the word Copyright.

2001-01-02  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 5375 (reword the 4000-file limit so it doesn't
	mention the Nautilus Preview Release)

	* libnautilus-extensions/nautilus-directory.c:
	* libnautilus-extensions/nautilus-directory.h:
	Move the #define for the limit to a public place.
	
	* src/file-manager/fm-directory-view.c:
	(check_for_directory_hard_limit):
	Reword the dialog so it doesn't promise to go away
	soon. Also, use #define for the limit in case it
	changes, which is likely.

2001-01-02  Ali Abdin  <aliabdin@aucegypt.edu>

        A minor attempt at deallocating things correctly before we exit (so
        memory profilers can be used properly).

        * components/help/converters/gnome-db2html2/gdb3html.c:
        (parse_file): Free stuff that has been allocated by libxml before
        exiting this function. Now memprof stops showing one big large red
        bar.

        Call toc_free_data when done with the TOC.

        * components/help/converters/gnome-db2html2/toc-elements.c:
        (toc_copyright_characters): Add a comment about a memory leak I
        discovered.
        (toc_free_data): New function to free data allocated by toc_init_data

2001-01-02  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 5331 (Control-W closes the desktop)

	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	Added insensitive "Close" command that overrides the
	default one.
	
	* src/nautilus-window-menus.c:
	(nautilus_window_update_show_hide_menu_items),
	(refresh_bookmarks_menu),
	(nautilus_window_remove_bookmarks_menu_items),
	(nautilus_window_remove_go_menu_items),
	(nautilus_window_update_find_menu_item),
	(append_dynamic_bookmarks), (refresh_go_menu): Removed
	initial NAUTILUS_ from some #defines that are private to
	this file.

2001-01-01  Ali Abdin  <aliabdin@aucegypt.edu>

        More patches from John Fleck. A fixup for the QANDASET title showing
        up in the TOC.

        Also a fixup for bug #4409 (due to the switching of 'states' in the
        parser we sometimes would print out some extra HTML closing tags
        that shouldn't be there)

        Happy New Year.

        * components/help/converters/gnome-db2html2/gdb3html.h:
        * components/help/converters/gnome-db2html2/sect-elements.c:
        * components/help/converters/gnome-db2html2/sect-preparse.c:
        * components/help/converters/gnome-db2html2/toc-elements.c:
        Add QANDASET and QANDAENTRY.

        * components/help/converters/gnome-db2html2/sect-elements.c:
        (sect_title_start_element),
        (sect_title_end_element):
        Use a temporary boolean variable to reflect wether the we printed out
        the starting tags in sect_title_start_element. If we did, then we
        print out the closing in sect_title_end_element. Otherwise we don't.

        * components/help/converters/gnome-db2html2/toc-elements.c:
        (toc_title_start_element),
        (toc_title_end_element),
        (toc_title_characters):
        Ignore the QANDASET title's since they should not be in the TOC.

2000-12-29  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Fixed bug 5374 (No-longer-mounted removable media linger as
	generic icons upon restart).

	* src/file-manager/fm-desktop-icon-view.c:
	(free_volume_black_list): Save code by using
	nautilus_g_list_free_deep.
	(create_mount_link): Save some g_strdup calls by using const char
	* for the icon_name.
	(fm_desktop_icon_view_initialize): Simplify the code that creates
	the black list by creating a local variable.
	(unlink_and_notify): Helper function that deletes a file and
	notifies the NautilusDirectory/File framework.
	(volume_unmounted_callback): Call unlink_and_notify to do the work.
	(create_link_callback): Pass NULL for default values when setting
	metadata, since we always want to set the metadata.
	(icon_view_create_nautilus_links): Avoid a storage leak by using
	const char * for the icon name.
	(update_link_and_delete_copies): New function shared for both the
	home and trash link cases. Simpler because it just lets the
	nautilus_link_xxx functions handle file vs. directory and . and
	.. and doesn't bother doing a stat itself. Also fixes leaks that
	were in the old versions as well as the questionable practice of
	using chdir instead of full paths. Also changes the logic to
	delete any links with the right type but wrong name, rather than
	trying to rename the first icon found of the right type.
	(update_home_link_and_delete_copies): Use the shared
	function. Also don't bother making unused home_link_path.
	(update_trash_link_and_delete_copies): Use the new shared
	function.
	(delete_all_mount_links): Turns out we can use the shared function
	for this case too just by passing in a name that will never match
	any existing link's name ("").

2000-12-29  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.h:
	Changed gconf key for the show desktop option in order to
	avoid using the old default value (OFF) in existing gconf
	databases (bug 5148)

2000-12-29  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-list-view.c:
	fixed bug 3900, emblems too big in list view, by lowering the
	minimum emblem size one notch
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_update_icon):
	fixed problem where images that are small in one dimension but large
	in the other were being scaled too large by the minimum size scaling.
	Fixed by pinning to both the minimum and maximum sizes.
	
	also, pinned icon view emblem sizes to MAXIMUM_EMBLEM_SIZE independent
	of scale factor, so they don't become enormous when the icons are
	large.
	
2000-12-29  Darin Adler  <darin@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Fixed bug 5067 (Moving a file doesn't update the directory in the
	link hash table).
	
	Fixed bug 5366 (error when passing two directories on the command
	line).

	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_remove_file): Change code that was doing "==
	FALSE" which is not such good style.
	(nautilus_directory_notify_files_moved): Change to properly update
	file names in all cases and to update the directory with a new
	nautilus_file_set_directory function.
	
	* libnautilus-extensions/nautilus-file-private.h: Moved the
	Knowledge enum up here. I was going to make a change that required
	it, and now I don't feel like moving it back.
	
	* libnautilus-extensions/nautilus-file.h: Add
	nautilus_file_set_directory (and reformat).

	* libnautilus-extensions/nautilus-file.c: (is_self_owned),
	(destroy): Moved is_self_owned so the destroy function can use it.
	(update_info_internal): Call the update_links functions before
	(nautilus_file_set_directory): New function that changes the
	parent directory and updates everything appropriately.
	(nautilus_file_mark_gone): Added a check that the file is not
	already marked gone.

	* src/nautilus-main.c: (main): Sort the command-line options, add
	some single-character versions, add code to initialize the
	"geometry" variable for the case where the option is not passed,
	removed some unused code that sets start_desktop twice.

2000-12-28  Pavel Cisler  <pavel@eazel.com>

	Fixed bug 4952 (Move or copy or large number of items fails).
	Final part of fix for bug 956 (UI takes time to become operational
	after drag&drop)
	
	* libnautilus-extensions/nautilus-file-changes-queue.c:
	(nautilus_file_changes_consume_changes): Fixed a bug in
	the logic that chunked up file change notifications into groups
	that could be all handled at once - before the fix each change
	was processed individually. Grouped move, metadata move, position
	setting and copy, metadata copy, position setting respectively
	into groups that would get all processed in a single chunk.
	Tweaked the maximum size of a changes chunk.
	
	* libnautilus-extensions/nautilus-file-changes-queue.c:
	(nautilus_file_changes_queue_schedule_metadata_copy),
	(nautilus_file_changes_queue_schedule_metadata_move),
	(nautilus_file_changes_queue_schedule_metadata_remove),
	(nautilus_file_changes_queue_schedule_position_setting):
	Some renamings.

	* libnautilus-extensions/nautilus-directory-async.c:
	Small tweak to make turning on debugging diagnostics easier.

2000-12-28  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/nautilus-view/main.c: (main):
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (nautilus_summary_view_initialize):

	Fix for bug 5343, work around for bug 5365.  By avoiding the redundant
	activation of eazel-proxy, race condition described in 5365 is avoided.

2000-12-28  Darin Adler  <darin@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	Fixed bug 2808 (copy all metadata, not just certain items). There
	are still a few loose ends but it's basically there.

	Fixed bug 5296 (Hardware overview should be localized).
	Fixed bug 5299 (Spacing problems with sizes in bytes).

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(get_file_node): Used a local variable for the hash table to make
	the code more readable because the full expression is too long.
	Removed the half-baked attempt at using xmlNode objects to
	represent "changes" data, which no longer seems a likely
	direction.
	(nautilus_directory_metafile_destroy): Local variable for hash
	table.
	(nautilus_directory_get_file_metadata): Return NULL, not FALSE,
	since the function returns char *, not gboolean.
	(nautilus_directory_rename_file_metadata): Local variable for hash
	table. Also added a FIXME for a case that won't work.
	(apply_file_changes): Broke out so it can be used elsewhere.
	(apply_one_file_changes): This is now the version that has the
	hash table iterator function interface.
	(nautilus_directory_get_integer_file_metadata): Use sscanf instead
	of atoi so we can do error checking.
	(nautilus_directory_copy_file_metadata): Removed the old code that
	copied fixed keys and wrote new code that copies all the metadata.
	(nautilus_directory_remove_file_metadata): Local variable for hash
	table.

	* icons/arlo/arlo.xml: Added an explicit H offset of 0 for the
	zoom control. It was inheriting the default theme's offset of
	-2. This seems to indicate a design problem with the "fall back on
	default" approach for themes, but for now it's nice to have the
	zoom control looking right again.

	* src/nautilus-window-menus.c:
	(help_menu_about_nautilus_callback): Use the real copyright
	character, not "(C)".

	* src/file-manager/fm-desktop-icon-view.c
	(find_and_update_home_link), (place_home_directory): Mark the
	"darin's Home" string for localization. Needs improvement beyond
	this, because just tacking "'s Home" onto the login name is
	probably no good.

	* components/hardware/nautilus-hardware-view.c: (read_proc_info):
	Tweak code style a bit. Use g_string_free (FALSE) instead of
	g_strdup and g_string_free (TRUE).
	(get_CPU_description): Make this a little more localizable by
	adding a strdup format string instead of appending things. Added
	FIXMEs about additional problems.
	(get_RAM_description): Add a little reality checking on the value
	read from the file and make a little more localizable.
	(get_IDE_description): Change to use the gnome-vfs file size
	formatting functions in the right way. The old code had been
	changed to not use them at all, probably because the first cut at
	this code was using it wrong and ran into a 32-bit limit. Use
	g_string_free (FALSE) instead of g_strdup and g_string_free
	(TRUE).

	* po/POTFILES.in: Marked nautilus-hardware-view.c as needing
	localization.
	
	* components/help/converters/gnome-db2html2/sect-elements.c:
	(sect_informaltable_start_element): Fixed a runaway string
	literal.

	* libnautilus-extensions/nautilus-directory-async.c: Moved the
	constants to the top of the file and put the compile-time switches
	at the top of the constants section.
	
	* NEWS: Removed out of date news.
	* README: Fixed a typo.
	* TODO: Removed out of date tasks.

2000-12-27  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background-canvas-group.c:
	(nautilus_background_canvas_group_draw),
	(nautilus_background_canvas_group_render):
	Bug number for FIXMEs.

2000-12-26  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-directory-background.c:
	(desktop_background_realized), (nautilus_background_set_desktop),
	(nautilus_background_is_desktop),
	(nautilus_background_get_desktop_background_window),
	(image_loading_done_callback),
	(nautilus_file_update_desktop_pixmaps),
	(background_changed_callback), (saved_settings_changed_callback),
	(background_reset_callback),
	(nautilus_connect_desktop_background_to_file_metadata):
	* libnautilus-extensions/nautilus-directory-background.h:
	* src/file-manager/fm-icon-view.c: (fm_icon_view_begin_loading):
	Set the background pixmap of the desktop xwindow so that the
	window manager paints background behind nautilus windows instead
	of leaving trails.

2000-12-26  Gene Z. Ragan  <gzr@eazel.com>

	* src/file-manager/fm-desktop-icon-view.c: (volume_in_black_list),
	(fm_desktop_icon_view_initialize):
	Compare mount point, not device path.

2000-12-25  Ali Abdin  <aliabdin@aucegypt.edu>

        Handle the <address> tag properly (including <street>, <city>,
        <country>, <postcode>, and <state>) - Fixes bug #2176

        Support the <literallayout> tag - Fixes bug #5341

        These patches contributed by John Fleck <jfleck@inkstain.net>

        Happy Eid and Merry Christmas!

        * components/help/converters/gnome-db2html2/gdb3html.h:
        * components/help/converters/gnome-db2html2/sect-elements.[ch]:
        * components/help/converters/gnome-db2html2/sect-preparse.c:
        * components/help/converters/gnome-db2html2/toc-elements.c:
        (sect_literallayout_start_element),
        (sect_literallayout_end_element):
        New functions to for LITERALLAYOUT tag support.
        (sect_country_start_element),
        (sect_city_start_element),
        (sect_street_start_element),
        (sect_address_end_element),
        (sect_address_start_element),
        (sect_address_characters):
        New functions to handle the ADDRESS/STREET/CITY/COUNTRY tags properly

        * components/help/converters/gnome-db2html2/ASSUMPTIONS:
        Removed an erroneous entry

        * components/help/converters/gnome-db2html2/TODO:
        Updated

        * components/help/converters/gnome-db2html2/AUTHORS:
        Added John Fleck (jfleck@inkstain.net)

2000-12-25  Gene Z. Ragan  <gzr@eazel.com>
	
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_destroy), (free_volume_black_list),
	(volume_in_black_list), (create_mount_link),
	(startup_create_mount_links), (fm_desktop_icon_view_initialize),
	(volume_mounted_callback):
	Started work on volume black list.  Added proc and boot to
	list.  Need to figure out a way to expose this to the UI
	so it is easy for the user to specify what mounts they
	want displayed on the desktop.

	* libnautilus-extensions/nautilus-drag.c: (add_one_url_list),
	(add_one_path_list), (nautilus_drag_drag_data_get):
	* libnautilus-extensions/nautilus-icon-dnd.c:
	Work on supporting drags form Nautilus into the attachments
	frame of Netscape mail.
	
2000-12-23  John Harper  <jsh@eazel.com>

	* libnautilus-extensions/nautilus-gdk-extensions.c
	(nautilus_gdk_parse_geometry): moved this out of the `! defined
	(NAUTILUS_OMIT_SELF_CHECK)' preprocessor block where I had
	inserted it by mistake. Also removed a statement with no effect

2000-12-23  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/hyperbola-filefmt.c:
        (fmt_man_populate_tree):
        Look in /usr/share/man if the 'manpath' app returns nothing.

2000-12-23  Ali Abdin  <aliabdin@aucegypt.edu>

        So, I thought I was fixing this bug in the Eazel bugtracker. I hack
        away, and get gzipped man files showing up in the Help sidebar. Turns
        out, that the bug I /should/ have been working on was some info-files
        now showing up in the Help sidebar.

        Oh well, at least we now get gzipp'd man files showing up in the
        sidebar (which is most man files nowadays).

        So I continuied hacking and fixd bug #4414 (info files in Debian do
        not show up in Help sidebar)

        * components/help/hyperbola-filefmt.c:
        (extract_secnum_from_filename),
        (name_without_suffix): New functions

        (fmt_man_populate_tree_from_subdir):
        gnome-man2html2 actually supports gzip'd files. So this needed some
        major work to get it to support them gzip'd files.

        (fmt_info_populate_tree):
        Also populate tree from the /usr/share/info subdir. I think this helps
        destroy bug #4414

2000-12-23  Ali Abdin  <aliabdin@aucegypt.edu>

        More Fixing for bug #5118 (tags within a title do not appear in the
        TOC). There are a few 'difficult' cases that are still not supported
        and we probably won't support.

        Thanks to jfleck@inkstain.net

        * components/help/converters/gnome-db2html2/toc-elements.c:

        Filled in function table to use toc_tag_characters where
        appropriate.

        (toc_tag_characters),
        (toc_title_end_element),
        (toc_title_start_element):
        Some hackery to use an 'in_printed_title' variable (so we can
        distinguish on wether we need to actually print the tag within the
        title).

        * components/help/converters/gnome-db2html2/gdb3html.c:
        (xml_parse_document): This function was #if 0'd out and is now gone
        from the tree
        (parse_file): Remove #if 0'd code.
        (main): Remove a really old unncessary comment

        * components/help/converters/gnome-db2html2/gdb3html.c:
        * components/help/converters/gnome-db2html2/sect-elements.c:
        * components/help/converters/gnome-db2html2/toc-elements.c:
        i18n'd a bunch of strings as some preliminary work to getting i18n
        working with gnome-db2html2

        * po/POTFILES.in:
        Update to reflect the i18n'd strings in gnome-db2html2

2000-12-23  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 4158, dropping a file onto gnome-terminal
	doesn't insert a path name.
	
	* libnautilus-extensions/nautilus-drag.c: (add_one_path_list),
	(nautilus_drag_drag_data_get):
	Return a list a text paths.
	
	* libnautilus-extensions/nautilus-drag.h:
	Add new type and data type for "text/uri"
	
2000-12-22  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Gene Z. Ragan <gzr@eazel.com>

	* libnautilus-extensions/nautilus-debug-drawing.c:
	(event_box_draw), (event_box_expose_event),
	(nautilus_debug_show_pixbuf):
	Dont use NautilusImage here because that create a chicken
	and egg problem when debuggin NautilusImage itself.  Use
	an event box instead.

	* libnautilus-extensions/nautilus-gdk-extensions.h:
	* libnautilus-extensions/nautilus-gdk-extensions.c:
	(nautilus_gdk_rgb_to_color_spec):
	New function to make a string color spec from an rgb value.
	
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.h:
	(nautilus_gdk_pixbuf_is_valid),
	(nautilus_gdk_pixbuf_get_frame):
	Make these public and add documentation for them.
	
2000-12-22  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>
	
	Fixed bug 4951, No error given selecting unmountable "Disks" volume.
	
	I added a pipe to monitor the result of the mount/umount command.
	If an error is in the pipe, a details error dialog is displayed.
	A generic mount failed error is first and the details button reveals
	the error message returned in the pipe.
		
	* libnautilus-extensions/nautilus-volume-monitor.c: (find_command),
	(open_error_pipe), (close_error_pipe),	
	(nautilus_volume_monitor_mount_unmount_removable):

	Renamed xfer to transfer.
	* libnautilus-extensions/nautilus-file-operations.c:
	(parent_for_error_dialog), (transfer_dialog_clicked_callback),
	(create_transfer_dialog), (handle_transfer_ok),
	(build_error_string), (handle_transfer_vfs_error),
	(handle_transfer_overwrite), (handle_transfer_duplicate),
	(update_transfer_callback), (sync_transfer_callback),
	(nautilus_file_operations_copy_move),
	(handle_new_folder_vfs_error), (new_folder_transfer_callback),
	(nautilus_file_operations_new_folder),
	(nautilus_file_operations_move_to_trash),
	(nautilus_file_operations_delete), (do_empty_trash):

	Added compatibility call.
	* libnautilus-extensions/nautilus-entry.c:
	* libnautilus-extensions/nautilus-entry.h:
	(nautilus_entry_new_with_max_length):
			
2000-12-22  Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_register): Add missing _()

2000-12-22  Darin Adler  <darin@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 5065 (When Nautilus moves a directory it doesn't rename
	the corresponding private metafile).

	Fixed bug 5066 (Moving a directory doesn't update infomrration
	about child directories in Nautilus).

	Fixed bug 5297 (Make all (C) strings use gettext).

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(nautilus_directory_rename_file_metadata),
	(nautilus_directory_remove_file_metadata): Add check for NULL hash
	table. Without this check we kept running into asserts.
	
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_new): Share URI-setup code with the renaming
	case.
	(set_directory_uri): New function shared with new directories and
	renaming.
	(get_path_from_vfs_uri), (get_private_metafile_path): Utility
	functions to help get local paths for private metafiles.
	(change_directory_uri): Update URI for an existing
	NautilusDirectory object. This handles renaming the private
	metafile too.
	(collect_directories_by_prefix): Function to collect affected
	directories when you rename a directory.
	(str_replace_prefix): Utility to replace string prefix so we can
	turn old directory name into the new one.
	(nautilus_directory_moved): Renamed and changed to use URIs
	instead of a directory object so it can be called even when no
	directory exists. Also made it collect all affected directories
	and do the work with change_directory_uri on each one.
	* libnautilus-extensions/nautilus-file.c: (rename_callback): Use
	the new nautilus_directory_moved.
	
	* libnautilus-extensions/nautilus-file-utilities.h:
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_build_time_stamp):
	* src/nautilus-about.h:
	* src/nautilus-about.c: (nautilus_about_new),
	(nautilus_about_draw_info):
	* src/nautilus-window-manage-views.c:
	(window_set_title_with_time_stamp), (update_title):
	* src/nautilus-window-menus.c:
	(help_menu_about_nautilus_callback):
	Rename "timestamp" -> "time stamp".

	* src/nautilus-window-menus.c:
	(help_menu_about_nautilus_callback): Mark "(C)" string for
	translation.
	
2000-12-21  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Work to allow geometry of initial window to be specified on
	command line. Fixes bug #5135

	* src/nautilus-shell.c (open_window): new arg `geometry'. When
	non-null, use nautilus_gtk_window_set_initial_geometry_from_string
	to affect the geometry of the unmapped window

	(corba_open_default_window, corba_open_windows): new arg,
	`geometry', passed to open_window () if a non-null string

	* src/nautilus-shell-interface.idl (open_windows,
	open_default_window): added `geometry' parameter. Pass a
	zero-length string to show no specified geometry

	* src/nautilus-main.c (main): new option `--geometry=GEOMETRY'.
	Pass the value to nautilus_application_startup (). This option
	is only allowed when no more than one URI is given on the
	command line (to prevent multiple windows appearing on top of
	one another)

	* src/nautilus-application.c, src/nautilus-application.h
	(nautilus_application_startup): added parameter `geometry', a
	string describing the geometry to give any created windows

	* src/nautilus-first-time-druid.c (druid_finished): pass null
	geometry parameter to nautilus_application_startup ()

	* libnautilus/nautilus-gdk-extensions.c,
	libnautilus/nautilus-gdk-extensions.h
	(NautilusGdkGeometryFlags, nautilus_gdk_parse_geometry): a
	wrapper for XParseGeometry () and associated bit definitions.
	Required since gnome_parse_geometry () offers no reliable way
	of detecting which of the geometry components were parsed
	successfully

	* libnautilus/nautilus-gtk-extensions.c,
	libnautilus/nautilus-gtk-extensions.h
	(nautilus_gtk_window_set_initial_geometry): takes an extra
	parameter, a NautilusGdkGeometryFlags value specifying which of
	the geometry parameters are valid

	(nautilus_gtk_window_set_initial_geometry_from_string): changed
	to allow the geometry string to specify one or both of position
	and dimensions. Also doesn't use g_return_if_fail to test for
	validity of input string (since it may come from the user),
	instead just use the parseable parts of the geometry string

2000-12-22  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Nautilus part of fix for bug 4798 (icon changes in MIME
	type capplet aren't reflected automatically in Nautilus)

	* libnautilus-extensions/nautilus-icon-factory.c:
	(get_icon_factory): connect to gnome_vfs_mime_monitor's
	"data_changed" signal. 
	(mime_type_data_changed_callback): emit "icons_changed"
	signal when gnome_vfs_mime_monitor says data has changed.

2000-12-21  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	* components/text/nautilus-text-view.oafinfo,
	components/hardware/nautilus-hardware-view.oafinfo: Fixed IID to
	standard format.
	
	* components/hardware/main.c (hardware_view_make_object, main),
	components/text/main.c: (text_view_make_object, main):
	Updated to match.

2000-12-21  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(draw_or_measure_label_text_aa):
	* libnautilus-extensions/nautilus-icon-factory.c: (embed_text):
	* libnautilus-extensions/nautilus-label.c: (render_buffer_pixbuf):
	* libnautilus-extensions/nautilus-scalable-font.c:
	(nautilus_scalable_font_draw_text),
	(nautilus_scalable_font_draw_text_lines_with_dimensions),
	(nautilus_scalable_font_draw_text_lines),
	(nautilus_text_layout_paint), (nautilus_gdk_pixbuf_new_from_text):
	* libnautilus-extensions/nautilus-scalable-font.h:
	* libnautilus-extensions/nautilus-tabs.c: (draw_tab_label):
	* src/nautilus-about.c: (draw_aa_string):
	* src/nautilus-sidebar-tabs.c: (draw_one_tab_plain),
	(draw_one_tab_themed):
	* test/test-nautilus-font.c: (main):
	Lost the "inverted" feature of smooth text drawing.  It wasnt used
	anywhere except a test program.  It never looked well and the
	nautilus icon container does something unrelated to select text.

	Also replace some hard coded 255 opacity values to use the
	NAUTILUS_OPACITY_NONE define.
	
2000-12-21  J Shane Culpepper  <pepper@eazel.com>

	reviewed by: Gene Z. Ragan <gzr@eazel.com>

	* components/services/install/lib/eazel-inventory-utils.c:
	(add_package_info), (add_hardware_info), (add_software_info),
	(eazel_create_configuration_metafile):

	Added the SOFTWARE node to the xml generation. Added 
	bogomips, flags, and distribution to information gathered.
	There are very few things missing from the collection engine
	now.

2000-12-21  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5218, The desktop is missing devices. (cdrom & vfat volume)
	
	Try and be more intelligent about determing the name of mounted
	volumes.  Until we can get the device name from the partition,
	we instead derive the name form the mount path.  If that fails, we fall
	back on a hrad coded string.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(mount_volume_get_name), (get_ext2_volume_name),
	(get_msdos_volume_name), (get_nfs_volume_name),
	(get_floppy_volume_name), (get_generic_volume_name):
	New and modified functions to return volume names.
	
2000-12-21  John Sullivan  <sullivan@eazel.com>

	* components/sample/main.c: (main): Changed
	nautilus_view_create_from_get_type to
	nautilus_view_create_from_get_type_function so it would
	compile. My guess is this was a last-minute rename from
	Maciej's previous checkin.

	Fixed bug 5319 (two menu items in Help menu use same underline
	accelerator key)
	Fixed bug 5293 ("Nautilus Feedback..." should just be "Feedback..."
	since it's not only for Nautilus feedback.)
	
	* src/nautilus-shell-ui.xml: Moved an underscore, changed a label,
	tweaked a tip.

2000-12-21  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 5282 (Two file-name-conflict dialogs renaming in
	Properties window)

	The problem was that the activate signal and the focus-out signal
	were both trying to rename using the bad name. Fixed by restoring
	the text in the name field to the original name when an error occurs.

	* src/file-manager/fm-properties-window.c:
	(fm_properties_window_initialize_class): Wire up finalize handler.
	(name_field_restore_original_name): Select text of original name
	after restoring it into text field.
	(set_pending_name): Helper function to save pending name.
	(name_field_done_editing): Remember pending name in case window
	and name field get destroyed before callback. Ref window so it
	won't be finalized before callback.
	(rename_callback): Restore original name when rename fails, use
	stored pending name for window, unref window.
	(name_field_focus_out), (name_field_activate): Now take window
	as callback data so it can be passed to done_editing.
	(create_basic_page): Remember name field in window details struct
	so it can be accessed in rename_callback; remove some unnecessary
	casts; pass window as callback data to two signal handlers.
	(real_destroy): Don't free details here; do so in finalize
	(real_finalize): Free pending_name and details here, so pending
	name is always accessible by rename_callback.

2000-12-21  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	* libnautilus/nautilus-view.c, libnautilus/nautilus-view.h
	(nautilus_view_construct,
	nautilus_view_construct_from_bonobo_control): New construct
	functions so it's possible for view implementations to be
	subclasses of NautilusView.
	(nautilus_view_new_from_bonobo_control): Implement in terms of construct function.
	* libnautilus/nautilus-view-standard-main.h,
	libnautilus/nautilus-view-standard-main.c:
	(nautilus_view_standard_main_multi, nautilus_view_standard_main,
	nautilus_view_create_from_get_type): New convenience functions
	that encapsulate and librarify most of the cut and pasted main.c
	code that is in every nautilus view.
	(object_destroyed, make_object): Helper functions. 
	* libnautilus/Makefile.am: Add nautilus-view-standard-main.[ch] to
	build.
	* libnautilus/nautilus-view-component.idl: Add license header
	comment.

	* libnautilus-extensions/nautilus-gtk-macros.h: Lined up the
	backslashes to make it easier to read and edit the multi-line
	macros.

	* components/sample/README: Explain that all files in this
	directory have "WHAT YOU NEED TO CHANGE" comments.
	* components/sample/main.c (main): Implement in terms of
	`nautilus_view_standard_main' and removed most of the rest of this
	file. Now all you have to change when writing your own view is an
	include and some defines at the top of the file. Added "WHAT YOU
	NEED TO CHANGE" comment.
	* components/sample/nautilus-sample-content-view.h,
	components/sample/nautilus-sample-content-view.c: Added "WHAT YOU
	NEED TO CHANGE" comments.
	(nautilus_sample_content_view_get_type,
	nautilus_sample_content_view_initialize,
	nautilus_sample_content_view_destroy, load_location,
	sample_load_location_callback, bonobo_sample_callback,
	sample_merge_bonobo_items_callback): Changed everything around so
	NautilusSampleContentView inherits from Nautilus view, not
	GtkLabel (the widget that happens to be in the main content
	area). This makes a lot more sense. Also fix bug 2410 but
	including alternative code to nautilus-only macros.
	
	* components/sample/nautilus-sample-content-view.oafinfo: Added
	"WHAT YOU NEED TO CHANGE" comment.
	* components/sample/Makefile.am: Added "WHAT YOU NEED TO CHANGE" comment.

2000-12-21  John Sullivan  <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-search-uri.c:
	(nautilus_self_check_search_uri): Updated self-check
	expected results to match recent wording changes.
	This should fix the Tinderbox build.

2000-12-21  Rebecca Schulman  <rebecka@eazel.com>
	Fix for bug 5244, that search interface 
	text that are sentence fragments should have comments explaining
	the context of the text to improve translation quality.

	reviewed by: Christian Rose <menthos@menthos.com>

	* libnautilus-extensions/nautilus-search-uri.c:
	* src/nautilus-search-bar-criterion.c:
	Added comments directly above sentence fragments
	that will be translated.

2000-12-20  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-debug-drawing.h:
	* libnautilus-extensions/nautilus-debug-drawing.c:
	(nautilus_debug_show_pixbuf_in_eog), (debug_delete_event),
	(nautilus_debug_show_pixbuf):
	Add a debug function to show pixbufs in process without having to
	fork off eog. This is more useful than the eog version for
	asynchronous stuff.
	
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.h:
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(pixbuf_draw_tiled), (draw_tile_to_pixbuf_callback),
	(draw_tile_to_drawable_callback),
	(nautilus_gdk_pixbuf_draw_to_pixbuf_tiled),
	(nautilus_gdk_pixbuf_draw_to_drawable_tiled),
	New function to tile pixbufs into drawables. In order to reuse the
	tiling algorithm from the "tile_to_pixbuf" function, I added a
	simple callback mechanism.
	
	(nautilus_gdk_pixbuf_get_global_buffer),
	New function to access a global buffer.
	
	(nautilus_gdk_pixbuf_get_from_window_safe):
	New function to wrap gdk_pixbuf_get_from_drawable with safety from
	x errors and race conditions. See code for detailed comments as to
	the specific problems this wrapper addresses.

	* libnautilus-extensions/nautilus-gtk-extensions.h:
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_class_name_make_like_existing_type):
	New function that custom widgets can call to make themselves look
	like stock widgets wrt to the gtk thememing engine.

2000-12-21  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-art-gtk-extensions.h:
	* libnautilus-extensions/nautilus-art-gtk-extensions.c:
	(nautilus_irect_assign_gdk_rectangle),
	(nautilus_irect_screen_get_frame),
	(nautilus_irect_gdk_window_get_bounds),
	(nautilus_irect_gdk_window_get_screen_relative_bounds),
	(nautilus_irect_gtk_widget_get_bounds),
	(nautilus_irect_gdk_window_clip_dirty_area_to_screen):
	New functions that accept gtk/gdk structures and
	return their bounds/frames as ArtIRects.

	These are very useful in code that uses libart functions
	to do operations on ArtIRects (such as intersection)
	
2000-12-20  Maciej Stachowiak  <mjs@eazel.com>

	* components/services/inventory/lib/trilobite-eazel-inventory-public.h:
	Removed.

2000-12-20  Darin Adler  <darin@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 5285 (Renaming file through 'properties' dialog causes
	Glib errors).

	Did some work on bug 2288 (Location bar should only escape /
	unescape unambiguously for URIs ).

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(nautilus_directory_set_metafile_contents): Create hash table even
	when no metafile is read in. This fixes asserts people were
	seeing.
	
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_format_uri_for_display): Use
	gnome_vfs_get_local_path_from_uri to unescape paths so we don't
	unintentionally munge them. There may still be an issue with using
	this function on a string that gets written into the location bar.
	(is_valid_scheme_character), (has_valid_scheme), (expand_tilde),
	(nautilus_make_uri_from_input): Redo function to implement a new
	scheme where we put http:// in front of anything that doesn't
	start with a URI scheme or a / and file:// in front of things that
	do start with / (converting the path to a URI by escaping
	characters are necessary).
	(nautilus_get_build_timestamp): Get rid of unneeded tests.
	(nautilus_self_check_file_utilities): Updated self-test for
	nautilus_make_uri_from_input.
	* src/nautilus-location-bar.c: (try_to_expand_path): Fix
	NULL-dereference in cases where gnome_vfs_unescape_string returns
	NULL.
	* src/nautilus-navigation-bar.c:
	(nautilus_navigation_bar_location_changed): Remove the broken
	get_mapped_location function (which called g_file_exists on
	partial paths so gave virtually "random" results) and just call
	get_location directly.

2000-12-20  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5186, Music View (and then Nautilus) crashes playing
	0-length MP3
	
	reviewed by: Pavel Cisler <pavel@eazel.com>

	Crash was caused by using an unitialized variable. Initializing
	the variable to NULL and then checking the result after the
	function is called solved the problem.
	
	* components/music/nautilus-music-view.c: (get_song_text),
	(music_view_set_selected_song_title):

2000-12-20  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5172, Music View doesn't always scroll when
	active song off-screen

	Borrowed code from NautilusCList to fix bug.
	Selection now scrolls into view in a logical manner during
	playback.
	
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize_class),
	(nautilus_music_view_initialize), (nautilus_music_view_destroy),
	(list_move_vertical), (list_moveto), (list_reveal_row),
	(play_current_file):

2000-12-20  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 4842 (Link to .Trash gives "You cannot copy the Trash"
	dialog) and part of bug 5221 (Trying to delete .Trash says
	"The Trash cannot be moved from the desktop")

	* libnautilus-extensions/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move): Don't disallow linking
	to trash folders (was doing so accidentally); distinguish
	error wording for desktop Trash icon and other trash folders.

2000-12-20  J Shane Culpepper  <pepper@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* components/services/install/command-line/.cvsignore:
	* components/services/install/command-line/Makefile.am:
	* components/services/install/command-line/eazel-test-inventory.c:
	(main):
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_do_transaction_md5_check):
	* components/services/install/lib/eazel-inventory-utils.c:
	(eazel_create_configuration_metafile),
	(update_gconf_inventory_digest), (eazel_gather_inventory):
	* components/services/install/lib/eazel-inventory-utils.h:
	* components/services/trilobite/libtrilobite/trilobite-md5-tools.c:
	(trilobite_md5_get_digest), (trilobite_md5_get_digest_from_file),
	(trilobite_md5_get_digest_from_md5_string),
	(trilobite_md5_get_string_from_md5_digest), (main):
	* components/services/trilobite/libtrilobite/trilobite-md5-tools.h:

	Adding various fixes to the inventory engine and adding a test program
	to validate the inventory api.  Fixed the trilobite-md5-tools functions
	to namespace trilobite correctly.

2000-12-19  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/Makefile.am:
	Dumshit me forgot to add new files to makefile.
		
2000-12-19  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: <delete if not using a buddy>

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-debug-drawing.h:
	* libnautilus-extensions/nautilus-debug-drawing.c:
	(nautilus_debug_draw_rectangle_and_cross),
	(nautilus_debug_show_pixbuf_in_eog):
	New files.  Put drawing debugging functions here.
	
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.h:
	Move drawing debugging functions to nautilus-debug-drawing.[ch].

	* test/test-nautilus-font.c: (main):
	Update for debug drawing functions location change.
	
2000-12-19  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	This powerpatch introduces the first parts of the ei2 work.
	
	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_update_from_uri):
	Updated the is_installed call to also pass a version sense.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line),
	(eazel_download_progress_signal), (main):
	Option to enable ei2.
	And since I was bored and played with adding KB/s to download.
	Also reenabled the use of gnome_init since otherwise the options
	were all incorrect.
	
	* components/services/install/command-line/eazel-test-packsys.c:
	(test_query), (progress_signal), (test_verify):
	Made the tests easier to tweak, by having defines for the
	packages/features etc that are used in the test queries.
	Fixed test_verify, so it' won't report badness on verify of
	multiple packages.
	
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system-types.c:
	(categorylist_flatten_to_packagelist),
	Moved a function from eazel-install-logic. It returns a flat list
	of all the packages in a set of categories.
	(packagedata_class_initialize), (packagedata_initialize),
	(packagedata_finalize), (packagedata_get_type), (packagedata_new),
	(packagedata_fill_in_missing), (packagedata_destroy),
	gtk'ified the packagedata object (I apologize)
	(eazel_install_package_matches_versioning):
	Made the matches_versioning use a version sense.
	Also added a PACKAGE_FILL_INVALID enum and a
	EAZEL_SOFTCAT_SENSE_ANY. Guess what they mean...
	Also added some gtk style defines for PackageDependency, for the
	day when we actually want to abuse it into a gtkobject (shudder)
	fill_in_missing now also sets the fillflag (needed for the ei2 work)
	
	* components/services/install/command-line/eazel-test-types.c:
	(test_eazel_install_package_matches_versioning):
	More test of matches_versioning to test the new sense ability.
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install__set_ei2), (impl_Eazel_Install__get_ei2),
	(impl_Eazel_Install__set_ignore_file_conflicts),
	(impl_Eazel_Install__get_ignore_file_conflicts),
	(eazel_install_get_epv):
	Added the evil ei2 boolean. If set, libeazelinstall will use the
	new ei2 features.
	
	* components/services/install/lib/Makefile.am:
	Added eazel-install-logic2.c which has the ei2 stuff.
	
	* components/services/install/lib/eazel-install-logic.h:
	* components/services/install/lib/eazel-install-logic.c:
	(ei_install_packages), (eazel_install_download_packages),
	(ei_uninstall_packages), (ei_revert_transaction),
	(eazel_install_check_existing_packages),
	(eazel_install_fetch_dependencies),
	(eazel_uninstall_check_for_install):
	Moved flatten_packages out.
	Prefixed soem functions with ei_ to seperate them from the ei2
	equivalents.
	Suffixed emit_dependency_check with _pre_ei2 to seperate it from
	the ei2 equivalent.
	
	* components/services/install/lib/eazel-install-logic2.h:
	* components/services/install/lib/eazel-install-logic2.c:
	(dump_tree_helper), (dump_tree), (get_softcat_info),
	(get_package_info_foreach), (get_package_info),
	(dedupe_foreach_depends), (dedupe_foreach), (dedupe),
	(is_satisfied), (is_satisfied_features),
	(check_dependencies_foreach), (check_dependencies),
	(no_two_packages_with_same_file), (check_conflicts_with_other),
	(feature_consistency_check), (do_file_conflict_check),
	(do_dep_check), (install_packages), (uninstall_packages),
	(revert_transaction):
	Implemented the first many steps of ei2. It now gets package info
	and correctly constructs a tree of needed packages. It still lacks
	the file and feature conflict checking.
	
	* components/services/install/lib/eazel-install-metadata.c:
	(init_default_install_configuration):
	Default debug to FALSE
	
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_set_arg), (eazel_install_class_initialize),
	(eazel_install_initialize), (eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_revert_transaction_from_xmlstring),
	(eazel_install_emit_dependency_check),
	(eazel_install_emit_dependency_check_pre_ei2),
	(eazel_install_set_debug):
	Shitload of code just to have one more arg (ei2). I remember how
	easy this was in Emerald... *sigh*
	_set_debug also sets VERBOSE debug in the packagesystem object.
	Initialise also inits some new hashes for ei2.
	The install, uninstall and revert checks for the ei2 setting, if
	true, use the new ones, of not, use the old ones (doh)
	Added a new emit_dependency that as second arg takes a
	PackageDependency and mutates a correct PackageData from it.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package):
	Back to only getting with NO_PROVIDES|NO_DEPENDENCIES when using
	the old (non ei2) stuff.
	
	* components/services/install/lib/eazel-package-system.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_is_installed):
	Takes a sense as last argument, make it more flexible.	

	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_packagedata_fill_from_header),
	(eazel_package_system_rpm3_query_requires),
	(check_if_all_packages_seen):
	Removed a fixme comment.
	Added a fixme comment.
	Set the package fillflag in fill_from_header.
	Fixed some braindamage in query_requires to limit the amount of
	damage the query does.
	all_packages_seen changes according to the is_installed changes.
	
	* components/services/install/lib/eazel-softcat.c:
	* components/services/install/lib/eazel-softcat.h:
	Give robey more blame than me.
	
	* components/services/install/lib/makefile.staticlib.in:
	Added logic2.o
	
2000-12-19  John Sullivan  <sullivan@eazel.com>

	Fixed bug 5258 (no UI for renaming new folder in View as List)

	After some email discussion, decided to bring up Properties
	window in this case. Fortunately, FMDirectoryView had this case
	beautifully factored so it was a cinch to add this.

	* src/file-manager/fm-list-view.c: 
	(real_start_renaming_item): New function, presents properties
	window.
	(fm_list_view_initialize_class): wire up real_start_renaming_item 
	as start_renaming_item function pointer,

2000-12-19  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>
	
	* libnautilus-extensions/nautilus-art-extensions.h:
	* libnautilus-extensions/nautilus-art-extensions.c:
	(nautilus_art_irect_assign),
	Convenience function to assign x,y,width,height values to an
	ArtIRect.

	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.h:
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(nautilus_gdk_pixbuf_is_valid),
	A simple private function that returns whether a pixbuf is "valid"
	or not.  Vailidy is meassured as not null, with valid pixel data
	and non zero dimensions.
	
	(nautilus_gdk_pixbuf_get_frame),
	Private function to return the frame of a GdkPixbuf in a stucture for
	better readability.

	(nautilus_gdk_pixbuf_fill_rectangle_with_color),
	Changed it to use ArtIRect's instead of GdkRectangles to avoid
	using unsigned and short integers.  Also, use art_irect_interset()
	to do clipping.

	(nautilus_gdk_pixbuf_save_to_file),
	Changed the pixbuf parameter to be const.

	(nautilus_gdk_pixbuf_unref_if_not_null),

	(nautilus_gdk_window_get_frame),
	Private function to return the frame of a GdkWindow in a stucture for
	better readability.
	
	(nautilus_gdk_pixbuf_draw_to_drawable),
	Renamed function to be consitent with the other pixbuf drawing
	functions.  Also made it use ArtIRect's instead of GdkRectangles
	to avoid using unsigned and short integers.  Rewrote the clipping
	operations using art_irect_intersect() for better readability.

	(nautilus_gdk_pixbuf_draw_to_pixbuf),
	Renamed function to be consitent with the other pixbuf drawing
	functions.  Also made it use ArtIRect's instead of GdkRectangles
	to avoid using unsigned and short integers.  Rewrote the clipping
	operations using art_irect_intersect() for better readability.

	(nautilus_gdk_pixbuf_draw_to_pixbuf_alpha),
	Renamed function to be consitent with the other pixbuf drawing
	functions.  Also made it use ArtIRect's instead of GdkRectangles
	to avoid using unsigned and short integers.  Changed the
	implementation to honor all parameters including the source_x and
	source_y.  This is needed to work around limitation in
	gdk_pixbuf_composite().  Rewrote the clipping operations using
	art_irect_intersect() for better readability.

	(nautilus_gdk_pixbuf_new_from_pixbuf_sub_area),
	(pixbuf_destroy_callback),
	New function to create pixbuf from a sub area.  The pixel data is
	shared an all memory bookeeping is taken care of for the caller by
	simply unreffing the resulting pixbuf.
	
	(nautilus_gdk_pixbuf_draw_to_pixbuf_tiled),
	Renamed function to be consitent with the other pixbuf drawing
	functions.  Made the implementation work and honor all its
	parameters including the origin.   Rewrote the clipping
	operations using art_irect_intersect() for better readability.

	There was a bug (5077) about this function claiming it was not
	used except in test code.  This was true, but now that it works im
	planning on using it in NautilusImage shortly.  I have marked that
	bug fixed.
	
	(nautilus_gdk_pixbuf_show_in_eog):
	New function to show a pixbuf externally in eog.  Useful for
	debugging pixbuf stuff.

	* libnautilus-extensions/nautilus-buffered-widget.c:
	(nautilus_buffered_widget_draw), (nautilus_gdk_pixbuf_tile_alpha):
	Use new gdk-pixbuf extension functions.
	
	* libnautilus-extensions/nautilus-scalable-font.c:
	(nautilus_text_layout_paint):
	Update for changes in fill_rectangle_with_color() api.
	
	* src/nautilus-about.c: (nautilus_about_update_authors):
	Update for changes in fill_rectangle_with_color() api.

	* test/test-nautilus-font.c: (main):
	Update for changes in pixbuf extensions.

2000-12-19  Darin Adler  <darin@eazel.com>

	* components/tree/nautilus-tree-model.c: (dump_one_file_node):
	Fixed code that cast a pointer to (unsigned), which won't work on
	the many platforms where pointers are bigger than ints.

2000-12-19  John Sullivan  <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-thumbnails.c:
	(nautilus_update_thumbnail_file_renamed_one):
	Removed a g_assert (!vfs_file_exists). I ran into this while
	testing something unrelated and Darin convinced me that it is
	loony to assert anything about the state of the files on disk.

2000-12-19  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 2392 (need timed wait when activating file)

	* src/file-manager/fm-directory-view.c: 
	(get_containing_window): Rewrote to avoid applying
	GTK_WINDOW () cast on potential NULL object.
	(fm_directory_view_activate_file): Start timed-wait when
	activating file, so user can cancel it if the call_when_ready
	takes a really long time.
	(activate_callback): Cancel timed-wait when we hear back from
	the call_when_ready.
	(cancel_activate_callback): Cancel call_when_ready if the user
	clicks the Cancel button in the timed-wait dialog.
	
	* src/file-manager/fm-properties-window.c:
	(fm_properties_window_present): Fixed a doubled character in
	a string from my previous checkin.

2000-12-19  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 2292 (no way to cancel opening a Properties window,
	which could wait forever checking if a file is a directory). 
	Now there's a hashtable of pending files, which is used to 
	avoid trying to show the same window twice and to cancel 
	showing a window. 

	* src/file-manager/fm-properties-window.c:
	(cancel_create_properties_window_callback): New function, used
	by timed-wait mechanism to give up on not-yet-appearing
	properties window.
	(remove_pending_file): New helper function, removes pending
	file from hashtable and stops timed-wait.
	(pending_file_succeeded): New helper function called when
	the wait for info is over and the window can be created.
	(create_properties_window_callback): call pending_file_succeeded
	before doing anything else.
	(directory_view_destroyed_callback): New function, used to
	cancel timed-wait if the directory view is destroyed before
	the properties window has appeared.
	(fm_properties_window_present): Create pending_files hashtable;
	do nothing if we're already waiting for a properties window
	for this file; add file to pending_files; wire up
	directory_view_destroyed_callback; start timed-wait before
	using call_when_ready to determine if file is a directory;
	use nautilus_g_hash_table_new_free_at_exit to help catch
	leaks.


	Added a couple more bonobo_ui_component_freeze/thaw pairs,
	though they have only a very small measured effect here.

	* src/file-manager/fm-icon-view.c: (update_layout_menus),
	(fm_icon_view_merge_menus): Add freeze/thaw pairs around
	multiple bonobo-ui operations.

2000-12-19  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 2233 (proper icon not selected switching views after
	rename) by re-sending selection when the selection items change
	since they might have changed names.
	
	* src/file-manager/fm-directory-view.c: (done_loading): Moved
	more of the done_loading code here for clarity.
	(compare_pointers), (sort_and_check_for_intersection): Added
	functions that quickly find if there's an intersection in two
	GLists of NautilusFile objects.
	(display_pending_files): Move some of the done_loading code into a
	new function, do it after processing file changes, and add code to
	send out the selection if a file change comes in for any items in
	the selection (in case the name changed).
	(display_selection_info_idle_callback),
	(update_menus_idle_callback), (display_pending_idle_callback):
	Make all of these more robust by keeping the NautilusView object
	in a local variable.
	(display_pending_timeout_callback): Do the "ref the NautilusView"
	thing in this function too.

	* check-POTFILES.pl: Added support for .xml and .cpp files and
	also updated special cases for directory environment variables.
	* check-THANKS.pl: Added a special case and fixed some things in
	the ChangeLog too to make this output fewer false positives.

2000-12-19  Mike Fleming  <mfleming@eazel.com>

	* components/services/nautilus-dependent-shared/shared-service-widgets.c:
	Added fixme

	* components/mozilla/main.c: (main):
	* components/services/summary/nautilus-view/main.c: (main):

	Cleaned up the ammonite/gconf initialization mess.  gconf should
	always be initialized before ammonite, and ammonite should always be
	initizalized if you're going to use it.

2000-12-19  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-art-extensions.c:
	* libnautilus-extensions/nautilus-art-extensions.h:
	* libnautilus-extensions/nautilus-gnome-extensions.c:
	* libnautilus-extensions/nautilus-gnome-extensions.h:
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	Move the libart specific extensions to their own place where I
	will soon add stuff.
	
2000-12-19  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.h:
	Remove nautilus_gdk_pixbuf_draw_text().  This function was meant
	to be used by embedded text.  Ever since we started using anti-
	aliased text via freetype, we dont need it anymore.

	This yanking manuever fixes Bug 2559, since the code relevant to
	that bug is now gone.

	* libnautilus-extensions/nautilus-icon-factory.c: (embed_text):
	Always use smooth fonts for embedded text.  Remove currently
	unused call to nautilus_gdk_pixbuf_draw_text().

	The issue of embedded always being anti aliased will continue to
	be tracked by bug 2783.
	
2000-12-18  Andy Hertzfeld  <andy@eazel.com>

	* icons/i-harddisk.png:
	aligned perspective with other images in the hardware view
	
	* icons/eazel/Back.png:
	* icons/eazel/Forward.png:
	* icons/eazel/Home.png:
	* icons/eazel/Refresh.png:
	* icons/eazel/Search.png:
	* icons/eazel/SearchWeb.png:
	* icons/eazel/Services.png:
	* icons/eazel/Stop.png:
	* icons/eazel/Up.png:
	new toolbar icons from Susan.  She's not quite finished with them
	yet, but these are a lot closer to the final ones, and I wanted to
	get them checked in before my vacation.
		
2000-12-18  Gene Z. Ragan  <gzr@eazel.com>

	Fixed an issue in sorting. When you reload a directory
	into music view, the last sort mode is applied to the
	newly loaded list.
	
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize_class),
	(nautilus_music_view_initialize), (nautilus_music_view_destroy),
	(sort_list), (click_column_callback), (nautilus_music_view_update):

2000-12-18  Andy Hertzfeld  <andy@eazel.com>

	* components/image-viewer/nautilus-image-view.c:
	(zoomable_zoom_to_fit_callback), (image_bigger_than_viewer),
	(scrolled_window_size_allocate_callback), (control_factory_common),
	(scrollable_control_factory):
	implemented initial "zoom-to-fit" if an image is bigger than the
	displayable area, as requested by Mike Boich.
	
2000-12-18  John Sullivan  <sullivan@eazel.com>

	reviewed by: Rebecca Shulman <rebecka@eazel.com>

	Fixed Nautilus half of bug 2109 (Images (and any other
	files) with "execute" bit set will try to be executed
	instead of viewed when activated). This change requires
	a recent GNOME-VFS change to compile.

	* src/file-manager/fm-directory-view.c: (file_is_launchable):
	Test for launchability now includes asking GNOME_VFS whether
	this mime type is conceivably executable.
	
	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_get_short_list_methods_for_file): Changed
	"vfs-method" to "vfs_method" to match change in GNOME-VFS.

2000-12-18  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>
	(Robey also looked at the install part a bit)

	Fix bug 5212 (File leaks when you start and immediately quit
	Nautilus).
	
	* src/file-manager/fm-directory-view.c: (queue_pending_files):
	Remove incorrect nautilus_file_list_ref that created a
	NautilusFile leak.

	Fix bug 5180 (Defined messages won't end up in translations) by
	making sure we don't ever use "_()" inside a #define.

	* libnautilus-extensions/nautilus-file-operations.c:
	* libnautilus-extensions/nautilus-global-preferences.c:
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	* libnautilus-extensions/nautilus-icon-factory.c:
	* nautilus-installer/src/installer.c:
	* nautilus-installer/src/package-tree.c:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/nautilus-location-bar.c:
	Changed all localizable strings in #defines to instead use global
	(const) variables. We still have the defines, though, since we
	can't call gettext in a global-initialization.
	
2000-12-18  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5136, Exit Music View with a 2nd open Music View window -> crash
	
	The bug was caused by a runaway timer callback.  The callback is now
	properly destroyed when the component is destroyed.
	
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_destroy), (play_status_display),
	(play_current_file), (play_button_callback):

2000-12-18  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-core-utils.c:
	(trilobite_get_popt_context), (trilobite_init), (trilobite_main),
	(trilobite_main_quit):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.h:

	Clean up trilobite_init to not use or require X anymore (yay!).
	Add a trilobite_main and trilobite_main_quit to mirror the GTK
	versions (but without polling for X events).  Add a way for
	services to retreive their popt context for command-line argument
	processing. 

	* components/services/install/command-line/eazel-alt-install-corba.c:
	(done), (main):
	* components/services/install/server/main.c:
	(trilobite_service_factory_destroy), (main):
	* components/services/time/service/main.c:
	(trilobite_service_factory_destroy), (main):
	* components/services/trilobite/sample/service/main.c:
	(trilobite_service_factory_destroy), (main):

	Make the command-line utilities use trilobite_main() and
	trilobite_main_quit() instead of the GTK variants.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(generate_xml_package_list), (osd_parse_dependency):

	Stop filling in the soft_depends field from XML.  (The old code
	that uses soft_depends doesn't expect it to be filled in and will
	get confused, and this field is going away shortly anyway.)
	
	* components/services/install/nautilus-view/main.c: (main):
	* components/services/time/nautilus-view/main.c: (main):

	Don't make the nautilus-views use trilobite_* functions (that
	would be bad), but clean them up to look similar to each other so
	it's easy to see how to copy them and make new trilobites.
	
2000-12-18  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: updated version of bonobo
	for no good reason, change pw2 because I never
	understood it and changed /rpm3/ to rpm*
	because on rpm4 systems it didn't generate the 
	right files.

2000-12-18  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_draw_to_pixbuf):
	* libnautilus-extensions/nautilus-background.h:
	Add a new function to draw backgrounds into GdkPixbufs.  Its a
	simple wrapper around the draw_to_canvas() function.

	Also, small tweaking of the prototypes to match "the style."
	
	* libnautilus-extensions/nautilus-buffered-widget.c:
	(create_background_pixbuf_from_ancestor):
	Draw directly into the pixbuf by using
	nautilus_background_draw_to_pixbuf function instead of drawing to
	a Pixmap and capturing the bits.
	
2000-12-18  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 4037 (Error dialog every time on launch when
	permissions are set strangely)

	Fixed bug 1115 (Need better name for "User Directory" 
	and "User Data Directory")

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_user_main_directory): Removed g_warning when
	Nautilus fails to create ~/Nautilus directory, improved
	FIXME comments.
	(nautilus_get_user_directory), (nautilus_get_desktop_directory):
	Added FIXME comments.
	
	* src/nautilus-application.c:
	(check_required_directories): Renamed from nautilus_application_
	check_user_directories; now returns FALSE if any required
	directories were not created. Reworded error dialog to mention
	directories by path rather than using confusing invented symbolic
	names, and to tell the user to address the problem by creating
	specified directories or setting permissions such that Nautilus
	can create specified directories. (It used to say "restart 
	Nautilus", which was pretty much guaranteed to have no effect.)
	(nautilus_application_startup): Now returns if 
	check_required_directories fails. The user has to address the
	problem described in the error message before Nautilus will
	launch.

2000-12-18  Gene Z. Ragan  <gzr@eazel.com>

	Fixed an unused variable error.
	
	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link),
	(place_home_directory):

2000-12-18  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c: (nautilus_emblem_dialog_new),
	(emblem_dialog_clicked):
	fixed bug 4164, "Add New Emblem" file entry can be typed in, but is
	ignored.  Fixed by reworking logic to read the path from it, instead
	of relying on activate to set it up.
	
2000-12-18  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2494, Error ignored when making icon directory for link file
	
	We now check the GnomeVFSResult. If it does != GNOME_VFS_OK, NULL
	is returned. The callers of this function can properly handle a NULL
	result.
	
	* libnautilus-extensions/nautilus-link.c: (make_local_path):

2000-12-18  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2526, Error case ignored when creating desktop link file
	
	I remvoed the error check in the three cases th ebug referenced.
	If an error occurs there is not much we can do. We could tell
	the user something, but the notification would be vague.  If a
	link is not created, there is no destructive side effect.
	
	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link),
	(volume_unmounted_callback), (place_home_directory):

2000-12-18  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c: (set_up_category_width):
	fixed bug 5230, shrinking the width of Backgrounds window
	causes floating point exception, by pinning the number of
	columns at 1.
	
	* icons/Makefile.am:
	* icons/default.xml:
	* icons/eazel/eazel.xml:
	* icons/vector/vector.xml:
	* icons/zoom_body.png:
	* icons/eazel/zoom_body.png:
	new zoom control image from Susan

2000-12-18  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2472, text_height and text_width shouldn't be
	left alone when renaming.
	
	Preserve the text_width and text_height when renaming.
	Don't reset the values, just block the draw when the
	renaming widget is visibile.
	
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(draw_label_text_aa):

2000-12-17  Ali Abdin  <aliabdin@aucegypt.edu>
        
        Fix bug #4379 (problem with variablelist's)

        Partial fix for bug #5118 (acronym (and other tags) do not appear
        in table of contents) - Implemented for: ACRONYM, FUNCTION

        Both of these are based on patches thanks to jfleck@inkstain.net

        Also added experimental ScrollKeeper support to the sidebar (as
        contributed by Mark Murnane from Sun). This is experimental, and
        disabled by default.

        * components/help/converters/gnome-db2html2/gdb3html.h:
        * components/help/converters/gnome-db2html2/sect-elements.[ch]:
        * components/help/converters/gnome-db2html2/toc-elements.c:
        (sect_varlistentry_start_element),
        (sect_varlistentry_end_element):
        new functions for VARLISTENTRY support
        (sect_listitem_start_element),
        (sect_listitem_end_element):
        Only print <LI> for itemizedlist and orderlist (for the varlist we
        print it out during the varlistentry)
        
        Makre sure we print out </LI>'s too, and remove the <P> cruft.

        * components/help/converters/gnome-db2html2/toc-elements.c:
        (toc_tag_characters):
        New function. This will be used to print tags within the title. e.g.
        <title><acronym>ASCII</acronym></title> should print out ASCII.

        * components/help/hyperbola-filefmt.c:
        * components/help/hyperbola-nav-tree.c:
        Added a patch contributes by Mark Murnane <Mark.Murnane@ireland.sun.com>
        that integrates experimental ScrollKeeper support for Hyperbola (the
        Help Sidebar). This is disabled by default. You should #define
        ENABLE_SCROLLKEEPER_SUPPORT to be able to use it.

        * components/help/ScrollKeeper-TODO:
        New file contributed by Sun.

2000-12-17  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize_class),
	(nautilus_property_browser_get_category_width),
	(set_up_category_width), (update_category_width),
	(nautilus_property_browser_update_contents),
	(nautilus_property_browser_set_path),
	(nautilus_property_browser_size_allocate):
	
	fixed bug 3310, contents of property browser should relayout
	to fit the window, by calculating the number of columns
	from the window width, and overriding size_allocate to
	relayout if necessary when the size changes. 

2000-12-17  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3890, Resort columns while MP3 plays,
	active song changes.
	
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize), (selection_callback),
	(compare_song_numbers), (compare_song_titles),
	(compare_song_artists), (compare_song_times), (compare_song_years),
	(compare_song_bitrates), (click_column_callback),
	(play_current_file), (nautilus_music_view_update):
	Change the way the list is sorted. Use column sorting functions
	that are set when the column button is clicked.  Don't reload list
	to resort. Make sure current selection index is updated
	when the list is resorted.

2000-12-15  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar.c:
	(nautilus_sidebar_active_panel_matches_id), (toggle_sidebar_panel),
	(nautilus_sidebar_add_panel_items),
	(nautilus_sidebar_remove_panel),
	(nautilus_sidebar_deactivate_panel):

	fixed bug 5198, removing the displayed sidebar panel messes up
	others, by closing the active panel before removing if it's the
	one to be removed.
	
	also fixed bug 1840 with this change, tab gets left behind when
	sidebar panel dies, by handling the case when we can't find the
	notebook page better.
	
2000-12-15  Gene Z. Ragan  <gzr@eazel.com>

	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link):
	Test and see how users respond to a more lenient mount policy.
	We now will mount a lot of things. Just curious.

2000-12-15  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 2400, LABEL=/ lines in /etc/fstab (used in Red Hat Beta 7)
	prevents trash from working

	Fixed bug 4586, Nautilus does not properly detect zip drives as removable
	media
	
	Rearchitected the way the volume monitor works. It now examines /proc/mounts
	to determine what file systems are mounted. This solves several problems such
	as the use of LABEL and auto in fstab. By using /proc/mounts we do not have to
	worry about permissions and disk access.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	* libnautilus-extensions/nautilus-volume-monitor.h:
	(nautilus_volume_monitor_initialize),
	(nautilus_volume_monitor_destroy), (floppy_sort),
	(nautilus_volume_monitor_get_removable_volumes),
	(nautilus_volume_monitor_get_volume_name),
	(mount_volume_get_cdrom_name), (mount_volume_activate_cdrom),
	(mount_volume_activate_floppy), (mount_volume_activate_ext2),
	(mount_volume_activate_msdos), (mount_volume_activate_generic),
	(mount_volume_get_name), (mount_volume_activate), (eject_cdrom),
	(free_mount_list), (create_differed_list),
	(get_current_mount_list), (verify_current_mount_state),
	(mount_volumes_check_status), (mount_volume_floppy_add),
	(mount_volume_ext2_add), (mount_volume_udf_add),
	(mount_volume_vfat_add), (mount_volume_msdos_add),
	(cdrom_ioctl_get_info), (mount_volume_iso9660_add),
	(mount_volume_proc_add), (find_volumes),
	(nautilus_volume_monitor_each_volume),
	(nautilus_volume_monitor_each_mounted_volume),
	(nautilus_volume_monitor_volume_is_mounted),
	(nautilus_volume_monitor_mount_unmount_removable), (copy_volume),
	(nautilus_volume_monitor_free_volume), (get_msdos_volume_name),
	(get_floppy_volume_name), (mount_volume_add_filesystem):
	
	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link),
	(volume_unmounted_callback), (update_disks_menu):

2000-12-15  John Sullivan  <sullivan@eazel.com>

	reviewed by: nobody, but Darin knew exactly what I was
	doing for these two small changes so that sorta counts.

	Fixed two problems found while investigating bug 4810
	(typing "gzip:" in location bar crashes), though I
	ended up fixing the bug entirely in gnome-vfs.

	* libnautilus-extensions/nautilus-directory-async.c:
	(get_info_callback): Don't call nautilus_directory_remove_file
	on self-owned files.
	
	* src/nautilus-window-manage-views.c: (handle_unreadable_location):
	Don't call a file "unreadable" if it doesn't exist. Let the rest
	of the error machinery handle it instead.

2000-12-15  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(hit_test_pixbuf):
	liberalized the alpha threshold for hit-testing, so
	semi-transparent areas hit test positively if they have
	any opacity at all.
	
2000-12-15  Robin * Slomkowski  <rslomkow@eazel.com>

	* components/services/install/lib/Makefile.am: added
		eazel-package-system-rpm3-private.h to EXTRA_DISTS

2000-12-15  Michael Engber  <engber@eazel.com>

	* src/nautilus-zoom-control.c: (draw_number),
	(draw_pixbuf_with_prelight), (nautilus_zoom_control_draw),
	(nautilus_zoom_control_expose),
	(nautilus_zoom_control_unload_images),
	(nautilus_zoom_control_load_images):
	Fixed performance of zoom control drawing by elimitating
	continual calls to gdk_fontset_load - bug 3317. Also fixed
	a falure to unref the number strip image.

2000-12-15  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>
	
	Fixed bug 2464 ("open each item in a new window" sometimes 
	reuses an existing window)

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_register): Changed preferences text to
	say "separate window" rather than "new window"


	Fixed bug 2752 (double-clicking Help item causes "sidebar view
	failed" message)
	
	Fixed bug 5040 (only one dead view name gets saved for a window)

	This was a tangled mess of issues, including: (1) the dialog
	code was incorrectly guessing "sidebar panel" when a content
	view failed in some cases (fixed); (2) view frame lifetime
	issues found while working on (1) (fixed); (3) the state machine
	can fail if asked to load the same location twice very quickly
	(written up as bug 5197); (4) the Help sidebar panel asks to
	load the same location multiple times on a double-click (fixed);
	(5) Mozilla sometimes fails to load just after it has quit
	(written up as bug 5199).

	* components/help/hyperbola-nav-tree.c:
	(hyperbola_navigation_tree_new): Connect to destroy signal of 
	ctree widget.
	(set_pending_location): New helper function to remember the
	location for which this component just initiated a load.
	(hyperbola_navigation_tree_load_location): Set pending location
	to NULL now that there's a new real location.
	(hyperbola_navigation_tree_select_row): Don't try to start a
	new load of the pending location; set the pending location when
	we do start a new load.
	(hyperbola_navigation_tree_destroy): free pending location.
	
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_initialize_class),
	(nautilus_view_frame_destroy), (nautilus_view_frame_finalize):
	Don't destroy details fields until finalize, so view_frame objects
	with extra refs can survive between destroy & finalize.
	
	* src/nautilus-window-manage-views.c: 
	(view_frame_info_new), (view_frame_info_free): New helper
	functions for dealing with the label & sidebar-panel-ness
	of a view frame.
	(set_view_frame_info): New helper function for storing
	the label & sidebar-panel-ness of a view frame in object
	data in the view frame.
	(view_frame_is_sidebar_panel), (view_frame_get_label):
	New helper functions for retrieving info stored in object
	data in the view frame.
	(report_content_view_failure_to_user_internal),
	(report_current_content_view_failure_to_user),
	(report_nascent_content_view_failure_to_user),
	(report_sidebar_panel_failure_to_user): Reworked the functions
	that put up the "view failed" dialog to take a NautilusViewFrame
	and to distinguish the existing-content-view from content-view-
	that's-being-created cases.
	(disconnect_view_and_destroy), (disconnect_destroy_unref_view): 
	New helper functions for cleanly forgetting about a view.
	(handle_view_failure): Use object data to distinguish content views
	from sidebar panels so we'll always get the right failure dialog.
	(update_state), (change_state): Get rid of dead_view_name mechanism;
	the name is now stored in the view frame in all cases.
	(load_content_view), (free_location_change), 
	(nautilus_window_begin_location_change),
	(nautilus_window_set_sidebar_panels): Jigger around the reffing &
	sinking of NautilusViewFrames to fix leaks and uncancelled-callback
	issues.
	
	* src/nautilus-window-private.h: remove obsolete dead_view_name
	field.
	* src/nautilus-window.c: (nautilus_window_destroy):
	Don't free now-non-existent dead_view_name field.

2000-12-15  Darin Adler  <darin@eazel.com>
	
	reviewed by: Gene Ragan <gzr@eazel.com>

	Fix bug 5176 (Theme descriptions not translated).

	Fix bug 5187 (Real name in file ownership doesn't take GECOS data
	into account).
	
	* src/nautilus-theme-selector.c: (make_theme_description): Get the
	theme description (which I also moved to the theme node from its
	own description node) by using
	nautilus_xml_get_property_translated which handles using the
	gettext database to translate the property if the XML file has it
	with a _ prefix.

	* icons/ardmore/ardmore.xml:
	* icons/arlo/arlo.xml:
	* icons/default.xml:
	* icons/gnome/gnome.xml:
	* icons/vector/vector.xml:
	Moved description to be a property of the theme node and use the
	name that indicates it needs to be localized.

	* po/POTFILES.in: Add all of the theme .xml files which now
	potentially have localizable theme descriptions in them.
	
	* libnautilus-extensions/nautilus-file.c: (get_real_name): Add
	code to compute the real name from the GECOS info, by stripping
	anything after the "," and substituting the login name,
	capitalized, for any occurences of "&".
	(get_user_and_real_name_from_id): Use get_real_name instead of
	going for the pw_gecos field directly.
	(nautilus_get_user_names): Use get_real_name instead of
	going for the pw_gecos field directly.
	
	* libnautilus-extensions/nautilus-string.h:
	* libnautilus-extensions/nautilus-string.c:
	(nautilus_str_strip_substring_and_after),
	(nautilus_str_replace_substring), (nautilus_self_check_string):
	Add two new string utility functions and self-checks for them.
	These were both needed for the GECOS change.
	
	* src/nautilus-property-browser.c: Tweak formatting.

2000-12-15  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* components/html/gnome-dialogs.c: (get_progress),
	(glibwww_prompt), (glibwww_prompt_password),
	(glibwww_prompt_username_and_password):
	* components/music/configure.c: (mpg123_configure):
	* components/music/fileinfo.c: (mpg123_file_info_box):
	* components/music/nautilus-music-view.c: (image_button_callback):
	* helper-utilities/error-dialog/nautilus-error-dialog.c:
	(show_message_box):
	* libnautilus-extensions/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_new):
	* libnautilus-extensions/nautilus-global-preferences.c:
	(nautilus_global_preferences_set_dialog_title):
	* libnautilus-extensions/nautilus-program-chooser.c:
	(run_program_configurator_callback),
	(nautilus_program_chooser_new):
	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_callback), (nautilus_simple_dialog),
	(show_message_box):
	* src/file-manager/fm-icon-text-window.c:
	(create_icon_text_window):
	* src/file-manager/fm-properties-window.c:
	(create_properties_window), (select_image_button_callback):
	* src/nautilus-about.c: (nautilus_about_initialize):
	* src/nautilus-bookmarks-window.c: (create_bookmarks_window):
	* src/nautilus-first-time-druid.c:
	(nautilus_first_time_druid_show):
	* src/nautilus-link-set-window.c:
	(nautilus_link_set_configure_window):
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize),
	(nautilus_emblem_dialog_new), (add_new_pattern):
	* src/nautilus-shell.c: (display_caveat):
	* src/nautilus-theme-selector.c:
	(nautilus_theme_selector_initialize),
	(add_new_theme_button_callback):

	Added calls to gtk_window_set_wmclass with suitable instance
	names and `Nautilus' class name

2000-12-15  Andy Hertzfeld  <andy@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_initialize),
	(invalidate_text_dimensions), (nautilus_icon_canvas_item_set_arg),
	(measure_label_text):
	fixed performance bottleneck where we measure the label text too
	many times by making it use values cached in the item details.
	Added code to invalidate them at the appropriate times, and
	made measure_label_text short-circuit if they're valid.
	
2000-12-15  J Shane Culpepper  <pepper@eazel.com>

        reviewed by: Darin Adler <darin@eazel.com>

        * components/services/install/lib/Makefile.am:
        * components/services/install/lib/eazel-inventory-utils.c:
        (init_package_system), (get_package_list), (add_package_info),
        (str_has_prefix), (eazel_inventory_gconf_done), (check_gconf_init),
        (get_digest_from_gconf), (update_gconf_inventory_digest),
        (eazel_gather_inventory):
        * components/services/install/lib/eazel-inventory-utils.h:

        Removing hardcoded rpm calls and now using the eazel package
        system lib.  Added digest testing to know when the inventory
        xml has changed.

2000-12-15  Darin Adler  <darin@eazel.com>

	* components/services/install/lib/eazel-install-xml-package-list.h:
	* components/services/install/nautilus-view/nautilus-service-install.c:
	* nautilus-installer/src/Makefile.am:
	Got rid of lingering references to helixcode-utils.* that Robey
	apparently missed when he removed those files. This should fix
	clean builds and Tinderbox.

	* components/services/trilobite/libtrilobite/Makefile.am: Removed
	duplicate mention of file.
	
	* src/nautilus-view-frame.c: Formatting tweak.

2000-12-15  Maciej Stachowiak  <mjs@eazel.com>

	* components/rpmview/nautilus-rpm-view-install.c
	(nautilus_rpm_view_install_package_callback,
	nautilus_rpm_view_uninstall_package_callback): Remove check for
	Red Hat to match Robey's earlier changes and fix the build.

2000-12-15  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/callbacks.c: (ask_to_delete_rpms),
	(ask_are_you_sure):
	* nautilus-installer/src/gtk-hackery.c: (log_debug), (gtk_box_nth),
	(gnome_reply_callback):
	* nautilus-installer/src/installer.c:
	(get_detailed_errors_foreach):
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/main.c:

	Factor more stuff out into GTK hackery.  Fix headers to sync up
	with the better libtrilobite layout and to follow the moving
	target that is libeazelinstall.
	
	* nautilus-installer/src/package-tree.c:
	(package_customizer_finalize), (package_customizer_unref),
	(package_customizer_class_initialize),
	(package_customizer_initialize), (package_customizer_new),
	(package_customizer_get_type), (package_info_compare),
	(package_customizer_find_package), (popup_package_dialog),
	(package_customizer_recompute_bongs), (package_toggled),
	(package_customizer_fill), (normalize_labels),
	(package_customizer_set_package_list),
	(package_customizer_get_widget), (jump_to_package_tree_page):
	* nautilus-installer/src/package-tree.h:

	Make the package tree into a proper GTK object.

2000-12-15  Robey Pointer  <robey@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (main):

	Remove check for redhat.
	
	* components/services/install/lib/eazel-install-corba-callback.c:
	* components/services/install/lib/eazel-install-metadata.c:
	* components/services/install/lib/eazel-install-object.c:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (parse_category), (osd_parse_provides),
	(osd_parse_implementation), (osd_parse_softpkg),
	(eazel_install_packagelist_parse):
	* components/services/install/lib/eazel-softcat.c:
	* components/services/install/server/main.c: (main):
	* components/services/summary/lib/eazel-summary-shared.c:
	(parse_a_service), (parse_a_eazel_news_item),
	(parse_a_update_news_item):
	* components/services/time/service/trilobite-eazel-time-service.c:
	(trilobite_eazel_time_service_initialize_load_config):
	* components/services/trilobite/libtrilobite/Makefile.am:
	* components/services/trilobite/libtrilobite/helixcode-utils.c:
	* components/services/trilobite/libtrilobite/helixcode-utils.h:
	* components/services/trilobite/libtrilobite/libtrilobite.h:
	* components/services/trilobite/libtrilobite/makefile.staticlib.in:
	* components/services/trilobite/libtrilobite/trilobite-core-messagi
	ng.c: (trilobite_add_log), (trilobite_close_log),
	(trilobite_debug), (trilobite_set_debug_mode),
	(trilobite_set_log_handler):
	* components/services/trilobite/libtrilobite/trilobite-core-messagi
	ng.h:
	* components/services/trilobite/libtrilobite/trilobite-core-network
	.c: (trilobite_xml_get_string), (trilobite_open_uri),
	(trilobite_fetch_uri), (trilobite_fetch_uri_to_file):
	* components/services/trilobite/libtrilobite/trilobite-core-network
	.h:
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_init), (trilobite_setenv):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.h
	:
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	* components/services/trilobite/libtrilobite/trilobite-service-priv
	ate.h:
	* components/services/trilobite/sample/command-line/main.c: (main):
	* components/services/trilobite/sample/service/main.c: (main):

	Clean up libtrilobite: move network and XML related funcs into
	-network.c and logging stuff into -messaging.c, where they were
	intended to be all along I guess.  Fix header include lines from
	other files to match the new locations.  Ditch the archaic
	helixcode stuff.
	
	* components/services/install/lib/makefile.staticlib.in:

	Fix staticlibs to add new trilobite files and to follow the MD5
	funcs to their new home.
	
2000-12-15  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(draw_or_measure_label_text), (draw_or_measure_label_text_aa):
	fixed problem with selection causing relayout, by always allocating
	the space for highlighting.  Also, tightened up the size of the
	highlighted area.
	
2000-12-14  Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(draw_or_measure_label_text), (draw_or_measure_label_text_aa):
	Some #defines to help me profile draw_measure_label_text.
	Off in the build.

2000-12-14  Maciej Stachowiak  <mjs@eazel.com>

	sort of reviewed by: Mathieu Lacage  <mathieu@eazel.com>

	* src/nautilus-window-manage-views.c
	(viewed_file_changed_callback): If the file we are viewing got
	renamed, update the window's concept of it's location, the up
	button sensitivity, the navigation bar location and the
	title. This fixes bug 807 (File name in sidebar doesn't update
	when file is renamed).

	* libnautilus-extensions/nautilus-directory-async.c
	(get_info_callback): Make sure not to free an already NULL file
	info. This pathological case was being tirggered sometime when
	doing a Refresh on a viewed location that got renamed.

2000-12-14  Arlo Rose  <arlo@eazel.com>

	* icons/eazel/eazel.xml:
	* icons/eazel/sidebar_tab_pieces/*:
	Changed the sidebar to reflect the solid blue Susan and Andy wanted.

2000-12-14  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar-title.c: (update_icon):
	made the sidebar get the right icon for the hardware
	view by special-casing it like we do for services and man.
	As part of this, I made the sidebar work properly with
	.svg icons by calling the icon factory to load the icon.
	
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_pixbuf_from_name):
	added a convenience routine to fetch icons by name.
	* libnautilus-extensions/nautilus-icon-factory.h:
	definition for the convenience routine.
	
2000-12-14  Robey Pointer  <robey@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* components/services/install/lib/eazel-install-xml-package-list.c:
	(osd_parse_provides), (osd_parse_dependency),
	(osd_parse_file_list), (osd_parse_implementation):

	Parse package dependency info from softcat and put them in the new
	'depends' list in the package.  (This will replace the old
	soft_depends and hard_depends fields.)  Incorporate new fields
	supplied by the internal triggerfish.
	
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedependency_new), (packagedependency_copy),
	(packagedependency_destroy), (packagedata_new),
	(packagedata_deplist_copy), (packagedata_copy),
	(packagedata_fill_in_missing), (packagedata_destroy),
	(packagedata_status_str_to_enum), (dump_package_list),
	(dump_package_deplist), (packagedata_dump_int):
	* components/services/install/lib/eazel-package-system-types.h:

	Add new 'depends' field and PackageDependency struct.

	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_initialize), (sense_flags_to_softcat_flags),
	(eazel_softcat_convert_sense_flags),
	(eazel_softcat_sense_flags_to_string):
	* components/services/install/lib/eazel-softcat.h:

	Add functions to convert to/from softcat sense flags, and a
	convenience function for converting them into a human-friendly
	string like ">=".

2000-12-14  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-corba-callback.c:
	(eazel_install_callback_create_corba_object),
	(eazel_install_callback_initialize):
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba.c:
	(eazel_install_create_corba_object):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_finalize), (eazel_install_unref),
	(eazel_install_set_arg), (eazel_install_initialize):
	* components/services/install/lib/eazel-install-problem.c:
	* components/services/install/lib/eazel-install-problem.h:
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-package-system-private.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_create_dbs),
	(eazel_package_system_rpm3_open_dbs),
	(eazel_package_system_rpm3_initialize):
	* components/services/install/lib/eazel-package-system-rpm3.h:
	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_rpm4_initialize):
	* components/services/install/lib/eazel-package-system-rpm4.h:
	* components/services/install/lib/eazel-package-system-skeleton.c:
	(eazel_package_system_skeleton_load_package),
	(eazel_package_system_skeleton_query),
	(eazel_package_system_skeleton_install),
	(eazel_package_system_skeleton_uninstall),
	(eazel_package_system_skeleton_verify),
	(eazel_package_system_skeleton_initialize):
	* components/services/install/lib/eazel-package-system-skeleton.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_initialize):
	* components/services/install/lib/eazel-package-system.h:

	Change all IS_EAZEL* macros to EAZEL_IS*, to match convention.

2000-12-14  Darin Adler  <darin@eazel.com>

	* components/image-viewer/nautilus-image-view.c:
	(bonobo_object_factory): Remove unnecessary return_if_fail
	that was referring to a field now renamed in Bonobo.

2000-12-14  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 2807 (support metadata removal for cases where we
	move/delete files) by implementing metadata removal.

	Fix bug 2199 (Saved icon positions ruin desktop layout features)
	by testing and fixing other bugs now that metadata removal is
	implemented.

	Fix bug 5164 (exception trying to drag file) by fixing a few
	placeholders in XML files that were still transparent and should
	not be.

	Fix bug where we don't reveal the New Folder icon (reintroduced by
	my changes yesterday) by computing the icon position in a way that
	works even before the canvas item is updated.

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(get_file_node): Small change (not used for now) that might
	help unify the "before metafile is read" case with the code
	after the metafile is read.
	(nautilus_directory_rename_file_metadata): Remove the old
	file metadata before renaming the new data. Also change code
	to avoid looking up things in the hash table twice.
	(nautilus_directory_copy_file_metadata): Updated and added
	FIXME comments.
	(nautilus_directory_remove_file_metadata): Add code to
	remove metadata, similar to the existing rename code.
	
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_schedule_metadata_copy),
	(nautilus_directory_schedule_metadata_move),
	(nautilus_directory_schedule_metadata_remove): Fix code that was
	using file names instead of relative URIs (essentially escaped
	file names). This code was missed when we made the
	switchover. Without this, changes to files with spaces in their
	names didn't update metadata properly.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(build_error_string): Added blank line between the intro sentence
	and the rest of the error message.
	(handle_xfer_overwrite): Added blank line between the intro
	sentence and the rest of the error message.
	(sync_xfer_callback): Fix metadata code to remove the metadata
	when creating a new file, just as it copies metadata when copying
	a file. This change helps the New Folder case, but requires a fix
	in gnome-vfs to set the top level boolean for the New Folder case.
	(handle_new_folder_vfs_error): Added blank line between the intro
	sentence and the rest of the error message.
	(nautilus_self_check_file_operations): Changed the self-check to
	use the standard way of testing functions that return text instead
	of rolling its own.
	
	* libnautilus-extensions/nautilus-gnome-extensions.h:
	* libnautilus-extensions/nautilus-gnome-extensions.c:
	(nautilus_gnome_canvas_item_get_canvas_bounds): Added a function
	that's like nautilus_gnome_canvas_item_get_current_canvas_bounds
	but is accurate even before the icon is updated.
	
	* libnautilus-extensions/nautilus-icon-container.c: (reveal_icon):
	Use nautilus_gnome_canvas_item_get_canvas_bounds instead of
	nautilus_gnome_canvas_item_get_current_canvas_bounds. Fixes the
	bug I reintroduced where New Folder icons would not be revealed.
	
	* libnautilus-extensions/nautilus-xml-extensions.h:
	* libnautilus-extensions/nautilus-xml-extensions.c:
	(nautilus_xml_remove_node): Add a remove-node function. This is
	needed because gnome-xml doesn't have xmlRemoveNode
	implemented. This implementation is not quite complete, but
	probably good enough for our purposes. A complete implementation
	might have to have some handling for removing the root node and
	perhaps some stuff to remove unused namespaces. Maybe this can be
	rolled into gnome-xml.
	
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/nautilus-shell-ui.xml:
	Added some more delimit="none" entries to make it so that the
	actual placeholder definitions are not "transparent".
	
	* libnautilus-extensions/nautilus-glib-extensions.c
	(nautilus_self_check_glib_extensions): Marked some strings that
	are part of a test translatable since the result might be
	different in some locales. Translating the strings to the right
	result makes "make check" work properly in that locale.

2000-12-14  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-first-time-druid.c:
	(make_hbox_user_level_radio_button), (set_up_user_level_page),
	(set_up_update_page):
	fixed bug 2912, better wording in the first time wizard, by revising
	the text.  Also, improvement the vertical alignment on the
	user level selection page.
	
2000-12-14  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/rpmview/nautilus-rpm-verify-window.c:
	(nautilus_rpm_verify_window_set_progress):
	* components/rpmview/nautilus-rpm-view-private.h:
	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_initialize), (verify_failed_signal),
	(nautilus_rpm_view_verify_files):
	Fixed 5169 and 5170 (install and verify didn't work).

2000-12-14  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar.c: (nautilus_sidebar_initialize_class),
	(nautilus_sidebar_press_event), (nautilus_sidebar_release_event):
	at Arlo's request, made the sidebar tabs activate on button release
	instead of button press.
	
2000-12-14  Martin Norbck  <d95mback@dtek.chalmers.se>

	reviewed by: Darin Adler <darin@eazel.com>

	* po/POTFILES.in, src/nautilus-complex-search-bar.c:
	Marked strings for translation and adding file to POTFILES.in

2000-12-14  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_download_packages),
	Set toplevel to TRUE even if not downloading, fixes 5196.
	(eazel_install_do_transaction_all_files_check):
	Only do interpackage file check in packages.size() > 1
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize), (eazel_install_set_debug):
	Set debug in packagesystem to FAIL, not VERBOSE. _set_debug raises
	it to verbose.

2000-12-14  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Major boost in tree view performance, and startup/new window
	performance when tree view is on. This fixes bugs 4922 (Opening
	new windows is really slow when the tree view is enabled), 5149
	(http://bugzilla.eazel.com/show_bug.cgi?id=5149) and 3936
	(http://bugzilla.eazel.com/show_bug.cgi?id=3936).
	
	* components/tree/nautilus-tree-change-queue.c,
	components/tree/nautilus-tree-change-queue.h: New files that
	implement a change queue, so the tree view can defer processing
	changes until idle time but still handle them in order.
	* components/tree/Makefile.am: Add to build.

	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_initialize): Initialize change queue.
	(nautilus_tree_view_enqueue_change),
	(nautilus_tree_view_model_node_added_callback,
	nautilus_tree_view_model_node_changed_callback,
	nautilus_tree_view_model_node_removed_callback,
	nautilus_tree_view_model_done_loading_callback): Do no real work,
	just enqueue the changes and schedule the idle callback.
	(reload_model_node, reload_model_node_recursive): Don't actually
	update all nodes, just enqueue changes and schedule idle
	callbacks.
	(schedule_pending_idle_callback): Helper function to schedule an
	idle callback to process the change queue.
	(dequeue_pending_idle_callback): Process the head of the change
	queue, and unschedule self when done (currently it will process at
	most 100 changes at one go). Keep the tree frozen while doing the
	changes, to minimize redraws.
	(nautilus_tree_view_insert_model_node): Moved call to
	notify_node_seen here from
	nautilus_tree_view_model_node_added_callback.
	(nautilus_tree_view_destroy): free change queue, dnd data.

	* components/tree/nautilus-tree-view-dnd.c: Prune includes.
	(nautilus_tree_view_free_dnd): New function so
	nautilus-tree-view.c destroy function does not need to know
	internal details of tree view.
	* components/tree/nautilus-tree-node.h: Removed prototypes of
	nonexistent functions.
	* components/tree/nautilus-tree-view.h,
	components/tree/nautilus-tree-view-private.h,
	components/tree/nautilus-tree-view-dnd.h: Include necessary
	headers, to make these standalone, and prune unneeded headers.

2000-12-14  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_update_icon):
	fixed bug 4219, using an image to represent itself bad when image is
	too small, by scaling up the image to a minimum size if necessary.
	
2000-12-13  Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(build_error_string):
	Translated error messages to English (with John's help).

2000-12-13  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	This should fix 4891 and 4892 & 4454.
	
	* components/services/install/command-line/eazel-test-packsys.c:
	(test_query), (progress_signal), (main):
	Also does a test on QUERY_FLAG_REQUIRES, by checking if more then
	10 packages require glibc.
	Fixed the wrong order of arguments for progress_signal.
	main can now take a --debug=<int> which sets the debug level in
	the EazelPackageSystem.
	
	* components/services/install/lib/eazel-package-system-rpm3.h:
	* components/services/install/lib/eazel-package-system-rpm3-private
	.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_get_and_set_string_tag),
	(eazel_package_system_rpm3_packagedata_fill_from_header),
	(eazel_package_system_rpm3_get_db),
	(eazel_package_system_rpm3_query_impl),
	(eazel_package_system_rpm3_query_substr),
	(eazel_package_system_rpm3_query_foreach),
	(eazel_package_system_rpm3_query_requires),
	(eazel_package_system_rpm3_query),
	(eazel_package_system_rpm3_class_initialize),
	(eazel_package_system_rpm3_initialize),
	(eazel_package_system_rpm3_new):
	Mindnumbing amounts of boilerplate code to make query_foreach and
	query_impl virtual functions which the rpm4 class can override. I
	weep for gnome and it's C usage of OO and long for the good ole
	days of C++.
	Also made the loops more unreadable but safer (I hope).
	
	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_rpm4_query_impl),
	(eazel_package_system_rpm4_query_substr),
	(eazel_package_system_rpm4_query_foreach),
	(eazel_package_system_rpm4_class_initialize),
	(eazel_package_system_rpm4_initialize):	
	The final juju to implement the EazelPackageSystemRpm4 class. I
	will not bore you with more details.
	
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_query):
	assert that the key is non-null.

2000-12-13  Maciej Stachowiak  <mjs@eazel.com>

	* components/loser/content/.cvsignore,
	components/loser/sidebar/.cvsignore,
	components/mozilla/.cvsignore, components/sample/.cvsignore,
	libnautilus/.cvsignore, src/.cvsignore,
	src/file-manager/.cvsignore: Add -ui.xml.h generated files to
	.cvsignore.

2000-12-13  Maciej Stachowiak  <mjs@eazel.com>

	* components/services/docs/directories: New file documenting the
	directory layout of components/services.
	
	* components/services/inventory/.cvsignore,
	components/services/inventory/Makefile.am,
	components/services/inventory/command-line/README,
	components/services/inventory/lib/.cvsignore,
	components/services/inventory/lib/Makefile.am,
	components/services/inventory/lib/eazel-inventory-shared.c,
	components/services/inventory/lib/eazel-inventory-shared.h,
	components/services/inventory/nautilus-view/.cvsignore,
	components/services/inventory/nautilus-view/Makefile.am,
	components/services/inventory/nautilus-view/main.c,
	components/services/inventory/nautilus-view/nautilus-inventory-view.c,
	components/services/inventory/nautilus-view/nautilus-inventory-view.h,
	components/services/inventory/nautilus-view/nautilus-inventory-view.oafinfo:
	Remove old dead inventory code.

	* components/services/login/command-line/README: Remove last file
	in otherwise-empty directory.
	* components/services/summary/command-line/README: Ditto.
	* cut-n-paste-code/widgets/gtkclist/.cvsignore: Ditto.

2000-12-13  Andy Hertzfeld  <andy@eazel.com>

	* icons/Makefile.am:
	* icons/i-music-12.png:
	* icons/i-music-12-aa.png:
	* icons/i-music-24.png:
	* icons/i-music-24-aa.png:
	* icons/i-music-36.png:
	* icons/i-music-36-aa.png:
	fixed bug 3502, music icon doesn't scale well, by adding
	pre-scaled icons from Susan.
	
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_name_for_regular_file):
	removed evil special-case of text files; now it uses
	whatever is defined in the mime-type database.
	
2000-12-13  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/file-manager/fm-properties-window.c:
	(select_image_button_callback):
	* src/nautilus-property-browser.c: (add_new_pattern):
	* src/nautilus-theme-selector.c: (add_new_theme_button_callback):

	Added calls to gtk_window_set_transient_for for file selectors

2000-12-13  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-md5-tools.c:

	Fixing improper include.

2000-12-13  J Shane Culpepper  <pepper@eazel.com>

	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-install-logic.c:
	* components/services/install/lib/eazel-install-md5.c:
	* components/services/install/lib/eazel-install-md5.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	* components/services/install/lib/eazel-inventory-utils.c:
	(add_package_info), (read_proc_info), (add_info), (add_io_info),
	(add_hardware_info), (eazel_create_configuration_metafile),
	(str_has_prefix):
	* components/services/install/lib/eazel-inventory-utils.h:
	* components/services/trilobite/libtrilobite/Makefile.am:
	* components/services/trilobite/libtrilobite/trilobite-inventory-ut
	ils.c:
	* components/services/trilobite/libtrilobite/trilobite-inventory-ut
	ils.h:
	* components/services/trilobite/libtrilobite/trilobite-md5-tools.c:
	(_byte_reverse), (md5_init), (md5_update), (md5_final),
	(md5_transform), (md5_get_digest), (md5_get_digest_from_file),
	(md5_get_digest_from_md5_string), (md5_get_string_from_md5_digest),
	(main):
	* components/services/trilobite/libtrilobite/trilobite-md5-tools.h:

	More inventory gymnastics.  Moving the md5 utils to libtrilobite where
	they belong and moving the rpm specific inventory code into libeps.
	Still not hooked up to the build until I remove the hardcoded rpm
	stuff.
	

2000-12-13  Darin Adler  <darin@eazel.com>

	reviewed by: Rebecca Shulman <rebecka@eazel.com>

	Fixed bug 2155 (type-selected icon is not successfully scrolled
	into view). The code was using the wrong coordinate system.
	
	* libnautilus-extensions/nautilus-icon-container.c: (reveal_icon):
	Do the icon revealing with the
	nautilus_gnome_canvas_item_get_current_canvas_bounds instead of
	icon_get_bounding_box. The old code used item coordinates instead
	of canvas coordinates.
	(match_best_name): Added (guchar) casts to make tolower work
	right, since it takes int parameters, not char.
	(select_matching_name): Added (guchar) casts to make tolower work
	right, since it takes int parameters, not char.
	(undo_stretching): Broke out this function -- work was in-line in
	key_press_event before.
	(handle_typeahead): Renamed, added (guchar) casts to make isprint
	work right, since it takes int parameters, not char.
	(key_press_event): Use undo_stretching helper function.
	(nautilus_icon_container_set_label_font_for_zoom_level): Remove
	redundant NULL check.
	(nautilus_icon_container_set_smooth_label_font): Ref new
	font before unref'ing the old one in case they are the same.
	(nautilus_icon_container_set_single_click_mode) Remove redundant
	NULL check.
	(nautilus_icon_container_get_is_fixed_size): Remove redundant
	NULL check.
	(nautilus_icon_container_set_is_fixed_size): Remove redundant
	NULL check.
	(check_compute_stretch), (nautilus_self_check_icon_container):
	Renamed.

	* libnautilus-extensions/nautilus-string.c:
	(nautilus_istr_has_prefix), (nautilus_istr_has_suffix),
	(nautilus_str_capitalize): Added (guchar) casts to make tolower
	and toupper work right, since it they take int parameters, not
	char. Removed unnecessary checks of isupper before calling tolower
	and islower before calling toupper. We did the research a while
	back and discovered that broken platforms like that where toupper
	can munge non-lower-case-letter characters don't really exist in
	practice any more.

	* libnautilus-extensions/nautilus-file.c: (update_link),
	(update_info_internal): Added FIXMEs to remind me to come back
	here when I go fix bug 2044.
	
	* libnautilus-extensions/nautilus-gnome-extensions.c:
	(nautilus_gnome_canvas_draw_pixbuf_helper),
	(nautilus_gnome_canvas_draw_pixbuf_helper_alpha): Tweak
	formatting.

2000-12-13  Martin Norbck  <d95mback@dtek.chalmers.se>

	reviewed by: Darin Adler <darin@eazel.com>

	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize):
	
	Added localisation of the clist titles.
	
2000-12-13  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com> (the patch;
	Eli reviewed the wording change since he spotted the
	problem)
	
	Fixed bug 3378 ("inadequate permissions" message when the
	permissions were in fact adequate)

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_denies_access_permission):
	Check for supplemental group permissions also. Thanks to
	Martin Norback <d95mback@dtek.chalmers.se> for submitting
	this patch.

	* src/nautilus-shell-ui.xml: Reworded the tip for the
	"Backgrounds and Emblems" menu item to not mention the
	phrase "Property Browser"

2000-12-13  Robey Pointer  <robey@eazel.com>

	* nautilus.spec.in:

	Fix some of the RPM descriptions and summaries so they're not
	quite so wrong or vague.

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize):

	Don't try to open a user-specific rpmdb in slim mode.
	
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_load_implementation):
	* components/services/install/lib/eazel-package-system.h:

	Allow direct linking with a package system in slim mode (so that
	the bootstrap installer can be built linked statically against the
	rpm3 package system).
	
	* components/services/install/lib/makefile.staticlib.in:

	Include different parts of the package system in the slim
	version.  Eventually we're going to have to make this a little
	more flexible to allow for building an rpm3 vs. rpm4 slim library.
	
	* nautilus-installer/src/Makefile.am:
	* nautilus-installer/src/gtk-hackery.c:
	* nautilus-installer/src/package-tree.c:
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/installer.c: (create_install_page),
	(add_bullet_point_to_vbox), (jump_to_error_page),
	(insert_info_page), (create_finish_page_good), (create_window),
	(eazel_install_preflight), (eazel_installer_add_category),
	(more_check_system), (draw_splash_text), (find_old_tmpdir),
	(eazel_installer_initialize):
	* nautilus-installer/src/link.sh:
	
	Move all GTK hackery into its own file (there are getting to be a
	lot of these, sadly).  Fix the installer to use the new package
	system for now, though it will need to continue to change.  Add a
	new page for customizing the package tree, and temporarily make it
	mandatory.

2000-12-13  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	* src/nautilus-profiler.c (dump_dialog_new): Replace call to the
	obsolete `nautilus_gtk_extensions_set_up_close_accelerator' with a
	call to `nautilus_gtk_window_set_up_close_accelerator', so the
	profile build works.

2000-12-13  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar-title.c:
	(nautilus_sidebar_title_background_is_default),
	(nautilus_sidebar_title_select_text_color):
	gave Arlo the ability to control the sidebar text color for his new
	sidebar by specifying the colors in the theme file.
	* icons/eazel/eazel.xml:
	specified the sidebar title text colors for the eazel theme
	
	* src/nautilus-theme-selector.c: (make_theme_description):
	fixed memory leak.
	
2000-12-13  Josh Barrow  <josh@eazel.com>

	* icons/eazel/eazel.xml:
	Make it actually use them again.  A bit ago, Arlo (without a 
	ChangeLog entry) checked in his new tabs, and accedently 
	checked in the old eazel.xml file.

2000-12-13  Josh Barrow  <josh@eazel.com>

	reviewed by: <mjs@eazel.com>

	* nautilus.spec.in:

	Update for Eazel theme sidebar pieces

2000-12-12  Pavel Cisler <pavel@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>
 
	* libnautilus-extensions/nautilus-gdk-extensions.c:
	(nautilus_gdk_window_bring_to_front):
	Fix 5153: Make the call also handle showing iconified
	windows.
	
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_window_present):
	Remove a FIXME.

2000-12-13  Josh Barrow  <josh@eazel.com>

	* icons/eazel/sidebar_tab_pieces/.cvsignore:
	 
	Make it be nick when you update.

2000-12-13  Josh Barrow  <josh@eazel.com>

	* configure.in:
	* icons/eazel/Makefile.am:
	* icons/eazel/sidebar_tab_pieces/Makefile.am:

	Make everything work nicely.  

2000-12-12  Arlo Rose  <arlo@eazel.com>

	* icons/eazel/eazel.xml:
	* icons/eazel/sidebar_tab_pieces/Makefile.am:
	* icons/eazel/sidebar_tab_pieces/middle-normal-normal.png:
	* icons/eazel/sidebar_tab_pieces/middle-normal-prelight.png:
	* icons/eazel/sidebar_tab_pieces/fill-active-prelight.png:
	* icons/eazel/sidebar_tab_pieces/middle-prelight-normal.png:
	* icons/eazel/sidebar_tab_pieces/fill-active.png:
	* icons/eazel/sidebar_tab_pieces/right-bumper-prelight.png:
	* icons/eazel/sidebar_tab_pieces/fill-empty-space.png:
	* icons/eazel/sidebar_tab_pieces/right-bumper.png:
	* icons/eazel/sidebar_tab_pieces/fill-prelight.png:
	* icons/eazel/sidebar_tab_pieces/right-empty-space.png:
	* icons/eazel/sidebar_tab_pieces/fill.png:
	* icons/eazel/sidebar_tab_pieces/right-top-active-prelight.png:
	* icons/eazel/sidebar_tab_pieces/left-bumper-active-prelight.png:
	* icons/eazel/sidebar_tab_pieces/right-top-active.png:
	* icons/eazel/sidebar_tab_pieces/left-bumper-active.png:
	* icons/eazel/sidebar_tab_pieces/right-top-prelight.png:
	* icons/eazel/sidebar_tab_pieces/left-bumper-prelight.png:
	* icons/eazel/sidebar_tab_pieces/right-top.png:
	* icons/eazel/sidebar_tab_pieces/left-bumper.png:
	Added pieces for the Eazel sidebar tabs.

2000-12-12  Eskil Olsen  <eskil@eazel.com>

	reviewed by: My imaginary friend Oskar.

	* components/services/install/lib/eazel-package-system-rpm3-private
	.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_create_dbs),
	(rpm_packagedata_fill_from_file),
	(eazel_package_system_rpm3_query_impl),
	(eazel_package_system_rpm3_query_substr),
	(eazel_package_system_rpm3_query),
	(eazel_package_system_rpm3_initialize),
	(eazel_package_system_rpm3_new):

	GtkObject is soo lame, whoever likes this, should surely be struck
	down with OO book.
	
	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_rpm4_query_impl),
	(eazel_package_system_rpm4_query_foreach),
	(eazel_package_system_rpm4_new):
	Implemented more rpm4 query stuff.

2000-12-12  Gene Z. Ragan  <gzr@eazel.com>

	Fixed silly bug involving the new Sound Busy dialog.
	It now uses the proper routines to check the status of the
	sound hardware.
	
	* components/music/mpg123.c: (mpg123_stop), (mpg123_seek):
	* components/music/nautilus-music-view.c: (play_current_file),
	(go_to_next_track), (go_to_previous_track):

2000-12-12 Arlo Rose <arlo@eazel.com>

	* icons/eazel/eazel.xml:
	* icons/eazel/side_bar_image.png:
	* icons/eazel/MakeFile.am:
	Added new sidebar background to Eazel theme.
	Tab will show up later.

	* icons/text-selection-frame.png:
	Fixed corner radius in the selection.
	The incorrect radius was due to a change in the way 
	the image was being rendered.

2000-12-12  Pavel Cisler <pavel@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed 4954 Nautilus crashes attempting to empty a .Trash
	containing undeletable files
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(build_error_string), (handle_xfer_vfs_error)
	Reworked the error message building logic. Split up
	the routine into a part that decides what the interesting
	input for building the error message is and a part that
	actually builds the error message. Fixed a number
	of cases where a wrong error message would be used. The
	actual bug in the bug report was one of the cases -- an assert
	catching a case that was not handled properly.
	
	Fixed:
	part of -- 638 When a new volume gets mounted, integrate its Trash
	directory.
	part of -- 4143 Files dragged to trash icon on desktop seem to
	vanish,
	part of -- 4963 Files dragged to Trash from floppy don't appear
	in Trash,

	* libnautilus-extensions/nautilus-trash-monitor.c:
	* libnautilus-extensions/nautilus-trash-monitor.h:
	(add_one_volume_trash),
	(nautilus_trash_monitor_get_trash_directories):
	Added a new call that returns a list of all the Trash directories
	on all the mouted volumes.  

	* libnautilus-extensions/nautilus-trash-directory.c: (add_volume):	
	Got rid of get_volume_vfs_uri_if_writable.
	Used the new nautilus_volume_monitor_should_integrate_trash instead
	to pick the volumes that can support trash.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_should_integrate_trash),
	(nautilus_volume_monitor_get_volume_mount_uri):
	* libnautilus-extensions/nautilus-volume-monitor.h:
	Add new helper calls used by the routine that collects all the
	trash uris from all mouted volumes.	
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(do_empty_trash):
	Pass in a list of Trash directories instead of just the
	single trash in the user's home directory. 

	Fixed:
	2443 Trash is only found on EXT2 volumes
	2444 Trash on read-only volumes is not displayed
	remaining part of -- 4143 Files dragged to trash icon on desktop
	seem to vanish,
	remaining part of -- 4963 Files dragged to Trash from floppy
	don't appear in Trash,

	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_should_integrate_trash):
	Removed the old logic from get_volume_vfs_uri_if_writable
	that only displayed trash from writable ext2 volumes.
	Enumerated all the file system types that we know can
	support trash.
	
2000-12-12  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-package-system-private.h:
	* components/services/install/lib/eazel-package-system-rpm3-private
	.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(rpm_packagedata_fill_from_rpm_header),
	(rpm_packagedata_fill_from_file), (rpm_packagedata_new_from_file),
	(eazel_package_system_rpm3_load_package),
	(eazel_package_system_rpm3_query_impl),
	(eazel_package_system_rpm3_query_substr),
	(eazel_package_system_rpm3_query_requires),
	(eazel_package_system_rpm3_query):
	* components/services/install/lib/eazel-package-system-skeleton.c:
	(eazel_package_system_skeleton_query):
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_new):
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_load_package), (eazel_package_system_query):
	* components/services/install/lib/eazel-package-system.h:
	unsigned long to int replacement on various types.

2000-12-12  Arik Devens  <arik@gnome.org>

	reviewed by: Darin Adler  <darin@eazel.com>
	
	Fixed bug 5047 ("Using spaces in the location bar label for
	alignment is fragile and not necessarily internationalizable") by
	adding code to usize and align the label widget to be both the
	right size and proper alignment no matter what language we are in.
	
	* src/nautilus-location-bar.c: Added #defines for Location: and Go
	To: so they only need to be translated once.
	(style_set_handler): New function to set the label's usize to the
	larger of the two strings plus padding so that it doesn't resize.
	(nautilus_location_bar_initialize): Added gtk_misc_set_alignment
	to the label widget (probably don't need it but it can't hurt) and
	also hooked up the style_set_handler to the label widget.
	(nautilus_location_bar_update_label): Removed comments about
	fixing bug 5047.

2000-12-12  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 1948 ("Open in New Window" menu item reuses existing
	window if it exists) by separating the explicit "open in new
	window" feature (always gives a new window) from the "open all
	items in new windows" preference (reuses window if one with the
	right location already exists).

	* libnautilus/nautilus-view-component.idl: Added new
	open_location_prefer_existing_window call. Renamed open_location
	to open_location_in_this_window and open_location_in_new_window to
	open_location_force_new_window for clarity.
	
	* libnautilus/nautilus-view.h:
	* libnautilus/nautilus-view.c:
	(nautilus_view_open_location_in_this_window),
	(nautilus_view_open_location_prefer_existing_window),
	(nautilus_view_open_location_force_new_window):
	* src/nautilus-view-frame-corba.c:
	(impl_Nautilus_ViewFrame_open_location_in_this_window),
	(impl_Nautilus_ViewFrame_open_location_prefer_existing_window),
	(impl_Nautilus_ViewFrame_open_location_force_new_window):
	* src/nautilus-view-frame-private.h:
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_initialize_class),
	(nautilus_view_frame_open_location_in_this_window),
	(nautilus_view_frame_open_location_prefer_existing_window),
	(nautilus_view_frame_open_location_force_new_window):
	* src/nautilus-view-frame.h:
	Add new call, rename old ones.
	
	* src/file-manager/fm-directory-view.c: (open_callback): Pass parameter
	to tell the open code to respect the "use new windows" preference.
	(open_location): Take new WindowChoice parameter to respect preference
	as appropriate.
	(switch_location_and_view): Tell the code to respect the preference in
	this case (opening from Open With).
	(show_trash_callback): Use code that respects the preference instead of
	always opening in this case.
	(open_one_in_new_window): Always force a new window (used by Open
	in New Window command).
	(activate_callback): Pass through new WindowChoice instead of boolean.
	(fm_directory_view_activate_file): Pass through new WindowChoice
	instead of boolean.,
	(fm_directory_view_activate_files): Respect the user preference if
	opening only one file, do the "use existing window or make new one"
	mode if opening more than one.
	
	* src/nautilus-window-manage-views.c: (handle_unreadable_location):
	Move check for empty location string in here.
	(open_location): Moved the code for reusing existing windows out
	of here. Also changed code structure to avoid redoing the
	handle_unreadable_location check.
	(open_location_in_this_window_callback): Renamed.
	(open_location_prefer_existing_window_callback): Here's where
	the code for reusing existing windows went. New callback for the
	new call/signal.
	(open_location_force_new_window_callback): Renamed.
	
	* src/file-manager/fm-search-list-view.c:
	(reveal_selected_items_callback): Change to use
	nautilus_view_open_location_force_new_window by its new name.
	
	* src/nautilus-window-manage-views.h: Got rid of
	nautilus_window_open_location_in_new_window, which was public and
	unused.

	* components/adapter/nautilus-adapter.c:
	(nautilus_adapter_open_location_callback):
	* components/help/hyperbola-nav-index.c:
	(hyperbola_navigation_index_select_row):
	* components/help/hyperbola-nav-search.c:
	(hyperbola_navigation_search_select_row):
	* components/help/hyperbola-nav-tree.c:
	(hyperbola_navigation_tree_select_row):
	* components/history/nautilus-history-view.c:
	(history_button_release):
	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_open_uri_callback), (mozilla_dom_mouse_click_callback):
	* components/rpmview/nautilus-rpm-view.c: (go_to_button_callback):
	* components/services/login/nautilus-view/nautilus-change-password-view.c:
	(run_away_timer), (authn_failed), (maintenance_button_cb):
	* components/services/summary/nautilus-view/nautilus-summary-callbacks.c:
	(logged_in_callback), (logged_out_callback),
	(preferences_button_cb), (forgot_password_button_cb),
	(register_button_cb):
	* components/services/summary/nautilus-view/nautilus-summary-dialogs.c:
	(error_dialog_cancel_cb):
	* components/services/summary/nautilus-view/nautilus-summary-footer.c:
	(footer_item_clicked_callback):
	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	(goto_service_cb), (goto_update_cb):
	* components/text/nautilus-text-view.c: (handle_service_menu_item):
	* components/tree/nautilus-tree-view.c: (tree_select_row_callback):
	Change to use new nautilus_view_open_location_in_this_window
	name. It's better because it's more explicit, but also, it's the
	new name!
	
	* libnautilus-extensions/nautilus-gdk-extensions.c:
	(nautilus_gdk_window_bring_to_front): Fixed indentation.
	
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_window_present): Put in a new implementation that
	uses nautilus_gdk_window_bring_to_front instead of the old one
	that did a hide followed by a show. Corrected an assert that
	should have been a return_if_fail.
	
2000-12-12  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 2327 (Alt-key combinations to show menus work on
	Desktop, but shouldn't)

	Had to abandon the old-Bonobo approach for this and make a
	new-Bonobo approach.

	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	Redefine all top-level menus' labels to be "" so there won't
	be any underline accelerator
	
	* src/nautilus-desktop-window.c: (nautilus_desktop_window_new):
	* src/nautilus-window-menus.c: 
	(remove_underline_accelerator_from_menu_title),
	(nautilus_window_disable_keyboard_navigation_for_menus):
	* src/nautilus-window.h: Remove the old now-useless trick to
	do this.

2000-12-12  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4145, Music view fails if sound device in use
	Fixed bug, 4903, slider state bleeds between music views
	
	Changed the way that the view stects availability of sound
	hardware.  We now use a more just in time approach. If the
	sound hardware is unavailable, a dialog is displayed with
	a warning and some info about the problem. The downside
	to this is that the controls always appear active.  I think
	this is a good tradeoff. It avoids having the controls inactive
	when the sound hardware is available, as in the case of bug
	4145.
	
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize), (get_song_text),
	(play_current_file), (add_play_controls):

2000-12-12  Michael Engber  <engber@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* src/nautilus-window-menus.c:
	(nautilus_window_bookmarks_preference_changed_callback),
	(nautilus_window_initialize_bookmarks_menu):
	* src/nautilus-window-private.h:
	* src/nautilus-window.c: (nautilus_window_destroy):
	Added a preference remove callback - which fixes bug 5147.

2000-12-12  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed a couple of places that were causing zillions of failed 
	assertions about hash tables on boot.
	
	* libnautilus-extensions/nautilus-directory-metafile.c:
	(create_metafile_root): Use nautilus_directory_set_metafile_contents
	instead of setting field directly.
	(get_file_node): Don't futz with hashtable if its NULL.

2000-12-12  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	While investigating bug 5147, which I couldn't reproduce, I found
	and fixed a crashing bug with similar steps.

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_destroy): remove preferences callback for
	home_uri_changed, so we won't crash trying to execute it after the
	desktop view has been destroyed.

	Fixed bug 4226 (Non-standard text field auto-selection behavior
	wreaks havoc with finely tuned middle-click paste feature)

	The problem here was that I had done some automatic selection 
	changing on focus-in and focus-out a long time ago in an attempt
	to make the behavior more usable for real copy/paste and tabbing.
	Unfortunately my attempt to improve the default behavior ran afoul
	of the hellish X middle-click-to-paste-selected-text feature that
	is a staple of every poor X window user's life. For now, I just took
	out my non-standard behaviors as they aren't clearly an overall
	improvement and I hadn't even tried to deploy them across Nautilus,
	much less across GTK.
	
	* src/file-manager/fm-properties-window.c: 
	(name_field_focus_in): Removed this function, which used to select
	all the text in the field.
	(name_field_focus_out): No longer deselects contents.
	(create_basic_page): Don't connect to focus-in signal.
	
	* src/nautilus-bookmarks-window.c:
	(on_text_field_focus_in_event): Removed this function, which used to
	select all the text in the field.
	(on_text_field_focus_out_event): No longer deselects contents.
	(create_bookmarks_window): Don't connect to focus-in signal.

2000-12-12  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-factory.c: (cache_icon_new),
	(load_icon_for_scaling), (scale_icon), (get_icon_from_cache),
	(nautilus_icon_factory_get_pixbuf_for_icon),
	(nautilus_icon_factory_get_pixbuf_for_file):

	fixed bug 4212, emblem doesn't show up when the image is a JPEG
	file, by adding ".jpg" to extensions checked in the icon factory.
	
	Fixed bug 3208, generic icon shows up for deleted emblems, by adding
	a "wants_default" parameter to the icon factory get_pixbuf_for_icon
	call.  If "wants_default" is false, it returns NULL instead of the
	generic icon.  Emblem callers pass FALSE so they don't get pixmaps
	for deleted emblems.
	
	* libnautilus-extensions/nautilus-bookmark.c:
	(nautilus_bookmark_get_pixbuf):
	added boolean parameter to get_pixbuf_for_icon call
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_update_icon):
	added boolean parameter to get_pixbuf_for_icon call
	* libnautilus-extensions/nautilus-icon-factory.h:
	added "wants_default" boolean to get_pixbuf_for_icon definition
	* src/file-manager/fm-list-view.c:
	(fm_list_view_get_emblem_pixbufs_for_file):
	added boolean parameter to get_pixbuf_for_icon call
	* src/file-manager/fm-properties-window.c:
	(create_image_widget_for_emblem):
	added boolean parameter to get_pixbuf_for_icon call
	* src/nautilus-sidebar-title.c: (update_emblems):
	added boolean parameter to get_pixbuf_for_icon call
	
2000-12-12  Darin Adler  <darin@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 650 (moving a large number of files is extremely slow)
	by using a hash table to find metafile nodes given a file name.
	Fixed bug 3410 (sorting not locale-sensitive) by making
	nautilus_strcoll suitable for wider use and using it a lot more.

	* libnautilus-extensions/nautilus-directory-private.h: Add a
	new hash table for locating metafile nodes by file name.
	
	* libnautilus-extensions/nautilus-directory-metafile.h: Add
	nautilus_directory_set_metafile_contents call so the metafile
	code will have a crack at the metafile contents right when
	they are first read in.
	
	* libnautilus-extensions/nautilus-directory-metafile.c:
	(get_file_node): Locate the file node using the hash table,
	and create a hash table entry when making a new file node.
	(destroy_xml_string_key), (nautilus_directory_metafile_destroy):
	Destroy the hash table when the directory is destroyed.
	(nautilus_directory_rename_file_metadata): Remove the old hash
	table entry and make a new one when the node's name is changed.
	(nautilus_directory_set_metafile_contents): Create the hash
	table and populate it when the metafile is read in.
	
	* libnautilus-extensions/nautilus-string.h:
	* libnautilus-extensions/nautilus-string.c: (nautilus_strcoll):
	Treat a locale that can't be fetched by setlocale the same as
	locale "C" and "POSIX", fall back on strcmp if strcoll says two
	strings are equal, so that only identical strings get a 0.
	(nautilus_strcmp_compare_func): New name for nautilus_str_compare.
	(nautilus_strcoll_compare_func): New function.
	(nautilus_strcasecmp_compare_func): New name for nautilus_istr_compare.
	
	* libnautilus-extensions/nautilus-glib-extensions.h:
	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_str_list_copy): Removed an unnecessary check for NULL.
	(nautilus_g_str_list_alphabetize): Replaced the old sort calls
	with this single call. It sorts in a locale-sensitive way, using
	nautilus_strcoll.
	
	* libnautilus-extensions/nautilus-file.c: (compare_by_name),
	(compare_by_directory_name), (compare_by_emblems),
	(compare_by_type), (nautilus_file_compare_name): Use
	nautilus_strcoll instead of nautilus_strcmp_case_breaks_ties so we
	use local sorting conventions in locales other than "C" and
	"POSIX".
	(nautilus_get_user_names), (nautilus_get_group_names_including):
	(sort_keyword_list_and_remove_duplicates): Use the new
	nautilus_g_str_list_alphabetize to sort by locale-specific
	conventions.
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(compare_icons_by_name): Use nautilus_strcoll instead of
	nautilus_strcmp_case_breaks_ties so we use local sorting
	conventions in locales other than "C" and "POSIX".
	
	* src/file-manager/fm-properties-window.c: (get_property_names):
	Use the new nautilus_g_str_list_alphabetize
	* src/nautilus-window-manage-views.c: (change_selection): Use the
	new nautilus_g_str_list_alphabetize
	* src/nautilus-window.c: (load_view_as_menu_callback): Use the new
	nautilus_g_str_list_alphabetize

	* libnautilus-extensions/nautilus-directory-async.c:
	(metafile_read_done_callback),
	(nautilus_directory_set_up_request): Use nautilus_str_compare
	under its new name, nautilus_strcmp_compare_func.
	
	* components/services/install/command-line/.cvsignore: Added
	eazel-test-types, a new generated file.
	
	* libnautilus-extensions/nautilus-string-list.c:
	(nautilus_string_list_new): Use nautilus_str_compare and
	nautilus_istr_compare under their new names,
	nautilus_strcmp_compare_func and nautilus_strcasecmp_compare_func.

	* libnautilus-extensions/nautilus-xml-extensions.c:
	(nautilus_xml_get_child_by_name): Fixed indenting.
	
2000-12-12  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4901, Music view displays "()" when MP3 lacks
	Year tag
	
	* components/music/nautilus-music-view.c: (get_song_text),
	(read_id_tag):
	Don't display Year parentheses if year tad is absent or empty
	
	* components/music/mpg123.c: (mpg123_id3v1_to_id3v2):
	* components/music/mpg123.h:
	More cleanup to support ID3v2 tags. This fixes breakage
	in displaying ID3v1 track numbers.

2000-12-12  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Improve New Window performance when the tree view is enabled, to
	partially address bug 4922 (Opening new windows is really slow
	when the tree view is enabled). This affects only the New Window
	case, not the initial window. Here's some timings before and after
	on my laptop with a bunch of stuff expanded (times in seconds):

	                          First window    New window
	Tree View Off                  8              5
	w/ Tree Before My Change      16              37
	w/ Tree After My Change       16	      20

	I made this change by altering tree view semantics slightly. The
	tree view used to do a force reload any time it expanded a
	directory. Now it does a normal load the first time any given
	directory is expanded (as at startup, or when you first expand the
	node), but a force reload on subsequent collapse and
	expansion. This is more in line with the way the rest of Nautilus
	works.
	
	* components/tree/nautilus-tree-expansion-state.h,
	components/tree/nautilus-tree-expansion-state.c:
	(nautilus_tree_expansion_state_was_ever_expanded): New function to
	see if a node was ever expanded. Being initially expanded does not
	count; only being expanded through an API call to
	`nautilus_tree_expansion_state_expand_node' does.
	(nautilus_tree_expansion_state_load_foreach_callback,
	nautilus_tree_expansion_state_initialize,
	nautilus_tree_expansion_state_destroy,
	nautilus_tree_expansion_state_expand_node_internal,
	nautilus_tree_expansion_state_expand_node): Adjusted to track
	"was_ever_expanded" property right.

	* components/tree/nautilus-tree-model.h,
	components/tree/nautilus-tree-model.c
	(nautilus_tree_model_monitor_node): Add force_reload parameter.
	(nautilus_tree_model_node_begin_monitoring_no_connect): New helper
	function.
	(nautilus_tree_model_node_begin_monitoring,
	nautilus_tree_model_node_end_monitoring): Slightly adjusted helper
	functions.

	* components/tree/nautilus-tree-view.c:
	(filtering_changed_callback): Do a reload of the whole tree, but
	not a force reload.
	(expand_uri_sequence_and_select_end): Simplify logic a bit.
	(expand_node_for_file): Force reload only if this node has been
	expanded before.
	(reload_model_node, reload_model_node_recursive,
	reload_whole_tree): Make force reload an option.

2000-12-12  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fix an infinite loop problem that my last change caused:
	
	* libnautilus-extensions/nautilus-directory-async.c:
	(activation_uri_read_done): Remove setting of
	activation_uri_is_up_to_date to TRUE
	(activation_uri_done): and move it here, because this function
	gets called directly for files that are not nautilus or gmc links,
	as well as being called from activation_uri_done.

	* components/services/install/command-line/.cvsignore: Add
	eazel-softcat

2000-12-11  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/Makefile.am:
	Stupid stupid stupid mistake in the conditionals.

2000-12-11  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-directory-view.c: (activate_callback):
	fixed bug 2390, uri-activating security hole, by following
	Frank's recommendation, which is to not allow any parameters
	to the launch command, which is enforced by using execlp
	instead of system.
	
2000-12-11  Eskil Heyn Olsen  <eskil@eazel.com>

	Not reviewed, I have no buddies...
	
	* components/services/install/lib/Makefile.am:
	* configure.in:
	automake conditionals are a complete joke.

2000-12-11  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-package-system-rpm3-private
	.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(eazel_package_system_rpm3_query):
	Fixed the types, now back to automakes lack of conditionals...

2000-12-11  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/Makefile.am:
	automake conditionals are figments of your imagination.
	
	* configure.in:
	More rpmcheck voodoo, might even make this compile on rh62 agains.

2000-12-11  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fix bug 4919 (Tree view crashes when you expand and collapse the
	root node). I did this by changing the design of file attribute
	forgetting, which I implemented recently - now when you forget an
	attribute, it is merely marked out of date, not thrown away; the
	old value is still available until the fresh value is actually
	loaded. This fixes other potential UI problems with the old
	approach but I am not sure if bugs were filed for those.

	* libnautilus-extensions/nautilus-file-private.h: Added new
	is_up_to_date booleans, converted all booleans and the
	RequestStatus enum to bitfields. This saved 200-300k or so for me
	on runs of Nautilus with the tree view on and expanded a lot.

	* libnautilus-extensions/nautilus-file.h,
	libnautilus-extensions/nautilus-file.c:
	(nautilus_file_invalidate_attributes_internal,
	nautilus_file_invalidate_attributes,
	nautilus_file_invalidate_all_attributes): Renamed to match new
	semantics.
	(update_info_internal): Mark file info up to date.
	(invalidate_directory_count), (invalidate_deep_counts),
	(invalidate_mime_list), (invalidate_top_left_text),
	(invalidate_file_info), (invalidate_activation_uri): renamed from
	forget_*, and changed to only mark the attributes invalid, not
	actually throw them out.

	* libnautilus-extensions/nautilus-directory-async.c:
	(lacks_directory_count, lacks_top_left, lacks_info,
	lacks_mime_list, lacks_activation_uri): Check _is_up_to_date bit
	for relevant attribute, not got_ or _failed bits. If the info is
	out of date, we want to retry eve if we already got it or it
	already failed.
	(directory_count_callback, mime_list_callback,
	top_left_read_callback, get_info_callback,
	activation_uri_read_done): Mark corresponding attributes up to
	date.
	(dequeue_pending_idle_callback): Mark directory_count and
	mime_list up to date if appropriate.
	(file_info_start): Mark file info up to date on invalid URI error.
	(nautilus_directory_invalidate_counts): Mark directory count and
	mime list out of date, but do not forget them.

	(nautilus_directory_invalidate_file_attributes): Renamed.
	(nautilus_directory_force_reload): Deal with rename.
	(cancel_loading_attributes,
	nautilus_directory_cancel_loading_file_attributes): Replace forget
	with invalidate in some comments.

	* libnautilus-extensions/nautilus-link.c
	(forget_file_activation_uri): Handle function renames.
	* src/nautilus-window-manage-views.c
	(nautilus_window_begin_location_change): Likewise

2000-12-11  Eskil Olsen  <eskil@eazel.com>
	
	* components/services/install/lib/eazel-package-system-rpm3-private
	.h:
	* components/services/install/lib/eazel-package-system-rpm3.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(make_rpm_argument_list), (eazel_package_system_rpm3_create_dbs),
	(rpm_open_db), (eazel_package_system_rpm3_open_dbs),
	(eazel_package_system_rpm3_close_dbs),
	(eazel_package_system_rpm3_free_dbs),
	(eazel_package_system_rpm3_query_impl),
	(eazel_package_system_rpm3_query_substr),
	(eazel_package_system_rpm3_query_requires),
	(eazel_package_system_rpm3_query),
	(eazel_package_system_rpm3_finalize),
	(eazel_package_system_rpm3_initialize),
	(eazel_package_system_rpm3_new):
	Created a private part for EazelPackageSystemRpm3

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_do_rpm_dependency_check):
	Fondle the private parts of EazelPackageSystemRpm3 (eew, 
	can't wait to get rid of this code).
	
	* components/services/install/lib/eazel-package-system-rpm4.h:
	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_rpm4_query_foreach),
	(eazel_package_system_rpm4_finalize),
	(eazel_package_system_rpm4_initialize),
	(eazel_package_system_rpm4_new),
	(eazel_package_system_implementation):
	Began hacking on the missing RPM4 pieces.

2000-12-11  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4900, Nautilus doesn't support ID3 v2.x tags
	
	* components/music/mpg123.c:
	* components/music/mpg123.h:
	* components/music/nautilus-music-view.c: (read_id_tag):
	Add support for both v1 and v2 ID3 tags.

2000-12-11  Eskil Heyn Olsen  <eskil@eazel.com>

	* README:
	Blabla about rpm 4 on redhat 7.0
	
	* configure.in:	
	* nautilus.spec.in:
	configure now carves the rpm version found into the spec file as a
	requirement.

2000-12-11  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/main.c: (main):
	* src/nautilus-window-service-ui.c: (goto_online_storage),
	(goto_software_catalog):

	bugzilla.eazel.com 5035

	removed ammonite_shutdown call, ammonite_init is now resiliant
	to multiple calls and registers an atexit function.	

2000-12-11  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 3818, Sorting of album is case insensitive

	* libnautilus-extensions/nautilus-string.c:
	* libnautilus-extensions/nautilus-string.h:
	(nautilus_strcmp_case_breaks_ties), (nautilus_strcoll):
	New function that wraps strcoll. It checks the locale and if it is
	specific, uses strcoll. If the locale is generic "C" or "POSIX",
	sorting is done using nautilus_strcmp_case_breaks_ties.
	

	Fixed bug 5126, Press "Pause" and "Play", music view returns
	to start of track.

	* components/music/nautilus-music-view.c: (selection_callback),
	(value_changed_callback), (sort_by_title), (sort_by_artist),
	(sort_by_year), (play_button_callback), (pause_button_callback),
	(get_player_state):
	Some state machine logic cleanup to fix bug 5216.

2000-12-11  John Sullivan  <sullivan@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 4820 (default Nautilus window too narrow; web
	pages look bad)

	* src/nautilus-window-private.h: Changed
	NAUTILUS_WINDOW_DEFAULT_WIDTH from 700 to 800. Read the
	bug report for some of the rationale discussion.

2000-12-11  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_set_image_placement_no_emit),
	(nautilus_background_set_image_placement),
	(nautilus_background_receive_dropped_background_image):
	* libnautilus-extensions/nautilus-directory-background.c:
	(nautilus_file_background_get_default_settings),
	(nautilus_file_background_write_desktop_settings):
	Fixed dragging a new background image onto the dekstop
	so that it; writes out the new color (white) instead of
	leaving the old, wrong, color setting; sets the image
	placement to tiled, since all Nautilus images are
	currently meant to be tiled. Bugs 3477 & 3022.

2000-12-11  Eskil Heyn Olsen  <eskil@eazel.com>

	reviewed by: A donkey with a rather large shrubbery

	* components/rpmview/Makefile.am:
	* components/rpmview/nautilus-rpm-verify-window.c:
	(nautilus_rpm_verify_window_update_message):
	* components/services/install/command-line/Makefile.am:
	* components/services/install/command-line/eazel-test-packsys.c:
	(main):
	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(rpm_create_db), (eazel_package_system_rpm3_query):
	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_rpm4_finalize),
	(eazel_package_system_rpm4_new):
	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_list_prune):
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_load_implementation):
	* components/services/install/nautilus-view/Makefile.am:
	* components/services/install/server/Makefile.am:
	Muy untested RedHat 7.0/RPM4 related stuff. Let's watcht the build
	blow up.
	
	* acconfig.h:
	HAVE_RPM_x0 for different rpm.s
	
	* configure.in:
	More weird rpm checks
	
	* nautilus.spec.in
	No more libeazelsoftcat

2000-12-11  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 5112 (Segfault on startup using non C locale). The error
	was caused by localized text making it through bonobo to
	gnome-xml, which only happened because we were using an incorrect
	attribute name.

	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	* libnautilus-extensions/nautilus-bonobo-extensions.h:
	Removed nautilus_bonobo_set_description because there is no
	attribute named "description" any more. It's now "tip".
	
	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Use set_tip instead of set_description.

	Another cut at the placeholder changes. I caught one problem and
	John caught some others when he reviewed my last check-in.
	
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/file-manager/nautilus-icon-view-ui.xml:
	* src/nautilus-service-ui.xml:
	Removed some "delimit" and added others. Only the file that
	actually defines a placeholder should use a delimit, and you must
	always use a delimit when defining the placeholder.

2000-12-11  J Shane Culpepper  <pepper@eazel.com>

	reviewed by: <eskil@eazel.com>

	* components/services/install/lib/Makefile.am:

	Minor Makefile fix for Eskil.

2000-12-11  Darin Adler  <darin@eazel.com>

	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/file-manager/nautilus-icon-view-ui.xml:
	* src/nautilus-service-ui.xml:
	* src/nautilus-shell-ui.xml:
	Changed all placeholders that are not supposed to be "transparent"
	to use an explict 'delimit="none"' to make it clear to the bonobo
	merging code that they are not transparent. This subtle rule about
	the 2 different kinds of placeholder resulted in a number of bugs
	that were then "fixed" by a Bonobo change that was then rolled out.

2000-12-11  John Sullivan  <sullivan@eazel.com>

	* icons/arlo/arlo.xml: I broke the Arlo theme with my earlier
	checkin by changing references to ./backgrounds to ./patterns;
	this changes them back. ./backgrounds is a directory inside the
	Arlo theme folder, whose name has not been changed.

2000-12-11  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3767, Click through MP3s, multiple MP3s often selected
	Fixed bug 2263, Scroll in music view, text redrawn on top
	of self
	
	Both of these bugs are caused by a bug in GtkCList.  There
	is a case where the gcs are set to invalid. I work around
	this by queueing redraws when a new item is selected and
	when the adjustment is changed during scrolling.
	
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize), (selection_callback),
	(value_changed_callback):

2000-12-11  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Terminology change -- the window & menu item formerly known
	as "Customization" are now known as "Backgrounds and Emblems";
	the swatches of image formerly known as "backgrounds" are
	now known as "patterns".

	After 1.0 if this window acquires more varied content we will
	have to redo the menu item & window label, though we will
	continue to distinguish between "backgrounds" and "patterns", 
	since "backgrounds" encompasses colors as well as images.

	Note that this change will only appear in full (and your
	"Backgrounds and Emblems" window work in full) after you've
	deleted your ~/.nautilus directory and let Nautilus make you
	a new one.

	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(file_opened_callback): Set vfs_handle to NULL on failure.
	(load_done): Don't try to close pixbuf loader if it's NULL.
	These two bugs were flushed out by a temporary state on my
	machine where the theme was using a non-existent file for
	its background image.

	* data/backgrounds/Makefile.am: removed this file, as well as
	all the image files in this directory.

	* data/patterns/.cvsignore:
	* data/patterns/Makefile.am: New files, copied from data/backgrounds.
	Also copied over all image files from data/backgrounds, which is now
	obsolete.
	
	* data/Makefile.am: Changed "backgrounds" subdir to "patterns"

	* configure.in: changed data/backgrounds/Makefile to
	data/patterns/Makefile
	
	* nautilus.spec.in: Changed regular expressions with "backgrounds"
	to use "patterns"

	* data/browser.xml: Changed "background" to "pattern" in the
	terminology in this file, which gets installed into ~/.nautilus.
	You have to remove your ~/.nautilus to get a fresh one of these;
	without doing so the "Backgrounds and Emblems" window will be
	confused (won't crash, will use wrong terminology and sometimes
	have blank content).

	* icons/ardmore/ardmore.xml:
	* icons/arlo/arlo.xml:
	* icons/default.xml:
	* icons/eazel/eazel.xml:
	* icons/gnome/gnome.xml:
	* icons/vector/vector.xml:
	* icons/villanova/villanova.xml: Changed "backgrounds" directory
	references to "patterns"
	
	* libnautilus-extensions/nautilus-customization-data.h:
	* libnautilus-extensions/nautilus-customization-data.c:
	(nautilus_customization_data_new),
	(nautilus_customization_data_get_next_element_for_display),
	(nautilus_customization_data_destroy),
	(nautilus_customization_make_pattern_chit): Change "background" to
	"pattern" in many places, including one public function name.

	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize),
	(nautilus_property_browser_drag_data_get), (make_drag_image),
	(make_color_drag_image), (remove_pattern), (remove_emblem),
	(nautilus_property_browser_remove_element),
	(add_pattern_to_browser), (add_new_pattern),
	(add_new_button_callback), (element_clicked_callback),
	(make_properties_from_directories), (add_reset_property),
	(nautilus_property_browser_update_contents),
	(nautilus_property_browser_set_category): Change "background" to
	"pattern" in many places. Also change window title from
	"Customization Options" to "Backgrounds and Emblems".
	
	* src/nautilus-shell-ui.xml: Change "Customization..." to 
	"Backgrounds and Emblems...".
	
	* test/test-nautilus-background.c: (main):
	* test/test-nautilus-font.c: (create_named_background):
	* test/test-nautilus-label.c:
	(widget_set_nautilus_background_image): Changed test code that was
	using sample images from backgrounds directory to look in patterns
	directory instead.

2000-12-11  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2242, fstat /etc/mtab to check if needs
	to reread (for speed)
	
	I now use a read of /proc/mounts. This is not only faster, but
	it avoids a read to disk thus saving power for portable users.
	
	* libnautilus-extensions/nautilus-volume-monitor.c: (find_volumes):

2000-12-11  Ramiro Estrugo  <ramiro@eazel.com>

	* README:
	Move us to use gconf from a stable branch (gconf-1-0).
	
2000-12-10  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/rpmview/Makefile.am:
	* components/rpmview/nautilus-rpm-verify-window.c:
	(nautilus_rpm_verify_window_initialize),
	(nautilus_rpm_verify_window_set_message),
	(nautilus_rpm_verify_window_update_message),
	(nautilus_rpm_verify_window_set_progress),
	(nautilus_rpm_verify_window_set_error_mode):
	* components/rpmview/nautilus-rpm-verify-window.h:
	* components/rpmview/nautilus-rpm-view-install.c:
	(nautilus_rpm_view_install_package_callback),
	(nautilus_rpm_view_uninstall_package_callback):
	* components/rpmview/nautilus-rpm-view-private.h:
	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_initialize), (nautilus_rpm_view_destroy),
	(add_to_clist), (nautilus_rpm_view_update_from_uri),
	(verify_failed_signal), (verify_progress_signal),
	(nautilus_rpm_view_verify_files),
	(nautilus_rpm_view_verify_package_callback):
	Fixed bug 5119, update rpmview to use EazelPackageSystem. I 
	still need to hook up the continue signal from the verifywindow,
	this is opened as bug 5123.
	
	* components/services/install/command-line/Makefile.am:
	* components/services/install/command-line/eazel-alt-install-corba.
	c:
	include eazel-package-system-types instead of
	eazel-install-types.h
	
	* components/services/install/command-line/eazel-test-packsys.c:
	(progress_signal), (failed_signal), (test_verify), (main):
	Implemented the test for verfiy.
	
	* components/services/install/lib/Makefile.am:
	Mangled to fix 5121.
	
	* components/services/install/lib/eazel-softcat.h:
	* components/services/install/lib/eazel-install-tests.h:
	* components/services/install/lib/eazel-install-xml-package-list.h:
	* components/services/install/lib/eazel-install-protocols.h:
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-query.h:
	* components/services/install/lib/eazel-install-logic.h:
	* components/services/install/lib/eazel-install-metadata.h:
	* components/services/install/lib/eazel-install-object.c:
	* components/services/install/lib/eazel-install-problem.h:
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba-types.h:
	include eazel-package-system-types instead of
	eazel-install-types.h

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_download_packages),
	(eazel_install_check_for_file_conflicts),
	(eazel_install_start_signal), (eazel_install_end_signal),
	(eazel_install_progress_signal),
	(eazel_install_check_existing_packages),
	(eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse),
	(eazel_uninstall_check_for_install):
	Fixed signals and use FILL_NO_DIRS_IN_PROVIDES

	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_fetch_remote_file), (eazel_install_fetch_package):
	Use FILL_NO_DIRS_IN_PROVIDES
	
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_do_rpm_dependency_check):
	include eazel-package-system-types instead of
	eazel-install-types.h
	Also open/close the db when doing the rpmdepCheck call.
	
	* components/services/install/lib/eazel-install-types.c:
	* components/services/install/lib/eazel-install-types.h:
	Removed
	
	* components/services/install/lib/eazel-package-system.h:
	* components/services/install/lib/eazel-package-system-private.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_load_implementation),
	(eazel_package_system_verify),
	(eazel_package_system_emit_progress):
	* components/services/install/lib/eazel-package-system-rpm3-private
	.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(monitor_rpm_process_pipe), (eazel_package_system_rpm3_create_dbs),
	(eazel_package_system_rpm3_open_dbs),
	(eazel_package_system_rpm3_close_dbs),
	(eazel_package_system_rpm3_free_dbs),
	(rpm_packagedata_fill_from_rpm_header),
	(rpm_packagedata_fill_from_file), (rpm_packagedata_new_from_file),
	(eazel_package_system_rpm3_load_package),
	(eazel_package_system_rpm3_query_impl),
	(eazel_package_system_rpm3_query_substr),
	(eazel_package_system_rpm3_query), (check_if_all_packages_seen),
	(eazel_package_system_rpm3_install_uninstall),
	(eazel_package_system_rpm3_verify_impl),
	(get_num_of_files_in_packages), (eazel_package_system_rpm3_verify),
	(eazel_package_system_rpm3_finalize),
	(eazel_package_system_rpm3_new),
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-rpm4.c:
	(eazel_package_system_rpm4_query),
	(eazel_package_system_rpm4_finalize),
	(eazel_package_system_rpm4_class_initialize),
	(eazel_package_system_rpm4_initialize),
	(eazel_package_system_rpm4_get_type),
	(eazel_package_system_rpm4_new),
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-rpm4.h:
	* components/services/install/lib/eazel-package-system-skeleton.c:
	(eazel_package_system_skeleton_verify):
	Shuffled the order of the info longs and the package in the
	progress signal. 
	Implemented verify in rpm3 (fixes bug 5120)
	First pieces of code for the rpm4 module.
	Unfortunately, since rpmview now also has a eazelpackagesystem
	object, I ran into the problem of database locking. The rpmview
	would have a read-only version of all the db files, thereby
	failing in install because trilobite-eazel-install-service spawned
	a rpm that could not get exclusive lock. To fix this, I now have
	the db closed at all times, but open/close it everytime I do
	something. Unfortunately for the queryloops in
	eazel-install-logic, this means opening/closing on every
	query. Optionally, I should consider exposing
	eazel_package_system_open/close_dbs, so the caller can do it. But
	that makes the api a bit more cumbersome.
	
	* components/services/install/lib/eazel-package-system-types.h:
	* components/services/install/lib/eazel-package-system-types.c:
	(eazel_install_protocol_as_string), (categorydata_new),
	(categorydata_list_copy), (categorydata_copy),
	(categorydata_destroy_foreach), (categorydata_destroy),
	(categorydata_list_destroy), (packagedata_new),
	(packagedata_list_copy), (packagedata_copy),
	(packagedata_fill_in_missing), (packagedata_destroy),
	(packagedata_remove_soft_dep), (rpmfilename_from_packagedata),
	(rpmname_from_packagedata), (packagedata_get_readable_name),
	(packagedata_get_name), (packagedata_hash_equal),
	(packagedata_status_enum_to_str), (packagedata_status_str_to_enum),
	(packagedata_modstatus_enum_to_str),
	(packagedata_modstatus_str_to_enum), (packagedata_add_pack_to),
	(packagedata_add_pack_to_breaks),
	(packagedata_add_pack_to_soft_depends),
	(packagedata_add_pack_to_hard_depends),
	(packagedata_add_pack_to_modifies), (packagedata_list_prune),
	(packagerequirement_new),
	(eazel_install_package_provides_basename_compare),
	(eazel_install_package_provides_compare),
	(eazel_install_package_name_compare),
	(eazel_install_package_compare),
	(eazel_install_requirement_dep_compare),
	(eazel_install_requirement_dep_name_compare),
	(eazel_install_package_version_compare),
	(eazel_install_package_other_version_compare),
	(eazel_install_package_matches_versioning),
	(eazel_install_gtk_marshal_NONE__POINTER_INT_INT_INT_INT_INT_INT),
	(gstr_indent), (dump_package_list), (packagedata_dump_int),
	(packagedata_dump):
	Renamed eazel-install-types to eazel-package-system-types

	* components/services/install/nautilus-view/Makefile.am:
	Fixed linking after fix to 5121.

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:
	include eazel-package-system-types instead of
	eazel-install-types.h

	* components/services/install/server/Makefile.am:
	Fixed linking after fix to 5121.
	
	* components/services/trilobite/libtrilobite/trilobite-root-helper.
	c: (eazel_helper_start):
	Don't mention the info msg's from userhelper. 
	
	* po/POTFILES.in:
	Renamed eazel-install-types to eazel-package-system-types.

2000-12-10  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/Makefile.am:
	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.c: (service_tab_selected_callback),
	(updates_tab_selected_callback):
	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.h:
	* components/services/summary/nautilus-view/nautilus-summary-footer
	.c: (footer_item_clicked_callback):
	* components/services/summary/nautilus-view/nautilus-summary-footer
	.h:
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	:

	More minor cleaning to make the summary view more managable.

2000-12-09  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-properties-window.c: (create_basic_page),
	(create_properties_window), (ensure_uri_is_image),
	(set_custom_image), (select_image_button_callback),
	(remove_image_button_callback):
	fixed bug 2167, no way to add custom icons for files without a viewer,
	by adding buttons for adding and removing custom icons to the
	properties window.
	
2000-12-09  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/Makefile.am:
	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.c: (authn_cb_succeeded), (authn_cb_failed), (login_button_cb),
	(logout_button_cb), (logged_in_callback), (logged_out_callback),
	(preferences_button_cb), (forgot_password_button_cb),
	(register_button_cb):
	* components/services/summary/nautilus-view/nautilus-summary-callba
	cks.h:
	* components/services/summary/nautilus-view/nautilus-summary-dialog
	s.c: (generate_error_dialog), (generate_login_dialog),
	(widget_set_nautilus_background_color), (error_dialog_cancel_cb),
	(get_window_from_summary_view), (set_dialog_parent),
	(name_or_password_field_activated):
	* components/services/summary/nautilus-view/nautilus-summary-dialog
	s.h:
	* components/services/summary/nautilus-view/nautilus-summary-menu-i
	tems.c: (update_menu_items), (merge_bonobo_menu_items),
	(bonobo_register_callback), (bonobo_login_callback),
	(bonobo_logout_callback), (bonobo_preferences_callback):
	* components/services/summary/nautilus-view/nautilus-summary-menu-i
	tems.h:
	* components/services/summary/nautilus-view/nautilus-summary-view-p
	rivate.h:
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (updates_tab_selected_callback):

	Breaking the summary view up into separate files.  It was getting
	way to monolithic.  Still needs more cleanup from the rewrite before
	pr2 but much more managable now.  Getting it ready for inventory
	additions.

2000-12-08  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 5102, Changing to or from Music View advances song in
	second window.

	* components/music/nautilus-music-view.c: (stop_playing_file):
	Only stop playback if playback is occurring. Otherwise
	esd get's confused and temporarily halts playback causeing
	the status callback to advnace the song counter in any music
	view that is playing.
	
2000-12-08  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar-title.c: (update_emblems):
	fixed crash at launch revealed by recent changes by not trying to
	update the emblems in the sidebar if we don't have a
	file object yet.
	
2000-12-08  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 5029 (File count in sidebar might not match displayed
	search results list due to filtering)

	* libnautilus-extensions/nautilus-search-uri.h:
	* libnautilus-extensions/nautilus-search-uri.c:
	(nautilus_get_target_uri_from_search_result_name):
	New function to extract the sooper-secretly encoded
	actual search result URI from the search result "file name".

	* libnautilus-extensions/nautilus-directory-async.c:
	(should_display_file_name): New helper function that users
	user preferences to determine whether a file should be
	displayed, based only on its name.
	(filter_search_uri): New filter function used on search
	results
	(get_file_count_filter) New function, result depends on
	whether directory is a search directory.
	(start_monitoring_file_list): Use get_file_count_filter.

	* src/file-manager/fm-search-list-view.c: (real_add_file):
	Use nautilus_get_target_uri_from_search_result_name instead
	of spreading out the sooper secret knowledge.
	

	Fixed bug 5014 (Control-w should close the properties dialog)

	I made Control-w close a bunch o' windows without menus.

	* libnautilus-extensions/nautilus-gtk-extensions.h:
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(handle_standard_close_accelerator): New helper function,
	closes the window if the key was the close accelerator.
	(nautilus_gtk_window_event_is_close_accelerator): New public
	function, checks whether a key event is the close accelerator.
	(nautilus_gtk_window_set_up_close_accelerator): New public
	function, one-stop shopping for most clients that want to
	have Control-w close a window.

	* libnautilus-extensions/nautilus-preferences-dialog.c:
	(nautilus_preferences_dialog_construct):
	* src/file-manager/fm-icon-text-window.c:
	(create_icon_text_window):
	* src/nautilus-about.c: (nautilus_about_initialize):
	* src/nautilus-profiler.c: (dump_dialog_new):
	* src/nautilus-theme-selector.c:
	(nautilus_theme_selector_initialize):
	* src/file-manager/fm-properties-window.c:
	(fm_properties_window_initialize):
	Simple cases, just use nautilus_gtk_window_set_up_close_accelerator 
	so Control-w closes window.
	
	* src/nautilus-bookmarks-window.c: 
	(save_geometry_and_hide): New helper function, saves geometry
	before hiding window.
	(on_window_delete_event): Call save_geometry_and_hide; move
	other code into hide event handler since it should happen on
	every hide.
	(restore_geometry): Idle function to restore geometry after
	window is hidden (sounds strange, but that's the way it works).
	(on_window_hide_event): Do the every-hide work formerly done
	in delete_event handler; call restore_geometry at idle time
	because it must be called after window is hidden to work right.
	(on_window_destroy_event): remove idle handler in this case
	(only happens when Nautilus is exiting).
	(handle_close_accelerator), (set_up_close_accelerator):
	Similar to nautilus_gtk_window_ versions of these functions,
	but also handle saving the geometry before hiding.
	(create_bookmarks_window): Call set_up_close_accelerator;
	wire up "hide" and "destroy" events.
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_delete_event_callback),
	(nautilus_property_browser_hide_callback): Move code that
	should run on "hide" from "delete_event" handler to "hide"
	handler; this didn't matter before when clicking was the only
	way to close the window.
	(nautilus_property_browser_initialize): Wire up "hide" handler;
	call nautilus_gtk_window_set_up_close_accelerator.

2000-12-08  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Fixed 5074: Should give a NULL description in cases where the mime
	type isn't known.

	* libnautilus-extensions/nautilus-file.c: (get_description):
	It is now an error for a MIME type to ever be NULL. Added an assert,
	removed a special case code for handling directories even when
	we do not know the mime type.
	
	Fixed 5073: old code to give type "program" for some files (unkown
	MIME type) is not triggering any more.

	* libnautilus-extensions/nautilus-file.c: (get_description):
	Changed the check that looked for an empty MIME string to a
	compare for a MIME type of "application/octet-stream".
	
	Fixed 5021: Create Link in View as List -> Nautilus Crashes.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_create_links_for_files):
	This was just a broken assert that didn't cover the case of an
	empty drop point list.

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_mime_type):	
	* libnautilus-extensions/nautilus-mime-actions.c:
	(is_known_mime_type):
	Use a symbolic name for "application/octet-stream".

2000-12-08  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 2244 (trash window sidebar should have trash icon).

	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_name_for_directory): Added code to
	give the trash its own icon.
	(nautilus_icon_factory_get_icon_for_file): Rearranged to simplify
	it a bit.
	
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-trash-monitor.h:
	* libnautilus-extensions/nautilus-trash-monitor.c:
	Moved trash monitor to here.
	(nautilus_trash_files_changed_callback): Do nautilus_file_changed
	on the trash NautilusFile object when the state changes from full
	to empty or from empty to full.
	
	* src/file-manager/Makefile.am:
	* src/file-manager/nautilus-trash-monitor.h:
	* src/file-manager/nautilus-trash-monitor.c:
	Moved trash monitor from here.

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	Changed includes to include trash monitor from new location.

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(get_metadata_string_from_metafile),
	(get_metadata_list_from_metafile),
	(set_metadata_string_in_metafile), (set_metadata_list_in_metafile):
	Remove some dead code left over from handling of directory metadata.
	We don't have directory metadata any more, only file metadata.

2000-12-08  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_register):
	* src/file-manager/fm-desktop-icon-view.c: (real_merge_menus):
	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	* src/nautilus-application.c: (nautilus_application_startup),
	(desktop_changed_callback):
	* src/nautilus-application.h:
	* src/nautilus-main.c: (main):
	Remove command line args --start-desktop & --stop-desktop and the
	"Quit Nautilus Desktop" item from the desktop right click menu.
	Add the command line arg: --no-default-window. Default for the
	show desktop pref is now ON.

2000-12-08  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize): Added FIXME about hard-coded
	font and size.
	(nautilus_icon_container_start_renaming_selected_item): Fix bug
	5078 by removing useless empty signal handlers.
	(end_renaming_mode): Fix bug 5079 by merging the remaining code
	from the old hide_rename_widget in after deleting some of it.
	This is more parallel with the start renaming function.
	* libnautilus-extensions/nautilus-icon-private.h: Removed the
	unused rename_editable field.
	
	* libnautilus-extensions/nautilus-icon-text-item.c:
	(iti_stop_editing): Now that the strange "persistent" editable is
	no longer used, restore the code used to destroy the editable when
	not editing. This also fixes a storage leak.
	(nautilus_icon_text_item_get_text): Change return type to const
	char * to make it clear it's not free-able.
	(nautilus_icon_text_item_get_renaming_editable): Change the
	return type to GtkEditable *.
	* libnautilus-extensions/nautilus-icon-text-item.h: Change
	return types of get_text and get_renaming_editable.
	
	* src/file-manager/fm-directory-view.c: (queue_pending_files),
	(filtering_changed_callback): Added FIXMEs about special cases
	for the desktop.
	* src/file-manager/fm-icon-view.c: (fm_icon_view_begin_loading):
	Improved wording of a comment.

2000-12-08  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c:
	(nautilus_property_browser_update_contents):
	fixed bug 5045, browser assumes categories end in 's', by removing
	the offending code, which wasn't used anyway.  fixed bug 5046,
	shouldn't upper-case category names, by casing out instead.
	
2000-12-08  Darin Adler  <darin@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* libnautilus-extensions/nautilus-undo-signal-handlers.c:
	(editable_key_press_event): Fixed bugs 5090 and 5091. The fix is
	not even compiled right now, but it was better to improve the code
	now -- we'll test when we enable it some day.

2000-12-07  Maciej Stachowiak  <mjs@eazel.com>

	* components/services/startup/nautilus-view/.cvsignore: Remove
	file from this otherwise empty directory.

2000-12-07  Rebecca Schulman  <rebecka@eazel.com>
        Bug numbers for the FIXMEs in libnautilus-extensions.
	
	* libnautilus-extensions/nautilus-customization-data.c:
	(format_name_for_display):
	* libnautilus-extensions/nautilus-directory-async.c:
	(dequeue_pending_idle_callback), (cancel_loading_attributes),
	(nautilus_directory_cancel_loading_file_attributes):
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_handle_directory_moved),
	(nautilus_directory_notify_files_moved),
	(nautilus_self_check_directory):
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical),
	(pthread_nautilus_read_file_thread_entry),
	(pthread_nautilus_read_file_async), (nautilus_read_file_cancel),
	(nautilus_self_check_file_utilities):
	* libnautilus-extensions/nautilus-file.c: (get_description),
	(nautilus_file_forget_attributes_internal):
	* libnautilus-extensions/nautilus-gdk-extensions.c:
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_start_renaming_selected_item):
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(receive_dropped_uri_list):
	* libnautilus-extensions/nautilus-icon-factory.c:
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_size_allocate), (label_recompute_line_geometries):
	* libnautilus-extensions/nautilus-merged-directory.c:
	(nautilus_merged_directory_add_real_directory):
	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_get_default_application_for_file_internal):
	* libnautilus-extensions/nautilus-scalable-font.c:
	(nautilus_text_layout_paint):
	* libnautilus-extensions/nautilus-search-uri.c:
	(nautilus_self_check_search_uri):
	* libnautilus-extensions/nautilus-string.c:
	* libnautilus-extensions/nautilus-undo-signal-handlers.c:
	(editable_key_press_event), (nautilus_undo_editable_set_undo_key):

2000-12-07  Rebecca Schulman  <rebecka@eazel.com>
	Added bug numbers to FIXMEs for the src 
	subdirectory.  If I can stomach it,
	I'll try and do a few more today.

	* src/file-manager/fm-directory-view.c: (duplicate_callback),
	(check_for_directory_hard_limit), (load_directory):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_begin_loading):
	* src/file-manager/fm-search-list-view.c: (load_error_callback),
	(real_adding_file):
	* src/nautilus-about.c: (nautilus_about_draw_info):
	* src/nautilus-first-time-druid.c: (druid_cancel),
	(druid_finished), (make_anti_aliased_label),
	(make_hbox_user_level_radio_button), (set_up_user_level_page),
	(next_update_page_callback), (initiate_file_download):
	* src/nautilus-link-set-window.c: (get_link_set_names):
	* src/nautilus-location-bar.c:
	(nautilus_location_bar_update_label):
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize), (add_reset_property),
	(make_properties_from_xml_node),
	(nautilus_property_browser_update_contents):
	* src/nautilus-sidebar-title.c:
	(nautilus_sidebar_title_background), (update_icon):
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_set_to_component):
	* src/nautilus-window-manage-views.c:
	(window_set_title_with_timestamp), (viewed_file_changed_callback),
	(load_content_view), (change_state):
	* src/nautilus-window-service-ui.c: (goto_online_storage),
	(goto_software_catalog):
	* src/nautilus-window-toolbars.c: (set_up_throbber_frame_type):
	* src/nautilus-window.c: (nautilus_window_realize):
	* test/test-nautilus-font.c:

2000-12-07  Andy Hertzfeld  <andy@eazel.com>

	* nautilus.spec.in:
	added nautilus-text-view files to spec file
	
	* src/nautilus-window-toolbars.c: (theme_changed_callback):
	fixed bug 4982, throbber mispositioned when theme changes,
	by toggling the toolbar's visibility when the theme changes
	
2000-12-07  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 2230 (Search can find hidden files, which the user
	can't otherwise see)

	Unfortunately this fix leaves behind a related but harder-
	to-fix bug, bug 5029. I'll fix that separately.

	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_should_show_file): New function, intended
	for subclasses, returns whether a single file should be
	displayed or not, based on user's filter preferences.

	* src/file-manager/fm-search-list-view.c: 
	(real_add_file): Use should_show_file to filter out files
	that don't match preferences. The normal directory-view
	mechanism doesn't work in this case due to the way
	the search view uses "fake" uris to pass around the
	search results.

2000-12-07  Rebecca Schulman  <rebecka@eazel.com>
	Hopefully will improve performance for
	menu merging in a case where it is poor.
	(bug 5020)  Completely fixing the bug will
	involve some design changes in the way the
	clipboard works, though.

	reviewed by: John Sullivan <sullivan@eazel.com>
	(the additional bonobo freezes and thaws)

	* libnautilus/nautilus-clipboard.c:
	(merge_in_clipboard_menu_items), (merge_out_clipboard_menu_items):
	Add freezes and thaws in hopes of improving performance here
	* src/nautilus-window-menus.c: (nautilus_window_initialize_menus):
	Ditto

	* components/tree/nautilus-tree-view-dnd.c:
	(nautilus_tree_view_get_drop_action):
	* libnautilus-extensions/nautilus-user-level-manager.h:
	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link):
	* src/nautilus-switchable-search-bar.c:
	(nautilus_switchable_search_bar_set_mode):
	* src/nautilus-window-toolbars.c: (theme_changed_callback):
	Removed fixme comments in cases where the fixme has been
	fixed.

2000-12-07  Gene Z. Ragan  <gzr@eazel.com>

	Enabled the jump to next feature. This should be the last missing
	feature enabled that was lost during the brain salad surgery.

	* components/music/nautilus-music-view.c: (get_player_state):

2000-12-07  Darin Adler  <darin@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-search-uri.c: (parse_uri): Removed
	the *_suffix code. The change log said this would require data structure
	chagnges, but it didn't. Just deleting the code.
	(nautilus_self_check_search_uri): Fix test cases that were causing
	"make check" and Tinderbox to fail, added FIXMES.

2000-12-07  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: OK this time I really will remove nautilus-mpg123

2000-12-07  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4996, Repeatedly pressing pause "Pause" crashes music view

	* components/music/mpg123.c: (mpg123_pause):
	* components/music/mpg123.h:
	* components/music/nautilus-music-view.c: (go_to_previous_track),
	(play_button_callback), (pause_button_callback):
	Fixed pause and added some logic to avoid redundant calls.

2000-12-07 Rebecca Schulman  <rebecka@eazel.com>
	Changes to fix bugs 2341, to match the sidebar
	to Arlo's design for search results, and 3488
	that the human readable description of search
	results ends in a period.

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* libnautilus-extensions/nautilus-search-uri.c:
	(get_nth_criterion_suffix):
	Remove "." from this function.  Eventually,
	this function should be deprecated, but it will
	require some data structure changes, so I left a
	FIXME and an associated bug 5019.
	* src/file-manager/fm-search-list-view.c: (load_location_callback):
	Set the search results title to be "Search Results" instead of
	the human readable description
	* src/nautilus-sidebar-title.c: (file_is_search),
	(update_more_info):
	Special case search uri's for the "more_info" part
	of the sidebar to be in accordance with Arlo's design.
	This is an annoying way of doing things, but until
	a better framework is in place, John Sullivan and 
	I agreed this was ok to do for now.

2000-12-07  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4679, Double clicking on an MP3 in music view should play it

	* components/music/nautilus-music-view.c: (selection_callback):
	Check for double click and play if one is detected.

2000-12-07  Gene Z. Ragan  <gzr@eazel.com>

	Some clean up and another attempt to fix tinderbox.
	
	* components/music/Makefile.am:
	* components/music/esd-audio.c: (esdout_close):
	* components/music/nautilus-music-view.c: (selection_callback),
	(play_button_callback):

2000-12-07  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 3926 (summary view uses non-standard anti-aliased
	text in error dialogs)

	Fixed unreported bug where closing the summary view error
	dialog with close box would leave user at gray screen.

	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	(get_window_from_summary_view): Split this out from set_dialog_parent
	so I could also use it in a different context.
	(set_dialog_parent): Now calls get_window_from_summary_view.
	(generate_error_dialog): Now just calls nautilus_error_dialog instead
	of doing a bunch of custom code to set up an anti-aliased text error
	dialog. After we get the anti-aliased text preference to work on
	NautilusLabel, we can consider changing nautilus_error_dialog and
	friends to use it everywhere, but it doesn't make sense for error 
	dialogs	only in this one place to look different from all others.
	Also, connected error_dialog_cancel_cb to the "destroy" signal
	instead of just to the OK button, so that closing the dialog with
	the close box will have the same effect as the OK button.

2000-12-07  Andy Hertzfeld  <andy@eazel.com>

	* components/text/nautilus-text-view.c:
	(nautilus_text_view_initialize), (add_one_service),
	(update_service_menu_items), (merge_bonobo_menu_items):
	fixed problem with "command/verb separation", and added support
	for the clipboard to the text view.

	* nautilus-clean.sh:
	added nautilus-text-view to nautilus-clean.sh
	
	* data/emblems/Makefile.am:
	* data/emblems/danger.png:
	* icons/Makefile.am:
	* icons/emblem-danger.svg:
	added danger emblem from Susan
	
	* icons/i-executable.png:
	* icons/i-executable-aa.png:	
	fixed bug 4691, executable icon looks like KDE icon, by using
	a new icon from Susan
	
	* src/file-manager/fm-icon-view.c:
	(icon_container_preview_callback):
	fixed bug 4926, Nautilus tries to preview realaudio files but
	can't, by special casing the realaudio mime type.  Also, cleaned
	things up a little by removing redundant is_local call.
	
2000-12-07  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 954, Plays two MP3s at once instead of one at a time

	This was caused by playback not being stopped when a new uri
	was being loaded. We now stop playback when a new uri is loaded.

	* components/music/nautilus-music-view.c:
	(nautilus_music_view_update), (nautilus_music_view_load_uri):

2000-12-07  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 3245 (When an empty folder is visited, the throbbing
	never stops), bug 2540 (Hook up done_loading signal in
	NautilusMergedDirectory?), and bug 3067 (throbber doesn't start
	again if you do a new "underway" call after load is complete).

	* src/file-manager/fm-directory-view.c: (queue_pending_files):
	Get rid of code that uses nautilus_directory_are_all_files_seen
	to notice we are done loading.
	(done_loading_callback): Use done_loading signal to notice we
	are done loading.
	(finish_loading_uri): Connect to the done_loading signal.
	(disconnect_model_handlers): Disconnect from the done_loading
	signal.
	
	* libnautilus-extensions/nautilus-merged-directory.c:
	(done_loading_callback),
	(nautilus_merged_directory_add_real_directory),
	(nautilus_merged_directory_remove_real_directory): Add code to
	track all the trash directories and emit done_loading signals
	once all of them are done loading.
	
	* src/nautilus-window-manage-views.c: (change_state): Turn the
	stop and the throbber back on when a view re-marks itself
	underway.
	
	* libnautilus-extensions/nautilus-drag.c:
	(nautilus_drag_file_receive_dropped_keyword): Fix storage leak by
	doing a free_deep on the list of keywords.
	
	* libnautilus-extensions/nautilus-file-operations.h:
	* libnautilus-extensions/nautilus-file-operations.c:
	Get rid of excess includes.
	
	* libnautilus-extensions/nautilus-icon-dnd.c: Get rid of unused
	ERASE_KEYWORD constant.
	
	* src/nautilus-window.c: (nautilus_window_constructed): Fix a
	typo in a comment.

2000-12-07  Gene Z. Ragan  <gzr@eazel.com>

	Add header files to Makefile.am to make tinderbox happy.

	* components/music/Makefile.am:
	* components/music/mp3head.h:
	Put a header guard define in file.

2000-12-07  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/helper/README:
	Update the eazel-helper README to be more current than July.  Tell
	readers about the softlinks and tell them that eazel-hacking does
	this for you now.

2000-12-06  Mike Fleming  <mfleming@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_new_folder_vfs_error), (new_folder_xfer_callback),
	(nautilus_file_operations_new_folder):

	bugzilla.eazel.com 3940
	"DAV: Creating folder in read-only directory does not produce error feedback"

	Added an error dialog for the case where gnome-vfs-xfer reports an
	error during directory creation.  This case is only commonly
	encountered in remote filesystems where Nautilus can't check
	permissions before operations.  (Similar behaviour to 3940 applied
	to FTP as well).

2000-12-06  Gene Z. Ragan  <gzr@eazel.com>

	Changes in the music view to use a threaded file reader
	and threaded audio output mechanism.  Modified the xmms
	engine to be used as the mp3 engine that the view uses.
	Removed the use of stored proc IDs as the mechanism to 
	determine if the view is currently in the process of
	playing a file.
	
	* components/music/Makefile.am:
	* components/music/common.c: (fullread), (stream_init),
	(stream_rewind), (mpg123_stream_close), (stream_head_read),
	(stream_head_shift), (stream_mpg123_read_frame_body),
	(stream_back_bytes), (mpg123_stream_jump_to_frame),
	(mpg123_stream_jump_to_byte),
	(mpg123_stream_check_for_xing_header), (stream_init),
	(mpg123_stream_close), (stream_head_read), (stream_head_shift),
	(stream_mpg123_read_frame_body), (mpg123_stream_jump_to_frame),
	(mpg123_stream_jump_to_byte),
	(mpg123_stream_check_for_xing_header), (get_fileinfo),
	(mpg123_read_frame_init), (read_id3v2_tag), (mpg123_head_check),
	(mpg123_read_frame), (mpg123_decode_header), (mpg123_open_stream),
	(mpg123_set_pointer), (mpg123_compute_bpf),
	(mpg123_calc_numframes):
	* components/music/configure.c: (mpg123_configurewin_ok),
	(auto_select_cb), (use_3dnow_cb), (use_fpu_cb), (proxy_use_cb),
	(proxy_auth_use_cb), (streaming_save_dirbrowser_cb),
	(streaming_save_browse_cb), (streaming_save_use_cb),
	(title_id3_use_cb), (configure_destroy), (mpg123_configure):
	* components/music/dct64.c: (mpg123_dct64):
	* components/music/dct64_i386.c: (mpg123_dct64_1), (mpg123_dct64):
	* components/music/decode_2to1.c: (mpg123_synth_2to1_8bit),
	(mpg123_synth_2to1_8bit_mono),
	(mpg123_synth_2to1_8bit_mono2stereo), (mpg123_synth_2to1_mono),
	(mpg123_synth_2to1_mono2stereo), (mpg123_synth_2to1):
	* components/music/decode_4to1.c: (mpg123_synth_4to1_8bit),
	(mpg123_synth_4to1_8bit_mono),
	(mpg123_synth_4to1_8bit_mono2stereo), (mpg123_synth_4to1_mono),
	(mpg123_synth_4to1_mono2stereo), (mpg123_synth_4to1):
	* components/music/decode_i386.c: (mpg123_synth_1to1_8bit),
	(mpg123_synth_1to1_8bit_mono),
	(mpg123_synth_1to1_8bit_mono2stereo), (mpg123_synth_1to1_mono),
	(mpg123_synth_1to1_mono2stereo), (mpg123_synth_1to1):
	* components/music/decode_ntom.c: (mpg123_synth_ntom_set_step),
	(mpg123_synth_ntom_8bit), (mpg123_synth_ntom_8bit_mono),
	(mpg123_synth_ntom_8bit_mono2stereo), (mpg123_synth_ntom_mono),
	(mpg123_synth_ntom_mono2stereo), (mpg123_synth_ntom):
	* components/music/dxhead.c: (ExtractI4), (mpg123_get_xing_header),
	(mpg123_seek_point):
	* components/music/dxhead.h:
	* components/music/esd-audio.c: (esdout_init), (get_latency),
	(esd_stou8), (esd_utos16sw), (esd_utos16), (esd_16sw),
	(esdout_setup_format), (esdout_get_written_time),
	(esdout_get_output_time), (esdout_used), (esdout_playing),
	(esdout_free), (esdout_write_audio), (esdout_write),
	(esdout_close), (esdout_flush), (esdout_pause), (esdout_loop),
	(esdout_set_audio_params), (esdout_open):
	* components/music/esd-audio.h:
	* components/music/esd-mixer.c: (esdout_get_volume),
	(esdout_set_volume):
	* components/music/fileinfo.c: (set_entry_tag), (get_entry_tag),
	(find_genre_id), (genre_comp_func), (save_cb), (label_set_text),
	(remove_id3_cb), (set_mpeg_level_label), (channel_mode_name),
	(file_info_http), (mpg123_file_info_box):
	* components/music/getbits.c: (check_buffer_range),
	(mpg123_backbits), (mpg123_getbitoffset), (mpg123_getbyte),
	(mpg123_getbits), (mpg123_getbits_fast), (mpg123_get1bit):
	* components/music/getbits.h:
	* components/music/huffman.h:
	* components/music/id3.c: (id3_seek_mem), (id3_read_mem),
	(id3_seek_fd), (id3_read_fd), (id3_seek_fp), (id3_read_fp),
	(id3_open_mem), (id3_open_fd), (id3_open_fp), (id3_close),
	(id3_tell), (id3_alter_file), (safe_write), (id3_write_tag):
	* components/music/id3.h:
	* components/music/id3_frame.c: (id3_read_frame), (id3_get_frame),
	(id3_decompress_frame), (id3_delete_frame), (id3_add_frame):
	* components/music/id3_frame_content.c: (id3_get_content):
	* components/music/id3_frame_text.c: (id3_get_encoding),
	(id3_set_encoding), (id3_get_text), (id3_get_text_desc),
	(id3_get_text_number), (id3_set_text), (id3_set_text_number):
	* components/music/id3_frame_url.c: (id3_get_url),
	(id3_get_url_desc):
	* components/music/id3_header.h:
	* components/music/id3_tag.c: (id3_init_tag), (id3_read_tag):
	* components/music/l2tables.h:
	* components/music/layer1.c: (I_step_one), (I_step_two),
	(mpg123_do_layer1):
	* components/music/layer2.c: (mpg123_init_layer2), (II_step_one),
	(II_step_two), (II_select_table), (mpg123_do_layer2):
	* components/music/layer3.c: (mpg123_init_layer3),
	(III_get_side_info), (III_get_scale_factors_1),
	(III_get_scale_factors_2), (III_dequantize_sample), (III_i_stereo),
	(III_antialias), (dct36), (dct12), (III_hybrid),
	(mpg123_do_layer3):
	* components/music/mpg123.c: (mpg123_compute_tpf),
	(set_mpg123_synth_functions), (mpg123_init), (convert_to_header),
	(play_frame), (get_id3_genre), (mpg123_strip_spaces), (extname),
	(eval_id3_format), (mpg123_id3v1_to_id3v2),
	(mpg123_format_song_title), (mpg123_get_id3v2), (get_song_title),
	(get_song_time), (get_song_info), (decode_loop),
	(mpg123_play_file), (mpg123_stop), (mpg123_seek), (mpg123_pause),
	(get_time):
	* components/music/mpg123.h:
	* components/music/mpg123_handler.c:
	* components/music/mpg123_handler.h:
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize), (nautilus_music_view_destroy),
	(selection_callback), (update_play_controls_status),
	(play_status_display), (play_current_file), (stop_if_playing),
	(go_to_next_track), (go_to_previous_track), (play_button_callback),
	(stop_button_callback), (pause_button_callback),
	(slider_moved_callback), (slider_release_callback),
	(add_play_controls), (nautilus_music_view_update),
	(nautilus_music_view_drag_data_received), (start_playing_file),
	(stop_playing_file), (get_player_state), (set_player_state):
	* components/music/tabinit.c: (mpg123_make_decode_tables),
	(mpg123_make_conv16to8_table):

2000-12-06  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 4992 ("New folder" menu item enable state doesn't follow
	permissions), bug 4965 (Dragging multiple items to location bar
	crashes Nautilus), and bug 4995 (Rename a file to bad name ->
	error cites wrong filename).

	Fixed a bug jsh spotted where we were doing the mod. time checks
	wrong in the icon factory for thumbnails.

	Did some wording fixes after menthos pointed out some problems.

	* libnautilus-extensions/nautilus-icon-factory.c:
	(get_cache_time): Split out this function to get the mtime of a
	file so we can check when it changed.
	(load_specific_icon): Get the time when loading an icon.
	(scale_icon): Copy the time when making a scaled icon from an
	existing icon.
	(remove_icons_if_file_changed): New renamed function uses
	get_cache_time to check if the icon needs recomputing because of a
	change in the underlying file.
	(get_icon_from_cache): Call the new remove_icons_if_file_changed.
	(load_icon_with_embedded_text): Copy the time when making an icon
	with text from an existing icon.
	
	* libnautilus-extensions/nautilus-file-attributes.h: Added
	ATTRIBUTE_CAPABILITIES (and sorted in alphabetical order).
	* libnautilus-extensions/nautilus-directory-async.c:
	(nautilus_directory_set_up_request): Changed the name of this,
	made it public, and added ATTRIBUTE_CAPABILITIES as another
	way to ask for the file info.
	(cancel_loading_attributes),
	(nautilus_directory_cancel_loading_file_attributes): Set up a
	request and use it to decide what to cancel.
	* libnautilus-extensions/nautilus-directory-private.h: Moved the
	request structure and call into here so it can be used by
	NautilusFile and NautilusDirectory both.
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_forget_attributes_internal): Set up a request and
	use it to decide what to forget.
	(nautilus_file_forget_all_attributes): Add ATTRIBUTE_CAPABILITIES
	to the set of things in "all".
	
	* src/file-manager/fm-directory-view.c:
	(check_for_directory_hard_limit): Added a FIXME and made some
	minor wording improvements.
	(file_changed_callback): Helper to schedule a menu update when
	the directory's NautilusFile reports a change.
	(load_directory): Add monitoring of the directory's "capabilities"
	since they affect whether "New Folder" is allowed. Fixes 4992.
	(disconnect_handler): Helper for the two functions below.
	(disconnect_directory_handler): Disconnect a NautilusDirectory
	handler.
	(disconnect_directory_as_file_handler): Disconnect a NautilusFile
	handler.
	(disconnect_model_handlers): Add code to stop monitoring the
	directory's "capabilities".
	
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file): Got rid of some unneeded "\n"
	characters. Improved the error message in the "/"-forbidden case
	with a specific special case message and the proper file name (was
	using the old file name, not the new one). Fixes 4995.
	(fm_rename_file): Added quotes to message.
	
	* src/nautilus-location-bar.h: Removed unused fields.
	* src/nautilus-location-bar.c: (nautilus_location_bar_get_window):
	Find the window by looking for an ancestor instead of trying to
	use gtk_object_get_data (on data no one was setting any
	more!). Fixes 4965.
	(nautilus_location_bar_initialize): Got rid of redundant
	initialization to NULL.
	(nautilus_location_bar_set_location): Got rid of gratuitous check
	before calling g_free.
	(nautilus_location_bar_update_label): Added a localization-related
	FIXME here.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_xfer_vfs_error): Corrected the "it's" to "its" even though
	I know that John and Pavel were writing an improved version of the
	entire message.

	* libnautilus-extensions/nautilus-search-uri.c:
	(get_translated_criterion), (nautilus_self_check_search_uri): Say
	"folder" instead of "directory".
	* src/nautilus-search-bar-criterion.c: Say "folder" instead of
	"directory".
	* src/nautilus-theme-selector.c: (add_theme_to_icons): Say
	"folder" instead of "directory". Other minor wording improvements.
	(make_theme_description): Minor wording improvement.
	
	* src/nautilus-window-manage-views.c:
	(window_set_title_with_timestamp): Added a FIXME.

2000-12-06  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Addressed bug 4208 (Opening new window is slow)

	Pavel identified the 2nd biggest performance bottleneck in
	opening a new window (1st being tree view) as the code that
	sets up the bookmark menus. I found some good speedups; time
	to profile again.

	* libnautilus-extensions/nautilus-bookmark.c:
	(bookmark_file_changed_callback): nautilus_uris_match returns
	a gboolean, not a strcmp-style int. Doh! Sense of test was
	reversed, causing many unnecessary rebuild-bookmarks-menus.
	
	* src/nautilus-window-menus.c: 
	(append_static_bookmarks), (refresh_bookmarks_menu): Wrapped
	some Bonobo-ui-manipulating code with freeze/thaw; this speeds
	up rebuild-bookmarks_menu by an order of magnitude or so.

	Fixed bug 4334: (Icon name being edited can get separated
	from icon on restore-original-size)

	* libnautilus-extensions/nautilus-icon_container.c:
	(nautilus_icon_container_move_icon): End renaming mode
	if icon being renamed is moved.

2000-12-06  Rebecca Schulman  <rebecka@eazel.com>

	* libnautilus-extensions/nautilus-search-uri.c:
	Remove a comment about a FIXME that is fixed.

2000-12-06  Michael Engber  <engber@eazel.com>

	* src/nautilus-sidebar-title.c: (appearance_changed_callback),
	(realize_callback), (nautilus_sidebar_title_initialize),
	(nautilus_sidebar_title_background),
	(nautilus_sidebar_title_select_text_color):
	Hookup sidebar_title to their background's appearance_changed
	signals so that the text can adjust color to match the
	background being light or dark - bug 4991.

2000-12-06  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:
	* components/services/trilobite/libtrilobite/libtrilobite.h:

	Backing out rpm evil until the abstractions can be fixed correctly.

2000-12-06  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-inventory-ut
	ils.c: (add_info), (str_has_prefix):

	One more quick fix for the build.  Didn't want to make trilobite
	depend on libnautilus-extensions.

2000-12-06  Rebecca Schulman  <rebecka@eazel.com>
	This should complete the rest of the work for bug 3920,
	by added a message in the status bar about what 
	search results will appear (only those files indexed as 
	of the last index time) 

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* src/file-manager/fm-search-list-view.c: (load_location_callback):
	Add a status message
	
	* src/file-manager/nautilus-indexing-info.c:
	* src/file-manager/nautilus-indexing-info.h:
	(nautilus_indexing_info_get_last_index_time),
	(show_reindex_request_information):
	Changed get_last_index_time to 
	nautilus_indexing_info_get_last_index_time
	to share the code with the search list view

	* src/nautilus-window.c:
	Upped the status bar timeout for 5 seconds to 10.

2000-12-06  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:

	Fixing the build.  Adding the temporary dep to rpmlib.

2000-12-06  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:
	* components/services/trilobite/libtrilobite/libtrilobite.h:
	* components/services/trilobite/libtrilobite/trilobite-inventory-ut
	ils.c: (add_package_info), (read_proc_info), (add_info),
	(add_io_info), (add_hardware_info),
	(trilobite_synchronize_configuration_metafile),
	(trilobite_update_configuration_metafile),
	(trilobite_create_configuration_metafile):
	* components/services/trilobite/libtrilobite/trilobite-inventory-ut
	ils.h:

	Adding basic inventory collection funtions to trilobite.  Still needs
	the rpm abstraction in order to work on RH7.

2000-12-06  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 4994 (Back and Forward tool bar buttons don't respect
	"no label" gnomecc option)

	* src/nautilus-window-toolbars.c: (set_up_special_bonobo_button):
	Set initial labels-or-not state based on global preference. This
	is an imperfect solution because it only partially matches the
	logic used by the Bonobo standard button mechanism, but the
	remaining symptoms are very minor (see bug 5005).

2000-12-06  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus.spec.in:
	Added the new libs to the spec, so tinderbox can build again.

2000-12-06 John Fleck <jfleck@inkstain.net>

	reviewed by  Ali Abdin  <aliabdin@aucegypt.edu>
	* components/help/converters/gnome-db2html2/sect-preparse.c:
	fixing memory leak

2000-12-06  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-query.c:
	killed
	
	* components/services/trilobite/libtrilobite/trilobite-root-helper.
	c: (trilobite_root_helper_run_program):
	Replaced the g_assert with g_warning and a continue;

	* po/POTFILES.in:
	Updated for all the new stuff in eazel-install

2000-12-06 Eskil Heyn Olsen  <eskil@eazel.com>

	* components/rpmview/Makefile.am:
	Needs to link with eazelpackagesystem now.
	
	* components/services/install/command-line/Makefile.am:
	Build eazel-test-types.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_download_progress_signal),
	(eazel_install_progress_signal), (something_failed), (dep_check):
	Nicer output.
	
	* components/services/install/command-line/eazel-test-packsys.c:
	(test_package_load), (main):
	Moved the packagelist_prun test into eazel-test-types. Also
	relaxed the test of uninstall (doesn't require progress signals
	now).
	
	* components/services/install/command-line/eazel-test-types.c:
	(make_package), (test_packagelist_prune),
	(test_eazel_install_package_matches_versioning), (main):
	Test packagedatalist_prune and the new ugly func for testing
	version-minor match.
	
	* components/services/install/lib/Makefile.am:
	Do compile eazel-install-query.c anymore.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package):
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(packagedata_new_from_rpm_conflict),
	(packagedata_new_from_rpm_conflict_reversed),
	(eazel_install_do_rpm_dependency_check):
	* components/services/install/lib/eazel-install-logic.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_finalize), (eazel_install_set_arg),
	(eazel_install_class_initialize), (eazel_install_initialize),
	(eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_revert_transaction_from_xmlstring),
	(eazel_install_query_package_system),
	(eazel_install_get_size_increasement),
	(eazel_install_emit_preflight_check):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-logic.c:
	(install_packages), (eazel_install_download_packages),
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_install_packages), (uninstall_all_packages),
	(uninstall_packages), (get_total_size_of_packages),
	(eazel_install_start_signal), (eazel_install_end_signal),
	(eazel_install_progress_signal), (eazel_install_failed_signal),
	(eazel_install_start_transaction),
	(eazel_install_check_existing_packages),
	(eazel_install_fetch_dependencies),
	(eazel_install_do_dependency_check),
	(eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse),
	(eazel_uninstall_check_for_install):
	Fixes bug 4936, use EazelPackageSystem in EazelInstall.

	* components/services/install/lib/eazel-install-problem.c:
	(problem_step_foreach_remove),
	(eazel_install_problem_tree_to_case),
	(eazel_install_problem_handle_cases):
	Slammed some ifdef EIP_DEBUG around some debug.
	
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-types.c:
	(eazel_install_package_matches_versioning):
	New funky match function. Since I needed the same check two
	places, I moved it into a generel function.
	Also cut out all the rpmload code.
	
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(monitor_rpm_process_pipe), (rpm_packagedata_fill_from_rpm_header),
	(eazel_package_system_rpm3_load_package),
	(eazel_package_system_rpm3_query_impl),
	(eazel_package_system_rpm3_query_requires),
	(eazel_package_system_rpm3_query_foreach),
	(monitor_subcommand_pipe), (eazel_package_system_rpm3_execute),
	(check_if_all_packages_seen),
	(eazel_package_system_rpm3_install_uninstall):
	Fixed 4914. And also added the use of the packages_seen in
	piggyback.
	
	* components/services/install/lib/eazel-package-system.h:
	* components/services/install/lib/eazel-package-system-private.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_is_installed),
	(eazel_package_system_emit_start),
	(eazel_package_system_emit_progress),
	(eazel_package_system_emit_failed),
	(eazel_package_system_emit_end):
	Added const to all the signal emitters.
	Added the is_installed call.
	
	* components/services/install/nautilus-view/Makefile.am:
	Link against eazelpackagesystem
	
	* components/services/install/server/Makefile.am:
	Link against eazelpackagesystem

	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.h:
	Added a documentational comment.
	
	* components/services/trilobite/libtrilobite/trilobite-root-helper.
	c: (trilobite_root_helper_run_program):
	Added an api g_assert that I ran into (no element in args may be null).

2000-12-06  Ramiro Estrugo  <ramiro@eazel.com>

	* src/file-manager/fm-search-list-view.c: (load_error_callback):
	Remove the extra not needed ", NULL" from this g_strdup_printf call.
	
2000-12-06  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-softcat.c:
	(gnome_vfs_escape_string):

	Fixed a dumb url-quoting error that resulted in "hilarious"
	quoting flubs.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_done):

	Never return to the summary-view page after completion now: let
	the user do their own navigation.
	
	* nautilus-installer/src/callbacks.c: (log_debug),
	(reply_callback), (ask_to_delete_rpms), (ask_are_you_sure),
	(druid_cancel), (begin_install), (druid_finish):
	* nautilus-installer/src/installer.c: (start_over),
	(insert_info_page), (get_detailed_errors_foreach),
	(get_detailed_errors), (install_failed), (uninstall_failed),
	(download_failed), (eazel_installer_post_install),
	(draw_splash_text), (eazel_installer_set_default_texts),
	(eazel_installer_initialize):

	Ask if the user wants to delete the RPMs after a successful
	install, and ask for verification when they hit the "cancel"
	button.  Eliminate a redundant cancel callback that caused double
	vision.  Restore the error dialog's AWOL title (?).  Turn off that
	damn checkbox for now (can turn it on later if anyone makes an
	installer PR2.1).

John Fleck <jfleck@inkstain.net>

	reviewed by: Ali Abdin <ailabdin@aucegypt.edu>
	
	* components/help/converters/gnome-db2html2/gdb3html.h,
	  sect-preparse.c, toc-elements.c: completes support for
          glossaries in the Gnome help system. Fixes bug #2349

2000-12-05  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 3355 (No "New Window" menu item in right-click menu)

	* src/nautilus-shell-ui.xml: Added "New Window" to
	right-click context menu (that appears in directory views)

2000-12-05  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 4986 (Open in <n> new windows disabled) 

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	An == should have been a !=

	Fixed bug 3510 (The Back and Forward right-click menus are
	missing)

	* src/nautilus-shell-ui.xml: Replaced toolitem nodes for
	"Back" and "Forward" with control nodes for their wrappers.
	Have to do a lot of stuff manually for non-standard Bonobo
	buttons.
	
	* src/nautilus-window-private.h: Store back_button_item and
	forward_button_item in details.
	
	* src/nautilus-window-toolbars.c: 
	Removed #ifdef UIH brackets around right-click menu code.
	(get_back_button), (get_forward_button): Helper functions to
	get the GtkButton widgets from the stored BonoboUIToolbarButtonItems.
	(back_or_forward_button_pressed_callback): Renamed from ..._clicked_...,
	since it's a handler for button_press_event. Compare for Back or
	Forward button a newfangled way.
	(back_or_forward_button_clicked_callback): New function, callback
	from button's "clicked" handler now that Bonobo doesn't handle this
	for us.
	(get_file_name_from_icon_name): New function extracted from
	set_up_button; gets the full file path from the leaf icon "name".
	(set_up_standard_bonobo_button): Renamed from "set_up_button",
	now calls get_file_name_from_icon_name.
	(get_pixbuf_for_xml_node): New function, calls Bonobo utility code
	to get the pixbuf from an xml button node.
	(set_up_special_bonobo_button): New function, parallel to
	set_up_standard_bonobo_button but handles the case where you have
	a BonoboUIToolbarButtonItem in hand.
	(set_up_toolbar_images): Call set_up_special_bonobo_button for the
	Back and Forward items; put the bonobo freeze/thaw here instead of
	where it was before in set_up_button.
	(set_widget_for_bonobo_control): New function, extracted from 
	nautilus_window_initialize_toolbars, handles attaching a widget to
	a Bonobo control defined in the XML file.
	(set_up_back_or_forward_tool_bar_item): New function, creates
	widget, wraps it in control, and wires up signal handlers.
	(nautilus_window_initialize_toolbars): Call set_up_toolbar_images
	only after Back/Forward buttons are created; create Back/Forward
	buttons and use new helper functions.
	
	* src/nautilus-window.c: 
	(nautilus_window_allow_back), (nautilus_window_allow_forward):
	Set sensitivity of Back/Forward buttons explicitly.

2000-12-05  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize):

	Re-order softcat init so it's initialized before pieces of it are
	set.
	
	* components/services/install/lib/eazel-softcat.c:
	(gnome_vfs_escape_string):

	Fix the stub escape_string (for the gnome-vfs-less bootstrap
	installer) to actually compile and work.

	* nautilus-installer/src/Makefile:

	(innocent whistle)
	
	* nautilus-installer/src/installer.c: (create_what_to_do_page),
	(eazel_installer_add_category), (eazel_installer_initialize),
	(eazel_installer_new):

	Fix label names to match (and avoid assertion).

2000-12-05  Michael Engber  <engber@eazel.com>

	* src/nautilus-window.c: (nautilus_window_constructed),
	(update_sidebar_panels_from_preferences):
	Keep the desktop from creating sidebar panels (it still
	has the sidebar) - bug 2603.

2000-12-05  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/file-manager/fm-search-list-view.c: (load_error_callback):
	Added an error callback for search uris that produce error
	GNOME_VFS_ERROR_TOO_BIG, which happens when a search matches
	every criterion in the database.
	* src/nautilus-search-bar-criterion.c: (get_owner_location_for):
	Fixed an "is not" in a search uri that should have been "is_not"
	so that searches did not produce an error.

2000-12-05  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:
	* components/services/trilobite/libtrilobite/libtrilobite.h:
	* components/services/trilobite/libtrilobite/trilobite-core-metadat
	a-manager.c:
	* components/services/trilobite/libtrilobite/trilobite-core-metadat
	a-manager.h:
	* components/services/trilobite/libtrilobite/trilobite-core-package
	-manager.c:
	* components/services/trilobite/libtrilobite/trilobite-core-package
	-manager.h:
	* components/services/trilobite/libtrilobite/trilobite-core-securit
	y-manager.c:
	* components/services/trilobite/libtrilobite/trilobite-core-securit
	y-manager.h:
	* components/services/trilobite/libtrilobite/trilobite-core-tests.c
	:
	* components/services/trilobite/libtrilobite/trilobite-core-tests.h
	:

	Removing some empty file templates from libtrilobite.

2000-12-05  Pavel Cisler <pavel@eazel.com>

	reviewed by: Gene Z. Ragan <gzr@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_xfer_vfs_error):
	Second part of fix 4894 "Dragging /proc from the tree view to
	/home causes a file not found".	
	Part of fix to 3232 "Error message when copying rwx file from
	r-x folder to rwx folder".	
	Part of fix to 3237 "No error occurs if move file to folder w/o
	write access".
	Part of fix to 3748 "misleading file operation error dialog"
	Added logic that distinguishes between read and write phases
	of a file move properly and gives the right error.
	Split up the "no permissions" and "read only" cases and gave them
	distinct errors.
	Added a specific case for a move from a directory that is not writable.

2000-12-05  John Sullivan  <sullivan@eazel.com>f

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 3586 (Nautilus tool bar doesn't respect
	"no labels" setting in gnomecc)

	I fixed the Bonobo part of this bug earlier; this is the
	little leftover Nautilus-specific part.

	* src/nautilus-shell-ui.xml: Remove 'look="both"' from
	tool bar definition. This was formerly needed due to
	Bonobo behavior where you would get icons-only without this,
	but now this prevents the preference from kicking in.
	* src/nautilus-window-toolbars.c: 
	(allocate_throbber): Use small throbber if gnome preference is 
	for unlabelled tool bar buttons. This makes the throbber 
	appearance fit in well when tool bar labels are off.
	(theme_changed_callback): Remove hide/show toolbar and replace
	it with FIXME about how the throbber doesn't reposition
	correctly when theme changes. The hide/show was a hack that
	worked in the old Bonobo but doesn't in the new one.

	* src/nautilus-desktop-window.c: (realize):
	Removed some leftover #ifdef UIH code that was functionally
	replaced a while back.

2000-12-04  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-metadata.c:
	(init_default_transfer_configuration),
	(eazel_install_configure_softcat), (transferoptions_destroy):
	* components/services/install/lib/eazel-install-metadata.h:
	
	Remove softcat fields from the TransferOptions struct and move
	them into EazelSoftCat's config.  Read ESC's config from the
	install/server/ gconf items.

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_finalize), (eazel_install_initialize),
	(eazel_install_new_with_config), (eazel_install_get_server),
	(eazel_install_get_server_port), (eazel_install_get_username),
	(eazel_install_get_eazel_auth), (eazel_install_get_cgi_path),
	(eazel_install_set_server), (eazel_install_set_server_port),
	(eazel_install_set_username), (eazel_install_set_eazel_auth),
	(eazel_install_set_cgi_path):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-types.h:

	Put a SoftCat into the Install object, and map the set/get
	functions for old TransferOptions fields to SoftCat fields.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_xfer_callback), (eazel_install_fetch_package):

	Remove some sarcasm (I'm over it).  Remove traces of the "old"
	(fake) CGI code.  Remove the evil softcat hack and make it use the
	softcat object now.
	
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_unref), (eazel_softcat_set_server),
	(eazel_softcat_set_server_host), (eazel_softcat_set_server_port),
	(eazel_softcat_get_server_host), (eazel_softcat_get_server_port),
	(eazel_softcat_set_authn), (eazel_softcat_set_authn_flag),
	(eazel_softcat_set_username):
	* components/services/install/lib/eazel-softcat.h:

	Let a SoftCat be unref'd (cough cough).  Add some more field
	set/get functions for the Install object.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_solve_cases),
	(nautilus_service_install_done),
	(nautilus_service_install_failed):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:

	Remove some cruft and fix the "already installed" case so that it
	doesn't drop windows everywhere and vanish abruptly, leaving a
	dangling eazel-install service running in the background.
	
2000-12-04  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/nautilus-tree-view.c
	(expand_uri_sequence_and_select_end): Fix build lossage from last
	commit.

2000-12-04  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: John Sullivan  <sullivan@eazel.com>

	* components/tree/nautilus-tree-view.c
	(expand_uri_sequence_and_select_end): Changed control flow a bit
	to avoid possibly dereferencing a NULL view_node pointer. This can
	happen when launching nautilus with the tree view and the desktop
	both enabled. Thanks to John Sullivan for locating the bug,
	finding the likely cause in the debugger, and helping me simplify
	the control flow of this function.

2000-12-04  Darin Adler  <darin@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* libnautilus-extensions/Makefile.am: Add ESD flags and library
	since we are now using it. Without this change, I couldn't link.

	* libnautilus-extensions/nautilus-icon-container.c:
	(redo_layout_internal), (redo_layout_callback),
	(unschedule_redo_layout), (schedule_redo_layout), (relayout): Get
	rid of some circular logic in relayout (now called redo_layout)
	and made nice calls to cleanly schedule the idle function to redo
	layout.
	(size_allocate): Make sure we redo layout if this is the first
	allocate, since we have inhibited them up to this point.
	(nautilus_icon_container_initialize): Get rid of unnecessary
	initialization of things that are already 0, NULL, FALSE.
	(finish_adding_new_icons): Remove unnecessary check for NULL.
	(nautilus_icon_container_add): Use the new schedule_redo_layout.
	(nautilus_icon_container_remove): Use schedule_redo_layout instead
	of redoing the layout right away, since this can be called for
	many icons at a time and we want to bunch up the layout work.
	(nautilus_icon_container_request_update): Schedule a redo_layout
	any time an icon changes. We could get fancy and detect changes
	that are substantive if this does too much extra layout work.
	(nautilus_icon_container_set_zoom_level): Removed extraneous
	direct call to redo_layout after the request_update_all call.

	* src/nautilus-window.c: (menu_bar_no_resize_hack_class_free),
	(menu_bar_no_resize_hack): Tweak function name and formatting.
	(nautilus_window_constructed): Do a little bit less sidebar setup
	when making a desktop window.

	* libnautilus-extensions/nautilus-sound.c: Tweak (has nice side
	effect of forcing recompile).

2000-12-04  Robey Pointer  <robey@eazel.com>

	* components/services/install/command-line/eazel-test-softcat.c:
	(main):

	Add -V (version), --gt (greater-than), and -C (check for new
	version) options to eazel-softcat.  (The -C/--gt options won't work
	until the softcat java-side supports it.)
	
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_initialize), (eazel_softcat_set_retry),
	(eazel_softcat_get_info), (eazel_softcat_available_update):
	* components/services/install/lib/eazel-softcat.h:

	Finish softcat API (check for new version of a package).

2000-12-04  Maciej Stachowiak  <mjs@eazel.com>

	* README: Updated ORBit version.

2000-12-04  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_ensure_gradient_buffered):
	Changed the semantics of multi-point gradients
	so that percentages are postions (rather than
	widths) - bug 4759

2000-12-04  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Gene Z. Ragan <gzr@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_move_copy_items):
	* src/file-manager/fm-list-view.c: (fm_list_receive_dropped_icons):
	Fixed 4949:
	Fix a crash when copying from an icon view to a list view -
	my last fix to set icon positions properly during duplicate was sloppy
	and broke this.
	The change needed to add one more place that use an empty GArray instead
	of a NULL.
	Properly handle the case of an empty GArray in
	nautilus_file_operations_copy_move.

2000-12-04  Maciej Stachowiak  <mjs@eazel.com>

	* README: Update OAF branch info.

2000-12-04  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background-canvas-group.c:
	(nautilus_background_canvas_group_initialize_class),
	(nautilus_background_canvas_group_update),
	(nautilus_background_canvas_group_draw),
	(nautilus_background_canvas_group_render):
	Code formatting changes.
	
	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_initialize_class),
	(nautilus_background_set_combine_mode),
	(nautilus_background_ensure_image_scaled),
	(nautilus_background_load_image_callback),
	(nautilus_background_start_loading_image),
	(nautilus_background_set_image_uri_helper),
	(nautilus_background_set_image_uri),
	(set_image_and_color_image_loading_done_callback),
	(nautilus_background_set_image_uri_and_color),
	(nautilus_background_reset):
	* libnautilus-extensions/nautilus-directory-background.c:
	(background_changed_callback), (saved_settings_changed_callback),
	(background_reset_callback):
	* src/nautilus-sidebar-tabs.c: (draw_one_tab_plain):
	* src/nautilus-sidebar.c: (receive_dropped_color),
	(background_settings_changed_callback),
	(background_reset_callback), (nautilus_sidebar_update_appearance),
	(background_metadata_changed_callback), (nautilus_sidebar_set_uri):
	Fixed various issues with dropping colors on the sidebare.
	Osetensibly, the problem was with dropping white - bug 4880.

2000-12-04  Gene Z. Ragan  <gzr@eazel.com>

	Fixed broken build.
	
	* components/help/converters/gnome-db2html2/sect-preparse.c:
	(sect_preparse_figure_start_element),
	(sect_preparse_acronym_characters), (gloss_term_append):
	File had typos, missing and extra punctuation. The code did not
	even compile. Now it does.

2000-12-04  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/sect-preparse.c:
        * components/help/converters/gnome-db2html2/gdb3html.h:
        (sect_preparse_glossterm_characters),
        (sect_preparse_acronym_characters),
        (sect_preparse_glossterm_start_element),
        (sect_preparse_glossterm_end_element),
        (gloss_term_append):
        Changed around the glossary a bit (partial fix for a bug). Leaks some
        memory though.

2000-12-04  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 645, nautilus_file_rename should handle path separators sensibly
	
	* libnautilus-extensions/nautilus-file.c: 
	(nautilus_file_rename):
	Check for the presence of the "/" path separator charcter. If one
	exists, return an error.
	
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file):
	Add a case to report an error if an illegal name has been specified
	for the file to renamed to.

2000-12-04  John Sullivan  <sullivan@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4931 ("Can't display files of this type"
	message is inaccurate in some cases)

	* src/nautilus-window-manage-views.c:
	(nautilus_window_end_location_change_callback):
	Reworded the error message when there's no viewer for a
	file to not mention the file type, since the file type
	might not have anything to do with why no viewer could be
	found. For example, clicking on a remote RPM was getting a
	message implying that Nautilus had no viewer capable of
	displaying RPM files in general, whereas in fact it has a
	viewer that can display RPM files, but only if local. This
	is the simplest way to address this problem; see bugs
	4932 and 4933 for better but harder-to-implement solutions.

2000-12-04  Pavel Cisler <pavel@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* src/file-manager/fm-directory-view.c: (create_link_callback),
	(offset_drop_points), (fm_directory_view_create_links_for_files):
	Fixed 4946 - Create link consistently crashes Nautilus.
	Fixed it by implementing the proper positioning code for creating
	symbolic links from a context menu, copying the logic from the
	"Duplicate selection" code path.

2000-12-03  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-softcat.c:	
	(eazel_softcat_initialize):
	Default some of the private attributes to sane values.

2000-12-02  Robert Brady  <robert@suse.co.uk>

	* configure.in (ALL_LINGUAS): Add ta (Tamil).

2000-12-01  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c: (category_clicked_callback):
	fixed bug 4937, changing pane in remove mode crashes Nautilus,
	by exiting remove mode when switching categories.
	
2000-12-01  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-window-toolbars.c: (theme_changed_callback):
	fixed bug where throbber was mispositioned after theme changes by
	forcing a toolbar resize when the theme changes.
	
	* icons/eazel/i-directory.xml:
	tweaked folder emblem positions
	
2000-12-01  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_insert_model_node): Fix bug 4930 (Tree sidebar
	panel doesn't expand remembered directories until second window is
	opened) by making sure to expand directories that should be
	expanded when initially inserting nodes, not just updating.

2000-12-01  Eskil Heyn Olsen  <eskil@eazel.com>

	Migrated more code into eazel-package-system and finished
	eazel-package-system-rpm3 (except for verify). This fixes 4858,
	4851.
	
	* components/services/install/command-line/eazel-test-packsys.c:
	(test_packagelist_prune), (test_package_load), (get_password_dude),
	(init_package_system), (test_matches_query), (get_package_list),
	(start_signal), (end_signal), (progress_signal), (is_installed),
	(test_install), (test_uninstall), (test_verify), (main):D
	All the code for the packagesytem test programs. It does test-
	queries, install and uninstall.
	
	* components/services/install/lib/Makefile.am:
	Moved softcat .h's files into
	includedir/libtrilobite/eazel/package-sytem/
	
	* components/services/install/lib/eazel-install-corba-callback.c:
	(eazel_install_callback_initialize):
	Fixed the IDL rename, which broke the eazelinstall init.
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_start_transaction):
	Some comments about codepieces that needs removal.
	
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_get_readable_name), (packagedata_get_name):
	Changed get_readable's names output for rpmid's.
	Added a function that returns name-version-release names.
	
	* components/services/install/lib/eazel-package-system-rpm3.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(make_rpm_argument_list), (destroy_string_list),
	(rpm_make_names_to_package_hash), (clear_name_to_package),
	(get_total_size_of_packages), (monitor_rpm_process_pipe),
	(rpm_create_db), (rpm_create_dbs), (rpm_open_db), (rpm_open_dbs),
	(rpm_close_db), (rpm_close_dbs), (rpm_free_db), (rpm_free_dbs),
	(rpm_packagedata_fill_from_rpm_header),
	(rpm_packagedata_fill_from_file), (rpm_packagedata_new_from_file),
	(eazel_package_system_rpm3_load_package),
	(eazel_package_system_rpm3_query_impl),
	(eazel_package_system_rpm3_query_substr),
	(eazel_package_system_rpm3_query_foreach),
	(eazel_package_system_rpm3_query), (display_arguments),
	(monitor_subcommand_pipe), (eazel_package_system_rpm3_execute),
	(eazel_package_system_rpm3_install_uninstall),
	(eazel_package_system_rpm3_install),
	(eazel_package_system_rpm3_uninstall),
	(eazel_package_system_rpm3_verify),
	(eazel_package_system_rpm3_finalize),
	(eazel_package_system_rpm3_initialize),
	(eazel_package_system_rpm3_new),
	(eazel_package_system_implementation):
	Finished the rpm3 library.

	* components/services/install/lib/eazel-package-system-private.h:
	* components/services/install/lib/eazel-package-system.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_load_implementation),
	(eazel_package_system_load_package), (eazel_package_system_query),
	(eazel_package_system_install), (eazel_package_system_uninstall),
	(eazel_package_system_verify), (eazel_package_system_emit_start),
	(eazel_package_system_emit_progress),
	(eazel_package_system_emit_failed),
	(eazel_package_system_get_debug), (eazel_package_system_set_debug),
	(eazel_package_system_class_initialize),
	(eazel_package_system_initialize),
	(eazel_package_system_marshal_BOOL__ENUM_POINTER_POINTER),
	(eazel_package_system_marshal_BOOL__ENUM_POINTER):
	Fixed the usual signal bloopers, added the arguments to _new that
	lets the system get it's dbpaths/root sets, fixed other small bugs.

	* components/services/install/lib/eazel-package-system-skeleton.h:
	* components/services/install/lib/eazel-package-system-skeleton.c:
	(eazel_package_system_skeleton_query),
	(eazel_package_system_skeleton_install),
	(eazel_package_system_skeleton_uninstall),
	(eazel_package_system_skeleton_verify),
	(eazel_package_system_skeleton_new),
	(eazel_package_system_implementation):
	Updated the skeleton library.

2000-12-01  Robin * Slomkowski  <rslomkow@eazel.com>

	* nautilus.spec.in: added libeazelsoftcat libs

2000-12-01  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Worked around without fixing cause of bug 2151 (crash in
	Undo manager on quit). We can defer fixing the bug properly
	until we have Undo working again.

	* libnautilus-extensions/nautilus-undo-signal-handlers.c:
	(nautilus_undo_editable_set_undo_key): Added FIXMEs with bug
	number 3515 ("Undo doesn't work").
	* src/nautilus-shell-ui.xml: Added FIXME with bug number 3515.

	* src/file-manager/fm-properties-window.c: (create_basic_page),
	(create_properties_window_callback): #ifdeffed out undo code
	and added FIXME with bug number 2151.

2000-12-01  Pavel Cisler <pavel@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(progress_dialog_set_to_from_item_text), (handle_xfer_ok),
	(handle_xfer_vfs_error), (handle_xfer_overwrite), (get_link_name),
	(nautilus_file_operations_copy_move),
	(nautilus_file_operations_new_folder),
	(nautilus_file_operations_move_to_trash),
	(nautilus_file_operations_delete), (do_empty_trash):
	
	Fixed 3392 - Messages in nautilus-file-operations hard to localize.

	Replaced all the cases that did "clever" string composition from
	parts depending on the specific file operation with full texts of
	the respective error alerts and progress dialog label texts and
	titles.
	Changed action_verb to action_label.
	Got rid of progress_dialog_set_files_done_text because the the
	"Files copied:" etc. label is no longer composed.
	Added switch statements in handle_xfer_vfs_error that choose the
	right error text based on the xfer operation kind.
	
	Fixed 3139 - Add comments to all the localizable strings to make them
	easier to localize. 
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(icon_position_iterator_new),
	* libnautilus-extensions/nautilus-file-operations.h:
	(nautilus_file_operations_copy_move),
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_get_icon_locations),
	(nautilus_icon_container_get_selected_icon_locations):
	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(handle_nonlocal_move), (nautilus_icon_container_find_drop_target):
	* libnautilus-extensions/nautilus-icon-private.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class), (duplicate_callback),
	(fm_directory_view_create_links_for_files), (offset_drop_points),
	(fm_directory_view_duplicate_selection),
	(fm_directory_get_selected_icon_locations),
	(fm_directory_view_move_copy_items):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_get_selected_icon_locations),
	(fm_icon_view_set_selection), (fm_icon_view_initialize_class),
	(icon_view_move_copy_items):
	* src/file-manager/fm-list-view.c: (fm_list_view_initialize_class),
	(fm_list_view_get_selected_icon_locations),
	(fm_list_view_sort_items):

	Fixed 2817 - when you duplicate a file, it doesn't end up in the correct
	position.

	Redid the icon position array to use GArray instead of a simple vector of
	GdkPoints. GArray contains the count of all the contained points
	which is now needed.
	Added new calls to get the icon locations of selected icons and
	of a list of NautilusIcon objects.
	Passed the list of icon locations to the duplicate method.
	Added a default signal handler that returns the list of
	icon locations of selected icons.
	Added code to fm_directory_view_duplicate_selection that
	offsets the new duplicates to the left and bottom of the
	original item.
	

2000-12-01  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	Fixed bug 4911 (Crash emptying trash while displaying
	properties window for trashed file)

	This crawled out of the woodwork recently, and required
	several small fixes here and there to solve it nicely,
	including making FMPropertiesWindow a subclass --
	formerly it was just a GtkWindow with a bunch of wired-up
	widgets.

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_directory_item_count),
	(nautilus_file_get_deep_counts): Allow non-directory items
	(files marked gone don't count as directories). Fill in
	return values in all cases, even return_if_fail cases.
	
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file): Specific error message for
	the case where the file being renamed no longer exists. I
	ran into this partway through my changes, tested this fix,
	then changed the caller to not hit this case.
	
	* src/file-manager/fm-properties-window.h:
	Standard header stuff now that FMPropertiesWindow is a class
	and not just some grouped functions.
	* src/file-manager/fm-properties-window.c:
	(fm_properties_window_initialize_class),
	(fm_properties_window_initialize): Standard functions needed
	for class.
	(name_field_done_editing): Don't try to rename file that's gone.
	(create_group_menu_item), (create_owner_menu_item): 
	Added some parameter checking.
	(synch_groups_menu), (synch_owner_menu): Check for NULL result
	from nautilus_file_get_string_attribute before making a menu
	item from it (GTK is unhappy with using NULL for a label).
	(directory_contents_value_field_update): Soften assert to make
	it not fire when file is gone.
	(update_permissions_check_button_state): Bail out if file is gone.
	(create_properties_window): Create an FMPropertiesWindow instead
	of a GtkWindow; set up its Details.
	(create_properties_window_callback): Removed signal handler for
	"destroy" now that there's a default handler for this class.
	(forget_properties_window): Removed function, guts now in 
	real_destroy.
	(real_shutdown): Disconnect file-changed signal here. This is the
	core fix of the infinite loop reported in bug 4911.
	(real_destroy): Do the stuff formerly done in 
	forget_properties_window here.

2000-12-01  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-window.c: (nautilus_window_destroy):
	fixed bug 4921, crash when changing sidebar panels preferences
	after opening new window, by fixing the call to remove the
	preferences callback to have the right callback data.
	
2000-12-01 John Fleck <jfleck@inkstain.net>

	* nautilus/components/help/converters/gnome-db2html2/gdb3html.h,
	sect-elements.c, sect-preparse.c,toc-elements.c: add support for
	<example> tag, fixing bug #4378
	
2000-12-01  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler  <pavel@eazel.com>

	* components/tree/nautilus-tree-view.c:
	(expand_uri_sequence_and_select_end): Avoid forcing a reload of a
	node while trying to find a location to select unless we get
	stuck; and even then, do only a shallow force reload, not a deep
	force reload. This fixes bug 4890 (Tree view makes normal
	navigation very slow if a large directory is expanded).
	(reload_model_node_recursive): Renamed from `reload_model_node' to
	make clear that it will also reload all expanded subnodes.
	(reload_model_node): Non-recursive version of
	`reload_model_node_recursive'.
	(reload_whole_tree, expand_node_for_file): Use
	`reload_model_node_recursive' instead of the new non-recursive
	version.
	(nautilus_tree_view_remove_model_node,
	(nautilus_tree_view_update_model_node): Added ifdef'd-out
	debugging text for future use.
	
2000-11-30  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Robey Pointer  <robey@eazel.com>
	
	* components/tree/nautilus-tree-model.c (report_node_changed):
	Don't do anything if we don't know the file type yet, since this
	may cause directories to mistakenly lose their children. This
	fixes bug 4912 (Nautilus crashes in tree code when multiple
	windows are open).

	* components/tree/nautilus-tree-view-private.h: Remove unused
	file_to_hack_node_map field from details struct.

2000-11-30  Robey Pointer  <robey@eazel.com>

	* components/rpmview/Makefile.am:
	* components/services/install/command-line/Makefile.am:
	* components/services/install/nautilus-view/Makefile.am:
	* components/services/install/server/Makefile.am:

	Everyone that uses libeazelinstall now needs to use
	libeazelsoftcat too.  This doesn't make much sense for the rpm
	view, but we've shelved that issue for later.
	
	* components/services/install/command-line/eazel-test-softcat.c:
	(main):

	New test program (eazel-softcat) to perform primitive softcat
	queries and check the results.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package):

	Removed get_search_url_for_package and get_url_for_package: they
	now belong to libesc.
	
	* components/services/install/lib/eazel-install-types.c:
	(eazel_install_protocol_as_string), (packagedata_new),
	(packagedata_copy), (packagedata_fill_in_missing),
	(packagedata_destroy), (gstr_indent), (dump_package_list),
	(packagedata_dump_int), (packagedata_dump):
	* components/services/install/lib/eazel-install-types.h:

	Add "features" field which is a GList<char *> of features this
	package resolves for its parent.  Moved fill_in_missing here since
	it's PackageData-centric.  Added debugging function for dumping a
	PackageData into a human-readable string.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(osd_parse_list), (osd_parse_dependency),
	(osd_parse_implementation), (osd_parse_softpkg),
	(eazel_install_packagelist_parse):
	* components/services/install/lib/eazel-install-xml-package-list.h:

	Parse the "provides" list from softcat: this will change once
	softcat finishes revising their XML format, but we need something
	to work with for now.  Pull out other values like the Eazel id,
	and tie "abstract" to summary instead of description.  Fix the OSD
	parser so that we can distinguish an error return from an empty
	package list.
	
	* components/services/install/lib/eazel-softcat-private.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_initialize), (eazel_softcat_new),
	(eazel_softcat_set_server), (eazel_softcat_get_server),
	(eazel_softcat_set_cgi_path), (eazel_softcat_get_cgi_path),
	(eazel_softcat_set_authn), (eazel_softcat_get_authn),
	(eazel_softcat_set_retry), (eazel_softcat_error_string),
	(sense_flags_to_softcat_flags), (gnome_vfs_escape_string),
	(add_to_url), (verify_softcat_fields),
	(get_search_url_for_package), (eazel_softcat_get_info):
	* components/services/install/lib/eazel-softcat.h:

	Actually implement a good chunk of the softcat library.
	
	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.c: (trilobite_get_distribution_enum),
	(trilobite_get_distribution_arch):
	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.h:

	Move architecture detection here.
	
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_fetch_uri), (trilobite_init),
	(trilobite_set_debug_mode), (trilobite_set_log_handler):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.h
	:

	Split out log handling so that test programs can trap trilobite
	log entries.
	
2000-11-30  Rebecca Schulman  <rebecka@eazel.com>
	Fixed bug 3750, to make cut/copy/paste work
	in the complex search bar

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* src/nautilus-complex-search-bar.h:
	* src/nautilus-complex-search-bar.c:
	(nautilus_complex_search_bar_new),
	Set up the first criterion after we create 
	the bar.
	(nautilus_complex_search_bar_set_up_enclosed_entry_for_clipboard):
	add a second procedure that new criteria with entries call
	when they are added.
	* src/nautilus-search-bar-criterion.c:
	(nautilus_search_bar_criterion_new_with_type):
	set an entry up for the clipboard, if one exists.

2000-11-30  Mike Fleming  <mfleming@eazel.com>

	reviewed by: ramiro@eazel.com

	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(mozilla_net_state_callback), (mozilla_net_stop_callback),
	(mozilla_progress_callback):

	fix bugzilla.eazel.com 4113: 
	Some web pages never finish loading (throbber spins)

	Instead of replying on "max_progress == cur_progress"
	doing mozilla_progress_callback, stop throbber on a "net_stop"
	signal.  Galeon uses "net_stop" for this functionality as well.

2000-11-30  Darin Adler  <darin@eazel.com>

	Ran check-headers-in-Makefile since we had some problems
	with that lately. I guess the Tinderbox is the new way to
	catch these problems but I couldn't resist fixing them
	the old way too.

	* check-headers-in-Makefile.pl: Added some more special cases
	in here to make it work better.

	* components/services/install/nautilus-view/Makefile.am:
	Marked the unused files in here as "noinst_HEADERS" as a hack
	to make the script happy. We should delete the files at some
	point if we decide we aren't ever using them.

	* components/loser/content/.cvsignore:
	* components/loser/sidebar/.cvsignore:
	* components/mozilla/.cvsignore:
	* components/sample/.cvsignore:
	* components/services/install/command-line/.cvsignore:
	* libnautilus/.cvsignore:
	* src/.cvsignore:
	* src/file-manager/.cvsignore:
	Removed all the .xml.h files because they aren't put in these
	directories any more so they don't need to be ignored. If you
	have the files still and the cvs warnings bother you, you can
	delete them.

2000-11-30  Andy Hertzfeld  <andy@eazel.com>

	* components/image-viewer/nautilus-image-view.c:
	(zoomable_zoom_in_callback):
	fixed bug in image viewer where zooming in skipped a level if you
	were zoomed to fit. Fixed by only incrementing the index if we're
	already at the current level.
	
2000-11-30  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4879, "unknown sort mode" warning upon sorting
	by "Time" column.

	The problem was caused by the sort mode enumeration being
	out of sync with the number of columns.  As a result
	most sorts were being done incorrectly with the wrong
	sort function. A new SORT_BY_YEAR entry was added to
	the sort enumeration to fix the problem.
	
	* components/music/nautilus-music-view.c: 
	(sort_song_list):
	Add SORT_BY_YEAR case to switch statement.

	(sort_by_year):
	New sort function to sort by year.

2000-11-30  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3891, Repeatedly clicking the "Play" button
	crashes Nautilus.
	
	* components/music/nautilus-music-view.c: 
	(play_button_callback): Don't start playback machinery
	if a file is already playing.

	* components/music/mpg123_handler.c: (start_playing_file):
	Add check for playback before starting playback of another
	file.
	
2000-11-30  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3888, Deleting an MP3 file while in use -> Nautilus crashes

	Added a check for the existence of a file before beginning playback.
	If the file is no longer available, remove the file form the 
	song list and attempt to play the next file in the song list.

	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize), (play_current_file):

2000-11-30  John Sullivan  <sullivan@eazel.com>

	reviewed by: Rebecca Schulman  <rebecka@eazel.com>

	Fixed bug 4899 (Bookmark for nonexistent file can cause
	infinite loop at startup)

	Changed NautilusBookmark's internal logic so that it doesn't
	keep around a file object for known non-existent URIs. The
	trick is to get it to notice when the URI is no longer non-existent
	and get a fresh file object then. This is done imperfectly, but
	the new symptom is very minor and deferrable (wrote it up as bug 4906).

	* libnautilus-extensions/nautilus-bookmark.c:
	(nautilus_bookmark_connect_file): Don't get a new NautilusFile
	object if we know the URI doesn't exist; instead just set the
	missing-bookmark icon. Also made it safe to call this routine
	when there's already a file object in hand (just bails out early).
	(nautilus_bookmark_get_icon), (nautilus_bookmark_get_uri): 
	Call nautilus_bookmark_connect_file so that it will connect to a 
	now-existing file if possible (and thus	get the right icon).
	Since callers that try to activate the bookmark will call get_uri,
	one way to kick a reincarnated bookmark's icon into appearing is
	to select it in a menu.
	(nautilus_bookmark_get_pixbuf): Call nautilus_bookmark_get_icon to
	benefit from its connect_file logic.


	Fixed bug 3847 (Icon in properties window flashes while 
	folder count increments)

	* libnautilus-extensions/nautilus-image.c:
	(nautilus_image_set_pixbuf): Don't call gtk_widget_queue_resize if
	the pixbuf hasn't changed.


	Fixed bug 1454 (Properties dialog needs mucho tweaking)

	Mostly this was changes to match Arlo's design that he gave me
	ages ago. I also fixed a few other problems.

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_date_as_string): Change format of date
	strings from "<date> <time>" to "<date> at <time>" to match
	Arlo's design.
	* src/file-manager/fm-properties-window.c: 
	(attach_label): Now handles requests for a bold font.
	(attach_value_label): Renamed from attach_left_aligned_label, use bold 
	font here.
	(attach_value_field),(attach_directory_contents_value_field):
	updated for name change.
	(attach_right_aligned_label): Removed, guts moved to caller.
	(attach_title_field): Use bold font here.
	(attach_option_menu): New helper function to share code between
	attach_group_menu and attach_owner_menu; now uses gtk_alignment
	to make the menu be minimally-sized and left-aligned.
	(attach_group_menu), (attach_owner_menu): Use attach_option_menu.
	(attach_separator): New helper function to install a separator
	across both columns of a properties window table.
	(create_basic_page): Use gtk_alignment to make the icon right-aligned;
	make the blank row above date rows be standard height.
	(create_emblems_page): Changed layout so name appears below emblem
	rather than to its right; this matches Customize window and allows
	the Properties window to be a smaller width, which looks much better
	for the other panes. Also, the emblems are now layed out lrtb instead of
	tblr.
	(add_permissions_column_label): Make these labels bold.
	(add_special_execution_flags): Attach a separator.
	(get_adjusted_permissions_row): Helper function to account for the "special
	flags" rows, which are not always displayed.
	(create_permissions_page): Deploy get_adjusted_permissions_row wherever a
	raw row number was used; insert separators.
	(create_properties_window): Allow window to be stretched, since the emblems
	don't all fit at initial window height (so user can stretch rather than
	scrolling if desired).

2000-11-30  Rebecca Schulman  <rebecka@eazel.com>
	Fix for bug 2438, that we need to handle bad user
	input when searching by size.  

	reviewed by: John Sullivan <sullivan@eazel.com>

	* src/nautilus-complex-search-bar.c: (criteria_invalid):
	Add a check in here for size criteria specifically,
	that declares the criteria invalid if there is a
	non-integer value in the entry.

2000-11-30  Andy Hertzfeld  <andy@eazel.com>

	* components/text/nautilus-text-view.c: (add_one_service),
	(add_services_to_menu), (update_service_menu_items):
	only disable selection dependent services when there's no selection.
	
2000-11-30  Andy Hertzfeld  <andy@eazel.com>

	* components/text/services/Makefile.am:
	* components/text/services/english_to_french.xml:
	added sample document-oriented text view service.
	
2000-11-29  Gene Z. Ragan  <gzr@eazel.com>

	Fixed part of bug 2171. Garbage was appearing in the song
	duration text field. This was cause by not reading in the 
	MP3 header data. In most cases this is due to the presence 
	of an ID3v2 at the start off the file.  We check for this and
	hop over it if such data is present.
	
	* components/music/mp3head.c: (get_bitrate), (get_samprate),
	(get_stereo), (compare), (sync_scan), (sync_test), (find_sync),
	(get_header_info), (get_header_info_extended):
	Some addition header handling functions for better diagnostics.
	
	* components/music/mp3head.h:
	Added function prototypes and ID3v2 header structure.
	
	* components/music/nautilus-music-view.c: 
	(fetch_song_info),
	(nautilus_music_view_update):

2000-11-30  Andy Hertzfeld  <andy@eazel.com>

	* components/text/nautilus-text-view.c:
	(nautilus_text_view_initialize), (add_one_service),
	(nautilus_text_view_build_service_menu),
	(update_service_menu_items):
	made the service menu items be enabled and disabled appropriately
	based on whether there's a selection or not, by attaching to the
	button_release_event and key_press_event of the text object
	
2000-11-29  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus.spec.in:
	One more fix, forgot a */ level.

2000-11-29  Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c
	(nautilus_directory_forget_file_attributes): Fix build problem.

2000-11-29  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/Makefile.am:
	Fixed noinst blunders.

2000-11-29  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bugs 4385 (Nautilus doesn't gracefully handle deleting
	in-use image file), 3240 (reloading a directory doesn't update
	directory counts of the entries) and 4683 (embedded text on icon
	isn't updated when text changes) by implementing forgetting of
	file attributes and using it when appropriate.

	Also fixed various other bugs caught by testing of these fixes or
	reading the code.

	* libnautilus-extensions/nautilus-file.c: 
	(nautilus_file_forget_attributes): New function that makes the
	file forget the specified attributes, including cancelling
	possible in-progress I/O for them, and kicking off new I/O if
	anyone is monitoring any of the attributes or has a pending
	call_when_ready.
	(nautilus_file_forget_attributes_internal): Forget all attributes
	of this file, *not* including cancelling in-progress I/O, or
	kicking off new I/O. This is for the benefit of NautilusDirectory
	being able to forget the attributes of all files it is monitoring
	at one go.
	(nautilus_file_forget_all_attributes): Forget all attributes of
	this file, including cancelling in-progress I/O, and kicking off
	new I/O.
	(forget_directory_count, forget_deep_counts, forget_mime_list,
	forget_top_left_text, forget_file_info, forget_activation_uri):
	Helper functions to forget individual attributes.
	(nautilus_file_forget_activation_uri): Removed as obsolete.
	(destroy): use `nautilus_g_list_free_deep' to free the mime list.

	* libnautilus-extensions/nautilus-directory-notify.h: Remove
	prototype for `nautilus_file_forget_activation_uri'.

	* libnautilus-extensions/nautilus-file-private.h: Prototype
	`nautilus_file_forget_attributes_internal'.

	* libnautilus-extensions/nautilus-file.h:
	`nautilus_file_forget_attributes' and
	`nautilus_file_forget_all_attributes'.

	* libnautilus-extensions/nautilus-link.c
	(nautilus_link_local_set_link_uri): Use
	`nautilus_file_forget_attributes', not
	`nautilus_file_forget_activation_uri' to ensure reload of the
	activation URI.
	(forget_file_activation_uri): Helper function for the above.
		
	* libnautilus-extensions/nautilus-directory-async.c
	(nautilus_directory_cancel_loading_file_attributes): Function to
	cancel in-progress I/O for a given set of attributes but only if
	it is in progress for the specified file. This function is used to
	implement part of `nautilus_file_forget_attributes'.
	(cancel_directory_count_for_file, cancel_deep_counts_for_file,
	cancel_mime_list_for_file, cancel_top_left_text_for_file,
	cancel_file_info_for_file, cancel_activation_uri_for_file): Helper
	functions for the above.
	(nautilus_directory_force_reload): Add a `file_attributes'
	argument and make sure to forget the specified
	attributes. Forgetting the attributes fixes bugs 3240 and 4683.
	(nautilus_directory_forget_file_attributes): Function to forget
	the specified attributes for all files. It makes sure to only
	cancel and kick off new I/O once.
	(cancel_loading_attributes): helper function for the above that
	cancels in-progress loads for the specified attributes, regardless
	of for what file.
	(request_is_satisfied): The request is not satisfied if the
	request calls for top left text and the file lacks it.	
	(top_left_read_callback): Set 1got_top_left_text' field of the
	NautilusFile to TRUE. This problem was masked by the problem with
	`request_is_satisfied' fixed above.
	(set_up_request_by_file_attributes): Make sure to request the
	file_info as well if top left text is requested, since
	applicability of top left text depends on the mime type.
	(get_info_callback): Mark the file gone if we get
	GNOME_VFS_ERROR_NOT_FOUND; we can only get this error for files
	gnome-vfs should know about but that do not exist. This is needed
	to detect files that are removed on a reload.

	* libnautilus-extensions/nautilus-directory-private.h: Update
	prototype for `nautilus_directory_force_reload'; Prototype
	`nautilus_directory_cancel_loading_file_attributes'

	* libnautilus-extensions/nautilus-vfs-directory.c
	(vfs_file_monitor_add): Pass the file attributes to
	`nautilus_directory_force_reload' since it now wants them.

	* src/nautilus-window-manage-views.c
	(viewed_file_changed_callback): Cancel location change before
	closing the window, since detecting the file is gone is now likely
	to happen in the middle of an in-progress reload, and we get
	crashes if this is not done.	
	(nautilus_window_begin_location_change): If we're doing a reload,
	forget all file attributes of the NautilusFile for the currently
	viewed location. This is to make sure we detect if the file is
	gone, and also update the sidebar panel icon and other info
	appropriately. This fixes bug 4385.

2000-11-29  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/Makefile.am:
	* components/services/install/command-line/eazel-test-packsys.c:
	(make_package), (test_packagelist_prune), (test_package_load),
	(init_package_system), (test_matches_query), (main):
	Some code to test some of the packagesystem functions
	
	* components/services/install/lib/Makefile.am:
	build the skeleton and rpm3 package system

	* components/services/install/lib/eazel-install-corba-callback.c:
	(eazel_install_callback_simple_query):
	Fixed indentation
	
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_set_arg), (eazel_install_class_initialize),
	(eazel_install_initialize):
	added ssl_rename and ignore_file_conflicts to the gtkarg sytem.
	Added some comments reg. bug 4851

	* components/services/install/lib/eazel-install-problem.c:
	(find_dominant_problems):
	Null input if empty
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_start_transaction_make_rpm_argument_list):
	Fixed a uninstall bug in the rpm arg building.
	
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_list_prune):
	Implemented a function to prune a list of packagedata objects from
	another list.
	
	* components/services/install/lib/eazel-package-system-private.h:
	* components/services/install/lib/eazel-package-system-rpm3.c:
	(get_and_set_string_tag), (rpm_packagedata_fill_from_rpm_header),
	(rpm_packagedata_fill_from_file), (rpm_packagedata_new_from_file),
	(eazel_package_system_rpm3_load_package),
	(eazel_package_system_rpm3_query_impl),
	(eazel_package_system_rpm3_query_substr),
	(eazel_package_system_rpm3_query_foreach),
	(eazel_package_system_rpm3_query),
	(eazel_package_system_rpm3_install),
	(eazel_package_system_rpm3_uninstall),
	(eazel_package_system_rpm3_verify),
	(eazel_package_system_rpm3_open_roots),
	(eazel_package_system_rpm3_finalize),
	(eazel_package_system_rpm3_class_initialize),
	(eazel_package_system_rpm3_initialize),
	(eazel_package_system_rpm3_get_type),
	(eazel_package_system_rpm3_new),
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-rpm3.h:
	* components/services/install/lib/eazel-package-system-skeleton.c:
	(eazel_package_system_skeleton_load_package),
	(eazel_package_system_skeleton_query),
	(eazel_package_system_skeleton_install),
	(eazel_package_system_skeleton_uninstall),
	(eazel_package_system_skeleton_verify),
	(eazel_package_system_skeleton_finalize),
	(eazel_package_system_skeleton_class_initialize),
	(eazel_package_system_skeleton_initialize),
	(eazel_package_system_skeleton_get_type),
	(eazel_package_system_skeleton_new),
	(eazel_package_system_implementation):
	* components/services/install/lib/eazel-package-system-skeleton.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_suggest_id),
	(eazel_package_system_load_implementation),
	(eazel_package_system_load_package), (eazel_package_system_query),
	(eazel_package_system_install), (eazel_package_system_uninstall),
	(eazel_package_system_verify), (eazel_package_system_emit_start),
	(eazel_package_system_emit_progress),
	(eazel_package_system_emit_failed),
	(eazel_package_system_emit_end),
	(eazel_package_system_class_initialize),
	(eazel_package_system_initialize), (eazel_package_system_new_real),
	(eazel_package_system_new_with_id), (eazel_package_system_new),
	(eazel_package_system_marshal_BOOL__POINTER_ENUM_POINTER_POINTER),
	(eazel_package_system_marshal_BOOL__POINTER_ENUM_POINTER):
	* components/services/install/lib/eazel-package-system.h:
	working on 4850, 4851, 4852 and 4858.
	
	* components/services/trilobite/libtrilobite/libtrilobite.h:
	
	* nautilus-installer/src/callbacks.c: (begin_install):
	* nautilus-installer/src/installer.c: (skip_over_remove_problems),
	(jump_to_retry_page), (install_done), (go_live),
	(eazel_installer_add_category), (eazel_installer_do_install),
	(eazel_installer_post_install), (draw_splash_text),
	(eazel_installer_set_default_texts), (eazel_installer_initialize):
	* nautilus-installer/src/installer.h:
	The last of the pr2.1 stuff.
	
	* nautilus.spec.in:
	devel package includes libtrilobite/eazel/*

2000-11-29  Darin Adler  <darin@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed some problems with callbacks that are left around after
	the object is destroyed.

	* src/nautilus-window-manage-views.h:
	* src/nautilus-window-manage-views.c:
	(viewed_file_changed_callback): Changed to be a normal callback,
	not a "connect_object" callback, and simplified the logic.
	(cancel_viewed_file_changed_callback): Added a function to cancel
	the callback, which is needed both when the window is destroyed
	and when the viewed file changes.
	(update_for_new_location): Cancel the old callback before setting
	up the new one so we don't leave behind callbacks for old locations.
	Also use the new nautilus_window_set_viewed_file function so the
	callbacks set up in nautilus-window.c can be managed properly.
	(free_location_change): Moved part of
	nautilus_window_free_load_info in here. This function frees all
	the stuff that's used in the location change process; shared by
	destroy and "cancel" code. Also fixed a bug where it wouldn't free
	the "error_views".
	(cancel_location_change): Moved the rest of
	nautilus_window_free_load_info in here and made this use the new
	function.
	(disconnect_view): Made this private now that the code to
	disconnect the views is inside this file.
	(disconnect_view_callback),
	(nautilus_window_manage_views_destroy): Moved the code to clean up
	from nautilus-window.c in here. Added cleanup for the location
	change fields and for the viewd_file_changed callback.
	
	* src/nautilus-window.c: 
	(nautilus_window_destroy): Call a new function to do the
	nautilus-window-manage-views.c part of the destroy and moved some
	code in there. Cancel the view-as callback too.
	(create_view_as_menu_item),
	(replace_special_current_view_in_view_as_menu),
	(nautilus_window_synch_view_as_menu): Renamed. The words "view as
	menu" are clearer than "content view menu".
	(chose_component_callback): Got rid of code that tries to handle
	bad values for callback data. The callback must be cancelled,
	because you can't call NAUTILUS_IS_WINDOW on a freed window and
	expect it to behave predictably.
	(cancel_chose_component_callback): Function to cancel the callback,
	called at both destroy time and before adding a new one.
	(view_menu_choose_view_callback): Cancel the old callback before
	adding a new one.
	(view_menu_vfs_method_callback): Simplify logic a bit.
	(load_view_as_menu_callback): Renamed.
	(cancel_view_as_callback): Function to cancel the callback, called
	at both destroy time and before adding a new one.
	(nautilus_window_load_view_as_menu): Cancel the old callback before
	adding a new one. Also renamed.
	(nautilus_window_set_viewed_file): A new function that cancels the
	callbacks on the file object before switching to a new one.
	
	* libnautilus-extensions/nautilus-program-choosing.c:
	(nautilus_cancel_choose_component_for_file): Implemented missing
	cancel function, needed by new window code.
	
	* src/nautilus-window-private.h:
	* src/nautilus-window-menus.c:
	(bookmarks_menu_add_bookmark_callback),
	(add_bookmark_for_current_location): Made the function local to
	this file since it's both defined and used here.

	* libnautilus-extensions/nautilus-glib-extensions.c:
	* libnautilus-extensions/nautilus-volume-monitor.c:
	* libnautilus/nautilus-undo-transaction.c:
	* libnautilus/nautilus-view.c:
	* librsvg/rsvg.c:
	Added missing "static" to make some local non-"nautilus_"-prefixed
	globals be internal instead of external.
	
	* src/nautilus-sidebar.c: Formatting tweaks, added FIXME.

2000-11-29  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus.spec.in:
	* README:
	Add esound dependency.  We've used esound to do sound previews and 
	in the Music View, but the the dependency was never reflected in
	the spec file or documentation.
	
2000-11-29  Andy Hertzfeld  <andy@eazel.com>

	* components/text/nautilus-text-view.c:
	(nautilus_text_view_load_uri), (text_view_load_location_callback),
	(handle_service_menu_item), (service_menu_item_parameters_new),
	(service_menu_item_parameters_free), (add_one_service):
	added the ability for a text view service to operate on the entire
	document and return a mapped version, which replaces the original.

	* components/text/services/google.xml:
	* components/text/services/webster.xml:
	marked the existing services, which operate on the selection, as such
	
2000-11-28  Andy Hertzfeld  <andy@eazel.com>

	implementated data-driven framework for text view services. The text
	view dynamically builds the services menu by iterating a directory
	looking for xml files.  Added service definition files for two sample
	services.  It only supports passing the selection to the service;
	passing the entire document is coming soon.
		
	* components/text/Makefile.am:
	include the services directory in the build

	* configure.in:
	* components/text/services/.cvsignore:
	* components/text/services/Makefile.am:
	build stuff for services directory

	* components/text/services/google.xml:
	* components/text/services/webster.xml:
	definition files for our twp sample services
			
	* components/text/nautilus-text-view-ui.xml:
	removed hardwired service menu items
	
	* components/text/nautilus-text-view.c: (handle_service_menu_item),
	(service_menu_item_parameters_new),
	(service_menu_item_parameters_free), (add_one_service),
	(add_services_to_menu), (nautilus_text_view_build_service_menu),
	(merge_bonobo_menu_items):
	implemented framework to dynamically load service definitions and
	execute them when their menu item is selected.
	
2000-11-28  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_log):

	Only log debug messages if debug flag is set.
	
	* nautilus-installer/src/installer.c: (start_logging):
	* nautilus-installer/src/main.c: (main):

	Add --spam/-x flag to the installer to cause debug logging to go
	to stderr in addition to the logfile.  Make --debug/-d flag not do
	that spamming anymore, and make it turn off debugging logs when
	this flag isn't used.

2000-11-28  Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-user-level-manager.c:
	* libnautilus-extensions/nautilus-user-level-manager.h:
	Got rid of _get_num_user_levels call.

2000-11-28  Darin Adler  <darin@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-view-identifier.h: Remove
	HAVE_POPT_H define since the bug in OAF that we were working
	around has been fixed.
	
	* components/music/nautilus-music-view.c: Remove unneeded
	includes.
	
	* components/rpmview/nautilus-rpm-view.c: Remove unused
	#define and FIXME for bug already fixed.
	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_destroy): Remove FIXME for bug already fixed.
	* libnautilus-extensions/nautilus-global-preferences.c: Remove
	FIXME for bug already fixed.
	* libnautilus-extensions/nautilus-user-level-manager.c: Remove
	FIXME for bug already fixed.
	* src/file-manager/fm-list-view.c: (fm_list_get_default_action):
	Remove FIXME for bug already fixed.
	* src/nautilus-property-browser.c: (add_background_to_browser):
	Remove FIXME for bug already fixed.
	* src/nautilus-window.h: Remove FIXME for bug already fixed.
	
	* tools/README: Remove file now that people have had a chance to
	find the tools in their new location, so the directory will go
	away.

2000-11-28  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 4257 (right click on background in icon or list
	view doesn't leave context menus up)

	This was a problem with nautilus_pop_up_context_menu. It
	wasn't passing the event time, which caused GTK to think
	that the button-release was for a later button press, and
	consequently to close the context menu. It appears that the
	root cause may be a gtk menu handling bug, but this checkin
	fixes the problem as far as Nautilus is concerned.

	* libnautilus-extensions/nautilus-gtk-extensions.h:
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_pop_up_context_menu): Now takes event as a
	parameter, and passes event->time through to gtk_menu_popup.
	Passes 0 for button if event is a button release, to work with
	subtle logic in gtk popup menu-handling.

	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-container.c:
	Add event parameters to context-click signal handlers.
	(nautilus_icon_container_initialize_class): Change signal
	marshal and signature.
	(context_menu_parameters_new), (context_menu_parameters_free):
	New helper functions to manage callback data when delaying
	the appearance of a context menu.
	(button_press_event), (button_release_event),
	(show_context_menu_callback): Pass event when emitting signal.
	(handle_icon_button_press): Pass event as well as container
	to idle callback.
	
	* libnautilus-extensions/nautilus-list.h:
	* libnautilus-extensions/nautilus-list.c:
	Add event parameters to context-click signal handlers.
	(nautilus_list_initialize_class): Change signal marshal and
	signature.
	(context_menu_parameters_new), (context_menu_parameters_free):
	New helper functions to manage callback data when delaying
	the appearance of a context menu.
	(nautilus_list_button_press), (nautilus_list_button_release),
	(show_context_menu_callback): Pass event when emitting signal
	or setting up idle callback.
	
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_pop_up_selection_context_menu),
	(fm_directory_view_pop_up_background_context_menu):
	Take event parameter and pass it to
	nautilus_pop_up_context_menu.
	
	* src/file-manager/fm-icon-view.c:
	(icon_container_context_click_selection_callback),
	(icon_container_context_click_background_callback):
	Add event parameter to match signal change, and pass
	event when calling fm_directory_view_pop_up_xxx
	
	* src/file-manager/fm-list-view.c:
	(context_click_selection_callback),
	(context_click_background_callback):
	Add event parameter to match signal change, and pass
	event when calling fm_directory_view_pop_up_xxx
	
	* src/nautilus-window-toolbars.c:
	(back_or_forward_button_clicked_callback):
	Pass event for context menu on Back and Forward
	buttons (this code is still #ifdeffed out from Bonobo
	switchover, awaiting fix for bug 3510).

	* src/nautilus-sidebar.c: (nautilus_sidebar_press_event):
	Pass event for context menu in sidebar.

	* src/nautilus-zoom-control.c:
	(nautilus_zoom_control_button_press_event):
	Pass event for context menu in zoom control.

2000-11-28  Arlo Rose  <arlo@eazel.com>

	* /icons/loading.png:
	* /icons/eazel/fossil.png:
	* /icons/villanova/villanova_green.png:
	Fixed the white point problem on a few PNG files.
	I don't think this got them all.

2000-11-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:

	The real fix has now been found for tinderbox breakage.

2000-11-28  Rebecca Schulman  <rebecka@eazel.com>
	Fixes for bugs 2376, 4553, and 3799
	This should make the complex search bar usable
	and visible.

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* configure.in:
	* libnautilus-extensions/Makefile.am:
	* cut-n-paste-code/widgets/Makefile.am:
	* cut-n-paste-code/widgets/gimphwrapbox/.cvsignore:
	* cut-n-paste-code/widgets/gimphwrapbox/Makefile.am:
	* cut-n-paste-code/widgets/gimphwrapbox/gtkhwrapbox.c:
	(gtk_hwrap_box_get_type), (gtk_hwrap_box_class_init),
	(gtk_hwrap_box_init), (gtk_hwrap_box_new), (get_child_requisition),
	(_gtk_hwrap_box_size_request), (get_layout_size),
	(gtk_hwrap_box_size_request), (reverse_list_row_children),
	(layout_row), (layout_rows), (gtk_hwrap_box_size_allocate):
	* cut-n-paste-code/widgets/gimphwrapbox/gtkhwrapbox.h:
	* cut-n-paste-code/widgets/gimphwrapbox/gtkwrapbox.c:
	(gtk_wrap_box_get_type), (gtk_wrap_box_class_init),
	(gtk_wrap_box_init), (gtk_wrap_box_set_arg),
	(gtk_wrap_box_get_arg), (gtk_wrap_box_set_child_arg),
	(gtk_wrap_box_get_child_arg), (gtk_wrap_box_child_type),
	(gtk_wrap_box_set_homogeneous), (gtk_wrap_box_set_hspacing),
	(gtk_wrap_box_set_vspacing), (gtk_wrap_box_set_justify),
	(gtk_wrap_box_set_line_justify), (gtk_wrap_box_set_aspect_ratio),
	(gtk_wrap_box_pack), (gtk_wrap_box_reorder_child),
	(gtk_wrap_box_query_child_packing),
	(gtk_wrap_box_query_child_forced_break),
	(gtk_wrap_box_set_child_packing),
	(gtk_wrap_box_set_child_forced_break),
	(gtk_wrap_box_query_line_lengths), (gtk_wrap_box_map),
	(gtk_wrap_box_unmap), (gtk_wrap_box_draw), (gtk_wrap_box_expose),
	(gtk_wrap_box_add), (gtk_wrap_box_remove), (gtk_wrap_box_forall):
	* cut-n-paste-code/widgets/gimphwrapbox/gtkwrapbox.h:
	Copied and pasted the wrapping hbox from the Gimp.
	I made a few modifications, including some resizing requests,
	when the chosen size is not the right one for the actual 
	space available.  Sizing wrapping boxes is a tricky problem
	with gtk, because they have nonstandard sizing requests
	(they can request x or y or z) and my solution is probably
	not optimal, since some of the sizing adjustments are visible
	on screen.  However, a better fix is a lot more time consuming,
	and should probably wait for past 1.0.
	

	* src/nautilus-complex-search-bar.c:
	(search_bar_criterion_type_changed_callback),
	(queue_search_bar_resize_callback),
	(nautilus_complex_search_bar_initialize_class),
	(nautilus_complex_search_bar_initialize), (real_activate),
	(nautilus_complex_search_bar_queue_resize),
	(attach_criterion_to_search_bar),
	(unattach_criterion_from_search_bar),
	(load_find_them_pixmap_widget), (more_options_callback),
	(fewer_options_callback), (update_options_buttons_state):
	* src/nautilus-complex-search-bar.h:
	Changed the criteria layout to be in a vbox instead of a table,
	so that we can insert wrapping hboxes.  Added a new function
	that will effectively resize the complex search bar, and we call
	it at appropriate points. Switched the packing order of the
	buttons, since the wrap box has only one packing function, and it is
	a pack_start, rather than a pack_end function
	
	* src/nautilus-search-bar-criterion-private.h:
	* src/nautilus-search-bar-criterion.c: (queue_bar_resize_callback),
	(nautilus_search_bar_criterion_new_from_values),
	(nautilus_search_bar_criterion_show),
	(nautilus_search_bar_criterion_hide),
	(nautilus_search_bar_criterion_update_valid_criteria_choices),
	(hide_date_widget), (show_date_widget), (make_emblem_value_menu):
	Put the criteria into wrapping boxes as part of their creation, and 
	trigger a resize of the complex search bar when the wrapping box 
	complains about its allocated size.
	

2000-11-28  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(fill_canvas_from_gradient_buffer),
	(fill_drawable_from_gradient_buffer),
	(update_drawable_with_pixbuf), (draw_pixbuf_tiled):
	
	Update bug number in FIXME. Fixing some tabbing.

2000-11-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:

	One more try...

2000-11-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:

	Another stab at fixing tinderbox.

2000-11-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:

	Fixing tinderbox build breakage from my last checkin.

2000-11-28  Andy Hertzfeld  <andy@eazel.com>

	fixed bugs 4864, 4865, 4866 abd 4868, involving adding and removing
	items from the property browser, by rewording error messages and
	tweaking some logic.

	* src/nautilus-property-browser.c: (add_color_to_browser),
	(is_reserved_keyword), (emblem_dialog_clicked), (add_new_emblem),
	(make_properties_from_directories),
	(make_properties_from_xml_node):

2000-11-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/Makefile.am:

	Fix for bug #3110. Make sure the private headers do not
	get installed.

2000-11-28  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_initialize):
	Set cursor_obscured flag to false and update event mask
	to allow pointer moved events.
	
	(nautilus_entry_motion_notify):
	Display the cursor if it was previouslly hidden.

	(obscure_cursor):
	New function that hides the cursor when the user begins typing.

	(nautilus_entry_key_press):
	Call obscure_cursor function.
	
	* libnautilus-extensions/nautilus-entry.h:
	Added cursor_obscured flag to entry class.
	
	* libnautilus-extensions/nautilus-gdk-extensions.c:	
	* libnautilus-extensions/nautilus-gdk-extensions.h:
	(nautilus_gdk_window_set_invisible_cursor):
	New function to hide the cursor of the widget passed in.
	
2000-11-27  Maciej Stachowiak  <mjs@eazel.com>

	* components/text/Makefile.am: Added definition of NULL to shut up
	tinderbox.

2000-11-27  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	Fixed bugs 3608 (Tree view disclosure triangle behavior on empty
	folders is confusing) and 4368 (Tree View gets confused by
	renaming file in closed folder).
	
	* libnautilus-extensions/nautilus-ctree.h: Reindented.

	* libnautilus-extensions/nautilus-ctree.c:
	(nautilus_ctree_realize, nautilus_ctree_unrealize,
	nautilus_ctree_button_press, nautilus_ctree_draw_expander,
	draw_row, nautilus_ctree_unlink, change_focus_row_expansion,
	nautilus_ctree_last, nautilus_ctree_find_node_ptr,
	nautilus_ctree_find_all_by_row_data): Made NautilusCTree handle
	all expansion and expander-related stuff based on whether the
	node's is_leaf field is set, not based on whether it actually has
	children. This way, by setting is_leaf to FALSE, you can make a
	node with no children expandable.

	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_insert_model_node, forget_view_node,
	nautilus_tree_view_update_model_node,
	nautilus_tree_view_model_done_loading_callback,
	nautilus_tree_view_initialize, nautilus_tree_view_destroy),
	expand_node_for_file, insert_hack_node, remove_hack_node,
	freeze_if_have_hack_node): When inserting or updating nodes, set
	is_leaf to FALSE if the node represents a directory, otherwise
	TRUE. Remove all code relating to hack node handling. Combined
	with the change above, this makes normal directories expand
	normally, and prevents directories from collapsing when files
	inside them are renamed.	

2000-11-27  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c:
	(nautilus_music_view_initialize):
	fixed bug 4420, non-portable use of string macro, by using the N_
	macro as Darin suggested.
	
	Also, fixed up some glitches in the ChangeLog from previous
	check-ins.
	
2000-11-27  Mathieu Lacage  <mathieu@eazel.com>

	Might fix tinderbox.
	* components/text/Makefile.am:

2000-11-27  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Gene Z. Ragan  <gzr@eazel.com>

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_contains_text):
	Fixed bugzilla 4756 - binary files previewed on icons.
	Turned out to be easy - the nautilus_file_contains_text was 
	over-optimistic. Changed it to only mark for preview actual text files 
	(files with the "text" MIME supertype).

2000-11-27  Andy Hertzfeld  <andy@eazel.com>

	added a new text view component with zooming, settable fonts and
	text-oriented services. The services are currently hardwired but there
	will be a framework soon.  You may have to delete your
	/gnome/share/oaf/text-plain.oafinfo to see it in action.
	
	* configure.in:	
	* components/Makefile.am:
	* components/text/.cvsignore:
	* components/text/Makefile.am:
	build stuff for the new text view
	
	* components/text/main.c: (text_view_object_destroyed),
	(text_view_make_object), (main):
	factory object for the text view
	
	* components/text/nautilus-text-view-ui.xml:
	xml file defining the menus for the text view

	* components/text/nautilus-text-view.oafinfo:
	oaf definitions for the text view
	
	* components/text/nautilus-text-view.h:
	interface file for the text view
	
	* components/text/nautilus-text-view.c:
	(nautilus_text_view_initialize_class),
	(nautilus_text_view_initialize), (detach_file),
	(nautilus_text_view_destroy),
	(nautilus_text_view_get_nautilus_view),
	(nautilus_text_view_update), (nautilus_text_view_load_uri),
	(text_view_load_location_callback),
	(nautilus_text_view_update_font), (get_selected_text),
	(text_view_search_callback), (text_view_lookup_callback),
	(nautilus_text_view_set_font), (handle_ui_event),
	(merge_bonobo_menu_items), (nautilus_text_view_zoom_to_level),
	(nautilus_text_view_bump_zoom_level), (zoomable_zoom_in_callback),
	(zoomable_zoom_out_callback), (zoom_index_from_float),
	(zoomable_set_zoom_level_callback),
	(zoomable_zoom_to_fit_callback):
	implementation for the text view
		
	* libnautilus-extensions/nautilus-icon-container.c:
	(lay_down_icons_horizontal):
	fixed bug 3485, icon layout not using all of the available space, by tweaking the
	code to not require the extra space between the columns
	
2000-11-27  Darin Adler  <darin@eazel.com>

	* nautilus.spec.in: Removed a file that's no longer present.
	This is another crack at fixing the Tinderbox.

	* components/services/install/lib/.cvsignore: Ignore the
	new .la file too.

2000-11-27  Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in: added check for esd via m4 macro.

2000-11-27  Gene Z. Ragan  <gzr@eazel.com>

	buddy: Pavel Cisler <pavel@eazel.com>

	We now use the "noauto" flag in the fstab entry for the device
	to determine if the volume is removable. This is still imperfect,
	but much better than the enumerated case that was being used before.
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_volume_is_removable),
	(nautilus_volume_monitor_get_removable_volumes),
	(mnttab_add_mount_volume), (mntent_add_mount_volume):

	* libnautilus-extensions/nautilus-volume-monitor.h:
	Added is_removable field to NautilusVolume struct.
	
2000-11-27  Darin Adler  <darin@eazel.com>

	* components/services/install/lib/Makefile.am:
	Makefile listed ".o" files instead of sources, making srcdir ==
	builddir builds not compile anything! Fixed so the files are
	compiled even when srcdir == builddir; this makes us all see the
	errors we were previously seeing only on the Tinderbox.
	
	* components/services/install/lib/eazel-softcat-private.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_class_initialize):
	* components/services/install/lib/eazel-softcat.h:
	Tweaked and disabled enough code so it builds now. This fixes the
	Tinderbox build.

2000-11-27  Andy Hertzfeld  <andy@eazel.com>

	* icons/Makefile.am:
	* icons/eazel/i-directory-*:
	* icons/emblem-changed.gif:
	* icons/emblem-encrypted.gif:
	* icons/emblem-remote.gif:
	
	removed some ancient, unused emblem images, and added updated
	folder icons in eazel theme from Susan.
		
2000-11-27  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c:
	(hide_rename_widget):
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(create_selection_shadow):
	Remove two different FIXMEs about using gtk_object_destroy instead
	of gtk_object_unref. It turns out that for widgets, destroy is the
	right way to let go.

2000-11-27  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	fixed bug where the "Reset Background" command in the icon view
	was not being disabled when the background was the default.
	
2000-11-27  Rebecca Schulman <rebecka@eazel.com>
	(committed under eli@eazel.com)

	* components/services/install/lib/eazel-softcat.h:
	Added a couple of missing semicolons, which hopefully will
	make tinderbox happy.

2000-11-27 John Fleck <jfleck@inkstain.net>

	* components/help/converters/gnome-db2html2/sect-elements.c
	add line to sect_author_characters to print out contents of author
	tag; fixing bug #4801
	
	elements in body of doc

2000-11-26  Maciej Stachowiak  <mjs@eazel.com>

	Some build fixes to make tinderbox happy.

	* components/services/install/lib/eazel-package-system-private.h:
	Add return types (randomly guessed `void') to function pointer
	members of structs.

	* components/services/install/lib/eazel-package-system.h: Don't
	include the private header in the public header. Add some
	semicolons after some typedefs. Add a missing comma in an enum
	declaration. Add prototype for `eazel_package_system_unref'.

	* components/services/install/lib/Makefile.am: Comment out
	libeazelpackagesystem.la from the build, since even after these
	changes it won't compile.

2000-11-25  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/sect-preparse.c:
        (sect_preparse_sect_start_element):
        Allow navigation links at the end of the glossary (this makes sure
        </BODY> and </HTML> tags are added)

2000-11-24  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/help-method.c:
        (old_help_file): Removed
        (find_help_file): Change this code to make it more consistant and
        clear. I think it also made it go from O(n^2) to O(n) for the case
        of HTML files (even though in practice this may not mean much since n
        is small). Anyway, this is a better fix for bug #4724

2000-11-23  Ali Abdin  <aliabdin@aucegypt.edu>

	Preliminary glossary supports.
	Fix bug #2399, #4702, #4724. Partial fix for #4724
	(a few of the above are thanks to patches/mails from
	jfleck@inkstain.net)
	Some other misc. bug-fixing.
	Cleaned up some code.
	Preliminary glossary support (thanks to a patch by
	jfleck@inkstain.net)
	
	* components/help/help-method.c:
	(file_in_info_path):
	Fix a typo preventing it from searching /usr/gnome/info
	Add in support for /usr/share/info directory for Debian (hopefully
	this fixes bug #4414)
	(transform_file),
	(find_help_file): Move the searching for HTML files into the
	find_help_file function to make things consistant. Fixes bug #4724

	* components/help/converters/gnome-db2html2/gdb3html.c:
	(init_entities): Conver entities to use a table, and add support for
	iso-latin characters (for i18n purposes).
	(parse_file): set version to XML_DEFAULT_VERSION, fixes bug #2399
	#if 0'd out a useless call to a function
	(xml_parse_file): #if 0'd out this function since we no longer use it
	
	* components/help/converters/gnome-db2html2/sect-elements.c:
	(sect_figure_start_element): 
	Increment the figure count as soon as we enter (instead of when we
	leave) (should fix #4702)

	* components/help/converters/gnome-db2html2/gdb3html.[ch]:
	* components/help/converters/gnome-db2html2/sect-elements.[ch]:
	* components/help/converters/gnome-db2html2/sect-preparse.c,
	* components/help/converters/gnome-db2html2/toc-elements.c:
	(glossentry_stack_add), (glossary_start_element),
	(sect_glossseealso_start_element),
	(sect_glosssee_start_element),
	(sect_preparse_glossary_start_element),
	(sect_preparse_glossterm_characters),
	(toc_glossdiv_start_element), (toc_glossdiv_end_element)
	(toc_glossentry_start_element), (toc_glossentry_end_element),
	(toc_glossterm_start_element), (toc_glossterm_end_element):
	New functions for glossary support

	(sect_title_start_element), (sect_title_end_element),
	(sect_title_characters),
	(toc_author_start_element), (toc_author_characters)
	(toc_title_start_element), (toc_title_end_element),
	(toc_title_characters):
	Modified functions for glossary support
	
	(sect_preparse_set_doctype):
	Add support for glossary, and fix a bug (we should set to BOOK_DOC and
	ARTICLE_DOC instead of just BOOK or ARTICLE!!!)

2000-11-22  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-package-system-private.h:
	* components/services/install/lib/eazel-package-system.c:
	(eazel_package_system_finalize), (eazel_package_system_unref),
	(eazel_package_system_class_initialize),
	(eazel_package_system_initialize), (eazel_package_system_get_type),
	(eazel_package_system_new):
	* components/services/install/lib/eazel-package-system.h:
	* components/services/install/lib/eazel-softcat-private.h:
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_finalize), (eazel_softcat_unref),
	(eazel_softcat_class_initialize), (eazel_softcat_initialize),
	(eazel_softcat_get_type), (eazel_softcat_new):
	* components/services/install/lib/eazel-softcat.h:
	The first parts of the upcoming big rewrite of libeazelinstall.
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_install_packages):
	Always set_uninstall(FALSE) in install.
	
	* components/services/install/lib/eazel-install-problem.c:
	(eazel_install_problem_case_to_string),
	(eazel_install_problem_handle_cases):
	Removed debug output and moved the translation comments back to
	right before the i18n strings.
	Also copy the install_categories and uninstall_categories, to not
	corrupt the callers category lists.
	
	* nautilus-installer/src/Makefile:
	Yes.
	* nautilus-installer/src/installer.c: (start_over),
	(start_over_callback_druid), (dont_start_over_callback),
	(create_what_to_do_page), (jump_to_retry_page),
	(eazel_installer_do_install), (eazel_installer_setup_texts):
	Fixing 4841
	* nautilus-installer/src/installer.h:
	Removed some old cruft.

2000-11-22  Andy Hertzfeld  <andy@eazel.com>

`	* libnautilus-extensions/nautilus-image.h:
	added nautilus_image_new_from_file convenience routine
	* libnautilus-extensions/nautilus-image.c:
	(nautilus_image_new_from_file):
	implemented nautilus_image_new_from_file to make it easy to
	convert code that used gnome_pixmap_new_from_file to use
	anti-aliased images
	
	* components/hardware/nautilus-hardware-view.c: (setup_form_title),
	(setup_overview_form):
	converted the hardware view to use anti-aliased images
	
2000-11-22  Michael K. Fleming  <mfleming@eazel.com>

	* src/nautilus-first-time-druid.c: (set_http_proxy):

	Set the newly specified "/system/gnome-vfs/use-http-proxy" flag 
	when setting an http proxy

2000-11-22  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/installer.c: (start_over_button),
	(jump_to_retry_page):

	Change ignore button callback to match what GTK expects.

2000-11-22  Michael Engber  <engber@eazel.com>

	* src/nautilus-application.c: (nautilus_application_startup):
	Always open a window in response to typing nautilus
	at the cmd line. Used to not open a window if you typed
	nautilus --start-desktop. Bug 4720

2000-11-22  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_load_image_callback),
	(nautilus_background_set_image_uri_and_color),
	(nautilus_background_reset):
	* src/nautilus-sidebar.c: (setting_change_metadata_callback),
	(background_settings_changed_callback):
	Fixed problem dropping images onto sidebar - bug 4822

2000-11-22  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Build the mozilla component without rtti and without exceptions.
	This causes problems on some g++ compilers.
	
2000-11-22  Rebecca Schulman  <rebecka@eazel.com>
	Fixed bug 3919, that the numeric date field still
	showed when "day is yesterday" was chosen

	* src/nautilus-search-bar-criterion.c:
	(nautilus_search_bar_criterion_new_from_values),
	(nautilus_search_uri_get_first_criterion),
	(modified_relation_should_show_value), (hide_date_widget),
	(show_date_widget):
	Added callbacks to correctly show and hide the date 
	widget.

2000-11-21  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-problem.c:
	(eazel_install_problem_case_to_string),
	(eazel_install_problem_case_foreach_to_string),
	(eazel_install_problem_case_foreach_to_package_names),
	(eazel_install_problem_cases_to_package_names),
	(eazel_install_problem_find_dominant_problem_type):
	* components/services/install/lib/eazel-install-problem.h:

	Add hack to let us ask for only the package names of items in the
	problem list (and only those that need to be uninstalled).  This
	lets us build up a special bullet list for the "update not found"
	installer panel.
	
	* nautilus-installer/src/callbacks.c: (begin_install),
	(prep_retry):
	* nautilus-installer/src/installer.c: (remove_problems_timer),
	(jump_to_retry_page), (toggle_button_lock),
	(toggle_button_toggled), (eazel_installer_set_default_texts):

	Fix up the "update not found" panel to match a reasonable UI, and
	fix some bugs that caused it to go straight into another
	(extremely confusing) panel that suggested you ignore "all
	problems" and then listed no problems.

	* nautilus-installer/src/Makefile.am:
	* nautilus-installer/src/support.c:
	* nautilus-installer/src/support.h:

	Remove the unused support.c from the Makefile, and mark the files
	as unused so that a more adventurous soul can cvs remove them soon.

2000-11-21  Rebecca Schulman  <rebecka@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixes for bugs 690 and 733, to make the clipboard
	work for file editing in place, and make sensitivity
	work. Paste doesn't work correctly still, and a bug
	is filed for this issue.  

	* libnautilus-extensions/nautilus-entry.h:
	* libnautilus-extensions/nautilus-entry.c:
	(nautilus_entry_initialize_class), (nautilus_entry_key_press),
	(nautilus_entry_motion_notify), (nautilus_entry_set_text),
	(nautilus_entry_set_selection), (nautilus_entry_insert_text),
	(nautilus_entry_delete_text):
	Added a new signal to nautilus entry, called "selection_changed"
	that is fired whenever the region selected in an editiable widget
	is changed.  This is used to determine how to set clipboard sensitivity
	correctly.

	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize_class),
	(nautilus_icon_container_start_renaming_selected_item),
	(hide_rename_widget):
	Add a new signal "renaming_icon", which tells the icon view
	to set up clipboard capabilities for the new editable widget
	
	* libnautilus-extensions/nautilus-icon-private.h:
	* libnautilus-extensions/nautilus-icon-text-item.h:
	* libnautilus-extensions/nautilus-icon-text-item.c:
	(iti_stop_editing), (iti_entry_text_changed_by_clipboard),
	(iti_start_editing), (iti_destroy), (iti_start_selecting),
	(iti_stop_selecting), (iti_event),
	(nautilus_icon_text_item_get_renaming_editable):

	Sad hacks that I had to add on top of this already scary file so
	that the editable, which is in its own offscreen window somewhere,
	communicates to the clipboard what is actually going on when text
	is entered and selections are changed.  This includes adding a
	new signal when text is changed, to make sure the entry knows about
	it, firing an initial grab focus for the widget so that the widget
	turns on, passing on more of the events of the canvas
	widget, including motion notifies and focus events, and 
	keeping a persistent copy of the last renaming entry in the icon
	container so that pastes for that widget will still work.

	* libnautilus/nautilus-clipboard.h:
	* libnautilus/nautilus-clipboard.c: (set_menu_item_sensitive),
	(set_paste_sensitive_if_clipboard_contains_data),
	(set_clipboard_menu_items_sensitive),
	(set_clipboard_menu_items_insensitive),
	(clipboard_items_are_merged_in),
	(set_clipboard_items_are_merged_in),
	(merge_in_clipboard_menu_items), (merge_out_clipboard_menu_items),
	(focus_changed_callback), (grab_focus_callback),
	(selection_changed_callback),
	(initialize_clipboard_component_with_callback_data),
	(nautilus_clipboard_set_up_editable),
	(widget_was_set_up_with_selection_sensitivity),
	(first_focus_callback),
	(nautilus_clipboard_set_up_editable_in_control):
	Reorganized some of the code, and also added new callbacks
	to deal with sensitivity changes.  
	
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_get_bonobo_control):
	Add a new function that the icon view uses to
	pass the bonobo control for clipboard set up
	
	* src/file-manager/fm-icon-view.c: (renaming_icon_callback),
	(create_icon_container):
	Set up clipboard capabilities when the renaming widget is 
	created.
	
	* src/nautilus-location-bar.c: (nautilus_location_bar_new):
	* components/notes/nautilus-notes.c: (make_notes_view):	
	* src/nautilus-simple-search-bar.c:
	(nautilus_simple_search_bar_new):
	Changed calls to clipboard set up routines to include
	the new shares_selection_changes parameter. Widgets that
	use the "selection_changed" signal (NautilusEntries) 
	say "TRUE" here, otherwise selection doesn't work quite 
	right, and FALSE is used instead.

	* src/nautilus-search-bar-criterion.c: (get_size_location_for):
	Deal with the case when a user has entered a non-numeric size
	in a smart way, by using nautilus_str_to_int.  This is related
	to bug 2438, but is not a complete fix.

2000-11-21  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Mathieu Lacage  <mathieu@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_xfer_vfs_error):
	Fixed 4486 and 3748. Made the file copy operation error dialog
	have a non-misleading title if the title actually shows up (it
	is not supposed to but it may due to window manager theme bugs).
	Made the error text for copying into non-writeable dialogs more 
	accurate.
	
2000-11-21  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/*.xpm:

	removed obsolete XPM files

2000-11-21  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-info2html2/main.c:
        (main):
        Check /usr/share/info by default for info files too (Debian uses
        this). This partially fixes bug #4414

        * components/help/converters/gnome-db2html2/sect-preparse.c:
        (sect_preparse_sect_start_element):
        Apply a slightly modified patch by John Fleck to handle navigation
        links with regards to the appendix (Fixes bug #4792)

2000-11-21  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c: (fetch_song_info):
	fixed bug 4815, bitrate and time not displayed for certain mp3s. It turns
	out that some encoders reserve a lot of space for id3v2 tags at the
	beginning of the file, so we weren't looking deep enough into the file.
	Fixed by changing the size of the header buffer from 1K to 8K.
	
2000-11-21  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	Fixed bugzilla 855 - Renaming a file with thumbnails does not affect the
	thumbnails and 4654 - Old thumbnails cause problems with renaming.

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(nautilus_directory_rename_file_metadata),
	(nautilus_directory_remove_file_metadata):
	Finish the metafile rename and metafile remove operation by
	updating thumbnail files correspondingly, if they exist.
	
	* libnautilus-extensions/nautilus-directory.c:
	* libnautilus-extensions/nautilus-directory.h:
	(nautilus_directory_get_file_uri):
	Added a convenience routine.

	* libnautilus-extensions/nautilus-thumbnails.c: (vfs_file_exists):
	Tweaked to use the right GnomeVFS call.
	
	* libnautilus-extensions/nautilus-thumbnails.h:
	* libnautilus-extensions/nautilus-thumbnails.c:
	(nautilus_update_thumbnail_file_renamed_one),
	(nautilus_update_thumbnail_file_renamed),
	(nautilus_remove_thumbnail_for_file_one),
	(nautilus_remove_thumbnail_for_file):
	Look for an existing thumbnail for a file, if present, rename or
	remove it respectively to update it to the new state.

	* libnautilus-extensions/nautilus-thumbnails.c:
	(make_thumbnail_path), (nautilus_get_thumbnail_uri), 
	(check_for_thumbnails), (make_thumbnails):
	Added a create_parents_if_needed parameter used by the new thumbnail
	updating calls.
		
2000-11-21  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/installer.c: (early_log_catcher),
	(catch_early_logs), (start_logging), (eazel_installer_initialize):

	Stop spamming the console with crap before logging starts.

2000-11-20  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fix bugs 2943 (Dragging icons between windows or to the desktop
	triggers scrolling), 4786 (Need to remove tree view auto-expand
	feature for 1.0) and 4476 (weird horizontal autoscroll
	behavior). Auto-scroll now has a consistent 750 ms startup delay,
	and the tree auto-expand is off.

	* libnautilus-extensions/nautilus-drag.h,
	libnautilus-extensions/nautilus-drag.c:
	(nautilus_drag_autoscroll_in_scroll_region,
	nautilus_drag_autoscroll_start, nautilus_drag_autoscroll_stop):
	New convenience functions that factor out common code formerly in
	the tree, list and icon view DnD code. This fixes the mistakes
	common to all three of those views, where the auto-scroll initial
	delay was measured from the start of dragging overall, not from
	entering the scroll region.

	* libnautilus-extensions/nautilus-icon-private.h,
	libnautilus-extensions/nautilus-icon-dnd.c
	(auto_scroll_timeout_callback, set_up_auto_scroll_if_needed,
	stop_auto_scroll): Use the above calls. Also, correct a `<'
	vs. `>' mistake that made the auto-scroll delay never take effect.
	
	* libnautilus-extensions/nautilus-list.c
	(auto_scroll_timeout_callback, nautilus_list_start_auto_scroll,
	nautilus_list_stop_auto_scroll): Use the above calls. Also,
	correct a `<' vs. `>' mistake that made the auto-scroll delay
	never take effect.

	* components/tree/nautilus-tree-view-dnd.c:
	(nautilus_tree_view_drag_leave, nautilus_tree_view_drag_motion,
	collapse_time_callback, nautilus_tree_view_expand_node,
	nautilus_tree_view_is_tree_node_expanded, nautilus_dump_info
	expand_hack_unref, expand_hack_new, expand_time_callback,
	nautilus_tree_view_expand_maybe_later): Remove bunches of code to
	disable auto-expand.

	(ready_to_start_scrolling, auto_scroll_timeout_callback),
	(nautilus_tree_view_start_auto_scroll),
	(nautilus_tree_view_stop_auto_scroll),
	(nautilus_tree_view_drag_destroy): Use new common auto-scroll
	code. I also made it possible to add an extra auto-scroll delay
	for horizontal auto-scroll, but now that the startup delay has
	been fixed, it seems almost impossible to trigger horizontal
	auto-scroll accidentally, so I consider 4476 fixed.
	
	* components/adapter/bonobo-stream-vfs.c: (vfs_get_info,
	vfs_set_info, vfs_write, vfs_read, vfs_copy_to, vfs_destroy,
	bonobo_stream_vfs_open): Added FIXME bug numbers.
	* components/adapter/nautilus-adapter-control-embed-strategy.c:
	(activate_uri_callback): Added FIXME bug numbers.
	* components/adapter/nautilus-adapter.c: (nautilus_adapter_new):
	Added FIXME bug numbers.

2000-11-20  Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in: reduced versions of glib
	and gtk to released ones.

2000-11-20  Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in: updated some versions of libs to
	check for

2000-11-20  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_do_file_conflict_check):
	Removed some debug spam
	
	* nautilus-installer/src/Makefile:
	yes.
	
	* nautilus-installer/src/callbacks.c: (begin_install):
	* nautilus-installer/src/installer.c: (skip_over_remove_problems),
	(jump_to_retry_page), (create_initial_force_remove_category),
	(get_detailed_errors_foreach), (get_detailed_errors),
	(eazel_install_preflight), (eazel_installer_post_install),
	(eazel_installer_set_default_texts), (eazel_installer_setup_texts),
	(eazel_install_get_depends), (eazel_installer_initialize):
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/main.c: (main):
	Added my fix for 4706.

2000-11-20  Robey Pointer  <robey@eazel.com>

	* components/rpmview/nautilus-rpm-view-install.c:
	(nautilus_rpm_view_install_package_callback),
	(nautilus_rpm_view_uninstall_package_callback):
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line):
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(lots)
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba-types.c:
	(lots)
	* components/services/install/lib/eazel-install-corba-types.h:
	* components/services/install/lib/eazel-install-corba.c:
	(lots)
	* components/services/install/lib/eazel-install-object.c:
	(lots)
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_view_destroy),
	(nautilus_service_install_done),
	(nautilus_service_install_view_update_from_uri),
	(service_install_stop_loading_callback):
	
	The great renaming: moved Trilobite/Eazel/Install stuff into
	GNOME/Trilobite/Eazel/(etc).
	
	* components/services/install/lib/eazel-install-problem.c:
	(eazel_install_problem_handle_cases):

	Renaming, and initialize some vars to avoid warnings.
	
	* nautilus-installer/src/main.c: (check_disk_space), (main):

	Add a command-line option for ignoring the disk-space check.
	Check /usr instead of /.

2000-11-20  Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 2893 (changing the selection in a view does not make the
	tree view scroll to the correct selectin even while it does has
	the correct selection.)

	* components/tree/nautilus-tree-view-private.h: Added
	got_first_size_allocate boolean to details struct.
	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_initialize): Connect to the size_allocate
	handler.
	(ctree_show_node): Convenience function for scrolling a
	NautilusCTree to show a particular node.
	(ctree_get_first_selected_node): Convenience function to get the
	selected node.
	(tree_select_row_callback): Scroll to the selected node.
	(size_allocate_callback): Scroll to the selected node, if any, on
	the first size_allocate only.

2000-11-18 John Fleck <jfleck@inkstain.net>

	components/help/converters/gnome-db2html2/gdb3html.c:
	changing output of &percnt; entity to &#37; so Mozilla will 
	recognize it

2000-11-17  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (something_failed), (install_failed), (uninstall_failed),
	(delete_files):
	Updated the cli tool's use of the problem-handler
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	Added a flag to ignore file conflicts
	
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install__set_ignore_file_conflicts),
	(impl_Eazel_Install__get_ignore_file_conflicts),
	(eazel_install_get_epv):
	Code to set the ignore file conflicts flag.
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_do_transaction_all_files_check),
	(eazel_install_prune_packages_helper),
	(eazel_install_fetch_dependencies),
	(eazel_install_do_file_conflict_check), (eazel_uninstall_globber):
	Code to use the ignore file conflicts flag
	
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize), (eazel_install_install_packages):
	Changed some 0x%xs to %p and added the nessecary things for the
	extra ignore_file_conflicts flags.
	
	* components/services/install/lib/eazel-install-problem.h: *
	components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach),
	(get_detailed_uninstall_messages_foreach), (compare_problem_case),
	(add_case), (add_cannot_solve_case),
	(add_continue_with_force_case), (add_force_install_both_case),
	(add_force_remove_case), (add_remove_case), (add_update_case),
	(add_cascade_remove), (get_detailed_cases_foreach),
	(get_detailed_uninstall_cases_foreach),
	(eazel_install_problem_case_to_string),
	(eazel_install_problem_case_foreach_destroy),
	(eazel_install_problem_case_new),
	(eazel_install_problem_tree_to_case),
	(eazel_install_problem_tree_to_string),
	(build_categories_from_problem_list),
	(eazel_install_problem_use_set),
	(eazel_install_problem_step_problem),
	(eazel_install_problem_handle_cases): loads of code, so for a
	given set of problems, you can get the dominant type, and step
	forward to the next way of solving the problem. Also fixed the
	problem about updates not including the previous sets of pacakges.
	Also added some new cases.

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_add_to_rpm_set),
	Commented out robeys flailing, which caused some erratic crashes
	because of a NULL packsys struct.
	(eazel_install_start_transaction_make_rpm_argument_list),
	Add --force on ignore_file_conflicts
	(eazel_install_do_rpm_dependency_check):
	%x to %p
	
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new), (categorydata_destroy_foreach),
	(packagedata_new), (packagedata_destroy):
	%x to %p
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_done),
	(nautilus_service_install_failed):
	Updated to the new signatures of the problem handler functions.
	
	* nautilus-installer/src/callbacks.c: (begin_install):
	* nautilus-installer/src/installer.c: (jump_to_retry_page),
	(collect_failure_info), (install_failed), (uninstall_failed),
	(eazel_installer_setup_texts), (eazel_install_get_depends),
	(eazel_installer_initialize):
	Partial fix for 4706, I just want to commit before I slaughter it
	completely.
	
	* nautilus-installer/src/prescript:
	Fixed 4763 by changing the wording.

2000-11-17  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_ensure_gradient_buffered):
	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_ensure_gradient_buffered):
	Damn gradients! Fixed round off error which could
	result in a one pixel error. (bug 4759)

2000-11-17  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_ensure_gradient_buffered):
	Fixed bug occuring when percentages of multi-point
	add up to >100% (bug 4759)

2000-11-17  Mathieu Lacage  <mathieu@eazel.com>

	reviewed by: Sullivan

	update nautilus to the latest gnome-vfs mime/type icon handling.
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_name_for_regular_file): use
	gnome_vfs_mime_get_icon instead of the raw get_value call.
	(get_themed_icon_file_path): if cannot find the pixmap through
	the standard theme code, fallback on gnome-vfs to find the icon.
	(get_icon_file_path): beautification.
	(nautilus_scalable_icon_new_from_text_pieces): idem.

2000-11-17  John Sullivan  <sullivan@eazel.com>

	reviewed by: Mathieu Lacage  <mathieu@eazel.com>

	Fixed bug 4484 (leading whitespace in location bar produces
	errors)
	Fixed bug 4039 (Pasting URL with trailing carriage return fails, 
	but needn't)

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_from_input): Strip leading and trailing white
	space before any further processing; also now handles NULL with
	return_val_if_fail.
	(nautilus_self_check_file_utilities): Added new self-check tests
	for white space stripping, and a couple of others.

2000-11-17  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_ensure_gradient_buffered):
	Fixed off by one error in gradient calculation (bug 4759)

2000-11-17  John Sullivan  <sullivan@eazel.com>

	Fixed bug with "Disks" submenu in desktop context menu where
	the volume-mounting behavior would sometimes run when the
	context menu appeared.

	* libnautilus-extensions/nautilus-volume-monitor.h:
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_mount_unmount_removable):
	Added boolean parameter to specify whether to mount or
	unmount; previously it always toggled the current state.

	* src/file-manager/fm-desktop-icon-view.c: 
	(mount_parameters_new),	(mount_parameters_free),
	(mount_parameters_free_wrapper): New little helper functions
	for dealing with the parameters to the mount_or_unmount callback.
	(mount_or_unmount_removable_volume): Now specifies whether to
	mount or unmount based on command state, rather than always
	toggling; also updates the menu state after the mount/unmount.
	(update_disks_menu): Pass view as well as mount_path for
	callback data, using mount_parameters_new & _free.

2000-11-16  Pavel Cisler <pavel@eazel.com>

	reviewed by: Mathieu Lacage  <mathieu@eazel.com>

	* libnautilus-extensions/nautilus-file-operations-progress.c:
	(delete_event_callback),
	(nautilus_file_operations_progress_initialize),
	(nautilus_file_operations_progress_initialize_class):
	Fix 3094: Closing file progress dialog using the close box 
	crashes.
	The progress dialog shouldn't really have a close box, it only
	shows up in broken window manager themes that don't respect the
	window manager hints. Made it so that clicking the close box
	does nothing instead of crashing.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(fit_rect_on_screen), (center_dialog_over_rect),
	(center_dialog_over_window), (create_xfer_dialog):
	Fix 3092: File operation progress dialog not placed well.
	Made it center over the window that is the target of the
	copy/move operation. I couldn't really do it by setting the window
	as the dialog's parent because you need to be able to close
	the window without the dialog closing. Instead, added explicit
	centering code.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(progress_dialog_set_to_from_item_text):
	Fix 4080: Copy dialog shows to and from as the same location.
	Stupid typo.

2000-11-16  Rebecca Schulman  <rebecka@eazel.com>

	* libnautilus-extensions/nautilus-search-uri.c:
	(nautilus_self_check_search_uri):
	Fixed the tests to go along with my changes

2000-11-16  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Final changes to kill off the legendary bug 3579
	(Convert directory view context menus to use Bonobo)

	* libnautilus/nautilus-bonobo-ui.h:
	#define for zoom items placeholder in popup. Remove
	#defines for popup-specific zooming commands, since now
	we don't need distinct popup-specific ones.

	* libnautilus-extensions/nautilus-bonobo-extensions.h:
	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	(nautilus_bonobo_set_label_for_menu_item_and_command):
	Moved this here and commented; it had been a private 
	function in fm-directory-view.c.
	
	* src/file-manager/fm-directory-view.c: 
	(real_merge_menus): Just hide the placeholder for the zoom items,
	which is now sufficient due to a Bonobo fix Darin made.
	(real_update_menus): Update for API name change.
	(set_label_for_menu_and_command): Moved this to another file
	and renamed it.
	* src/file-manager/fm-icon-view.c: 
	(fm_icon_view_update_menus): Update the dynamic menu items
	in-line here, as was done with fm-directory-view.c in an earlier
	checkin.
	(compute_menu_item_info), (update_one_menu_item): Removed these
	obsolete functions.
	* src/nautilus-shell-ui.xml: Eliminated special pop-up versions of
	zoom commands. They existed only to allow hiding without affecting
	the menu-bar versions, but now that placeholders can be hidden
	these aren't necessary.
	* src/nautilus-window-menus.c: (nautilus_window_initialize_menus):
	Removed verb installation for pop-up versions of zoom commands.

2000-11-16  Rebecca Schulman  <rebecka@eazel.com>

	* check-FIXME.pl:
	Make below change work for modules containing the
	'-' character (like, say, gnome-vfs)

2000-11-16  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/Makefile.am:
	* components/services/Makefile.am:
	* configure.in:
	Fix for (4741), building with services on non-rpm machines.

2000-11-16  Rebecca Schulman  <rebecka@eazel.com>

        reviewed by: Darin Adler <darin@eazel.com>
	(Patch for check-FIXME.pl; later I added
	additional check for "This is not a fixme bug")
	
	* check-FIXME.pl:
	Add the functionality that it also checks for bugs marked
	with "fixme" in the bugzilla database for a product, and
	notifies you if the bug has no fixme comment in the source.
	This is not a perfect operation, so you can explicitly
	include the comment "This is not a fixme bug" and the 
	script will ignore it.  
	* libnautilus-extensions/nautilus-search-uri.c:
	Fixed some wording so that the text is not hard to 
	understand if we are creating an english equivalent for
	several criteria.

2000-11-16  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Reimplemented code that updates menu items' labels and
	sensitivity in a much more straightforward way, made
	possible by the elimination of gtk context menus.

	* src/file-manager/fm-directory-view.c:
	(reset_bonobo_open_with_menu): set sensitivity in here
	instead of in a separate call. Also set sensitivity of
	"Open With" title in context menu, which was previously
	always sensitive. However, it is still always sensitive
	due to a Bonobo bug.
	(set_label_for_menu_and_command): Helper function that
	handles stripping the underscore for the command's label.
	(real_update_menus): Now all the dynamic menu items are
	updated in here, which removes a lot of string compares,
	unnecessary label-setting, and other extra code.

	(compute_menu_item_info), (update_one_menu_item),
	(reset_bonobo_trash_delete_menu): Removed functions;
	they are merged into real_update_menus now.

2000-11-16  John Sullivan  <sullivan@eazel.com>

	* components/adapter/nautilus-zoomable-proxy.c:
	(nautilus_zoomable_proxy_get):
	Fixed uninitialized variable warning that was
	breaking the build (Darin told me the fix).

2000-10-22  Martin Baulig  <baulig@suse.de>

	reviewed by: Darin Adler  <darin@eazel.com>
	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	Use the new Bonobo::Zoomable interface instead of Nautilus::Zoomable.

	* libnautilus/nautilus-zoomable.[ch]: Removed.
	* src/nautilus-zoomable-frame-corba.c: Removed.

	* libnautilus/nautilus-view-component.idl
	(ZoomLevels, ZoomLevelList, Zoomable, ZoomableFrame): Removed.

	* src/nautilus-view-frame-private.h
	(impl_Nautilus_ZoomableFrame_vepv, impl_Nautilus_ZoomableFrame__create):
	Removed external declarations.

	* src/nautilus-view-frame.h: include <bonobo/bonobo-zoomable-frame.h>.
	(NautilusViewFrame): Removed the `zoomable' field and changed the
	type of the `zoomable_frame' field from BonoboObject into
	BonoboZoomableFrame.
	(NautilusViewFrameClass): Added `zoom_parameters_changed' signal.

	* src/nautilus-view-frame.c (nautilus_view_frame_destroy_client):
	Don't release `view->zoomable' and set `view->history_frame' and
	`view->zoomable_frame' to NULL, not to CORBA_OBJECT_NIL.
	(nautilus_view_frame_initialize_class): Added ZOOM_PARAMETERS_CHANGED
	signal.
	(zoom_level_changed_callback): New static callback function; this emits
	the ZOOM_LEVEL_CHANGED signal on the NautilusViewFrame.
	(zoom_parameters_changed_callback): New static callback function; this
	emits the ZOOM_PARAMETERS_CHANGED signal on the NautilusViewFrame.
	(nautilus_view_frame_set_to_component): QI the adapted component for
	"IDL:Bonobo/Zoomable:1.0" and - if it was found - create the
	BonoboZoomableFrame, bind it to the BonoboZoomable and connect the
	"zoom_level_changed" and the "zoom_parameters_changed" signals.
	(nautilus_view_frame_is_zoomable): Return `view->zoomable_frame != NULL'.
	(nautilus_view_frame_get_zoom_level): Check whether view->zoomable_frame
	is not NULL and call bonobo_zoomable_frame_get_zoom_level().
	(nautilus_view_frame_set_zoom_level): Check whether view->zoomable_frame
	is not NULL and call bonobo_zoomable_frame_set_zoom_level().
	(nautilus_view_frame_get_min_zoom_level): Check whether
	view->zoomable_frame is not NULL and call
	bonobo_zoomable_frame_get_min_zoom_level().
	(nautilus_view_frame_get_max_zoom_level): Check whether
	view->zoomable_frame is not NULL and call
	bonobo_zoomable_frame_get_max_zoom_level().
	(nautilus_view_frame_get_has_min_zoom_level): New function.
	Check whether view->zoomable_frame is not NULL and call
	bonobo_zoomable_frame_has_min_zoom_level().
	(nautilus_view_frame_get_has_max_zoom_level): New function.
	Check whether view->zoomable_frame is not NULL and call
	bonobo_zoomable_frame_has_max_zoom_level().
	(nautilus_view_frame_get_is_continuous): New function.
	Check whether view->zoomable_frame is not NULL and call
	bonobo_zoomable_frame_is_continuous().
	(nautilus_view_frame_get_preferred_zoom_levels): If
	view->zoomable_frame is NULL, return NULL. Otherwise
	bonobo_zoomable_frame_get_preferred_zoom_levels() returns GList *
	of floats which we can just return.
	(nautilus_view_frame_zoom_in): If view->zoomable_frame is not NULL,
	call bonobo_zoomable_frame_zoom_in().
	(nautilus_view_frame_zoom_out): If view->zoomable_frame is not NULL,
	call bonobo_zoomable_frame_zoom_out().
	(nautilus_view_frame_zoom_to_fit):  If view->zoomable_frame is not
	NULL, call bonobo_zoomable_frame_zoom_out().
	(nautilus_view_frame_zoom_level_changed): Removed.

	* src/nautilus-zoom-control.c (NautilusZoomControlDetails): Added
	`has_min_zoom_level' and `has_max_zoom_level'.
	(draw_zoom_control_image): Call nautilus_zoom_control_can_zoom_in/out()
	to find out whether we can zoom.
	(zoom_menu_callback): Likewise.
	(nautilus_zoom_control_button_press_event): Likewise.
	(create_zoom_menu_item): Changed the type of the `zoom_level' argument
	from double to float.
	(nautilus_zoom_control_set_min_zoom_level): Removed.
	(nautilus_zoom_control_set_max_zoom_level): Removed.
	(nautilus_zoom_control_set_preferred_zoom_levels): Removed.
	(nautilus_zoom_control_set_parameters): New function.
	(nautilus_zoom_control_has_min_zoom_level): New function.
	(nautilus_zoom_control_has_max_zoom_level): New function.
	(nautilus_zoom_control_can_zoom_in): New function.
	(nautilus_zoom_control_can_zoom_out): New function.
	
	* src/file-manager/fm-directory-view.c: #include
	<bonobo/bonobo-zoomable.h> instead of
	<libnautilus/libnautilus-zoomable.h>.
	(FMDirectoryViewDetails): Changed the type of `zoomable' to
	BonoboZoomable.
	(fm_directory_view_preferred_zoom_levels): Made this an array of float,
	not double.
	(fm_directory_view_initialize): Create a new BonoboZoomable object here.
	(zoomable_zoom_in_callback): The first argument is now a BonoboZoomable.
	(zoomable_zoom_out_callback): The first argument is now a BonoboZoomable.
	(nautilus_zoom_level_from_double): Renamed into
	nautilus_zoom_level_from_float().
	(zoomable_set_zoom_level_callback): The first argument is now a
	BonoboZoomable and the second one a float.
	(zoomable_zoom_to_fit_callback): The first argument is now a
	BonoboZoomable.
	(fm_directory_view_set_zoom_level): Call
	bonobo_zoomable_report_zoom_level_changed()
	instead of using nautilus_zoomable_set_zoom_level().

	* src/nautilus-window-manage-views.c:
	(zoom_level_changed_callback): Don't call
	nautilus_zoom_control_set_min_zoom_level(),
	nautilus_zoom_control_set_max_zoom_level() and
	nautilus_zoom_control_set_preferred_zoom_levels() here.
	Use nautilus_zoom_control_can_zoom_in/out() to find out whether we
	can zoom in the calls to nautilus_bonobo_set_sensitive().
	, (zoom_parameters_changed_callback): New callback function.
	Call nautilus_zoom_control_set_parameters() and - if the zoom_level
	is not 0.0 - zoom_level_changed_callback().

	* components/adapter/nautilus-zoomable-proxy.[ch]: New files.

	* components/adapter/Makefile.am (nautilus_adapter_SOURCES):
	Added nautilus-zoomable-proxy.c and nautilus-zoomable-proxy.h.

	* components/adapter/nautilus-adapter-embed-strategy.c
	(NautilusAdapterEmbedStrategyClass): Added new virtual signal
	`get_zoomable' which must be overridden.
	(nautilus_adapter_embed_strategy_initialize_class): Assign it here.
	(nautilus_adapter_embed_strategy_get_zoomable): New static function;
	call the virtual `get_zoomable' in the derived class.

	* components/adapter/nautilus-adapter-control-embed-strategy.c:
	(nautilus_adapter_control_embed_strategy_initialize_class):
	Assign nautilus_adapter_control_embed_strategy_get_zoomable() as
	handler of the `get_zoomable' signal.
	(nautilus_adapter_control_embed_strategy_new): QI the Control for
	"IDL:Bonobo/Zoomable:1.0" and pass it to nautilus_zoomable_proxy_get()
	if found and store the return value in strategy->details->zoomable.
	(nautilus_adapter_control_embed_strategy_get_zoomable): New static
	function; return strategy->details->zoomable which is set in
	nautilus_adapter_control_embed_strategy_new().

	* components/adapter/nautilus-adapter-embeddable-embed-strategy.c:
	(nautilus_adapter_embeddable_embed_strategy_initialize_class):
	Assign nautilus_adapter_embeddable_embed_strategy_get_zoomable() as
	handler of the `get_zoomable' signal.
	(nautilus_adapter_embeddable_embed_strategy_new): QI the View for
	"IDL:Bonobo/Zoomable:1.0" and pass it to nautilus_zoomable_proxy_get()
	if found and store the return value in strategy->details->zoomable.
	(nautilus_adapter_embeddable_embed_strategy_get_zoomable): New static
	function; return strategy->details->zoomable which is set in
	nautilus_adapter_embeddable_embed_strategy_new().

	* components/adapter/nautilus-adapter.c: (nautilus_adapter_new):
	Call nautilus_adapter_embed_strategy_get_zoomable(embed_strategy) and
	bonobo_add_interface() it to the control if found.

	* components/image-viewer/nautilus-image-view.c: Rewrote the Nautilus
	image viewer to be a BonoboControl, to add zoomable support to it and
	to merge back everything from bonobo-image-generic into it.

2000-11-16  Ramiro Estrugo  <ramiro@eazel.com>

	* components/help/converters/gnome-info2html2/main.c: (main):
	Fix uninitialized variable.

	* components/services/vault/command-line/main.c:
	Include stlib.h needed for exit().

	* libnautilus-extensions/nautilus-directory-async.c:
	(call_ready_callbacks):
	Fix uninitialized variable.
	
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(nautilus_gdk_pixbuf_draw_text):
	Workaround int vs uint casting issues with new gcc compiler.

	* libnautilus-extensions/nautilus-mime-actions.c:
	(extract_prefix_add_suffix):
	Workaround int vs uint casting issues with new gcc compiler.

2000-11-16  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/file-manager/fm-desktop-icon-view.c: (real_update_menus):
	* src/file-manager/fm-directory-view.c: (real_update_menus):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_update_menus):
	Bracketed menu-updating code with bonobo_ui_component_freeze/thaw.
	This speeds up fm_directory_view_update_menus by about 50%, and
	it's called a zillion times so that can't hurt.

2000-11-16  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/file-manager/fm-directory-view.c: (open_callback),
	(open_in_new_window_callback), (other_application_callback),
	(other_viewer_callback), (trash_callback), (duplicate_callback),
	(create_link_callback), (new_folder_callback),
	(open_properties_window_callback), (reset_background_callback),
	(remove_custom_icons_callback), (real_merge_menus):
	* src/file-manager/fm-icon-view.c: (show_stretch_handles_callback),
	(unstretch_icons_callback), (clean_up_callback),
	(rename_icon_callback), (customize_icon_text_callback),
	(fm_icon_view_merge_menus):
	* src/file-manager/fm-search-list-view.c: (real_merge_menus),
	(reveal_selected_items_callback):

	Removed all function casts that were allowing us to use a single
	callback for both Bonobo-style and gtk-style menus; converted
	all the functions to take Bonobo-style parameters.

2000-11-16  Martin Baulig  <martin@home-of-linux.org>

	* libnautilus-adapter/nautilus-adapter-factory.idl:
	Use `NAUTILUS_ADAPTER_FACTORY_IDL' instead of
	`NAUTUILUS_ADAPTER_FACTORY_IDL' in the #ifdef/#define
	which protects against multiple inclusion of this file.

2000-11-16  John Sullivan  <sullivan@eazel.com>

	Removed a ton of code that was used only for the gtk
	context menus, which are gone now that we're using
	Bonobo for context menus. There's still some reworking
	of code formerly shared by gtk & Bonobo menus to do, but
	I'll do that in a separate pass.

	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class): Removed signal definitions
	and function assignments for create_selection_context_menu_items
	and create_background_context_menu_items.

	(compute_menu_item_info): Do special_link_in_selection tests here;
	previously they were done only for the gtk context menus (so for
	the past day we've had an as-yet-unnoticed bug where certain
	context menu items on the desktop were sensitive but shouldn't
	have been).
	(fm_directory_view_pop_up_selection_context_menu),
	(fm_directory_view_pop_up_background_context_menu):
	Removed the iffed-out case that used the gtk context menus.

	(zoom_in_callback), (zoom_out_callback), (zoom_default_callback),
	(finish_inserting_menu_item), (finish_appending_menu_item),
	(set_menu_item_path), (append_gtk_menu_item),
	(append_selection_menu_subtree),
	(fm_directory_view_insert_context_menu_item),
	(fm_directory_view_append_context_menu_item),
	(create_background_context_menu_items),
	(real_create_background_context_menu_items),
	(launch_application_from_menu_item), (view_uri_from_menu_item),
	(add_application_to_gtk_menu), (add_component_to_gtk_menu),
	(create_open_with_gtk_menu), 
	(real_create_selection_context_menu_items),
	(create_selection_context_menu),
	(fm_directory_view_create_background_context_menu_items),
	(create_background_context_menu), (menu_item_matches_path),
	(fm_directory_view_get_context_menu_index): 
	Removed obsolete functions.

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_initialize_class): Removed obsolete
	virtual function overrides.
	(real_update_menus): Removed debugging spam I had accidentally
	left in.

	(new_terminal_menu_item_callback),
	(reset_desktop_background_menu_item_callback),
	(change_desktop_background_menu_item_callback),
	(quit_nautilus_desktop_menu_item_callback),
	(empty_trash_menu_item_callback),
	(fm_desktop_icon_view_create_selection_context_menu_items),
	(fm_desktop_icon_view_create_background_context_menu_items),
	(mount_unmount_removable): Removed obsolete functions.
	
	* src/file-manager/fm-icon-view.c: 
	(special_link_in_selection): Just moved this function up.
	(compute_menu_item_info): Check special_link_in_function for
	rename menu item; formerly this only happened for the gtk
	context	menu.
	(fm_icon_view_initialize_class): Removed obsolete virtual 
	function overrides.

	(gtk_tighter_layout_callback), (gtk_sort_reversed_callback),
	(context_menu_layout_radio_item_callback),
	(append_one_context_menu_layout_item),
	(insert_one_context_menu_item), (append_one_context_menu_item),
	(append_one_toggle_context_menu_item),
	(fm_icon_view_create_selection_context_menu_items),
	(fm_icon_view_create_background_context_menu_items):
	Removed obsolete functions.
	
	* src/file-manager/fm-search-list-view.c:
	(fm_search_list_view_initialize_class): Removed obsolete
	virtual function override.

	(real_create_selection_context_menu_items): 
	Removed obsolete function.

2000-11-16  John Sullivan  <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-file-utilities.h:
	Added #define NAUTILUS_TRASH_URI "trash:"
	
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_self_check_directory):
	* libnautilus-extensions/nautilus-drag.c:
	(nautilus_drag_default_drop_action_for_icons):
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical),
	(nautilus_self_check_file_utilities):
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_self_check_file):
	* src/file-manager/fm-desktop-icon-view.c:
	(find_and_rename_trash_link), (create_or_rename_trash):
	* src/file-manager/fm-directory-view.c: (show_trash_callback):
	* src/file-manager/nautilus-trash-monitor.c:
	(nautilus_trash_monitor_initialize):
	Used NAUTILUS_TRASH_URI wherever "trash:" was used before.

2000-11-16  Szabolcs BAN <shooby@gnome.hu>

	* configure.in, po/hu.po: Hungarian language support.

2000-11-15  John Fleck <jfleck@inkstain.net>
	* components/help/converters/gnome-db2html2/gdb3html.c:
	changed init entities function to use
	XML_INTERNAL_PREDEFINED_ENTITY to get mdash and hellip working
	
2000-11-15  Pavel Cisler <pavel@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-gdk-extensions.c:
	* libnautilus-extensions/nautilus-gdk-extensions.h:
	* libnautilus-extensions/nautilus-file-operations-progress.c:
	(set_text_unescaped_trimmed):
	(nautilus_string_ellipsize_start):
	Turn an existing truncation routine to a public one, giving it 
	a better name.
	Get rid of a questionable optimization (bugzilla 2555).

	* libnautilus-extensions/nautilus-gdk-extensions.c:
	(nautilus_self_check_ellipsize_start),
	(nautilus_self_check_gdk_extensions):
	Added tests for the elipsize routine.

	* libnautilus-extensions/nautilus-file-operations.c:
	* libnautilus-extensions/nautilus-file-operations.h:
	(get_label_font), (nautilus_format_name_for_display),
	(nautilus_convert_to_formatted_name_for_display),
	(handle_xfer_vfs_error), (handle_xfer_overwrite),
	(nautilus_file_operations_move_to_trash):
	Fix 826: File operation alerts should truncate file names.
	Add a convenience call to unescape and truncate a file name,
	use it the places that format warning and error dialog strings.
	Add some missing quotes in some of the error strings.
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(parent_for_error_dialog):
	Work on fixing 3093 - file operation error dialogs show up in the
	wrong place.
	Make the error dialogs use the progress dialog as their parent window,
	if available, if not, revert to using the original view as a parent.

	* libnautilus-extensions/nautilus-string.c:
	Added a comment pointing people to the new ellipsize routines.

2000-11-15  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 1420, panel splitter drag outline edges are indistinct.

	(nautilus_horizontal_splitter_motion):
	New method overide to handle drawing splitter during drag.
	
	(nautilus_horizontal_splitter_button_release):
	Add additonal code from parent class and don't call
	parent class function at function exit.
	
	* libnautilus-extensions/nautilus-horizontal-splitter.c:
	(nautilus_horizontal_splitter_initialize_class):
	Overide motion method.
	
	(splitter_xor_line):
	Draw splitter outline as two distinct edges.
	
2000-11-15  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-directory-background.c:
	(nautilus_file_background_event_filter):
	fixed some comments

	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(container_foreach_deep_callback),
	(nautilus_gtk_container_foreach_deep):
	* libnautilus-extensions/nautilus-gtk-extensions.h:
	added nautilus_gtk_container_foreach_deep

	* src/nautilus-window.c: (menu_bar_no_resize_hack_size_allocate),
	(menu_bar_no_resize_hack_menu_bar_finder),
	(menu_bar_no_resize_hack_atexit), (menu_bar_no_resize_hack),
	(nautilus_window_constructed):
	added hack to prevent criticals when using the desktop
	bug 4345

2000-11-15  John Sullivan  <sullivan@eazel.com>

	* po/POTFILES.in: Added src/file-manager/fm-desktop-icon-view-ui.xml

2000-11-15  John Sullivan  <sullivan@eazel.com>

	Fixed a couple of cases where context menus appeared on
	the desktop that should have been hidden. This leaves
	behind a new (Bonobo) bug where there are two adjacent 
	separators in the desktop background context menu, which
	I will write up.

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus/nautilus-bonobo-ui.h:
	Add popup zooming commands here that need to be manipulated
	by directory view.
	* src/file-manager/fm-directory-view.c: (real_merge_menus):
	Hide the zooming items in the popup if the directory view
	does not support zooming (e.g., desktop)
	* src/file-manager/fm-icon-view.c: (fm_icon_view_merge_menus):
	Hide the Lay Out submenu in the popup if the icon view
	does not support auto-layout (e.g., desktop)
	* src/nautilus-shell-ui.xml: Make zooming items in popup use
	different commands than zooming items in normal menu, so they
	can be hidden independently.
	* src/nautilus-window-menus.c: (nautilus_window_initialize_menus):
	Attach callbacks to new popup zooming items.

2000-11-15  Gene Z. Ragan  <gzr@eazel.com>	

	Fixed bug 4717, Nautilus draw desktop icons overlapping.

	The problem was caused by the icon container responding to
	an idle function that lays out icons that had been
	newly added.  This is a problem if the callback is called
	from an idle after the icon container has been created, but
	before a size has been allocated. A newly intialized GtkWidget
	has a default allocation of 0, 0, 1, 1 which is too small
	for the layout algorithm to work properly.  A flag was added
	that is set to TRUE when the size_allocate function is called.
	
	* src/nautilus-desktop-window.c: (nautilus_desktop_window_new):
	Set has_been_allocated to FALSE initially.
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(size_allocate), (nautilus_icon_container_initialize),
	(nautilus_icon_container_add):
	Checj status of has_been_allocated flag before adding
	and laying out new icons.
	
	* libnautilus-extensions/nautilus-icon-private.h:
	Added has_been_allocated flag that is set to TRUE
	when size_allocated is first called.

	Work in progress on allowing desktop links to be renamed.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(find_and_update_home_link):
	Allow renaming of home links.
	
	* src/file-manager/fm-icon-view.c: 
	(special_link_in_selection):
	Removed home link from special link types.
	
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_can_rename):
	Allow renaming of home link types.

2000-11-15  Rebecca Schulman  <rebecka@eazel.com>
	This change is the first part of the fix for bug 3920.
	The fix will allow nautilus to tell a user that the
	search they have requested is newer than their index.
	This involved communicating errors that occurred while
	opening and reading the directory outside of the
	directory model to a view, which can react in a useful
	way.

	Reviewed by: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(directory_load_done):
	If the directory load did not complete successfully,
	emit an error signal

	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory.h:
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_initialize_class),
	(nautilus_directory_emit_load_error):
	Add the load error signal, and a cover function to 
	emit the signal

	* src/file-manager/fm-directory-view.h:	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class), (load_error_callback),
	(finish_loading_uri), (disconnect_model_handlers):
	Also add a load_error signal to the fm directory view class,
	so that subclasses can get information about errors particular
	to a type of directory, (in this case the search list view)
	and react correctly.

	* src/file-manager/fm-search-list-view.c: (load_error_callback),
	(fm_search_list_view_initialize):
	Handle the load error SERVICE_OBSOLETE, by displaying a dialog
	that tells the user that their index is too old for their
	search to work correctly, and gives them an option to reindex
	
	* src/file-manager/nautilus-indexing-info.c:
	(nautilus_indexing_info_request_reindex):
	* src/file-manager/nautilus-indexing-info.h:
	Add a cover function to medusa's request reindex function
	that the search list view calls.

2000-11-15  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_pop_up_selection_context_menu),
	(fm_directory_view_pop_up_background_context_menu):
	Oops, I accidentally checked in the Bonobo context
	menus enabled. They are now disabled again.

2000-11-15  Darin Adler  <darin@eazel.com>

	* components/adapter/nautilus-adapter.oafinfo:
	* components/hardware/nautilus-hardware-view.oafinfo:
	* components/help/help-contents.oafinfo:
	* components/help/help-factory.oafinfo:
	* components/history/nautilus-history-view.oafinfo:
	* components/html/ntl-web-browser.oafinfo:
	* components/image-viewer/nautilus-image-view.oafinfo:
	* components/loser/content/nautilus-content-loser.oafinfo:
	* components/loser/sidebar/nautilus-sidebar-loser.oafinfo:
	* components/mozilla/nautilus-mozilla-content-view.oafinfo:
	* components/music/nautilus-music-view.oafinfo:
	* components/notes/nautilus-notes.oafinfo:
	* components/rpmview/nautilus-rpm-view.oafinfo:
	* components/sample/nautilus-sample-content-view.oafinfo:
	* components/services/install/nautilus-view/nautilus-service-install-view.oafinfo:
	* components/services/install/server/trilobite-eazel-install-service.oafinfo:
	* components/services/inventory/nautilus-view/nautilus-inventory-view.oafinfo:
	* components/services/login/nautilus-view/nautilus-change-password-view.oafinfo:
	* components/services/summary/nautilus-view/nautilus-summary-view.oafinfo:
	* components/services/time/nautilus-view/trilobite-eazel-time-view. oafinfo:
	* components/services/time/service/trilobite-eazel-time-service.oafinfo:
	* components/services/trilobite/sample/nautilus-view/nautilus-sample-service-view.oafinfo:
	* components/services/trilobite/sample/service/trilobite-eazel-sample-service.oafinfo:
	* components/shell/shell.oafinfo:
	* components/websearch/ntl-web-search.oafinfo:
	* src/nautilus.oafinfo:

	Changed all references to GNOME/GenericFactory to refer to
	GNOME/ObjectFactory instead.

2000-11-15  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	More work towards using Bonobo for context menus. All
	context menu items should now appear and be correctly 
	hooked up. The Bonobo context menus are still not quite
	enabled, awaiting a couple of Bonobo fixes.

	Redid the API for creating dynamic sets of Bonobo 
	menu items (as used by bookmarks, application & viewer
	lists), and added support for lists of toggle items
	(needed for Disks submenu in desktop context menu).

	Also, added "Show Trash" menu item in File menu, just above
	Empty Trash, after discussing with Andy and Arlo.

	* libnautilus-extensions/nautilus-bonobo-extensions.h:
	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	(get_numbered_menu_item_name): New helper function, returns
	generated menu item name given parent path and index.
	(nautilus_bonobo_get_numbered_menu_item_command): New
	function, returns generated command name given parent path
	and index. 
	(nautilus_bonobo_get_numbered_menu_item_path): New function,
	returns generated menu item path given parent path and index.
	(add_numbered_menu_item_internal): New helper function,
	creates menu item using these other new calls. Mostly extracted
	and rewritten from nautilus_bonobo_add_menu_item.
	(nautilus_bonobo_add_numbered_menu_item): Renamed from
	nautilus_bonobo_add_menu_item, and reimplemented to
	call add_numbered_menu_item_internal.
	(nautilus_bonobo_add_numbered_toggle_menu_item):
	New function, like _add_numbered_menu_item but creates a
	toggle menu item.
	(remove_commands): Renamed from remove_verbs; now handles ids
	as well as verbs.
	(nautilus_bonobo_remove_menu_items_and_commands):
	Renamed from ..._items_and_verbs; now handles ids as well as
	verbs.
	(nautilus_bonobo_get_menu_item_verb_name): Removed; replaced by
	_get_numbered_menu_item_command.
	
	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	New file, Bonobo-style version of desktop context menus.
	* src/file-manager/Makefile.am: Include new file in build.
	
	* src/file-manager/fm-desktop-icon-view.c:
	Add BonoboUIComponent to details struct.
	(fm_desktop_icon_view_destroy): Dispose of BonoboUIComponent.
	(fm_desktop_icon_view_initialize_class): wire up overrides for
	merge_menus and update_menus.
	(new_terminal_callback),
	(change_background_callback), (empty_trash_callback),
	(reset_background_callback), (quit_desktop_callback):
	New Bonobo-style menu callbacks.
	(empty_trash_menu_item_callback): Renamed so I could use the old
	simpler name for new Bonobo callback; this one will be deleted
	when the Bonobo conversion is completed.
	(fm_desktop_icon_view_create_selection_context_menu_items): Reflect
	name change.
	(mount_or_unmount_removable_volume): New Bonobo listener callback
	used by Disks items.
	(update_disks_menu): New function, recreates the Disks menu.
	(real_update_menus): New function, updates the dynamic desktop
	context menu items.
	(real_merge_menus): New function, wires up the BonoboUIComponent
	and verbs.
	
	* src/file-manager/fm-directory-view.c: 
	(fm_directory_view_pop_up_background_context_menu),
	(fm_directory_view_pop_up_selection_context_menu): Change TRUE
	to FALSE to enable the Bonobo context menus.
	(show_trash_callback): New function, navigates to "trash:"
	(add_open_with_program_menu_item), (reset_bonobo_open_with_menu):
	Reworked for new API.
	(real_merge_menus): Add verb for "Show Trash"
	
	* src/file-manager/nautilus-directory-view-ui.xml: Added 
	"Show Trash"; added placeholders in background popup used
	for desktop view.
	
	* src/nautilus-window-menus.c: 
	(append_bookmark_to_menu): Updated for new numbered_menu_item
	API; deleted unused parameter.
	(create_menu_item_from_node), (append_dynamic_bookmarks),
	(refresh_go_menu): Updated append_bookmark_to_menu callers for
	API changes.
	(nautilus_window_remove_bookmarks_menu_items),
	(nautilus_window_remove_go_menu_items): Updated for API name changes.

2000-11-15  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* src/nautilus-view-frame.c 
	(nautilus_view_frame_new): ref the ui_container
	
	(nautilus_view_frame_destroy_client): check if ui_container->win
	is NULL before trying to use it; unref the ui_container
	
	* components/adapter/bonobo-stream-vfs.c (vfs_copy_to): Fix a bug
	whereby the `copyTo' operation would not handle -1 as a request to
	copy the whole file properly.
	
2000-11-15  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by:  George Lebl  <jirka@5z.com>

	* components/loser/README: Added missing `crash' mode to docs.

	* src/nautilus-view-frame.c: (nautilus_view_frame_destroy_client,
	nautilus_view_frame_handle_client_destroy,
	nautilus_view_frame_handle_client_gone, check_if_view_is_gone):
	Added calls to `bonobo_window_deregister_dead_components' to clean
	up menus and toolbars from dead components, fixing Nautilus bug
	1740.

2000-11-15  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize), (eazel_install_log_to_stderr),
	(eazel_install_failed_because_of_disk_full):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file):
	* components/services/install/lib/eazel-install-public.h:

	Re-shuffle logging stuff again to try to make sure that we log as
	little as possible until the log handler is set up.  Add a flag to
	the installer service that indicates if the installer ran out of
	disk space.  Then, you know, actually check the return codes of
	fwrite/fclose to see if they failed.
	
	* nautilus-installer/src/Makefile:

	More crap.
	
	* nautilus-installer/src/installer.c: (create_what_to_do_page),
	(create_install_page), (create_window), (get_detailed_errors),
	(download_failed), (eazel_install_preflight), (install_done),
	(eazel_installer_initialize):

	Re-shuffle some of the initialization to move as much as possible
	after the fetching of the text strings.  It isn't possible to
	cover 100% of the cases this way, so load the default text strings
	first, so we'll have text to display in early errors.  Fix a
	dyslexic typo that would occasionally cause an assertion to fail.
	Notice the new disk-full flag and give an appropriate error
	message.

	* nautilus-installer/src/main.c: (check_disk_space), (main):

	Check for disk space before starting, and refuse to even start
	unless there's N space in /tmp and M space in /.  For now, N = M =
	75 MB.

	* nautilus-installer/src/prescript:

	Apply kisza's patch (4729) to fix xhost parameters.

2000-11-14  Mathieu Lacage  <mathieu@eazel.com>

	Buddy: john harper.
	FIX bug 2946: no icon under cursor when dragging from 
	tree view.
	* components/tree/nautilus-tree-view-dnd.c:
	(nautilus_tree_view_drag_begin), call new function below
	(nautilus_tree_view_set_dnd_icon): sets the icon for the 
	just-started drag.

2000-11-14  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/nautilus-tree-view-dnd.c:
	(nautilus_tree_view_drag_motion),
	(nautilus_tree_view_motion_notify),
	(nautilus_tree_view_make_prelight_if_file_operation),
	(nautilus_tree_view_prelight_stop),
	(nautilus_tree_view_drag_destroy):
	make it use the new prelighting code. leave the old code around
	even though it does nothing. The new prelighting now flickers like
	hell but maciej says he wants to fix it.
	* libnautilus-extensions/nautilus-ctree.c: (nautilus_ctree_row_at),
	(get_cell_rectangle), (nautilus_ctree_set_prelight), (draw_row),
	(real_insert_row), (nautilus_ctree_node_nth),
	(nautilus_ctree_find): implement prelighting. copy/paste code from 
	the NautilusList code to do it.
	* libnautilus-extensions/nautilus-ctree.h: add signature for
	nautilus_ctree_set_prelight plus fields in NautilusCTreeRow.
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_prelight_if_necessary): remove useless code.

2000-11-14  Eskil Heyn Olsen  <eskil@eazel.com>

	buddy: Ramiro Estrugo <ramiro@eazel.com>

	* configure.in:
	Fix to make --disable-eazel-services work, (4722), it no
	longer checks for rpm and ammonite, nor tries to build
	rpmview.

2000-11-14  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/gdb3html.c:
        (init_entities),
        (gdb3html_internalSubset):
        New function and a workaround for the entity bug. Should now support
        &mdash;/&hellip;/&percent; - Fixes bug #2438.

        * components/help/help-method.c:
        (transform_file), (old_help_file),
        (find_help_file):
        Realized that that the gnome_help_file_path function checks for the
        existance of the file using g_file_exists. This spoiled things for the
        way we were trying to detect locale. Fixed it (Bug #4618).

        There is still a bug in this which I will tackle later. This'll do for
        now.

2000-11-14  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-directory-background.c:
	(nautilus_file_background_event_filter), (set_root_pixmap):
	Nautilus no longer responds to PropertyChange events on
	the root window that it originates (bug 3038)

	* libnautilus-extensions/nautilus-background.c:
	(update_drawable_with_pixbuf), (nautilus_background_draw),
	(nautilus_background_draw_to_drawable),
	(nautilus_background_draw_aa),
	(nautilus_background_draw_to_canvas),
	(nautilus_background_load_image_callback),
	(nautilus_background_start_loading_image),
	(nautilus_background_set_image_uri),
	(set_image_and_color_image_loading_done_callback),
	(nautilus_background_set_image_uri_and_color):
	nautilus_background_set_image_uri_and_color used to generate
	an extra SETTINGS_CHANGED + reformatted a bunch of code.

2000-11-14  Darin Adler  <darin@eazel.com>

	* src/nautilus-property-browser.c: Some small stuff that got
	left out of my last commit by accident.

2000-11-14  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(display_selection_info_idle_callback),
	(update_menus_idle_callback), (display_pending_idle_callback): Add
	code to ref the BonoboControl around all three of these idle
	functions to eliminate the problem where the directory view would
	get destroyed in the middle of an idle.
	
	* data/browser.xml:
	* data/linksets/apps.xml:
	* data/linksets/desktop.xml:
	* data/linksets/portals.xml:
	* data/linksets/search_engines.xml:
	* data/static_bookmarks.xml:
	Used "_" prefix on all localizable fields of XML files.
	
	* po/POTFILES.in: Add all these XML files that need translation.
	
	* libnautilus-extensions/nautilus-link-set.c:
	(nautilus_link_set_install), (nautilus_link_set_is_installed),
	(nautilus_link_set_remove): Fix storage leaks, also use
	nautilus_xml_get_property_translated to get the property for the
	"name" property so it can be translated if desired.
	
	* libnautilus-extensions/nautilus-xml-extensions.h:
	* libnautilus-extensions/nautilus-xml-extensions.c:
	(nautilus_xml_get_property_translated): Add a version of
	xmlGetProp that looks for an untranslated version of the property
	and runs it through gettext if there is not a pre-translated
	version present.  For strings downloaded from the service, for
	example, we'll probably use a pre-translated string, but for
	things in the Nautilus source tree we can use an untranslated
	string.
	
	* src/nautilus-bookmark-parsing.c:
	(nautilus_bookmark_new_from_node): Use
	nautilus_xml_get_property_translated to get the bookmark name so
	that static bookmarks can have names translated with gettext. New
	versions of the static bookmarks downloaded from the service can
	use either kind of name. And user-created bookmarks are not run
	through the gettext mechanism.
	
	* src/nautilus-window-menus.c: (create_menu_item_from_node): Use
	nautilus_xml_get_property_translated to get the folder names
	translated just as the bookmarks themselves.

	* src/nautilus-link-set-window.c: (get_link_set_names): Added a
	FIXME. The link set names should come from inside the XML, not
	from the file names.
	
	* src/nautilus-property-browser.c: (get_xml_path),
	(read_browser_xml), (write_browser_xml), (get_color_category):
	(remove_color), (add_color_to_file): Factor out some shared code.
	(add_reset_property): Make hard-wired font size with FIXME.
	(make_properties_from_xml_node): Fix storage leaks and get the
	name of the color using nautilus_xml_get_property_translated so
	the names can be translated.
	(set_up_category_width): Fix storage leaks
	(nautilus_property_browser_update_contents): Fix storage leaks and
	get the display name and description with
	nautilus_xml_get_property_translated so they can be translated.

	* check-THANKS.pl: Got rid of extra blank line at end.

	* libnautilus-extensions/nautilus-customization-data.c:
	(format_name_for_display): Add FIXME to bad-for-localization
	function that turns "_" into " " and capitalizes the first letter
	after each " ".
	
2000-11-14  Gene Z. Ragan  <gzr@eazel.com>

	Fixed a bug where changing the Nautilus theme would cause
	the history view to crash.  The problem was with an
	improperly defined signal handler.
	
	* components/history/nautilus-history-view.c:
	(history_view_update_icons), (do_destroy), (make_obj):

2000-11-14  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.c: (determine_turbolinux_version),
	(determine_mandrake_version), (trilobite_get_distribution_name):

	Add detection of version numbers for Mandrake, in the hopes that
	someday they'll be supported.
	
	* nautilus-installer/src/installer.c:
	(get_detailed_errors_foreach), (eazel_installer_post_install),
	(start_logging), (find_old_tmpdir), (eazel_installer_initialize):
	* nautilus-installer/src/main.c: (main):
	* nautilus-installer/src/prescript:

	Fix handling of /tmp directory and make it configurable on the
	command line.  Clarify the "your distribution not supported"
	message.  Clean up the prescript considerably, hopefully in the
	process fixing bugs with specifying what shell to use, what su to
	use, and allowing root to run the installer (worksforme).

2000-11-13  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 1633, History sidebar panel items all display generic 
	bookmark icon.
	
	* libnautilus/nautilus-view-component.idl:
	Added icon string element to History structure to hold
	an pifbuf converted to a XML string.

	* src/nautilus-window-manage-views.c: (get_history_list_callback):
	Get bookmark pixbuf, convert it to XML and copt the XML string into
	the CORBA structure that is added to the list to be returned.
	
	* components/history/nautilus-history-view.c: 
	(install_icon):
	Check and see if pixbuf is non-NULL. If it is, use it. Otherwise
	use the generic bookmark icon.
	
	(history_view_update_icons):
	Reload entire list to ensure that proper icons are used.
	
	(history_load_location):
	Call install_icon with new pixbuf parameter.	

2000-11-13  Eskil Heyn Olsen  <eskil@eazel.com>

	A lot of housecleaning, for which there were no bug reports...
	amongst this some of the leak fixing that libleakcheck pointed
	out.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (delete_files), (main):
	Pass the install categories to the problem handler
	Don't ask about delete iff --file was used
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_for_file_conflicts),
	Added a comment
	(eazel_install_do_transaction_save_report),
	Don't store the provides lists when storing the transaction
	(eazel_install_display_arguments),
	(eazel_install_start_transaction),
	Log rpm arguments again
	(eazel_install_add_to_extras_foreach),
	(eazel_install_check_existing_packages),
	(eazel_install_ensure_deps), (eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse),
	(eazel_uninstall_check_for_install):
	Leak fixing
	
	* components/services/install/lib/eazel-install-md5.c:
	(md5_get_digest_from_file):
	Close files after md5 check
	* components/services/install/lib/eazel-install-object.c:
	(xml_from_packagedata), (xml_from_packagedata_list),
	Packagedata to xml with provides lists
	(eazel_install_unref), 
	call gtk_object_unref i EAZEL_INSTALL_NO_CORBA
	(eazel_install_initialize),
	(eazel_install_fetch_remote_package_list), (eazel_install_log),
	(eazel_install_open_log), (eazel_install_alter_mode_on_temp),
	(eazel_install_delete_downloads), (eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_emit_install_progress),
	(eazel_install_emit_install_progress_default),
	(eazel_install_emit_download_progress),
	(eazel_install_emit_download_progress_default),
	(eazel_install_emit_preflight_check),
	(eazel_install_emit_preflight_check_default),
	(eazel_install_emit_download_failed),
	(eazel_install_emit_download_failed_default),
	(eazel_install_emit_md5_check_failed),
	(eazel_install_emit_md5_check_failed_default),
	(eazel_install_emit_install_failed),
	(eazel_install_emit_install_failed_default),
	(eazel_install_emit_uninstall_failed),
	(eazel_install_emit_uninstall_failed_default),
	(eazel_install_emit_dependency_check),
	(eazel_install_emit_dependency_check_default),
	(eazel_install_emit_done), (eazel_install_emit_done_default):
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-private.h:
	The rest is rename of a define in the .h file
	
	* components/services/install/lib/eazel-install-problem.h:
	* components/services/install/lib/eazel-install-problem.c:
	(eazel_install_problem_debug_attempts), (compare_problem_case),
	(add_case), (add_cannot_solve_case), (add_force_install_both_case),
	(add_force_remove_case), (eazel_install_problem_case_to_string),
	(eazel_install_problem_case_foreach_destroy),
	(finalize_attempts_hash_cleanup), (eazel_install_problem_finalize),
	(problem_step_foreach_remove), (eazel_install_problem_step),
	(eazel_install_problem_tree_to_case),
	(eazel_install_problem_find_dominant_problem_type),
	(find_dominant_problems), (build_categories_from_problem_list),
	(eazel_install_problem_handle_cases):
	Strewed debug output around.
	Added a CANNOT_SOLVE case.
	Fixed a memory corruption that occured when I freed handled
	problems
	Made the humanreadable strings i18n'ed, and added comments for the
	translators.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package), (get_search_url_for_package):
	Leak fixing.
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query), (eazel_install_simple_query):
	Added which root it's opening to the debug output, used to catch a
	bug in the installer.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings),
	(eazel_install_start_transaction_make_rpm_argument_list),
	(eazel_install_free_rpm_system),
	(eazel_install_prepare_rpm_system):
	Leak fixing and debug output changing...
	
	* components/services/install/lib/eazel-install-xml-package-list.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (parse_category),
	(eazel_install_packagedata_to_xml),
	(eazel_install_packagelist_to_xml),
	(eazel_install_categorydata_to_xml), (osd_parse_implementation),
	(osd_parse_softpkg):
	Leak fixing, plus the ability to generate xml without PROVIDES.
	
	* components/services/install/lib/makefile.staticlib.in:
	Added eazel-install-problem, since the installer now uses it.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_parse_uri),
	(nautilus_service_install_done),
	(nautilus_service_install_view_update_from_uri):
	Moved the category list into the details for the view, so when
	calling eazel-install-problem handler, I could pass the categories
	to install.
	
	* components/services/trilobite/helper/eazel-helper.security.in:
	Fixed so it should work with all usermode versions.
	
	* components/services/trilobite/libtrilobite/trilobite-core-utils.h
	:
	* components/services/trilobite/libtrilobite/helixcode-utils.c:
	* components/services/trilobite/libtrilobite/helixcode-utils.h:
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_fetch_uri), (trilobite_fetch_uri_to_file),
	(trilobite_setenv):
	Leak fixing and debug output and s/glib types/c types/.
	
	* nautilus-installer/src/HACKING:
	Added a warning saying you have to be Eskil or Robey to make this
	compile.
	
	* nautilus-installer/src/Makefile:
	Yes.
	
	* nautilus-installer/src/callbacks.c: (begin_install):
	Hacked to use the eazel-install problem solver.
	
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/installer.c: (create_what_to_do_page),
	(create_install_page), (jump_to_error_page), (start_over),
	(dont_start_over_callback), (jump_to_retry_page),
	(create_finish_page_good), (eazel_install_progress),
	(eazel_download_progress), (create_initial_force_remove_category),
	(add_force_remove), (get_detailed_errors_foreach),
	(get_detailed_errors), (install_failed), (eazel_install_preflight),
	(install_done), (eazel_installer_add_category), (check_system),
	(more_check_system), (eazel_installer_do_install),
	(eazel_installer_post_install), (draw_splash_text),
	(eazel_installer_set_default_texts), (eazel_installer_setup_texts),
	(eazel_install_get_depends), (add_singular_package),
	(eazel_installer_initialize):
	Changed to use the eazel-install-problem handler.
	Most text strings are taken from a array, which is set in a
	function that can grab the strings from a server (partly fix for
	1094).
	Removed all the old problem handler code.

	* nautilus-installer/src/main.c: (main):
	Added a secret --package option that makes the installer ignore
	the server specified package and just download another. Good for
	debugging.

2000-11-13  Mathieu Lacage  <mathieu@eazel.com>

	Make maciej happy and split the dnd code in a new file.
	
	* components/tree/Makefile.am: add new files.
	* components/tree/nautilus-tree-view-dnd.c: new file for dnd code.
	(tree_view_realize_callback), (nautilus_tree_view_init_dnd),
	(nautilus_tree_view_drag_begin), (nautilus_tree_view_drag_end),
	(collapse_time_callback), (nautilus_tree_view_drag_leave),
	(nautilus_tree_view_drag_motion), (nautilus_tree_view_drag_drop),
	(nautilus_tree_view_drag_data_received),
	(nautilus_tree_view_drag_data_get),
	(nautilus_tree_view_button_press),
	(nautilus_tree_view_button_release),
	(nautilus_tree_view_motion_notify),
	(nautilus_tree_view_make_prelight_if_file_operation),
	(nautilus_tree_view_expand_node),
	(nautilus_tree_view_collapse_node),
	(nautilus_tree_view_is_tree_node_expanded),
	(nautilus_tree_view_expand_or_collapse_row),
	(nautilus_tree_view_move_copy_files),
	(nautilus_tree_view_find_drop_target),
	(nautilus_tree_view_is_tree_node_directory),
	(nautilus_tree_view_tree_node_at), (nautilus_tree_view_item_at),
	(nautilus_tree_view_get_drag_uri),
	(nautilus_tree_view_ensure_drag_data), (nautilus_dump_info),
	(expand_hack_unref), (expand_hack_new), (expand_time_callback),
	(nautilus_tree_view_expand_maybe_later),
	(auto_scroll_timeout_callback),
	(nautilus_tree_view_start_auto_scroll),
	(nautilus_tree_view_stop_auto_scroll),
	(nautilus_tree_view_real_scroll),
	(nautilus_tree_view_get_drop_action),
	(nautilus_tree_view_collapse_all),
	(nautilus_tree_view_receive_dropped_icons),
	(nautilus_tree_view_prelight_stop),
	(nautilus_tree_view_drag_destroy),
	(nautilus_tree_view_drag_destroy_real):
	* components/tree/nautilus-tree-view-dnd.h: header.
	* components/tree/nautilus-tree-view-private.h: shared stuff between
	TreeView and dnd code.
	
	* components/tree/nautilus-tree-view.c: remove all those functions.
	(nautilus_tree_view_insert_model_node), (forget_view_node),
	(nautilus_tree_view_remove_model_node),
	(nautilus_tree_view_update_model_node),
	(nautilus_tree_view_initialize),
	(nautilus_tree_view_model_node_to_view_node),
	(nautilus_tree_view_node_to_model_node),
	(nautilus_tree_view_node_to_file), (tree_expand_callback),
	(tree_collapse_callback), (tree_select_row_callback),
	(nautilus_tree_view_find_parent_node):
	* components/tree/nautilus-tree-view.h:

2000-11-13  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* configure.in:
	Enable the sign-compare and cast-align warnings.
	
	* components/help/converters/gnome-db2html2/gdb3html.c:
	(find_first_element):
	* components/help/hyperbola-filefmt.c: (fmt_free_tree_info):
	* components/help/hyperbola-nav-index.c:
	(hyperbola_navigation_index_update_clist), (despace),
	(end_element):
	* components/history/nautilus-history-view.c:
	(history_load_location):
	* components/mozilla/nautilus-mozilla-content-view.c:
	(string_list_get_index_of_string):
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_string_sequence_to_glist),
	(corba_packagedatastructlist_from_packagedata_list),
	(packagedata_list_from_corba_packagedatastructlist),
	(categorydata_list_from_corba_categorystructlist):
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_monitor_rpm_process_pipe):
	* components/services/install/lib/eazel-install-rpm-signature.c:
	(read_rpm_lead), (read_rpm_signature):
	* components/services/trilobite/libtrilobite/trilobite-root-helper.
	c: (trilobite_root_helper_run_program),
	(trilobite_root_helper_set_time):
	* cut-n-paste-code/widgets/nautilusclist/nautilusclist.c:
	(nautilus_clist_get_arg), (nautilus_clist_construct):
	* helper-utilities/authenticate/nautilus-authenticate.c: (main):
	* libnautilus-extensions/nautilus-background.c:
	(set_image_and_color_image_loading_done_callback):
	* libnautilus-extensions/nautilus-buffered-widget.c:
	(nautilus_gdk_pixbuf_tile_alpha):
	* libnautilus-extensions/nautilus-caption-table.c:
	(entry_activate):
	* libnautilus-extensions/nautilus-caption-table.h:
	* libnautilus-extensions/nautilus-ctree.c:
	(nautilus_ctree_node_nth), (nautilus_ctree_drag_motion):
	* libnautilus-extensions/nautilus-ctree.h:
	* libnautilus-extensions/nautilus-directory-async.c:
	(metafile_write):
	* libnautilus-extensions/nautilus-file-changes-queue.c:
	(nautilus_file_changes_consume_changes):
	* libnautilus-extensions/nautilus-file-operations-progress.c:
	(truncate_string_from_start):
	* libnautilus-extensions/nautilus-file-operations.c:
	(extract_string_until):
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_read_entire_file):
	* libnautilus-extensions/nautilus-gdk-extensions.c:
	(nautilus_get_largest_fitting_font):
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_get_sidebar_panel_view_identifiers):
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_window_set_initial_geometry_from_string),
	(nautilus_gtk_menu_set_item_visibility):
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(draw_or_measure_label_text), (draw_or_measure_label_text_aa):
	* libnautilus-extensions/nautilus-icon-container.c:
	(rubberband_timeout_callback), (destroy), (compute_stretch):
	* libnautilus-extensions/nautilus-icon-container.h:
	(nautilus_icon_container_find_drop_target):
	* libnautilus-extensions/nautilus-icon-factory.c:
	(check_recently_used_list), (get_themed_icon_file_path),
	(revise_scale_factors_if_too_big):
	* libnautilus-extensions/nautilus-icon-text-item.c:
	(recompute_bounding_box), (iti_draw), (iti_selection_motion):
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_size_allocate), (label_recompute_line_geometries):
	* libnautilus-extensions/nautilus-list.c: (draw_cell),
	(nautilus_list_drag_data_received):
	* libnautilus-extensions/nautilus-mime-actions.c:
	(server_matches_content_requirements),
	(nautilus_do_component_query):
	* libnautilus-extensions/nautilus-password-dialog.c:
	(caption_table_activate_callback):
	* libnautilus-extensions/nautilus-preferences-item.c:
	(has_image_file):
	* libnautilus-extensions/nautilus-scalable-font.c:
	(file_as_string), (parse_font_description_file),
	(nautilus_text_layout_new):
	* libnautilus-extensions/nautilus-scalable-font.h:
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(check_permissions):
	* libnautilus/nautilus-view.c:
	(nautilus_shallow_g_list_from_uri_list):
	* libnautilus/nautilus-zoomable.c:
	(nautilus_g_list_from_ZoomLevelList):
	* librsvg/rsvg-ft.c: (rsvg_ft_measure_or_render_string):
	* librsvg/rsvg.c: (rsvg_parse_transform):
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_create_background_context_menu_items),
	(get_sort_criterion_by_metadata_text), (get_sort_criterion_by_id):
	* src/file-manager/fm-list-view.c: (select_row_common),
	(select_matching_name_callback), (select_previous_next_common),
	(fm_list_view_bump_zoom_level):
	* src/nautilus-search-bar-criterion.c:
	(nautilus_search_bar_criterion_update_valid_criteria_choices):
	* src/nautilus-shell.c: (corba_open_windows),
	(corba_open_default_window):
	* src/nautilus-sidebar.c: (nautilus_sidebar_add_panel_items):
	* src/nautilus-window-menus.c:
	(nautilus_window_disable_keyboard_navigation_for_menus):
	* src/nautilus-window.c: (nautilus_window_size_request):
	Fix all sign-compare violations.

2000-11-13  Mathieu Lacage  <mathieu@eazel.com>

	Buddy: pavel.
	Fix bug 2422 and 4382.
	
	* components/tree/nautilus-tree-view.c:
	(filtering_changed_callback), 
	(collapse_time_callback): added. collapses opened folders when
	you leave the tree view.
	(nautilus_tree_view_drag_leave): make it call tree_view_drag_destroy
	(nautilus_tree_view_drag_motion): cleanup, make it call
	tree_view_drag_destroy_real
	(nautilus_tree_view_drag_drop): spaces.
	(nautilus_tree_view_drag_data_received): cleanup: make it call
	tree_view_drag_destroy.
	(nautilus_dump_info): cleanup.
	(expand_time_callback): cleanup.
	(nautilus_tree_view_expand_maybe_later): cleanup
	(nautilus_tree_view_collapse_all): cleanup.
	(nautilus_tree_view_receive_dropped_icons): make it collapse
	correctly.
	(nautilus_tree_view_prelight_stop): new function: clears prelighting.
	(nautilus_tree_view_drag_destroy): new function: destroys when drag finished.
	(nautilus_tree_view_drag_destroy_real): new function: destroys when drag begins.
	* docs/dnd.txt: add some thoughts.
	* libnautilus-extensions/nautilus-drag.c: 
	(nautilus_drag_init): init new field.
	* libnautilus-extensions/nautilus-drag.h: add shared field to public structure.

2000-11-13  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4700, ejecting an audio cd kills Nautilus
	
	* libnautilus-extensions/nautilus-volume-monitor.c:
	(nautilus_volume_monitor_get_volume_name):
	Check for NULL string before using it.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(volume_unmounted_callback):
	Don't bother emiting signal if volume was never mounted
	in the first place.

2000-11-13  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	More work towards using Bonobo for context menus. Also, found
	and fixed bug where "Open With" items weren't working from
	the File menu (though they were from the context menu).

	* src/file-manager/fm-directory-view.c:
	(add_open_with_program_menu_item): Determine verb name from item
	path, not item label. This was broken before, causing "Open With"
	items in the File menu not to work. Not sure why this ever worked,
	but I didn't spend too much time investigating its change history.
	(add_open_with_app_bonobo_menu_item), 
	(add_open_with_viewer_bonobo_menu_item): Removed these functions;
	they were adding an extra layer that ended up hurting rather than
	helping.
	(add_application_to_bonobo_menu),
	(add_component_to_bonobo_menu): consolidated with the removed
	functions; add item to context menu as well as normal menu.
	(reset_bonobo_open_with_menu): remove menu items and verbs from
	context menu as well as normal menu.

2000-11-13  Josh Barrow  <josh@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_register):
	Renamed "directory" to "folder"

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: John Sullivan  <sullivan@eazel.com>

	* src/run-nautilus: Fixed bug 3248 (2nd copy of Nautilus faults)
	by removing the nautilus-clean.sh calls from run-nautilus (Ramiro
	claims it was fixed already, but there were race conditions, and
	these calls are masking bugs that we want to fix for release).

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	* components/adapter/nautilus-adapter-progressive-load-strategy.c:
	Increased chunk-size to 32k in an unsuccesful attempt to improve
	the situation with regards to fix bug 3256 (attempt to view huge
	text file is very slow). It did not help which leads me to believe
	the problem is with the way the text control handles progressive
	updates.

	Fix bug 2180 (switching from icon view to list view, the zoom
	control disappears and then reappears).
	
	* src/nautilus-window-manage-views.c (load_content_view,
	zoom_level_changed_callback): Don't show and hide the zoom control
	at various times. Instead, let
	`nautilus_window_set_content_view_widget' establish the right
	visibility state when we finally enable the widget. This way, the
	zoom control won't ever disappear and reappear when switching
	between two different zoomable views.
	* src/nautilus-window.c (nautilus_window_set_content_view_widget):
	Set the zoom control to the right visibility state when setting
	the new widget.

2000-11-13  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-theme-selector.c: (exit_remove_mode):
	fixed bug 3823, text in theme selector is wrong, by correcting
	a mis-set boolean.
	
2000-11-13  John Sullivan  <sullivan@eazel.com>

	More progress on using Bonobo for context menu items.
	Now the Bonobo context menu items get their labels
	updated to match the selection.

	* src/file-manager/fm-directory-view.c: 
	(compute_menu_item_info):
	Now has return parameters for the label with & without underscore,
	instead of a boolean parameter to choose between them.	
	(append_gtk_menu_item), (append_selection_menu_subtree):
	Update callers that only want the without-underscore version.	
	(update_one_menu_item): Set the label for the verb (no underscore)
	as well as the label for the menu item (include underscore).

	* src/file-manager/fm-icon-view.c: 
	(compute_menu_item_info):
	Now has return parameters for the label with & without underscore,
	instead of a boolean parameter to choose between them.
	(insert_one_context_menu_item),
	(fm_icon_view_create_background_context_menu_items):
	Update callers that only want the without-underscore version.
	(update_one_menu_item): Set the label for the verb (no underscore)
	as well as the label for the menu item (include underscore).

	* src/file-manager/fm-search-list-view.c:
	(compute_reveal_item_name_and_sensitivity):
	Now has return parameters for the label with & without underscore,
	instead of a boolean parameter to choose between them.
	(real_create_selection_context_menu_items): Update caller that
	only wants the without-underscore version.
	(update_reveal_item): Set the label for the verb (no underscore)
	as well as the label for the menu item (include underscore).
	
	* src/file-manager/nautilus-directory-view-ui.xml:
	Add some placeholders in the selection context menu so subclasses
	can place items correctly.
	* src/file-manager/nautilus-icon-view-ui.xml:
	Insert Rename, Stretch, and Unstretch into context menu.
	* src/file-manager/nautilus-search-list-view-ui.xml:
	Define commands for each verb. Move tips to commands.
	Insert Reveal into context menu.

2000-11-13  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 4703, add new background crashes when you pick trash.
	
	* src/nautilus-property-browser.c: (add_background_to_browser):
	fixed by removing a double-free in the case when the selected
	file is not an image.
	
2000-11-13  John Sullivan  <sullivan@eazel.com>

	More work towards converting directory view context menus
	to use Bonobo. Checking in so Darin can help me debug.
	The Bonobo context menus still aren't used unless you
	modify code.

	* src/file-manager/fm-directory-view.c: 
	(real_merge_menus): Add verb handler for "Reset Background"
	(fm_directory_view_pop_up_selection_context_menu): Add
	conditional to execute Bonobo version (if TRUE changed to FALSE).
	(fm_directory_view_pop_up_background_context_menu): formatting tweak.
	* src/file-manager/nautilus-directory-view-ui.xml:
	Added command definitions for all verbs. Moved labels from
	context items into commands. Moved tips into commands. Populated
	the background and selection popup menu definitions.
	* src/file-manager/nautilus-icon-view-ui.xml:
	Added command definitions for all verbs and ids. Defined labels
	for commands. Moved tips into commands. Partially populated the
	background popup menu definition.
	* src/nautilus-shell-ui.xml: Moved accelerators for Zoom commands
	to menu items, so they don't appear in context menus. Add labels
	for Zoom commands. Add degenerate background popup that defines
	the zoom items.

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-program-choosing.c
	(nautilus_launch_application_from_command): Remove stray printf.

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	* THANKS: Updated based on running check-THANKS.pl
	* AUTHORS, ChangeLog-200001018: Fixed some typos in
	people's email addresses.

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	Fix bugs 3641 (text preview gets garbled when switching files in
	the middle of a load) and 3479 (Nautilus crashes if
	nautilus-adapter* missing).

	* components/adapter/nautilus-adapter-progressive-load-strategy.c
	(call_when_stopped, load_and_free_uri, declare_done_loading,
	stop_loading,
	nautilus_adapter_progressive_load_strategy_load_location): Make
	sure previous load is completely stopped before ever starting a
	new load.

	* components/adapter/nautilus-adapter.c:
	(nautilus_adapter_destroy, nautilus_adapter_new): Avoid reporting
	signals to the view frame while in the middle of destroying the
	adapter.
	* src/nautilus-component-adapter-factory.c
	(nautilus_component_adapter_factory_get): Return NULL when loading
	the adapter factory component fails.
	(nautilus_component_adapter_factory_initialize,
	component_adapter_factory_at_exit_destructor): Changes required by
	the above.
	* src/nautilus-view-frame.c
	(nautilus_view_frame_set_to_component): report failure if we can't
	load the adapter factory.
	* src/nautilus-window-manage-views.c
	(report_content_view_failure_to_user, load_content_view,
	handle_view_failure, nautilus_window_set_sidebar_panels): Do a
	somewhat better job of reporting view load failures.

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/nautilus-tree-view.c
	(nautilus_tree_view_insert_model_node,
	nautilus_tree_view_update_model_node): Set both open and closed
	pixmaps, so open folders have a disttinct appearance in the tree,
	in addition to the disclosure triangles. This fixes bug 2421. This
	work was needed to fix bug 3279 (Icons in tree sidebar panel don't
	update when theme is changed), which was a side effect of not
	doing this.

2000-11-13  Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-ctree.c (ctree_is_hot_spot):
	Expand margins around expander by 3 pixels on each side to make it
	easier to click the disclosure triangle (triangle will prelight
	when within range), to fix bug 4479


	Fix bugs 4497 (Add configuration option to show only folders in
	tree view) and 2419 (Tree view should track "show hidden files"
	preference):

	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_should_skip_file,
	nautilus_tree_view_insert_model_node,
	nautilus_tree_view_remove_model_node,
	nautilus_tree_view_update_model_node): Handle possibly filtering
	out hidden files, backup files or non-directories.
	
	(filtering_changed_callback,
	nautilus_tree_view_initialize): Initialize from and watch
	filtering preferences, reload whole tree when prefs change.
	
	(nautilus_tree_view_destroy): Stop watching filtering prefs.

	(reload_model_node, reload_whole_tree, expand_node_for_file,
	nautilus_tree_view_receive_dropped_icons): Update code for
	reloading the tree on expand/collapse etc.

 	* components/tree/nautilus-tree-model.c
	(nautilus_tree_model_directory_files_added_callback): Check if we
	already have a node for each file before trying to create a new
	one. This was needed because otherwise chaning the preference
	settins mentioned above would result in crashes.

	* libnautilus-extensions/nautilus-file.h,
	libnautilus-extensions/nautilus-file.c:
	(nautilus_file_is_hidden_file, nautilus_file_is_backup_file,
	nautilus_file_should_show,
	filter_hidden_and_backup_partition_callback,
	nautilus_file_list_filter_hidden_and_backup): Move hidden file and
	backup file filtering logic here from fm-directory-view.c.

	* src/file-manager/fm-directory-view.c (queue_pending_files): Use
	`nautilus_file_list_filter_hidden_and_backup' to do filtering.
	
	* libnautilus-extensions/nautilus-global-preferences.h,
	libnautilus-extensions/nautilus-global-preferences.c
	(global_preferences_create_dialog, global_preferences_register):
	Add a new preference for showing only directories in the tree
	view.

	* libnautilus-extensions/nautilus-preferences-dialog.c: Make
	preferences dialog a bit bigger to accomodate the new setting.

2000-11-12  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 3210, trash image fails to appear when defined as
	emblem, by disallowing new emblems to be defined with the same
	name as intrinsic ones.  Also, disallowed adding an emblem with
	the same name as an existing one.

	* src/nautilus-property-browser.c:
	(nautilus_property_browser_destroy), (emblem_keyword_valid),
	(is_reserved_keyword), (emblem_dialog_clicked),
	(make_properties_from_directories):
	maintain a glist of emblem names, and check it when we're adding a
	new one to make sure it's not already on it.  Put up an error dialog
	if it already exists.
	
2000-11-12  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 3116, add preference for disabling sound preview
	
	* libnautilus-extensions/nautilus-global-preferences.h:
	defined sound preview preference
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_create_dialog), (global_preferences_register):
	registered sound preview preference and added to speed tradeoffs
	* src/file-manager/fm-icon-view.c: (should_preview_sound),
	(icon_container_preview_callback):
	only preview sounds if the preference is set
	
2000-11-12 John Fleck <jfleck@inkstain.net>

	* adding term tag support to gnome-db2html2 - fixing bug #4406
	
2000-11-12  Maciej Stachowiak  <mjs@eazel.com>

	Fixed bugs 4503 and 4584.
	
	* components/tree/nautilus-tree-view.c: Added
	`current_main_view_uri' field to details struct.
	(nautilus_tree_view_load_uri): Set `current_main_view_uri' field
	every time, whether or not we end up selecting it.
	(nautilus_tree_view_destroy): Free `current_main_view_uri' and
	`selected_uri' fields.
	(tree_select_row_callback): Only ignore the select if the selected
	row matches `current_main_view_uri', not just `selected_uri' to
	fix bug 4584 (Can not reselect the previous directory in the tree
	when I entered a "hidden" directory in the content view)

	(nautilus_tree_view_button_release): Only select the row on a
	release of button 1, otherwise ignore to fix bug 4503 ("Tree
	Sidebar panel treats right-clicks as left-clicks (should do
	nothing)")
 
	(tree_view_realize_callback): trivial formatting fix. 

2000-11-11  Maciej Stachowiak  <mjs@eazel.com>

	* components/help/hyperbola-nav-tree.c
	(hyperbola_navigation_tree_new): FIx bug 4352 and make the
	redundant "Document Tree" title go away.

2000-11-11  Maciej Stachowiak  <mjs@eazel.com>

	Fixed bugzilla.eazel.com bugs 4051 (applications which require
	terminals don't get them) and 4072 (mime types: command= string
	can't take args?).

	* libnautilus-extensions/nautilus-gnome-extensions.c
	(nautilus_gnome_terminal_shell_execute): Don't take the shell as
	an argument, just use "/bin/sh", there's no reason to use any
	other shell for the purpose of launching a terminal like this.

	(nautilus_gnome_open_terminal): Don't pass user shell to
	`nautilus_gnome_terminal_shell_execute'; handle `gnome-terminal'
	properly by passing it "-x" instead of incorrectly trying to quote
	the command.
	
	* libnautilus-extensions/nautilus-gnome-extensions.h: Fix minor
	typo.
	
	* libnautilus-extensions/nautilus-program-choosing.h,
	libnautilus-extensions/nautilus-program-choosing.c:
	(nautilus_launch_application_from_command): Add a use_termial
	argument and if passed, launch the program in a terminal; minor
	fixes to the way non-terminal-requiring programs are launched as
	well, including not quoting the command, so that it can include
	command line arguments (if the command name includes a space, it
	had better be quoted already).

	(nautilus_launch_application): Use the new `use_terminal' argument
	when calling `nautilus_launch_application_from_command'.
	
	* libnautilus-extensions/nautilus-program-chooser.c:
	(launch_mime_capplet): Use the new `use_terminal' argument
	when calling `nautilus_launch_application_from_command'.

	* src/file-manager/fm-desktop-icon-view.c
	(change_desktop_background_menu_item_callback): Use the new
	`use_terminal' argument when calling
	`nautilus_launch_application_from_command'.
	
	* src/file-manager/fm-directory-view.c (activate_callback): Use
	the new `use_terminal' argument when calling
	`nautilus_launch_application_from_command'. Also, shell-quote the
	command, since nautilus_application_launch_from_command won't do
	that for you any more.

2000-11-10  Maciej Stachowiak  <mjs@eazel.com>

	* icons/gnome/Makefile.am, icons/i-executable.png: Restored
	original icon to Gnome theme (Andy accidentally changed it while
	replacing the default theme's exectuable icon).

2000-11-10  Andy Hertzfeld  <andy@eazel.com>

	* icons/Makefile.am:
	* icons/i-executable-aa.png:
	* icons/i-executable.png:
	new executable icons from Susan
	
2000-11-10  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c:
	(nautilus_color_selection_dialog_new), (add_color_to_file),
	(add_color_to_browser), (show_color_selection_window),
	(add_new_color), (make_properties_from_xml_node):
	fixed bug 4197, colors can't be given a name, by adding a
	color selection window with a name entry, and using that
	to name the color.
	
	* icons/villanova/Makefile.am:
	* icons/villanova/i-directory-accept-*.png:
	fixed bug 4641, missing non-aa "folder-accept" image for the
	villanova theme, by adding new images from Susan.
	
	* icons/eazel/eazel.xml:
	* icons/villanova/villanova.xml:
	tweaked the selection box colors for the eazel and villanova
	themes according to Susan's specification.
	
2000-11-10  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3057, Icon renaming state can get broken by clicking 
	in location bar.
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(handle_focus_out_event): 
	Signal handler that ends renaming mode when focus changes.
	(nautilus_icon_container_initialize):
	Connect "focus_out_event" to new signal handler above.
	
	* libnautilus-extensions/nautilus-icon-text-item.c: (layout_text),
	(iti_start_editing), (iti_draw), (iti_event),
	(nautilus_icon_text_item_select),
	(nautilus_icon_text_item_get_text),
	(nautilus_icon_text_item_start_editing),
	(nautilus_icon_text_item_stop_editing):
	Code style cleanups.

2000-11-10  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Gene Z. Ragan <gzr@eazel.com>

	I think 3320 is fixed (I definitely can't reproduce it) but this
	change should eliminate a few remaining possible causes.
	
	* components/tree/nautilus-tree-model.h,
	components/tree/nautilus-tree-model.c
	(nautilus_tree_model_get_node_from_file): New function that gets
	the node corresponding to a NautilusFile (to avoid possible
	problems with multiple NautilusFile objects for one URI).
	
	(nautilus_tree_model_get_node, report_node_changed,
	report_node_removed_internal,
	nautilus_tree_model_directory_files_changed_callback,
	nautilus_tree_model_directory_done_loading_callback): Use where
	possible.

	* components/tree/nautilus-tree-view.c: (reload_node_for_file,
	nautilus_tree_view_find_parent_node): Use
	`nautilus_tree_model_get_node_from_file'.

2000-11-09  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c:
	(nautilus_property_browser_drag_data_get):
	fix bug where newly added reset coupon in the colors section
	of the property browser wasn't working on the sidebar.  Fixed
	by making sure it issues a uri to a valid image in
	drag_data_get.
	
2000-11-09 Elliot Lee <sopwith@redhat.com>

	* configure.in: Fix freetype2 detection
	* Various makefiles: fix srcdir != builddir.

2000-11-09  Darin Adler  <darin@eazel.com>

	buddy: John Sullivan <sullivan@eazel.com>

	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopuluate_program_list), (is_component_default_for_file),
	(program_file_pair_is_default_for_file),
	(program_file_pair_is_in_short_list_for_file),
	(add_to_short_list_for_file), (remove_from_short_list_for_file),
	(remove_default_for_item), (set_default_for_item):
	* libnautilus-extensions/nautilus-program-choosing.c:
	(nautilus_choose_component_for_file):

	Remove unnecessary calls to wait functions. There are still
	one or two cases of calls. Next step is to replace them.

2000-11-09  John Sullivan  <sullivan@eazel.com>

	The beginnings of converting directory view context menus
	to Bonobo. This doesn't work right yet; I'm checking in
	so Darin can help me debug (the new code is iffed out for
	now)

	* src/file-manager/fm-directory-view.c: (get_bonobo_window),
	(create_popup_menu), (real_merge_menus),
	(fm_directory_view_pop_up_background_context_menu):
	* src/file-manager/nautilus-directory-view-ui.xml:

2000-11-08  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_container_find_drop_target),
	(nautilus_icon_container_get_drop_action):
	fixed bug 3215 and 3723, bad feedback during emblem dropping,
	by rejecting the drop if we're not over an icon.  Also, made it
	reject the drop for colors and backgrounds if we're not over
	the background.  I also fixed a memory leak in get_drop_action.
	
2000-11-08  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:
	if rpm version check fails, hint at user 
	to --disable-eazel-services

2000-11-08  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_for_file_conflicts),
	(eazel_uninstall_downward_traverse):
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_add_to_rpm_set):
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_new_from_rpm_header),
	(packagedata_fill_from_rpm_header), (packagedata_fill_from_file),
	(packagedata_destroy):
	* components/services/install/lib/eazel-install-types.h:
	* nautilus-installer/src/installer.c: (more_check_system):
	
	Backport the memory leak fixes from PR2.  Also clean up the use of
	'Header' structs from librpm since they turn out to be secret
	pointers, not structs.

2000-11-08  Darin Adler  <darin@eazel.com>

	buddy: Gene Ragan <gzr@eazel.com>

	* libnautilus-extensions/nautilus-file.c: (rename_callback): Since
	metadata for the directory itself is now stored under a fixed
	name, no need to rename the metadata for self-owned files any
	more.
	(get_item_count), (get_size), (compare_directories_by_count),
	(compare_files_by_size), (compare_by_size): Reimplement compares
	by size so they don't use gnome_vfs_file_info_compare -- this
	makes them work better for info == NULL cases.
	(get_date), (compare_by_modification_date): Reimplement compares
	by modification date so they don't use gnome_vfs_file_info_compare
	-- this makes them work better for info == NULL cases.
	(compare_by_name): Sort files that start with "." or "#" last.
	(compare_by_name_and_directory_name): Helper function so that we
	always sort by directory name when names are equal.
	(nautilus_file_compare_for_sort): Use the new functions above so
	we never have to use the gnome_vfs_file_info_compare function.
	Because of that, we won't have to keep file names around any more.
	This also simplified the logic -- I was able to remove all the
	special cases for info == NULL.
	(get_metadata_name): Function that returns "." for self-owned
	files so the metadata for the directory itself is stored somewhere
	that's not affected by renaming.
	(nautilus_file_get_metadata), (nautilus_file_get_metadata_list),
	(nautilus_file_set_metadata), (nautilus_file_set_metadata_list),
	(nautilus_file_get_boolean_metadata),
	(nautilus_file_get_integer_metadata),
	(nautilus_file_set_boolean_metadata),
	(nautilus_file_set_integer_metadata): Use the new
	get_metadata_name function.
	
	* src/file-manager/nautilus-directory-view-ui.xml: Changed an old
	<menuitem/> to <separator/>.

	* po/.cvsignore: Ignore the tmp directory, but no need to ignore
	the .headerlock file which is now obsolete.

	* README: Minor tweaks.
	* libnautilus-extensions/Makefile.am: Resorted lists.

2000-11-08  John Sullivan  <sullivan@eazel.com>

	buddy: Darin Adler <darin@eazel.com>

	Fixed bug 4485 (":" as location caused odd error messages)

	* libnautilus-extensions/nautilus-directory.c:
	(real_get_name_for_self_as_new_file): Now checks for
	initial-colon as well as missing-colon.
	
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_self_check_file): Added a few self check tests
	for default file naming from bogus directories.

2000-11-08  Ali Abdin  <aliabdin@aucegypt.edu>

	* components/music/nautilus-music-view.c:
	(xpm_label_box),
	(xpm_dual_label_box):
	Re-write to use gdk-pixbuf. This eliminates a FIXME in there.

2000-11-08  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:
	Fixed bug 4643, check for rpm version 3.0.x

2000-11-08  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4472 (web search uses wrong URI)

	* libnautilus-extensions/nautilus-global-preferences.c:
	Change the web search default URI per Laura.

2000-11-08  Mike Fleming  <mfleming@eazel.com>

	Fix relative URI bugs 4415, 4416, 4417.
	Do eazel-services untranslate for link messages

	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_link_message_callback),
	(remove_internal_relative_components),
	(make_full_uri_from_relative), (mozilla_dom_mouse_click_callback),
	(test_make_full_uri_from_relative):

2000-11-07  Josh Barrow  <josh@eazel.com>

	* icons/eazel/eazel.xml:
	Changed the selection box color to match the icons.

2000-11-07  Darin Adler  <darin@eazel.com>

	Worked on getting rid of wait_until_ready.
	
	* libnautilus-extensions/nautilus-directory.c: Got rid of include
	of nautilus-wait-until-ready.h.
	
	* libnautilus-extensions/nautilus-file.c: Got rid of
	nautilus_file_wait_until_ready.
	
	* libnautilus-extensions/nautilus-mime-actions.c:
	(wait_until_ready_callback),
	(nautilus_mime_actions_wait_for_full_file_attributes):
	Reimplemented so the wait is in here so we can get rid of
	nautilus_file_wait_until_ready.
	
	* libnautilus-extensions/nautilus-mime-actions.h: Moved
	nautilus_mime_actions_wait_for_full_file_attributes into
	nautilus-wait-until-ready.h.
	
	* libnautilus-extensions/nautilus-program-chooser.c: Added include
	of nautilus-wait-until-ready.h since this is one of the two files
	that still uses the thing.
	* libnautilus-extensions/nautilus-program-choosing.c: Added include
	of nautilus-wait-until-ready.h since this is one of the two files
	that still uses the thing.
	
	* libnautilus-extensions/nautilus-wait-until-ready.h: Removed
	nautilsu_file_wait_until_ready and added
	nautilus_mime_actions_wait_for_full_file_attributes.
	
	* src/file-manager/fm-directory-view.c:
	(switch_location_and_view): Get rid of code that waits for
	attributes, because the code guarantees they will already be read
	at this point.
	(fm_directory_view_destroy): Stop monitoring the file for the open
	with menu.
	(files_changed_callback): Update the menus whenever a file changes
	or our knowledge about it changes.
	(create_open_with_gtk_menu): Use the new monitor call to arrange
	to get the information about the single selected file that we
	need.
	(reset_bonobo_open_with_menu): Use the new monitor call to arrange
	to get the information about the single selected file that we
	need.
	(activate_callback): Remove the hack to work around the
	wait_until_ready calls. Also remove the wait_until_ready in here
	because we now request all the attributes we will be needing in
	the call_when_ready call (that already existed).
	(fm_directory_view_activate_file): Request all the attributes
	needed for determining MIME actions.
	(monitor_file_for_open_with): New function to monitor the stuff we
	need to know for the Open with menu.
	
	* test/test-nautilus-mime-actions-set.c: (ready_callback), (main):
	Use call_when_ready instead of wait_until_ready.
	
	* test/test-nautilus-mime-actions.c: (ready_callback), (main): Use
	call_when_ready instead of wait_until_ready.

	* po/ui-extract.pl: Checked in new version from Kenneth.
	* po/update.pl: Kenneth wanted me to update the license.
	
2000-11-07  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-property-browser.c: (emblem_keyword_valid),
	(emblem_dialog_clicked):
	fixed bugs 4168 and 4171, problems occur when slash and backslash
	are included in emblem names, by only allowing alphanumeric
	characters in emblem names and displaying an error dialog if
	that's not so.
	
2000-11-07  Andy Hertzfeld  <andy@eazel.com>

	* icons/villanova/villanova.xml:
	fixed the villanova theme to use the default document icons
	instead of the ones from the eazel theme, now that the eazel
	ones are different.
	
2000-11-07  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/main.c: (main):
	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_destroy),
	(mozilla_open_uri_callback), (eazel_services_scheme_translate),
	(mozilla_content_view_one_time_happenings):

	fix for bugzillea.eazel.com 4596: using services in two Embedded Mozilla
	windows crashes

2000-11-07  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4489 (some menu items are missing status bar hints)

	* src/file-manager/fm-directory-view.c:
	(add_open_with_program_menu_item): New helper function to
	avoid code duplication; also handles setting tip.
	(add_open_with_app_bonobo_menu_item),
	(add_open_with_viewer_bonobo_menu_item): Use helper function
	and construct tips to pass in for apps & viewers in "Open
	With" submenu.
	* src/file-manager/nautilus-directory-view-ui.xml: Add a tip
	to "Open With" menu item itself.
	* src/nautilus-window-menus.c: (append_bookmark_to_menu):
	Tweaked wording of tip used for bookmarks.

2000-11-07  Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.h:
	* libnautilus-extensions/nautilus-file-operations.c:
	* src/nautilus-first-time-druid.h:
	Tweak to match Nautilus coding style.
	
	* src/nautilus-first-time-druid.c: (druid_cancel): Added FIXME
	about the way it quits Nautilus when you cancel.
	(druid_finished): Use #define constants instead of hard-coded
	URLs.
	(make_anti_aliased_label): Put FIXME where a font and size are
	hard-coded.
	(make_hbox_user_level_radio_button): Put FIXME where a font is
	hard-coded.
	(set_up_user_level_page): Put FIXME where a font size is
	hard-coded.
	(next_update_page_callback): Put FIXME where a comment mentions
	a "timer task" that does not exist.
	(nautilus_first_time_druid_show), (download_callback),
	(read_file_handle_cancel_cover), (initiate_file_download): Got rid
	of "cheap workaround" for when the druid goes away; instead, we
	cancel the I/O.
	
	Other tweaks to be at least in the vicinity of Nautilus coding
	style.

2000-11-07  Maciej Stachowiak  <mjs@eazel.com>

	* nautilus-installer/src/prescript: Make the installer run
	successfully when run as root instead of failing silently, as part
	of the fix to 4605. Sadly, when Eli tried installing as root with
	the modified installer it worked, but running Nautilus
	subsequently as root resulted in strange Nautilus behavior, so
	probably we can't call it closed.

2000-11-07  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_create_requirement),
	(eazel_install_do_rpm_dependency_check):
	* components/services/install/lib/eazel-install-types.c:
	(eazel_install_requirement_dep_name_compare):
	* components/services/install/lib/eazel-install-types.h:

	Backport bug 4594's fix to head: skip checking breakage on
	packages we're about to install/upgrade.
	
	* nautilus-installer/src/prescript:

	Revert Josh's well-meaning but incorrect patch to the spelling of
	Gnome in the Nautilus PR1 version test.

2000-11-07  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus-installer/src/installer.c: (did_we_already_try),
	(add_update_package), (get_detailed_errors_foreach),
	(download_failed), (eazel_installer_do_install):
	Fixed some case where we 1) try and update a package 2) not on
	softcat 3) didn't offer to remove it...
	
2000-11-07  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_do_file_conflict_check):

	Backport Eskil's mushroom habit to the head.

2000-11-07  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_copy_uri_simple), (nautilus_unique_temporary_file_name):
	* libnautilus-extensions/nautilus-file-utilities.h:
	* src/nautilus-first-time-druid.c: (download_callback):
	Fix for 4585.  Crash saving updates.tgz file from server if it
	already exists.  The fix is to use a unique temporary file name
	and cleaning up after untar the update tarball.

2000-11-07  Mike Fleming  <mfleming@eazel.com>

	* src/nautilus-first-time-druid.c: (druid_finished),
	(download_callback):

	Ugly fix to 4568 -- If io completes after druid is finished,
	then unpack the file but don't try to update the (now non-existant)
	GUI components

2000-11-06  Maciej Stachowiak  <mjs@eazel.com>

	* src/nautilus-window-manage-views.c: (load_underway_callback,
	load_complete_callback): Replace FIXME 2460 with a comment
	explaining why current behavior is OK.

2000-11-06  Mike Fleming  <mfleming@eazel.com>

	* src/nautilus-first-time-druid.c: (druid_finished),
	(download_callback), (initiate_file_download), (set_http_proxy),
	(my_sigalrm_handler), (check_dns_resolution),
	(check_network_connectivity):

	Fix for bug 4549 Check for a potential DNS freeze case, and hang
	for only 15 seconds rather than 2+ mins in this case.

2000-11-06  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/docs/installer-rpm-cases:
	Beginning a document of rpm cases, tree structures and generel
	crack...
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_download_progress_signal),
	(eazel_install_progress_signal), (tree_helper), (install_failed):
	Nicer output, ability to disable pct output (--no-percent)
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_file_conflict_check):
	Fix for 4579
	
	* nautilus-installer/src/prescript:
	Removed the crack that starts the nautilus launcher applet.
	
2000-11-06  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(trilobite_get_services_address):
	* libnautilus-extensions/nautilus-password-dialog.c:
	(nautilus_password_dialog_new),
	(nautilus_password_dialog_get_remember),
	(nautilus_password_dialog_set_remember),
	(nautilus_password_dialog_set_remember_label_text):

	Backport PR2 changes (fix NULL string check in trilobite, and
	finish Mathieu's patch to turn off the checkbox in the password
	dialog).

2000-11-06  Josh Barrow  <josh@eazel.com>

	* icons/eazel/theme_preview.png:
	Did a new theme preview for the revamped Eazel theme.

2000-11-06  Mathieu Lacage  <mathieu@eazel.com>

	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	(oaf_activation_callback): small fix: replace NULL with 
	CORBA_OBJECT_NIL
	* test/Makefile.am: add new test.
	* test/test-nautilus-async-activation.{c|h}

2000-11-06  Andy Hertzfeld  <andy@eazel.com>

	* icons/eazel/Makefile.am:
	* icons/eazel/eazel.xml:
	* icons/eazel/i-regular.xml:
	* icons/eazel/i-regular-*.png:
	* icons/eazel/i-directory-*.png:
	* icons/eazel/fossil.png:
	
	at Susan's request, transformed the "eazel" theme into her "merion"
	theme.  We still need to update the theme preview icon to reflect
	the new look.
	
2000-11-06  John Sullivan  <sullivan@eazel.com>

	Fixed PR2 bug 4480 (Crash while navigating in Vault).
	Someone still needs to roll this back to the branch.
	Darin has volunteered to do this when he's back from
	lunch unless someone beats him to it. This fix is a
	workaround for the real problem, described in new bug
	4539.

	* src/file-manager/fm-directory-view.c:
	Added details->waiting_for_activation_count_hack.
	(create_open_with_gtk_menu), 
	(reset_bonobo_open_with_menu):
	Don't try to get full file attributes if we're still
	waiting for any pending activation.
	(schedule_update_menus): Added an assert while debugging
	that is useful enough to keep.
	(activate_callback): 
	decrement details->waiting_for_activation_count_hack.
	(fm_directory_view_activate_file):
	increment details->waiting_for_activation_count_hack.

2000-11-06  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/Makefile.am: fix make distcheck.

2000-11-06  Darin Adler  <darin@eazel.com>

	Fixed bug 4504 (select "view as others" leads to core dump).

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_directory_item_mime_types):
	Change to return a copy of the MIME type list as designed.
	
	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_components_for_file):
	Change the callers that don't free the MIME type list so that they
	now do.

2000-11-06  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus-clean.sh:
	Fix for bug 4530.  Race condition in nautilus-clean.sh trying to
	kill its own grep processes.

2000-11-05  Ramiro Estrugo  <ramiro@eazel.com>

	* src/nautilus-first-time-druid.c:
	(next_proxy_configuration_page_callback):
	Fix for bug 4488.  Proxy string is defaulting to ":".  Do some
	validation on the user input.  Only set the proxy if the proxy and
	port entry text fields are not blank.

2000-11-05  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_fetch_uri):
	* nautilus-installer/src/installer.c: (jump_to_retry_page),
	(eazel_install_get_depends):
	* nautilus-installer/src/main.c: (main):
	* nautilus-installer/src/prescript:
	* nautilus-installer/src/proxy.c: (load_nscp_proxy_settings),
	(load_galeon_proxy_settings), (attempt_http_proxy_autoconfigure):
	* nautilus-installer/src/proxy.h:

	Backported from the PR2 branch: Fix proxy autoconfiguration bugs,
	and use temporary filenames when downloading packages.  Use the
	better way of finding out the user's homedir.  Clean up the error
	message for a package with no update available.

2000-11-05  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 4475, add license to help menu
	
	* src/nautilus-shell-ui.xml:
	added menu item for "Nautilus License"
	* src/nautilus-window-menus.c:
	(help_menu_nautilus_license_callback),
	(nautilus_window_initialize_menus):
	added a bonobo verb and a handler to invoke the license document
	* user-guide/C/Makefile.am:
	added license.html
	* user-guide/C/html/.cvsignore:
	* user-guide/C/html/license.html:
	added license html file from Bud.
	
2000-11-05  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c: (play_status_display),
	(slider_moved_callback), (slider_release_callback):
	fixed bug 2407, divide by zero in the music view, which also got
	classified as PR2 bug 4513. I'm not sure this fixes the entire
	problem, since I wasn't able to manifest it in the first place,
	but Eli will confirm.

2000-11-04  Ramiro Estrugo  <ramiro@eazel.com>

	* src/run-nautilus:
	Fix a typo that was causing the script to always bail.
	
2000-11-04  Almer S. Tigelaar  <almer1@dds.nl>

	* configure.in: Add 'nl' to ALL_LINGUAS.

2000-11-03  Ramiro Estrugo  <ramiro@eazel.com>

	FIX from the pr2 branch.
	
	* helper-scripts/nautilus-verify-rpm.sh:
	Fix bug 4453.  Get right urls into "Nautilus RPM is damaged"
	dialog boxes.  Also change the dialogs slighty as specified by
	sullivan in bug 4366.
	
2000-11-03  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(add_to_url):
	Last fix broke the magic static link of the installer, this will
	fix.

2000-11-03  Darin Adler  <darin@eazel.com>

	Fixed bug 4483 (Crash while navigating in Vault).

	* src/nautilus-window.c: (nautilus_window_set_content_view_widget):
	Remove the idle with gtk_idle_remove, not gtk_timeout_remove.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy): Removed the check since it was giving
	false alarms and not helping us for real.

2000-11-03  Darin Adler  <darin@eazel.com>

	* src/nautilus-shell.c: (display_caveat): Lets call the main
	branch "Nautilus", not "Nautilus Preview Release 2". Later we
	should change the caveat for cvs to be worded differently too.

	* src/nautilus-window.c: (nautilus_window_constructed),
	(nautilus_window_set_arg), (nautilus_window_get_arg),
	(nautilus_window_set_content_view_widget): Fixed spaces removed
	by the script (forgot to save this file before committing before).

2000-11-03  Ramiro Estrugo  <ramiro@eazel.com>

	* Makefile.am:
	* configure.in:
	* helper-scripts/.cvsignore:
	* helper-scripts/Makefile.am:
	* helper-scripts/nautilus-verify-rpm.sh:
	Add a place to put helper-scripts.
	
	* helper-utilities/error-dialog/Makefile.am:
	Dont link in with Nautilus libraries and dependencies.
	
	* helper-utilities/error-dialog/nautilus-error-dialog.c:
	(find_message_label), (find_message_label_callback),
	(show_message_box), (show_ok_box), (nautilus_error_dialog),
	(nautilus_yes_no_dialog), (main):
	Add support for specifying button labels on the command line.
	
	* src/run-nautilus:
	Call the nautilus rpm verification script and bail if it fails.
	
2000-11-03  Darin Adler  <darin@eazel.com>

	* README: Tell everyone that we are back on bonobo HEAD.
	* configure.in: Make sure Nautilus doesn't try to compile with the
	old bonobo.
	
	* components/adapter/nautilus-adapter-embed-strategy.c:
	(nautilus_adapter_embed_strategy_get):
	* components/adapter/nautilus-adapter-load-strategy.c:
	(nautilus_adapter_load_strategy_get):
	* components/adapter/nautilus-adapter-progressive-load-strategy.c:
	(nautilus_adapter_progressive_load_strategy_load_location):
	* components/history/nautilus-history-view.c:
	(history_view_frame_call_begin):
	* libnautilus/nautilus-undo.c: (set_up_bonobo_control):
	* libnautilus/nautilus-view.c: (view_frame_call_begin):
	* libnautilus/nautilus-zoomable.c:
	(nautilus_zoomable_ensure_zoomable_frame):
	Fix all the callers of query_interface in CORBA to call it
	queryInterface (I used the Bonobo script to do it).
	
	* src/nautilus-window.h:
	* src/nautilus-window.c: (nautilus_window_constructed),
	(nautilus_window_set_arg), (nautilus_window_get_arg),
	(nautilus_window_set_content_view_widget): Update for BonoboWin ->
	BonoboWindow change. Once again, the change was done by the Bonobo
	script (but I had to undo the spaces it ate after BONOBO_WIN).
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/time/idl/trilobite-eazel-time-service.idl:
	* components/services/trilobite/idl/trilobite-service.idl:
	* components/services/trilobite/sample/idl/sample-service.idl:
	* libnautilus-adapter/nautilus-adapter-factory.idl:
	* libnautilus/nautilus-distributed-undo.idl:
	* libnautilus/nautilus-view-component.idl:
	Since IDL dependencies don't work, I touched every IDL file to
	make the switchover smoother. This only works if people update
	before they try to build and fail, otherwise they need to do:
		find -name '*.xml' | xargs touch
	(Maciej and I want to add dependency support to orbit-idl to make
	this problem go away long term).
	
	* src/nautilus-desktop-window.c: (realize):
	The script updated this comment to, so I let it.
	
	* user-guide/C/Makefile.am: Took out the botched change I made to
	this file. Mathieu did the correct one.

2000-11-03  Mathieu Lacage  <mathieu@eazel.com>

	Hopefully, fix bug 4055 for true.
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_drag_start), (nautilus_list_ensure_drag_data),
	(nautilus_list_drag_end), (nautilus_list_get_drop_action),
	(nautilus_list_drag_motion), (nautilus_list_drag_data_received):
	make it work with multiple successive drags by reinitializing a 
	number of variables used during drag.
	* src/file-manager/fm-list-view.c: (fm_list_receive_dropped_icons),
	(fm_list_get_default_action): make it react to drops in the blank
	area of a list view.

2000-11-03  Eskil Heyn Olsen  <eskil@eazel.com>

	Last commit was botched, here's the changelog
	
	* components/rpmview/nautilus-rpm-view-install.c:
	(nautilus_rpm_view_download_progress_signal),
	(nautilus_rpm_view_install_progress_signal),
	(nautilus_rpm_view_dependency_check),
	(nautilus_rpm_view_install_done),
	(nautilus_rpm_view_install_package_callback):
	Made a last minute fix to the delete file signal change in the
	rpmview. The rpmview still cannot get the spinner to spin when
	installing/uninstalling, but I'm not going to use time on that
	now.

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (install_failed):
	Fixed a typo and an error in the problem handler user
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_existing_packages):
	Added release numbers to debug output.
	* components/services/install/lib/eazel-install-problem.c:
	(eazel_install_problem_case_to_string):
	Changed case_to_string message to a more imperative format
	
	* components/services/install/lib/eazel-install-protocols.c:
	(add_to_url):
	Use gnome_vfs_escape_string instead of our own.
	
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_get_readable_name):
	Hack so it should also recognize EazelCandidate names
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_parse_uri), (show_dialog_and_run_away),
	(nautilus_service_install_solve_cases),
	(nautilus_service_install_done), (dig_up_errors),
	(nautilus_service_install_failed):
	Fix for 4443

2000-11-03  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(draw_outline_rectangle_aa), (draw_stretch_handles_aa),
	(draw_or_measure_label_text_aa), (draw_label_text_aa):
	fixed bug 4192, strange feedback while stretching icons, by using
	libart to draw the rectangle instead of the buggy custom graphics
	routine that we were using.
	
	* src/file-manager/fm-icon-view.c:
	(icon_container_preview_callback):
	fixed bug 4460, remote sound files displayed preview icon but
	didn't actually preview, by adding a check to make it display
	the icon for local files only
	
	* src/nautilus-window-menus.c: (file_menu_new_window_callback):
	fixed bug 4033, new window command should initially point to the
	home directory by calling nautilus_window_go_home instead of going
	to the uri of the current window.
	
2000-11-03  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(dump_one_package):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_set_arg), (eazel_install_initialize),
	(eazel_install_fetch_remote_package_list), (eazel_install_log),
	(eazel_install_set_log), (eazel_install_open_log),
	(eazel_install_log_to_stderr):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_add_log):

	Clean up debug mode (was missing some pieces) and set up the g_log
	handler to not work in corba mode (letting libtrilobite handle
	them in corba mode).  Make it start up as early as possible and
	let the service provide a file pointer for logging.

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form):

	Make the giant label a little bit more palatable to Arlo.
	
	* nautilus-installer/src/installer.c: (log_debug),
	(add_bullet_point_to_vbox), (strip_categories),
	(start_over_make_category_func), (start_over),
	(start_over_callback), (dont_start_over_callback),
	(start_over_timer), (jump_to_retry_page), (create_window),
	(eazel_install_progress), (eazel_download_progress),
	(add_force_packages), (add_force_remove), (add_update_package),
	(get_detailed_errors_foreach), (get_detailed_errors),
	(install_failed), (download_failed), (eazel_install_preflight),
	(eazel_install_dep_check), (install_done), (check_if_next_okay),
	(toggle_button_toggled), (eazel_installer_add_category),
	(check_system), (more_check_system), (eazel_installer_do_install),
	(draw_splash_text), (eazel_installer_finalize), (start_logging),
	(find_old_tmpdir), (eazel_installer_initialize):
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/link.sh:
	* nautilus-installer/src/main.c:
	* nautilus-installer/src/prescript:

	Use /tmp/eazel-install.log for logging (being very careful to make
	sure the file is not a booby trap) instead of spamming all over
	the terminal.  However, the --debug option will give you the
	terminal spam if you want it (in addition to the logfile).  Fix
	the annoying debug logs to use g_log so we can catch them.  Add a
	--batch option that causes the installer to skip all question
	screens.

2000-11-03  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/Makefile.am: fix pb with buildir != srcdir

2000-11-03  Darin Adler  <darin@eazel.com>

	* user-guide/C/Makefile.am: Add a missing file. Another cut at
	making "make distcheck" work.

2000-11-03  Darin Adler  <darin@eazel.com>

	* src/Makefile.am: Fixed a srcdir/builddir problem that prevents
	"make distcheck" from working. This is not necessarily the only
	"make distcheck" problem.

2000-11-02  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	* helper-utilities/Makefile.am:
	* helper-utilities/error-dialog/.cvsignore:
	* helper-utilities/error-dialog/Makefile.am:
	* helper-utilities/error-dialog/nautilus-error-dialog.c: (main):
	* nautilus.spec.in:
	Add a error dialog helper utility that can be called from shell
	scripts to display errors to the user.

	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	Pavel made me do this at gun point.  Make the links activate on
	mouse up not down.
	
2000-11-02  Arlo Rose  <arlo@eazel.com>

	* src/nautilus-first-time-druid.c: (set_up_user_level_page),
	(set_up_service_signup_page), (nautilus_first_time_druid_show):
	Changed some wording so first time users won't be confused.

2000-11-02  Mathieu Lacage  <mathieu@eazel.com>

	Fix bug 4434 and bug 4430
	* libnautilus-extensions/nautilus-password-dialog.c:
	(nautilus_password_dialog_new): remove switch to remember 
	root password.
	* user-guide/C/sgml/chapter-1.sgml: remove mention of PDF.

2000-11-02  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus-installer/src/prescript:
	When we try to run the nautilus launcher, make sure we ignore the
	grep process while grepping for an already running launcher.
	
2000-11-02  Andy Hertzfeld  <andy@eazel.com>

	fixed problem where I accidentally changed the icons for disk
	drives that appear on the desktop when I only meant to change
	the hardware view.  Fixed by restoring the old icon, and using
	one with a different name in the hardware view.
	
	* components/hardware/nautilus-hardware-view.c:
	(setup_overview_form):
	use "i-harddrive.png" instead of "i-blockdev.png"
	
	* icons/Makefile.am:
	* icons/i-blockdev.png:
	* icons/i-harddrive.png:
	restored the old block device icon and added a new hard drive one.
	
2000-11-02  Ramiro Estrugo  <ramiro@eazel.com>

	* components/notes/nautilus-notes.c: (finish_loading_note),
	(notes_load_location), (make_notes_view):
	#if 0 out the undo code which is currently not working.  I filed a
	bug for this issue:  4436.
	
2000-11-02  Josh Barrow  <josh@eazel.com>

	* nautilus-installer/src/prescript:
	GNOME is an acronym, not a word.  Changed as such.

2000-11-02  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus-installer/src/prescript:
	Fix for 4368, utterly untested though...
	
2000-11-02  Darin Adler  <darin@eazel.com>

	Fix crashing part of bug 4157 (Tree View crash involving directory
	rename/move).
	
	* components/tree/nautilus-tree-view.c: (forget_view_node),
	(forget_view_node_and_children),
	(nautilus_tree_view_remove_model_node): Add code to get rid of all
	the child nodes when a node is removed, not just the main node
	itself.

2000-11-02  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus-installer/src/prescript:
	Fix bug 4374.  Add Nautilus launcher to installer prescript.
	
2000-11-02  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/mozilla-events.h:
	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_open_uri_callback), (mozilla_dom_mouse_click_callback):

	bugzilla.eazel.com 4156: Documents containing IFRAME's cause
	unexpected navigation.  This is a hack fix that checks to see if 
	a possible destination is the same as the URI of an IFRAME and, if
	they do, ditch the navigation

2000-11-02  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3613 (activating any file as root tries to
	execute it)

	* src/file-manager/fm-directory-view.c: (file_is_launchable):
	Need to check nautilus_file_is_executable as well as
	nautilus_file_can_execute.

2000-11-02  Maciej Stachowiak  <mjs@eazel.com>

	* components/music/Makefile.am: Install a nautilus-mpg123 symlink
	that points to the real mpg123 if it exists on the system.
	* components/music/mpg123_handler.c (start_playing_file): Run nautilus-mpg123
	* nautilus-clean.sh: Kill nautilus-mpg123
	* nautilus-spec.in: Install the nautilus-mpg123 symlink
	
2000-11-02  Maciej Stachowiak  <mjs@eazel.com>

	Believed fix to 4361 and possible progress on 4157.
	
	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_node_has_monitor_clients,
	nautilus_tree_model_node_begin_monitoring,
	nautilus_tree_model_node_end_monitoring,
	nautilus_tree_model_monitor_node,
	nautilus_tree_model_stop_monitoring_node, report_node_changed):
	Various restructing.

	* components/tree/nautilus-tree-view.c: (insert_hack_node,
	remove_hack_node, freeze_if_have_hack_node,
	nautilus_tree_view_insert_model_node,
	nautilus_tree_view_remove_model_node,
	nautilus_tree_view_update_model_node, notify_node_seen,
	nautilus_tree_view_model_node_changed_callback,
	nautilus_tree_view_model_done_loading_callback,
	nautilus_tree_view_initialize, free_file_to_node_map_entry,
	free_file_to_hack_node_map_entry, nautilus_tree_view_destroy,
	file_to_view_node, model_node_to_view_node, view_node_to_file,
	expand_uri_sequence_and_select_end, reload_node_for_file,
	expand_node_for_file, tree_expand_callback,
	tree_collapse_callback, tree_select_row_callback,
	nautilus_tree_view_find_parent_node, nautilus_tree_view_item_at,
	nautilus_dump_info, nautilus_tree_view_collapse_all): Pass around
	and store NautilusFile objects rather than URIs, since nodes are
	tied to a NautilusFile (which can change URI if moved or renamed).

	* libnautilus-extensions/nautilus-directory-private.h,
	libnautilus-extensions/nautilus-directory.c
	(nautilus_directory_handle_directory_moved,
	nautilus_directory_notify_files_moved),
	libnautilus-extensions/nautilus-file.c (rename_callback): When a
	directory is moved or renamed, update the NautilusDirectory
	structure for it to have the correct new URI.

2000-11-02  Darin Adler  <darin@eazel.com>

	* README: Change to reflect the fact that we currently require
	bonobo and xpdf from a branch, not HEAD.

2000-11-02 John Fleck <jfleck@inkstain.net>
	* gnome-db2html2/sect-elements.c - render <variablelist> as a <UL>
	rather than <OL>

2000-11-02 John Fleck <jfleck@inkstain.net>
	* updating gnome-db2html2/toc-elements.c to improve help
	documentation table of contents display

2000-11-02  Rebecca Schulman  <rebecka@eazel.com>
	Clean up some of the "human" strings for search uris,
	mostly so the translation scheme doesn't fail and 
	leave a search uri sitting around

	* libnautilus-extensions/nautilus-search-uri.c:
	update structures to correspond to latest search uri
	spec
	* nautilus-clean.sh:
	removed mpg123 (it kept interrupting my cds) and 
	a duplicate summary view copy

2000-11-01  Andy Hertzfeld  <andy@eazel.com>

	* icons/villanova/Makefile.am:
	* icons/villanova/villanova.xml:
	* icons/villanova_green.png:
	Susan changed the background image for the icon view of
	the villanova theme
	
	* icons/i-blockdev.png:
	better hard disk for hardware view
	* components/hardware/nautilus-hardware-view.c:
	(setup_overview_form):
	improved layout of IDE items
		
2000-11-01  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_service_locate_menu_entries):
	Just to make sure, I don't think tinderbox got my change...

2000-11-01  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (delete_files), (done), (main):
	Now has a --batch command to it doens't need userinteraction
	--batch=yes|no to set the default answer to continue ?
	questions. Using --batch defaults the answer to delete to yes. Now
	delete works again (after Great Delete Change)
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_cases_foreach):
	Fixed potiental sigsegvs.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_service_locate_menu_entries):
	Fixed a compiler warning that broke build.

2000-11-01  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (main):
	Fixed 4331.
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_download_packages),
	Checked if a toplevel package is a source package
	(eazel_install_prune_packages_helper),
	(eazel_install_check_if_depends_on),
	(eazel_install_do_transaction_fill_hash),
	(eazel_install_prune_packages), 
	(eazel_install_ensure_deps),
	Commented out/changed some debug output
	(eazel_install_fetch_dependencies),
	Changed the debug output in case of circular dependency, also
	added a check for source packages.
	(eazel_install_start_transaction):
	Commented out the debug output of the rpm args
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach),
	Detect source package.
	(eazel_install_problem_tree_to_case):
	Removed debug output.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_view_initialize),
	(nautilus_service_install_installing),
	(nautilus_service_install_done),
	Improved the updating of nautilus from natilus, by actually
	offering to restart nautilus (and doing it if the user wants to)
	(nautilus_install_service_locate_menu_entries):
	If I can't figure out where the desktop files are, don't print
	"blabla is somewhere..."
	
	* nautilus.spec.in:
	Added usermode >= 1.35 for nautilus-trilobite
	
	* po/da.po:
	* po/no.po:
	Removed the fatal Control*t translation.
	
	* src/file-manager/fm-directory-view.c:
	(reset_bonobo_trash_delete_menu):
	Added a comment for the translation teams to not translate
	Control*t at this point.
	
	* src/nautilus-shell.c: (save_window_states):
	When saving windowstates, replace any window->location that starts
	with eazel-install: with eazel:, thereby preventing loops when
	eazel-install: views restart nautilus.

2000-11-01  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-first-time-druid.c: (initiate_file_download):
	fixed bug 1826 by pointing the update download uri to it's
	real location at services.eazel.com.
	
	* src/nautilus-window-manage-views.c: (just_one_window),
	(nautilus_window_end_location_change_callback):
	fixed bug 4351, nautilus quits after running the first time
	druid if services are inaccessible.  Fixed by making it
	not quit if there's a single window that fails, going to
	the home directory (if it's valid) instead.

	* icons/loading.png:
	a better version of the non-anti-aliased loading icon from Susan.
		
2000-11-01  Robey Pointer  <robey@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (set_dialog_parent):

	Fix corner case where dialog won't be parented if services are
	down.

2000-11-01  Darin Adler  <darin@eazel.com>

	* src/nautilus-window-service-ui.c: (goto_services_support):
	Remove FIXME for already-fixed bug.
	* src/run-nautilus: Add Debian-specific hack requested in
	bug report (bug 4353).

2000-11-01  Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.h,
	libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_actions_file_needs_full_file_attributes,
	server_has_content_requirements,
	server_matches_content_requirements): New functions.

	(nautilus_mime_get_all_components_for_file) Updated.

	* src/nautilus-applicable-views.h,
	src/nautilus-applicable-views.c: (got_file_info_callback_common,
	(got_full_file_info_callback, got_minimum_file_info_callback,
	nautilus_navigation_info_new, nautilus_navigation_info_cancel):
	Changed to possibly handle calling the callback twice so we can
	avoid having to load twice before showing a component at all.

	* src/nautilus-window-manage-views.c
	(nautilus_window_end_location_change_callback): If being called a
	preliminary time, ignore it for now.

2000-11-01  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-metadata.c:
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_view_update_from_uri):
	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (start_change_password):
	* components/services/trilobite/libtrilobite/libtrilobite.h:
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	* nautilus-installer/src/installer.c:
	
	Fix builtin uri's to point to a sane place by default.  Make the
	install view use your trilobite gconf config and not a made-up
	site (oops).  Remove leftover "eazel-auth:" uri.  Use good PR2
	defaults for the bootstrap installer.  Fix missing ellipses that
	were bothering Eli.

2000-11-01  Darin Adler  <darin@eazel.com>

	Fixed bug 4335 (music view does not work with Services:Vault)

	* components/music/nautilus-music-view.oafinfo:
	Added the requirement that the URL must be file scheme, since
	the music view doesn't know how to deal with MP3s that are not
	on the local hard disk.

2000-11-01  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4343 (crash clicking "Back" deep in software catalog)

	This was an inaccurate assert. Other similar asserts had been
	fixed earlier, but this one and a parallel one in Forward got
	overlooked.

	* src/nautilus-window-manage-views.c:
	(check_bookmark_location_matches_uri): New helper function, uses
	uris_match.
	(check_last_bookmark_location_matches_window): Now calls the
	new function (which was extracted from this)
	(handle_go_back),
	(handle_go_forward): Use the new function to check that the bookmark
	has the right uri, instead of direct string compares.

2000-11-01  Mathieu Lacage  <mathieu@eazel.com>

	* nautilus.spec.in: adding fdl.
	* user-guide/C/Makefile.am: adding installation of fdl
	* user-guide/C/fdl.sgml: adding fdl

2000-11-01  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4337, Title for nautilus user manual is "GNOME Documemtation"
	
	* user-guide/C/sgml/nautilus.sgml:
	Added "Nautilus User Manual" as <title> tag.
	
2000-11-01  Darin Adler  <darin@eazel.com>

	Fix bug 4305 (Nautilus can't find myplay.com (default bookmark)
	URL). As Mike Fleming and Pavel suggested, changed NautilusFile to
	keep relative URIs around instead of file names. This may also fix
	two other Mozilla-component-related bugs, bug 3438 and 4220. I'll
	check that later.

	Also fix bugs 4128, 4311, and 4344, which are all about a hash
	table NULL critical assertion.

	* libnautilus-extensions/nautilus-directory-async.c:
	(dequeue_pending_idle_callback): Handle info in the order it gets
	queued. That requires a call to g_list_reverse since we add things
	with g_list_prepend. Check for NULL to handle case where the info
	is not part of a directory load. Use the new
	nautilus_directory_find_file_by_name to keep it clearly separate
	from code that would find files given relative URIs.
	
	* libnautilus-extensions/nautilus-directory-private.h: RIP
	nautilus_compare_file_with_name. We haven't used it since we've
	been using a hash table.
	
	* libnautilus-extensions/nautilus-directory.c:
	(add_to_hash_table): Put the relative URI in the hash table, not
	the name.
	(extract_from_hash_table): Look up in the hash table by relative
	URI, not name.
	(nautilus_directory_add_file), (nautilus_directory_remove_file):
	Assertions are based on the relative URI, not the name.
	(nautilus_directory_find_file_by_name): Turn the name into a
	relative URI and search for that.
	(nautilus_directory_find_file_by_relative_uri): Look up in the
	hash table by relative URI, not name.
	
	* libnautilus-extensions/nautilus-file-private.h: Replace the name
	field with a relative_uri field. There aren't always names for
	files.
	
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_new_from_relative_uri): Mechanical changes to make
	it create a file given a directory and relative_uri. Uses the new
	update_info_and_name instead of the old nautilus_update_file_info
	(which no longer updates names).
	(nautilus_file_new_from_info). Use the new update_info_and_name
	instead of the old nautilus_update_file_info (which no longer
	updates names).
	(nautilus_file_get_internal): Call nautilus_uri_make_canonical on
	the URI before using it. This is needed now to make the escaping
	of characters in the relative URI uniform. Also made mechanical
	changes to deal with relative URIs instead of file names.
	(destroy): Always free the relative URI. We no longer share the
	name inside the file info, so the logic is now simpler.
	(nautilus_file_get_gnome_vfs_uri): Append the relative URI instead
	of appending a file name to make the full URI.
	(rename_callback): Use the new update_info_and_name instead of the
	old nautilus_update_file_info (which no longer updates
	names). Also call nautilus_find_file_by_name under its new name.
	(name_is): New helper function for checking the file name quickly
	without requiring a local variable.
	(nautilus_file_rename): Use name_is instead of strcmp since the
	name is no longer so readily available.
	(update_info_internal): Moved the guts of nautilus_file_update_info
	in here and made the name-updating part optional. Logic is a bit
	simpler since we don't share the name in the file info any more.
	(update_info_and_name), (nautilus_file_update_info): Covers that
	call the internal call with the "update_name" flag set.
	(nautilus_file_update_name): Use name_is and update_info_and_name.
	Also fix the info == NULL case to handle relative URIs, not names.
	(nautilus_file_compare_for_sort): Add a FIXME about using the name
	in the info when sorting. Also change the info == NULL case to get
	the names with nautilus_file_get_name.
	(nautilus_file_compare_name): Use nautilus_file_get_name to get
	the names to compare.
	(nautilus_file_get_metadata), (nautilus_file_get_metadata_list),
	(nautilus_file_set_metadata), (nautilus_file_set_metadata_list),
	(nautilus_file_get_boolean_metadata),
	(nautilus_file_get_integer_metadata),
	(nautilus_file_set_boolean_metadata),
	(nautilus_file_set_integer_metadata): Store metadata using the
	relative URI as the key instead of the name. This amounts to a
	minor metadata file format change.
	(nautilus_file_get_name): Create the name by unescaping the
	relative URI. If this fails, just return the relative URI
	itself. In some cases the URI instead of the name would represent
	a terrible error (but the unescaping will not fail in those
	cases), but in other cases we just need some kind of name.
	(nautilus_file_get_uri): Some broken code in here was just
	appending the name to the parent URI. Now it appends the relative
	URI so it's no longer broken.
	(get_description): Use the relative URI instead of the name in the
	warning message.
	(nautilus_file_mark_gone): Since we always keep the relative URI
	around now, can get rid of the logic that copies the name out of
	the file info for this case.
	(nautilus_file_dump): Since we already dump the URI, don't bother
	dumping the name any more.

2000-11-01  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-image.c: (render_buffer_pixbuf):
	Change '=+' to the more common '+=' when adding integers.
	
2000-11-01  John Fleck  <jfleck@inkstain.net>

	* change to sect-elements.c in gnome-db2html2 to change display of
	<note> elements

2000-11-01  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_register):
	Make smooth graphics mode be false by default as agreed for pr2.
	
2000-11-01  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/launcher/nautilus-launcher-applet.c: (image_enter_event),
	(window_set_cursor_for_state), (set_is_launching),
	(get_is_launching), (image_button_press_event),
	(image_button_release_event), (event_filter),
	(root_listen_for_property_changes), (main):
	Keep track of NautilusWindow realization events.  Do this by
	monitoring a property on the root window.  Use this flag in order
	to give the user feedback about the launching state of new
	Nautilus windows.  Fixes bug 4300.
	
	* src/nautilus-window.c: (nautilus_window_update_launcher),
	(nautilus_window_realize):
	Notify the launcher when a NautilusWindow get realized.
	
	* src/run-nautilus:
	If no arguments are given, then open a window pointed to the
	user's home directory.
	
2000-11-01  Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical),
	(nautilus_self_check_file_utilities):
	Hook up new GnomeVFS "make canonical" calls to fix test cases
	Darin needed to work for the bug he is fixing.
	Switched the test cases to their intended values, now that they pass.
	Get rid of some crufty workarounds that weren't really needed
	after my previous fix to not add extra '//' to some URIs and
	removed the respective tests.

2000-11-01  Mathieu Lacage  <mathieu@eazel.com>

	This is completely useless but I needed a break from "usefull"
	bugs.
	* applets/launcher/nautilus-launcher-applet.c: (image_leave_event),
	(image_button_press_event), (image_button_release_event), (main):
	Add an event handler for release event to make sure we launch 
	nautilus only if you release the cursor without leaving the icon.
	Add an offset when you click to give the user feedback about what 
	he is doing.
	* libnautilus-extensions/nautilus-image.c: (render_buffer_pixbuf):
	Fix offset problem when drawing image: the offset was not taken
	into account in the calculation of the x and y coordinates.

2000-10-31  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/main.c: (main):
	* nautilus-installer/src/proxy.c: (load_nscp_proxy_settings),
	(load_galeon_proxy_settings):
	* src/nautilus-first-time-druid.c: (load_nscp_proxy_settings),
	(load_galeon_proxy_settings), (attempt_http_proxy_autoconfigure):

	Fix installer version to follow the Makefile define.  Fix evil bug
	in detecting proxy servers that was freeing g_get_home_dir
	results.  Fixed it again in the first-time druid, and added Galeon
	support there.

2000-10-31  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/Makefile:
	* src/nautilus-window-service-ui.c: (goto_services_support):

	Fix bootstrap installer for new Makefile config and fix typo in
	dropdown menus.

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/launcher/Makefile.am:
	Add missing includes.
	
2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* Makefile.am:
	Add applets to SUBDIRS if needed.
	
	* applets/Makefile.am:
	Tiny bit of cleanup.

	* configure.in:
	Define HAVE_APPLETS only if the applets devel libs are found by
	gnome-config.
	
2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_load_uri),
	(mozilla_content_view_one_time_happenings):
	Remove a rogue printf.  Also fix a broken debug printf.
	
2000-10-31  Andy Hertzfeld  <andy@eazel.com>

	* icons/Makefile.am:
	* icons/loading.png:
	* icons/loading-aa.png:
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_for_file):
	added a new "loading thumbnail" icon from Susan
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_delete_event_callback),
	(cancel_remove_mode), (add_new_button_callback),
	(done_button_callback):
	made the property browser reset remove mode when it's dismissed
	
2000-10-31  Mathieu Lacage  <mathieu@eazel.com>

	* nautilus.spec.in: add gnorba file in specfile.

2000-10-31  Mathieu Lacage  <mathieu@eazel.com>

	* applets/launcher/Makefile.am: add .gnorba file.
	* applets/launcher/nautilus-launcher-applet.c: (main): fix typo.
	* applets/launcher/nautilus-launcher-applet.gnorba: new gnorba file.

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/launcher/.cvsignore:
	Use the right binary name.
	
2000-10-31  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_install_parse_uri),
	(nautilus_service_install_view_update_from_uri):

	Support [ username "@" ] in the eazel-install: URI so that a
	username can be specified (like anonymous) to libeazelinstall.

	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_init):

	Don't free the result of g_get_home_dir(), because it unleashes
	1000 demons.
	
	* nautilus-installer/src/installer.c: (create_what_to_do_page),
	(eazel_installer_add_category):

	Change the "what to install" header for the single-category case.

2000-10-31  Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_self_check_file_utilities): Add the new self-checks that
	will help Pavel see the minimum I need in a URI canonifying
	function.

2000-10-31  Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_actions_check_if_minimum_attributes_ready),
	(nautilus_mime_actions_check_if_full_attributes_ready),
	(nautilus_mime_actions_get_minimum_file_attributes),
	(nautilus_mime_actions_get_full_file_attributes),
	(nautilus_mime_actions_wait_for_full_file_attributes),
	(nautilus_mime_get_default_action_type_for_file),
	(nautilus_mime_get_default_action_for_file),
	(nautilus_mime_get_default_application_for_file_internal),
	(nautilus_mime_get_default_application_for_file),
	(nautilus_mime_is_default_application_for_file_user_chosen),
	(nautilus_mime_get_default_component_sort_conditions),
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_applications_for_file),
	(nautilus_mime_get_short_list_components_for_file),
	(nautilus_mime_get_short_list_methods_for_file),
	(nautilus_mime_get_all_applications_for_file),
	(nautilus_mime_get_all_components_for_file),
	(nautilus_mime_set_default_application_for_file),
	(nautilus_mime_set_default_component_for_file),
	(nautilus_mime_set_short_list_applications_for_file),
	(nautilus_mime_set_short_list_components_for_file),
	(nautilus_mime_add_application_to_short_list_for_file),
	(nautilus_mime_remove_application_from_short_list_for_file),
	(nautilus_mime_add_component_to_short_list_for_file),
	(nautilus_mime_remove_component_from_short_list_for_file),
	(nautilus_mime_extend_all_applications_for_file),
	(nautilus_mime_remove_from_all_applications_for_file),
	(nautilus_do_component_query):
	* libnautilus-extensions/nautilus-mime-actions.h:
	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list), (is_component_default_for_file),
	(program_file_pair_is_default_for_file),
	(program_file_pair_is_in_short_list_for_file),
	(add_to_short_list_for_file), (remove_from_short_list_for_file),
	(remove_default_for_item), (set_default_for_item):
	* libnautilus-extensions/nautilus-program-choosing.c:
	(any_programs_available_for_file):
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/fm-directory-view.c: (switch_location_and_view),
	(create_open_with_gtk_menu), (reset_bonobo_open_with_menu),
	(activate_callback):
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-applicable-views.c: (nautilus_navigation_info_new):
	* src/nautilus-shell-ui.xml.h:
	* src/nautilus-sidebar.c: (nautilus_sidebar_update_all),
	(nautilus_sidebar_set_uri):
	* src/nautilus-window.c: (nautilus_window_load_content_view_menu):
	* test/test-nautilus-mime-actions-set.c: (main):
	* test/test-nautilus-mime-actions.c: (main): Un-revert my changes
	from before, fixing the bugs in the process.

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/launcher/Makefile.am:
	* applets/launcher/nautilus-icon-applet.c:
	* applets/launcher/nautilus-launcher-applet.c: (create_pixbufs),
	(applet_change_pixel_size), (image_enter_event),
	(image_leave_event), (get_root_window), (root_window_set_busy),
	(root_window_set_not_busy), (image_button_press_event), (main):
	* nautilus.spec.in:
	Rename the launcher applet from 'nautilus-icon-applet' to
	'nautilus-launcher-applet'.
	
2000-10-31  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(get_eazel_auth_path):
	Doh, copied the wrong variable.

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/launcher/Makefile.am:
	* applets/launcher/nautilus-icon-applet.c: (get_root_window),
	(root_window_set_busy), (root_window_set_not_busy),
	(image_button_press_event), (main):
	Add code to execute nautilus.  Add first try at adding busy
	feedback while launching.

2000-10-31  Mathieu Lacage  <mathieu@eazel.com>

	fix bug 4015.
	* libnautilus-extensions/nautilus-global-preferences.c:
	add correct default here.
	* src/nautilus-window.c: (nautilus_window_go_web_search):
	remove bad default here. ramiro has a bug to do the correct
	fix post-pr2.

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* src/run-nautilus:
	Remove a bunch of debug echo statements i left in by mistake.
	
2000-10-31  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package), (get_eazel_auth_path),
	(get_search_url_for_package):
	* components/services/install/lib/eazel-install-metadata.c:
	(init_default_transfer_configuration), (transferoptions_destroy):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize):
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line):
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install__set_username),
	(impl_Eazel_Install__get_username), (eazel_install_get_epv):
	Stuff to get/set a username for eazel-service:/ uris. Needed for
	4004 (The Bug Noone Knew What To Do With And Everyone Ignore)
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_download_packages),
	If a package fails, don't silently remove it, but set CANNOT_OPEN
	and prune it.
	(eazel_install_do_transaction_save_report),
	If no transaction dir is set, dont' try and store the report
	(eazel_install_check_existing_packages):
	Doh! All packages apparently ended at DOWNGRADES, yech.
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach):
	Sane message if file could not be found on server
	
2000-10-31  Maciej Stachowiak  <mjs@eazel.com>

	* src/nautilus-window-manage-views.c
	(nautilus_window_set_sidebar_panels): Call `update_view' on new
	sidebar panels that get activated, so they find out about the
	location and selection.

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/Makefile.am:
	* applets/launcher/Makefile.am:
	* applets/launcher/nautilus-icon-applet.c: (create_pixbufs),
	(image_enter_event), (image_leave_event), (main):
	Make the applet use the nautilus launcher icon and prelight.
	
2000-10-31  Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_xfer_vfs_error):
	Fix 4227 - Trying to copy an unreadable file gives a bogus
	error message.
	Added code that distinguishes between the read and write phases
	of a copy.

2000-10-31  John Sullivan  <sullivan@eazel.com>

Fixed bug 4334 (changing layout separataes icon from name)
Fixed bug 4332 (Right-click after New Folder separates icon from name)

	* libnautilus-extensions/nautilus-icon-container.c:
	(icon_set_position): end renaming mode before changing position
	of icon being renamed.
	(button_press_event): end renaming mode on any background
	context click.

2000-10-31  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package):
	* nautilus-installer/src/installer.c: (eazel_install_dep_check),
	(install_done):
	* nautilus-installer/src/installer.h:

	Don't blame RPM if the real error is that services is down.

2000-10-31  Mathieu Lacage  <mathieu@eazel.com>

	* nautilus.spec.in: add applet to the spec file.
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/nautilus.sgml:
	update the sgml files.

2000-10-31  Robin * Slomkowski  <rslomkow@eazel.com>

	* src/nautilus-window.c: set the url to fix 4015
	but it does not Nautilus attempts to connect to the
	wrong URL. http://www.eazel.com/websearch instead of
	http://services.eazel.com/websearch

2000-10-31  Mathieu Lacage  <mathieu@eazel.com>

	add new directories.
	* applets/.cvsignore:
	* applets/launcher/.cvsignore:	
	* applets/Makefile.am:
	* applets/launcher/Makefile.am:

	stupid applet which is used during installation
	to display a nautilus icon on the user's panel.
	* applets/launcher/nautilus-icon-applet.c:
	(applet_change_pixel_size), (main):

	add checks for the libapplet library.
	* configure.in:

2000-10-31  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Fix bug 3729.  Bump the version number to 0.5.0.
	
2000-10-31  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/gdb3html.c:
        (parse_file): Try to correct a problem jfleck was having.

        * libnautilus-extensions/nautilus-file-utilities.c:
        (nautilus_uri_is_local_scheme): Add 'gnome-help' to the list

2000-10-31  Darin Adler  <darin@eazel.com>

	* nautilus.spec.in: Removed vendor again. Putting these in cvs
	is a bad idea. For more details see bug 3461.

2000-10-31  Darin Adler  <darin@eazel.com>

	* nautilus.spec.in: Add vendor.

2000-10-31  Darin Adler  <darin@eazel.com>

	Fixed bug 4242 (Tree view crash trying to navigate to parent uri
	(Up)) and bug 4297 (Opening a window twice causes Nautilus to
	crash).
	
	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_destroy): Disconnect the root_node_changed
	signal.

2000-10-31  J Shane Culpepper  <pepper@eazel.com>

	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (generate_change_password_form):

	Fixing buttons in the change password view to not use nautilus_label
	and pointing to the right help place.

2000-10-31  Brian Frank  <bfrank@eazel.com>

	* data/static_bookmarks.xml
	Fixed capitalization problem of VMware name in bookmark list
	
2000-10-31  Mathieu Lacage  <mathieu@eazel.com>

	* configure.in: fix some configure magic for libfreetype2.

2000-10-31  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-first-time-druid.c: (druid_finished):
	changed the services uris that are hard-coded into the wizard to
	ones specified by Laura; they are not in place yet but she
	assures me that they will be soon.
	
2000-10-31  Darin Adler  <darin@eazel.com>

	Fixed bug 4144 (Extra Services menu items installed by Summary
	view never go away). The problem was actually with the factory
	code from the sample. I had fixed it a while back, but not before
	people cloned the broken sample code.
	
	* components/adapter/nautilus-adapter-factory-server.c:
	(impl_Nautilus_ComponentAdapterFactory_create_adapter):
	* components/hardware/main.c: (hardware_view_make_object):
	* components/music/main.c: (music_view_make_object):
	* components/rpmview/main.c: (rpm_view_make_object):
	* components/services/install/nautilus-view/main.c:
	(service_install_make_object):
	* components/services/inventory/nautilus-view/main.c:
	(inventory_make_object):
	* components/services/login/nautilus-view/main.c:
	(change_password_make_object):
	* components/services/summary/nautilus-view/main.c:
	(summary_make_object):
	* components/tree/libmain.c: (tree_shlib_make_object):
	* components/tree/main.c: (tree_exe_make_object):
	Connect the destroy handler to the NautilusView object rather than
	to the widget. If you connect to the widget, the handler gets
	called too early and the control doesn't get properly destroyed,
	leaving the UI component behind, and causing the bug.

	* components/adapter/main.c: (adapter_factory_make_object): Got
	rid of incorrect comment.
	
2000-10-31  J Shane Culpepper  <pepper@eazel.com>
	
	Fixing one more.

2000-10-31  J Shane Culpepper  <pepper@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.h:
	* src/nautilus-applicable-views.c:
	(nautilus_navigation_info_get_location),
	(nautilus_navigation_info_get_initial_content_id):

	missed a file

2000-10-31  J Shane Culpepper  <pepper@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_actions_check_if_required_attributes_ready),
	(nautilus_mime_actions_get_required_file_attributes),
	(nautilus_mime_actions_wait_for_required_file_attributes),
	(nautilus_mime_get_default_action_type_for_file),
	(nautilus_mime_get_default_action_for_file),
	(nautilus_mime_get_default_application_for_file_internal),
	(nautilus_mime_get_default_application_for_file),
	(nautilus_mime_is_default_application_for_file_user_chosen),
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_applications_for_file),
	(nautilus_mime_get_short_list_components_for_file),
	(nautilus_mime_get_short_list_methods_for_file),
	(nautilus_mime_get_all_applications_for_file),
	(nautilus_mime_get_all_components_for_file),
	(nautilus_mime_set_default_application_for_file),
	(nautilus_mime_set_default_component_for_file),
	(nautilus_mime_set_short_list_applications_for_file),
	(nautilus_mime_set_short_list_components_for_file),
	(nautilus_mime_add_application_to_short_list_for_file),
	(nautilus_mime_remove_application_from_short_list_for_file),
	(nautilus_mime_add_component_to_short_list_for_file),
	(nautilus_mime_remove_component_from_short_list_for_file),
	(nautilus_mime_extend_all_applications_for_file),
	(nautilus_mime_remove_from_all_applications_for_file),
	(nautilus_do_component_query):
	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list), (is_component_default_for_file),
	(program_file_pair_is_default_for_file),
	(program_file_pair_is_in_short_list_for_file),
	(add_to_short_list_for_file), (remove_from_short_list_for_file),
	(remove_default_for_item), (set_default_for_item):
	* libnautilus-extensions/nautilus-program-choosing.c:
	(any_programs_available_for_file):
	* src/file-manager/fm-directory-view.c: (switch_location_and_view),
	(create_open_with_gtk_menu), (reset_bonobo_open_with_menu),
	(activate_callback):
	* src/nautilus-window.c: (nautilus_window_load_content_view_menu):
	* test/test-nautilus-mime-actions-set.c: (main):
	* test/test-nautilus-mime-actions.c: (main):

	backing out changes that caused a serious regression in services.

2000-10-31  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/rpmview/nautilus-rpm-view-install.c:
	(nautilus_rpm_view_install_package_callback):
	Hopefully fixed the completely fatal tmp_dir bug in the 
	package view.

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_pre_install_packages):
	Ifdeffed some borked code

	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach):
	If no messages generated on modification status. Potientially
	completely incorrect unless I check prev_pack->status first.

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (dig_up_errors), (nautilus_service_install_failed):
	Use eazel-install-problem to generate error messages

	* nautilus.spec.in:
	Woops, eazel/throbber is not there..

2000-10-30  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus.spec.in:
	Added some of the themes stuff to %files.

2000-10-30  Andy Hertzfeld  <andy@eazel.com>

	made thumbnailing work remotely for all images, by treating
	small remote files like large ones and keeping a local thumbnail
	for them.
	
	* libnautilus-extensions/nautilus-icon-factory-private.h:
	moved SELF_THUMBNAIL_SIZE_THRESHOLD constant into private,
	so it could be shared with nautilus-thumbnails.
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_for_file):
	if a file is remote, make a thumbnail even if it's smaller
	than the size threshold.
	* libnautilus-extensions/nautilus-thumbnails.c: (make_thumbnails):
	don't use a frame for files smaller than the size threshold.
	
2000-10-30  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(dump_one_package):
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_copy):

	Show provides-list when dumping packages for debug.  Copy
	provides-list when doing a deep copy of the package data.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_category):

	Clean up leading/trailing linefeeds on category descriptions.
	
	* components/services/install/server/main.c: (main):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_add_log), (trilobite_init),
	(trilobite_set_debug_mode):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.h
	:

	Use ~/.nautilus/trilobite-install.log for logging install debug
	messages, and not a file in /tmp.  Timestamp those logs.
	
	* nautilus-installer/src/installer.c: (create_install_page),
	(eazel_download_progress), (get_required_name),
	(get_detailed_errors_foreach), (install_done),
	(eazel_installer_add_category), (find_old_tmpdir),
	(eazel_installer_initialize):

	Make category list display slightly differently when there's only
	one category (which is how PR2 will be): avoid showing the
	checkbox, etc.  If there's a suitable /tmp directory leftover from
	a previous install attempt, reuse it instead of creating a new
	one.

	* nautilus-installer/src/link.sh:

	Fix missing quotes in XFree checking.
	
2000-10-30  Eskil Heyn Olsen  <eskil@eazel.com>

	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/link.sh:
	link.sh does vague attempt at checking XFree version. Partial fix
	for 4159.

2000-10-30  Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_actions_check_if_minimum_attributes_ready),
	(nautilus_mime_actions_check_if_full_attributes_ready),
	(nautilus_mime_actions_get_minimum_file_attributes),
	(nautilus_mime_actions_get_full_file_attributes),
	(nautilus_mime_actions_wait_for_full_file_attributes),
	(nautilus_mime_get_default_action_type_for_file),
	(nautilus_mime_get_default_action_for_file),
	(nautilus_mime_get_default_application_for_file_internal),
	(nautilus_mime_get_default_application_for_file),
	(nautilus_mime_is_default_application_for_file_user_chosen),
	(nautilus_mime_get_default_component_sort_conditions),
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_applications_for_file),
	(nautilus_mime_get_short_list_components_for_file),
	(nautilus_mime_get_short_list_methods_for_file),
	(nautilus_mime_get_all_applications_for_file),
	(nautilus_mime_get_all_components_for_file),
	(nautilus_mime_set_default_application_for_file),
	(nautilus_mime_set_default_component_for_file),
	(nautilus_mime_set_short_list_applications_for_file),
	(nautilus_mime_set_short_list_components_for_file),
	(nautilus_mime_add_application_to_short_list_for_file),
	(nautilus_mime_remove_application_from_short_list_for_file),
	(nautilus_mime_add_component_to_short_list_for_file),
	(nautilus_mime_remove_component_from_short_list_for_file),
	(nautilus_mime_extend_all_applications_for_file),
	(nautilus_mime_remove_from_all_applications_for_file),
	(nautilus_do_component_query): 
	* libnautilus-extensions/nautilus-mime-actions.h:
	* libnautilus-extensions/nautilus-program-chooser.c:
	(repopulate_program_list), (is_component_default_for_file),
	(program_file_pair_is_default_for_file),
	(program_file_pair_is_in_short_list_for_file),
	(add_to_short_list_for_file), (remove_from_short_list_for_file),
	(remove_default_for_item), (set_default_for_item):
	* libnautilus-extensions/nautilus-program-choosing.c:
	(any_programs_available_for_file):
	* src/file-manager/fm-directory-view.c: (switch_location_and_view),
	(create_open_with_gtk_menu), (reset_bonobo_open_with_menu),
	(activate_callback):
	* src/nautilus-applicable-views.c: (nautilus_navigation_info_new):
	* src/nautilus-sidebar.c: (nautilus_sidebar_update_all),
	(nautilus_sidebar_set_uri):
	* src/nautilus-window.c: (nautilus_window_load_content_view_menu):
	* test/test-nautilus-mime-actions-set.c: (main):
	* test/test-nautilus-mime-actions.c: (main): Portions of the fix
	for 2379 (the parts that don't make it crash).

2000-10-30  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_middle_new):
	Separate the left and right text offsets.  Tweak them some more.
	
2000-10-30  Ramiro Estrugo  <ramiro@eazel.com>

	* nautilus-clean.sh:
	Add trilobite-eazel-install-service to list of processes to kill.
	Also alphabetize the list.
	
2000-10-30  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-thumbnails.c:
	(make_thumbnail_path):
	fixed bug 4190, problem thumbnailing icons in vault, by adding
	a test to make sure it tries to keep the thumbnails for remote
	files locally.
	
2000-10-30  Ramiro Estrugo  <ramiro@eazel.com>

	* icons/nautilus-launch-icon.png:
	* nautilus.png:

	I removed these from Makefiles, but forgot to take them out of
	CVS.
	
2000-10-30  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (done), (main):
	Fixed 4203
	
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_string_sequence_to_glist),
	(corba_packagedatastruct_from_packagedata):
	Changed because I added debug and removed it again...
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_pre_install_packages),
	(eazel_install_download_packages),
	(eazel_install_check_existing_packages),
	(eazel_install_fetch_dependencies):
	Made a set of enums for check_for_existing_packages since it no
	longer really acts as a *cmp function (has four result values
	rather then 3)
	* components/services/install/lib/eazel-install-logic.h:
	Also renamed the status enum for the main functions

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_revert_transaction_from_xmlstring):
	Also renamed the status enum for the main functions (in
	logic.[ch])
	
	* components/services/install/lib/eazel-install-problem.c:
	(get_detailed_messages_foreach),
	(eazel_install_problem_case_to_string),
	Moved get_required_name into -types.c (as
	packagedata_get_readable_name), so everyone gets the benefit of
	it.
	(eazel_install_problem_handle_cases):
	Now also sets the downgrade flag in handle cases.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings),
	No longer always set rpm debub
	(eazel_install_start_transaction_make_rpm_argument_list):
	Don't set --oldpackage on -e.
	
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_get_readable_name):
	Moved here from -problem.c(get_required_name)
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (eazel_install_packagedata_to_xml):
	Now also put provides into xml. This was needed for the menu path
	info fix that Bart asked for. Unfortunately this means huge
	transaction files, need to put in a boolean or such.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:
	Added list containing all .*\.desktop$ or .*\.kdelnk$ files that
	where installed.	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_dependency_check),
	Print nicer dep check strings (using packagedata_get_readable_name)
	(nautilus_service_install_check_for_desktop_files),
	In preflight, find any .*\.desktop$  or .*\.kdelnk$ files.
	(nautilus_service_install_preflight_check),
	call check_for_desktop_files only on toplevel packages
	(nautilus_service_install_installing),
	Moved the dialog box for nautilus updates down to done.
	(nautilus_install_service_locate_menu_entries),
	Locates where the menu entries went
	(nautilus_service_install_done):
	Pop up the dialog if nautilus was updated, also generate message
	reg. where menu entries went. Fixes 3431
	
	* nautilus-installer/src/installer.c: (jump_to_retry_page),
	(get_detailed_errors_foreach), (eazel_install_dep_check):
	Used packagedata_get_readable_name instead of get_requried_name.
	
2000-10-30  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/mozilla-preferences.cpp:
	* components/mozilla/mozilla-preferences.h:
	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_initialize),
	(nautilus_mozilla_content_view_destroy),
	(eazel_services_scheme_translate),
	(test_make_full_uri_from_relative),
	(mozilla_content_view_one_time_happenings):
	Fix bug 4112 - Mozilla component does not listen for proxy
	configuration changes.

	Move all the gconf and proxy related things to
	mozilla-preferences.cpp, makes the main view implementation a
	little less convoluted.

	Add gconf notifications for changes in the proxy and route these
	changes to the mozilla universe.

	Also some minor style changes.

2000-10-30  Darin Adler  <darin@eazel.com>

	Fix bug 4202 (rename a file to an existing file will crash
	Nautilus).
	
	* libnautilus-extensions/nautilus-file.c: (rename_callback): Mark
	the overwritten file as "gone" if we succeed in renaming to an
	existing file's name. Either the module overwrote the file or the
	file was deleted "under Nautilus's nose" -- in either case it is
	gone.
	(nautilus_file_update_name): Fix comment.

2000-10-30  Andy Hertzfeld  <andy@eazel.com>

	* src/nautilus-sidebar-title.c: (update_icon):
	added "eazel-services:" and "man:" to the schemes with custom
	sidebar icons via the recently implemented hack (which will be
	replaced by a real framework after PR2).
	
	* icons/Makefile.am:
	* icons/manual.png:
	added icon for man: scheme

2000-10-30  Andy Hertzfeld  <andy@eazel.com>

	cleaned up the sidebar for the summary view by putting in a
	temporary hack to get the right icon and giving the view
	a shorter title.
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (summary_load_location_callback):
	changed the summary view's title to "Eazel Services" so it fits
	better in the sidebar.
	
	* src/nautilus-sidebar-title.c: (update_icon):
	added a hack to special-case the "eazel:" uri to get the appropriate
	icon; we'll remove this after PR2 and replace it with a real
	framework.
	
2000-10-30  Darin Adler  <darin@eazel.com>

	* icons/Makefile.am: Removed gnome-core.png again.

2000-10-30  Josh Barrow  <josh@eazel.com

	* icons/gnome-core.png: 
	Removed

	* icons/i-core.png:
	Made this be the old gnome-core icon, per Arlo's suggestion.

2000-10-30  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 4166, "New Folder" offset problem.

	Also reverted Enter to activate selected items instead of
	entering renaming mode.

	* libnautilus-extensions/nautilus-icon-container.c: 
	(relayout):
	Call nautilus_icon_container_update_scroll_region before
	processing pending reveal and rename actions.

	(key_press_event):
	Enter keypress activates selected items
	
2000-10-30  Robey Pointer  <robey@eazel.com>

	* nautilus-installer/src/proxy.c: (load_nscp_proxy_settings),
	(load_galeon_proxy_settings), (attempt_http_proxy_autoconfigure):

	Try to find proxy settings via Galeon too.

2000-10-30  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form):

	Fixing the box packing on the news widget.  Still not optimal but
	looks a little better than it did.  Will continue tweaking it until
	it is acceptable.

2000-10-30  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(file_opened_callback), (file_read_callback), (load_done):
	
	Fixed nautilus_gdk_pixbuf_load_async bug that would cause
	it to fail loading xpm files. (bug 4140)

2000-10-30  Rebecca Schulman  <rebecka@eazel.com>
	Fixed bug 4176, that files remaining to be
	copied goes up instead of down.  The short
	fix for this was just to change the wording to
	reflect what was actually being counted.

	* libnautilus-extensions/nautilus-file-operations.c:
	(progress_dialog_set_files_done_text), (handle_xfer_ok):
	changed "Files remaining to be [copied, moved,...]" to
	"Files [copied, moved,...]"

2000-10-30  Darin Adler  <darin@eazel.com>

	Fixed bug 4057 (clicking the back button while opening a huge
	directory often crashes).
	
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_for_each): The function was iterating
	some icons twice. All the icons on the new_icons list are also on
	the icons list.
	(icon_destroy): Also be sure to remove the icon from the new_icons
	list if it happens to be destroyed while still on that list.

	* configure.in:
	* Makefile.shared:
	Got rid of the shared part of the code to generate .xml.h
	files. It's no longer needed since the po directory takes care of
	everything itself.
	
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/sample/Makefile.am:
	* components/services/summary/nautilus-view/Makefile.am:
	* libnautilus/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	Got rid of the per-directory part of the code to generate .xml.h
	files.
	
	* components/loser/content/nautilus-content-loser-ui.xml.h:
	* components/loser/sidebar/nautilus-sidebar-loser-ui.xml.h:
	* components/mozilla/nautilus-mozilla-ui.xml.h:
	* components/sample/nautilus-sample-content-view-ui.xml.h:
	* components/services/summary/nautilus-view/nautilus-summary-view-ui.xml.h:
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-service-ui.xml.h:
	* src/nautilus-shell-ui.xml.h:
	Got rid of the checked-in copies of the .xml.h files. The worst
	part!

2000-10-30  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (forgot_password_button_cb):

	Fixing Bug #4178.  The Help button was not working right.

2000-10-29  John Sullivan  <sullivan@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_login_dialog): Change "Please login to eazel services"
	to "Please log in to Eazel services", in two places.

2000-10-30  Rebecca Schulman  <rebecka@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (summary_load_location_callback):
	Add setting of window and sidebar title to the summary view
	to "Eazel Services Summary".  I'm not necessarily attached to the wording
	but we should definitely make it something other than "eazel".
	this fixes a bug I filed, #4183

2000-10-30  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/helper/eazel-helper.pam:

	Yeah!  Found out how to let eazel-helper run even if root has
	no password set.  Add "nullok" to the pwdb line in the pam
	config file.

2000-10-30  Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical),
	(nautilus_self_check_file_utilities):
	nautilus_make_uri_canonical was relying on GnomeVFSURI sort-of
	handling relative uris, even though they are illegal in GnomeVFS.
	My earlier fix in gnome-vfs "broke" some of this broken behavior. 
	Added more special-case handling of cryptic absolute to 
	nautilus_make_uri_canonical to make it behave like before and not
	break existing behavior that depends on it. Added some bandaids for
	conversions that are clearly wrong but that may need more work 
	throughout the code that depends on it, for now I'm making it
	behave like the old call.
	My earlier fix to gnome-vfs fixes 2803. Change the test to reflect 
	the correct behavior.

2000-10-30  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/helper/README:
	* components/services/trilobite/helper/eazel-helper.security.in:

	Set fallback (in pam and usermode) to false: always needs to run
	as root.

2000-10-30  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_eazel_news_entry_row):
	disabled the "use all the space" since it causes too much flashing
	during size negotiation.  I'll either fix the flashing or remove
	it from nautilus_label soon.
	
2000-10-29  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_initialize_class), (nautilus_label_size_allocate),
	(get_clipped_width), (label_recompute_line_geometries):
	made nautilus_label interpret a wrap width of -1 to mean "use
	all of the available space".
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_service_entry_row), (generate_eazel_news_entry_row),
	(generate_update_news_entry_row):
	made the news items use all of the available space by setting its
	wrap width to -1.
	
2000-10-29  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_eazel_news_entry_row),
	(authn_cb_succeeded), (authn_cb_failed):
	improved formatting of news items, now that we finally have a long
	one.  Also, removed some unconditional debugging messages.
	
2000-10-29  Robey Pointer  <robey@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(eazel_install_callback_delete_files):
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install_delete_files), (eazel_install_get_epv):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_class_initialize), (create_temporary_directory),
	(eazel_install_delete_downloads), (eazel_install_install_packages),
	(eazel_install_revert_transaction_from_xmlstring),
	(eazel_install_emit_dependency_check_default):
	* components/services/install/lib/eazel-install-public.h:

	Change delete_files from a signal to an explicit API call.  Also
	be sure to erase the temp dir even if it has no files in it.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_done),
	(nautilus_service_install_failed),
	(nautilus_service_install_view_update_from_uri):
	* components/services/install/server/Makefile.am:

	Make the install view use the new explicit delete_files call, and
	condense those into a single dialog box.

	* nautilus-installer/src/callbacks.c: (begin_install),
	(druid_finish):
	* nautilus-installer/src/installer.c: (install_done),
	(eazel_installer_do_install), (eazel_installer_initialize):
	* nautilus-installer/src/installer.h:

	Fix the bootstrap installer for the delete_files call, and don't
	forget to delete the package list too.  Also, set forced-downgrade
	to TRUE until a post-PR2 bug is fixed.
	
2000-10-29  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: switch authority-less eazel-services URL's 
	from "eazel-services:/" to "eazel-services:///"  

	* src/nautilus-window-service-ui.c: (goto_online_storage),
	(goto_software_catalog), (detach_service_ui),
	(nautilus_window_install_service_ui):

	Go back to initing ammonite each time these menus are called.  
	I didn't want to bother with trying to make it work.


2000-10-29  J Shane Culpepper  <pepper@eazel.com>

	* components/loser/content/nautilus-content-loser-ui.xml.h:
	* components/loser/sidebar/nautilus-sidebar-loser-ui.xml.h:
	* components/mozilla/nautilus-mozilla-ui.xml.h:
	* components/sample/nautilus-sample-content-view-ui.xml.h:
	* components/services/summary/nautilus-view/nautilus-summary-view-u
	i.xml.h:
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-service-ui.xml.h:
	* src/nautilus-shell-ui.xml.h:
	* src/nautilus-shell.c: (display_caveat):

	Fixing bad spelling in caveat.

2000-10-29  Robey Pointer  <robey@eazel.com>

	* components/services/install/server/Makefile.am:

	Move RPMLIBS even *earlier* in the Makefile -- way back!  Seems to
	need to be the very first thing or else tons of libs get better
	precedence.

2000-10-29  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (nautilus_summary_view_load_uri),
	(merge_bonobo_menu_items):
	* src/nautilus-window-service-ui.c: (goto_online_storage),
	(goto_software_catalog), (detach_service_ui),
	(nautilus_window_install_service_ui):

	Change uses of "am_i_logged_in" and "who_is_logged_in" to 
	"ammonite_get_default_user_username"  Fix misc bugs/memory leaks.

2000-10-29  Arlo Rose  <arlo@eazel.com>

	* icons/temp-home.png:
	Added some extra stuff to the house to make it look better.

2000-10-28  Arlo Rose  <arlo@eazel.com>

	* icons/temp-home.png:
	Did a new home icon for PR2 that isn't my happy sunflower.

2000-10-28  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/i-regular.png:
	* icons/arlo/i-regular72.png:
	* icons/arlo/i-regular96.png:
	* icons/arlo/i-regular192.png:
	Fixed non-AA i-regular* icons to look the same as the AA versions.

2000-10-28  Robey Pointer  <robey@eazel.com>

	* components/services/install/server/Makefile.am:

	Move RPMLIBS earlier in the Makefile, to try to force the
	sleipnir build to use the right version of libdb.

2000-10-28  Ramiro Estrugo  <ramiro@eazel.com>

	* Makefile.am:
	* icons/Makefile.am:
	* nautilus-launch-icon.png:
	Fix bug 4155.  Nautilus Panel launching icon installed in the
	wrong place.  Needs to be $prefix/share/pixmaps, not
	$prefix/share/pixmaps/nautilus.

	Also added more ChangeLog files to EXTRA_DIST so they can be
	availalble in tarballs.
	
2000-10-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_login_dialog):
	* src/nautilus-service-ui.xml.h:
	* src/nautilus-shell.c: (display_caveat):

	Fixes for Bug #4104 and Bug# 4134. Changed error text to be more
	descriptive about account activation and added new wording for 
	caveat dialog.

2000-10-28  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/server/Makefile.am:
	Undoh rpm stuff

2000-10-28  Josh Barrow  <josh@eazel.com>

	* nautilus-clean.sh:
	Added mpg123 to the list of things to kill.  This finishes
	bug 4076.

2000-10-28  Josh Barrow  <josh@eazel.com>

	* nautilus-clean.sh:
	Changed to clean more things.

	* README
	Changed to reflect actual requirements.

	I actually checked these in a while ago, just neglected to
	check in the ChangeLog

2000-10-27  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:
	Doh doh doh

2000-10-27  Ramiro Estrugo  <ramiro@eazel.com>

	* src/Makefile.am:
	Dumshit me, I forgot to take out the file I retired from the
	makefile.
	
2000-10-27  Ramiro Estrugo  <ramiro@eazel.com>

	Fix bug 4054 - fix nautilus GNOME menu item so it does not
	"crash" nautilus.

	Fix bug 4117 - change default for PR2 back to desktop off.

	Also fix the issue about turning off the gnome crash dialog for
	out of process components.
	
	* icons/Makefile.am:
	* icons/nautilus-launch-icon.png:
	New launch icon from Arlo.

	* src/run-nautilus:
	Change this beast to not always run nautilus-clean.sh.  It only
	runs nautilus-clean.sh right before/after running Nautilus and not
	for every single invocation of 'run-nautilus'.  

	Also, dont start the desktop anymore, since there is not a
	preference in Nautilus to toggle the desktop.

	Finally, turn on the environment variable needed to prevent the
	gnome crash dialog from showing up for out of process components.
	
	* nautilus.desktop:
	Update icon and launch script back to run-nautilus.

	* nautilus.spec.in:
	We're back to using run-nautilus.
	
	* src/launch-nautilus:
	Retire.

2000-10-27  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/server/Makefile.am:
	Moved RPM_LIBS to top to ensure the right db is used.
	
2000-10-27  J Shane Culpepper  <pepper@eazel.com>

	* src/nautilus-window-service-ui.c: (goto_online_storage):

	Fixing Bug # 4097.  Should now point to correct place.

2000-10-27  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings):
	Output which rpmrc file I read.
	* configure.in:
	Attempt at fixing the install view breaking on rpm builds and not
	eazel-hacking builds.

2000-10-27  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4087 (crash leaving Summary view)

	* components/services/summary/nautilus-view/nautilus-summary-view.c: 
	(nautilus_summary_view_destroy): Don't unset container and unref
	component here; that's not necessary for the component that's
	created automagically. And doing so causes a double-destroy.
	(update_menu_items), (merge_bonobo_menu_items): Removed 
	ui_component field from details and changed callers to get the
	ui_component elsewise when needed (to clarify that it isn't
	owned here).
	* src/nautilus-service-ui.xml: Changed "Eazel Services" to
	"Eazel Services Home" since all the services are Eazel Services.
	* src/nautilus-service-ui.xml.h: gotta check this in too.

2000-10-27  Andy Hertzfeld  <andy@eazel.com>

	at Bud's request, implemented bug 4127, add a preference to
	show or hide Nautilus' desktop.
		
	* libnautilus-extensions/nautilus-global-preferences.h:
	define NAUTILUS_PREFERENCES_SHOW_DESKTOP
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_create_dialog), (global_preferences_register):
	register the desktop preference and show the checkbox in
	the appearance section of preferences
	* src/nautilus-application.c: (nautilus_application_initialize),
	(nautilus_application_destroy), (check_for_and_run_as_super_user),
	(desktop_changed_callback):
	watch the desktop preference and show or hide the desktop window
	when it changes.
	* src/nautilus-main.c: (main):
	show the desktop at launch if the preference is set and it's not
	overriden by command-line options.
	
2000-10-27  Darin Adler  <darin@eazel.com>

	Fixed bugs in file renaming. These changes along with the
	gnome-vfs ones take care of bug 3846 (cancel dialog persists after
	renaming online storage folder).

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_get_gnome_vfs_uri): Moved higher so it could be
	used by rename code.
	(operation_remove): Separated out the remove operation so we can
	remove the operation before the callback. This makes it safe to
	do a nautlius_file_cancel from inside a callback.
	(operation_free): Call the separate remove. Also cut down because
	we don't need so much state in the operation object any more.
	(operation_complete): Call remove before calling callback as
	described above.
	(rename_callback): A new callback that uses set_file_info results
	instead of the old one that used xfer.
	(nautilus_file_rename): Change to use set_file_info instead of
	xfer. Also updates the MIME type now, which will fix a bug I
	think.
	(nautilus_file_update_info): Use gnome_vfs_file_info_dup instead
	of gnome_vfs_file_info_ref so it works with any info, including
	static ones on the stack.
	(set_permissions_callback), (nautilus_file_set_permissions),
	(set_owner_and_group_callback), (set_owner_and_group): Change to
	use the info returned by the async. set_file_info. This simplifies
	things a lot.
	
	* src/file-manager/fm-error-reporting.c: (rename_callback),
	(cancel_rename_callback), (cancel_rename), (fm_rename_file):
	Rewrote renaming code. Use object data to keep track of pending
	renames so we can cancel a previous one if we try to re-rename the
	same file again. This allowed the code to get a lot simpler too.
	
	* libnautilus-extensions/nautilus-directory-async.c:
	(directory_load_done): Fixed bug that prevented the directory from
	ever noticing files that are no longer around. This code never
	worked because we checked for the wrong error code (EOF means
	success here).
	
	* po/Makefile.in.in: Re-removed this file. Seth checked it in by
	accident. This is a generated file, not one that should be checked
	in.
	
	* src/nautilus-window.c: (nautilus_window_realize): Got rid of
	"//"-style comments and used #if 0 instead.

	* components/loser/content/nautilus-content-loser-ui.xml.h:
	* components/loser/sidebar/nautilus-sidebar-loser-ui.xml.h:
	* components/mozilla/nautilus-mozilla-ui.xml.h:
	* components/sample/nautilus-sample-content-view-ui.xml.h:
	* components/services/summary/nautilus-view/nautilus-summary-view-ui.xml.h:
	* libnautilus/nautilus-clipboard-ui.xml.h:
	* src/file-manager/nautilus-directory-view-ui.xml.h:
	* src/file-manager/nautilus-icon-view-ui.xml.h:
	* src/file-manager/nautilus-search-list-view-ui.xml.h:
	* src/nautilus-service-ui.xml.h:
	* src/nautilus-shell-ui.xml.h:
	Someone checked in some .xml.h files generated with an old
	Bonobo. Soon, this nightmare will be over and we won't check these
	files in any more.
	
2000-10-27  Arlo Rose  <arlo@eazel.com>

	* src/nautilus-first-time-druid.c: (make_anti_aliased_label):
	Made a font size change.

2000-10-28  Mathieu Lacage  <mathieu@eazel.com>

	second round of fixing of the sgml. Will be 
	the last one hopefuly.
	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/install.sgml:
	* user-guide/C/sgml/intro.sgml:

2000-10-27  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/sgml/chapter-1.sgml:
	* user-guide/C/sgml/chapter-2.sgml:
	* user-guide/C/sgml/chapter-3.sgml:
	* user-guide/C/sgml/install.sgml:
	* user-guide/C/sgml/intro.sgml:
	* user-guide/C/sgml/nautilus.sgml:
	update to John's latest version, fix the sgml where needed.
	Need a new round of checking on my laptop. Help now displays 
	images !! hooray for Ali Abdin :)

2000-10-27  Robin * Slomkowski  <rslomkow@eazel.com>

	* README: package build requirments changed to be current
	left hole3s for gnome-vfs, ammonite, and medusa

2000-10-27  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_eazel_news_entry_row),
	(generate_login_dialog):
	finished bug 3793 for Shane, new login dialog for summary view, by
	changing the widget layout to satisfy Arlo.  Also marked more
	strings for translation.
	
2000-10-27  Arlo Rose  <arlo@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-exte
	nsions.h:
	Tweaked text offests.

2000-10-27  John Sullivan  <sullivan@eazel.com>

	Grumble grumble canonical grumble uri grumble.

	Josh found another assertion failure involving
	canonical uris. Yay Josh! Boo canonical uri troubles!
	
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_get_internal): Removed call to
	nautilus_uri_is_canonical_uri since it isn't quite the
	right check. Decided that the right check here is
	pointless.
	* libnautilus-extensions/nautilus-file-utilities.c:
	* libnautilus-extensions/nautilus-file-utilities.h:
	Removed nautilus_uri_is_canonical_uri since it now has
	no callers.

2000-10-27  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4085 for now (need Support menu item in Services menu)

	The URL will have to be updated again later, as the bug report says.

	* src/nautilus-service-ui.xml: Added Support menu item at end, made
	underline accelerators unique
	* components/services/summary/nautilus-view/nautilus-summary-view-u
	i.xml: tweaked wording and made underline accelerators unique

	* components/services/summary/nautilus-view/nautilus-summary-view-u
	i.xml.h:
	* src/nautilus-service-ui.xml.h: These guys changed.

	* src/nautilus-window-service-ui.c: 
	(goto_services_support): New function, goes to magic URI.
	(nautilus_window_install_service_ui): add verb to connect menu item
	to function.

2000-10-27  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (forgot_password_button_cb):

	Fixing the url for the change password button.

2000-10-27  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4114 (typing single word into location bar crashes)

	Grumble grumble canonical grumble uri grumble.

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical): Return of the workaround to
	convert file://foo to file:///foo, marked with appropriate
	FIXME.
	(nautilus_uri_is_canonical_uri): Changed implementation to just
	call make_uri_canonical and compare. It had been doing a subset
	of the things that make_uri_canonical does, but it had gotten out
	of synch.
	(nautilus_self_check_file_utilities): Updated tests and added more.

2000-10-27  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/gdb3html.[ch]:
        Added a 'base_path' to the Context struct
        (parse_file): Do some minimal parsing to get the base path from the
        provided filename on the command line.

        * components/help/converters/gnome-db2html2/sect-elements.c:
        * components/help/converters/gnome-db2html2/toc-elements.c:
        (sect_figure_end_element),
        (sect_inlinegraphic_start_element),
        (sect_infobox_start_element),
        (toc_artheader_end_element):
        Use 'file://' URIs on images (using base_path to get the path of the
        image). This means images should now work within SGML files. Should
        fix bug #3938

2000-10-27  Ramiro Estrugo  <ramiro@eazel.com>

	Final bits of arlification for the install view.  Make the fonts
	smaller and use a better fill icon.

	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(generate_install_form):
	* components/services/login/nautilus-view/nautilus-change-password-view.c:
	(generate_change_password_form):
	* components/services/nautilus-dependent-shared/eazel-services-extensions.c:
	(eazel_services_label_new):
	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_item_new), (eazel_services_footer_update):
	Reverse the order of font_size and weight as its usually specified.
	
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_title_new),
	(eazel_services_header_middle_new),
	(eazel_services_header_set_left_text),
	(eazel_services_header_set_right_text):
	* components/services/nautilus-dependent-shared/eazel-services-header.h:
	Split the constructors into 2 for the 2 common header cases.
	
	* components/services/nautilus-dependent-shared/icons/Makefile.am:
	Add a new icon for the middle header fill.
	
	* components/services/nautilus-dependent-shared/test-footer-header.c:
	(main):
	Update for header constructor changes.
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (nautilus_summary_view_load_uri):
	Quiet down the debug spew.


2000-10-27  Pavel Cisler <pavel@eazel.com>

	* libnautilus-extensions/nautilus-list.c: (nautilus_gdk_gc_copy):
	An attempt to fix a list view redraw glitch Andy and I were trying to 
	track down.

2000-10-27  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings):
	Always enable rpm debugging (needed temporarily)

2000-10-27  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c: (add_play_controls):
	left justified the song label in the music view to make it
	look cleaner.
	
2000-10-27  Josh Barrow  <josh@eazel.com>

	* icons/ardmore/Makefile.am:
	* icons/ardmore/theme_preview.png:
	Added theme preview to the Ardmore theme.

	* icons/villanova/Makefile.am:
	* icons/villanova/theme_preview.png:
	Added theme preview to the Villanova theme.

	* nautilus-installer/src/Makefile:
	As Eskil says, "Yes."

2000-10-26  Seth Nickell  <seth@eazel.com>

	* src/nautilus-window.c: (nautilus_window_realize):

	Commented out a wm hints line that was causing Nautilus to be
	unfocusable (hence not allowing keyboard input, making it
	hard to work on things) in Sawfish. Coordination with 
	Sawfish/John Harper is probably needed here...

2000-10-26  Eskil Heyn Olsen  <eskil@eazel.com>

	This introduces the problem thingy to libeazelinstall. A set of
	funcs that can create humanreadable descriptions of a installation
	failure, plus repair descriptions and even better, automagically
	execute them. Basically this is all the RepairCase related crap
	from the bootstrap installer.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (tree_helper), (install_failed), (delete_files), (done), (main):
	Use the new problem thingy
	
	* components/services/install/lib/Makefile.am:
	Added the .c and .h file for the problem thingy

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_existing_packages):
	Loads of debug output in the case that people kept nagging me
	about. If they still don't get that this is a known problem, they
	must be blind.
	
	* components/services/install/lib/eazel-install-problem.h:
	* components/services/install/lib/eazel-install-problem.c:
	(get_required_name), (get_detailed_messages_foreach),
	(compare_problem_case), (add_case), (add_force_install_both_case),
	(add_force_remove_case), (add_remove_case), (add_update_case),
	(get_detailed_cases_foreach),
	(eazel_install_problem_case_to_string),
	(eazel_install_problem_case_foreach_to_string),
	(eazel_install_problem_case_foreach_destroy),
	(eazel_install_problem_case_new),
	(eazel_install_problem_case_destroy),
	(eazel_install_problem_case_list_destroy),
	(eazel_install_problem_new), (eazel_install_problem_finalize),
	(eazel_install_problem_class_initialize),
	(eazel_install_problem_initialize),
	(eazel_install_problem_get_type), (problem_step_foreach_remove),
	(eazel_install_problem_step), (eazel_install_problem_tree_to_case),
	(eazel_install_problem_tree_to_string),
	(eazel_install_problem_cases_to_string),
	(find_dominant_problem_type), (find_problems_of_type),
	(find_dominant_problems), (build_categories_from_problem_list),
	(eazel_install_problem_handle_cases):
	The problem thingy.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings),
	(eazel_install_prepare_rpm_system):
	Set rpm debug if debug==TRUE, also fixed a debug message
	reg. cannot open rpm db.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.h:
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_view_update_from_uri):
	Allocate the problem thingy.
	
	* nautilus-installer/src/Makefile:
	Yes.
	
	* nautilus-installer/src/installer.c: (get_required_name):
	Used the samen get_required_name as the problem thingy
	
	* nautilus-installer/src/prescript:
	Removed the hack that we inserted for bug night.

2000-10-26  Robey Pointer  <robey@eazel.com>

	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (run_away_timer), (authn_succeeded), (authn_failed):

	Tidy up the password-change view a bit to try to make it more
	stable, and use more of the info from ammonite.  If ammonite
	throws away the current login (which happens whenever the server
	responds oddly), switch back to the summary view to force a
	re-login instead of drifting away.

2000-10-26  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c: (destroy),
	(icon_destroy):
	fixed bug 4108, changing themes in the list view crashes nautilus.
	Fixed by removing the call to preferences_remove_callback from
	icon_destroy and putting it into the widget's destroy method like
	it should have been.  This also could have been hurting performance
	and causing other weird problems.
	
2000-10-26  Arlo Rose  <arlo@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-exte
	nsions.h:
	Fixed a font weight problem.
	
2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>
	
	* components/services/nautilus-dependent-shared/eazel-services-header.h:
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_new),
	(eazel_services_header_set_left_text),
	(eazel_services_header_set_right_text):
	Change the 'constructor' to accept left/right strings a boolean
	that determines whether the logo is visible.
	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(generate_install_form):
	* components/services/login/nautilus-view/nautilus-change-password-view.c:
	(generate_change_password_form):
	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	(generate_summary_form):
	Update for header changes.  Fixes bug 4099 (Secondary Header broke
	with test changed to the nautilus widget)
	
	* components/services/nautilus-dependent-shared/eazel-services-extensions.c:
	(eazel_services_get_current_date_string):
	Change the date format string.  Using a format of "%e" worked on
	one computer but spewed warnings on another.
	
	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	Tweak the header text offset a bit.
	
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_item_new):
	Fix the last item's right boundary to make this beast be up to the
	most stringent Arlo standards.

	* components/services/nautilus-dependent-shared/test-footer-header.c: (main):
	Add a middle header to test new header features.

	* components/services/nautilus-dependent-shared/shared-service-widgets.c:
	* components/services/nautilus-dependent-shared/shared-service-widgets.h:
	Retire the old way to do middle headers.

2000-10-26  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_prepare_rpm_system):
	Moved the addition of the opened db into the if clause.
	
	* components/services/time/command-line/Makefile.am:
	Added GNOMELOCALEDIR
	
	* components/services/trilobite/helper/Makefile.am:
	Trickery to make the eazel-helper.security file be build during
	make and not make install, as the latter is Real Bad<tm> as the
	rpm version will point to a nonexisting binary.
	
	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.c: (trilobite_get_distribution):
	Inserted a else to fix the mandrake/redhat issue.
	
2000-10-26  John Sullivan  <sullivan@eazel.com>

	Fixed bug 4064 (Can't get a right-click menu in vault)

	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_make_uri_canonical): Changed this to call
	gnome_vfs_uri_new () and gnome_vfs_uri_to_string () so
	we get the same canonicalization behavior as gnome-vfs,
	other than the special Nautilus-specific cases.
	(nautilus_self_check_file_utilities): Added a bunch of
	new checks, including copying & pasting many from
	gnome-vfs.
	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_self_check_directory): added a couple of checks.

2000-10-26  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (forgot_password_button_cb), (generate_login_dialog):

	Adding the button toggle between register and i forgot my password
	options in the login dialog.  Still need to tweak the ui before the
	login is finished.

2000-10-26  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-icon-container.c: (relayout),
	(button_press_event), (key_press_event), (get_icon_being_renamed),
	(pending_icon_to_rename_destroy_callback),
	(get_pending_icon_to_rename), (set_pending_icon_to_rename),
	(process_pending_icon_to_rename), (is_renaming_pending),
	(is_renaming),
	(nautilus_icon_container_start_renaming_selected_item),
	(end_renaming_mode):
	* libnautilus-extensions/nautilus-icon-container.h:
	* libnautilus-extensions/nautilus-icon-private.h:
	* src/file-manager/fm-directory-view.c:
	(reveal_newly_added_folder), (new_folder_done):
	Folder renaming now starts when the icon is added rather than
	at some arbitrary timeout after the new folder command is
	issued. Fixed icon container to handle a request to rename an
	unpositioned icon.

2000-10-26  Eskil Heyn Olsen  <eskil@eazel.com>

	* src/Makefile.am:
	Install launch-nautilus, should fix rpmbuilding.

2000-10-26  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form):
	changed "additional services" message in summary view as requested
	by marketing.
	
2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	Fix bug 3845.  When configured to use an HTTP proxy, Mozilla won't
	go through Ammonite.  The fix is to tell the mozilla network
	library to NOT use the proxy to resolve 'localhost'.

2000-10-26  Gene Z. Ragan  <gzr@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(dequeue_pending_idle_callback):
	Did some refactoring to stop an assertion in NautilusDirectory
	add_to_hash_table from firing. This involved removing two lists
	of NautilusFiles that we being created and then merged.  Now one
	list is being used and the condition that causes the assertion (duplicate
	files in the hash table) is not being created.
	
	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_directory_files_changed_callback):
	Removed the world famous ANOMALY error at the request of Darin.
	
2000-10-26  Robey Pointer  <robey@eazel.com>

	* components/services/login/nautilus-view/nautilus-change-password-
	view.c: (authn_failed):

	Better logging of a failed password change attempt.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_category):
	* nautilus-installer/src/installer.c: (add_bullet_point_to_vbox),
	(jump_to_error_page), (jump_to_retry_page):

	Factor out the bullet point generation and make it line-wrap
	(using Gtk's unfortunately lame line-wrapping algorithm).  Do
	better debugging on failed package lists.

2000-10-26  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (footer_item_clicked_callback):

	Fixing location callbacks to go to the right place when a user is
	logged in.

2000-10-26  Michael Engber  <engber@eazel.com>

	* src/file-manager/fm-desktop-icon-view.c:
	(quit_nautilus_desktop_menu_item_callback),
	(fm_desktop_icon_view_create_background_context_menu_items):

	Add "Quit Nautilus Desktop" to desktop context menu

2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	Make the font smaller (11 vs 13) as requested by Arlo.	
	
2000-10-26  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (authn_cb_succeeded), (nautilus_summary_view_initialize),
	(nautilus_summary_view_destroy):

	Rolling back gconf evil that seems to be causing the production runs
	of the summary to segfault.

2000-10-26  Rebecca Schulman  <rebecka@eazel.com>
	Fixed the panel menu item to launch the desktop
	and one nautilus window, starting at the user's 
	home directory by default.  To do this, we created
	a new script called launch-nautilus.  Ramiro 
	recommended some changes to run-nautilus that
	I also did.

	* nautilus.desktop:
	Changed run-nautilus to launch-nautilus
	* nautilus.spec.in:
	Changed run-nautilus to launch-nautilus,
	since run-nautilus won't be needed in the
	rpm
	* src/Makefile.am:
	added launch-nautilus to the build
	* src/launch-nautilus:
	* src/run-nautilus:
	removed the mozilla environment 
	LD_LIBRARY_PATH hacks.
	
	* user-guide/C/sgml/chapter-1.sgml:
	Corrected an HTML error.


2000-10-26  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (nautilus_summary_view_load_uri),
	(merge_bonobo_menu_items):
	* src/nautilus-window-service-ui.c: (goto_online_storage),
	(goto_software_catalog):

	Fixing exported function name used from ammonite.

2000-10-26  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 2814, move "built-in bookmarks" checkbox from the
	edit bookmarks window to preferences/navigation.
	
	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_create_dialog), (global_preferences_register):
	added a checkbox to control the "hide built-in bookmarks" preference
	* libnautilus-extensions/nautilus-global-preferences.h:
	renamed preference path so the built-in bookmarks preference can
	be in the preferences window
	* src/nautilus-bookmarks-window.c: (create_bookmarks_window),
	(repopulate):
	removed the built-in bookmarks checkbox from the edit bookmarks
	window
	
2000-10-26  Andy Hertzfeld  <andy@eazel.com>

	added a new theme from Susan
	
	* configure.in:
	* icons/Makefile.am:
	* icons/villanova/.cvsignore:
	* icons/villanova/Makefile.am:
	* icons/villanova/villanova.xml:
	* icons/villanova/*.png:
	
2000-10-26  Pavel Cisler  <pavel@eazel.com>

	* librsvg/Makefile.am:
	fix the build.
	Checking in for Ramiro.

2000-10-26  Darin Adler  <darin@eazel.com>

	Fix bug 4052 (sidebar file count is not updated as settings are
	changed).
	
	* libnautilus-extensions/nautilus-directory-async.c:
	(dequeue_pending_idle_callback): Add a missing call to
	nautilus_file_changed.

2000-10-26  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_update_news_entry_row),
	(nautilus_summary_view_load_uri):

	Adding debug prints to locate optimized build crash in the summary view.

2000-10-26  Andy Hertzfeld  <andy@eazel.com>

	moved the eazel throbber into the default theme; moved Arlo's throbber
	into his theme and restored the generic throbber to the gnome theme.
	Updated the theme files to reflect this.
	
	* configure.in:
	* icons/ardmore/ardmore.xml:
	* icons/arlo/Makefile.am:
	* icons/arlo/arlo.xml:
	* icons/arlo/throbber/.cvsignore:
	* icons/arlo/throbber/Makefile.am:
	* icons/default.xml:
	* icons/eazel/Makefile.am:
	* icons/eazel/eazel.xml:
	* icons/gnome/Makefile.am:
	* icons/gnome/gnome.xml:
	* icons/gnome/throbber/.cvsignore:
	* icons/gnome/throbber/Makefile.am:
	* icons/throbber/Makefile.am:

2000-10-26  Darin Adler  <darin@eazel.com>

	Fix bug 3998 (Move to Trash crashes Nautilus if item with that
	name already in trash).

	* libnautilus-extensions/nautilus-directory.c:
	(nautilus_directory_notify_files_moved): Change the sequence so
	that the renaming doesn't try to update the file hash twice.
	
	* src/file-manager/fm-icon-view.c: (compute_menu_item_info):
	Handle NULL icon container case. This case happened to Will while
	testing.
	
	* src/file-manager/fm-directory-view.c: (load_directory): Fix
	GList leak.
	* src/nautilus-view-frame.c: (nautilus_view_frame_destroy): Fix
	string leak.
	* src/nautilus-window-menus.c: (append_bookmark_to_menu): Fix
	GdkPixbuf ref. leak.

	* libnautilus-extensions/nautilus-user-level-manager.c:
	(user_level_set_default_if_needed): Tiny coding style change.
	
2000-10-26  Rebecca Schulman  <rebecka@eazel.com>

	* nautilus.spec.in:  Moved the spec file entry
	from the binaries section to the data section,
	so the manual files' permissions will be set
	correctly, and changed *.sgml to * so
	we'll get the associated .css files (they're
	style sheets, I think?) and the images 
	installed, too.

2000-10-26  Mathieu Lacage  <mathieu@eazel.com>

	* nautilus.spec.in: add sgml files in rpms

2000-10-26  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(get_link_name), (make_next_duplicate_name):
	Link names weren't properly escaped causing them not to
	get selected.

	* src/file-manager/fm-directory-view.c: (copy_move_done_callback),
	(new_folder_done),
	(fm_directory_view_trash_state_changed_callback):
	added asserts

2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_destroy), (label_enter_event), (label_leave_event),
	(image_enter_event), (image_leave_event),
	(prelight_data_free_callback), (image_add_prelighting),
	(label_add_prelighting), (footer_item_new):
	Final arlification touches.  Make the footer item's left and right
	bumpers prelight as well.
	
2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(mozilla_is_uri_handled_by_nautilus):
	Add "gnome-help" and "ghelp" to the list of uris handled by
	Nautilus as requested by Ali.
	
2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	Add LIBPNG to test program link line.  It was breaking for me.
	
2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/shared-service-utilities.c:
	* components/services/nautilus-dependent-shared/shared-service-utilities.h:
	* components/services/nautilus-dependent-shared/shared-service-widgets.c:
	* components/services/nautilus-dependent-shared/shared-service-widgets.h:
	Remove a bunch of unused code.  Also removed 'go_to_uri()' which
	does the exact same thing (and nothing more) than
	'nautilus_view_open_location()'.  Use that directly instead.

	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(show_dialog_and_run_away),
	(nautilus_service_install_view_update_from_uri):
	* components/services/inventory/nautilus-view/nautilus-inventory-view.c:
	(gather_config_button_cb), (register_later_cb),
	(make_http_post_request):
	* components/services/login/nautilus-view/nautilus-change-password-view.c:
	(authn_succeeded), (maintenance_button_cb):
	Tiny bit of 'go_to_uri' cleanup.
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (logged_in_callback), (logged_out_callback),
	(preferences_button_cb), (register_button_cb), (goto_service_cb),
	(goto_update_cb), (error_dialog_cancel_cb),
	(footer_item_clicked_callback):
	Add #defines for magical uris and 'go_to_uri' cleanup.

2000-10-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/main.c: (main):
	Dont need to check the mozilla environment anymore.
	
2000-10-26  Mathieu Lacage  <mathieu@eazel.com>

	Fix bug 2571: action not computed corected for dnd in list view.
	Also, the dnd in list view should be slightly nicer now :)
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_marshal_NONE__POINTER_POINTER_POINTER_INT_INT_INT), space
	(nautilus_gtk_marshal_NONE__POINTER_POINTER_POINTER_POINTER_INT_INT
	_UINT): brand new function for brand new signal as below :)
	* libnautilus-extensions/nautilus-gtk-extensions.h: prototype.
	
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_initialize_class), 
	(nautilus_list_get_drop_action):
	* libnautilus-extensions/nautilus-list.h:
	Add signal get_default_action, remove old code to compute
	default action...

	* src/file-manager/fm-list-view.c:
	(nautilus_list_find_icon_list_drop_target),
	(fm_list_get_default_action), (set_up_list):
	connect to new signal, move old code to there, cleanup, finish.

2000-10-26  Andy Hertzfeld  <andy@eazel.com>

	* components/music/nautilus-music-view.c: (selection_callback),
	(add_play_controls), (nautilus_music_view_set_album_image),
	(nautilus_music_view_update):
	minimized flashing in the music view by fixing the size of the
	song label and play time, since it was relaying everything out
	when they changed.
	
2000-10-26  Mathieu Lacage  <mathieu@eazel.com>

        Make prelighted icons not prelighted when you leave the list 
	view without dropping. Also, move the actual prelighting
	operation from fm-list-view to nautilus-list.
	Also, remove FIXME about this bug since it is fixed.
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_drag_leave),
	(nautilus_list_find_icon_list_drop_target),
	(nautilus_list_prelight_if_necessary):
	* src/file-manager/fm-list-view.c: (fm_list_handle_dragged_items):

2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/Makefile.am:
	Fix bug 4031.  Mozilla component wont run cause of unresolved
	symbols.  Link in the standard location of Mozilla
	(/usr/lib/mozilla) to make it always work without having to mess
	with environment stuff.
	
2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_item_new), (eazel_services_footer_update):
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_new):
	Move more constants to shared place.
	
2000-10-26  Mathieu Lacage  <mathieu@eazel.com>

	* libnautilus-extensions/nautilus-drag.c: spaces...
	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_drag_start), 
	(nautilus_list_drag_leave): spaces.
	* src/file-manager/fm-list-view.c: 
	(fm_list_receive_dropped_icons): make dnd work in list 
	view by removing some old code from there which was made 
	useless by some recent changes in teh copy/move code...

2000-10-25  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(eazel_services_scheme_untranslate):

	Fix 3969; Untranslating eazel-services URI's works
	correctly for non-default users.

2000-10-25  John Sullivan  <sullivan@eazel.com>

	Fixed problems that were causing crash when Services button pressed.

	* libnautilus-extensions/nautilus-directory-async.c:
	(load_directory_done), (dequeue_pending_idle_callback):
	Was missing several NULL checks.

2000-10-25  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (generate_install_form), (show_dialog_and_run_away):

	A few quick tweaks to make the installer screenshot-worthy, and to
	fix a possible case where it would switch to a new URI before it
	had told nautilus it was done loading.  (I think that was
	confusing Nautilus in some corner cases.)
	
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(wipe_redirect_table), (add_redirect),
	(trilobite_redirect_lookup):

	Add "/" back to the keys when adding and removing, since otherwise
	we end up with a big blob of evil-named keys.  Fix the bug that
	the missing "/" was hiding: namely, that mass-removing keys had
	stopped working after the gconf upgrade.
	
2000-10-25  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/main.c: (run_test_cases), (main):
	* components/mozilla/nautilus-mozilla-content-view.c:
	(is_uri_partial), (make_full_uri_from_relative),
	(mozilla_dom_mouse_click_callback),
	(test_make_full_uri_from_relative):

	Fix bugzilla.eazel.com 3949.  Better (but still not perfect) 
	support for relative URI's.  The cases that aren't handled are rarely
	encountered in my experiance.  I'd make it perfect, but I just
	don't have time right now.
	Also added self-test.

2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-extensions.c:
	(eazel_services_label_new):
	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_item_new), (eazel_services_footer_update):
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_new):
	Place the font families, weights and sizes in the header file so
	that Arlo can arloify them.
	
2000-10-25  Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory.h:
	* libnautilus-extensions/nautilus-file-private.h:
	* libnautilus-extensions/nautilus-directory-async.c: (istr_equal),
	(istr_hash), (istr_set_new), (istr_set_insert), (add_istr_to_list),
	(istr_set_get_as_list), (istr_set_destroy): New set of functions
	for manipulating a set of case-insensitive strings (private for
	now).
	(mime_list_cancel): Change to use the istr_set.
	(get_filter_options_for_directory_count): Moved up so it can be
	used by the directory load code.
	(load_directory_done): Common function to use when a load is
	completed or cancelled.
	(dequeue_pending_idle_callback): Update file count and MIME list
	as well as just loading the files.
	(should_get_directory_count): New cover that takes into account
	the fact that a directory load is already getting the count.
	(should_get_mime_list): New cover that takes into account
	the fact that a directory load is already getting the MIME list.
	(start_monitoring_file_list): Set up more stuff since a load
	does a lot more now.
	(directory_count_start): Don't start a directory count if we are
	already loading the directory's file list.
	(mime_list_one), (mime_list_callback), (mime_list_load): Change to
	use the istr_set. Also removed some code that set variables that
	were never used.
	(mime_list_start): Don't start a MIME list if we are already
	loading the directory's file list.

	* components/adapter/Makefile.am:
	* components/hardware/Makefile.am:
	* components/html/Makefile.am:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/music/Makefile.am:
	* components/rpmview/Makefile.am:
	* components/sample/Makefile.am:
	* components/services/install/command-line/Makefile.am:
	* components/services/install/lib/Makefile.am:
	* components/services/install/nautilus-view/Makefile.am:
	* components/services/install/server/Makefile.am:
	* components/services/inventory/lib/Makefile.am:
	* components/services/inventory/nautilus-view/Makefile.am:
	* components/services/login/nautilus-view/Makefile.am:
	* components/services/nautilus-dependent-shared/Makefile.am:
	* components/services/summary/lib/Makefile.am:
	* components/services/summary/nautilus-view/Makefile.am:
	* components/services/time/command-line/Makefile.am:
	* components/services/time/nautilus-view/Makefile.am:
	* components/services/time/service/Makefile.am:
	* components/services/trilobite/libtrilobite/Makefile.am:
	* components/services/trilobite/sample/command-line/Makefile.am:
	* components/services/trilobite/sample/lib/Makefile.am:
	* components/services/trilobite/sample/nautilus-view/Makefile.am:
	* components/services/trilobite/sample/service/Makefile.am:
	* components/services/vault/command-line/Makefile.am:
	* components/tree/Makefile.am:
	* helper-utilities/authenticate/Makefile.am:
	* nautilus-installer/src/Makefile.am:
	Changed all use of CPPFLAGS to use INCLUDES instead as it says in
	the automake documentation.
	
	* libnautilus-extensions/nautilus-glib-extensions.h: Reformatting.
	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_remove_deep), (destroy_deep_helper),
	(nautilus_g_hash_table_destroy_deep_custom): Reformatting.

2000-10-25  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(new_folder_xfer_callback):
	new_folder_xfer_callback was not escaping the space in
	duplicate_name, this was causing us to not recognize
	second and subsequent new folders (& select them).
	* src/file-manager/fm-directory-view.c: (copy_move_done_callback):
	moved free call to better spot

2000-10-25  J Shane Culpepper  <pepper@eazel.com>

	* src/nautilus-window-service-ui.c: (goto_online_storage):

	Fixing url string.  Had one too many slashes.

2000-10-25  John Sullivan  <sullivan@eazel.com>

	Fixed various usability problems with the services log-in
	dialog that I ran into. Some coding tweaks too.

	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	(generate_error_dialog): move cast to cause fewer of them
	(name_or_password_field_activated): New function, auto-clicks the
	OK button if the password row is activated.
	(generate_login_dialog): move cast to cause fewer of them; use
	#defines for button indices and row numbers; changed "Opps" to
	"Oops" (Oops!); set default button to OK button; wire up
	name_or_password_field_activated; start with focus in Name field.

2000-10-25  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (nautilus_summary_view_load_uri),
	(merge_bonobo_menu_items):
	* src/Makefile.am:
	* src/nautilus-window-service-ui.c: (goto_online_storage),
	(goto_software_catalog):

	Fixing the services menu items to go to correct locations.

2000-10-25  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-query.c:
	Fixed a include problem.
	* components/services/install/lib/eazel-install-rpm-glue.h:
	Added /me to authors

2000-10-25  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_category):
	* nautilus-installer/src/installer.c:
	(eazel_installer_add_category):

	Add <DEFAULT/> option to the package list XML file, and make all
	default choices be pre-clicked when the user gets to the selection
	page.

2000-10-25  Darin Adler  <darin@eazel.com>

	* src/nautilus-applicable-views.c: (nautilus_navigation_info_new),
	(nautilus_navigation_info_free),
	(nautilus_navigation_info_get_location): Changed to store the
	location URI separate from the NautilusFile object. NautilusFile
	was munging URLs that had queries in them, causing big problems
	for the software catalog among other things. This is a good
	short-term fix.

2000-10-25  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Don't bomb out when db cannot be accessed.

2000-10-25  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-list.c:
	(nautilus_list_set_selection):
	nautilus_list_set_selection used to pass a bogus NautilusCListRow*
	to row_set_selected
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_new_folder):
	whitespace change

	* src/file-manager/fm-list-view.c:
	comment corrected

2000-10-25  Darin Adler  <darin@eazel.com>

	* components/adapter/bonobo-stream-vfs.c: (vfs_get_info),
	(vfs_set_info), (vfs_write), (vfs_read), (vfs_seek), (vfs_copy_to),
	(vfs_commit), (vfs_revert), (vfs_destroy),
	(bonobo_stream_vfs_class_init), (bonobo_stream_vfs_open):
	Update for changes to the BonoboStream class. Also did a thorough code
	review, fixed some small bugs, and added a bunch of FIXMEs for things
	that are broken.

2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/eazel-services-constants.h:
	Removed.  It was a bad try.  Stuff is now in eazel-services-extensions.h.
	
	* components/services/nautilus-dependent-shared/Makefile.am:
	* components/services/nautilus-dependent-shared/eazel-services-extensions.c:
	(pixbuf_new_from_name), (eazel_services_image_new),
	(eazel_services_label_new):
	* components/services/nautilus-dependent-shared/eazel-services-extensions.h:
	Add a place to put shared services extensions.
	
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(footer_item_new), (footer_remainder_new),
	(eazel_services_footer_update):
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_new):
	* components/services/nautilus-dependent-shared/test-footer-header.c:
	Remove a bunch of duplicated code and put it in a shared
	extensions location.  Make the footer real.  Add an item_clicked
	signal to the footer.

	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	Hook up the footer for item clicks.
	
	* libnautilus-extensions/nautilus-image.c:
	(nautilus_image_new_loaded):
	* libnautilus-extensions/nautilus-image.h:
	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_new_loaded):
	* libnautilus-extensions/nautilus-label.h:
	Add constructors that take a bunch of arguments for the various
	widgets attributes.  Makes the widgets easier to use for callers
	that need to tweak many attributes (like eazel services).
	
2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/.cvsignore:
	* components/services/nautilus-dependent-shared/Makefile.am:
	* components/services/nautilus-dependent-shared/eazel-services-constants.h:
	* components/services/nautilus-dependent-shared/eazel-services-footer.c:
	(eazel_services_footer_initialize_class),
	(eazel_services_footer_initialize), (footer_destroy),
	(pixbuf_new_from_name), (label_new), (label_enter_event),
	(label_leave_event), (label_button_press_event), (label_free_data),
	(label_free_uri), (image_new), (image_new_from_name),
	(buffered_widget_add_prelighting), (footer_item_new),
	(footer_remainder_new), (eazel_services_footer_new),
	(eazel_services_footer_update):
	* components/services/nautilus-dependent-shared/eazel-services-footer.h:
	* components/services/nautilus-dependent-shared/eazel-services-header.c:
	(eazel_services_header_initialize_class),
	(eazel_services_header_initialize), (header_destroy),
	(pixbuf_new_from_name), (label_new), (image_new),
	(image_new_from_name), (eazel_services_header_new),
	(eazel_services_header_set_text):
	* components/services/nautilus-dependent-shared/eazel-services-header.h:
	Two new widgets to deal with services views headers and footers.
	
	* components/services/install/nautilus-view/nautilus-service-install-view.c:
	(generate_install_form):
	* components/services/login/nautilus-view/nautilus-change-password-view.c:
	(generate_change_password_form):
	* components/services/summary/nautilus-view/nautilus-summary-view.c:
	(generate_summary_form):
	Use the new footer and header widgets.
	
	* components/services/nautilus-dependent-shared/shared-service-widgets.c:
	* components/services/nautilus-dependent-shared/shared-service-widgets.h:
	Retire some old code.

	* components/services/nautilus-dependent-shared/test-footer-header.c:
	(delete_event), (main):
	Add a test for the new header and footer widgets.
	
2000-10-25  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-label.c:
	(nautilus_label_size_request), (render_buffer_pixbuf):
	Make sure text layout honors the vertical and horizontal offsets.

	(nautilus_scalable_font_draw_text):
	* test/test-nautilus-image.c: (label_new), (label_enter_event),
	(label_leave_event), (label_free_data),
	(buffered_widget_add_prelighting), (header_new), (footer_item_new),
	(footer_remainder_new), (footer_new), (main):
	More work on prelighting footers.
	
2000-10-25  Andy Hertzfeld  <andy@eazel.com>

	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.c: (create_image_widget), (create_image_widget_from_uri):
	fixed bug where local images were not showing up in the summary
	view.
	
2000-10-24  Andy Hertzfeld  <andy@eazel.com>

	worked on bug 3898, selection in the aa icon view is too slow.
	Fixed by using a fill to make the selection pixbuf with some tiny
	blits for the rounded corners, instead of stretching a pixbuf.
	Also, made the selection color themable in the process.
	
	* libnautilus-extensions/nautilus-icon-canvas-item.c:
	(clear_rounded_corners), (draw_label_text_aa):
	make the selection pixbuf with a fill and then some
	blits for the corner.
	* libnautilus-extensions/nautilus-icon-container.c:
	(nautilus_icon_container_initialize), (icon_destroy),
	(nautilus_icon_container_set_is_fixed_size),
	(nautilus_icon_container_theme_changed):
	made it read the selection color from the current theme
	* libnautilus-extensions/nautilus-icon-private.h:
	added a field to keep the selection color w/alpha.
	* icons/default.xml:
	added semi-transparent gray selection color to default theme.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-buffered-widget.c:
	Remove a bunch of extraneous includes.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/icons/Makefile.am:
	Rename one of the icons.
	
	* test/test-nautilus-image.c: (delete_event), (icon_get_path),
	(pixbuf_new_from_name), (label_new), (label_enter_event),
	(label_leave_event), (label_new_with_prelight), (image_new),
	(image_new_from_name), (header_new), (footer_new), (main):
	Add better test for image and label widgets.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	Fix the broken build.  Add missing header to sources.
	
2000-10-24  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	Moved a CORBA include, so EAZEL_INSTALL_NO_CORBA doesn't include
	it
	
	* components/services/time/command-line/main.c: (main):
	* components/services/time/idl/trilobite-eazel-time-service.idl:
	* components/services/time/nautilus-view/trilobite-eazel-time-view.
	c: (server_button_pressed), (timediff_button_pressed),
	(trilobite_eazel_time_view_initialize),
	(trilobite_eazel_time_view_destroy):
	* components/services/time/service/trilobite-eazel-time-service-pri
	vate.h:
	* components/services/time/service/trilobite-eazel-time-service.c:
	(impl_Trilobite_Eazel_Time_Service_set_time_server),
	(trilobite_eazel_time_service_get_epv),
	(trilobite_eazel_time_service_finalize),
	(trilobite_eazel_time_service_initialize_load_config),
	(get_nist_time), (trilobite_eazel_time_service_get_server_time):
	Revived the timeservice, made it use nist/ntp (defaults to
	nist1.sjc.certifiedtime.com). Uses code from gnuclear to do the
	actual nist parse.
	
	* nautilus-installer/src/Makefile:
	Yes.
	* nautilus-installer/src/installer.c: (start_over),
	(add_update_package), (eazel_install_preflight), (check_system),
	(more_check_system):
	Fixed the "will update eog && will remove eog" bug. Now it just
	say "will update eog x 2". Also checks for rh7.x and rpm v.4.x
	
	* nautilus-installer/src/prescript:
	Temporarily hacked prescript to run
	/h/public/bin/eazel-trilobite-configure (if present), and set
	nautilus to use gegl as services server.
	
	* nautilus.spec.in:
	Updated deps to ORBit >= 0.5.3 and oaf >= 0.6.0

2000-10-24  Robey Pointer  <robey@eazel.com>

	* libnautilus-extensions/nautilus-directory-async.c:
	(mime_list_callback):

	Fix a typo that caused a failure to not report that it failed.

2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/nautilus-dependent-shared/icons/Makefile.am:
	* components/services/nautilus-dependent-shared/icons/eazel-logo-left-side-repeat.png:
	* components/services/nautilus-dependent-shared/icons/eazel-logo-right-side-eazel-logo.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-normal-fill.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-normal-left-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-normal-right-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-prelight-fill.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-prelight-left-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-prelight-right-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-remainder-fill.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-remainder-left-bumper.png:
	* components/services/nautilus-dependent-shared/icons/summary-service-remainder-right-bumper.png:

	New icons for summary view.
	
2000-10-24  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):
	lots of layout tweaks to please Arlo; it's still not finished yet
	since I wasn't able to shrink the news section properly
	
	* libnautilus-extensions/nautilus-tabs.c:
	(nautilus_tabs_initialize), (draw_tab_label), (draw_all_tabs),
	(nautilus_tabs_prelight_tab), (nautilus_tabs_select_tab):
	changed font size, text spacing and prelight behaviour as
	specified by Arlo.
	
	* icons/eazel/Back.png:
	* icons/eazel/Forward.png:
	* icons/eazel/Home.png:
	* icons/eazel/Refresh.png:
	* icons/eazel/Search.png:
	* icons/eazel/SearchWeb.png: 
	* icons/eazel/Services.png:
	* icons/eazel/Stop.png:
	* icons/eazel/Up.png:

	updated Susan's toolbar icons
	
2000-10-24  Arlo Rose  <arlo@eazel.com>

	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-active-bridge.png:
	Fixed a typo.

2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	* librsvg/art_rgba.c: (art_rgba_rgba_composite),
	(art_rgba_fill_run), (art_rgba_run_alpha):
	* librsvg/art_rgba.h:
	* librsvg/rsvg.c:
	Make Raph's latest changes work with the old version of libart in
	gnome-libs-1-0.
	
2000-10-24  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/i-directory.xml:
	* icons/arlo/emblem-nowrite-72.png:
	* icons/arlo/emblem-nowrite-96.png:
	Some old stuff I guess I never checked in...

	
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-fill.png:
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/active-prelight-bridge.png:
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-active-bridge.png:
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-right-bumper.png:
	* components/services/summary/nautilus-view/icons/
	gray_tab_pieces/prelight-left-bumper.png:
	Making the summary view tabs pre-light better.
	
2000-10-24  Raph Levien  <raph@acm.org>

	* librsvg/rsvg.c: Implemented the "opacity" property for objects
	and groups. This makes rsvg render more SVG files exported from
	Adobe Illustrator 9 correctly and should make Arlo happy.

	* librsvg/opacity.svg: New test file including opacity examples.

2000-10-24  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_update_news_entry_row), (authn_cb_failed),
	(login_button_cb), (generate_login_dialog),
	(nautilus_summary_view_load_uri):

	Adding login changes to the summary view.  Still needs a bit more
	work but looks better.

2000-10-24  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_destroy_deep_helper):
	These two fns now properly handle key == value (won't double free)

2000-10-24  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_xfer_ok):
	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_remove_deep),
	(nautilus_g_hash_table_destroy_deep_helper),
	(nautilus_g_hash_table_destroy_deep_custom),
	(nautilus_g_hash_table_destroy_deep):
	* libnautilus-extensions/nautilus-glib-extensions.h:
	* src/file-manager/fm-directory-view.c: (debuting_uri_data_free):
	Fix embarrassing check-in sloppiness

2000-10-24  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_remove_deep),
	(nautilus_g_hash_table_free_deep_helper),
	(nautilus_g_hash_table_free_deep_custom),
	(nautilus_g_hash_table_free_deep):
	* libnautilus-extensions/nautilus-glib-extensions.h:
	Fixed APIs of new utils to match existing, similar, fns.

	* src/file-manager/fm-directory-view.c: (debuting_uri_data_free),
	(debuting_uri_add_file_callback), (copy_move_done_data_free),
	(pre_copy_move_add_file_callback), (copy_move_done_partition_func),
	(copy_move_done_callback):
	Icons now left selected after copy_move operation.

2000-10-24  Brian Frank  <bfrank@eazel.com>

	* data/static_bookmarks.xml
	Updated bookmarks list to current links

2000-10-24  Darin Adler  <darin@eazel.com>

	Some work towards reducing load_directory calls.

	Also fixed bug 3978 (Many Bonobo warnings/errors on quit).
	
	* libnautilus-extensions/nautilus-directory-async.c:
	(set_up_request_by_file_attributes),
	(update_file_info_in_list_if_needed),
	(dequeue_pending_idle_callback), (request_is_satisfied),
	(get_info_callback), (file_info_start):
	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-file-attributes.h:
	* libnautilus-extensions/nautilus-file-private.h:
	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_new_from_info), (destroy),
	(nautilus_file_update_info), (nautilus_file_update_name),
	(nautilus_file_compare_by_type),
	(nautilus_file_get_string_attribute), (get_description),
	(update_description_for_link), (nautilus_file_get_type_as_string),
	(nautilus_file_get_mime_type), (nautilus_file_is_mime_type),
	(nautilus_file_check_if_ready):
	* libnautilus-extensions/nautilus-file.h:
	* libnautilus-extensions/nautilus-mime-actions.c:
	(nautilus_mime_actions_get_required_file_attributes),
	(nautilus_mime_get_default_action_type_for_file),
	(nautilus_mime_get_default_application_for_file_internal),
	(nautilus_mime_get_default_component_for_file_internal),
	(nautilus_mime_get_short_list_applications_for_file),
	(nautilus_mime_get_short_list_components_for_file),
	(nautilus_mime_get_short_list_methods_for_file),
	(nautilus_mime_get_all_applications_for_file),
	(nautilus_mime_get_all_components_for_file),
	(nautilus_mime_set_short_list_applications_for_file),
	(nautilus_mime_set_short_list_components_for_file):
	Get rid of the distinction between slow and default MIME type once
	again. We (Pavel, Maciej, John, and I) decided it's better not to
	have multiple opinions on the MIME type, despite our original idea
	that we needed the slow MIME type for some things, even on remote
	file systems.
	
	* libnautilus-extensions/nautilus-glib-extensions.h:
	Fixed the formatting in this file.
	
	* src/file-manager/fm-directory-view.c: (load_location_callback):
	Only force a reload if we are reloading the same directory. This
	is needed to take advantage of the loading already done for us by
	the framework.
	(load_directory): Take a NautilusDirectory instead of a URI string.
	Also take a boolean parameter to control if we force a reload.
	(finish_loading_uri): Respect the boolean parameter that tells us
	whether to force a reload.
	(filtering_changed_callback): Use the new load_directory.
	
	* src/nautilus-applicable-views.c: (nautilus_navigation_info_new),
	(nautilus_navigation_info_cancel), (nautilus_navigation_info_free):
	Monitor the directory while we are loading the component. We
	already need to load the directory to get the MIME types, so this
	does no additional harm, and it prepares us to consolidate the
	loading done for different reasons.
	
	* src/nautilus-main.c: (main): Use nautilus_setenv instead of
	putenv, since it's more portable.
	
	* src/nautilus-window-manage-views.c: Quick simplification pass on
	state machine. Got rid of the use of varargs and renamed a bunch
	of things.
	
	* src/nautilus-window-manage-views.h:
	* src/nautilus-window-private.h:
	Moved external functions from nautilus-window-manage-views.c to
	all be in nautilus-window-manager-views.h. This is one step in
	reducing the number of clients that need access to private stuff
	in NautilusWindow.
	
	* src/nautilus-window-service-ui.c: (detach_service_ui),
	(nautilus_window_install_service_ui): Detach the service UI on
	"destroy" rather that using set_data_full, because finalize time
	is too late.

	* src/nautilus-view-frame.c: (nautilus_view_frame_destroy):
	Got rid of extra unref that was messing things up here.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/nautilus-mozilla-content-view.c:
	(uris_are_equal), (nautilus_mozilla_content_view_load_uri):
	Fix for bug 3908.  Browsing to web documents deeper than the root
	is broken.  I fixed it by backing out my previous broken fix for
	"reloading" a web page.  There is a separate bug for the reload
	issue which ill fix properly later.
	
2000-10-24  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Make the require rpm version be 3.0.4 or greater.  Not just 3.0.4.
	
2000-10-24  Andy Hertzfeld  <andy@eazel.com>

	added new certified emblem from Susan
	
	* data/emblems/Makefile.am:
	* data/emblems/certified.png:
	added certified.png
	* icons/Makefile.am:
	* icons/emblem-certified.svg:
	added emblem-certified.svg, removed emblem-certified.gif

2000-10-23  Pavel Cisler  <pavel@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(parse_previous_duplicate_name),
	(nautilus_self_check_file_operations):
	Fix 3971 - "duplicate" from context-click menu adds space to
	beginning of the name.
	This was a case of misinterpretting files such as ".bashrc" as
	an extension.
	Added tests that catch this problem and fixed it. 

2000-10-24  Josh Barrow  <josh@eazel.com>

	* nautilus.spec.in:
	Make it require 3.0.4 or *greater*.  I'm using 3.0.5 and it 
	works fine.

2000-10-23  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_category):
	* nautilus-installer/src/installer.c: (strip_categories),
	(start_over_make_category_func), (start_over),
	(jump_to_retry_page), (add_force_packages), (add_force_remove),
	(add_update_package), (toggle_button_toggled),
	(eazel_installer_add_category), (eazel_installer_do_install):

	add <EXCLUSIVE/> tag to categories in package-list.xml to indicate
	that a category can't be selected with any other category (it's
	mutually exclusive with them).  added puppet-strings to the
	bootstrap installer to support that.
	
2000-10-23  Eskil Heyn Olsen  <eskil@eazel.com>

	* user-guide/C/Makefile.am:
	Fixing tinderbox build.
	
2000-10-23  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:
	Some code to test for rpm version. We require 3.0.4. If it fucks
	up, feel free to revert.
	
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	Moved the DEFAULT_RPM_DB_ROOT into -private.h
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Code so you can call the query function directly
	(EAZEL_INSTALL_SLIM/NO_CORBA)
	
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):
	Moved support for rpm < 3.0.4
	
	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/callbacks.c: (begin_install):
	* nautilus-installer/src/installer.c: (insert_info_page),
	(create_window), (check_system), (more_check_system),
	(eazel_installer_initialize):
	If eazel-hacking is installed, offer to remove it.
	
2000-10-23  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/nautilus-view/main.c: (main):
	Add gconf-init
	
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (save_default_eazel_service_user), (authn_cb_succeeded),
	(am_i_logged_in), (logged_in_callback),
	(nautilus_summary_view_initialize),
	(nautilus_summary_view_destroy):

	Store previously used Eazel Service user for later.  The ammonite
	login dialog makes use of this as the default username.
	

2000-10-23  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):

	Fix a few warnings that show up on older rpmlibs.

2000-10-23  Pavel Cisler  <pavel@eazel.com>

	Last part of fix to 2989 - Disk thrashing on Nautilus startup.
	* libnautilus-extensions/nautilus-trash-directory.c: (add_volume):
	When starting up, don't try to create a Trash up-front, just search
	for existing Trash directories. The first time Nautilus ever runs,
	this will still take the same ammount of time, the next time it
	will use the cached entries.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_can_move_file_to_trash):
	Trash monitor no longer creates Trash directories on startup.
	Create them lazily when trying to move an item to the Trash.

2000-10-23  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/Makefile.am: make it install files for real...

2000-10-23  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 1945, Image viewer component does not display XPMs
	Fixed bug 1964, doesn't load xpm images using the loader framework.
	
	* components/image-viewer/nautilus-image-view.c:
	(load_image_from_stream):
	Fixed some leaks and call close on the loader to fix TIFF and XPM loading.
	
	* libnautilus-extensions/nautilus-gdk-pixbuf-extensions.c:
	(nautilus_gdk_pixbuf_load):
	Now it does. Loader must be closed to cause callbacks an non-progressive
	loaders to complete.

	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):
	Fixed a couple of build breaking unitilaized variable warnings.
	
	* components/tree/nautilus-tree-view.c:
	Updated function call to new prototype that was causing build to fail.	

2000-10-23  Mathieu Lacage  <mathieu@eazel.com>

	* components/help/hyperbola-filefmt.c:
	(fmt_help_populate_tree_from_subdir): add lookup 
	for sgml and xml files.

2000-10-23  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_local_xml_package_list):
	* nautilus-installer/src/installer.c: (strip_categories),
	(start_over_make_category_func), (start_over),
	(jump_to_retry_page), (add_force_packages), (add_force_remove),
	(add_update_package), (eazel_installer_add_category),
	(eazel_installer_do_install), (eazel_installer_initialize):
	* nautilus-installer/src/link.sh:
	
	Reduce category description text to 10pt and adjust the layout to
	match Arlo specs.  Change g_message's to LOG_DEBUG just to annoy
	Eskil (actually, so we can turn them on/off easily with --debug).

2000-10-23  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/nautilus-file-operations.c:
	(handle_xfer_ok), (sync_xfer_callback),
	(nautilus_file_operations_copy_move),
	(nautilus_file_operations_move_to_trash),
	(nautilus_file_operations_delete), (do_empty_trash):
	* libnautilus-extensions/nautilus-file-operations.h:
	Added callback for copy_move operation - to support
	selecting icons afterward.

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(nautilus_g_hash_table_remove_deep_custom),
	(nautilus_g_hash_table_remove_deep),
	(nautilus_g_hash_table_free_deep_helper),
	(nautilus_g_hash_table_free_deep_custom),
	(nautilus_g_hash_table_free_deep):
	* libnautilus-extensions/nautilus-glib-extensions.h:
	Added misc hash table utilities

	* src/file-manager/fm-directory-view.c: (debuting_uri_data_free),
	(debuting_uri_add_file_callback), (copy_move_done_data_free),
	(pre_copy_move_add_file_callback), (pre_copy_move),
	(copy_move_done_partition_func), (copy_move_done_callback),
	(fm_directory_view_create_links_for_files),
	(fm_directory_view_duplicate_selection), (new_folder_done),
	(fm_directory_view_new_folder),
	(fm_directory_view_move_copy_items):
	Hooked up to new copy_move callback. There are still problems,
	the icons get unselected by someone after they're selected.

2000-10-23  Eskil Heyn Olsen  <eskil@eazel.com>

	* README:
	Added that we require rpm 3.0.4 if --enable-eazel-service

	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):
	Fix for older rpm's (although installation will probably still
	be borked, should insert #error instead.

	* nautilus.spec.in:
	nautilus-trilobite requires rpm = 3.0.4

2000-10-23  Robey Pointer  <robey@eazel.com>

	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (create_package):

	Nautilus doesn't always encode "rpm_id=" into "rpm_id%3D", so
	check for both.

2000-10-23  Darin Adler  <darin@eazel.com>

	* Makefile.shared: Fix extra dependency that was causing the xml.h
	files to be generated too often.
	* configure.in: Fix code that detects the gcc options to work even
	with -O on.
	
	* src/nautilus-view-frame.h:
	* src/nautilus-view-frame.c:
	(nautilus_view_frame_initialize_class),
	(view_frame_loaded), (view_frame_failed),
	(nautilus_view_frame_handle_client_destroy),
	(nautilus_view_frame_handle_client_gone),
	(nautilus_view_frame_new), (check_if_view_is_gone),
	(nautilus_view_frame_set_to_component),
	(nautilus_view_frame_get_is_underway):
	Revamp set of signals to be easier to understand. Handle all
	failures uniformly,
	
	* src/nautilus-window-manage-views.h:
	* src/nautilus-window-manage-views.c: (change_selection),
	(nautilus_window_update_for_new_location),
	(nautilus_window_has_really_changed),
	(nautilus_window_set_state_info),
	(nautilus_window_set_sidebar_panels),
	(zoom_level_changed_callback), (get_history_list_callback),
	(change_selection_callback), (change_status_callback),
	(failed_callback), (load_underway_callback),
	(load_complete_callback), (open_location_callback),
	(open_location_in_new_window_callback), (title_changed_callback),
	(nautilus_window_connect_view), (nautilus_window_disconnect_view):
	Make more of the view management private to this file. Use the
	signals by their new names. Disconnect all the signals, not just
	the error-related ones.
	
	* src/nautilus-window.c:
	(nautilus_window_set_content_view_widget): Updated the debugging
	check to do it with the new Bonobo UI calls.

2000-10-23  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form):
	made the summary view not display the news section when there is
	no news to display.
	
2000-10-23  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	Added a comment to the ssl_rename variable.
	Added a function stub for querying the server about packages. Not
	impl yet.
	
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_transaction_fill_hash),
	(eazel_install_monitor_process_pipe),
	(eazel_install_monitor_err_process_pipe),
	(eazel_install_monitor_subcommand_pipe),
	(eazel_install_do_transaction_all_files_check),
	(eazel_install_clean_name_to_package_hash),
	(eazel_install_start_transaction),
	(eazel_install_check_existing_packages),
	(eazel_install_fetch_dependencies), (dump_one_package),
	(eazel_install_do_file_conflict_check),
	(eazel_install_ensure_deps), (eazel_uninstall_upward_traverse),
	(eazel_uninstall_globber):
	Added comments and clarified some variable names.
	No file dep checking on --force.
	No whatrequires check on uninstall on --force
	Moved the all_files_check call into ensure_deps, so if packages
	are pruned we can rerun ensure_deps.
	No longer check if a provides file is a directory before conflict
	check (not needed because of fix in eazel-install-types).
	Calling g_main_iteration during file conflict checking if
	EAZEL_INSTALL_SLIM is set.
	Clean up some lists and hashtables at the end of a transaction.
	
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_finalize), (eazel_install_class_initialize),
	(eazel_install_initialize), (eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_revert_transaction_from_xmlstring),
	(eazel_install_emit_done):
	All default funcs are NULL if EAZEL_INSTALL_NO_CORBA set.
	Set private->revert to TRUE during revert.
	Some more debug output.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file), (eazel_install_fetch_file),
	(eazel_install_fetch_package), (get_search_url_for_package):
	Don't add the package to downloaded_files list till after we've
	checked the version and name.
	If revert, use &flag=8 otherwise 12.
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Assert that the dbs hashtable is !null.
	
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings),
	(eazel_install_start_transaction_make_rpm_argument_list),
	(eazel_install_monitor_rpm_process_pipe),
	(eazel_install_free_rpm_system),
	(eazel_install_prepare_rpm_system),
	(eazel_install_package_modifies_provides_compare),
	(eazel_install_do_rpm_dependency_check):
	Loads of debug code to grab stderr & stdout output from rpm.
	More comments in the do_rpm_dependency_check func.
	
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new), (categorydata_list_copy), (categorydata_copy),
	(packagedata_list_copy), (packagedata_copy),
	(packagedata_fill_from_rpm_header), (packagedata_destroy):
	Added a boolean flag to packagedata_copy, toggles whether or not
	to deep copy.
	Fix rpm header load to not add directories to the ->provides list
	(using a wonderfull O(n) function, I'll leave it to the reader to
	improve it).
	Uncommented the rpmheaderFree call.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(eazel_install_packagelist_to_xml):
	More debug output (we can never have enough!)
	
	* nautilus-installer/src/Makefile:
	Yes.
	
	* nautilus-installer/src/callbacks.c: (druid_cancel),
	(druid_delete), (begin_install), (druid_finish), (prep_install):
	* nautilus-installer/src/installer.c: (create_what_to_do_page),
	(strip_categories), (start_over_make_category_func), (start_over),
	(jump_to_retry_page), (create_window), (eazel_install_progress),
	(eazel_download_progress), (add_force_packages),
	(add_force_remove), (add_update_package), (get_required_name),
	(get_detailed_errors_foreach), (get_detailed_errors),
	(eazel_install_preflight), (eazel_install_delete_files),
	(install_done), (check_system), (eazel_installer_do_install),
	(eazel_installer_initialize):
	* nautilus-installer/src/installer.h:
	* nautilus-installer/src/link.sh:
	* nautilus-installer/src/main.c: (main):
	Now takes a --tmpdir argument
	Puts builddate in window title
	Has a system for creating RepairCases when traversing a tree in
	install_failed signal handler.
	Now handles stuff like "need to updage eog" and then there is no
	update for eog.
	Hopefully also handles circular conflict cases.
	Now has a completely obfuscated call stack...

2000-10-23  Mathieu Lacage  <mathieu@eazel.com>

	* user-guide/C/sgml/chapter-1.sgml:
	applying patch from John Fleck to make it work better
	with the current gnome-db2html behaviour.

2000-10-23  John Sullivan  <sullivan@eazel.com>

	* src/nautilus-window-menus.c: (append_bookmark_to_menu):
	Fixed memory leak I happened to notice.

2000-10-23  J Shane Culpepper  <pepper@eazel.com>

	* nautilus.spec.in:

	Fixing the spec to pick up new image directory.

2000-10-23  John Sullivan  <sullivan@eazel.com>

	Fixed 3568: Bonobo verbs and data leak when menus rebuilt

	Michael Meeks added verb-removing support to Bonobo, which
	I have now deployed in Nautilus.

	* libnautilus-extensions/nautilus-bonobo-extensions.h:
	* libnautilus-extensions/nautilus-bonobo-extensions.c:
	(remove_verbs): New function, walks through the XML nodes
	beneath a specified path and removes each verb it finds.
	(nautilus_bonobo_remove_menu_items_and_verbs): Now calls
	remove_verbs; also changed name from _remove_menu_items
	for clarity.

	* src/file-manager/fm-directory-view.c:
	(reset_bonobo_open_with_menu):
	* src/nautilus-window-menus.c:
	(nautilus_window_remove_bookmarks_menu_items),
	(nautilus_window_remove_go_menu_items): Removed FIXMEs
	and updated for name change.

2000-10-23  John Sullivan  <sullivan@eazel.com>

	* src/nautilus-applicable-views.c:
	(get_nautilus_navigation_result_from_gnome_vfs_result):
	Improved the warning message output to the terminal when 
	get-file-info returns a GnomeVFSResult for which we don't 
	have a nice user error message.

2000-10-23  Mike Fleming  <mfleming@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(trilobite_get_services_address)
	Added small comment to currently unused  function with regards to
	format of gconf paramameter (services-host)

2000-10-22  Martin Baulig  <baulig@suse.de>

	This is Maciej checking in Martin's fix for 3691. Credit to him,
	blame to me.
	
	* components/adapter/nautilus-adapter-embed-strategy.h
	(NautilusAdapterEmbedStrategyClass): Added "activate" and "deactivate"
	signals.
	(nautilus_adapter_embed_strategy_get): Removed ui_container argument.
	(nautilus_adapter_embed_strategy_activate): New function; emits
	the "activate" signal.
	(nautilus_adapter_embed_strategy_deactivate): New function; emits
	the "deactivate" signal.

	* components/adapter/nautilus-adapter-control-embed-strategy.c
	(nautilus_adapter_control_embed_strategy_activate): New static function;
	this is the handler of the "activate" signal.
	(nautilus_adapter_control_embed_strategy_deactivate): New static function;
	this is the handler of the "deactivate" signal.

	* components/adapter/nautilus-adapter-embeddable-embed-strategy.c
	(nautilus_adapter_embeddable_embed_strategy_activate): New static function;
	this is the handler of the "activate" signal.
	(nautilus_adapter_embeddable_embed_strategy_deactivate): New static function;
	this is the handler of the "deactivate" signal.

	* components/adapter/nautilus-adapter.c (nautilus_adapter_activate_callback):
	New static function; connect this to the "activate" signal of the adapter
	control.

2000-10-23  Kjartan Maraas  <kmaraas@gnome.org>

	* src/nautilus-shell-ui.xml.h: Check in a file containing
	the strings to be translated instead of the 0-byte file that's
	there now.
	
2000-10-23  Andy Hertzfeld  <andy@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (service_tab_selected_callback),
	(updates_tab_selected_callback):
	made the updates section of the summary use the new, image-based tabs.
	
	* libnautilus-extensions/nautilus-tabs.c: (draw_all_tabs):
	made it handle the right edge for the single tab case properly.
	
2000-10-22  Andy Hertzfeld  <set EMAIL_ADDRESS environment variable>

	* components/services/summary/
		nautilus-view/nautilus-summary-view.c
	: (generate_summary_form), (generate_login_dialog),
	(nautilus_summary_view_load_uri), (service_tab_selected_callback):
	
	added image-based tabs to the summary view.  Also, fixed problem where
	the throbber kept spinning until the login dialog was dismissed by
	making it a non-modal dialog by refraining from calling gnome_run_dialog
	Currently, only the service tabs have been converted but the update
	tab is coming soon.
	
	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-tabs.c:
	(nautilus_tabs_initialize_class), (nautilus_tabs_initialize),
	(nautilus_tabs_new), (tab_item_destroy), (tab_item_destroy_cover),
	(nautilus_tabs_destroy), (nautilus_tabs_unload_tab_pieces),
	(load_tab_piece), (nautilus_tabs_load_tab_pieces),
	(nautilus_tabs_hit_test), (measure_height), (recalculate_size),
	(nautilus_tabs_size_request), (draw_tab_piece_aa),
	(draw_pixbuf_tiled_aa), (allocate_cleared_pixbuf),
	(measure_tab_name), (draw_tab_label), (draw_all_tabs),
	(tab_item_find_by_name), (nautilus_tabs_expose),
	(nautilus_tabs_draw), (nautilus_tabs_add_tab),
	(nautilus_tabs_remove_tab), (nautilus_tabs_prelight_tab),
	(nautilus_tabs_select_tab), (nautilus_tabs_press_event),
	(nautilus_tabs_leave_event), (nautilus_tabs_motion_event):
	* libnautilus-extensions/nautilus-tabs.h:
	added a new class for the fancy Arlo tabs in the summary view,
	based on the sidebar tabs.

	* configure.in:
	* components/services/summary/
		nautilus-view/Makefile.am:
	* components/services/summary/
		nautilus-view/icons/.cvsignore:
	* components/services/summary/
		nautilus-view/icons/Makefile.am:
	* components/services/summary/
		nautilus-view/icons/gray_tab_pieces/.cvsignore:
	* components/services/summary/
		nautilus-view/icons/gray_tab_pieces/*.png
	
	added Arlo's new tab images for the summary view
	
	* src/nautilus-property-browser.c:
	(nautilus_property_browser_initialize), (add_new_button_callback),
	(done_button_callback):
	
	added a done button to the property dialog to make it easier to
	dismiss it.
	
2000-10-22  Mike Fleming  <mfleming@eazel.com>

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(timed_wait_free), (timed_wait_callback):

	Made timed-wait dialog remember the dialog.  Was being triggered
	during a DAV rename w/ debug info on.

2000-10-22  Robert Brady  <rwb197@zepler.org>

	* configure.in: Added en_GB to ALL_LINGUAS.

	reviewed by: Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic2.c:
	(is_satisfied), (download_packages):
	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_fetch_remote_file):

	Fix thinko (caused by myself in October) that caused the stop
	button to only cancel one download and then aggravatingly continue
	with the remaining downloads.

	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_download_progress), (impl_preflight_check),
	(impl_download_failed), (impl_dep_check), (impl_install_progress),
	(impl_uninstall_progress), (impl_md5_check_failed),
	(impl_install_failed), (impl_uninstall_failed),
	(eazel_install_callback_simple_query):
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_string_sequence_to_glist),
	(g_list_to_corba_string_sequence),
	(corba_packagedatastruct_fill_from_packagedata),
	(corba_packagedatastruct_from_packagedata),
	(corba_packagedatastructlist_fill_from_packagedata_list),
	(corba_packagedatastructlist_from_packagedata_list),
	(new_fake_md5), (traverse_packagetree_md5),
	(corba_packagedatastruct_fill_deps),
	(corba_packagedatastructlist_foreach),
	(corba_packagedatastructlist_from_packagedata_tree),
	(packagedata_from_corba_packagedatastruct),
	(packagedata_list_from_corba_packagedatastructlist),
	(packagedata_tree_from_corba_packagedatastructlist),
	(corba_category_list_from_categorydata_list),
	(categorydata_list_from_corba_categorystructlist):
	* components/services/install/lib/eazel-install-corba-types.h:
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install_install_packages),
	(impl_Eazel_Install_uninstall_packages),
	(impl_Eazel_Install_simple_query):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_emit_preflight_check_default),
	(eazel_install_emit_install_failed_default),
	(eazel_install_emit_uninstall_failed_default):
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (eazel_install_packagedata_to_xml_int),
	(eazel_install_packagedata_to_xml),
	(eazel_install_packagelist_to_xml):
	* components/services/install/lib/eazel-install-xml-package-list.h:

	Add proper "breaks", "modifies", and "depends" structures to the
	corba interface, by using package MD5 strings to serve as "soft
	pointers" between packages in a package tree.  Convert the
	preflight, install_failed, and uninstall_failed signals to use the
	new package-tree type instead of munging into and out of XML.
	Also fixed up the API's to the corba conversion routines so they
	would make a valiant attempt not to leak memory.

	* components/services/install/lib/eazel-package-system-types.c:
	(packagedata_copy):

	Don't forget to copy that pesky MD5!
	
	* components/services/install/lib/eazel-package-system-types.h:

	Satisfy Robey's desire to avoid Carpal Tunnel Syndrome.
	
	* components/services/install/lib/eazel-softcat.c:
	(eazel_softcat_string_to_sense_flags),
	(get_search_url_for_package):
	* components/services/install/lib/eazel-softcat.h:

	Add function to convert a sense string back into flags.
	
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (flatten_package_tree_depends_foreach),
	(flatten_package_tree_foreach):

	Fix up the install view to use the new "depends" chain instead of
	the old "soft_depends" which is now empty.

2001-02-02  Ramiro Estrugo  <ramiro@eazel.com>

	* libnautilus-extensions/nautilus-metafile-factory.c: (corba_open):
	Add new line at end of file to make redhat7 build happy. 
	
2001-02-01  Ramiro Estrugo  <ramiro@eazel.com>

	reviewed by: Maciej Stachowiak  <mjs@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_defaults),
	(global_preferences_install_visibility),
	(global_preferences_install_sidebar_panel_defaults):
	* libnautilus-extensions/nautilus-preferences.c:
	(nautilus_preferences_get_user_level):
	* libnautilus-extensions/nautilus-preferences.h:
	* src/nautilus-first-time-druid.c: (set_up_user_level_page):
	* src/nautilus-window-menus.c: (get_user_level_icon_name),
	(nautilus_window_initialize_menus), (convert_verb_to_user_level),
	(convert_user_level_to_path):
	* test/test-nautilus-preferences-change.c: (main):
	Change 'hacker' to 'advanced' for the advanced user level so that
	the names used for storage match those used for display.

2001-02-01  Maciej Stachowiak  <mjs@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com> and 
	             Robey Pointer  <robey@eazel.com>

	Fix bugs 5528 (oaf command-line options show up in main program
	section, not a separate section) and 5510 (descriptions of
	OAF-specific options in --help are not translated). To do this I
	had to change the way the oaf popt options are processed in all
	the places that do so.

	* components/adapter/main.c: (main):
	* components/hardware/main.c: (main):
	* components/help/hyperbola-main.c: (main):
	* components/image-viewer/Nautilus_View_image.oaf.in:
	* components/image-viewer/nautilus-image-view.c:
	(init_server_factory):
	* components/loser/content/main.c: (main):
	* components/loser/sidebar/main.c: (main):
	* components/mozilla/main.c: (main):
	* components/music/main.c: (main):
	* components/notes/nautilus-notes.c: (main):
	* components/rpmview/main.c: (main):
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (main):
	* components/services/install/nautilus-view/main.c: (main):
	* components/services/login/nautilus-view/main.c: (main):
	* components/services/summary/nautilus-view/main.c: (main):
	* components/services/time/command-line/main.c: (main):
	* components/services/time/nautilus-view/main.c: (main):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_init):
	* components/shell/shell.c:
	* components/text/Nautilus_View_text.oaf.in:
	* components/text/main.c: (main):
	* components/throbber/main.c: (main):
	* components/tree/main.c: (main):
	* libnautilus/nautilus-view-standard-main.c:
	(nautilus_view_standard_main_multi):
	* src/Nautilus_shell.oaf.in:
	* src/nautilus-main.c: (main):
	* test/test-nautilus-mime-actions-set.c: (main):
	* test/test-nautilus-mime-actions.c: (main): Register oaf options
	with gnomelib_register_popt_options and move oaf_init call to
	before gnome_init to fix the aforementioned bugs.

2001-02-01  Rebecca Schulman  <rebecka@eazel.com>
	Fixed bug 5648, bad ui in the indexing info
	dialog.

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	* src/file-manager/nautilus-indexing-info.c:
	(get_index_percentage_complete), (initialize_dialog),
	(get_text_for_progress_label), (update_progress_display),
	(show_index_progress_dialog), (show_reindex_request_dialog),
	(recreate_and_show_reindex_request_dialog),
	(update_file_index_callback),
	(last_index_time_and_reindex_button_dialog_new),
	(index_progress_dialog_new),
	(destroy_indexing_info_dialogs_on_exit),
	(show_indexing_info_dialog): Rework this file.  Use two separate
	index dialogs for the case where the index is going, and not
	going.  When "update now" is pressed, switch to the index progress
	dialog.  Report errors reported by and unavailibility of the
	indexing service.

	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(nautilus_create_info_dialog):
	* libnautilus-extensions/nautilus-stock-dialogs.h:
	Add this for use in creating the indexing info dialog.
	

2001-02-01  Michael K. Fleming  <mfleming@eazel.com>

	reviewed by: <robey@eazel.com>

	Bug 6103 a user can install any package from softcat without login 
	Bug 4514 error msg when register during softcat install 

	Login dialog for the install view, with working registration, cancel,
	etc.


	* components/services/install/nautilus-view/Makefile.am:
	* components/services/install/nautilus-view/main.c: (main):
	* components/services/install/nautilus-view/nautilus-service-instal
	l-view.c: (nautilus_service_install_view_destroy),
	(nautilus_install_parse_uri), (nautilus_service_install_done),
	(user_login_callback),
	(nautilus_service_install_view_update_from_uri),
	(nautilus_service_install_view_update_from_uri_finish),
	(nautilus_service_install_view_load_uri):
	* components/services/summary/nautilus-view/nautilus-summary-menu-i
	tems.c: (merge_bonobo_menu_items):
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (update_header), (nautilus_summary_view_load_uri):
	* src/nautilus-window-service-ui.c: (goto_online_storage),
	(goto_software_catalog):

2001-02-01  Michael Engber  <engber@eazel.com>

	* libnautilus-extensions/Makefile.am:
	* libnautilus-extensions/nautilus-metafile-factory.c:
	(nautilus_metafile_factory_initialize_class),
	(nautilus_metafile_factory_get_epv),
	(nautilus_metafile_factory_get_vepv),
	(nautilus_metafile_factory_create_servant),
	(nautilus_metafile_factory_initialize), (destroy),
	(nautilus_meta_file_factory_new), (corba_open):
	* libnautilus-extensions/nautilus-metafile-factory.h:
	* libnautilus-extensions/nautilus-metafile-server.idl:
	* libnautilus-extensions/nautilus-metafile.c:
	(nautilus_metafile_initialize_class), (nautilus_metafile_get_epv),
	(nautilus_metafile_get_vepv), (nautilus_metafile_create_servant),
	(nautilus_metafile_initialize), (destroy), (nautilus_metafile_new),
	(corba_get), (corba_get_list), (corba_set), (corba_set_list),
	(corba_copy), (corba_remove), (corba_rename),
	(corba_register_monitor), (corba_unregister_monitor):
	* libnautilus-extensions/nautilus-metafile.h:
	Initiall check-in of new metadata APIs (corba) - not hooked
	up yet.

2001-02-01  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>
	
	Fixed bug 6941, 'Clean Up By Name' feature on the desktop keep
	switching file locations after being 'cleaned up'
	
	* src/file-manager/fm-desktop-icon-view.c:
	(desktop_icons_compare_callback):
	In the case of identical links tpyes, compare by name.	
		
	More work on gmc transition tool
	
	* src/nautilus-first-time-druid.c:
	(druid_finished):
	Hide druid widget before performing startup tasks.
	
	(next_proxy_configuration_page_callback),
	(add_nautilus_to_session):

2001-02-01  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Gene Ragan <gzr@eazel.com>

	Fix 6152 (Dragging a file to the trash will bring up a replace
		  dialog)
	Fix 5387 (Dragging a file within Trash gives "already exists"
		 error)

	* libnautilus-extensions/nautilus-drag.c:
	* libnautilus-extensions/nautilus-drag.h:
	(nautilus_drag_items_local), (nautilus_drag_items_in_trash):
	Add more convenience calls for Trash handling.
	
	* libnautilus-extensions/nautilus-file-utilities.h:
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_uri_is_in_trash):
	New convenience call for Trash handling.

	* libnautilus-extensions/nautilus-file.c:
	(nautilus_file_is_in_trash):
	Use the new nautilus_uri_is_in_trash call.

	* libnautilus-extensions/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move):
	Handle the case where a file is dragged into a Trash window or
	onto a Trash icon as if the "Move to Trash" command was issued -
	if there is a name conflict with a pre-existing file in the Trash,
	use a new unique name for the new file.
	
	* libnautilus-extensions/nautilus-icon-dnd.c:
	(nautilus_icon_container_selection_items_local):
	Handle files in the Trash properly - doing a parent match with
	the container URI fails for these, special case Trash handling.

2001-02-01  John Sullivan  <sullivan@eazel.com>

	reviewed by: Pavel Cisler <pavel@eazel.com>

	Fixed bug 143 (zooming in list view doesn't affect font size)

	Maybe I get the award for "oldest reported bug fixed recently"?

	* src/file-manager/fm-list-view.c: 
	(fm_list_view_update_font): New function, started with guts of
	fm_list_view_font_family_changed but also takes zoom level into
	account when choosing font size.
	(set_up_list): Call _update_font instead of _font_family_changed,
	just 'cuz it makes more sense.
	(fm_list_view_set_zoom_level): Call _update_font.
	(fm_list_view_font_family_changed): Extracted guts to
	_update_font.

2001-02-01  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 6181 (funny mouse clicking freezes Nautilus)

	* libnautilus-extensions/nautilus-icon-container.c:
	(button_press_event): Ignore middle & right button
	presses when we're dragging a selection rectangle.

2001-02-01  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	* libnautilus-extensions/nautilus-global-preferences.c:
	(global_preferences_install_descriptions):
	Parenthesize parenthetical part of "slow but complete
	search" checkbox label.
	(global_preferences_create_dialog): Use SHORT_ENUM
	instead of ENUM type for executable text file
	activation options so they all go on one line, taking
	less precious vertical screen real estate.

2001-02-01  Darin Adler  <darin@eazel.com>

	* components/services/install/lib/eazel-package-system-types.h:
	Add missing packagedata_destroy prototype to make it compile
	on systems with RPM 4 (like mine).

2001-02-01  Maciej Stachowiak  <mjs@eazel.com>

	* ChangeLog: rolled over to ChangeLog-20010201.

